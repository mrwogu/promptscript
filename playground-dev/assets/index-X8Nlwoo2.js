var G0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var dO=G0((_t,Pt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function qm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Uu={exports:{}},us={},Du={exports:{}},ge={};var Jh;function H0(){if(Jh)return ge;Jh=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function E(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function F(A,j,fe){this.props=A,this.context=j,this.refs=N,this.updater=fe||k}F.prototype.isReactComponent={},F.prototype.setState=function(A,j){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,j,"setState")},F.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=F.prototype;function _(A,j,fe){this.props=A,this.context=j,this.refs=N,this.updater=fe||k}var P=_.prototype=new M;P.constructor=_,C(P,F.prototype),P.isPureReactComponent=!0;var b=Array.isArray,V=Object.prototype.hasOwnProperty,L={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function G(A,j,fe){var te,Ee={},oe=null,he=null;if(j!=null)for(te in j.ref!==void 0&&(he=j.ref),j.key!==void 0&&(oe=""+j.key),j)V.call(j,te)&&!B.hasOwnProperty(te)&&(Ee[te]=j[te]);var ve=arguments.length-2;if(ve===1)Ee.children=fe;else if(1<ve){for(var me=Array(ve),Le=0;Le<ve;Le++)me[Le]=arguments[Le+2];Ee.children=me}if(A&&A.defaultProps)for(te in ve=A.defaultProps,ve)Ee[te]===void 0&&(Ee[te]=ve[te]);return{$$typeof:r,type:A,key:oe,ref:he,props:Ee,_owner:L.current}}function Ae(A,j){return{$$typeof:r,type:A.type,key:j,ref:A.ref,props:A.props,_owner:A._owner}}function ce(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function Ge(A){var j={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(fe){return j[fe]})}var tt=/\/+/g;function $e(A,j){return typeof A=="object"&&A!==null&&A.key!=null?Ge(""+A.key):j.toString(36)}function Ue(A,j,fe,te,Ee){var oe=typeof A;(oe==="undefined"||oe==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case r:case e:he=!0}}if(he)return he=A,Ee=Ee(he),A=te===""?"."+$e(he,0):te,b(Ee)?(fe="",A!=null&&(fe=A.replace(tt,"$&/")+"/"),Ue(Ee,j,fe,"",function(Le){return Le})):Ee!=null&&(ce(Ee)&&(Ee=Ae(Ee,fe+(!Ee.key||he&&he.key===Ee.key?"":(""+Ee.key).replace(tt,"$&/")+"/")+A)),j.push(Ee)),1;if(he=0,te=te===""?".":te+":",b(A))for(var ve=0;ve<A.length;ve++){oe=A[ve];var me=te+$e(oe,ve);he+=Ue(oe,j,fe,me,Ee)}else if(me=E(A),typeof me=="function")for(A=me.call(A),ve=0;!(oe=A.next()).done;)oe=oe.value,me=te+$e(oe,ve++),he+=Ue(oe,j,fe,me,Ee);else if(oe==="object")throw j=String(A),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return he}function de(A,j,fe){if(A==null)return A;var te=[],Ee=0;return Ue(A,te,"","",function(oe){return j.call(fe,oe,Ee++)}),te}function ye(A){if(A._status===-1){var j=A._result;j=j(),j.then(function(fe){(A._status===0||A._status===-1)&&(A._status=1,A._result=fe)},function(fe){(A._status===0||A._status===-1)&&(A._status=2,A._result=fe)}),A._status===-1&&(A._status=0,A._result=j)}if(A._status===1)return A._result.default;throw A._result}var xe={current:null},W={transition:null},J={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function H(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:de,forEach:function(A,j,fe){de(A,function(){j.apply(this,arguments)},fe)},count:function(A){var j=0;return de(A,function(){j++}),j},toArray:function(A){return de(A,function(j){return j})||[]},only:function(A){if(!ce(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ge.Component=F,ge.Fragment=t,ge.Profiler=o,ge.PureComponent=_,ge.StrictMode=s,ge.Suspense=h,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ge.act=H,ge.cloneElement=function(A,j,fe){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var te=C({},A.props),Ee=A.key,oe=A.ref,he=A._owner;if(j!=null){if(j.ref!==void 0&&(oe=j.ref,he=L.current),j.key!==void 0&&(Ee=""+j.key),A.type&&A.type.defaultProps)var ve=A.type.defaultProps;for(me in j)V.call(j,me)&&!B.hasOwnProperty(me)&&(te[me]=j[me]===void 0&&ve!==void 0?ve[me]:j[me])}var me=arguments.length-2;if(me===1)te.children=fe;else if(1<me){ve=Array(me);for(var Le=0;Le<me;Le++)ve[Le]=arguments[Le+2];te.children=ve}return{$$typeof:r,type:A.type,key:Ee,ref:oe,props:te,_owner:he}},ge.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},ge.createElement=G,ge.createFactory=function(A){var j=G.bind(null,A);return j.type=A,j},ge.createRef=function(){return{current:null}},ge.forwardRef=function(A){return{$$typeof:f,render:A}},ge.isValidElement=ce,ge.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:ye}},ge.memo=function(A,j){return{$$typeof:m,type:A,compare:j===void 0?null:j}},ge.startTransition=function(A){var j=W.transition;W.transition={};try{A()}finally{W.transition=j}},ge.unstable_act=H,ge.useCallback=function(A,j){return xe.current.useCallback(A,j)},ge.useContext=function(A){return xe.current.useContext(A)},ge.useDebugValue=function(){},ge.useDeferredValue=function(A){return xe.current.useDeferredValue(A)},ge.useEffect=function(A,j){return xe.current.useEffect(A,j)},ge.useId=function(){return xe.current.useId()},ge.useImperativeHandle=function(A,j,fe){return xe.current.useImperativeHandle(A,j,fe)},ge.useInsertionEffect=function(A,j){return xe.current.useInsertionEffect(A,j)},ge.useLayoutEffect=function(A,j){return xe.current.useLayoutEffect(A,j)},ge.useMemo=function(A,j){return xe.current.useMemo(A,j)},ge.useReducer=function(A,j,fe){return xe.current.useReducer(A,j,fe)},ge.useRef=function(A){return xe.current.useRef(A)},ge.useState=function(A){return xe.current.useState(A)},ge.useSyncExternalStore=function(A,j,fe){return xe.current.useSyncExternalStore(A,j,fe)},ge.useTransition=function(){return xe.current.useTransition()},ge.version="18.3.1",ge}var ep;function Pc(){return ep||(ep=1,Du.exports=H0()),Du.exports}var tp;function K0(){if(tp)return us;tp=1;var r=Pc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var g,y={},E=null,k=null;m!==void 0&&(E=""+m),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(k=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(f&&f.defaultProps)for(g in h=f.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:f,key:E,ref:k,props:y,_owner:o.current}}return us.Fragment=t,us.jsx=c,us.jsxs=c,us}var np;function Y0(){return np||(np=1,Uu.exports=K0()),Uu.exports}var w=Y0(),Z=Pc();const sn=qm(Z);var Ko={},Bu={exports:{}},St={},zu={exports:{}},Vu={};var rp;function X0(){return rp||(rp=1,(function(r){function e(W,J){var H=W.length;W.push(J);e:for(;0<H;){var A=H-1>>>1,j=W[A];if(0<o(j,J))W[A]=J,W[H]=j,H=A;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var J=W[0],H=W.pop();if(H!==J){W[0]=H;e:for(var A=0,j=W.length,fe=j>>>1;A<fe;){var te=2*(A+1)-1,Ee=W[te],oe=te+1,he=W[oe];if(0>o(Ee,H))oe<j&&0>o(he,Ee)?(W[A]=he,W[oe]=H,A=oe):(W[A]=Ee,W[te]=H,A=te);else if(oe<j&&0>o(he,H))W[A]=he,W[oe]=H,A=oe;else break e}}return J}function o(W,J){var H=W.sortIndex-J.sortIndex;return H!==0?H:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,E=3,k=!1,C=!1,N=!1,F=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var J=t(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=W)s(m),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(m)}}function b(W){if(N=!1,P(W),!C)if(t(h)!==null)C=!0,ye(V);else{var J=t(m);J!==null&&xe(b,J.startTime-W)}}function V(W,J){C=!1,N&&(N=!1,M(G),G=-1),k=!0;var H=E;try{for(P(J),y=t(h);y!==null&&(!(y.expirationTime>J)||W&&!Ge());){var A=y.callback;if(typeof A=="function"){y.callback=null,E=y.priorityLevel;var j=A(y.expirationTime<=J);J=r.unstable_now(),typeof j=="function"?y.callback=j:y===t(h)&&s(h),P(J)}else s(h);y=t(h)}if(y!==null)var fe=!0;else{var te=t(m);te!==null&&xe(b,te.startTime-J),fe=!1}return fe}finally{y=null,E=H,k=!1}}var L=!1,B=null,G=-1,Ae=5,ce=-1;function Ge(){return!(r.unstable_now()-ce<Ae)}function tt(){if(B!==null){var W=r.unstable_now();ce=W;var J=!0;try{J=B(!0,W)}finally{J?$e():(L=!1,B=null)}}else L=!1}var $e;if(typeof _=="function")$e=function(){_(tt)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,de=Ue.port2;Ue.port1.onmessage=tt,$e=function(){de.postMessage(null)}}else $e=function(){F(tt,0)};function ye(W){B=W,L||(L=!0,$e())}function xe(W,J){G=F(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){C||k||(C=!0,ye(V))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(W){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var H=E;E=J;try{return W()}finally{E=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=E;E=W;try{return J()}finally{E=H}},r.unstable_scheduleCallback=function(W,J,H){var A=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?A+H:A):H=A,W){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,W={id:g++,callback:J,priorityLevel:W,startTime:H,expirationTime:j,sortIndex:-1},H>A?(W.sortIndex=H,e(m,W),t(h)===null&&W===t(m)&&(N?(M(G),G=-1):N=!0,xe(b,H-A))):(W.sortIndex=j,e(h,W),C||k||(C=!0,ye(V))),W},r.unstable_shouldYield=Ge,r.unstable_wrapCallback=function(W){var J=E;return function(){var H=E;E=J;try{return W.apply(this,arguments)}finally{E=H}}}})(Vu)),Vu}var ip;function q0(){return ip||(ip=1,zu.exports=X0()),zu.exports}var sp;function Q0(){if(sp)return St;sp=1;var r=Pc(),e=q0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function E(n){return h.call(y,n)?!0:h.call(g,n)?!1:m.test(n)?y[n]=!0:(g[n]=!0,!1)}function k(n,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function C(n,i,a,u){if(i===null||typeof i>"u"||k(n,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(n,i,a,u,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];F[i]=new N(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function _(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(M,_);F[i]=new N(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(M,_);F[i]=new N(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(M,_);F[i]=new N(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,a,u){var d=F.hasOwnProperty(i)?F[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(C(i,a,d,u)&&(a=null),u||d===null?E(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,u=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,u?n.setAttributeNS(u,i,a):n.setAttribute(i,a))))}var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var H=Object.assign,A;function j(n){if(A===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);A=i&&i[1]||""}return`
`+A+n}var fe=!1;function te(n,i){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var u=O}Reflect.construct(n,[],i)}else{try{i.call()}catch(O){u=O}n.call(i.prototype)}else{try{throw Error()}catch(O){u=O}n()}}catch(O){if(O&&u&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),p=u.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var T=`
`+d[v].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=v&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?j(n):""}function Ee(n){switch(n.tag){case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case L:return"Portal";case Ae:return"Profiler";case G:return"StrictMode";case $e:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case ce:return(n._context.displayName||"Context")+".Provider";case tt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return i=n.displayName||null,i!==null?i:oe(n.type)||"Memo";case ye:i=n._payload,n=n._init;try{return oe(n(i))}catch{}}return null}function he(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ve(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function me(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Le(n){var i=me(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function At(n){n._valueTracker||(n._valueTracker=Le(n))}function jt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=me(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function Ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pr(n,i){var a=i.checked;return H({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function xi(n,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=ve(i.value!=null?i.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function af(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function Ka(n,i){af(n,i);var a=ve(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ya(n,i.type,a):i.hasOwnProperty("defaultValue")&&Ya(n,i.type,ve(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function lf(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ya(n,i,a){(i!=="number"||Ft(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ai=Array.isArray;function Fr(n,i,a,u){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+ve(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Xa(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function uf(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Ai(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:ve(a)}}function cf(n,i){var a=ve(i.value),u=ve(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function ff(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function df(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?df(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $s,hf=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,u,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,u,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=$s.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function wi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xy=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(n){Xy.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ci[i]=Ci[n]})});function pf(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ci.hasOwnProperty(n)&&Ci[n]?(""+i).trim():i+"px"}function mf(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,d=pf(a,i[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,d):n[a]=d}}var qy=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qa(n,i){if(i){if(qy[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Za(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function el(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tl=null,$r=null,Ur=null;function gf(n){if(n=Yi(n)){if(typeof tl!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ao(i),tl(n.stateNode,n.type,i))}}function yf(n){$r?Ur?Ur.push(n):Ur=[n]:$r=n}function vf(){if($r){var n=$r,i=Ur;if(Ur=$r=null,gf(n),i)for(n=0;n<i.length;n++)gf(i[n])}}function Ef(n,i){return n(i)}function Sf(){}var nl=!1;function Tf(n,i,a){if(nl)return n(i,a);nl=!0;try{return Ef(n,i,a)}finally{nl=!1,($r!==null||Ur!==null)&&(Sf(),vf())}}function Ri(n,i){var a=n.stateNode;if(a===null)return null;var u=ao(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var rl=!1;if(f)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{rl=!1}function Qy(n,i,a,u,d,p,v,S,T){var O=Array.prototype.slice.call(arguments,3);try{i.apply(a,O)}catch(U){this.onError(U)}}var Ii=!1,Us=null,Ds=!1,il=null,Zy={onError:function(n){Ii=!0,Us=n}};function Jy(n,i,a,u,d,p,v,S,T){Ii=!1,Us=null,Qy.apply(Zy,arguments)}function ev(n,i,a,u,d,p,v,S,T){if(Jy.apply(this,arguments),Ii){if(Ii){var O=Us;Ii=!1,Us=null}else throw Error(t(198));Ds||(Ds=!0,il=O)}}function mr(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function kf(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function xf(n){if(mr(n)!==n)throw Error(t(188))}function tv(n){var i=n.alternate;if(!i){if(i=mr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,u=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return xf(d),n;if(p===u)return xf(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==u.return)a=d,u=p;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,u=p;break}if(S===u){v=!0,u=d,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,u=d;break}if(S===u){v=!0,u=p,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==u)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Af(n){return n=tv(n),n!==null?wf(n):null}function wf(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=wf(n);if(i!==null)return i;n=n.sibling}return null}var Cf=e.unstable_scheduleCallback,Rf=e.unstable_cancelCallback,nv=e.unstable_shouldYield,rv=e.unstable_requestPaint,Ve=e.unstable_now,iv=e.unstable_getCurrentPriorityLevel,sl=e.unstable_ImmediatePriority,Nf=e.unstable_UserBlockingPriority,Bs=e.unstable_NormalPriority,sv=e.unstable_LowPriority,If=e.unstable_IdlePriority,zs=null,hn=null;function ov(n){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(zs,n,void 0,(n.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:uv,av=Math.log,lv=Math.LN2;function uv(n){return n>>>=0,n===0?32:31-(av(n)/lv|0)|0}var Vs=64,Ws=4194304;function Oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gs(n,i){var a=n.pendingLanes;if(a===0)return 0;var u=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?u=Oi(S):(p&=v,p!==0&&(u=Oi(p)))}else v=a&~d,v!==0?u=Oi(v):p!==0&&(u=Oi(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)a=31-Qt(i),d=1<<a,u|=n[a],i&=~d;return u}function cv(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fv(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-Qt(p),S=1<<v,T=d[v];T===-1?((S&a)===0||(S&u)!==0)&&(d[v]=cv(S,i)):T<=i&&(n.expiredLanes|=S),p&=~S}}function ol(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Of(){var n=Vs;return Vs<<=1,(Vs&4194240)===0&&(Vs=64),n}function al(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function _i(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Qt(i),n[i]=a}function dv(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Qt(a),p=1<<d;i[d]=0,u[d]=-1,n[d]=-1,a&=~p}}function ll(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Qt(a),d=1<<u;d&i|n[u]&i&&(n[u]|=i),a&=~d}}var we=0;function _f(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Pf,ul,Lf,bf,Mf,cl=!1,Hs=[],Dn=null,Bn=null,zn=null,Pi=new Map,Li=new Map,Vn=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jf(n,i){switch(n){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(i.pointerId)}}function bi(n,i,a,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Yi(i),i!==null&&ul(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function pv(n,i,a,u,d){switch(i){case"focusin":return Dn=bi(Dn,n,i,a,u,d),!0;case"dragenter":return Bn=bi(Bn,n,i,a,u,d),!0;case"mouseover":return zn=bi(zn,n,i,a,u,d),!0;case"pointerover":var p=d.pointerId;return Pi.set(p,bi(Pi.get(p)||null,n,i,a,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Li.set(p,bi(Li.get(p)||null,n,i,a,u,d)),!0}return!1}function Ff(n){var i=gr(n.target);if(i!==null){var a=mr(i);if(a!==null){if(i=a.tag,i===13){if(i=kf(a),i!==null){n.blockedOn=i,Mf(n.priority,function(){Lf(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ks(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=dl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Ja=u,a.target.dispatchEvent(u),Ja=null}else return i=Yi(a),i!==null&&ul(i),n.blockedOn=a,!1;i.shift()}return!0}function $f(n,i,a){Ks(n)&&a.delete(i)}function mv(){cl=!1,Dn!==null&&Ks(Dn)&&(Dn=null),Bn!==null&&Ks(Bn)&&(Bn=null),zn!==null&&Ks(zn)&&(zn=null),Pi.forEach($f),Li.forEach($f)}function Mi(n,i){n.blockedOn===i&&(n.blockedOn=null,cl||(cl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mv)))}function ji(n){function i(d){return Mi(d,n)}if(0<Hs.length){Mi(Hs[0],n);for(var a=1;a<Hs.length;a++){var u=Hs[a];u.blockedOn===n&&(u.blockedOn=null)}}for(Dn!==null&&Mi(Dn,n),Bn!==null&&Mi(Bn,n),zn!==null&&Mi(zn,n),Pi.forEach(i),Li.forEach(i),a=0;a<Vn.length;a++)u=Vn[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<Vn.length&&(a=Vn[0],a.blockedOn===null);)Ff(a),a.blockedOn===null&&Vn.shift()}var Dr=b.ReactCurrentBatchConfig,Ys=!0;function gv(n,i,a,u){var d=we,p=Dr.transition;Dr.transition=null;try{we=1,fl(n,i,a,u)}finally{we=d,Dr.transition=p}}function yv(n,i,a,u){var d=we,p=Dr.transition;Dr.transition=null;try{we=4,fl(n,i,a,u)}finally{we=d,Dr.transition=p}}function fl(n,i,a,u){if(Ys){var d=dl(n,i,a,u);if(d===null)Il(n,i,u,Xs,a),jf(n,u);else if(pv(d,n,i,a,u))u.stopPropagation();else if(jf(n,u),i&4&&-1<hv.indexOf(n)){for(;d!==null;){var p=Yi(d);if(p!==null&&Pf(p),p=dl(n,i,a,u),p===null&&Il(n,i,u,Xs,a),p===d)break;d=p}d!==null&&u.stopPropagation()}else Il(n,i,u,null,a)}}var Xs=null;function dl(n,i,a,u){if(Xs=null,n=el(u),n=gr(n),n!==null)if(i=mr(n),i===null)n=null;else if(a=i.tag,a===13){if(n=kf(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Xs=n,null}function Uf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iv()){case sl:return 1;case Nf:return 4;case Bs:case sv:return 16;case If:return 536870912;default:return 16}default:return 16}}var Wn=null,hl=null,qs=null;function Df(){if(qs)return qs;var n,i=hl,a=i.length,u,d="value"in Wn?Wn.value:Wn.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(u=1;u<=v&&i[a-u]===d[p-u];u++);return qs=d.slice(n,1<u?1-u:void 0)}function Qs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Zs(){return!0}function Bf(){return!1}function wt(n){function i(a,u,d,p,v){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zs:Bf,this.isPropagationStopped=Bf,this}return H(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),i}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=wt(Br),Fi=H({},Br,{view:0,detail:0}),vv=wt(Fi),ml,gl,$i,Js=H({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$i&&($i&&n.type==="mousemove"?(ml=n.screenX-$i.screenX,gl=n.screenY-$i.screenY):gl=ml=0,$i=n),ml)},movementY:function(n){return"movementY"in n?n.movementY:gl}}),zf=wt(Js),Ev=H({},Js,{dataTransfer:0}),Sv=wt(Ev),Tv=H({},Fi,{relatedTarget:0}),yl=wt(Tv),kv=H({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),xv=wt(kv),Av=H({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wv=wt(Av),Cv=H({},Br,{data:0}),Vf=wt(Cv),Rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ov(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Iv[n])?!!i[n]:!1}function vl(){return Ov}var _v=H({},Fi,{key:function(n){if(n.key){var i=Rv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Nv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?Qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pv=wt(_v),Lv=H({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=wt(Lv),bv=H({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Mv=wt(bv),jv=H({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fv=wt(jv),$v=H({},Js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Uv=wt($v),Dv=[9,13,27,32],El=f&&"CompositionEvent"in window,Ui=null;f&&"documentMode"in document&&(Ui=document.documentMode);var Bv=f&&"TextEvent"in window&&!Ui,Gf=f&&(!El||Ui&&8<Ui&&11>=Ui),Hf=" ",Kf=!1;function Yf(n,i){switch(n){case"keyup":return Dv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zr=!1;function zv(n,i){switch(n){case"compositionend":return Xf(i);case"keypress":return i.which!==32?null:(Kf=!0,Hf);case"textInput":return n=i.data,n===Hf&&Kf?null:n;default:return null}}function Vv(n,i){if(zr)return n==="compositionend"||!El&&Yf(n,i)?(n=Df(),qs=hl=Wn=null,zr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Gf&&i.locale!=="ko"?null:i.data;default:return null}}var Wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Wv[n.type]:i==="textarea"}function Qf(n,i,a,u){yf(u),i=io(i,"onChange"),0<i.length&&(a=new pl("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var Di=null,Bi=null;function Gv(n){md(n,0)}function eo(n){var i=Kr(n);if(jt(i))return n}function Hv(n,i){if(n==="change")return i}var Zf=!1;if(f){var Sl;if(f){var Tl="oninput"in document;if(!Tl){var Jf=document.createElement("div");Jf.setAttribute("oninput","return;"),Tl=typeof Jf.oninput=="function"}Sl=Tl}else Sl=!1;Zf=Sl&&(!document.documentMode||9<document.documentMode)}function ed(){Di&&(Di.detachEvent("onpropertychange",td),Bi=Di=null)}function td(n){if(n.propertyName==="value"&&eo(Bi)){var i=[];Qf(i,Bi,n,el(n)),Tf(Gv,i)}}function Kv(n,i,a){n==="focusin"?(ed(),Di=i,Bi=a,Di.attachEvent("onpropertychange",td)):n==="focusout"&&ed()}function Yv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return eo(Bi)}function Xv(n,i){if(n==="click")return eo(i)}function qv(n,i){if(n==="input"||n==="change")return eo(i)}function Qv(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Zt=typeof Object.is=="function"?Object.is:Qv;function zi(n,i){if(Zt(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!h.call(i,d)||!Zt(n[d],i[d]))return!1}return!0}function nd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rd(n,i){var a=nd(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=nd(a)}}function id(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?id(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function sd(){for(var n=window,i=Ft();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ft(n.document)}return i}function kl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Zv(n){var i=sd(),a=n.focusedElem,u=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&id(a.ownerDocument.documentElement,a)){if(u!==null&&kl(a)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!n.extend&&p>u&&(d=u,u=p,p=d),d=rd(a,p);var v=rd(a,u);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>u?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Jv=f&&"documentMode"in document&&11>=document.documentMode,Vr=null,xl=null,Vi=null,Al=!1;function od(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Al||Vr==null||Vr!==Ft(u)||(u=Vr,"selectionStart"in u&&kl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vi&&zi(Vi,u)||(Vi=u,u=io(xl,"onSelect"),0<u.length&&(i=new pl("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Vr)))}function to(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Wr={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},wl={},ad={};f&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function no(n){if(wl[n])return wl[n];if(!Wr[n])return n;var i=Wr[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in ad)return wl[n]=i[a];return n}var ld=no("animationend"),ud=no("animationiteration"),cd=no("animationstart"),fd=no("transitionend"),dd=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(n,i){dd.set(n,i),l(i,[n])}for(var Cl=0;Cl<hd.length;Cl++){var Rl=hd[Cl],e0=Rl.toLowerCase(),t0=Rl[0].toUpperCase()+Rl.slice(1);Gn(e0,"on"+t0)}Gn(ld,"onAnimationEnd"),Gn(ud,"onAnimationIteration"),Gn(cd,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(fd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function pd(n,i,a){var u=n.type||"unknown-event";n.currentTarget=a,ev(u,i,void 0,n),n.currentTarget=null}function md(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var S=u[v],T=S.instance,O=S.currentTarget;if(S=S.listener,T!==p&&d.isPropagationStopped())break e;pd(d,S,O),p=T}else for(v=0;v<u.length;v++){if(S=u[v],T=S.instance,O=S.currentTarget,S=S.listener,T!==p&&d.isPropagationStopped())break e;pd(d,S,O),p=T}}}if(Ds)throw n=il,Ds=!1,il=null,n}function Ie(n,i){var a=i[Ml];a===void 0&&(a=i[Ml]=new Set);var u=n+"__bubble";a.has(u)||(gd(i,n,2,!1),a.add(u))}function Nl(n,i,a){var u=0;i&&(u|=4),gd(a,n,u,i)}var ro="_reactListening"+Math.random().toString(36).slice(2);function Gi(n){if(!n[ro]){n[ro]=!0,s.forEach(function(a){a!=="selectionchange"&&(n0.has(a)||Nl(a,!1,n),Nl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ro]||(i[ro]=!0,Nl("selectionchange",!1,i))}}function gd(n,i,a,u){switch(Uf(i)){case 1:var d=gv;break;case 4:d=yv;break;default:d=fl}a=d.bind(null,i,a,n),d=void 0,!rl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Il(n,i,a,u,d){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===d||T.nodeType===8&&T.parentNode===d))return;v=v.return}for(;S!==null;){if(v=gr(S),v===null)return;if(T=v.tag,T===5||T===6){u=p=v;continue e}S=S.parentNode}}u=u.return}Tf(function(){var O=p,U=el(a),D=[];e:{var $=dd.get(n);if($!==void 0){var K=pl,X=n;switch(n){case"keypress":if(Qs(a)===0)break e;case"keydown":case"keyup":K=Pv;break;case"focusin":X="focus",K=yl;break;case"focusout":X="blur",K=yl;break;case"beforeblur":case"afterblur":K=yl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Sv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Mv;break;case ld:case ud:case cd:K=xv;break;case fd:K=Fv;break;case"scroll":K=vv;break;case"wheel":K=Uv;break;case"copy":case"cut":case"paste":K=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Wf}var q=(i&4)!==0,We=!q&&n==="scroll",R=q?$!==null?$+"Capture":null:$;q=[];for(var x=O,I;x!==null;){I=x;var z=I.stateNode;if(I.tag===5&&z!==null&&(I=z,R!==null&&(z=Ri(x,R),z!=null&&q.push(Hi(x,z,I)))),We)break;x=x.return}0<q.length&&($=new K($,X,null,a,U),D.push({event:$,listeners:q}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",$&&a!==Ja&&(X=a.relatedTarget||a.fromElement)&&(gr(X)||X[Cn]))break e;if((K||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,K?(X=a.relatedTarget||a.toElement,K=O,X=X?gr(X):null,X!==null&&(We=mr(X),X!==We||X.tag!==5&&X.tag!==6)&&(X=null)):(K=null,X=O),K!==X)){if(q=zf,z="onMouseLeave",R="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(q=Wf,z="onPointerLeave",R="onPointerEnter",x="pointer"),We=K==null?$:Kr(K),I=X==null?$:Kr(X),$=new q(z,x+"leave",K,a,U),$.target=We,$.relatedTarget=I,z=null,gr(U)===O&&(q=new q(R,x+"enter",X,a,U),q.target=I,q.relatedTarget=We,z=q),We=z,K&&X)t:{for(q=K,R=X,x=0,I=q;I;I=Gr(I))x++;for(I=0,z=R;z;z=Gr(z))I++;for(;0<x-I;)q=Gr(q),x--;for(;0<I-x;)R=Gr(R),I--;for(;x--;){if(q===R||R!==null&&q===R.alternate)break t;q=Gr(q),R=Gr(R)}q=null}else q=null;K!==null&&yd(D,$,K,q,!1),X!==null&&We!==null&&yd(D,We,X,q,!0)}}e:{if($=O?Kr(O):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var Q=Hv;else if(qf($))if(Zf)Q=qv;else{Q=Yv;var ne=Kv}else(K=$.nodeName)&&K.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=Xv);if(Q&&(Q=Q(n,O))){Qf(D,Q,a,U);break e}ne&&ne(n,$,O),n==="focusout"&&(ne=$._wrapperState)&&ne.controlled&&$.type==="number"&&Ya($,"number",$.value)}switch(ne=O?Kr(O):window,n){case"focusin":(qf(ne)||ne.contentEditable==="true")&&(Vr=ne,xl=O,Vi=null);break;case"focusout":Vi=xl=Vr=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,od(D,a,U);break;case"selectionchange":if(Jv)break;case"keydown":case"keyup":od(D,a,U)}var re;if(El)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else zr?Yf(n,a)&&(ue="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&(Gf&&a.locale!=="ko"&&(zr||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&zr&&(re=Df()):(Wn=U,hl="value"in Wn?Wn.value:Wn.textContent,zr=!0)),ne=io(O,ue),0<ne.length&&(ue=new Vf(ue,n,null,a,U),D.push({event:ue,listeners:ne}),re?ue.data=re:(re=Xf(a),re!==null&&(ue.data=re)))),(re=Bv?zv(n,a):Vv(n,a))&&(O=io(O,"onBeforeInput"),0<O.length&&(U=new Vf("onBeforeInput","beforeinput",null,a,U),D.push({event:U,listeners:O}),U.data=re))}md(D,i)})}function Hi(n,i,a){return{instance:n,listener:i,currentTarget:a}}function io(n,i){for(var a=i+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ri(n,a),p!=null&&u.unshift(Hi(n,p,d)),p=Ri(n,i),p!=null&&u.push(Hi(n,p,d))),n=n.return}return u}function Gr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function yd(n,i,a,u,d){for(var p=i._reactName,v=[];a!==null&&a!==u;){var S=a,T=S.alternate,O=S.stateNode;if(T!==null&&T===u)break;S.tag===5&&O!==null&&(S=O,d?(T=Ri(a,p),T!=null&&v.unshift(Hi(a,T,S))):d||(T=Ri(a,p),T!=null&&v.push(Hi(a,T,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var r0=/\r\n?/g,i0=/\u0000|\uFFFD/g;function vd(n){return(typeof n=="string"?n:""+n).replace(r0,`
`).replace(i0,"")}function so(n,i,a){if(i=vd(i),vd(n)!==i&&a)throw Error(t(425))}function oo(){}var Ol=null,_l=null;function Pl(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,Ed=typeof Promise=="function"?Promise:void 0,o0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ed<"u"?function(n){return Ed.resolve(null).then(n).catch(a0)}:Ll;function a0(n){setTimeout(function(){throw n})}function bl(n,i){var a=i,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(u===0){n.removeChild(d),ji(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=d}while(a);ji(i)}function Hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Sd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),pn="__reactFiber$"+Hr,Ki="__reactProps$"+Hr,Cn="__reactContainer$"+Hr,Ml="__reactEvents$"+Hr,l0="__reactListeners$"+Hr,u0="__reactHandles$"+Hr;function gr(n){var i=n[pn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Cn]||a[pn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Sd(n);n!==null;){if(a=n[pn])return a;n=Sd(n)}return i}n=a,a=n.parentNode}return null}function Yi(n){return n=n[pn]||n[Cn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Kr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ao(n){return n[Ki]||null}var jl=[],Yr=-1;function Kn(n){return{current:n}}function Oe(n){0>Yr||(n.current=jl[Yr],jl[Yr]=null,Yr--)}function Ce(n,i){Yr++,jl[Yr]=n.current,n.current=i}var Yn={},ot=Kn(Yn),mt=Kn(!1),yr=Yn;function Xr(n,i){var a=n.type.contextTypes;if(!a)return Yn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function gt(n){return n=n.childContextTypes,n!=null}function lo(){Oe(mt),Oe(ot)}function Td(n,i,a){if(ot.current!==Yn)throw Error(t(168));Ce(ot,i),Ce(mt,a)}function kd(n,i,a){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(t(108,he(n)||"Unknown",d));return H({},a,u)}function uo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yn,yr=ot.current,Ce(ot,n),Ce(mt,mt.current),!0}function xd(n,i,a){var u=n.stateNode;if(!u)throw Error(t(169));a?(n=kd(n,i,yr),u.__reactInternalMemoizedMergedChildContext=n,Oe(mt),Oe(ot),Ce(ot,n)):Oe(mt),Ce(mt,a)}var Rn=null,co=!1,Fl=!1;function Ad(n){Rn===null?Rn=[n]:Rn.push(n)}function c0(n){co=!0,Ad(n)}function Xn(){if(!Fl&&Rn!==null){Fl=!0;var n=0,i=we;try{var a=Rn;for(we=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}Rn=null,co=!1}catch(d){throw Rn!==null&&(Rn=Rn.slice(n+1)),Cf(sl,Xn),d}finally{we=i,Fl=!1}}return null}var qr=[],Qr=0,fo=null,ho=0,$t=[],Ut=0,vr=null,Nn=1,In="";function Er(n,i){qr[Qr++]=ho,qr[Qr++]=fo,fo=n,ho=i}function wd(n,i,a){$t[Ut++]=Nn,$t[Ut++]=In,$t[Ut++]=vr,vr=n;var u=Nn;n=In;var d=32-Qt(u)-1;u&=~(1<<d),a+=1;var p=32-Qt(i)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Nn=1<<32-Qt(i)+d|a<<d|u,In=p+n}else Nn=1<<p|a<<d|u,In=n}function $l(n){n.return!==null&&(Er(n,1),wd(n,1,0))}function Ul(n){for(;n===fo;)fo=qr[--Qr],qr[Qr]=null,ho=qr[--Qr],qr[Qr]=null;for(;n===vr;)vr=$t[--Ut],$t[Ut]=null,In=$t[--Ut],$t[Ut]=null,Nn=$t[--Ut],$t[Ut]=null}var Ct=null,Rt=null,Pe=!1,Jt=null;function Cd(n,i){var a=Vt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Rd(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=Hn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=vr!==null?{id:Nn,overflow:In}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Vt(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Ct=n,Rt=null,!0):!1;default:return!1}}function Dl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Bl(n){if(Pe){var i=Rt;if(i){var a=i;if(!Rd(n,i)){if(Dl(n))throw Error(t(418));i=Hn(a.nextSibling);var u=Ct;i&&Rd(n,i)?Cd(u,a):(n.flags=n.flags&-4097|2,Pe=!1,Ct=n)}}else{if(Dl(n))throw Error(t(418));n.flags=n.flags&-4097|2,Pe=!1,Ct=n}}}function Nd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ct=n}function po(n){if(n!==Ct)return!1;if(!Pe)return Nd(n),Pe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Pl(n.type,n.memoizedProps)),i&&(i=Rt)){if(Dl(n))throw Id(),Error(t(418));for(;i;)Cd(n,i),i=Hn(i.nextSibling)}if(Nd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Rt=Hn(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Rt=null}}else Rt=Ct?Hn(n.stateNode.nextSibling):null;return!0}function Id(){for(var n=Rt;n;)n=Hn(n.nextSibling)}function Zr(){Rt=Ct=null,Pe=!1}function zl(n){Jt===null?Jt=[n]:Jt.push(n)}var f0=b.ReactCurrentBatchConfig;function Xi(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var u=a.stateNode}if(!u)throw Error(t(147,n));var d=u,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function mo(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Od(n){var i=n._init;return i(n._payload)}function _d(n){function i(R,x){if(n){var I=R.deletions;I===null?(R.deletions=[x],R.flags|=16):I.push(x)}}function a(R,x){if(!n)return null;for(;x!==null;)i(R,x),x=x.sibling;return null}function u(R,x){for(R=new Map;x!==null;)x.key!==null?R.set(x.key,x):R.set(x.index,x),x=x.sibling;return R}function d(R,x){return R=rr(R,x),R.index=0,R.sibling=null,R}function p(R,x,I){return R.index=I,n?(I=R.alternate,I!==null?(I=I.index,I<x?(R.flags|=2,x):I):(R.flags|=2,x)):(R.flags|=1048576,x)}function v(R){return n&&R.alternate===null&&(R.flags|=2),R}function S(R,x,I,z){return x===null||x.tag!==6?(x=Lu(I,R.mode,z),x.return=R,x):(x=d(x,I),x.return=R,x)}function T(R,x,I,z){var Q=I.type;return Q===B?U(R,x,I.props.children,z,I.key):x!==null&&(x.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ye&&Od(Q)===x.type)?(z=d(x,I.props),z.ref=Xi(R,x,I),z.return=R,z):(z=Uo(I.type,I.key,I.props,null,R.mode,z),z.ref=Xi(R,x,I),z.return=R,z)}function O(R,x,I,z){return x===null||x.tag!==4||x.stateNode.containerInfo!==I.containerInfo||x.stateNode.implementation!==I.implementation?(x=bu(I,R.mode,z),x.return=R,x):(x=d(x,I.children||[]),x.return=R,x)}function U(R,x,I,z,Q){return x===null||x.tag!==7?(x=Rr(I,R.mode,z,Q),x.return=R,x):(x=d(x,I),x.return=R,x)}function D(R,x,I){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Lu(""+x,R.mode,I),x.return=R,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case V:return I=Uo(x.type,x.key,x.props,null,R.mode,I),I.ref=Xi(R,null,x),I.return=R,I;case L:return x=bu(x,R.mode,I),x.return=R,x;case ye:var z=x._init;return D(R,z(x._payload),I)}if(Ai(x)||J(x))return x=Rr(x,R.mode,I,null),x.return=R,x;mo(R,x)}return null}function $(R,x,I,z){var Q=x!==null?x.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Q!==null?null:S(R,x,""+I,z);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case V:return I.key===Q?T(R,x,I,z):null;case L:return I.key===Q?O(R,x,I,z):null;case ye:return Q=I._init,$(R,x,Q(I._payload),z)}if(Ai(I)||J(I))return Q!==null?null:U(R,x,I,z,null);mo(R,I)}return null}function K(R,x,I,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return R=R.get(I)||null,S(x,R,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case V:return R=R.get(z.key===null?I:z.key)||null,T(x,R,z,Q);case L:return R=R.get(z.key===null?I:z.key)||null,O(x,R,z,Q);case ye:var ne=z._init;return K(R,x,I,ne(z._payload),Q)}if(Ai(z)||J(z))return R=R.get(I)||null,U(x,R,z,Q,null);mo(x,z)}return null}function X(R,x,I,z){for(var Q=null,ne=null,re=x,ue=x=0,et=null;re!==null&&ue<I.length;ue++){re.index>ue?(et=re,re=null):et=re.sibling;var ke=$(R,re,I[ue],z);if(ke===null){re===null&&(re=et);break}n&&re&&ke.alternate===null&&i(R,re),x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke,re=et}if(ue===I.length)return a(R,re),Pe&&Er(R,ue),Q;if(re===null){for(;ue<I.length;ue++)re=D(R,I[ue],z),re!==null&&(x=p(re,x,ue),ne===null?Q=re:ne.sibling=re,ne=re);return Pe&&Er(R,ue),Q}for(re=u(R,re);ue<I.length;ue++)et=K(re,R,ue,I[ue],z),et!==null&&(n&&et.alternate!==null&&re.delete(et.key===null?ue:et.key),x=p(et,x,ue),ne===null?Q=et:ne.sibling=et,ne=et);return n&&re.forEach(function(ir){return i(R,ir)}),Pe&&Er(R,ue),Q}function q(R,x,I,z){var Q=J(I);if(typeof Q!="function")throw Error(t(150));if(I=Q.call(I),I==null)throw Error(t(151));for(var ne=Q=null,re=x,ue=x=0,et=null,ke=I.next();re!==null&&!ke.done;ue++,ke=I.next()){re.index>ue?(et=re,re=null):et=re.sibling;var ir=$(R,re,ke.value,z);if(ir===null){re===null&&(re=et);break}n&&re&&ir.alternate===null&&i(R,re),x=p(ir,x,ue),ne===null?Q=ir:ne.sibling=ir,ne=ir,re=et}if(ke.done)return a(R,re),Pe&&Er(R,ue),Q;if(re===null){for(;!ke.done;ue++,ke=I.next())ke=D(R,ke.value,z),ke!==null&&(x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return Pe&&Er(R,ue),Q}for(re=u(R,re);!ke.done;ue++,ke=I.next())ke=K(re,R,ue,ke.value,z),ke!==null&&(n&&ke.alternate!==null&&re.delete(ke.key===null?ue:ke.key),x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return n&&re.forEach(function(W0){return i(R,W0)}),Pe&&Er(R,ue),Q}function We(R,x,I,z){if(typeof I=="object"&&I!==null&&I.type===B&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case V:e:{for(var Q=I.key,ne=x;ne!==null;){if(ne.key===Q){if(Q=I.type,Q===B){if(ne.tag===7){a(R,ne.sibling),x=d(ne,I.props.children),x.return=R,R=x;break e}}else if(ne.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ye&&Od(Q)===ne.type){a(R,ne.sibling),x=d(ne,I.props),x.ref=Xi(R,ne,I),x.return=R,R=x;break e}a(R,ne);break}else i(R,ne);ne=ne.sibling}I.type===B?(x=Rr(I.props.children,R.mode,z,I.key),x.return=R,R=x):(z=Uo(I.type,I.key,I.props,null,R.mode,z),z.ref=Xi(R,x,I),z.return=R,R=z)}return v(R);case L:e:{for(ne=I.key;x!==null;){if(x.key===ne)if(x.tag===4&&x.stateNode.containerInfo===I.containerInfo&&x.stateNode.implementation===I.implementation){a(R,x.sibling),x=d(x,I.children||[]),x.return=R,R=x;break e}else{a(R,x);break}else i(R,x);x=x.sibling}x=bu(I,R.mode,z),x.return=R,R=x}return v(R);case ye:return ne=I._init,We(R,x,ne(I._payload),z)}if(Ai(I))return X(R,x,I,z);if(J(I))return q(R,x,I,z);mo(R,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,x!==null&&x.tag===6?(a(R,x.sibling),x=d(x,I),x.return=R,R=x):(a(R,x),x=Lu(I,R.mode,z),x.return=R,R=x),v(R)):a(R,x)}return We}var Jr=_d(!0),Pd=_d(!1),go=Kn(null),yo=null,ei=null,Vl=null;function Wl(){Vl=ei=yo=null}function Gl(n){var i=go.current;Oe(go),n._currentValue=i}function Hl(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function ti(n,i){yo=n,Vl=ei=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(yt=!0),n.firstContext=null)}function Dt(n){var i=n._currentValue;if(Vl!==n)if(n={context:n,memoizedValue:i,next:null},ei===null){if(yo===null)throw Error(t(308));ei=n,yo.dependencies={lanes:0,firstContext:n}}else ei=ei.next=n;return i}var Sr=null;function Kl(n){Sr===null?Sr=[n]:Sr.push(n)}function Ld(n,i,a,u){var d=i.interleaved;return d===null?(a.next=a,Kl(i)):(a.next=d.next,d.next=a),i.interleaved=a,On(n,u)}function On(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var qn=!1;function Yl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _n(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Qn(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Se&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,On(n,a)}return d=u.interleaved,d===null?(i.next=i,Kl(u)):(i.next=d.next,d.next=i),u.interleaved=i,On(n,a)}function vo(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,ll(n,a)}}function Md(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Eo(n,i,a,u){var d=n.updateQueue;qn=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var T=S,O=T.next;T.next=null,v===null?p=O:v.next=O,v=T;var U=n.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==v&&(S===null?U.firstBaseUpdate=O:S.next=O,U.lastBaseUpdate=T))}if(p!==null){var D=d.baseState;v=0,U=O=T=null,S=p;do{var $=S.lane,K=S.eventTime;if((u&$)===$){U!==null&&(U=U.next={eventTime:K,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var X=n,q=S;switch($=i,K=a,q.tag){case 1:if(X=q.payload,typeof X=="function"){D=X.call(K,D,$);break e}D=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=q.payload,$=typeof X=="function"?X.call(K,D,$):X,$==null)break e;D=H({},D,$);break e;case 2:qn=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[S]:$.push(S))}else K={eventTime:K,lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(O=U=K,T=D):U=U.next=K,v|=$;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(T=D),d.baseState=T,d.firstBaseUpdate=O,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);xr|=v,n.lanes=v,n.memoizedState=D}}function jd(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],d=u.callback;if(d!==null){if(u.callback=null,u=a,typeof d!="function")throw Error(t(191,d));d.call(u)}}}var qi={},mn=Kn(qi),Qi=Kn(qi),Zi=Kn(qi);function Tr(n){if(n===qi)throw Error(t(174));return n}function Xl(n,i){switch(Ce(Zi,i),Ce(Qi,n),Ce(mn,qi),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qa(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=qa(i,n)}Oe(mn),Ce(mn,i)}function ni(){Oe(mn),Oe(Qi),Oe(Zi)}function Fd(n){Tr(Zi.current);var i=Tr(mn.current),a=qa(i,n.type);i!==a&&(Ce(Qi,n),Ce(mn,a))}function ql(n){Qi.current===n&&(Oe(mn),Oe(Qi))}var be=Kn(0);function So(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ql=[];function Zl(){for(var n=0;n<Ql.length;n++)Ql[n]._workInProgressVersionPrimary=null;Ql.length=0}var To=b.ReactCurrentDispatcher,Jl=b.ReactCurrentBatchConfig,kr=0,Me=null,Ke=null,Ze=null,ko=!1,Ji=!1,es=0,d0=0;function at(){throw Error(t(321))}function eu(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Zt(n[a],i[a]))return!1;return!0}function tu(n,i,a,u,d,p){if(kr=p,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,To.current=n===null||n.memoizedState===null?g0:y0,n=a(u,d),Ji){p=0;do{if(Ji=!1,es=0,25<=p)throw Error(t(301));p+=1,Ze=Ke=null,i.updateQueue=null,To.current=v0,n=a(u,d)}while(Ji)}if(To.current=wo,i=Ke!==null&&Ke.next!==null,kr=0,Ze=Ke=Me=null,ko=!1,i)throw Error(t(300));return n}function nu(){var n=es!==0;return es=0,n}function gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Bt(){if(Ke===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=Ke.next;var i=Ze===null?Me.memoizedState:Ze.next;if(i!==null)Ze=i,Ke=n;else{if(n===null)throw Error(t(310));Ke=n,n={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function ts(n,i){return typeof i=="function"?i(n):i}function ru(n){var i=Bt(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=Ke,d=u.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}u.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,u=u.baseState;var S=v=null,T=null,O=p;do{var U=O.lane;if((kr&U)===U)T!==null&&(T=T.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:n(u,O.action);else{var D={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};T===null?(S=T=D,v=u):T=T.next=D,Me.lanes|=U,xr|=U}O=O.next}while(O!==null&&O!==p);T===null?v=u:T.next=S,Zt(u,i.memoizedState)||(yt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=T,a.lastRenderedState=u}if(n=a.interleaved,n!==null){d=n;do p=d.lane,Me.lanes|=p,xr|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function iu(n){var i=Bt(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Zt(p,i.memoizedState)||(yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,u]}function $d(){}function Ud(n,i){var a=Me,u=Bt(),d=i(),p=!Zt(u.memoizedState,d);if(p&&(u.memoizedState=d,yt=!0),u=u.queue,su(zd.bind(null,a,u,n),[n]),u.getSnapshot!==i||p||Ze!==null&&Ze.memoizedState.tag&1){if(a.flags|=2048,ns(9,Bd.bind(null,a,u,d,i),void 0,null),Je===null)throw Error(t(349));(kr&30)!==0||Dd(a,i,d)}return d}function Dd(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Bd(n,i,a,u){i.value=a,i.getSnapshot=u,Vd(i)&&Wd(n)}function zd(n,i,a){return a(function(){Vd(i)&&Wd(n)})}function Vd(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Zt(n,a)}catch{return!0}}function Wd(n){var i=On(n,1);i!==null&&rn(i,n,1,-1)}function Gd(n){var i=gn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:n},i.queue=n,n=n.dispatch=m0.bind(null,Me,n),[i.memoizedState,n]}function ns(n,i,a,u){return n={tag:n,create:i,destroy:a,deps:u,next:null},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n)),n}function Hd(){return Bt().memoizedState}function xo(n,i,a,u){var d=gn();Me.flags|=n,d.memoizedState=ns(1|i,a,void 0,u===void 0?null:u)}function Ao(n,i,a,u){var d=Bt();u=u===void 0?null:u;var p=void 0;if(Ke!==null){var v=Ke.memoizedState;if(p=v.destroy,u!==null&&eu(u,v.deps)){d.memoizedState=ns(i,a,p,u);return}}Me.flags|=n,d.memoizedState=ns(1|i,a,p,u)}function Kd(n,i){return xo(8390656,8,n,i)}function su(n,i){return Ao(2048,8,n,i)}function Yd(n,i){return Ao(4,2,n,i)}function Xd(n,i){return Ao(4,4,n,i)}function qd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qd(n,i,a){return a=a!=null?a.concat([n]):null,Ao(4,4,qd.bind(null,i,n),a)}function ou(){}function Zd(n,i){var a=Bt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&eu(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function Jd(n,i){var a=Bt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&eu(i,u[1])?u[0]:(n=n(),a.memoizedState=[n,i],n)}function eh(n,i,a){return(kr&21)===0?(n.baseState&&(n.baseState=!1,yt=!0),n.memoizedState=a):(Zt(a,i)||(a=Of(),Me.lanes|=a,xr|=a,n.baseState=!0),i)}function h0(n,i){var a=we;we=a!==0&&4>a?a:4,n(!0);var u=Jl.transition;Jl.transition={};try{n(!1),i()}finally{we=a,Jl.transition=u}}function th(){return Bt().memoizedState}function p0(n,i,a){var u=tr(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},nh(n))rh(i,a);else if(a=Ld(n,i,a,u),a!==null){var d=ft();rn(a,n,u,d),ih(a,i,u)}}function m0(n,i,a){var u=tr(n),d={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(nh(n))rh(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,S=p(v,a);if(d.hasEagerState=!0,d.eagerState=S,Zt(S,v)){var T=i.interleaved;T===null?(d.next=d,Kl(i)):(d.next=T.next,T.next=d),i.interleaved=d;return}}catch{}a=Ld(n,i,d,u),a!==null&&(d=ft(),rn(a,n,u,d),ih(a,i,u))}}function nh(n){var i=n.alternate;return n===Me||i!==null&&i===Me}function rh(n,i){Ji=ko=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function ih(n,i,a){if((a&4194240)!==0){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,ll(n,a)}}var wo={readContext:Dt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},g0={readContext:Dt,useCallback:function(n,i){return gn().memoizedState=[n,i===void 0?null:i],n},useContext:Dt,useEffect:Kd,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,xo(4194308,4,qd.bind(null,i,n),a)},useLayoutEffect:function(n,i){return xo(4194308,4,n,i)},useInsertionEffect:function(n,i){return xo(4,2,n,i)},useMemo:function(n,i){var a=gn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var u=gn();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=p0.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var i=gn();return n={current:n},i.memoizedState=n},useState:Gd,useDebugValue:ou,useDeferredValue:function(n){return gn().memoizedState=n},useTransition:function(){var n=Gd(!1),i=n[0];return n=h0.bind(null,n[1]),gn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var u=Me,d=gn();if(Pe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Je===null)throw Error(t(349));(kr&30)!==0||Dd(u,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Kd(zd.bind(null,u,p,n),[n]),u.flags|=2048,ns(9,Bd.bind(null,u,p,a,i),void 0,null),a},useId:function(){var n=gn(),i=Je.identifierPrefix;if(Pe){var a=In,u=Nn;a=(u&~(1<<32-Qt(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=es++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=d0++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},y0={readContext:Dt,useCallback:Zd,useContext:Dt,useEffect:su,useImperativeHandle:Qd,useInsertionEffect:Yd,useLayoutEffect:Xd,useMemo:Jd,useReducer:ru,useRef:Hd,useState:function(){return ru(ts)},useDebugValue:ou,useDeferredValue:function(n){var i=Bt();return eh(i,Ke.memoizedState,n)},useTransition:function(){var n=ru(ts)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:$d,useSyncExternalStore:Ud,useId:th,unstable_isNewReconciler:!1},v0={readContext:Dt,useCallback:Zd,useContext:Dt,useEffect:su,useImperativeHandle:Qd,useInsertionEffect:Yd,useLayoutEffect:Xd,useMemo:Jd,useReducer:iu,useRef:Hd,useState:function(){return iu(ts)},useDebugValue:ou,useDeferredValue:function(n){var i=Bt();return Ke===null?i.memoizedState=n:eh(i,Ke.memoizedState,n)},useTransition:function(){var n=iu(ts)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:$d,useSyncExternalStore:Ud,useId:th,unstable_isNewReconciler:!1};function en(n,i){if(n&&n.defaultProps){i=H({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function au(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:H({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Co={isMounted:function(n){return(n=n._reactInternals)?mr(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var u=ft(),d=tr(n),p=_n(u,d);p.payload=i,a!=null&&(p.callback=a),i=Qn(n,p,d),i!==null&&(rn(i,n,d,u),vo(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=ft(),d=tr(n),p=_n(u,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=Qn(n,p,d),i!==null&&(rn(i,n,d,u),vo(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=ft(),u=tr(n),d=_n(a,u);d.tag=2,i!=null&&(d.callback=i),i=Qn(n,d,u),i!==null&&(rn(i,n,u,a),vo(i,n,u))}};function sh(n,i,a,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!zi(a,u)||!zi(d,p):!0}function oh(n,i,a){var u=!1,d=Yn,p=i.contextType;return typeof p=="object"&&p!==null?p=Dt(p):(d=gt(i)?yr:ot.current,u=i.contextTypes,p=(u=u!=null)?Xr(n,d):Yn),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Co,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function ah(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Co.enqueueReplaceState(i,i.state,null)}function lu(n,i,a,u){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Yl(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dt(p):(p=gt(i)?yr:ot.current,d.context=Xr(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(au(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Co.enqueueReplaceState(d,d.state,null),Eo(n,a,d,u),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ri(n,i){try{var a="",u=i;do a+=Ee(u),u=u.return;while(u);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function uu(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function cu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var E0=typeof WeakMap=="function"?WeakMap:Map;function lh(n,i,a){a=_n(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){Lo||(Lo=!0,wu=u),cu(n,i)},a}function uh(n,i,a){a=_n(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;a.payload=function(){return u(d)},a.callback=function(){cu(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){cu(n,i),typeof u!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function ch(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new E0;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(a)||(d.add(a),n=L0.bind(null,n,i,a),i.then(n,n))}function fh(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function dh(n,i,a,u,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=_n(-1,1),i.tag=2,Qn(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var S0=b.ReactCurrentOwner,yt=!1;function ct(n,i,a,u){i.child=n===null?Pd(i,null,a,u):Jr(i,n.child,a,u)}function hh(n,i,a,u,d){a=a.render;var p=i.ref;return ti(i,d),u=tu(n,i,a,u,p,d),a=nu(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Pn(n,i,d)):(Pe&&a&&$l(i),i.flags|=1,ct(n,i,u,d),i.child)}function ph(n,i,a,u,d){if(n===null){var p=a.type;return typeof p=="function"&&!Pu(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,mh(n,i,p,u,d)):(n=Uo(a.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:zi,a(v,u)&&n.ref===i.ref)return Pn(n,i,d)}return i.flags|=1,n=rr(p,u),n.ref=i.ref,n.return=i,i.child=n}function mh(n,i,a,u,d){if(n!==null){var p=n.memoizedProps;if(zi(p,u)&&n.ref===i.ref)if(yt=!1,i.pendingProps=u=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(yt=!0);else return i.lanes=n.lanes,Pn(n,i,d)}return fu(n,i,a,u,d)}function gh(n,i,a){var u=i.pendingProps,d=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(si,Nt),Nt|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ce(si,Nt),Nt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,Ce(si,Nt),Nt|=u}else p!==null?(u=p.baseLanes|a,i.memoizedState=null):u=a,Ce(si,Nt),Nt|=u;return ct(n,i,d,a),i.child}function yh(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function fu(n,i,a,u,d){var p=gt(a)?yr:ot.current;return p=Xr(i,p),ti(i,d),a=tu(n,i,a,u,p,d),u=nu(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Pn(n,i,d)):(Pe&&u&&$l(i),i.flags|=1,ct(n,i,a,d),i.child)}function vh(n,i,a,u,d){if(gt(a)){var p=!0;uo(i)}else p=!1;if(ti(i,d),i.stateNode===null)No(n,i),oh(i,a,u),lu(i,a,u,d),u=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var T=v.context,O=a.contextType;typeof O=="object"&&O!==null?O=Dt(O):(O=gt(a)?yr:ot.current,O=Xr(i,O));var U=a.getDerivedStateFromProps,D=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";D||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==u||T!==O)&&ah(i,v,u,O),qn=!1;var $=i.memoizedState;v.state=$,Eo(i,u,v,d),T=i.memoizedState,S!==u||$!==T||mt.current||qn?(typeof U=="function"&&(au(i,a,U,u),T=i.memoizedState),(S=qn||sh(i,a,S,u,$,T,O))?(D||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=T),v.props=u,v.state=T,v.context=O,u=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,bd(n,i),S=i.memoizedProps,O=i.type===i.elementType?S:en(i.type,S),v.props=O,D=i.pendingProps,$=v.context,T=a.contextType,typeof T=="object"&&T!==null?T=Dt(T):(T=gt(a)?yr:ot.current,T=Xr(i,T));var K=a.getDerivedStateFromProps;(U=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==D||$!==T)&&ah(i,v,u,T),qn=!1,$=i.memoizedState,v.state=$,Eo(i,u,v,d);var X=i.memoizedState;S!==D||$!==X||mt.current||qn?(typeof K=="function"&&(au(i,a,K,u),X=i.memoizedState),(O=qn||sh(i,a,O,u,$,X,T)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,T)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),v.props=u,v.state=X,v.context=T,u=O):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return du(n,i,a,u,p,d)}function du(n,i,a,u,d,p){yh(n,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&xd(i,a,!1),Pn(n,i,p);u=i.stateNode,S0.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&v?(i.child=Jr(i,n.child,null,p),i.child=Jr(i,null,S,p)):ct(n,i,S,p),i.memoizedState=u.state,d&&xd(i,a,!0),i.child}function Eh(n){var i=n.stateNode;i.pendingContext?Td(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Td(n,i.context,!1),Xl(n,i.containerInfo)}function Sh(n,i,a,u,d){return Zr(),zl(d),i.flags|=256,ct(n,i,a,u),i.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Th(n,i,a){var u=i.pendingProps,d=be.current,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ce(be,d&1),n===null)return Bl(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,n=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Do(v,u,0,null),n=Rr(n,u,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=pu(a),i.memoizedState=hu,n):mu(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return T0(n,i,v,u,S,d,a);if(p){p=u.fallback,v=i.mode,d=n.child,S=d.sibling;var T={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=T,i.deletions=null):(u=rr(d,T),u.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=rr(S,p):(p=Rr(p,v,a,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=n.child.memoizedState,v=v===null?pu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,i.memoizedState=hu,u}return p=n.child,n=p.sibling,u=rr(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=a),u.return=i,u.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=u,i.memoizedState=null,u}function mu(n,i){return i=Do({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ro(n,i,a,u){return u!==null&&zl(u),Jr(i,n.child,null,a),n=mu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function T0(n,i,a,u,d,p,v){if(a)return i.flags&256?(i.flags&=-257,u=uu(Error(t(422))),Ro(n,i,v,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Do({mode:"visible",children:u.children},d,0,null),p=Rr(p,d,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&Jr(i,n.child,null,v),i.child.memoizedState=pu(v),i.memoizedState=hu,p);if((i.mode&1)===0)return Ro(n,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var S=u.dgst;return u=S,p=Error(t(419)),u=uu(p,u,void 0),Ro(n,i,v,u)}if(S=(v&n.childLanes)!==0,yt||S){if(u=Je,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,On(n,d),rn(u,n,d,-1))}return _u(),u=uu(Error(t(421))),Ro(n,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=b0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,Rt=Hn(d.nextSibling),Ct=i,Pe=!0,Jt=null,n!==null&&($t[Ut++]=Nn,$t[Ut++]=In,$t[Ut++]=vr,Nn=n.id,In=n.overflow,vr=i),i=mu(i,u.children),i.flags|=4096,i)}function kh(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Hl(n.return,i,a)}function gu(n,i,a,u,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=d)}function xh(n,i,a){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ct(n,i,u.children,a),u=be.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kh(n,a,i);else if(n.tag===19)kh(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Ce(be,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&So(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),gu(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&So(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}gu(i,!0,a,null,p);break;case"together":gu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function No(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Pn(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),xr|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=rr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=rr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function k0(n,i,a){switch(i.tag){case 3:Eh(i),Zr();break;case 5:Fd(i);break;case 1:gt(i.type)&&uo(i);break;case 4:Xl(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(go,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(be,be.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Th(n,i,a):(Ce(be,be.current&1),n=Pn(n,i,a),n!==null?n.sibling:null);Ce(be,be.current&1);break;case 19:if(u=(a&i.childLanes)!==0,(n.flags&128)!==0){if(u)return xh(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(be,be.current),u)break;return null;case 22:case 23:return i.lanes=0,gh(n,i,a)}return Pn(n,i,a)}var Ah,yu,wh,Ch;Ah=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},yu=function(){},wh=function(n,i,a,u){var d=n.memoizedProps;if(d!==u){n=i.stateNode,Tr(mn.current);var p=null;switch(a){case"input":d=pr(n,d),u=pr(n,u),p=[];break;case"select":d=H({},d,{value:void 0}),u=H({},u,{value:void 0}),p=[];break;case"textarea":d=Xa(n,d),u=Xa(n,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=oo)}Qa(a,u);var v;a=null;for(O in d)if(!u.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var S=d[O];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?p||(p=[]):(p=p||[]).push(O,null));for(O in u){var T=u[O];if(S=d?.[O],u.hasOwnProperty(O)&&T!==S&&(T!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in T)T.hasOwnProperty(v)&&S[v]!==T[v]&&(a||(a={}),a[v]=T[v])}else a||(p||(p=[]),p.push(O,a)),a=T;else O==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,S=S?S.__html:void 0,T!=null&&S!==T&&(p=p||[]).push(O,T)):O==="children"?typeof T!="string"&&typeof T!="number"||(p=p||[]).push(O,""+T):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(o.hasOwnProperty(O)?(T!=null&&O==="onScroll"&&Ie("scroll",n),p||S===T||(p=[])):(p=p||[]).push(O,T))}a&&(p=p||[]).push("style",a);var O=p;(i.updateQueue=O)&&(i.flags|=4)}},Ch=function(n,i,a,u){a!==u&&(i.flags|=4)};function rs(n,i){if(!Pe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function x0(n,i,a){var u=i.pendingProps;switch(Ul(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return gt(i.type)&&lo(),lt(i),null;case 3:return u=i.stateNode,ni(),Oe(mt),Oe(ot),Zl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(po(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Jt!==null&&(Nu(Jt),Jt=null))),yu(n,i),lt(i),null;case 5:ql(i);var d=Tr(Zi.current);if(a=i.type,n!==null&&i.stateNode!=null)wh(n,i,a,u,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(t(166));return lt(i),null}if(n=Tr(mn.current),po(i)){u=i.stateNode,a=i.type;var p=i.memoizedProps;switch(u[pn]=i,u[Ki]=p,n=(i.mode&1)!==0,a){case"dialog":Ie("cancel",u),Ie("close",u);break;case"iframe":case"object":case"embed":Ie("load",u);break;case"video":case"audio":for(d=0;d<Wi.length;d++)Ie(Wi[d],u);break;case"source":Ie("error",u);break;case"img":case"image":case"link":Ie("error",u),Ie("load",u);break;case"details":Ie("toggle",u);break;case"input":xi(u,p),Ie("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ie("invalid",u);break;case"textarea":uf(u,p),Ie("invalid",u)}Qa(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?u.textContent!==S&&(p.suppressHydrationWarning!==!0&&so(u.textContent,S,n),d=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&so(u.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ie("scroll",u)}switch(a){case"input":At(u),lf(u,p,!0);break;case"textarea":At(u),ff(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=oo)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=df(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=v.createElement(a,{is:u.is}):(n=v.createElement(a),a==="select"&&(v=n,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):n=v.createElementNS(n,a),n[pn]=i,n[Ki]=u,Ah(n,i,!1,!1),i.stateNode=n;e:{switch(v=Za(a,u),a){case"dialog":Ie("cancel",n),Ie("close",n),d=u;break;case"iframe":case"object":case"embed":Ie("load",n),d=u;break;case"video":case"audio":for(d=0;d<Wi.length;d++)Ie(Wi[d],n);d=u;break;case"source":Ie("error",n),d=u;break;case"img":case"image":case"link":Ie("error",n),Ie("load",n),d=u;break;case"details":Ie("toggle",n),d=u;break;case"input":xi(n,u),d=pr(n,u),Ie("invalid",n);break;case"option":d=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},d=H({},u,{value:void 0}),Ie("invalid",n);break;case"textarea":uf(n,u),d=Xa(n,u),Ie("invalid",n);break;default:d=u}Qa(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var T=S[p];p==="style"?mf(n,T):p==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&hf(n,T)):p==="children"?typeof T=="string"?(a!=="textarea"||T!=="")&&wi(n,T):typeof T=="number"&&wi(n,""+T):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?T!=null&&p==="onScroll"&&Ie("scroll",n):T!=null&&P(n,p,T,v))}switch(a){case"input":At(n),lf(n,u,!1);break;case"textarea":At(n),ff(n);break;case"option":u.value!=null&&n.setAttribute("value",""+ve(u.value));break;case"select":n.multiple=!!u.multiple,p=u.value,p!=null?Fr(n,!!u.multiple,p,!1):u.defaultValue!=null&&Fr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=oo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(n&&i.stateNode!=null)Ch(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(t(166));if(a=Tr(Zi.current),Tr(mn.current),po(i)){if(u=i.stateNode,a=i.memoizedProps,u[pn]=i,(p=u.nodeValue!==a)&&(n=Ct,n!==null))switch(n.tag){case 3:so(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&so(u.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[pn]=i,i.stateNode=u}return lt(i),null;case 13:if(Oe(be),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Id(),Zr(),i.flags|=98560,p=!1;else if(p=po(i),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[pn]=i}else Zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else Jt!==null&&(Nu(Jt),Jt=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(be.current&1)!==0?Ye===0&&(Ye=3):_u())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return ni(),yu(n,i),n===null&&Gi(i.stateNode.containerInfo),lt(i),null;case 10:return Gl(i.type._context),lt(i),null;case 17:return gt(i.type)&&lo(),lt(i),null;case 19:if(Oe(be),p=i.memoizedState,p===null)return lt(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)rs(p,!1);else{if(Ye!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=So(n),v!==null){for(i.flags|=128,rs(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)p=a,n=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ce(be,be.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ve()>oi&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304)}else{if(!u)if(n=So(v),n!==null){if(i.flags|=128,u=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),rs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Pe)return lt(i),null}else 2*Ve()-p.renderingStartTime>oi&&a!==1073741824&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(a=p.last,a!==null?a.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ve(),i.sibling=null,a=be.current,Ce(be,u?a&1|2:a&1),i):(lt(i),null);case 22:case 23:return Ou(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Nt&1073741824)!==0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function A0(n,i){switch(Ul(i),i.tag){case 1:return gt(i.type)&&lo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(),Oe(mt),Oe(ot),Zl(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return ql(i),null;case 13:if(Oe(be),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Zr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Oe(be),null;case 4:return ni(),null;case 10:return Gl(i.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var Io=!1,ut=!1,w0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ii(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){De(n,i,u)}else a.current=null}function vu(n,i,a){try{a()}catch(u){De(n,i,u)}}var Rh=!1;function C0(n,i){if(Ol=Ys,n=sd(),kl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,T=-1,O=0,U=0,D=n,$=null;t:for(;;){for(var K;D!==a||d!==0&&D.nodeType!==3||(S=v+d),D!==p||u!==0&&D.nodeType!==3||(T=v+u),D.nodeType===3&&(v+=D.nodeValue.length),(K=D.firstChild)!==null;)$=D,D=K;for(;;){if(D===n)break t;if($===a&&++O===d&&(S=v),$===p&&++U===u&&(T=v),(K=D.nextSibling)!==null)break;D=$,$=D.parentNode}D=K}a=S===-1||T===-1?null:{start:S,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(_l={focusedElem:n,selectionRange:a},Ys=!1,Y=i;Y!==null;)if(i=Y,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Y=n;else for(;Y!==null;){i=Y;try{var X=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var q=X.memoizedProps,We=X.memoizedState,R=i.stateNode,x=R.getSnapshotBeforeUpdate(i.elementType===i.type?q:en(i.type,q),We);R.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(z){De(i,i.return,z)}if(n=i.sibling,n!==null){n.return=i.return,Y=n;break}Y=i.return}return X=Rh,Rh=!1,X}function is(n,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&vu(i,a,p)}d=d.next}while(d!==u)}}function Oo(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function Eu(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function Nh(n){var i=n.alternate;i!==null&&(n.alternate=null,Nh(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[pn],delete i[Ki],delete i[Ml],delete i[l0],delete i[u0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ih(n){return n.tag===5||n.tag===3||n.tag===4}function Oh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ih(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Su(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oo));else if(u!==4&&(n=n.child,n!==null))for(Su(n,i,a),n=n.sibling;n!==null;)Su(n,i,a),n=n.sibling}function Tu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Tu(n,i,a),n=n.sibling;n!==null;)Tu(n,i,a),n=n.sibling}var nt=null,tn=!1;function Zn(n,i,a){for(a=a.child;a!==null;)_h(n,i,a),a=a.sibling}function _h(n,i,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(zs,a)}catch{}switch(a.tag){case 5:ut||ii(a,i);case 6:var u=nt,d=tn;nt=null,Zn(n,i,a),nt=u,tn=d,nt!==null&&(tn?(n=nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):nt.removeChild(a.stateNode));break;case 18:nt!==null&&(tn?(n=nt,a=a.stateNode,n.nodeType===8?bl(n.parentNode,a):n.nodeType===1&&bl(n,a),ji(n)):bl(nt,a.stateNode));break;case 4:u=nt,d=tn,nt=a.stateNode.containerInfo,tn=!0,Zn(n,i,a),nt=u,tn=d;break;case 0:case 11:case 14:case 15:if(!ut&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&vu(a,i,v),d=d.next}while(d!==u)}Zn(n,i,a);break;case 1:if(!ut&&(ii(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(S){De(a,i,S)}Zn(n,i,a);break;case 21:Zn(n,i,a);break;case 22:a.mode&1?(ut=(u=ut)||a.memoizedState!==null,Zn(n,i,a),ut=u):Zn(n,i,a);break;default:Zn(n,i,a)}}function Ph(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new w0),i.forEach(function(u){var d=M0.bind(null,n,u);a.has(u)||(a.add(u),u.then(d,d))})}}function nn(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];try{var p=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:nt=S.stateNode,tn=!1;break e;case 3:nt=S.stateNode.containerInfo,tn=!0;break e;case 4:nt=S.stateNode.containerInfo,tn=!0;break e}S=S.return}if(nt===null)throw Error(t(160));_h(p,v,d),nt=null,tn=!1;var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(O){De(d,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Lh(i,n),i=i.sibling}function Lh(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(nn(i,n),yn(n),u&4){try{is(3,n,n.return),Oo(3,n)}catch(q){De(n,n.return,q)}try{is(5,n,n.return)}catch(q){De(n,n.return,q)}}break;case 1:nn(i,n),yn(n),u&512&&a!==null&&ii(a,a.return);break;case 5:if(nn(i,n),yn(n),u&512&&a!==null&&ii(a,a.return),n.flags&32){var d=n.stateNode;try{wi(d,"")}catch(q){De(n,n.return,q)}}if(u&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,S=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&af(d,p),Za(S,v);var O=Za(S,p);for(v=0;v<T.length;v+=2){var U=T[v],D=T[v+1];U==="style"?mf(d,D):U==="dangerouslySetInnerHTML"?hf(d,D):U==="children"?wi(d,D):P(d,U,D,O)}switch(S){case"input":Ka(d,p);break;case"textarea":cf(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var K=p.value;K!=null?Fr(d,!!p.multiple,K,!1):$!==!!p.multiple&&(p.defaultValue!=null?Fr(d,!!p.multiple,p.defaultValue,!0):Fr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ki]=p}catch(q){De(n,n.return,q)}}break;case 6:if(nn(i,n),yn(n),u&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(q){De(n,n.return,q)}}break;case 3:if(nn(i,n),yn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ji(i.containerInfo)}catch(q){De(n,n.return,q)}break;case 4:nn(i,n),yn(n);break;case 13:nn(i,n),yn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Au=Ve())),u&4&&Ph(n);break;case 22:if(U=a!==null&&a.memoizedState!==null,n.mode&1?(ut=(O=ut)||U,nn(i,n),ut=O):nn(i,n),yn(n),u&8192){if(O=n.memoizedState!==null,(n.stateNode.isHidden=O)&&!U&&(n.mode&1)!==0)for(Y=n,U=n.child;U!==null;){for(D=Y=U;Y!==null;){switch($=Y,K=$.child,$.tag){case 0:case 11:case 14:case 15:is(4,$,$.return);break;case 1:ii($,$.return);var X=$.stateNode;if(typeof X.componentWillUnmount=="function"){u=$,a=$.return;try{i=u,X.props=i.memoizedProps,X.state=i.memoizedState,X.componentWillUnmount()}catch(q){De(u,a,q)}}break;case 5:ii($,$.return);break;case 22:if($.memoizedState!==null){jh(D);continue}}K!==null?(K.return=$,Y=K):jh(D)}U=U.sibling}e:for(U=null,D=n;;){if(D.tag===5){if(U===null){U=D;try{d=D.stateNode,O?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=D.stateNode,T=D.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,S.style.display=pf("display",v))}catch(q){De(n,n.return,q)}}}else if(D.tag===6){if(U===null)try{D.stateNode.nodeValue=O?"":D.memoizedProps}catch(q){De(n,n.return,q)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===n)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===n)break e;for(;D.sibling===null;){if(D.return===null||D.return===n)break e;U===D&&(U=null),D=D.return}U===D&&(U=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:nn(i,n),yn(n),u&4&&Ph(n);break;case 21:break;default:nn(i,n),yn(n)}}function yn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Ih(a)){var u=a;break e}a=a.return}throw Error(t(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(wi(d,""),u.flags&=-33);var p=Oh(n);Tu(n,p,d);break;case 3:case 4:var v=u.stateNode.containerInfo,S=Oh(n);Su(n,S,v);break;default:throw Error(t(161))}}catch(T){De(n,n.return,T)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function R0(n,i,a){Y=n,bh(n)}function bh(n,i,a){for(var u=(n.mode&1)!==0;Y!==null;){var d=Y,p=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Io;if(!v){var S=d.alternate,T=S!==null&&S.memoizedState!==null||ut;S=Io;var O=ut;if(Io=v,(ut=T)&&!O)for(Y=d;Y!==null;)v=Y,T=v.child,v.tag===22&&v.memoizedState!==null?Fh(d):T!==null?(T.return=v,Y=T):Fh(d);for(;p!==null;)Y=p,bh(p),p=p.sibling;Y=d,Io=S,ut=O}Mh(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Y=p):Mh(n)}}function Mh(n){for(;Y!==null;){var i=Y;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ut||Oo(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(a===null)u.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:en(i.type,a.memoizedProps);u.componentDidUpdate(d,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&jd(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}jd(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&a.focus();break;case"img":T.src&&(a.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var D=U.dehydrated;D!==null&&ji(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ut||i.flags&512&&Eu(i)}catch($){De(i,i.return,$)}}if(i===n){Y=null;break}if(a=i.sibling,a!==null){a.return=i.return,Y=a;break}Y=i.return}}function jh(n){for(;Y!==null;){var i=Y;if(i===n){Y=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Y=a;break}Y=i.return}}function Fh(n){for(;Y!==null;){var i=Y;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Oo(4,i)}catch(T){De(i,a,T)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(T){De(i,d,T)}}var p=i.return;try{Eu(i)}catch(T){De(i,p,T)}break;case 5:var v=i.return;try{Eu(i)}catch(T){De(i,v,T)}}}catch(T){De(i,i.return,T)}if(i===n){Y=null;break}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break}Y=i.return}}var N0=Math.ceil,_o=b.ReactCurrentDispatcher,ku=b.ReactCurrentOwner,zt=b.ReactCurrentBatchConfig,Se=0,Je=null,He=null,rt=0,Nt=0,si=Kn(0),Ye=0,ss=null,xr=0,Po=0,xu=0,os=null,vt=null,Au=0,oi=1/0,Ln=null,Lo=!1,wu=null,Jn=null,bo=!1,er=null,Mo=0,as=0,Cu=null,jo=-1,Fo=0;function ft(){return(Se&6)!==0?Ve():jo!==-1?jo:jo=Ve()}function tr(n){return(n.mode&1)===0?1:(Se&2)!==0&&rt!==0?rt&-rt:f0.transition!==null?(Fo===0&&(Fo=Of()),Fo):(n=we,n!==0||(n=window.event,n=n===void 0?16:Uf(n.type)),n)}function rn(n,i,a,u){if(50<as)throw as=0,Cu=null,Error(t(185));_i(n,a,u),((Se&2)===0||n!==Je)&&(n===Je&&((Se&2)===0&&(Po|=a),Ye===4&&nr(n,rt)),Et(n,u),a===1&&Se===0&&(i.mode&1)===0&&(oi=Ve()+500,co&&Xn()))}function Et(n,i){var a=n.callbackNode;fv(n,i);var u=Gs(n,n===Je?rt:0);if(u===0)a!==null&&Rf(a),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(a!=null&&Rf(a),i===1)n.tag===0?c0(Uh.bind(null,n)):Ad(Uh.bind(null,n)),o0(function(){(Se&6)===0&&Xn()}),a=null;else{switch(_f(u)){case 1:a=sl;break;case 4:a=Nf;break;case 16:a=Bs;break;case 536870912:a=If;break;default:a=Bs}a=Kh(a,$h.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function $h(n,i){if(jo=-1,Fo=0,(Se&6)!==0)throw Error(t(327));var a=n.callbackNode;if(ai()&&n.callbackNode!==a)return null;var u=Gs(n,n===Je?rt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||i)i=$o(n,u);else{i=u;var d=Se;Se|=2;var p=Bh();(Je!==n||rt!==i)&&(Ln=null,oi=Ve()+500,wr(n,i));do try{_0();break}catch(S){Dh(n,S)}while(!0);Wl(),_o.current=p,Se=d,He!==null?i=0:(Je=null,rt=0,i=Ye)}if(i!==0){if(i===2&&(d=ol(n),d!==0&&(u=d,i=Ru(n,d))),i===1)throw a=ss,wr(n,0),nr(n,u),Et(n,Ve()),a;if(i===6)nr(n,u);else{if(d=n.current.alternate,(u&30)===0&&!I0(d)&&(i=$o(n,u),i===2&&(p=ol(n),p!==0&&(u=p,i=Ru(n,p))),i===1))throw a=ss,wr(n,0),nr(n,u),Et(n,Ve()),a;switch(n.finishedWork=d,n.finishedLanes=u,i){case 0:case 1:throw Error(t(345));case 2:Cr(n,vt,Ln);break;case 3:if(nr(n,u),(u&130023424)===u&&(i=Au+500-Ve(),10<i)){if(Gs(n,0)!==0)break;if(d=n.suspendedLanes,(d&u)!==u){ft(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ll(Cr.bind(null,n,vt,Ln),i);break}Cr(n,vt,Ln);break;case 4:if(nr(n,u),(u&4194240)===u)break;for(i=n.eventTimes,d=-1;0<u;){var v=31-Qt(u);p=1<<v,v=i[v],v>d&&(d=v),u&=~p}if(u=d,u=Ve()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*N0(u/1960))-u,10<u){n.timeoutHandle=Ll(Cr.bind(null,n,vt,Ln),u);break}Cr(n,vt,Ln);break;case 5:Cr(n,vt,Ln);break;default:throw Error(t(329))}}}return Et(n,Ve()),n.callbackNode===a?$h.bind(null,n):null}function Ru(n,i){var a=os;return n.current.memoizedState.isDehydrated&&(wr(n,i).flags|=256),n=$o(n,i),n!==2&&(i=vt,vt=a,i!==null&&Nu(i)),n}function Nu(n){vt===null?vt=n:vt.push.apply(vt,n)}function I0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var d=a[u],p=d.getSnapshot;d=d.value;try{if(!Zt(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function nr(n,i){for(i&=~xu,i&=~Po,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Qt(i),u=1<<a;n[a]=-1,i&=~u}}function Uh(n){if((Se&6)!==0)throw Error(t(327));ai();var i=Gs(n,0);if((i&1)===0)return Et(n,Ve()),null;var a=$o(n,i);if(n.tag!==0&&a===2){var u=ol(n);u!==0&&(i=u,a=Ru(n,u))}if(a===1)throw a=ss,wr(n,0),nr(n,i),Et(n,Ve()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Cr(n,vt,Ln),Et(n,Ve()),null}function Iu(n,i){var a=Se;Se|=1;try{return n(i)}finally{Se=a,Se===0&&(oi=Ve()+500,co&&Xn())}}function Ar(n){er!==null&&er.tag===0&&(Se&6)===0&&ai();var i=Se;Se|=1;var a=zt.transition,u=we;try{if(zt.transition=null,we=1,n)return n()}finally{we=u,zt.transition=a,Se=i,(Se&6)===0&&Xn()}}function Ou(){Nt=si.current,Oe(si)}function wr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,s0(a)),He!==null)for(a=He.return;a!==null;){var u=a;switch(Ul(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&lo();break;case 3:ni(),Oe(mt),Oe(ot),Zl();break;case 5:ql(u);break;case 4:ni();break;case 13:Oe(be);break;case 19:Oe(be);break;case 10:Gl(u.type._context);break;case 22:case 23:Ou()}a=a.return}if(Je=n,He=n=rr(n.current,null),rt=Nt=i,Ye=0,ss=null,xu=Po=xr=0,vt=os=null,Sr!==null){for(i=0;i<Sr.length;i++)if(a=Sr[i],u=a.interleaved,u!==null){a.interleaved=null;var d=u.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,u.next=v}a.pending=u}Sr=null}return n}function Dh(n,i){do{var a=He;try{if(Wl(),To.current=wo,ko){for(var u=Me.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}ko=!1}if(kr=0,Ze=Ke=Me=null,Ji=!1,es=0,ku.current=null,a===null||a.return===null){Ye=1,ss=i,He=null;break}e:{var p=n,v=a.return,S=a,T=i;if(i=rt,S.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var O=T,U=S,D=U.tag;if((U.mode&1)===0&&(D===0||D===11||D===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var K=fh(v);if(K!==null){K.flags&=-257,dh(K,v,S,p,i),K.mode&1&&ch(p,O,i),i=K,T=O;var X=i.updateQueue;if(X===null){var q=new Set;q.add(T),i.updateQueue=q}else X.add(T);break e}else{if((i&1)===0){ch(p,O,i),_u();break e}T=Error(t(426))}}else if(Pe&&S.mode&1){var We=fh(v);if(We!==null){(We.flags&65536)===0&&(We.flags|=256),dh(We,v,S,p,i),zl(ri(T,S));break e}}p=T=ri(T,S),Ye!==4&&(Ye=2),os===null?os=[p]:os.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var R=lh(p,T,i);Md(p,R);break e;case 1:S=T;var x=p.type,I=p.stateNode;if((p.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Jn===null||!Jn.has(I)))){p.flags|=65536,i&=-i,p.lanes|=i;var z=uh(p,S,i);Md(p,z);break e}}p=p.return}while(p!==null)}Vh(a)}catch(Q){i=Q,He===a&&a!==null&&(He=a=a.return);continue}break}while(!0)}function Bh(){var n=_o.current;return _o.current=wo,n===null?wo:n}function _u(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||(xr&268435455)===0&&(Po&268435455)===0||nr(Je,rt)}function $o(n,i){var a=Se;Se|=2;var u=Bh();(Je!==n||rt!==i)&&(Ln=null,wr(n,i));do try{O0();break}catch(d){Dh(n,d)}while(!0);if(Wl(),Se=a,_o.current=u,He!==null)throw Error(t(261));return Je=null,rt=0,Ye}function O0(){for(;He!==null;)zh(He)}function _0(){for(;He!==null&&!nv();)zh(He)}function zh(n){var i=Hh(n.alternate,n,Nt);n.memoizedProps=n.pendingProps,i===null?Vh(n):He=i,ku.current=null}function Vh(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=x0(a,i,Nt),a!==null){He=a;return}}else{if(a=A0(a,i),a!==null){a.flags&=32767,He=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ye=6,He=null;return}}if(i=i.sibling,i!==null){He=i;return}He=i=n}while(i!==null);Ye===0&&(Ye=5)}function Cr(n,i,a){var u=we,d=zt.transition;try{zt.transition=null,we=1,P0(n,i,a,u)}finally{zt.transition=d,we=u}return null}function P0(n,i,a,u){do ai();while(er!==null);if((Se&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(dv(n,p),n===Je&&(He=Je=null,rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||bo||(bo=!0,Kh(Bs,function(){return ai(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=zt.transition,zt.transition=null;var v=we;we=1;var S=Se;Se|=4,ku.current=null,C0(n,a),Lh(a,n),Zv(_l),Ys=!!Ol,_l=Ol=null,n.current=a,R0(a),rv(),Se=S,we=v,zt.transition=p}else n.current=a;if(bo&&(bo=!1,er=n,Mo=d),p=n.pendingLanes,p===0&&(Jn=null),ov(a.stateNode),Et(n,Ve()),i!==null)for(u=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],u(d.value,{componentStack:d.stack,digest:d.digest});if(Lo)throw Lo=!1,n=wu,wu=null,n;return(Mo&1)!==0&&n.tag!==0&&ai(),p=n.pendingLanes,(p&1)!==0?n===Cu?as++:(as=0,Cu=n):as=0,Xn(),null}function ai(){if(er!==null){var n=_f(Mo),i=zt.transition,a=we;try{if(zt.transition=null,we=16>n?16:n,er===null)var u=!1;else{if(n=er,er=null,Mo=0,(Se&6)!==0)throw Error(t(331));var d=Se;for(Se|=4,Y=n.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var S=p.deletions;if(S!==null){for(var T=0;T<S.length;T++){var O=S[T];for(Y=O;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:is(8,U,p)}var D=U.child;if(D!==null)D.return=U,Y=D;else for(;Y!==null;){U=Y;var $=U.sibling,K=U.return;if(Nh(U),U===O){Y=null;break}if($!==null){$.return=K,Y=$;break}Y=K}}}var X=p.alternate;if(X!==null){var q=X.child;if(q!==null){X.child=null;do{var We=q.sibling;q.sibling=null,q=We}while(q!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:is(9,p,p.return)}var R=p.sibling;if(R!==null){R.return=p.return,Y=R;break e}Y=p.return}}var x=n.current;for(Y=x;Y!==null;){v=Y;var I=v.child;if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,Y=I;else e:for(v=x;Y!==null;){if(S=Y,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Oo(9,S)}}catch(Q){De(S,S.return,Q)}if(S===v){Y=null;break e}var z=S.sibling;if(z!==null){z.return=S.return,Y=z;break e}Y=S.return}}if(Se=d,Xn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(zs,n)}catch{}u=!0}return u}finally{we=a,zt.transition=i}}return!1}function Wh(n,i,a){i=ri(a,i),i=lh(n,i,1),n=Qn(n,i,1),i=ft(),n!==null&&(_i(n,1,i),Et(n,i))}function De(n,i,a){if(n.tag===3)Wh(n,n,a);else for(;i!==null;){if(i.tag===3){Wh(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Jn===null||!Jn.has(u))){n=ri(a,n),n=uh(i,n,1),i=Qn(i,n,1),n=ft(),i!==null&&(_i(i,1,n),Et(i,n));break}}i=i.return}}function L0(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),i=ft(),n.pingedLanes|=n.suspendedLanes&a,Je===n&&(rt&a)===a&&(Ye===4||Ye===3&&(rt&130023424)===rt&&500>Ve()-Au?wr(n,0):xu|=a),Et(n,i)}function Gh(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ws,Ws<<=1,(Ws&130023424)===0&&(Ws=4194304)));var a=ft();n=On(n,i),n!==null&&(_i(n,i,a),Et(n,a))}function b0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Gh(n,a)}function M0(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(i),Gh(n,a)}var Hh;Hh=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||mt.current)yt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return yt=!1,k0(n,i,a);yt=(n.flags&131072)!==0}else yt=!1,Pe&&(i.flags&1048576)!==0&&wd(i,ho,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;No(n,i),n=i.pendingProps;var d=Xr(i,ot.current);ti(i,a),d=tu(null,i,u,n,d,a);var p=nu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,gt(u)?(p=!0,uo(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Yl(i),d.updater=Co,i.stateNode=d,d._reactInternals=i,lu(i,u,n,a),i=du(null,i,u,!0,p,a)):(i.tag=0,Pe&&p&&$l(i),ct(null,i,d,a),i=i.child),i;case 16:u=i.elementType;e:{switch(No(n,i),n=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=F0(u),n=en(u,n),d){case 0:i=fu(null,i,u,n,a);break e;case 1:i=vh(null,i,u,n,a);break e;case 11:i=hh(null,i,u,n,a);break e;case 14:i=ph(null,i,u,en(u.type,n),a);break e}throw Error(t(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),fu(n,i,u,d,a);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),vh(n,i,u,d,a);case 3:e:{if(Eh(i),n===null)throw Error(t(387));u=i.pendingProps,p=i.memoizedState,d=p.element,bd(n,i),Eo(i,u,null,a);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ri(Error(t(423)),i),i=Sh(n,i,u,a,d);break e}else if(u!==d){d=ri(Error(t(424)),i),i=Sh(n,i,u,a,d);break e}else for(Rt=Hn(i.stateNode.containerInfo.firstChild),Ct=i,Pe=!0,Jt=null,a=Pd(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zr(),u===d){i=Pn(n,i,a);break e}ct(n,i,u,a)}i=i.child}return i;case 5:return Fd(i),n===null&&Bl(i),u=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,Pl(u,d)?v=null:p!==null&&Pl(u,p)&&(i.flags|=32),yh(n,i),ct(n,i,v,a),i.child;case 6:return n===null&&Bl(i),null;case 13:return Th(n,i,a);case 4:return Xl(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Jr(i,null,u,a):ct(n,i,u,a),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),hh(n,i,u,d,a);case 7:return ct(n,i,i.pendingProps,a),i.child;case 8:return ct(n,i,i.pendingProps.children,a),i.child;case 12:return ct(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ce(go,u._currentValue),u._currentValue=v,p!==null)if(Zt(p.value,v)){if(p.children===d.children&&!mt.current){i=Pn(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var T=S.firstContext;T!==null;){if(T.context===u){if(p.tag===1){T=_n(-1,a&-a),T.tag=2;var O=p.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?T.next=T:(T.next=U.next,U.next=T),O.pending=T}}p.lanes|=a,T=p.alternate,T!==null&&(T.lanes|=a),Hl(p.return,a,i),S.lanes|=a;break}T=T.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Hl(v,a,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}ct(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,ti(i,a),d=Dt(d),u=u(d),i.flags|=1,ct(n,i,u,a),i.child;case 14:return u=i.type,d=en(u,i.pendingProps),d=en(u.type,d),ph(n,i,u,d,a);case 15:return mh(n,i,i.type,i.pendingProps,a);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),No(n,i),i.tag=1,gt(u)?(n=!0,uo(i)):n=!1,ti(i,a),oh(i,u,d),lu(i,u,d,a),du(null,i,u,!0,n,a);case 19:return xh(n,i,a);case 22:return gh(n,i,a)}throw Error(t(156,i.tag))};function Kh(n,i){return Cf(n,i)}function j0(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(n,i,a,u){return new j0(n,i,a,u)}function Pu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function F0(n){if(typeof n=="function")return Pu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tt)return 11;if(n===de)return 14}return 2}function rr(n,i){var a=n.alternate;return a===null?(a=Vt(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Uo(n,i,a,u,d,p){var v=2;if(u=n,typeof n=="function")Pu(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case B:return Rr(a.children,d,p,i);case G:v=8,d|=8;break;case Ae:return n=Vt(12,a,i,d|2),n.elementType=Ae,n.lanes=p,n;case $e:return n=Vt(13,a,i,d),n.elementType=$e,n.lanes=p,n;case Ue:return n=Vt(19,a,i,d),n.elementType=Ue,n.lanes=p,n;case xe:return Do(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:v=10;break e;case Ge:v=9;break e;case tt:v=11;break e;case de:v=14;break e;case ye:v=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Vt(v,a,i,d),i.elementType=n,i.type=u,i.lanes=p,i}function Rr(n,i,a,u){return n=Vt(7,n,u,i),n.lanes=a,n}function Do(n,i,a,u){return n=Vt(22,n,u,i),n.elementType=xe,n.lanes=a,n.stateNode={isHidden:!1},n}function Lu(n,i,a){return n=Vt(6,n,null,i),n.lanes=a,n}function bu(n,i,a){return i=Vt(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function $0(n,i,a,u,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Mu(n,i,a,u,d,p,v,S,T){return n=new $0(n,i,a,S,T),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Vt(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yl(p),n}function U0(n,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:n,containerInfo:i,implementation:a}}function Yh(n){if(!n)return Yn;n=n._reactInternals;e:{if(mr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(gt(a))return kd(n,a,i)}return i}function Xh(n,i,a,u,d,p,v,S,T){return n=Mu(a,u,!0,n,d,p,v,S,T),n.context=Yh(null),a=n.current,u=ft(),d=tr(a),p=_n(u,d),p.callback=i??null,Qn(a,p,d),n.current.lanes=d,_i(n,d,u),Et(n,u),n}function Bo(n,i,a,u){var d=i.current,p=ft(),v=tr(d);return a=Yh(a),i.context===null?i.context=a:i.pendingContext=a,i=_n(p,v),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=Qn(d,i,v),n!==null&&(rn(n,d,v,p),vo(n,d,v)),v}function zo(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function qh(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ju(n,i){qh(n,i),(n=n.alternate)&&qh(n,i)}function D0(){return null}var Qh=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fu(n){this._internalRoot=n}Vo.prototype.render=Fu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Bo(n,i,null,null)},Vo.prototype.unmount=Fu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ar(function(){Bo(null,n,null,null)}),i[Cn]=null}};function Vo(n){this._internalRoot=n}Vo.prototype.unstable_scheduleHydration=function(n){if(n){var i=bf();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Vn.length&&i!==0&&i<Vn[a].priority;a++);Vn.splice(a,0,n),a===0&&Ff(n)}};function $u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function B0(n,i,a,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var O=zo(v);p.call(O)}}var v=Xh(i,u,n,0,null,!1,!1,"",Zh);return n._reactRootContainer=v,n[Cn]=v.current,Gi(n.nodeType===8?n.parentNode:n),Ar(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof u=="function"){var S=u;u=function(){var O=zo(T);S.call(O)}}var T=Mu(n,0,!1,null,null,!1,!1,"",Zh);return n._reactRootContainer=T,n[Cn]=T.current,Gi(n.nodeType===8?n.parentNode:n),Ar(function(){Bo(i,T,a,u)}),T}function Go(n,i,a,u,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var T=zo(v);S.call(T)}}Bo(i,v,n,d)}else v=B0(a,i,n,d,u);return zo(v)}Pf=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Oi(i.pendingLanes);a!==0&&(ll(i,a|1),Et(i,Ve()),(Se&6)===0&&(oi=Ve()+500,Xn()))}break;case 13:Ar(function(){var u=On(n,1);if(u!==null){var d=ft();rn(u,n,1,d)}}),ju(n,1)}},ul=function(n){if(n.tag===13){var i=On(n,134217728);if(i!==null){var a=ft();rn(i,n,134217728,a)}ju(n,134217728)}},Lf=function(n){if(n.tag===13){var i=tr(n),a=On(n,i);if(a!==null){var u=ft();rn(a,n,i,u)}ju(n,i)}},bf=function(){return we},Mf=function(n,i){var a=we;try{return we=n,i()}finally{we=a}},tl=function(n,i,a){switch(i){case"input":if(Ka(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var d=ao(u);if(!d)throw Error(t(90));jt(u),Ka(u,d)}}}break;case"textarea":cf(n,a);break;case"select":i=a.value,i!=null&&Fr(n,!!a.multiple,i,!1)}},Ef=Iu,Sf=Ar;var z0={usingClientEntryPoint:!1,Events:[Yi,Kr,ao,yf,vf,Iu]},ls={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V0={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Af(n),n===null?null:n.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{zs=Ho.inject(V0),hn=Ho}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0,St.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$u(i))throw Error(t(200));return U0(n,i,null,a)},St.createRoot=function(n,i){if(!$u(n))throw Error(t(299));var a=!1,u="",d=Qh;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Mu(n,1,!1,null,null,a,!1,u,d),n[Cn]=i.current,Gi(n.nodeType===8?n.parentNode:n),new Fu(i)},St.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Af(i),n=n===null?null:n.stateNode,n},St.flushSync=function(n){return Ar(n)},St.hydrate=function(n,i,a){if(!Wo(i))throw Error(t(200));return Go(null,n,i,!0,a)},St.hydrateRoot=function(n,i,a){if(!$u(n))throw Error(t(405));var u=a!=null&&a.hydratedSources||null,d=!1,p="",v=Qh;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Xh(i,null,n,1,a??null,d,!1,p,v),n[Cn]=i.current,Gi(n),u)for(n=0;n<u.length;n++)a=u[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Vo(i)},St.render=function(n,i,a){if(!Wo(i))throw Error(t(200));return Go(null,n,i,!1,a)},St.unmountComponentAtNode=function(n){if(!Wo(n))throw Error(t(40));return n._reactRootContainer?(Ar(function(){Go(null,null,n,!1,function(){n._reactRootContainer=null,n[Cn]=null})}),!0):!1},St.unstable_batchedUpdates=Iu,St.unstable_renderSubtreeIntoContainer=function(n,i,a,u){if(!Wo(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Go(n,i,a,!1,u)},St.version="18.3.1-next-f1338f8080-20240426",St}var op;function Z0(){if(op)return Bu.exports;op=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bu.exports=Q0(),Bu.exports}var ap;function J0(){if(ap)return Ko;ap=1;var r=Z0();return Ko.createRoot=r.createRoot,Ko.hydrateRoot=r.hydrateRoot,Ko}var eE=J0();const lp=r=>{let e;const t=new Set,s=(m,g)=>{const y=typeof m=="function"?m(e):m;if(!Object.is(y,e)){const E=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(k=>k(e,E))}},o=()=>e,f={setState:s,getState:o,getInitialState:()=>h,subscribe:m=>(t.add(m),()=>t.delete(m))},h=e=r(s,o,f);return f},tE=(r=>r?lp(r):lp),nE=r=>r;function rE(r,e=nE){const t=sn.useSyncExternalStore(r.subscribe,sn.useCallback(()=>e(r.getState()),[r,e]),sn.useCallback(()=>e(r.getInitialState()),[r,e]));return sn.useDebugValue(t),t}const up=r=>{const e=tE(r),t=s=>rE(e,s);return Object.assign(t,e),t},iE=(r=>r?up(r):up),sE=`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills and commands.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation for current file"
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest", "Testing Library"]
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "refactor", "test"]
  }
}

@restrictions {
  - "Always explain your reasoning before making changes"
  - "Ask for clarification when requirements are unclear"
  - "Never skip writing tests for new functionality"
}
`,oE={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}},ie=iE(r=>({files:[{path:"project.prs",content:sE}],activeFile:"project.prs",isCompiling:!1,compileResult:null,lastCompileTime:null,config:oE,activeFormatter:"github",showErrors:!1,showExamples:!1,showConfig:!1,showEnvVars:!1,setActiveFile:e=>r({activeFile:e}),updateFile:(e,t)=>r(s=>({files:s.files.map(o=>o.path===e?{...o,content:t}:o)})),addFile:(e,t)=>r(s=>({files:[...s.files,{path:e,content:t}],activeFile:e})),deleteFile:e=>r(t=>{const s=t.files.filter(l=>l.path!==e),o=t.activeFile===e?s[0]?.path??"project.prs":t.activeFile;return{files:s,activeFile:o}}),renameFile:(e,t)=>r(s=>({files:s.files.map(o=>o.path===e?{...o,path:t}:o),activeFile:s.activeFile===e?t:s.activeFile})),setFiles:e=>r({files:e,activeFile:e[0]?.path??"project.prs"}),setCompiling:e=>r({isCompiling:e}),setCompileResult:e=>r({compileResult:e,lastCompileTime:Date.now(),showErrors:e!==null&&!e.success}),setTargetEnabled:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],enabled:t}}}})),setTargetVersion:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],version:t}}}})),setTargetConvention:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],convention:t}}}})),setFormatting:e=>r(t=>({config:{...t.config,formatting:{...t.config.formatting,...e}}})),setConfig:e=>r({config:e}),setEnvVar:(e,t)=>r(s=>({config:{...s.config,envVars:{...s.config.envVars,[e]:t}}})),deleteEnvVar:e=>r(t=>{const{[e]:s,...o}=t.config.envVars;return{config:{...t.config,envVars:o}}}),setEnvVars:e=>r(t=>({config:{...t.config,envVars:e}})),setActiveFormatter:e=>r({activeFormatter:e}),setShowErrors:e=>r({showErrors:e}),setShowExamples:e=>r({showExamples:e}),setShowConfig:e=>r({showConfig:e}),setShowEnvVars:e=>r({showEnvVars:e})})),aE=r=>r.files.find(e=>e.path===r.activeFile)?.content??"",lE=r=>{const e={};for(const t of r.files)e[t.path]=t.content;return e},uE=(r,e)=>{if(!r.compileResult?.outputs)return[];const t=r.compileResult.outputs,s=[],l={claude:[/CLAUDE\.md$/,/\.claude\/rules\/.*\.md$/,/\.claude\/skills\/.*\.md$/,/\.claude\/memories\/.*\.md$/],github:[/\.github\/copilot-instructions\.md$/,/copilot-instructions\.md$/,/\.github\/instructions\/.*\.instructions\.md$/,/\.github\/prompts\/.*\.prompt\.md$/,/\.github\/skills\/.*\/SKILL\.md$/,/\.github\/agents\/.*\.md$/,/^AGENTS\.md$/],cursor:[/\.cursor\/rules\/.*\.mdc$/,/\.cursorrules$/],antigravity:[/\.agent\/rules\/.*\.md$/,/\.agent\/workflows\/.*\.md$/]}[e];for(const[h,m]of t)l.some(g=>g.test(h))&&s.push(m);const f={claude:"CLAUDE.md",github:"copilot-instructions.md",cursor:"instructions.mdc",antigravity:"project.md"}[e];return s.sort((h,m)=>{const g=h.path.endsWith(f),y=m.path.endsWith(f);return g&&!y?-1:!g&&y?1:h.path.localeCompare(m.path)}),s},cE=r=>Object.entries(r.config.targets).filter(([,e])=>e.enabled).map(([e])=>e);var Wu={exports:{}},cp;function fE(){return cp||(cp=1,(function(r){var e=(function(){var t=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={};function c(h,m){if(!l[h]){l[h]={};for(var g=0;g<h.length;g++)l[h][h.charAt(g)]=g}return l[h][m]}var f={compressToBase64:function(h){if(h==null)return"";var m=f._compress(h,6,function(g){return s.charAt(g)});switch(m.length%4){default:case 0:return m;case 1:return m+"===";case 2:return m+"==";case 3:return m+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:f._decompress(h.length,32,function(m){return c(s,h.charAt(m))})},compressToUTF16:function(h){return h==null?"":f._compress(h,15,function(m){return t(m+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:f._decompress(h.length,16384,function(m){return h.charCodeAt(m)-32})},compressToUint8Array:function(h){for(var m=f.compress(h),g=new Uint8Array(m.length*2),y=0,E=m.length;y<E;y++){var k=m.charCodeAt(y);g[y*2]=k>>>8,g[y*2+1]=k%256}return g},decompressFromUint8Array:function(h){if(h==null)return f.decompress(h);for(var m=new Array(h.length/2),g=0,y=m.length;g<y;g++)m[g]=h[g*2]*256+h[g*2+1];var E=[];return m.forEach(function(k){E.push(t(k))}),f.decompress(E.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":f._compress(h,6,function(m){return o.charAt(m)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),f._decompress(h.length,32,function(m){return c(o,h.charAt(m))}))},compress:function(h){return f._compress(h,16,function(m){return t(m)})},_compress:function(h,m,g){if(h==null)return"";var y,E,k={},C={},N="",F="",M="",_=2,P=3,b=2,V=[],L=0,B=0,G;for(G=0;G<h.length;G+=1)if(N=h.charAt(G),Object.prototype.hasOwnProperty.call(k,N)||(k[N]=P++,C[N]=!0),F=M+N,Object.prototype.hasOwnProperty.call(k,F))M=F;else{if(Object.prototype.hasOwnProperty.call(C,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,B==m-1?(B=0,V.push(g(L)),L=0):B++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete C[M]}else for(E=k[M],y=0;y<b;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++),k[F]=P++,M=String(N)}if(M!==""){if(Object.prototype.hasOwnProperty.call(C,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,B==m-1?(B=0,V.push(g(L)),L=0):B++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete C[M]}else for(E=k[M],y=0;y<b;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++)}for(E=2,y=0;y<b;y++)L=L<<1|E&1,B==m-1?(B=0,V.push(g(L)),L=0):B++,E=E>>1;for(;;)if(L=L<<1,B==m-1){V.push(g(L));break}else B++;return V.join("")},decompress:function(h){return h==null?"":h==""?null:f._decompress(h.length,32768,function(m){return h.charCodeAt(m)})},_decompress:function(h,m,g){var y=[],E=4,k=4,C=3,N="",F=[],M,_,P,b,V,L,B,G={val:g(0),position:m,index:1};for(M=0;M<3;M+=1)y[M]=M;for(P=0,V=Math.pow(2,2),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(P){case 0:for(P=0,V=Math.pow(2,8),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;B=t(P);break;case 1:for(P=0,V=Math.pow(2,16),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;B=t(P);break;case 2:return""}for(y[3]=B,_=B,F.push(B);;){if(G.index>h)return"";for(P=0,V=Math.pow(2,C),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(B=P){case 0:for(P=0,V=Math.pow(2,8),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[k++]=t(P),B=k-1,E--;break;case 1:for(P=0,V=Math.pow(2,16),L=1;L!=V;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[k++]=t(P),B=k-1,E--;break;case 2:return F.join("")}if(E==0&&(E=Math.pow(2,C),C++),y[B])N=y[B];else if(B===k)N=_+_.charAt(0);else return null;F.push(N),y[k++]=_+N.charAt(0),E--,_=N,E==0&&(E=Math.pow(2,C),C++)}}};return f})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Wu)),Wu.exports}var dE=fE();const Qm=qm(dE),hE="1",ar={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}};function pE(r){const e={},t={};for(const[o,l]of Object.entries(r.targets)){const c=ar.targets[o],f={};l.enabled!==c.enabled&&(f.enabled=l.enabled),l.version!==c.version&&(f.version=l.version),l.convention!==c.convention&&(f.convention=l.convention),Object.keys(f).length>0&&(t[o]=f)}Object.keys(t).length>0&&(e.targets=t);const s={};return r.formatting.tabWidth!==ar.formatting.tabWidth&&(s.tabWidth=r.formatting.tabWidth),r.formatting.proseWrap!==ar.formatting.proseWrap&&(s.proseWrap=r.formatting.proseWrap),r.formatting.printWidth!==ar.formatting.printWidth&&(s.printWidth=r.formatting.printWidth),Object.keys(s).length>0&&(e.formatting=s),r.envVars&&Object.keys(r.envVars).length>0&&(e.envVars=r.envVars),Object.keys(e).length>0?e:void 0}function mE(r){if(!r)return{...ar};const e={targets:{...ar.targets},formatting:{...ar.formatting},envVars:{...ar.envVars}};if(r.targets)for(const[t,s]of Object.entries(r.targets))e.targets[t]={...e.targets[t],...s};return r.formatting&&(e.formatting={...e.formatting,...r.formatting}),r.envVars&&(e.envVars={...r.envVars}),e}function Zm(r,e,t,s){const o={files:r.map(f=>({path:f.path,content:f.content})),entry:r[0]?.path,formatter:e,config:s?pE(s):void 0,version:hE},l=JSON.stringify(o);return Qm.compressToEncodedURIComponent(l)}function gE(r){try{const e=Qm.decompressFromEncodedURIComponent(r);if(!e)return null;const t=JSON.parse(e);if(!t.files||!Array.isArray(t.files))return null;for(const s of t.files)if(typeof s.path!="string"||typeof s.content!="string")return null;return t}catch{return null}}function yE(r,e,t,s){const o=Zm(r,e,t,s),l=new URL(window.location.href);return l.searchParams.set("s",o),e&&l.searchParams.set("f",e),l.toString()}function vE(){const r=new URL(window.location.href),e=r.searchParams.get("s");if(!e)return null;const t=gE(e);if(!t)return null;const s=r.searchParams.get("f");return s&&(t.formatter=s),t}function EE(){return new URL(window.location.href).searchParams.get("e")}function SE(r,e,t,s){const o=Zm(r,e,t,s),l=new URL(window.location.href);l.searchParams.set("s",o),e&&l.searchParams.set("f",e),l.searchParams.delete("e"),window.history.replaceState(null,"",l.toString())}async function TE(r,e,t,s){try{const o=yE(r,e,t,s);return await navigator.clipboard.writeText(o),!0}catch{return!1}}function kE(){const r=ie(m=>m.files),e=ie(m=>m.activeFormatter),t=ie(m=>m.config),s=ie(m=>m.setFiles),o=ie(m=>m.setActiveFormatter),l=ie(m=>m.setConfig),c=Z.useRef(!1),f=Z.useRef(null);return Z.useEffect(()=>{if(c.current||(c.current=!0,EE()))return;const g=vE();g&&(s(g.files),g.formatter&&o(g.formatter),g.config&&l(mE(g.config)))},[s,o,l]),Z.useEffect(()=>{if(c.current)return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{SE(r,e,void 0,t)},1e3),()=>{f.current&&clearTimeout(f.current)}},[r,e,t]),{handleShare:Z.useCallback(async()=>await TE(r,e,void 0,t),[r,e,t])}}const xE="1.0.0-rc.3",AE="https://github.com/mrwogu/promptscript";function wE(){const r=ie(N=>N.isCompiling),e=ie(N=>N.compileResult),t=ie(N=>N.showExamples),s=ie(N=>N.setShowExamples),o=ie(N=>N.showConfig),l=ie(N=>N.setShowConfig),c=ie(N=>N.showEnvVars),f=ie(N=>N.setShowEnvVars),h=Object.keys(ie(N=>N.config.envVars)).length,{handleShare:m}=kE(),[g,y]=Z.useState(!1),E=e&&!e.success,k=e?.stats,C=async()=>{await m()&&(y(!0),setTimeout(()=>y(!1),2e3))};return w.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-ps-surface border-b border-ps-border",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[w.jsx("span",{className:"text-ps-primary",children:"PRS"}),w.jsx("span",{children:"PromptScript Playground"})]}),w.jsxs("span",{className:"text-xs text-gray-500",children:["v",xE]})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"flex items-center gap-2 text-sm",children:r?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),w.jsx("span",{className:"text-gray-400",children:"Compiling..."})]}):E?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),w.jsxs("span",{className:"text-red-400",children:[e.errors.length," error",e.errors.length!==1?"s":""]})]}):e?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),w.jsxs("span",{className:"text-green-400",children:["Compiled in ",k?.totalTime,"ms"]})]}):null}),w.jsxs("button",{onClick:()=>l(!o),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${o?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Configuration",children:[w.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Config"]}),w.jsxs("button",{onClick:()=>f(!c),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${c?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Environment Variables",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Env",h>0&&w.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-indigo-500 rounded-full",children:h})]}),w.jsx("button",{onClick:()=>s(!t),className:`px-3 py-1 text-sm rounded ${t?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,children:"Examples"}),w.jsx("button",{onClick:C,className:"px-3 py-1 text-sm bg-ps-primary hover:bg-ps-secondary rounded text-white relative",children:g?"Copied!":"Share"}),w.jsx("a",{href:AE,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z",clipRule:"evenodd"})})})]})]})}function CE(){const r=ie(k=>k.files),e=ie(k=>k.activeFile),t=ie(k=>k.setActiveFile),s=ie(k=>k.addFile),o=ie(k=>k.deleteFile),l=ie(k=>k.renameFile),[c,f]=Z.useState(null),[h,m]=Z.useState(""),g=()=>{const k="new-file";let C=`${k}.prs`,N=1;for(;r.some(F=>F.path===C);)C=`${k}-${N}.prs`,N++;s(C,`@meta {
  id: "`+C.replace(".prs","")+`"
  syntax: "1.0.0"
}
`)},y=k=>{f(k),m(k)},E=k=>{if(h&&h!==k){const C=h.endsWith(".prs")?h:`${h}.prs`;r.some(N=>N.path===C)||l(k,C)}f(null)};return w.jsxs("div",{className:"flex items-center bg-ps-bg border-b border-ps-border overflow-x-auto",children:[r.map(k=>w.jsx("div",{className:`group flex items-center px-3 py-2 text-sm cursor-pointer border-r border-ps-border ${e===k.path?"bg-ps-surface text-white":"text-gray-400 hover:bg-ps-surface/50"}`,onClick:()=>t(k.path),onDoubleClick:()=>y(k.path),children:c===k.path?w.jsx("input",{type:"text",value:h,onChange:C=>m(C.target.value),onBlur:()=>E(k.path),onKeyDown:C=>{C.key==="Enter"&&E(k.path),C.key==="Escape"&&f(null)},className:"bg-transparent border-b border-ps-primary outline-none w-24",autoFocus:!0,onClick:C=>C.stopPropagation()}):w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"truncate max-w-[120px]",children:k.path}),r.length>1&&w.jsx("button",{onClick:C=>{C.stopPropagation(),o(k.path)},className:"ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-red-400",children:""})]})},k.path)),w.jsx("button",{onClick:g,className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-ps-surface/50",title:"Add new file",children:"+"})]})}function fp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function RE(r){if(Array.isArray(r))return r}function NE(r,e,t){return(e=ME(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function IE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,o,l,c,f=[],h=!0,m=!1;try{if(l=(t=t.call(r)).next,e!==0)for(;!(h=(s=l.call(t)).done)&&(f.push(s.value),f.length!==e);h=!0);}catch(g){m=!0,o=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(m)throw o}}return f}}function OE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function hp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dp(Object(t),!0).forEach(function(s){NE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function _E(r,e){if(r==null)return{};var t,s,o=PE(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)t=l[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function PE(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;t[s]=r[s]}return t}function LE(r,e){return RE(r)||IE(r,e)||jE(r,e)||OE()}function bE(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ME(r){var e=bE(r,"string");return typeof e=="symbol"?e:e+""}function jE(r,e){if(r){if(typeof r=="string")return fp(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fp(r,e):void 0}}function FE(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function mp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pp(Object(t),!0).forEach(function(s){FE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function $E(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(s){return e.reduceRight(function(o,l){return l(o)},s)}}function ms(r){return function e(){for(var t=this,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return o.length>=r.length?r.apply(this,o):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(o,f))}}}function pa(r){return{}.toString.call(r).includes("Object")}function UE(r){return!Object.keys(r).length}function xs(r){return typeof r=="function"}function DE(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function BE(r,e){return pa(e)||lr("changeType"),Object.keys(e).some(function(t){return!DE(r,t)})&&lr("changeField"),e}function zE(r){xs(r)||lr("selectorType")}function VE(r){xs(r)||pa(r)||lr("handlerType"),pa(r)&&Object.values(r).some(function(e){return!xs(e)})&&lr("handlersType")}function WE(r){r||lr("initialIsRequired"),pa(r)||lr("initialType"),UE(r)&&lr("initialContent")}function GE(r,e){throw new Error(r[e]||r.default)}var HE={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},lr=ms(GE)(HE),Yo={changes:BE,selector:zE,handler:VE,initial:WE};function KE(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yo.initial(r),Yo.handler(e);var t={current:r},s=ms(qE)(t,e),o=ms(XE)(t),l=ms(Yo.changes)(r),c=ms(YE)(t);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Yo.selector(m),m(t.current)}function h(m){$E(s,o,l,c)(m)}return[f,h]}function YE(r,e){return xs(e)?e(r.current):e}function XE(r,e){return r.current=mp(mp({},r.current),e),e}function qE(r,e,t){return xs(e)?e(r.current):Object.keys(t).forEach(function(s){var o;return(o=e[s])===null||o===void 0?void 0:o.call(e,r.current[s])}),t}var QE={create:KE},ZE={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function JE(r){return function e(){for(var t=this,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return o.length>=r.length?r.apply(this,o):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(o,f))}}}function eS(r){return{}.toString.call(r).includes("Object")}function tS(r){return r||gp("configIsRequired"),eS(r)||gp("configType"),r.urls?(nS(),{paths:{vs:r.urls.monacoBase}}):r}function nS(){console.warn(Jm.deprecation)}function rS(r,e){throw new Error(r[e]||r.default)}var Jm={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},gp=JE(rS)(Jm),iS={config:tS},sS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(o){return t.reduceRight(function(l,c){return c(l)},o)}};function eg(r,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&r[t]&&Object.assign(e[t],eg(r[t],e[t]))}),hp(hp({},r),e)}var oS={type:"cancelation",msg:"operation is manually canceled"};function Gu(r){var e=!1,t=new Promise(function(s,o){r.then(function(l){return e?o(oS):s(l)}),r.catch(o)});return t.cancel=function(){return e=!0},t}var aS=["monaco"],lS=QE.create({config:ZE,isInitialized:!1,resolve:null,reject:null,monaco:null}),tg=LE(lS,2),Ns=tg[0],Na=tg[1];function uS(r){var e=iS.config(r),t=e.monaco,s=_E(e,aS);Na(function(o){return{config:eg(o.config,s),monaco:t}})}function cS(){var r=Ns(function(e){var t=e.monaco,s=e.isInitialized,o=e.resolve;return{monaco:t,isInitialized:s,resolve:o}});if(!r.isInitialized){if(Na({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Gu(Hu);if(window.monaco&&window.monaco.editor)return ng(window.monaco),r.resolve(window.monaco),Gu(Hu);sS(fS,hS)(pS)}return Gu(Hu)}function fS(r){return document.body.appendChild(r)}function dS(r){var e=document.createElement("script");return r&&(e.src=r),e}function hS(r){var e=Ns(function(s){var o=s.config,l=s.reject;return{config:o,reject:l}}),t=dS("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return r()},t.onerror=e.reject,t}function pS(){var r=Ns(function(t){var s=t.config,o=t.resolve,l=t.reject;return{config:s,resolve:o,reject:l}}),e=window.require;e.config(r.config),e(["vs/editor/editor.main"],function(t){var s=t.m||t;ng(s),r.resolve(s)},function(t){r.reject(t)})}function ng(r){Ns().monaco||Na({monaco:r})}function mS(){return Ns(function(r){var e=r.monaco;return e})}var Hu=new Promise(function(r,e){return Na({resolve:r,reject:e})}),rg={config:uS,init:cS,__getMonacoInstance:mS},gS={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ku=gS,yS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},vS=yS;function ES({children:r}){return sn.createElement("div",{style:vS.container},r)}var SS=ES,TS=SS;function kS({width:r,height:e,isEditorReady:t,loading:s,_ref:o,className:l,wrapperProps:c}){return sn.createElement("section",{style:{...Ku.wrapper,width:r,height:e},...c},!t&&sn.createElement(TS,null,s),sn.createElement("div",{ref:o,style:{...Ku.fullWidth,...!t&&Ku.hide},className:l}))}var xS=kS,ig=Z.memo(xS);function AS(r){Z.useEffect(r,[])}var sg=AS;function wS(r,e,t=!0){let s=Z.useRef(!0);Z.useEffect(s.current||!t?()=>{s.current=!1}:r,e)}var Ot=wS;function Es(){}function pi(r,e,t,s){return CS(r,s)||RS(r,e,t,s)}function CS(r,e){return r.editor.getModel(og(r,e))}function RS(r,e,t,s){return r.editor.createModel(e,t,s?og(r,s):void 0)}function og(r,e){return r.Uri.parse(e)}function NS({original:r,modified:e,language:t,originalLanguage:s,modifiedLanguage:o,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:m="light",loading:g="Loading...",options:y={},height:E="100%",width:k="100%",className:C,wrapperProps:N={},beforeMount:F=Es,onMount:M=Es}){let[_,P]=Z.useState(!1),[b,V]=Z.useState(!0),L=Z.useRef(null),B=Z.useRef(null),G=Z.useRef(null),Ae=Z.useRef(M),ce=Z.useRef(F),Ge=Z.useRef(!1);sg(()=>{let de=rg.init();return de.then(ye=>(B.current=ye)&&V(!1)).catch(ye=>ye?.type!=="cancelation"&&console.error("Monaco initialization: error:",ye)),()=>L.current?Ue():de.cancel()}),Ot(()=>{if(L.current&&B.current){let de=L.current.getOriginalEditor(),ye=pi(B.current,r||"",s||t||"text",l||"");ye!==de.getModel()&&de.setModel(ye)}},[l],_),Ot(()=>{if(L.current&&B.current){let de=L.current.getModifiedEditor(),ye=pi(B.current,e||"",o||t||"text",c||"");ye!==de.getModel()&&de.setModel(ye)}},[c],_),Ot(()=>{let de=L.current.getModifiedEditor();de.getOption(B.current.editor.EditorOption.readOnly)?de.setValue(e||""):e!==de.getValue()&&(de.executeEdits("",[{range:de.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),de.pushUndoStop())},[e],_),Ot(()=>{L.current?.getModel()?.original.setValue(r||"")},[r],_),Ot(()=>{let{original:de,modified:ye}=L.current.getModel();B.current.editor.setModelLanguage(de,s||t||"text"),B.current.editor.setModelLanguage(ye,o||t||"text")},[t,s,o],_),Ot(()=>{B.current?.editor.setTheme(m)},[m],_),Ot(()=>{L.current?.updateOptions(y)},[y],_);let tt=Z.useCallback(()=>{if(!B.current)return;ce.current(B.current);let de=pi(B.current,r||"",s||t||"text",l||""),ye=pi(B.current,e||"",o||t||"text",c||"");L.current?.setModel({original:de,modified:ye})},[t,e,o,r,s,l,c]),$e=Z.useCallback(()=>{!Ge.current&&G.current&&(L.current=B.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...y}),tt(),B.current?.editor.setTheme(m),P(!0),Ge.current=!0)},[y,m,tt]);Z.useEffect(()=>{_&&Ae.current(L.current,B.current)},[_]),Z.useEffect(()=>{!b&&!_&&$e()},[b,_,$e]);function Ue(){let de=L.current?.getModel();f||de?.original?.dispose(),h||de?.modified?.dispose(),L.current?.dispose()}return sn.createElement(ig,{width:k,height:E,isEditorReady:_,loading:g,_ref:G,className:C,wrapperProps:N})}var IS=NS;Z.memo(IS);function OS(r){let e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}var _S=OS,Xo=new Map;function PS({defaultValue:r,defaultLanguage:e,defaultPath:t,value:s,language:o,path:l,theme:c="light",line:f,loading:h="Loading...",options:m={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:E=!1,width:k="100%",height:C="100%",className:N,wrapperProps:F={},beforeMount:M=Es,onMount:_=Es,onChange:P,onValidate:b=Es}){let[V,L]=Z.useState(!1),[B,G]=Z.useState(!0),Ae=Z.useRef(null),ce=Z.useRef(null),Ge=Z.useRef(null),tt=Z.useRef(_),$e=Z.useRef(M),Ue=Z.useRef(),de=Z.useRef(s),ye=_S(l),xe=Z.useRef(!1),W=Z.useRef(!1);sg(()=>{let A=rg.init();return A.then(j=>(Ae.current=j)&&G(!1)).catch(j=>j?.type!=="cancelation"&&console.error("Monaco initialization: error:",j)),()=>ce.current?H():A.cancel()}),Ot(()=>{let A=pi(Ae.current,r||s||"",e||o||"",l||t||"");A!==ce.current?.getModel()&&(y&&Xo.set(ye,ce.current?.saveViewState()),ce.current?.setModel(A),y&&ce.current?.restoreViewState(Xo.get(l)))},[l],V),Ot(()=>{ce.current?.updateOptions(m)},[m],V),Ot(()=>{!ce.current||s===void 0||(ce.current.getOption(Ae.current.editor.EditorOption.readOnly)?ce.current.setValue(s):s!==ce.current.getValue()&&(W.current=!0,ce.current.executeEdits("",[{range:ce.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),ce.current.pushUndoStop(),W.current=!1))},[s],V),Ot(()=>{let A=ce.current?.getModel();A&&o&&Ae.current?.editor.setModelLanguage(A,o)},[o],V),Ot(()=>{f!==void 0&&ce.current?.revealLine(f)},[f],V),Ot(()=>{Ae.current?.editor.setTheme(c)},[c],V);let J=Z.useCallback(()=>{if(!(!Ge.current||!Ae.current)&&!xe.current){$e.current(Ae.current);let A=l||t,j=pi(Ae.current,s||r||"",e||o||"",A||"");ce.current=Ae.current?.editor.create(Ge.current,{model:j,automaticLayout:!0,...m},g),y&&ce.current.restoreViewState(Xo.get(A)),Ae.current.editor.setTheme(c),f!==void 0&&ce.current.revealLine(f),L(!0),xe.current=!0}},[r,e,t,s,o,l,m,g,y,c,f]);Z.useEffect(()=>{V&&tt.current(ce.current,Ae.current)},[V]),Z.useEffect(()=>{!B&&!V&&J()},[B,V,J]),de.current=s,Z.useEffect(()=>{V&&P&&(Ue.current?.dispose(),Ue.current=ce.current?.onDidChangeModelContent(A=>{W.current||P(ce.current.getValue(),A)}))},[V,P]),Z.useEffect(()=>{if(V){let A=Ae.current.editor.onDidChangeMarkers(j=>{let fe=ce.current.getModel()?.uri;if(fe&&j.find(te=>te.path===fe.path)){let te=Ae.current.editor.getModelMarkers({resource:fe});b?.(te)}});return()=>{A?.dispose()}}return()=>{}},[V,b]);function H(){Ue.current?.dispose(),E?y&&Xo.set(l,ce.current.saveViewState()):ce.current.getModel()?.dispose(),ce.current.dispose()}return sn.createElement(ig,{width:k,height:C,isEditorReady:V,loading:h,_ref:Ge,className:N,wrapperProps:F})}var LS=PS,bS=Z.memo(LS),MS=bS;const mi="promptscript",jS={defaultToken:"",tokenPostfix:".prs",keywords:["true","false","null","string","number","boolean","enum"],directives:["@meta","@inherit","@extend","@use","@identity","@context","@standards","@restrictions","@guardrails","@shortcuts","@tools","@skills","@knowledge","@examples","@output","@behavior","@memory","@guards","@agents","@params","@project"],operators:[":"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/#.*$/,"comment"],[/@\w+/,{cases:{"@directives":"keyword.directive","@default":"keyword.directive"}}],[/[a-zA-Z_][\w-]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/:/,"delimiter"],[/,/,"delimiter"],[/\{\{/,"variable.template","@templateExpression"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/"""/,"string","@multilineString"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],templateExpression:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"],[/#.*$/,"comment"]],string:[[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^\\"$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/\$(?!\{)/,"string"],[/"/,"string","@pop"]],multilineString:[[/\{\{/,"variable.template","@templateExpressionInString"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^"{$]+/,"string"],[/\$(?!\{)/,"string"],[/"""/,"string","@pop"],[/"/,"string"]],templateExpressionInString:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]]}},FS={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],folding:{markers:{start:/^\s*@\w+\s*\{/,end:/^\s*\}/}}},$S=[{token:"keyword.directive",foreground:"818cf8",fontStyle:"bold"},{token:"keyword",foreground:"93c5fd"},{token:"string",foreground:"a3e635"},{token:"string.escape",foreground:"facc15"},{token:"comment",foreground:"6b7280",fontStyle:"italic"},{token:"number",foreground:"f472b6"},{token:"identifier",foreground:"f8fafc"},{token:"delimiter",foreground:"94a3b8"},{token:"variable.template",foreground:"f472b6",fontStyle:"bold"},{token:"variable.name",foreground:"fb923c"},{token:"variable.env",foreground:"fbbf24"}];function US(r){r.languages.getLanguages().some(t=>t.id===mi)||(r.languages.register({id:mi,extensions:[".prs"],aliases:["PromptScript","prs"],mimetypes:["text/x-promptscript"]}),r.languages.setMonarchTokensProvider(mi,jS),r.languages.setLanguageConfiguration(mi,FS),r.editor.defineTheme("prs-dark",{base:"vs-dark",inherit:!0,rules:$S,colors:{"editor.background":"#0f172a","editor.foreground":"#f8fafc","editor.lineHighlightBackground":"#1e293b","editorCursor.foreground":"#6366f1","editor.selectionBackground":"#334155","editorLineNumber.foreground":"#475569","editorLineNumber.activeForeground":"#94a3b8"}}))}function DS(r){return{provideCompletionItems:(e,t)=>{const s=e.getWordUntilPosition(t),o={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};return{suggestions:[{label:"@meta",kind:r.languages.CompletionItemKind.Keyword,insertText:`@meta {
  id: "$1"
  syntax: "1.0.0"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define metadata for the PromptScript file",range:o},{label:"@inherit",kind:r.languages.CompletionItemKind.Keyword,insertText:"@inherit $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Inherit from another PromptScript file",range:o},{label:"@use",kind:r.languages.CompletionItemKind.Keyword,insertText:"@use $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Import and merge directives from another file",range:o},{label:"@identity",kind:r.languages.CompletionItemKind.Keyword,insertText:`@identity {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define the AI identity/persona",range:o},{label:"@context",kind:r.languages.CompletionItemKind.Keyword,insertText:`@context {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide contextual information",range:o},{label:"@standards",kind:r.languages.CompletionItemKind.Keyword,insertText:`@standards {
  $1: [$2]
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define coding standards and guidelines",range:o},{label:"@restrictions",kind:r.languages.CompletionItemKind.Keyword,insertText:`@restrictions {
  - "$1"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define things the AI should NOT do",range:o},{label:"@shortcuts",kind:r.languages.CompletionItemKind.Keyword,insertText:`@shortcuts {
  "/$1": "$2"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define custom command shortcuts",range:o},{label:"@tools",kind:r.languages.CompletionItemKind.Keyword,insertText:`@tools {
  $1: {
    description: "$2"
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define available tools",range:o},{label:"@examples",kind:r.languages.CompletionItemKind.Keyword,insertText:`@examples {
  $1: {
    input: """
    $2
    """
    output: """
    $3
    """
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide example interactions",range:o}]}}}}function BS(){const r=ie(c=>c.activeFile),e=ie(aE),t=ie(c=>c.updateFile),s=Z.useRef(null),o=c=>{US(c),c.languages.registerCompletionItemProvider(mi,DS(c)),s.current=c},l=c=>{c.focus()};return w.jsx("div",{className:"h-full",children:w.jsx(MS,{height:"100%",language:mi,theme:"prs-dark",value:e,onChange:c=>{c!==void 0&&t(r,c)},beforeMount:o,onMount:l,options:{fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",renderLineHighlight:"line",tabSize:2,wordWrap:"on",automaticLayout:!0,padding:{top:12},suggestOnTriggerCharacters:!0,quickSuggestions:{other:!0,strings:!1,comments:!1}}})})}const yp=r=>Symbol.iterator in r,vp=r=>"entries"in r,Ep=(r,e)=>{const t=r instanceof Map?r:new Map(r.entries()),s=e instanceof Map?e:new Map(e.entries());if(t.size!==s.size)return!1;for(const[o,l]of t)if(!s.has(o)||!Object.is(l,s.get(o)))return!1;return!0},zS=(r,e)=>{const t=r[Symbol.iterator](),s=e[Symbol.iterator]();let o=t.next(),l=s.next();for(;!o.done&&!l.done;){if(!Object.is(o.value,l.value))return!1;o=t.next(),l=s.next()}return!!o.done&&!!l.done};function VS(r,e){return Object.is(r,e)?!0:typeof r!="object"||r===null||typeof e!="object"||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e)?!1:yp(r)&&yp(e)?vp(r)&&vp(e)?Ep(r,e):zS(r,e):Ep({entries:()=>Object.entries(r)},{entries:()=>Object.entries(e)})}function oc(r){const e=sn.useRef(void 0);return t=>{const s=r(t);return VS(e.current,s)?e.current:e.current=s}}const WS=[{name:"github",label:"GitHub",icon:""},{name:"claude",label:"Claude",icon:""},{name:"cursor",label:"Cursor",icon:""},{name:"antigravity",label:"Antigravity",icon:""}];function GS(r){const e=new Map,t=r.map(o=>{const l=o.split("/");return l[l.length-1]??o}),s=new Map;for(const o of t)s.set(o,(s.get(o)??0)+1);for(const[o,l]of r.entries()){const c=t[o]??l;if((s.get(c)??0)>1){const f=l.split("/");if(f.length>=2){const h=f[f.length-2]??"";e.set(l,`${h}/${c}`)}else e.set(l,c)}else e.set(l,c)}return e}function HS(){const r=ie(g=>g.activeFormatter),e=ie(g=>g.setActiveFormatter),t=ie(g=>g.compileResult),s=ie(g=>g.isCompiling),o=ie(oc(cE)),l=ie(oc(g=>uE(g,r))),[c,f]=Z.useState(0);Z.useEffect(()=>{f(0)},[r,l.length]),Z.useEffect(()=>{!o.includes(r)&&o.length>0&&e(o[0])},[r,o,e]);const h=Z.useMemo(()=>GS(l.map(g=>g.path)),[l]),m=l[c];return w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg",children:WS.map(g=>{const y=o.includes(g.name),E=r===g.name;return w.jsxs("button",{onClick:()=>y&&e(g.name),disabled:!y,className:`px-4 py-2 text-sm flex items-center gap-2 ${y?E?"tab-active text-white":"tab-inactive text-gray-400":"opacity-30 cursor-not-allowed text-gray-500"}`,title:y?void 0:`${g.label} is disabled in config`,children:[w.jsx("span",{children:g.icon}),w.jsx("span",{children:g.label})]},g.name)})}),w.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-ps-surface",children:s?w.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 border-2 border-ps-primary border-t-transparent rounded-full animate-spin"}),w.jsx("span",{children:"Compiling..."})]})}):t&&!t.success?w.jsxs("div",{className:"p-4 overflow-auto",children:[w.jsx("div",{className:"text-red-400 font-medium mb-2",children:"Compilation Failed"}),w.jsx("ul",{className:"space-y-2",children:t.errors.map((g,y)=>w.jsx("li",{className:"text-sm",children:w.jsxs("div",{className:"text-red-300",children:[g.location?.file&&w.jsxs("span",{className:"text-gray-400",children:[g.location.file,":",g.location.line,":",g.location.column," "]}),w.jsxs("span",{className:"text-yellow-400",children:["[",g.code,"]"]})," ",g.message]})},y))})]}):l.length>0?w.jsxs(w.Fragment,{children:[l.length>1&&w.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg overflow-x-auto",children:l.map((g,y)=>w.jsx("button",{onClick:()=>f(y),className:`px-3 py-1.5 text-xs font-mono whitespace-nowrap ${y===c?"bg-ps-surface text-white border-b-2 border-ps-primary":"text-gray-400 hover:text-gray-300 hover:bg-ps-surface/50"}`,title:g.path,children:h.get(g.path)||g.path},g.path))}),m&&w.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.path}),w.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.content)},className:"text-xs text-gray-400 hover:text-white px-2 py-1 rounded bg-ps-bg",children:"Copy"})]}),w.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap text-gray-300 bg-ps-bg p-4 rounded overflow-auto",children:m.content})]})]}):w.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No output available"})})]})}const Yu=[{id:"hello-world",name:"Hello World",description:"The simplest possible configuration",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "hello-world"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  """
}
`}]},{id:"minimal",name:"Minimal Setup",description:"Basic identity with multiline description",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "minimal-project"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  You provide clear and concise answers.
  You ask for clarification when needed.
  """
}
`}]},{id:"with-context",name:"With Context",description:"Adding project context and environment info",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "context-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a coding assistant for web development.
  You write modern, accessible code.
  """
}

@context {
  """
  This is a React frontend project using TypeScript.
  We use Tailwind CSS for styling.
  The project follows component-driven development.
  """
}
`}]},{id:"with-env-vars",name:"Environment Variables",description:"Using ${VAR} and ${VAR:-default} for dynamic configuration",complexity:"intermediate",envVars:{PROJECT_NAME:"My Awesome Project",API_VERSION:"v2",TEAM_NAME:"Platform Team"},files:[{path:"project.prs",content:`@meta {
  id: "env-vars-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an assistant for \${PROJECT_NAME}.
  You help the \${TEAM_NAME} build great software.
  """
}

@context {
  """
  Project: \${PROJECT_NAME}
  API Version: \${API_VERSION}
  Team: \${TEAM_NAME}
  Environment: \${ENVIRONMENT:-development}
  Debug Mode: \${DEBUG:-false}
  """

  # Object properties also support env vars
  project: "\${PROJECT_NAME}"
  apiVersion: "\${API_VERSION}"
  logLevel: "\${LOG_LEVEL:-info}"
}

@standards {
  # Env vars work in nested structures too
  api: {
    version: "\${API_VERSION}"
    baseUrl: "\${API_BASE_URL:-https://api.example.com}"
  }
}

@restrictions {
  - "Follow \${TEAM_NAME} coding guidelines"
  - "Use \${API_VERSION} API endpoints"
  - "Log level must be \${LOG_LEVEL:-info} or higher"
}
`}]},{id:"with-standards",name:"With Standards",description:"Configuration with coding standards and restrictions",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "coding-assistant"
  syntax: "1.0.0"
  tags: [development, typescript]
}

@identity {
  """
  You are an expert software developer.
  You write clean, maintainable, and well-tested code.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  testing: "Vitest"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
  documentation: ["JSDoc comments", "README updates"]
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor"]
  }
}

@restrictions {
  - "Never write untested code"
  - "Always handle errors properly"
  - "Don't use 'any' type in TypeScript"
  - "Don't commit secrets or credentials"
}
`}]},{id:"with-inheritance",name:"With Inheritance",description:"Using @inherit to extend shared base configs",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "frontend-project"
  syntax: "1.0.0"
}

# Inherit from promptscript-registry (github.com/mrwogu/promptscript-registry)
@inherit @core/base
@use @core/quality
@use @core/security

@context {
  """
  This is a React frontend project.
  We use TypeScript and Tailwind CSS.
  State management with Zustand.
  """
}

@standards {
  frameworks: ["React 18", "TypeScript 5", "Tailwind CSS"]
  testing: ["Vitest", "Playwright"]
}

@restrictions {
  - "Use functional components with hooks"
  - "No class components"
  - "Keep components under 200 lines"
}
`}]},{id:"parameterized-templates",name:"Parameterized Templates",description:"Reusable templates with {{variable}} interpolation",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "my-react-app"
  syntax: "1.0.0"
}

# Inherit from template with parameters
@inherit ./react-template(projectName: "Checkout App", port: 8080, strict: true)

@identity {
  """
  You specialize in e-commerce checkout flows.
  You understand payment integrations and cart management.
  """
}

@context {
  """
  E-commerce checkout application with Stripe integration.
  """
}
`},{path:"react-template.prs",content:`@meta {
  id: "react-template"
  syntax: "1.0.0"
  params: {
    # Required: Name of the project
    projectName: string

    # Optional: Development server port (default: 3000)
    port: number = 3000

    # Optional: Enable strict mode (default: true)
    strict: boolean = true

    # Optional: Test framework choice
    testFramework: enum("vitest", "jest") = "vitest"
  }
}

@identity {
  """
  You are a React developer working on {{projectName}}.
  You follow best practices and write clean code.
  """
}

@context {
  project: {{projectName}}
  devServer: "http://localhost:{{port}}"
  strictMode: {{strict}}
  testing: {{testFramework}}
}

@standards {
  code: {
    language: "TypeScript"
    framework: "React 18"
    testing: "{{testFramework}}"
  }
}

@restrictions {
  - "Use functional components only"
  - "Test coverage must be above 80%"
}
`}]},{id:"multi-file",name:"Multi-File Project",description:"Local inheritance with shared base configuration",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "team-project"
  syntax: "1.0.0"
}

# Inherit from local base file
@inherit ./base

@context {
  languages: ["TypeScript", "React"]
  runtime: "Node.js 20+"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
}

@restrictions {
  - "Use Zustand for state management"
  - "Keep bundle size under 200KB"
}
`},{path:"base.prs",content:`@meta {
  id: "team-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful team assistant.
  You follow our established conventions.
  You prioritize code quality and maintainability.
  """
}

@standards {
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test"]
  }
  documentation: ["README", "JSDoc", "CHANGELOG"]
}

@restrictions {
  - "Don't commit without tests"
  - "Don't push directly to main"
  - "Always request code review"
}
`}]},{id:"with-skills",name:"With Skills & Shortcuts",description:"Custom skills and shortcuts for automation",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation"
}

@restrictions {
  - "Always explain your reasoning"
  - "Ask for clarification when unsure"
  - "Never skip writing tests"
}
`}]},{id:"with-guards",name:"With Guards",description:"File-pattern guards for context-specific rules",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "guards-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an expert full-stack developer.
  You understand different contexts require different rules.
  """
}

@context {
  languages: ["TypeScript"]
  runtime: "Node.js 20+"
}

@guards {
  # Apply TypeScript rules to all TS files
  globs: ["**/*.ts", "**/*.tsx"]

  # Testing-specific rules
  testing: {
    applyTo: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
    description: "Testing rules"
    content: """
    - Use describe/it blocks for organization
    - Follow AAA pattern (Arrange, Act, Assert)
    - Mock external dependencies
    - Test edge cases and error conditions
    """
  }

  # Component-specific rules
  components: {
    applyTo: ["**/components/**/*.tsx"]
    description: "React component rules"
    content: """
    - Use functional components with hooks
    - Keep components focused and small
    - Extract logic into custom hooks
    - Use TypeScript for props interfaces
    """
  }
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest"]
  }
}
`}]},{id:"with-agents",name:"With Agents",description:"Custom AI agents with specific roles",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "agents-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development team coordinator.
  You can delegate tasks to specialized agents.
  """
}

@agents {
  coder: {
    description: "Expert code writer"
    model: "sonnet"
    tools: ["Read", "Edit", "Write", "Bash"]
    content: """
    You are an expert code writer.
    You write clean, efficient, and well-documented code.
    You follow established patterns in the codebase.
    """
  }
  reviewer: {
    description: "Code review specialist"
    model: "sonnet"
    tools: ["Read", "Grep", "Glob"]
    content: """
    You are a code review specialist.
    You identify bugs, security issues, and improvements.
    You provide constructive feedback.
    """
  }
  tester: {
    description: "Test writing specialist"
    model: "haiku"
    tools: ["Read", "Write", "Bash"]
    content: """
    You are a test writing specialist.
    You write comprehensive unit and integration tests.
    You ensure good coverage of edge cases.
    """
  }
}

@skills {
  implement: {
    description: "Implement a feature using the coder agent"
    content: "Delegate implementation to the coder agent"
  }
  review: {
    description: "Review code using the reviewer agent"
    content: "Delegate review to the reviewer agent"
  }
}

@shortcuts {
  "/implement": "Start implementing a feature"
  "/review": "Review recent changes"
  "/test": "Write tests for current code"
}
`}]},{id:"enterprise",name:"Enterprise Setup",description:"Full enterprise configuration with all features",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "enterprise-project"
  syntax: "1.0.0"
  tags: [enterprise, typescript, react]
}

# Inherit from local file + registry (github.com/mrwogu/promptscript-registry)
@inherit ./org-base
@use @core/security

@context {
  """
  Enterprise React application with strict security requirements.
  Follows organizational coding standards and compliance rules.
  """

  languages: ["TypeScript"]
  runtime: "Node.js 20 LTS"
  frameworks: ["React 18", "Next.js 14"]
  infrastructure: ["AWS", "Docker", "Kubernetes"]
}

@skills {
  "security-review": {
    description: "Review code for security vulnerabilities"
    content: """
    Perform security review:
    1. Check for OWASP Top 10 vulnerabilities
    2. Verify input validation and sanitization
    3. Check authentication and authorization
    4. Review data exposure and logging
    5. Verify secure communication
    """
  }
  deploy: {
    description: "Prepare deployment checklist"
    content: """
    Deployment preparation:
    1. Run full test suite
    2. Check for security vulnerabilities
    3. Verify environment variables
    4. Update changelog
    5. Create release notes
    """
  }
}

@guards {
  api: {
    applyTo: ["**/api/**", "**/routes/**"]
    description: "API security rules"
    content: """
    - Validate all input parameters
    - Use parameterized queries
    - Implement rate limiting
    - Log security events
    """
  }
  auth: {
    applyTo: ["**/auth/**", "**/middleware/**"]
    description: "Authentication rules"
    content: """
    - Never log credentials
    - Use secure session management
    - Implement proper CORS
    - Use HTTPS only
    """
  }
}

@shortcuts {
  "/security": "Run security review"
  "/deploy": "Prepare deployment"
  "/audit": "Run compliance audit"
}

@restrictions {
  - "All API endpoints must have authentication"
  - "No secrets in code - use environment variables"
  - "All user input must be validated"
  - "PII must be encrypted at rest"
  - "Changes require security team approval"
}
`},{path:"org-base.prs",content:`@meta {
  id: "org-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are an enterprise development assistant.
  You follow strict organizational standards.
  Security and compliance are top priorities.
  """
}

@standards {
  code: {
    languages: ["TypeScript"]
    strictMode: true
    exports: "named only"
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test", "security"]
    requireIssueReference: true
  }
  documentation: {
    required: ["README", "API docs", "CHANGELOG", "SECURITY.md"]
  }
  testing: {
    minimumCoverage: 80
    requiredTypes: ["unit", "integration", "e2e"]
  }
}

@restrictions {
  - "No direct database queries - use ORM"
  - "All functions must have return type annotations"
  - "No console.log in production code"
  - "Dependencies must be approved"
  - "No force push to protected branches"
}
`}]}],KS={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-purple-500/20 text-purple-400"},YS={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function XS(){const r=ie(h=>h.setFiles),e=ie(h=>h.setShowExamples),t=ie(h=>h.setEnvVars),s=h=>{r(h.files),t(h.envVars??{}),e(!1)},o=Yu.filter(h=>h.complexity==="beginner"),l=Yu.filter(h=>h.complexity==="intermediate"),c=Yu.filter(h=>h.complexity==="advanced"),f=h=>w.jsxs("button",{onClick:()=>s(h),className:"text-left p-4 bg-ps-bg rounded-lg hover:bg-ps-border transition-colors",children:[w.jsxs("div",{className:"flex items-start justify-between gap-2",children:[w.jsx("h3",{className:"font-medium text-white",children:h.name}),w.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${KS[h.complexity]}`,children:YS[h.complexity]})]}),w.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h.description}),w.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[w.jsxs("span",{className:"text-xs text-gray-500",children:[h.files.length," file",h.files.length!==1?"s":""]}),h.files.some(m=>m.content.includes("@inherit"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-ps-primary/20 text-ps-primary rounded",children:"inheritance"}),h.files.some(m=>m.content.includes("@use"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded",children:"imports"}),h.files.some(m=>m.content.includes("@skills"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-500/20 text-orange-400 rounded",children:"skills"}),h.files.some(m=>m.content.includes("@guards"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded",children:"guards"}),h.files.some(m=>m.content.includes("@agents"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded",children:"agents"}),h.files.some(m=>m.content.includes("params:")&&m.content.includes("{{"))&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded",children:"templates"}),h.envVars&&Object.keys(h.envVars).length>0&&w.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded",children:"env vars"})]})]},h.id);return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-ps-surface rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-ps-border",children:[w.jsx("h2",{className:"text-lg font-semibold",children:"Example Gallery"}),w.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white",children:""})]}),w.jsxs("div",{className:"p-4 overflow-y-auto max-h-[70vh] space-y-6",children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-medium text-green-400 mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Getting Started"]}),w.jsx("div",{className:"grid gap-3",children:o.map(f)})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Intermediate"]}),w.jsx("div",{className:"grid gap-3",children:l.map(f)})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Advanced"]}),w.jsx("div",{className:"grid gap-3",children:c.map(f)})]})]}),w.jsx("div",{className:"p-4 border-t border-ps-border text-center text-sm text-gray-500",children:"Click an example to load it into the editor"})]})})}const qS={github:{label:"GitHub Copilot",versions:["simple","multifile","full"],supportsXml:!0},claude:{label:"Claude Code",versions:["simple","multifile","full"],supportsXml:!0},cursor:{label:"Cursor",versions:["standard","legacy"],supportsXml:!1},antigravity:{label:"Antigravity",versions:["simple","frontmatter"],supportsXml:!0}},QS=[{value:"markdown",label:"Markdown"},{value:"xml",label:"XML"}],ZS=["always","never","preserve"],JS=[2,4];function eT(){const r=ie(f=>f.config),e=ie(f=>f.setTargetEnabled),t=ie(f=>f.setTargetVersion),s=ie(f=>f.setTargetConvention),o=ie(f=>f.setFormatting),l=ie(f=>f.showConfig),c=ie(f=>f.setShowConfig);return l?w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[w.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configuration"}),w.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{className:"p-4 space-y-6",children:[w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Targets"}),w.jsx("div",{className:"space-y-3",children:Object.entries(qS).map(([f,h])=>{const m=r.targets[f];return w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("label",{className:"flex items-center gap-2 min-w-[140px]",children:[w.jsx("input",{type:"checkbox",checked:m.enabled,onChange:g=>e(f,g.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"}),w.jsx("span",{className:"text-sm text-gray-200",children:h.label})]}),w.jsx("select",{value:m.version??h.versions[0],onChange:g=>t(f,g.target.value),disabled:!m.enabled,className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:h.versions.map(g=>w.jsx("option",{value:g,children:g},g))}),w.jsx("select",{value:m.convention??"markdown",onChange:g=>s(f,g.target.value==="markdown"?void 0:g.target.value),disabled:!m.enabled||!h.supportsXml,title:h.supportsXml?void 0:`${h.label} only supports markdown`,className:"w-24 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:QS.map(g=>w.jsx("option",{value:g.value,disabled:g.value==="xml"&&!h.supportsXml,children:g.label},g.value))})]},f)})})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Formatting"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Tab Width"}),w.jsx("div",{className:"flex gap-2",children:JS.map(f=>w.jsx("button",{onClick:()=>o({tabWidth:f}),className:`px-3 py-1 text-sm rounded ${r.formatting.tabWidth===f?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:f},f))})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Prose Wrap"}),w.jsx("select",{value:r.formatting.proseWrap,onChange:f=>o({proseWrap:f.target.value}),className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500",children:ZS.map(f=>w.jsx("option",{value:f,children:f},f))})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Print Width"}),w.jsx("input",{type:"number",min:40,max:200,value:r.formatting.printWidth,onChange:f=>o({printWidth:parseInt(f.target.value,10)||80}),className:"w-20 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500"})]})]})]})]}),w.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:w.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})}):null}const tT=/^[A-Za-z_][A-Za-z0-9_]*$/;function nT(){const r=ie(C=>C.config),e=ie(C=>C.setEnvVar),t=ie(C=>C.deleteEnvVar),s=ie(C=>C.showEnvVars),o=ie(C=>C.setShowEnvVars),[l,c]=Z.useState(""),[f,h]=Z.useState(""),[m,g]=Z.useState(null);if(!s)return null;const y=Object.entries(r.envVars),E=()=>{const C=l.trim(),N=f.trim();if(!C){g("Variable name is required");return}if(!tT.test(C)){g("Invalid name: must start with letter or underscore");return}if(r.envVars[C]!==void 0){g("Variable already exists");return}e(C,N),c(""),h(""),g(null)},k=C=>{C.key==="Enter"&&E()};return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[w.jsx("h2",{className:"text-lg font-semibold text-white",children:"Environment Variables"}),w.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{className:"p-4 space-y-4",children:[y.length>0&&w.jsx("div",{className:"space-y-2",children:y.map(([C,N])=>w.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded px-3 py-2",children:[w.jsx("span",{className:"font-mono text-sm text-blue-400 min-w-[120px]",children:C}),w.jsx("span",{className:"text-gray-400",children:"="}),w.jsx("span",{className:"font-mono text-sm text-gray-200 flex-1 truncate",children:N}),w.jsx("button",{onClick:()=>t(C),className:"text-gray-500 hover:text-red-400 p-1",title:"Delete variable",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},C))}),y.length===0&&w.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No environment variables defined"}),w.jsxs("div",{className:"border-t border-ps-border pt-4",children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"text",value:l,onChange:C=>{c(C.target.value),g(null)},onKeyDown:k,placeholder:"NAME",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),w.jsx("input",{type:"text",value:f,onChange:C=>h(C.target.value),onKeyDown:k,placeholder:"value",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),w.jsx("button",{onClick:E,className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Add"})]}),m&&w.jsx("p",{className:"text-red-400 text-xs mt-2",children:m})]}),w.jsxs("p",{className:"text-gray-500 text-xs",children:["These are simulated variables for testing. Use"," ",w.jsxs("code",{className:"text-gray-400",children:["$","{VAR}"]})," or"," ",w.jsxs("code",{className:"text-gray-400",children:["$","{VAR:-default}"]})," in your PRS files.",w.jsx("br",{}),w.jsx("strong",{children:"Note:"})," Do not use real secrets."]})]}),w.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:w.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})})}class Lc{files;constructor(e){if(this.files=new Map,e)if(e instanceof Map)for(const[t,s]of e)this.files.set(this.normalizePath(t),s);else for(const[t,s]of Object.entries(e))this.files.set(this.normalizePath(t),s)}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1)),t}exists(e){return this.files.has(this.normalizePath(e))}read(e){const t=this.normalizePath(e),s=this.files.get(t);if(s===void 0)throw new Error(`File not found: ${e}`);return s}write(e,t){this.files.set(this.normalizePath(e),t)}delete(e){return this.files.delete(this.normalizePath(e))}list(){return Array.from(this.files.keys())}glob(e){const t=this.normalizePath(e),s=this.patternToRegex(t);return Array.from(this.files.keys()).filter(o=>s.test(o))}patternToRegex(e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");return t=t.replace(/\*\*/g,"\0DOUBLESTAR\0"),t=t.replace(/\*/g,"[^/]*"),t=t.replace(/\0DOUBLESTAR\0/g,".*"),t=t.replace(/\?/g,"[^/]"),new RegExp(`^${t}$`)}clear(){this.files.clear()}get size(){return this.files.size}toMap(){return new Map(this.files)}toObject(){const e={};for(const[t,s]of this.files)e[t]=s;return e}clone(){return new Lc(this.files)}merge(e){for(const[t,s]of e.files)this.files.set(t,s)}}var ag=typeof global=="object"&&global&&global.Object===Object&&global,rT=typeof self=="object"&&self&&self.Object===Object&&self,Sn=ag||rT||Function("return this")(),Kt=Sn.Symbol,lg=Object.prototype,iT=lg.hasOwnProperty,sT=lg.toString,cs=Kt?Kt.toStringTag:void 0;function oT(r){var e=iT.call(r,cs),t=r[cs];try{r[cs]=void 0;var s=!0}catch{}var o=sT.call(r);return s&&(e?r[cs]=t:delete r[cs]),o}var aT=Object.prototype,lT=aT.toString;function uT(r){return lT.call(r)}var cT="[object Null]",fT="[object Undefined]",Sp=Kt?Kt.toStringTag:void 0;function fr(r){return r==null?r===void 0?fT:cT:Sp&&Sp in Object(r)?oT(r):uT(r)}function ln(r){return r!=null&&typeof r=="object"}var dT="[object Symbol]";function Ia(r){return typeof r=="symbol"||ln(r)&&fr(r)==dT}function Oa(r,e){for(var t=-1,s=r==null?0:r.length,o=Array(s);++t<s;)o[t]=e(r[t],t,r);return o}var Te=Array.isArray,Tp=Kt?Kt.prototype:void 0,kp=Tp?Tp.toString:void 0;function ug(r){if(typeof r=="string")return r;if(Te(r))return Oa(r,ug)+"";if(Ia(r))return kp?kp.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var hT=/\s/;function pT(r){for(var e=r.length;e--&&hT.test(r.charAt(e)););return e}var mT=/^\s+/;function gT(r){return r&&r.slice(0,pT(r)+1).replace(mT,"")}function Yt(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var xp=NaN,yT=/^[-+]0x[0-9a-f]+$/i,vT=/^0b[01]+$/i,ET=/^0o[0-7]+$/i,ST=parseInt;function TT(r){if(typeof r=="number")return r;if(Ia(r))return xp;if(Yt(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Yt(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=gT(r);var t=vT.test(r);return t||ET.test(r)?ST(r.slice(2),t?2:8):yT.test(r)?xp:+r}var Ap=1/0,kT=17976931348623157e292;function xT(r){if(!r)return r===0?r:0;if(r=TT(r),r===Ap||r===-Ap){var e=r<0?-1:1;return e*kT}return r===r?r:0}function _a(r){var e=xT(r),t=e%1;return e===e?t?e-t:e:0}function yi(r){return r}var AT="[object AsyncFunction]",wT="[object Function]",CT="[object GeneratorFunction]",RT="[object Proxy]";function Fn(r){if(!Yt(r))return!1;var e=fr(r);return e==wT||e==CT||e==AT||e==RT}var Xu=Sn["__core-js_shared__"],wp=(function(){var r=/[^.]+$/.exec(Xu&&Xu.keys&&Xu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function NT(r){return!!wp&&wp in r}var IT=Function.prototype,OT=IT.toString;function br(r){if(r!=null){try{return OT.call(r)}catch{}try{return r+""}catch{}}return""}var _T=/[\\^$.*+?()[\]{}|]/g,PT=/^\[object .+?Constructor\]$/,LT=Function.prototype,bT=Object.prototype,MT=LT.toString,jT=bT.hasOwnProperty,FT=RegExp("^"+MT.call(jT).replace(_T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $T(r){if(!Yt(r)||NT(r))return!1;var e=Fn(r)?FT:PT;return e.test(br(r))}function UT(r,e){return r?.[e]}function Mr(r,e){var t=UT(r,e);return $T(t)?t:void 0}var ac=Mr(Sn,"WeakMap"),Cp=Object.create,DT=(function(){function r(){}return function(e){if(!Yt(e))return{};if(Cp)return Cp(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function BT(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Xe(){}function zT(r,e){var t=-1,s=r.length;for(e||(e=Array(s));++t<s;)e[t]=r[t];return e}var VT=800,WT=16,GT=Date.now;function HT(r){var e=0,t=0;return function(){var s=GT(),o=WT-(s-t);if(t=s,o>0){if(++e>=VT)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function KT(r){return function(){return r}}var ma=(function(){try{var r=Mr(Object,"defineProperty");return r({},"",{}),r}catch{}})(),YT=ma?function(r,e){return ma(r,"toString",{configurable:!0,enumerable:!1,value:KT(e),writable:!0})}:yi,XT=HT(YT);function cg(r,e){for(var t=-1,s=r==null?0:r.length;++t<s&&e(r[t],t,r)!==!1;);return r}function fg(r,e,t,s){for(var o=r.length,l=t+-1;++l<o;)if(e(r[l],l,r))return l;return-1}function qT(r){return r!==r}function QT(r,e,t){for(var s=t-1,o=r.length;++s<o;)if(r[s]===e)return s;return-1}function bc(r,e,t){return e===e?QT(r,e,t):fg(r,qT,t)}function dg(r,e){var t=r==null?0:r.length;return!!t&&bc(r,e,0)>-1}var ZT=9007199254740991,JT=/^(?:0|[1-9]\d*)$/;function Pa(r,e){var t=typeof r;return e=e??ZT,!!e&&(t=="number"||t!="symbol"&&JT.test(r))&&r>-1&&r%1==0&&r<e}function Mc(r,e,t){e=="__proto__"&&ma?ma(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function Is(r,e){return r===e||r!==r&&e!==e}var ek=Object.prototype,tk=ek.hasOwnProperty;function La(r,e,t){var s=r[e];(!(tk.call(r,e)&&Is(s,t))||t===void 0&&!(e in r))&&Mc(r,e,t)}function jc(r,e,t,s){var o=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var f=e[l],h=void 0;h===void 0&&(h=r[f]),o?Mc(t,f,h):La(t,f,h)}return t}var Rp=Math.max;function nk(r,e,t){return e=Rp(e===void 0?r.length-1:e,0),function(){for(var s=arguments,o=-1,l=Rp(s.length-e,0),c=Array(l);++o<l;)c[o]=s[e+o];o=-1;for(var f=Array(e+1);++o<e;)f[o]=s[o];return f[e]=t(c),BT(r,this,f)}}function Fc(r,e){return XT(nk(r,e,yi),r+"")}var rk=9007199254740991;function $c(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=rk}function Tn(r){return r!=null&&$c(r.length)&&!Fn(r)}function hg(r,e,t){if(!Yt(t))return!1;var s=typeof e;return(s=="number"?Tn(t)&&Pa(e,t.length):s=="string"&&e in t)?Is(t[e],r):!1}function ik(r){return Fc(function(e,t){var s=-1,o=t.length,l=o>1?t[o-1]:void 0,c=o>2?t[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,c&&hg(t[0],t[1],c)&&(l=o<3?void 0:l,o=1),e=Object(e);++s<o;){var f=t[s];f&&r(e,f,s,l)}return e})}var sk=Object.prototype;function Os(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||sk;return r===t}function ok(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}var ak="[object Arguments]";function Np(r){return ln(r)&&fr(r)==ak}var pg=Object.prototype,lk=pg.hasOwnProperty,uk=pg.propertyIsEnumerable,ba=Np((function(){return arguments})())?Np:function(r){return ln(r)&&lk.call(r,"callee")&&!uk.call(r,"callee")};function ck(){return!1}var mg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Ip=mg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,fk=Ip&&Ip.exports===mg,Op=fk?Sn.Buffer:void 0,dk=Op?Op.isBuffer:void 0,As=dk||ck,hk="[object Arguments]",pk="[object Array]",mk="[object Boolean]",gk="[object Date]",yk="[object Error]",vk="[object Function]",Ek="[object Map]",Sk="[object Number]",Tk="[object Object]",kk="[object RegExp]",xk="[object Set]",Ak="[object String]",wk="[object WeakMap]",Ck="[object ArrayBuffer]",Rk="[object DataView]",Nk="[object Float32Array]",Ik="[object Float64Array]",Ok="[object Int8Array]",_k="[object Int16Array]",Pk="[object Int32Array]",Lk="[object Uint8Array]",bk="[object Uint8ClampedArray]",Mk="[object Uint16Array]",jk="[object Uint32Array]",_e={};_e[Nk]=_e[Ik]=_e[Ok]=_e[_k]=_e[Pk]=_e[Lk]=_e[bk]=_e[Mk]=_e[jk]=!0;_e[hk]=_e[pk]=_e[Ck]=_e[mk]=_e[Rk]=_e[gk]=_e[yk]=_e[vk]=_e[Ek]=_e[Sk]=_e[Tk]=_e[kk]=_e[xk]=_e[Ak]=_e[wk]=!1;function Fk(r){return ln(r)&&$c(r.length)&&!!_e[fr(r)]}function Ma(r){return function(e){return r(e)}}var gg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Ss=gg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,$k=Ss&&Ss.exports===gg,qu=$k&&ag.process,ur=(function(){try{var r=Ss&&Ss.require&&Ss.require("util").types;return r||qu&&qu.binding&&qu.binding("util")}catch{}})(),_p=ur&&ur.isTypedArray,Uc=_p?Ma(_p):Fk,Uk=Object.prototype,Dk=Uk.hasOwnProperty;function yg(r,e){var t=Te(r),s=!t&&ba(r),o=!t&&!s&&As(r),l=!t&&!s&&!o&&Uc(r),c=t||s||o||l,f=c?ok(r.length,String):[],h=f.length;for(var m in r)(e||Dk.call(r,m))&&!(c&&(m=="length"||o&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Pa(m,h)))&&f.push(m);return f}function vg(r,e){return function(t){return r(e(t))}}var Bk=vg(Object.keys,Object),zk=Object.prototype,Vk=zk.hasOwnProperty;function Eg(r){if(!Os(r))return Bk(r);var e=[];for(var t in Object(r))Vk.call(r,t)&&t!="constructor"&&e.push(t);return e}function Xt(r){return Tn(r)?yg(r):Eg(r)}var Wk=Object.prototype,Gk=Wk.hasOwnProperty,Lt=ik(function(r,e){if(Os(e)||Tn(e)){jc(e,Xt(e),r);return}for(var t in e)Gk.call(e,t)&&La(r,t,e[t])});function Hk(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Kk=Object.prototype,Yk=Kk.hasOwnProperty;function Xk(r){if(!Yt(r))return Hk(r);var e=Os(r),t=[];for(var s in r)s=="constructor"&&(e||!Yk.call(r,s))||t.push(s);return t}function Sg(r){return Tn(r)?yg(r,!0):Xk(r)}var qk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qk=/^\w*$/;function Dc(r,e){if(Te(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Ia(r)?!0:Qk.test(r)||!qk.test(r)||e!=null&&r in Object(e)}var ws=Mr(Object,"create");function Zk(){this.__data__=ws?ws(null):{},this.size=0}function Jk(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var ex="__lodash_hash_undefined__",tx=Object.prototype,nx=tx.hasOwnProperty;function rx(r){var e=this.__data__;if(ws){var t=e[r];return t===ex?void 0:t}return nx.call(e,r)?e[r]:void 0}var ix=Object.prototype,sx=ix.hasOwnProperty;function ox(r){var e=this.__data__;return ws?e[r]!==void 0:sx.call(e,r)}var ax="__lodash_hash_undefined__";function lx(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=ws&&e===void 0?ax:e,this}function Or(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Or.prototype.clear=Zk;Or.prototype.delete=Jk;Or.prototype.get=rx;Or.prototype.has=ox;Or.prototype.set=lx;function ux(){this.__data__=[],this.size=0}function ja(r,e){for(var t=r.length;t--;)if(Is(r[t][0],e))return t;return-1}var cx=Array.prototype,fx=cx.splice;function dx(r){var e=this.__data__,t=ja(e,r);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():fx.call(e,t,1),--this.size,!0}function hx(r){var e=this.__data__,t=ja(e,r);return t<0?void 0:e[t][1]}function px(r){return ja(this.__data__,r)>-1}function mx(r,e){var t=this.__data__,s=ja(t,r);return s<0?(++this.size,t.push([r,e])):t[s][1]=e,this}function $n(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}$n.prototype.clear=ux;$n.prototype.delete=dx;$n.prototype.get=hx;$n.prototype.has=px;$n.prototype.set=mx;var Cs=Mr(Sn,"Map");function gx(){this.size=0,this.__data__={hash:new Or,map:new(Cs||$n),string:new Or}}function yx(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Fa(r,e){var t=r.__data__;return yx(e)?t[typeof e=="string"?"string":"hash"]:t.map}function vx(r){var e=Fa(this,r).delete(r);return this.size-=e?1:0,e}function Ex(r){return Fa(this,r).get(r)}function Sx(r){return Fa(this,r).has(r)}function Tx(r,e){var t=Fa(this,r),s=t.size;return t.set(r,e),this.size+=t.size==s?0:1,this}function Un(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Un.prototype.clear=gx;Un.prototype.delete=vx;Un.prototype.get=Ex;Un.prototype.has=Sx;Un.prototype.set=Tx;var kx="Expected a function";function Bc(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(kx);var t=function(){var s=arguments,o=e?e.apply(this,s):s[0],l=t.cache;if(l.has(o))return l.get(o);var c=r.apply(this,s);return t.cache=l.set(o,c)||l,c};return t.cache=new(Bc.Cache||Un),t}Bc.Cache=Un;var xx=500;function Ax(r){var e=Bc(r,function(s){return t.size===xx&&t.clear(),s}),t=e.cache;return e}var wx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cx=/\\(\\)?/g,Rx=Ax(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(wx,function(t,s,o,l){e.push(o?l.replace(Cx,"$1"):s||t)}),e});function Nx(r){return r==null?"":ug(r)}function $a(r,e){return Te(r)?r:Dc(r,e)?[r]:Rx(Nx(r))}function _s(r){if(typeof r=="string"||Ia(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function zc(r,e){e=$a(e,r);for(var t=0,s=e.length;r!=null&&t<s;)r=r[_s(e[t++])];return t&&t==s?r:void 0}function Ix(r,e,t){var s=r==null?void 0:zc(r,e);return s===void 0?t:s}function Vc(r,e){for(var t=-1,s=e.length,o=r.length;++t<s;)r[o+t]=e[t];return r}var Pp=Kt?Kt.isConcatSpreadable:void 0;function Ox(r){return Te(r)||ba(r)||!!(Pp&&r&&r[Pp])}function Wc(r,e,t,s,o){var l=-1,c=r.length;for(t||(t=Ox),o||(o=[]);++l<c;){var f=r[l];t(f)?Vc(o,f):s||(o[o.length]=f)}return o}function on(r){var e=r==null?0:r.length;return e?Wc(r):[]}var Tg=vg(Object.getPrototypeOf,Object);function kg(r,e,t){var s=-1,o=r.length;e<0&&(e=-e>o?0:o+e),t=t>o?o:t,t<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var l=Array(o);++s<o;)l[s]=r[s+e];return l}function _x(r,e,t,s){var o=-1,l=r==null?0:r.length;for(s&&l&&(t=r[++o]);++o<l;)t=e(t,r[o],o,r);return t}function Px(){this.__data__=new $n,this.size=0}function Lx(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function bx(r){return this.__data__.get(r)}function Mx(r){return this.__data__.has(r)}var jx=200;function Fx(r,e){var t=this.__data__;if(t instanceof $n){var s=t.__data__;if(!Cs||s.length<jx-1)return s.push([r,e]),this.size=++t.size,this;t=this.__data__=new Un(s)}return t.set(r,e),this.size=t.size,this}function En(r){var e=this.__data__=new $n(r);this.size=e.size}En.prototype.clear=Px;En.prototype.delete=Lx;En.prototype.get=bx;En.prototype.has=Mx;En.prototype.set=Fx;function $x(r,e){return r&&jc(e,Xt(e),r)}var xg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Lp=xg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Ux=Lp&&Lp.exports===xg,bp=Ux?Sn.Buffer:void 0,Mp=bp?bp.allocUnsafe:void 0;function Dx(r,e){var t=r.length,s=Mp?Mp(t):new r.constructor(t);return r.copy(s),s}function Gc(r,e){for(var t=-1,s=r==null?0:r.length,o=0,l=[];++t<s;){var c=r[t];e(c,t,r)&&(l[o++]=c)}return l}function Ag(){return[]}var Bx=Object.prototype,zx=Bx.propertyIsEnumerable,jp=Object.getOwnPropertySymbols,Hc=jp?function(r){return r==null?[]:(r=Object(r),Gc(jp(r),function(e){return zx.call(r,e)}))}:Ag;function Vx(r,e){return jc(r,Hc(r),e)}var Wx=Object.getOwnPropertySymbols,Gx=Wx?function(r){for(var e=[];r;)Vc(e,Hc(r)),r=Tg(r);return e}:Ag;function wg(r,e,t){var s=e(r);return Te(r)?s:Vc(s,t(r))}function lc(r){return wg(r,Xt,Hc)}function Hx(r){return wg(r,Sg,Gx)}var uc=Mr(Sn,"DataView"),cc=Mr(Sn,"Promise"),gi=Mr(Sn,"Set"),Fp="[object Map]",Kx="[object Object]",$p="[object Promise]",Up="[object Set]",Dp="[object WeakMap]",Bp="[object DataView]",Yx=br(uc),Xx=br(Cs),qx=br(cc),Qx=br(gi),Zx=br(ac),Gt=fr;(uc&&Gt(new uc(new ArrayBuffer(1)))!=Bp||Cs&&Gt(new Cs)!=Fp||cc&&Gt(cc.resolve())!=$p||gi&&Gt(new gi)!=Up||ac&&Gt(new ac)!=Dp)&&(Gt=function(r){var e=fr(r),t=e==Kx?r.constructor:void 0,s=t?br(t):"";if(s)switch(s){case Yx:return Bp;case Xx:return Fp;case qx:return $p;case Qx:return Up;case Zx:return Dp}return e});var Jx=Object.prototype,eA=Jx.hasOwnProperty;function tA(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&eA.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var ga=Sn.Uint8Array;function nA(r){var e=new r.constructor(r.byteLength);return new ga(e).set(new ga(r)),e}function rA(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var iA=/\w*$/;function sA(r){var e=new r.constructor(r.source,iA.exec(r));return e.lastIndex=r.lastIndex,e}var zp=Kt?Kt.prototype:void 0,Vp=zp?zp.valueOf:void 0;function oA(r){return Vp?Object(Vp.call(r)):{}}function aA(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var lA="[object Boolean]",uA="[object Date]",cA="[object Map]",fA="[object Number]",dA="[object RegExp]",hA="[object Set]",pA="[object String]",mA="[object Symbol]",gA="[object ArrayBuffer]",yA="[object DataView]",vA="[object Float32Array]",EA="[object Float64Array]",SA="[object Int8Array]",TA="[object Int16Array]",kA="[object Int32Array]",xA="[object Uint8Array]",AA="[object Uint8ClampedArray]",wA="[object Uint16Array]",CA="[object Uint32Array]";function RA(r,e,t){var s=r.constructor;switch(e){case gA:return nA(r);case lA:case uA:return new s(+r);case yA:return rA(r);case vA:case EA:case SA:case TA:case kA:case xA:case AA:case wA:case CA:return aA(r);case cA:return new s;case fA:case pA:return new s(r);case dA:return sA(r);case hA:return new s;case mA:return oA(r)}}function NA(r){return typeof r.constructor=="function"&&!Os(r)?DT(Tg(r)):{}}var IA="[object Map]";function OA(r){return ln(r)&&Gt(r)==IA}var Wp=ur&&ur.isMap,_A=Wp?Ma(Wp):OA,PA="[object Set]";function LA(r){return ln(r)&&Gt(r)==PA}var Gp=ur&&ur.isSet,bA=Gp?Ma(Gp):LA,Cg="[object Arguments]",MA="[object Array]",jA="[object Boolean]",FA="[object Date]",$A="[object Error]",Rg="[object Function]",UA="[object GeneratorFunction]",DA="[object Map]",BA="[object Number]",Ng="[object Object]",zA="[object RegExp]",VA="[object Set]",WA="[object String]",GA="[object Symbol]",HA="[object WeakMap]",KA="[object ArrayBuffer]",YA="[object DataView]",XA="[object Float32Array]",qA="[object Float64Array]",QA="[object Int8Array]",ZA="[object Int16Array]",JA="[object Int32Array]",ew="[object Uint8Array]",tw="[object Uint8ClampedArray]",nw="[object Uint16Array]",rw="[object Uint32Array]",Re={};Re[Cg]=Re[MA]=Re[KA]=Re[YA]=Re[jA]=Re[FA]=Re[XA]=Re[qA]=Re[QA]=Re[ZA]=Re[JA]=Re[DA]=Re[BA]=Re[Ng]=Re[zA]=Re[VA]=Re[WA]=Re[GA]=Re[ew]=Re[tw]=Re[nw]=Re[rw]=!0;Re[$A]=Re[Rg]=Re[HA]=!1;function ra(r,e,t,s,o,l){var c;if(c!==void 0)return c;if(!Yt(r))return r;var f=Te(r);if(f)return c=tA(r),zT(r,c);var h=Gt(r),m=h==Rg||h==UA;if(As(r))return Dx(r);if(h==Ng||h==Cg||m&&!o)return c=m?{}:NA(r),Vx(r,$x(c,r));if(!Re[h])return o?r:{};c=RA(r,h),l||(l=new En);var g=l.get(r);if(g)return g;l.set(r,c),bA(r)?r.forEach(function(k){c.add(ra(k,e,t,k,r,l))}):_A(r)&&r.forEach(function(k,C){c.set(C,ra(k,e,t,C,r,l))});var y=lc,E=f?void 0:y(r);return cg(E||r,function(k,C){E&&(C=k,k=r[C]),La(c,C,ra(k,e,t,C,r,l))}),c}var iw=4;function st(r){return ra(r,iw)}function Ps(r){for(var e=-1,t=r==null?0:r.length,s=0,o=[];++e<t;){var l=r[e];l&&(o[s++]=l)}return o}var sw="__lodash_hash_undefined__";function ow(r){return this.__data__.set(r,sw),this}function aw(r){return this.__data__.has(r)}function vi(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Un;++e<t;)this.add(r[e])}vi.prototype.add=vi.prototype.push=ow;vi.prototype.has=aw;function Ig(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(e(r[t],t,r))return!0;return!1}function Kc(r,e){return r.has(e)}var lw=1,uw=2;function Og(r,e,t,s,o,l){var c=t&lw,f=r.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var m=l.get(r),g=l.get(e);if(m&&g)return m==e&&g==r;var y=-1,E=!0,k=t&uw?new vi:void 0;for(l.set(r,e),l.set(e,r);++y<f;){var C=r[y],N=e[y];if(s)var F=c?s(N,C,y,e,r,l):s(C,N,y,r,e,l);if(F!==void 0){if(F)continue;E=!1;break}if(k){if(!Ig(e,function(M,_){if(!Kc(k,_)&&(C===M||o(C,M,t,s,l)))return k.push(_)})){E=!1;break}}else if(!(C===N||o(C,N,t,s,l))){E=!1;break}}return l.delete(r),l.delete(e),E}function cw(r){var e=-1,t=Array(r.size);return r.forEach(function(s,o){t[++e]=[o,s]}),t}function Yc(r){var e=-1,t=Array(r.size);return r.forEach(function(s){t[++e]=s}),t}var fw=1,dw=2,hw="[object Boolean]",pw="[object Date]",mw="[object Error]",gw="[object Map]",yw="[object Number]",vw="[object RegExp]",Ew="[object Set]",Sw="[object String]",Tw="[object Symbol]",kw="[object ArrayBuffer]",xw="[object DataView]",Hp=Kt?Kt.prototype:void 0,Qu=Hp?Hp.valueOf:void 0;function Aw(r,e,t,s,o,l,c){switch(t){case xw:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case kw:return!(r.byteLength!=e.byteLength||!l(new ga(r),new ga(e)));case hw:case pw:case yw:return Is(+r,+e);case mw:return r.name==e.name&&r.message==e.message;case vw:case Sw:return r==e+"";case gw:var f=cw;case Ew:var h=s&fw;if(f||(f=Yc),r.size!=e.size&&!h)return!1;var m=c.get(r);if(m)return m==e;s|=dw,c.set(r,e);var g=Og(f(r),f(e),s,o,l,c);return c.delete(r),g;case Tw:if(Qu)return Qu.call(r)==Qu.call(e)}return!1}var ww=1,Cw=Object.prototype,Rw=Cw.hasOwnProperty;function Nw(r,e,t,s,o,l){var c=t&ww,f=lc(r),h=f.length,m=lc(e),g=m.length;if(h!=g&&!c)return!1;for(var y=h;y--;){var E=f[y];if(!(c?E in e:Rw.call(e,E)))return!1}var k=l.get(r),C=l.get(e);if(k&&C)return k==e&&C==r;var N=!0;l.set(r,e),l.set(e,r);for(var F=c;++y<h;){E=f[y];var M=r[E],_=e[E];if(s)var P=c?s(_,M,E,e,r,l):s(M,_,E,r,e,l);if(!(P===void 0?M===_||o(M,_,t,s,l):P)){N=!1;break}F||(F=E=="constructor")}if(N&&!F){var b=r.constructor,V=e.constructor;b!=V&&"constructor"in r&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof V=="function"&&V instanceof V)&&(N=!1)}return l.delete(r),l.delete(e),N}var Iw=1,Kp="[object Arguments]",Yp="[object Array]",qo="[object Object]",Ow=Object.prototype,Xp=Ow.hasOwnProperty;function _w(r,e,t,s,o,l){var c=Te(r),f=Te(e),h=c?Yp:Gt(r),m=f?Yp:Gt(e);h=h==Kp?qo:h,m=m==Kp?qo:m;var g=h==qo,y=m==qo,E=h==m;if(E&&As(r)){if(!As(e))return!1;c=!0,g=!1}if(E&&!g)return l||(l=new En),c||Uc(r)?Og(r,e,t,s,o,l):Aw(r,e,h,t,s,o,l);if(!(t&Iw)){var k=g&&Xp.call(r,"__wrapped__"),C=y&&Xp.call(e,"__wrapped__");if(k||C){var N=k?r.value():r,F=C?e.value():e;return l||(l=new En),o(N,F,t,s,l)}}return E?(l||(l=new En),Nw(r,e,t,s,o,l)):!1}function Xc(r,e,t,s,o){return r===e?!0:r==null||e==null||!ln(r)&&!ln(e)?r!==r&&e!==e:_w(r,e,t,s,Xc,o)}var Pw=1,Lw=2;function bw(r,e,t,s){var o=t.length,l=o;if(r==null)return!l;for(r=Object(r);o--;){var c=t[o];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++o<l;){c=t[o];var f=c[0],h=r[f],m=c[1];if(c[2]){if(h===void 0&&!(f in r))return!1}else{var g=new En,y;if(!(y===void 0?Xc(m,h,Pw|Lw,s,g):y))return!1}}return!0}function _g(r){return r===r&&!Yt(r)}function Mw(r){for(var e=Xt(r),t=e.length;t--;){var s=e[t],o=r[s];e[t]=[s,o,_g(o)]}return e}function Pg(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function jw(r){var e=Mw(r);return e.length==1&&e[0][2]?Pg(e[0][0],e[0][1]):function(t){return t===r||bw(t,r,e)}}function Fw(r,e){return r!=null&&e in Object(r)}function Lg(r,e,t){e=$a(e,r);for(var s=-1,o=e.length,l=!1;++s<o;){var c=_s(e[s]);if(!(l=r!=null&&t(r,c)))break;r=r[c]}return l||++s!=o?l:(o=r==null?0:r.length,!!o&&$c(o)&&Pa(c,o)&&(Te(r)||ba(r)))}function $w(r,e){return r!=null&&Lg(r,e,Fw)}var Uw=1,Dw=2;function Bw(r,e){return Dc(r)&&_g(e)?Pg(_s(r),e):function(t){var s=Ix(t,r);return s===void 0&&s===e?$w(t,r):Xc(e,s,Uw|Dw)}}function zw(r){return function(e){return e?.[r]}}function Vw(r){return function(e){return zc(e,r)}}function Ww(r){return Dc(r)?zw(_s(r)):Vw(r)}function kn(r){return typeof r=="function"?r:r==null?yi:typeof r=="object"?Te(r)?Bw(r[0],r[1]):jw(r):Ww(r)}function Gw(r,e,t,s){for(var o=-1,l=r==null?0:r.length;++o<l;){var c=r[o];e(s,c,t(c),r)}return s}function Hw(r){return function(e,t,s){for(var o=-1,l=Object(e),c=s(e),f=c.length;f--;){var h=c[++o];if(t(l[h],h,l)===!1)break}return e}}var Kw=Hw();function Yw(r,e){return r&&Kw(r,e,Xt)}function Xw(r,e){return function(t,s){if(t==null)return t;if(!Tn(t))return r(t,s);for(var o=t.length,l=-1,c=Object(t);++l<o&&s(c[l],l,c)!==!1;);return t}}var jr=Xw(Yw);function qw(r,e,t,s){return jr(r,function(o,l,c){e(s,o,t(o),c)}),s}function Qw(r,e){return function(t,s){var o=Te(t)?Gw:qw,l=e?e():{};return o(t,r,kn(s),l)}}var bg=Object.prototype,Zw=bg.hasOwnProperty,qc=Fc(function(r,e){r=Object(r);var t=-1,s=e.length,o=s>2?e[2]:void 0;for(o&&hg(e[0],e[1],o)&&(s=1);++t<s;)for(var l=e[t],c=Sg(l),f=-1,h=c.length;++f<h;){var m=c[f],g=r[m];(g===void 0||Is(g,bg[m])&&!Zw.call(r,m))&&(r[m]=l[m])}return r});function qp(r){return ln(r)&&Tn(r)}var Jw=200;function eC(r,e,t,s){var o=-1,l=dg,c=!0,f=r.length,h=[],m=e.length;if(!f)return h;e.length>=Jw&&(l=Kc,c=!1,e=new vi(e));e:for(;++o<f;){var g=r[o],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=m;E--;)if(e[E]===y)continue e;h.push(g)}else l(e,y,s)||h.push(g)}return h}var Ua=Fc(function(r,e){return qp(r)?eC(r,Wc(e,1,qp,!0)):[]});function _r(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function it(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:_a(e),kg(r,e<0?0:e,s)):[]}function Rs(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:_a(e),e=s-e,kg(r,0,e<0?0:e)):[]}function tC(r){return typeof r=="function"?r:yi}function ae(r,e){var t=Te(r)?cg:jr;return t(r,tC(e))}function nC(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(!e(r[t],t,r))return!1;return!0}function rC(r,e){var t=!0;return jr(r,function(s,o,l){return t=!!e(s,o,l),t}),t}function an(r,e,t){var s=Te(r)?nC:rC;return s(r,kn(e))}function Mg(r,e){var t=[];return jr(r,function(s,o,l){e(s,o,l)&&t.push(s)}),t}function qt(r,e){var t=Te(r)?Gc:Mg;return t(r,kn(e))}function iC(r){return function(e,t,s){var o=Object(e);if(!Tn(e)){var l=kn(t);e=Xt(e),t=function(f){return l(o[f],f,o)}}var c=r(e,t,s);return c>-1?o[l?e[c]:c]:void 0}}var sC=Math.max;function oC(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var o=t==null?0:_a(t);return o<0&&(o=sC(s+o,0)),fg(r,kn(e),o)}var Ei=iC(oC);function un(r){return r&&r.length?r[0]:void 0}function aC(r,e){var t=-1,s=Tn(r)?Array(r.length):[];return jr(r,function(o,l,c){s[++t]=e(o,l,c)}),s}function ee(r,e){var t=Te(r)?Oa:aC;return t(r,kn(e))}function Ht(r,e){return Wc(ee(r,e))}var lC=Object.prototype,uC=lC.hasOwnProperty,cC=Qw(function(r,e,t){uC.call(r,t)?r[t].push(e):Mc(r,t,[e])}),fC=Object.prototype,dC=fC.hasOwnProperty;function hC(r,e){return r!=null&&dC.call(r,e)}function se(r,e){return r!=null&&Lg(r,e,hC)}var pC="[object String]";function kt(r){return typeof r=="string"||!Te(r)&&ln(r)&&fr(r)==pC}function mC(r,e){return Oa(e,function(t){return r[t]})}function qe(r){return r==null?[]:mC(r,Xt(r))}var gC=Math.max;function pt(r,e,t,s){r=Tn(r)?r:qe(r),t=t?_a(t):0;var o=r.length;return t<0&&(t=gC(o+t,0)),kt(r)?t<=o&&r.indexOf(e,t)>-1:!!o&&bc(r,e,t)>-1}function Qp(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var o=0;return bc(r,e,o)}var yC="[object Map]",vC="[object Set]",EC=Object.prototype,SC=EC.hasOwnProperty;function Ne(r){if(r==null)return!0;if(Tn(r)&&(Te(r)||typeof r=="string"||typeof r.splice=="function"||As(r)||Uc(r)||ba(r)))return!r.length;var e=Gt(r);if(e==yC||e==vC)return!r.size;if(Os(r))return!Eg(r).length;for(var t in r)if(SC.call(r,t))return!1;return!0}var TC="[object RegExp]";function kC(r){return ln(r)&&fr(r)==TC}var Zp=ur&&ur.isRegExp,bn=Zp?Ma(Zp):kC;function Mn(r){return r===void 0}var xC="Expected a function";function AC(r){if(typeof r!="function")throw new TypeError(xC);return function(){var e=arguments;switch(e.length){case 0:return!r.call(this);case 1:return!r.call(this,e[0]);case 2:return!r.call(this,e[0],e[1]);case 3:return!r.call(this,e[0],e[1],e[2])}return!r.apply(this,e)}}function wC(r,e,t,s){if(!Yt(r))return r;e=$a(e,r);for(var o=-1,l=e.length,c=l-1,f=r;f!=null&&++o<l;){var h=_s(e[o]),m=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return r;if(o!=c){var g=f[h];m=void 0,m===void 0&&(m=Yt(g)?g:Pa(e[o+1])?[]:{})}La(f,h,m),f=f[h]}return r}function CC(r,e,t){for(var s=-1,o=e.length,l={};++s<o;){var c=e[s],f=zc(r,c);t(f,c)&&wC(l,$a(c,r),f)}return l}function cn(r,e){if(r==null)return{};var t=Oa(Hx(r),function(s){return[s]});return e=kn(e),CC(r,t,function(s,o){return e(s,o[0])})}function RC(r,e,t,s,o){return o(r,function(l,c,f){t=s?(s=!1,l):e(t,l,c,f)}),t}function bt(r,e,t){var s=Te(r)?_x:RC,o=arguments.length<3;return s(r,kn(e),t,o,jr)}function Da(r,e){var t=Te(r)?Gc:Mg;return t(r,AC(kn(e)))}function NC(r,e){var t;return jr(r,function(s,o,l){return t=e(s,o,l),!t}),!!t}function jg(r,e,t){var s=Te(r)?Ig:NC;return s(r,kn(e))}var IC=1/0,OC=gi&&1/Yc(new gi([,-0]))[1]==IC?function(r){return new gi(r)}:Xe,_C=200;function PC(r,e,t){var s=-1,o=dg,l=r.length,c=!0,f=[],h=f;if(l>=_C){var m=OC(r);if(m)return Yc(m);c=!1,o=Kc,h=new vi}else h=f;e:for(;++s<l;){var g=r[s],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=h.length;E--;)if(h[E]===y)continue e;f.push(g)}else o(h,y,t)||(h!==f&&h.push(y),f.push(g))}return f}function Qc(r){return r&&r.length?PC(r):[]}function fc(r){console&&console.error&&console.error(`Error: ${r}`)}function Fg(r){console&&console.warn&&console.warn(`Warning: ${r}`)}function $g(r){const e=new Date().getTime(),t=r();return{time:new Date().getTime()-e,value:t}}function Ug(r){function e(){}e.prototype=r;const t=new e;function s(){return typeof t.bar}return s(),s(),r}function LC(r){return bC(r)?r.LABEL:r.name}function bC(r){return kt(r.LABEL)&&r.LABEL!==""}class xn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,t=>{t.accept(e)})}}class Mt extends xn{constructor(e){super([]),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Si extends xn{constructor(e){super(e.definition),this.orgText="",Lt(this,cn(e,t=>t!==void 0))}}class xt extends xn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Lt(this,cn(e,t=>t!==void 0))}}class Tt extends xn{constructor(e){super(e.definition),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}}class An extends xn{constructor(e){super(e.definition),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}}class wn extends xn{constructor(e){super(e.definition),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}}class Qe extends xn{constructor(e){super(e.definition),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}}class fn extends xn{constructor(e){super(e.definition),this.idx=1,Lt(this,cn(e,t=>t!==void 0))}}class dn extends xn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Lt(this,cn(e,t=>t!==void 0))}}class Fe{constructor(e){this.idx=1,Lt(this,cn(e,t=>t!==void 0))}accept(e){e.visit(this)}}function MC(r){return ee(r,ia)}function ia(r){function e(t){return ee(t,ia)}if(r instanceof Mt){const t={type:"NonTerminal",name:r.nonTerminalName,idx:r.idx};return kt(r.label)&&(t.label=r.label),t}else{if(r instanceof xt)return{type:"Alternative",definition:e(r.definition)};if(r instanceof Tt)return{type:"Option",idx:r.idx,definition:e(r.definition)};if(r instanceof An)return{type:"RepetitionMandatory",idx:r.idx,definition:e(r.definition)};if(r instanceof wn)return{type:"RepetitionMandatoryWithSeparator",idx:r.idx,separator:ia(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof fn)return{type:"RepetitionWithSeparator",idx:r.idx,separator:ia(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof Qe)return{type:"Repetition",idx:r.idx,definition:e(r.definition)};if(r instanceof dn)return{type:"Alternation",idx:r.idx,definition:e(r.definition)};if(r instanceof Fe){const t={type:"Terminal",name:r.terminalType.name,label:LC(r.terminalType),idx:r.idx};kt(r.label)&&(t.terminalLabel=r.label);const s=r.terminalType.PATTERN;return r.terminalType.PATTERN&&(t.pattern=bn(s)?s.source:s),t}else{if(r instanceof Si)return{type:"Rule",name:r.name,orgText:r.orgText,definition:e(r.definition)};throw Error("non exhaustive match")}}}class Ti{visit(e){const t=e;switch(t.constructor){case Mt:return this.visitNonTerminal(t);case xt:return this.visitAlternative(t);case Tt:return this.visitOption(t);case An:return this.visitRepetitionMandatory(t);case wn:return this.visitRepetitionMandatoryWithSeparator(t);case fn:return this.visitRepetitionWithSeparator(t);case Qe:return this.visitRepetition(t);case dn:return this.visitAlternation(t);case Fe:return this.visitTerminal(t);case Si:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function jC(r){return r instanceof xt||r instanceof Tt||r instanceof Qe||r instanceof An||r instanceof wn||r instanceof fn||r instanceof Fe||r instanceof Si}function ya(r,e=[]){return r instanceof Tt||r instanceof Qe||r instanceof fn?!0:r instanceof dn?jg(r.definition,s=>ya(s,e)):r instanceof Mt&&pt(e,r)?!1:r instanceof xn?(r instanceof Mt&&e.push(r),an(r.definition,s=>ya(s,e))):!1}function FC(r){return r instanceof dn}function vn(r){if(r instanceof Mt)return"SUBRULE";if(r instanceof Tt)return"OPTION";if(r instanceof dn)return"OR";if(r instanceof An)return"AT_LEAST_ONE";if(r instanceof wn)return"AT_LEAST_ONE_SEP";if(r instanceof fn)return"MANY_SEP";if(r instanceof Qe)return"MANY";if(r instanceof Fe)return"CONSUME";throw Error("non exhaustive match")}class Ba{walk(e,t=[]){ae(e.definition,(s,o)=>{const l=it(e.definition,o+1);if(s instanceof Mt)this.walkProdRef(s,l,t);else if(s instanceof Fe)this.walkTerminal(s,l,t);else if(s instanceof xt)this.walkFlat(s,l,t);else if(s instanceof Tt)this.walkOption(s,l,t);else if(s instanceof An)this.walkAtLeastOne(s,l,t);else if(s instanceof wn)this.walkAtLeastOneSep(s,l,t);else if(s instanceof fn)this.walkManySep(s,l,t);else if(s instanceof Qe)this.walkMany(s,l,t);else if(s instanceof dn)this.walkOr(s,l,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,s){}walkProdRef(e,t,s){}walkFlat(e,t,s){const o=t.concat(s);this.walk(e,o)}walkOption(e,t,s){const o=t.concat(s);this.walk(e,o)}walkAtLeastOne(e,t,s){const o=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,o)}walkAtLeastOneSep(e,t,s){const o=Jp(e,t,s);this.walk(e,o)}walkMany(e,t,s){const o=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,o)}walkManySep(e,t,s){const o=Jp(e,t,s);this.walk(e,o)}walkOr(e,t,s){const o=t.concat(s);ae(e.definition,l=>{const c=new xt({definition:[l]});this.walk(c,o)})}}function Jp(r,e,t){return[new Tt({definition:[new Fe({terminalType:r.separator})].concat(r.definition)})].concat(e,t)}function Ls(r){if(r instanceof Mt)return Ls(r.referencedRule);if(r instanceof Fe)return DC(r);if(jC(r))return $C(r);if(FC(r))return UC(r);throw Error("non exhaustive match")}function $C(r){let e=[];const t=r.definition;let s=0,o=t.length>s,l,c=!0;for(;o&&c;)l=t[s],c=ya(l),e=e.concat(Ls(l)),s=s+1,o=t.length>s;return Qc(e)}function UC(r){const e=ee(r.definition,t=>Ls(t));return Qc(on(e))}function DC(r){return[r.terminalType]}const Dg="_~IN~_";class BC extends Ba{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,s){}walkProdRef(e,t,s){const o=VC(e.referencedRule,e.idx)+this.topProd.name,l=t.concat(s),c=new xt({definition:l}),f=Ls(c);this.follows[o]=f}}function zC(r){const e={};return ae(r,t=>{const s=new BC(t).startWalking();Lt(e,s)}),e}function VC(r,e){return r.name+e+Dg}function le(r){return r.charCodeAt(0)}function Zu(r,e){Array.isArray(r)?r.forEach(function(t){e.push(t)}):e.push(r)}function fs(r,e){if(r[e]===!0)throw"duplicate flag "+e;r[e],r[e]=!0}function li(r){if(r===void 0)throw Error("Internal Error - Should never get here!");return!0}function WC(){throw Error("Internal Error - Should never get here!")}function em(r){return r.type==="Character"}const va=[];for(let r=le("0");r<=le("9");r++)va.push(r);const Ea=[le("_")].concat(va);for(let r=le("a");r<=le("z");r++)Ea.push(r);for(let r=le("A");r<=le("Z");r++)Ea.push(r);const tm=[le(" "),le("\f"),le(`
`),le("\r"),le("	"),le("\v"),le("	"),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le("\u2028"),le("\u2029"),le(""),le(""),le(""),le("\uFEFF")],GC=/[0-9a-fA-F]/,Qo=/[0-9]/,HC=/[1-9]/;class KC{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":fs(s,"global");break;case"i":fs(s,"ignoreCase");break;case"m":fs(s,"multiLine");break;case"u":fs(s,"unicode");break;case"y":fs(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":t="Lookbehind";break;case"!":t="NegativeLookbehind"}break}}li(t);const s=this.disjunction();return this.consumeChar(")"),{type:t,value:s,loc:this.loc(e)}}return WC()}quantifier(e=!1){let t;const s=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const o=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:o,atMost:o};break;case",":let l;this.isDigit()?(l=this.integerIncludingZero(),t={atLeast:o,atMost:l}):t={atLeast:o,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;li(t);break}if(!(e===!0&&t===void 0)&&li(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(s),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),li(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[le(`
`),le("\r"),le("\u2028"),le("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=va;break;case"D":e=va,t=!0;break;case"s":e=tm;break;case"S":e=tm,t=!0;break;case"w":e=Ea;break;case"W":e=Ea,t=!0;break}if(li(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=le("\f");break;case"n":e=le(`
`);break;case"r":e=le("\r");break;case"t":e=le("	");break;case"v":e=le("\v");break}if(li(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:le("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:le(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:le(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,em(s)&&this.isRangeDash()){this.consumeChar("-");const o=this.classAtom();if(o.type,em(o)){if(o.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:o.value})}else Zu(s.value,e),e.push(le("-")),Zu(o.value,e)}else Zu(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:le("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const t=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:t};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(HC.test(e)===!1)throw Error("Expecting a positive integer");for(;Qo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Qo.test(e)===!1)throw Error("Expecting an integer");for(;Qo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:le(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Qo.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let o=0;o<e;o++){const l=this.popChar();if(GC.test(l)===!1)throw Error("Expecting a HexDecimal digits");t+=l}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Zc{visitChildren(e){for(const t in e){const s=e[t];e.hasOwnProperty(t)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(o=>{this.visit(o)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let sa={};const YC=new KC;function za(r){const e=r.toString();if(sa.hasOwnProperty(e))return sa[e];{const t=YC.pattern(e);return sa[e]=t,t}}function XC(){sa={}}const Bg="Complement Sets are not supported for first char optimization",Sa=`Unable to use "first char" lexer optimizations:
`;function qC(r,e=!1){try{const t=za(r);return dc(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Bg)e&&Fg(`${Sa}	Unable to optimize: < ${r.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),fc(`${Sa}
	Failed parsing: < ${r.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function dc(r,e,t){switch(r.type){case"Disjunction":for(let o=0;o<r.value.length;o++)dc(r.value[o],e,t);break;case"Alternative":const s=r.value;for(let o=0;o<s.length;o++){const l=s[o];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const c=l;switch(c.type){case"Character":Zo(c.value,e,t);break;case"Set":if(c.complement===!0)throw Error(Bg);ae(c.value,h=>{if(typeof h=="number")Zo(h,e,t);else{const m=h;if(t===!0)for(let g=m.from;g<=m.to;g++)Zo(g,e,t);else{for(let g=m.from;g<=m.to&&g<ys;g++)Zo(g,e,t);if(m.to>=ys){const g=m.from>=ys?m.from:ys,y=m.to,E=cr(g),k=cr(y);for(let C=E;C<=k;C++)e[C]=C}}}});break;case"Group":dc(c.value,e,t);break;default:throw Error("Non Exhaustive Match")}const f=c.quantifier!==void 0&&c.quantifier.atLeast===0;if(c.type==="Group"&&hc(c)===!1||c.type!=="Group"&&f===!1)break}break;default:throw Error("non exhaustive match!")}return qe(e)}function Zo(r,e,t){const s=cr(r);e[s]=s,t===!0&&QC(r,e)}function QC(r,e){const t=String.fromCharCode(r),s=t.toUpperCase();if(s!==t){const o=cr(s.charCodeAt(0));e[o]=o}else{const o=t.toLowerCase();if(o!==t){const l=cr(o.charCodeAt(0));e[l]=l}}}function nm(r,e){return Ei(r.value,t=>{if(typeof t=="number")return pt(e,t);{const s=t;return Ei(e,o=>s.from<=o&&o<=s.to)!==void 0}})}function hc(r){const e=r.quantifier;return e&&e.atLeast===0?!0:r.value?Te(r.value)?an(r.value,hc):hc(r.value):!1}class ZC extends Zc{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){pt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?nm(e,this.targetCharCodes)===void 0&&(this.found=!0):nm(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Jc(r,e){if(e instanceof RegExp){const t=za(e),s=new ZC(r);return s.visit(t),s.found}else return Ei(e,t=>pt(r,t.charCodeAt(0)))!==void 0}const Pr="PATTERN",gs="defaultMode",Jo="modes";let zg=typeof new RegExp("(?:)").sticky=="boolean";function JC(r,e){e=qc(e,{useSticky:zg,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,P)=>P()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{x1()});let s;t("Reject Lexer.NA",()=>{s=Da(r,_=>_[Pr]===dt.NA)});let o=!1,l;t("Transform Patterns",()=>{o=!1,l=ee(s,_=>{const P=_[Pr];if(bn(P)){const b=P.source;return b.length===1&&b!=="^"&&b!=="$"&&b!=="."&&!P.ignoreCase?b:b.length===2&&b[0]==="\\"&&!pt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],b[1])?b[1]:e.useSticky?im(P):rm(P)}else{if(Fn(P))return o=!0,{exec:P};if(typeof P=="object")return o=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const b=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),V=new RegExp(b);return e.useSticky?im(V):rm(V)}}else throw Error("non exhaustive match")}})});let c,f,h,m,g;t("misc mapping",()=>{c=ee(s,_=>_.tokenTypeIdx),f=ee(s,_=>{const P=_.GROUP;if(P!==dt.SKIPPED){if(kt(P))return P;if(Mn(P))return!1;throw Error("non exhaustive match")}}),h=ee(s,_=>{const P=_.LONGER_ALT;if(P)return Te(P)?ee(P,V=>Qp(s,V)):[Qp(s,P)]}),m=ee(s,_=>_.PUSH_MODE),g=ee(s,_=>se(_,"POP_MODE"))});let y;t("Line Terminator Handling",()=>{const _=Gg(e.lineTerminatorCharacters);y=ee(s,P=>!1),e.positionTracking!=="onlyOffset"&&(y=ee(s,P=>se(P,"LINE_BREAKS")?!!P.LINE_BREAKS:Wg(P,_)===!1&&Jc(_,P.PATTERN)))});let E,k,C,N;t("Misc Mapping #2",()=>{E=ee(s,Vg),k=ee(l,S1),C=bt(s,(_,P)=>{const b=P.GROUP;return kt(b)&&b!==dt.SKIPPED&&(_[b]=[]),_},{}),N=ee(l,(_,P)=>({pattern:l[P],longerAlt:h[P],canLineTerminator:y[P],isCustom:E[P],short:k[P],group:f[P],push:m[P],pop:g[P],tokenTypeIdx:c[P],tokenType:s[P]}))});let F=!0,M=[];return e.safeMode||t("First Char Optimization",()=>{M=bt(s,(_,P,b)=>{if(typeof P.PATTERN=="string"){const V=P.PATTERN.charCodeAt(0),L=cr(V);Ju(_,L,N[b])}else if(Te(P.START_CHARS_HINT)){let V;ae(P.START_CHARS_HINT,L=>{const B=typeof L=="string"?L.charCodeAt(0):L,G=cr(B);V!==G&&(V=G,Ju(_,G,N[b]))})}else if(bn(P.PATTERN))if(P.PATTERN.unicode)F=!1,e.ensureOptimizations&&fc(`${Sa}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const V=qC(P.PATTERN,e.ensureOptimizations);Ne(V)&&(F=!1),ae(V,L=>{Ju(_,L,N[b])})}else e.ensureOptimizations&&fc(`${Sa}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),F=!1;return _},[])}),{emptyGroups:C,patternIdxToConfig:N,charCodeToPatternIdxToConfig:M,hasCustom:o,canBeOptimized:F}}function e1(r,e){let t=[];const s=n1(r);t=t.concat(s.errors);const o=r1(s.valid),l=o.valid;return t=t.concat(o.errors),t=t.concat(t1(l)),t=t.concat(f1(l)),t=t.concat(d1(l,e)),t=t.concat(h1(l)),t}function t1(r){let e=[];const t=qt(r,s=>bn(s[Pr]));return e=e.concat(s1(t)),e=e.concat(l1(t)),e=e.concat(u1(t)),e=e.concat(c1(t)),e=e.concat(o1(t)),e}function n1(r){const e=qt(r,o=>!se(o,Pr)),t=ee(e,o=>({message:"Token Type: ->"+o.name+"<- missing static 'PATTERN' property",type:ze.MISSING_PATTERN,tokenTypes:[o]})),s=Ua(r,e);return{errors:t,valid:s}}function r1(r){const e=qt(r,o=>{const l=o[Pr];return!bn(l)&&!Fn(l)&&!se(l,"exec")&&!kt(l)}),t=ee(e,o=>({message:"Token Type: ->"+o.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ze.INVALID_PATTERN,tokenTypes:[o]})),s=Ua(r,e);return{errors:t,valid:s}}const i1=/[^\\][$]/;function s1(r){class e extends Zc{constructor(){super(...arguments),this.found=!1}visitEndAnchor(l){this.found=!0}}const t=qt(r,o=>{const l=o.PATTERN;try{const c=za(l),f=new e;return f.visit(c),f.found}catch{return i1.test(l.source)}});return ee(t,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.EOI_ANCHOR_FOUND,tokenTypes:[o]}))}function o1(r){const e=qt(r,s=>s.PATTERN.test(""));return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:ze.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const a1=/[^\\[][\^]|^\^/;function l1(r){class e extends Zc{constructor(){super(...arguments),this.found=!1}visitStartAnchor(l){this.found=!0}}const t=qt(r,o=>{const l=o.PATTERN;try{const c=za(l),f=new e;return f.visit(c),f.found}catch{return a1.test(l.source)}});return ee(t,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.SOI_ANCHOR_FOUND,tokenTypes:[o]}))}function u1(r){const e=qt(r,s=>{const o=s[Pr];return o instanceof RegExp&&(o.multiline||o.global)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ze.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function c1(r){const e=[];let t=ee(r,l=>bt(r,(c,f)=>(l.PATTERN.source===f.PATTERN.source&&!pt(e,f)&&f.PATTERN!==dt.NA&&(e.push(f),c.push(f)),c),[]));t=Ps(t);const s=qt(t,l=>l.length>1);return ee(s,l=>{const c=ee(l,h=>h.name);return{message:`The same RegExp pattern ->${un(l).PATTERN}<-has been used in all of the following Token Types: ${c.join(", ")} <-`,type:ze.DUPLICATE_PATTERNS_FOUND,tokenTypes:l}})}function f1(r){const e=qt(r,s=>{if(!se(s,"GROUP"))return!1;const o=s.GROUP;return o!==dt.SKIPPED&&o!==dt.NA&&!kt(o)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ze.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function d1(r,e){const t=qt(r,o=>o.PUSH_MODE!==void 0&&!pt(e,o.PUSH_MODE));return ee(t,o=>({message:`Token Type: ->${o.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${o.PUSH_MODE}<-which does not exist`,type:ze.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[o]}))}function h1(r){const e=[],t=bt(r,(s,o,l)=>{const c=o.PATTERN;return c===dt.NA||(kt(c)?s.push({str:c,idx:l,tokenType:o}):bn(c)&&m1(c)&&s.push({str:c.source,idx:l,tokenType:o})),s},[]);return ae(r,(s,o)=>{ae(t,({str:l,idx:c,tokenType:f})=>{if(o<c&&p1(l,s.PATTERN)){const h=`Token: ->${f.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:h,type:ze.UNREACHABLE_PATTERN,tokenTypes:[s,f]})}})}),e}function p1(r,e){if(bn(e)){if(g1(e))return!1;const t=e.exec(r);return t!==null&&t.index===0}else{if(Fn(e))return e(r,0,[],{});if(se(e,"exec"))return e.exec(r,0,[],{});if(typeof e=="string")return e===r;throw Error("non exhaustive match")}}function m1(r){return Ei([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>r.source.indexOf(t)!==-1)===void 0}function g1(r){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(r.source)}function rm(r){const e=r.ignoreCase?"i":"";return new RegExp(`^(?:${r.source})`,e)}function im(r){const e=r.ignoreCase?"iy":"y";return new RegExp(`${r.source}`,e)}function y1(r,e,t){const s=[];return se(r,gs)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+gs+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),se(r,Jo)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+Jo+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),se(r,Jo)&&se(r,gs)&&!se(r.modes,r.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${gs}: <${r.defaultMode}>which does not exist
`,type:ze.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),se(r,Jo)&&ae(r.modes,(o,l)=>{ae(o,(c,f)=>{if(Mn(c))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${l}> at index: <${f}>
`,type:ze.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(se(c,"LONGER_ALT")){const h=Te(c.LONGER_ALT)?c.LONGER_ALT:[c.LONGER_ALT];ae(h,m=>{!Mn(m)&&!pt(o,m)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${m.name}> on token <${c.name}> outside of mode <${l}>
`,type:ze.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function v1(r,e,t){const s=[];let o=!1;const l=Ps(on(qe(r.modes))),c=Da(l,h=>h[Pr]===dt.NA),f=Gg(t);return e&&ae(c,h=>{const m=Wg(h,f);if(m!==!1){const y={message:k1(h,m),type:m.issue,tokenType:h};s.push(y)}else se(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(o=!0):Jc(f,h.PATTERN)&&(o=!0)}),e&&!o&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:ze.NO_LINE_BREAKS_FLAGS}),s}function E1(r){const e={},t=Xt(r);return ae(t,s=>{const o=r[s];if(Te(o))e[s]=[];else throw Error("non exhaustive match")}),e}function Vg(r){const e=r.PATTERN;if(bn(e))return!1;if(Fn(e))return!0;if(se(e,"exec"))return!0;if(kt(e))return!1;throw Error("non exhaustive match")}function S1(r){return kt(r)&&r.length===1?r.charCodeAt(0):!1}const T1={test:function(r){const e=r.length;for(let t=this.lastIndex;t<e;t++){const s=r.charCodeAt(t);if(s===10)return this.lastIndex=t+1,!0;if(s===13)return r.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function Wg(r,e){if(se(r,"LINE_BREAKS"))return!1;if(bn(r.PATTERN)){try{Jc(e,r.PATTERN)}catch(t){return{issue:ze.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(kt(r.PATTERN))return!1;if(Vg(r))return{issue:ze.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function k1(r,e){if(e.issue===ze.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${r.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===ze.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${r.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Gg(r){return ee(r,t=>kt(t)?t.charCodeAt(0):t)}function Ju(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}const ys=256;let oa=[];function cr(r){return r<ys?r:oa[r]}function x1(){if(Ne(oa)){oa=new Array(65536);for(let r=0;r<65536;r++)oa[r]=r>255?255+~~(r/255):r}}function bs(r,e){const t=r.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function Ta(r,e){return r.tokenTypeIdx===e.tokenTypeIdx}let sm=1;const Hg={};function Ms(r){const e=A1(r);w1(e),R1(e),C1(e),ae(e,t=>{t.isParent=t.categoryMatches.length>0})}function A1(r){let e=st(r),t=r,s=!0;for(;s;){t=Ps(on(ee(t,l=>l.CATEGORIES)));const o=Ua(t,e);e=e.concat(o),Ne(o)?s=!1:t=o}return e}function w1(r){ae(r,e=>{Yg(e)||(Hg[sm]=e,e.tokenTypeIdx=sm++),om(e)&&!Te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),om(e)||(e.CATEGORIES=[]),N1(e)||(e.categoryMatches=[]),I1(e)||(e.categoryMatchesMap={})})}function C1(r){ae(r,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(t,s)=>{e.categoryMatches.push(Hg[s].tokenTypeIdx)})})}function R1(r){ae(r,e=>{Kg([],e)})}function Kg(r,e){ae(r,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),ae(e.CATEGORIES,t=>{const s=r.concat(e);pt(s,t)||Kg(s,t)})}function Yg(r){return se(r,"tokenTypeIdx")}function om(r){return se(r,"CATEGORIES")}function N1(r){return se(r,"categoryMatches")}function I1(r){return se(r,"categoryMatchesMap")}function O1(r){return se(r,"tokenTypeIdx")}const _1={buildUnableToPopLexerModeMessage(r){return`Unable to pop Lexer Mode after encountering Token ->${r.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(r,e,t,s,o,l){return`unexpected character: ->${r.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var ze;(function(r){r[r.MISSING_PATTERN=0]="MISSING_PATTERN",r[r.INVALID_PATTERN=1]="INVALID_PATTERN",r[r.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",r[r.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",r[r.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",r[r.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",r[r.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",r[r.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",r[r.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",r[r.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",r[r.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",r[r.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",r[r.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",r[r.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",r[r.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",r[r.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",r[r.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",r[r.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(ze||(ze={}));const vs={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:_1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(vs);class dt{constructor(e,t=vs){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(o,l)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${o}>`);const{time:f,value:h}=$g(l),m=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&m(`${c}<-- <${o}> time: ${f}ms`),this.traceInitIndent--,h}else return l()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Lt({},vs,t);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let o,l=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===vs.lineTerminatorsPattern)this.config.lineTerminatorsPattern=T1;else if(this.config.lineTerminatorCharacters===vs.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Te(e)?o={modes:{defaultMode:st(e)},defaultMode:gs}:(l=!1,o=st(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(y1(o,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(v1(o,this.trackStartLines,this.config.lineTerminatorCharacters))})),o.modes=o.modes?o.modes:{},ae(o.modes,(f,h)=>{o.modes[h]=Da(f,m=>Mn(m))});const c=Xt(o.modes);if(ae(o.modes,(f,h)=>{this.TRACE_INIT(`Mode: <${h}> processing`,()=>{if(this.modes.push(h),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(e1(f,c))}),Ne(this.lexerDefinitionErrors)){Ms(f);let m;this.TRACE_INIT("analyzeTokenTypes",()=>{m=JC(f,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[h]=m.patternIdxToConfig,this.charCodeToPatternIdxToConfig[h]=m.charCodeToPatternIdxToConfig,this.emptyGroups=Lt({},this.emptyGroups,m.emptyGroups),this.hasCustom=m.hasCustom||this.hasCustom,this.canModeBeOptimized[h]=m.canBeOptimized}})}),this.defaultMode=o.defaultMode,!Ne(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const h=ee(this.lexerDefinitionErrors,m=>m.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+h)}ae(this.lexerDefinitionWarning,f=>{Fg(f.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(zg?(this.chopInput=yi,this.match=this.matchWithTest):(this.updateLastIndex=Xe,this.match=this.matchWithExec),l&&(this.handleModes=Xe),this.trackStartLines===!1&&(this.computeNewColumn=yi),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Xe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const f=bt(this.canModeBeOptimized,(h,m,g)=>(m===!1&&h.push(g),h),[]);if(t.ensureOptimizations&&!Ne(f))throw Error(`Lexer Modes: < ${f.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{XC()}),this.TRACE_INIT("toFastProperties",()=>{Ug(this)})})}tokenize(e,t=this.defaultMode){if(!Ne(this.lexerDefinitionErrors)){const o=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+o)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let s,o,l,c,f,h,m,g,y,E,k,C,N,F,M;const _=e,P=_.length;let b=0,V=0;const L=this.hasCustom?0:Math.floor(e.length/10),B=new Array(L),G=[];let Ae=this.trackStartLines?1:void 0,ce=this.trackStartLines?1:void 0;const Ge=E1(this.emptyGroups),tt=this.trackStartLines,$e=this.config.lineTerminatorsPattern;let Ue=0,de=[],ye=[];const xe=[],W=[];Object.freeze(W);let J;function H(){return de}function A(oe){const he=cr(oe),ve=ye[he];return ve===void 0?W:ve}const j=oe=>{if(xe.length===1&&oe.tokenType.PUSH_MODE===void 0){const he=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);G.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:he})}else{xe.pop();const he=_r(xe);de=this.patternIdxToConfig[he],ye=this.charCodeToPatternIdxToConfig[he],Ue=de.length;const ve=this.canModeBeOptimized[he]&&this.config.safeMode===!1;ye&&ve?J=A:J=H}};function fe(oe){xe.push(oe),ye=this.charCodeToPatternIdxToConfig[oe],de=this.patternIdxToConfig[oe],Ue=de.length,Ue=de.length;const he=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;ye&&he?J=A:J=H}fe.call(this,t);let te;const Ee=this.config.recoveryEnabled;for(;b<P;){h=null;const oe=_.charCodeAt(b),he=J(oe),ve=he.length;for(s=0;s<ve;s++){te=he[s];const me=te.pattern;m=null;const Le=te.short;if(Le!==!1?oe===Le&&(h=me):te.isCustom===!0?(M=me.exec(_,b,B,Ge),M!==null?(h=M[0],M.payload!==void 0&&(m=M.payload)):h=null):(this.updateLastIndex(me,b),h=this.match(me,e,b)),h!==null){if(f=te.longerAlt,f!==void 0){const At=f.length;for(l=0;l<At;l++){const jt=de[f[l]],Ft=jt.pattern;if(g=null,jt.isCustom===!0?(M=Ft.exec(_,b,B,Ge),M!==null?(c=M[0],M.payload!==void 0&&(g=M.payload)):c=null):(this.updateLastIndex(Ft,b),c=this.match(Ft,e,b)),c&&c.length>h.length){h=c,m=g,te=jt;break}}}break}}if(h!==null){if(y=h.length,E=te.group,E!==void 0&&(k=te.tokenTypeIdx,C=this.createTokenInstance(h,b,k,te.tokenType,Ae,ce,y),this.handlePayload(C,m),E===!1?V=this.addToken(B,V,C):Ge[E].push(C)),e=this.chopInput(e,y),b=b+y,ce=this.computeNewColumn(ce,y),tt===!0&&te.canLineTerminator===!0){let me=0,Le,At;$e.lastIndex=0;do Le=$e.test(h),Le===!0&&(At=$e.lastIndex-1,me++);while(Le===!0);me!==0&&(Ae=Ae+me,ce=y-At,this.updateTokenEndLineColumnLocation(C,E,At,me,Ae,ce,y))}this.handleModes(te,j,fe,C)}else{const me=b,Le=Ae,At=ce;let jt=Ee===!1;for(;jt===!1&&b<P;)for(e=this.chopInput(e,1),b++,o=0;o<Ue;o++){const Ft=de[o],pr=Ft.pattern,xi=Ft.short;if(xi!==!1?_.charCodeAt(b)===xi&&(jt=!0):Ft.isCustom===!0?jt=pr.exec(_,b,B,Ge)!==null:(this.updateLastIndex(pr,b),jt=pr.exec(e)!==null),jt===!0)break}if(N=b-me,ce=this.computeNewColumn(ce,N),F=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,me,N,Le,At,_r(xe)),G.push({offset:me,line:Le,column:At,length:N,message:F}),Ee===!1)break}}return this.hasCustom||(B.length=V),{tokens:B,groups:Ge,errors:G}}handleModes(e,t,s,o){if(e.pop===!0){const l=e.push;t(o),l!==void 0&&s.call(this,l)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,s,o,l,c,f){let h,m;t!==void 0&&(h=s===f-1,m=h?-1:0,o===1&&h===!0||(e.endLine=l+m,e.endColumn=c-1+-m))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,s,o){return{image:e,startOffset:t,tokenTypeIdx:s,tokenType:o}}createStartOnlyToken(e,t,s,o,l,c){return{image:e,startOffset:t,startLine:l,startColumn:c,tokenTypeIdx:s,tokenType:o}}createFullToken(e,t,s,o,l,c,f){return{image:e,startOffset:t,endOffset:t+f-1,startLine:l,endLine:l,startColumn:c,endColumn:c+f-1,tokenTypeIdx:s,tokenType:o}}addTokenUsingPush(e,t,s){return e.push(s),t}addTokenUsingMemberAccess(e,t,s){return e[t]=s,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,s){return e.test(t)===!0?t.substring(s,e.lastIndex):null}matchWithExec(e,t){const s=e.exec(t);return s!==null?s[0]:null}}dt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";dt.NA=/NOT_APPLICABLE/;function Ts(r){return Xg(r)?r.LABEL:r.name}function Xg(r){return kt(r.LABEL)&&r.LABEL!==""}const P1="parent",am="categories",lm="label",um="group",cm="push_mode",fm="pop_mode",dm="longer_alt",hm="line_breaks",pm="start_chars_hint";function pe(r){return L1(r)}function L1(r){const e=r.pattern,t={};if(t.name=r.name,Mn(e)||(t.PATTERN=e),se(r,P1))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return se(r,am)&&(t.CATEGORIES=r[am]),Ms([t]),se(r,lm)&&(t.LABEL=r[lm]),se(r,um)&&(t.GROUP=r[um]),se(r,fm)&&(t.POP_MODE=r[fm]),se(r,cm)&&(t.PUSH_MODE=r[cm]),se(r,dm)&&(t.LONGER_ALT=r[dm]),se(r,hm)&&(t.LINE_BREAKS=r[hm]),se(r,pm)&&(t.START_CHARS_HINT=r[pm]),t}const Lr=pe({name:"EOF",pattern:dt.NA});Ms([Lr]);function ef(r,e,t,s,o,l,c,f){return{image:e,startOffset:t,endOffset:s,startLine:o,endLine:l,startColumn:c,endColumn:f,tokenTypeIdx:r.tokenTypeIdx,tokenType:r}}function b1(r,e){return bs(r,e)}const qg={buildMismatchTokenMessage({expected:r,actual:e,previous:t,ruleName:s}){return`Expecting ${Xg(r)?`--> ${Ts(r)} <--`:`token of type --> ${r.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:r,ruleName:e}){return"Redundant input, expecting EOF but found: "+r.image},buildNoViableAltMessage({expectedPathsPerAlt:r,actual:e,previous:t,customUserDescription:s,ruleName:o}){const l="Expecting: ",f=`
but found: '`+un(e).image+"'";if(s)return l+s+f;{const h=bt(r,(E,k)=>E.concat(k),[]),m=ee(h,E=>`[${ee(E,k=>Ts(k)).join(", ")}]`),y=`one of these possible Token sequences:
${ee(m,(E,k)=>`  ${k+1}. ${E}`).join(`
`)}`;return l+y+f}},buildEarlyExitMessage({expectedIterationPaths:r,actual:e,customUserDescription:t,ruleName:s}){const o="Expecting: ",c=`
but found: '`+un(e).image+"'";if(t)return o+t+c;{const h=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(r,m=>`[${ee(m,g=>Ts(g)).join(",")}]`).join(" ,")}>`;return o+h+c}}};Object.freeze(qg);const M1={buildRuleNotFoundError(r,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+r.name+"<-"}},Nr={buildDuplicateFoundError(r,e){function t(g){return g instanceof Fe?g.terminalType.name:g instanceof Mt?g.nonTerminalName:""}const s=r.name,o=un(e),l=o.idx,c=vn(o),f=t(o),h=l>0;let m=`->${c}${h?l:""}<- ${f?`with argument: ->${f}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return m=m.replace(/[ \t]+/g," "),m=m.replace(/\s\s+/g,`
`),m},buildNamespaceConflictError(r){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${r.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(r){const e=ee(r.prefixPath,o=>Ts(o)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;return`Ambiguous alternatives: <${r.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(r){const e=ee(r.prefixPath,o=>Ts(o)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;let s=`Ambiguous Alternatives Detected: <${r.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(r){let e=vn(r.repetition);return r.repetition.idx!==0&&(e+=r.repetition.idx),`The repetition <${e}> within Rule <${r.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(r){return"deprecated"},buildEmptyAlternationError(r){return`Ambiguous empty alternative: <${r.emptyChoiceIdx+1}> in <OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(r){return`An Alternation cannot have more than 256 alternatives:
<OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
 has ${r.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(r){const e=r.topLevelRule.name,t=ee(r.leftRecursionPath,l=>l.name),s=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(r){return"deprecated"},buildDuplicateRuleNameError(r){let e;return r.topLevelRule instanceof Si?e=r.topLevelRule.name:e=r.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${r.grammarName}<-`}};function j1(r,e){const t=new F1(r,e);return t.resolveRefs(),t.errors}class F1 extends Ti{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ae(qe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class $1 extends Ba{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=st(this.path.ruleStack).reverse(),this.occurrenceStack=st(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const o=t.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,o)}}updateExpectedNext(){Ne(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class U1 extends $1{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const o=t.concat(s),l=new xt({definition:o});this.possibleTokTypes=Ls(l),this.found=!0}}}class Va extends Ba{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class D1 extends Va{walkMany(e,t,s){if(e.idx===this.occurrence){const o=un(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkMany(e,t,s)}}class mm extends Va{walkManySep(e,t,s){if(e.idx===this.occurrence){const o=un(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkManySep(e,t,s)}}class B1 extends Va{walkAtLeastOne(e,t,s){if(e.idx===this.occurrence){const o=un(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOne(e,t,s)}}class gm extends Va{walkAtLeastOneSep(e,t,s){if(e.idx===this.occurrence){const o=un(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOneSep(e,t,s)}}function pc(r,e,t=[]){t=st(t);let s=[],o=0;function l(f){return f.concat(it(r,o+1))}function c(f){const h=pc(l(f),e,t);return s.concat(h)}for(;t.length<e&&o<r.length;){const f=r[o];if(f instanceof xt)return c(f.definition);if(f instanceof Mt)return c(f.definition);if(f instanceof Tt)s=c(f.definition);else if(f instanceof An){const h=f.definition.concat([new Qe({definition:f.definition})]);return c(h)}else if(f instanceof wn){const h=[new xt({definition:f.definition}),new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})];return c(h)}else if(f instanceof fn){const h=f.definition.concat([new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})]);s=c(h)}else if(f instanceof Qe){const h=f.definition.concat([new Qe({definition:f.definition})]);s=c(h)}else{if(f instanceof dn)return ae(f.definition,h=>{Ne(h.definition)===!1&&(s=c(h.definition))}),s;if(f instanceof Fe)t.push(f.terminalType);else throw Error("non exhaustive match")}o++}return s.push({partialPath:t,suffixDef:it(r,o)}),s}function Qg(r,e,t,s){const o="EXIT_NONE_TERMINAL",l=[o],c="EXIT_ALTERNATIVE";let f=!1;const h=e.length,m=h-s-1,g=[],y=[];for(y.push({idx:-1,def:r,ruleStack:[],occurrenceStack:[]});!Ne(y);){const E=y.pop();if(E===c){f&&_r(y).idx<=m&&y.pop();continue}const k=E.def,C=E.idx,N=E.ruleStack,F=E.occurrenceStack;if(Ne(k))continue;const M=k[0];if(M===o){const _={idx:C,def:it(k),ruleStack:Rs(N),occurrenceStack:Rs(F)};y.push(_)}else if(M instanceof Fe)if(C<h-1){const _=C+1,P=e[_];if(t(P,M.terminalType)){const b={idx:_,def:it(k),ruleStack:N,occurrenceStack:F};y.push(b)}}else if(C===h-1)g.push({nextTokenType:M.terminalType,nextTokenOccurrence:M.idx,ruleStack:N,occurrenceStack:F}),f=!0;else throw Error("non exhaustive match");else if(M instanceof Mt){const _=st(N);_.push(M.nonTerminalName);const P=st(F);P.push(M.idx);const b={idx:C,def:M.definition.concat(l,it(k)),ruleStack:_,occurrenceStack:P};y.push(b)}else if(M instanceof Tt){const _={idx:C,def:it(k),ruleStack:N,occurrenceStack:F};y.push(_),y.push(c);const P={idx:C,def:M.definition.concat(it(k)),ruleStack:N,occurrenceStack:F};y.push(P)}else if(M instanceof An){const _=new Qe({definition:M.definition,idx:M.idx}),P=M.definition.concat([_],it(k)),b={idx:C,def:P,ruleStack:N,occurrenceStack:F};y.push(b)}else if(M instanceof wn){const _=new Fe({terminalType:M.separator}),P=new Qe({definition:[_].concat(M.definition),idx:M.idx}),b=M.definition.concat([P],it(k)),V={idx:C,def:b,ruleStack:N,occurrenceStack:F};y.push(V)}else if(M instanceof fn){const _={idx:C,def:it(k),ruleStack:N,occurrenceStack:F};y.push(_),y.push(c);const P=new Fe({terminalType:M.separator}),b=new Qe({definition:[P].concat(M.definition),idx:M.idx}),V=M.definition.concat([b],it(k)),L={idx:C,def:V,ruleStack:N,occurrenceStack:F};y.push(L)}else if(M instanceof Qe){const _={idx:C,def:it(k),ruleStack:N,occurrenceStack:F};y.push(_),y.push(c);const P=new Qe({definition:M.definition,idx:M.idx}),b=M.definition.concat([P],it(k)),V={idx:C,def:b,ruleStack:N,occurrenceStack:F};y.push(V)}else if(M instanceof dn)for(let _=M.definition.length-1;_>=0;_--){const P=M.definition[_],b={idx:C,def:P.definition.concat(it(k)),ruleStack:N,occurrenceStack:F};y.push(b),y.push(c)}else if(M instanceof xt)y.push({idx:C,def:M.definition.concat(it(k)),ruleStack:N,occurrenceStack:F});else if(M instanceof Si)y.push(z1(M,C,N,F));else throw Error("non exhaustive match")}return g}function z1(r,e,t,s){const o=st(t);o.push(r.name);const l=st(s);return l.push(1),{idx:e,def:r.definition,ruleStack:o,occurrenceStack:l}}var Be;(function(r){r[r.OPTION=0]="OPTION",r[r.REPETITION=1]="REPETITION",r[r.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",r[r.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",r[r.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",r[r.ALTERNATION=5]="ALTERNATION"})(Be||(Be={}));function Zg(r){if(r instanceof Tt||r==="Option")return Be.OPTION;if(r instanceof Qe||r==="Repetition")return Be.REPETITION;if(r instanceof An||r==="RepetitionMandatory")return Be.REPETITION_MANDATORY;if(r instanceof wn||r==="RepetitionMandatoryWithSeparator")return Be.REPETITION_MANDATORY_WITH_SEPARATOR;if(r instanceof fn||r==="RepetitionWithSeparator")return Be.REPETITION_WITH_SEPARATOR;if(r instanceof dn||r==="Alternation")return Be.ALTERNATION;throw Error("non exhaustive match")}function V1(r,e,t,s,o,l){const c=tf(r,e,t),f=ty(c)?Ta:bs;return l(c,s,f,o)}function W1(r,e,t,s,o,l){const c=nf(r,e,o,t),f=ty(c)?Ta:bs;return l(c[0],f,s)}function G1(r,e,t,s){const o=r.length,l=an(r,c=>an(c,f=>f.length===1));if(e)return function(c){const f=ee(c,h=>h.GATE);for(let h=0;h<o;h++){const m=r[h],g=m.length,y=f[h];if(!(y!==void 0&&y.call(this)===!1))e:for(let E=0;E<g;E++){const k=m[E],C=k.length;for(let N=0;N<C;N++){const F=this.LA(N+1);if(t(F,k[N])===!1)continue e}return h}}};if(l&&!s){const c=ee(r,h=>on(h)),f=bt(c,(h,m,g)=>(ae(m,y=>{se(h,y.tokenTypeIdx)||(h[y.tokenTypeIdx]=g),ae(y.categoryMatches,E=>{se(h,E)||(h[E]=g)})}),h),{});return function(){const h=this.LA(1);return f[h.tokenTypeIdx]}}else return function(){for(let c=0;c<o;c++){const f=r[c],h=f.length;e:for(let m=0;m<h;m++){const g=f[m],y=g.length;for(let E=0;E<y;E++){const k=this.LA(E+1);if(t(k,g[E])===!1)continue e}return c}}}}function H1(r,e,t){const s=an(r,l=>l.length===1),o=r.length;if(s&&!t){const l=on(r);if(l.length===1&&Ne(l[0].categoryMatches)){const f=l[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===f}}else{const c=bt(l,(f,h,m)=>(f[h.tokenTypeIdx]=!0,ae(h.categoryMatches,g=>{f[g]=!0}),f),[]);return function(){const f=this.LA(1);return c[f.tokenTypeIdx]===!0}}}else return function(){e:for(let l=0;l<o;l++){const c=r[l],f=c.length;for(let h=0;h<f;h++){const m=this.LA(h+1);if(e(m,c[h])===!1)continue e}return!0}return!1}}class K1 extends Ba{constructor(e,t,s){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,s,o){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=s.concat(o),!0):!1}walkOption(e,t,s){this.checkIsTarget(e,Be.OPTION,t,s)||super.walkOption(e,t,s)}walkAtLeastOne(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY,t,s)||super.walkOption(e,t,s)}walkAtLeastOneSep(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}walkMany(e,t,s){this.checkIsTarget(e,Be.REPETITION,t,s)||super.walkOption(e,t,s)}walkManySep(e,t,s){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}}class Jg extends Ti{constructor(e,t,s){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=s,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Be.OPTION)}visitRepetition(e){this.checkIsTarget(e,Be.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Be.ALTERNATION)}}function ym(r){const e=new Array(r);for(let t=0;t<r;t++)e[t]=[];return e}function ec(r){let e=[""];for(let t=0;t<r.length;t++){const s=r[t],o=[];for(let l=0;l<e.length;l++){const c=e[l];o.push(c+"_"+s.tokenTypeIdx);for(let f=0;f<s.categoryMatches.length;f++){const h="_"+s.categoryMatches[f];o.push(c+h)}}e=o}return e}function Y1(r,e,t){for(let s=0;s<r.length;s++){if(s===t)continue;const o=r[s];for(let l=0;l<e.length;l++){const c=e[l];if(o[c]===!0)return!1}}return!0}function ey(r,e){const t=ee(r,c=>pc([c],1)),s=ym(t.length),o=ee(t,c=>{const f={};return ae(c,h=>{const m=ec(h.partialPath);ae(m,g=>{f[g]=!0})}),f});let l=t;for(let c=1;c<=e;c++){const f=l;l=ym(f.length);for(let h=0;h<f.length;h++){const m=f[h];for(let g=0;g<m.length;g++){const y=m[g].partialPath,E=m[g].suffixDef,k=ec(y);if(Y1(o,k,h)||Ne(E)||y.length===e){const N=s[h];if(mc(N,y)===!1){N.push(y);for(let F=0;F<k.length;F++){const M=k[F];o[h][M]=!0}}}else{const N=pc(E,c+1,y);l[h]=l[h].concat(N),ae(N,F=>{const M=ec(F.partialPath);ae(M,_=>{o[h][_]=!0})})}}}}return s}function tf(r,e,t,s){const o=new Jg(r,Be.ALTERNATION,s);return e.accept(o),ey(o.result,t)}function nf(r,e,t,s){const o=new Jg(r,t);e.accept(o);const l=o.result,f=new K1(e,r,t).startWalking(),h=new xt({definition:l}),m=new xt({definition:f});return ey([h,m],s)}function mc(r,e){e:for(let t=0;t<r.length;t++){const s=r[t];if(s.length===e.length){for(let o=0;o<s.length;o++){const l=e[o],c=s[o];if((l===c||c.categoryMatchesMap[l.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function X1(r,e){return r.length<e.length&&an(r,(t,s)=>{const o=e[s];return t===o||o.categoryMatchesMap[t.tokenTypeIdx]})}function ty(r){return an(r,e=>an(e,t=>an(t,s=>Ne(s.categoryMatches))))}function q1(r){const e=r.lookaheadStrategy.validate({rules:r.rules,tokenTypes:r.tokenTypes,grammarName:r.grammarName});return ee(e,t=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},t))}function Q1(r,e,t,s){const o=Ht(r,h=>Z1(h,t)),l=cR(r,e,t),c=Ht(r,h=>oR(h,t)),f=Ht(r,h=>tR(h,r,s,t));return o.concat(l,c,f)}function Z1(r,e){const t=new eR;r.accept(t);const s=t.allProductions,o=cC(s,J1),l=cn(o,f=>f.length>1);return ee(qe(l),f=>{const h=un(f),m=e.buildDuplicateFoundError(r,f),g=vn(h),y={message:m,type:ht.DUPLICATE_PRODUCTIONS,ruleName:r.name,dslName:g,occurrence:h.idx},E=ny(h);return E&&(y.parameter=E),y})}function J1(r){return`${vn(r)}_#_${r.idx}_#_${ny(r)}`}function ny(r){return r instanceof Fe?r.terminalType.name:r instanceof Mt?r.nonTerminalName:""}class eR extends Ti{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function tR(r,e,t,s){const o=[];if(bt(e,(c,f)=>f.name===r.name?c+1:c,0)>1){const c=s.buildDuplicateRuleNameError({topLevelRule:r,grammarName:t});o.push({message:c,type:ht.DUPLICATE_RULE_NAME,ruleName:r.name})}return o}function nR(r,e,t){const s=[];let o;return pt(e,r)||(o=`Invalid rule override, rule: ->${r}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,s.push({message:o,type:ht.INVALID_RULE_OVERRIDE,ruleName:r})),s}function ry(r,e,t,s=[]){const o=[],l=aa(e.definition);if(Ne(l))return[];{const c=r.name;pt(l,r)&&o.push({message:t.buildLeftRecursionError({topLevelRule:r,leftRecursionPath:s}),type:ht.LEFT_RECURSION,ruleName:c});const h=Ua(l,s.concat([r])),m=Ht(h,g=>{const y=st(s);return y.push(g),ry(r,g,t,y)});return o.concat(m)}}function aa(r){let e=[];if(Ne(r))return e;const t=un(r);if(t instanceof Mt)e.push(t.referencedRule);else if(t instanceof xt||t instanceof Tt||t instanceof An||t instanceof wn||t instanceof fn||t instanceof Qe)e=e.concat(aa(t.definition));else if(t instanceof dn)e=on(ee(t.definition,l=>aa(l.definition)));else if(!(t instanceof Fe))throw Error("non exhaustive match");const s=ya(t),o=r.length>1;if(s&&o){const l=it(r);return e.concat(aa(l))}else return e}class rf extends Ti{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function rR(r,e){const t=new rf;r.accept(t);const s=t.alternations;return Ht(s,l=>{const c=Rs(l.definition);return Ht(c,(f,h)=>{const m=Qg([f],[],bs,1);return Ne(m)?[{message:e.buildEmptyAlternationError({topLevelRule:r,alternation:l,emptyChoiceIdx:h}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:r.name,occurrence:l.idx,alternative:h+1}]:[]})})}function iR(r,e,t){const s=new rf;r.accept(s);let o=s.alternations;return o=Da(o,c=>c.ignoreAmbiguities===!0),Ht(o,c=>{const f=c.idx,h=c.maxLookahead||e,m=tf(f,r,h,c),g=lR(m,c,r,t),y=uR(m,c,r,t);return g.concat(y)})}class sR extends Ti{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function oR(r,e){const t=new rf;r.accept(t);const s=t.alternations;return Ht(s,l=>l.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:r,alternation:l}),type:ht.TOO_MANY_ALTS,ruleName:r.name,occurrence:l.idx}]:[])}function aR(r,e,t){const s=[];return ae(r,o=>{const l=new sR;o.accept(l);const c=l.allProductions;ae(c,f=>{const h=Zg(f),m=f.maxLookahead||e,g=f.idx,E=nf(g,o,h,m)[0];if(Ne(on(E))){const k=t.buildEmptyRepetitionError({topLevelRule:o,repetition:f});s.push({message:k,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:o.name})}})}),s}function lR(r,e,t,s){const o=[],l=bt(r,(f,h,m)=>(e.definition[m].ignoreAmbiguities===!0||ae(h,g=>{const y=[m];ae(r,(E,k)=>{m!==k&&mc(E,g)&&e.definition[k].ignoreAmbiguities!==!0&&y.push(k)}),y.length>1&&!mc(o,g)&&(o.push(g),f.push({alts:y,path:g}))}),f),[]);return ee(l,f=>{const h=ee(f.alts,g=>g+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:ht.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:f.alts}})}function uR(r,e,t,s){const o=bt(r,(c,f,h)=>{const m=ee(f,g=>({idx:h,path:g}));return c.concat(m)},[]);return Ps(Ht(o,c=>{if(e.definition[c.idx].ignoreAmbiguities===!0)return[];const h=c.idx,m=c.path,g=qt(o,E=>e.definition[E.idx].ignoreAmbiguities!==!0&&E.idx<h&&X1(E.path,m));return ee(g,E=>{const k=[E.idx+1,h+1],C=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:k,prefixPath:E.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:C,alternatives:k}})}))}function cR(r,e,t){const s=[],o=ee(e,l=>l.name);return ae(r,l=>{const c=l.name;if(pt(o,c)){const f=t.buildNamespaceConflictError(l);s.push({message:f,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:c})}}),s}function fR(r){const e=qc(r,{errMsgProvider:M1}),t={};return ae(r.rules,s=>{t[s.name]=s}),j1(t,e.errMsgProvider)}function dR(r){return r=qc(r,{errMsgProvider:Nr}),Q1(r.rules,r.tokenTypes,r.errMsgProvider,r.grammarName)}const iy="MismatchedTokenException",sy="NoViableAltException",oy="EarlyExitException",ay="NotAllInputParsedException",ly=[iy,sy,oy,ay];Object.freeze(ly);function ka(r){return pt(ly,r.name)}class Wa extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class uy extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=iy}}class hR extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=sy}}class pR extends Wa{constructor(e,t){super(e,t),this.name=ay}}class mR extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=oy}}const tc={},cy="InRuleRecoveryException";class gR extends Error{constructor(e){super(e),this.name=cy}}class yR{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=se(e,"recoveryEnabled")?e.recoveryEnabled:jn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=vR)}getTokenToInsert(e){const t=ef(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,s,o){const l=this.findReSyncTokenType(),c=this.exportLexerState(),f=[];let h=!1;const m=this.LA(1);let g=this.LA(1);const y=()=>{const E=this.LA(0),k=this.errorMessageProvider.buildMismatchTokenMessage({expected:o,actual:m,previous:E,ruleName:this.getCurrRuleFullName()}),C=new uy(k,m,this.LA(0));C.resyncedTokens=Rs(f),this.SAVE_ERROR(C)};for(;!h;)if(this.tokenMatcher(g,o)){y();return}else if(s.call(this)){y(),e.apply(this,t);return}else this.tokenMatcher(g,l)?h=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,f));this.importLexerState(c)}shouldInRepetitionRecoveryBeTried(e,t,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const s=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new gR("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ne(t))return!1;const s=this.LA(1);return Ei(t,l=>this.tokenMatcher(s,l))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(t);return pt(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),s=2;for(;;){const o=Ei(e,l=>b1(t,l));if(o!==void 0)return o;t=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return tc;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return ee(e,(s,o)=>o===0?tc:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:t[o],inRule:this.shortRuleNameToFullName(e[o-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return on(e)}getFollowSetFromFollowKey(e){if(e===tc)return[Lr];const t=e.ruleName+e.idxInCallingRule+Dg+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Lr)||t.push(e),t}reSyncTo(e){const t=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,t);return Rs(t)}attemptInRepetitionRecovery(e,t,s,o,l,c,f){}getCurrentGrammarPath(e,t){const s=this.getHumanReadableRuleStack(),o=st(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:o,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function vR(r,e,t,s,o,l,c){const f=this.getKeyForAutomaticLookahead(s,o);let h=this.firstAfterRepMap[f];if(h===void 0){const E=this.getCurrRuleFullName(),k=this.getGAstProductions()[E];h=new l(k,o).startWalking(),this.firstAfterRepMap[f]=h}let m=h.token,g=h.occurrence;const y=h.isEndOfRule;this.RULE_STACK.length===1&&y&&m===void 0&&(m=Lr,g=1),!(m===void 0||g===void 0)&&this.shouldInRepetitionRecoveryBeTried(m,g,c)&&this.tryInRepetitionRecovery(r,e,t,m)}const ER=4,dr=8,fy=1<<dr,dy=2<<dr,gc=3<<dr,yc=4<<dr,vc=5<<dr,la=6<<dr;function nc(r,e,t){return t|e|r}class SR{constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:jn.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(Ne(t)){const s=this.validateEmptyOrAlternatives(e.rules),o=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),l=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...s,...o,...l]}return t}validateNoLeftRecursion(e){return Ht(e,t=>ry(t,t,Nr))}validateEmptyOrAlternatives(e){return Ht(e,t=>rR(t,Nr))}validateAmbiguousAlternationAlternatives(e,t){return Ht(e,s=>iR(s,t,Nr))}validateSomeNonEmptyLookaheadPath(e,t){return aR(e,t,Nr)}buildLookaheadForAlternation(e){return V1(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,G1)}buildLookaheadForOptional(e){return W1(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Zg(e.prodType),H1)}}class TR{initLooksAhead(e){this.dynamicTokensEnabled=se(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:jn.dynamicTokensEnabled,this.maxLookahead=se(e,"maxLookahead")?e.maxLookahead:jn.maxLookahead,this.lookaheadStrategy=se(e,"lookaheadStrategy")?e.lookaheadStrategy:new SR({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:s,repetition:o,option:l,repetitionMandatory:c,repetitionMandatoryWithSeparator:f,repetitionWithSeparator:h}=xR(t);ae(s,m=>{const g=m.idx===0?"":m.idx;this.TRACE_INIT(`${vn(m)}${g}`,()=>{const y=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:m.idx,rule:t,maxLookahead:m.maxLookahead||this.maxLookahead,hasPredicates:m.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),E=nc(this.fullRuleNameToShort[t.name],fy,m.idx);this.setLaFuncCache(E,y)})}),ae(o,m=>{this.computeLookaheadFunc(t,m.idx,gc,"Repetition",m.maxLookahead,vn(m))}),ae(l,m=>{this.computeLookaheadFunc(t,m.idx,dy,"Option",m.maxLookahead,vn(m))}),ae(c,m=>{this.computeLookaheadFunc(t,m.idx,yc,"RepetitionMandatory",m.maxLookahead,vn(m))}),ae(f,m=>{this.computeLookaheadFunc(t,m.idx,la,"RepetitionMandatoryWithSeparator",m.maxLookahead,vn(m))}),ae(h,m=>{this.computeLookaheadFunc(t,m.idx,vc,"RepetitionWithSeparator",m.maxLookahead,vn(m))})})})}computeLookaheadFunc(e,t,s,o,l,c){this.TRACE_INIT(`${c}${t===0?"":t}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:l||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:o}),h=nc(this.fullRuleNameToShort[e.name],s,t);this.setLaFuncCache(h,f)})}getKeyForAutomaticLookahead(e,t){const s=this.getLastExplicitRuleShortName();return nc(s,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class kR extends Ti{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const ea=new kR;function xR(r){ea.reset(),r.accept(ea);const e=ea.dslMethods;return ea.reset(),e}function vm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.endOffset=e.endOffset):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset)}function Em(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.startColumn=e.startColumn,r.startLine=e.startLine,r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine)}function AR(r,e,t){r.children[t]===void 0?r.children[t]=[e]:r.children[t].push(e)}function wR(r,e,t){r.children[e]===void 0?r.children[e]=[t]:r.children[e].push(t)}const CR="name";function hy(r,e){Object.defineProperty(r,CR,{enumerable:!1,configurable:!0,writable:!1,value:e})}function RR(r,e){const t=Xt(r),s=t.length;for(let o=0;o<s;o++){const l=t[o],c=r[l],f=c.length;for(let h=0;h<f;h++){const m=c[h];m.tokenTypeIdx===void 0&&this[m.name](m.children,e)}}}function NR(r,e){const t=function(){};hy(t,r+"BaseSemantics");const s={visit:function(o,l){if(Te(o)&&(o=o[0]),!Mn(o))return this[o.name](o.children,l)},validateVisitor:function(){const o=OR(this,e);if(!Ne(o)){const l=ee(o,c=>c.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${l.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=s,t.prototype.constructor=t,t._RULE_NAMES=e,t}function IR(r,e,t){const s=function(){};hy(s,r+"BaseSemanticsWithDefaults");const o=Object.create(t.prototype);return ae(e,l=>{o[l]=RR}),s.prototype=o,s.prototype.constructor=s,s}var Ec;(function(r){r[r.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",r[r.MISSING_METHOD=1]="MISSING_METHOD"})(Ec||(Ec={}));function OR(r,e){return _R(r,e)}function _R(r,e){const t=qt(e,o=>Fn(r[o])===!1),s=ee(t,o=>({msg:`Missing visitor method: <${o}> on ${r.constructor.name} CST Visitor.`,type:Ec.MISSING_METHOD,methodName:o}));return Ps(s)}class PR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=se(e,"nodeLocationTracking")?e.nodeLocationTracking:jn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Xe,this.cstFinallyStateUpdate=Xe,this.cstPostTerminal=Xe,this.cstPostNonTerminal=Xe,this.cstPostRule=Xe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Em,this.setNodeLocationFromNode=Em,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=vm,this.setNodeLocationFromNode=vm,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=Xe,this.setInitialNodeLocation=Xe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?(s.endOffset=t.endOffset,s.endLine=t.endLine,s.endColumn=t.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?s.endOffset=t.endOffset:s.startOffset=NaN}cstPostTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];AR(s,t,e),this.setNodeLocationFromToken(s.location,t)}cstPostNonTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];wR(s,t,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(Mn(this.baseCstVisitorConstructor)){const e=NR(this.className,Xt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Mn(this.baseCstVisitorWithDefaultsConstructor)){const e=IR(this.className,Xt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class LR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Aa}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?Aa:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class bR{ACTION(e){return e.call(this)}consume(e,t,s){return this.consumeInternal(t,e,s)}subrule(e,t,s){return this.subruleInternal(t,e,s)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,s=wa){if(pt(this.definedRulesNames,e)){const c={message:Nr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(c)}this.definedRulesNames.push(e);const o=this.defineRule(e,t,s);return this[e]=o,o}OVERRIDE_RULE(e,t,s=wa){const o=nR(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(o);const l=this.defineRule(e,t,s);return this[e]=l,l}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,t),!0}catch(o){if(ka(o))return!1;throw o}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return MC(qe(this.gastProductionsCache))}}class MR{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Ta,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},se(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Te(e)){if(Ne(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Te(e))this.tokensMap=bt(e,(l,c)=>(l[c.name]=c,l),{});else if(se(e,"modes")&&an(on(qe(e.modes)),O1)){const l=on(qe(e.modes)),c=Qc(l);this.tokensMap=bt(c,(f,h)=>(f[h.name]=h,f),{})}else if(Yt(e))this.tokensMap=st(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Lr;const s=se(e,"modes")?on(qe(e.modes)):qe(e),o=an(s,l=>Ne(l.categoryMatches));this.tokenMatcher=o?Ta:bs,Ms(qe(this.tokensMap))}defineRule(e,t,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const o=se(s,"resyncEnabled")?s.resyncEnabled:wa.resyncEnabled,l=se(s,"recoveryValueFunc")?s.recoveryValueFunc:wa.recoveryValueFunc,c=this.ruleShortNameIdx<<ER+dr;this.ruleShortNameIdx++,this.shortRuleNameToFull[c]=e,this.fullRuleNameToShort[e]=c;let f;return this.outputCst===!0?f=function(...g){try{this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g);const y=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(y),y}catch(y){return this.invokeRuleCatch(y,o,l)}finally{this.ruleFinallyStateUpdate()}}:f=function(...g){try{return this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g)}catch(y){return this.invokeRuleCatch(y,o,l)}finally{this.ruleFinallyStateUpdate()}},Object.assign(f,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,s){const o=this.RULE_STACK.length===1,l=t&&!this.isBackTracking()&&this.recoveryEnabled;if(ka(e)){const c=e;if(l){const f=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(f))if(c.resyncedTokens=this.reSyncTo(f),this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];return h.recoveredNode=!0,h}else return s(e);else{if(this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];h.recoveredNode=!0,c.partialCstResult=h}throw c}}else{if(o)return this.moveToTerminatedState(),s(e);throw c}}else throw e}optionInternal(e,t){const s=this.getKeyForAutomaticLookahead(dy,t);return this.optionInternalLogic(e,t,s)}optionInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof e!="function"){l=e.DEF;const c=e.GATE;if(c!==void 0){const f=o;o=()=>c.call(this)&&f.call(this)}}else l=e;if(o.call(this)===!0)return l.call(this)}atLeastOneInternal(e,t){const s=this.getKeyForAutomaticLookahead(yc,e);return this.atLeastOneInternalLogic(e,t,s)}atLeastOneInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const c=t.GATE;if(c!==void 0){const f=o;o=()=>c.call(this)&&f.call(this)}}else l=t;if(o.call(this)===!0){let c=this.doSingleRepetition(l);for(;o.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],o,yc,e,B1)}atLeastOneSepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(la,e);this.atLeastOneSepFirstInternalLogic(e,t,s)}atLeastOneSepFirstInternalLogic(e,t,s){const o=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){o.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,o,gm],f,la,e,gm)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const s=this.getKeyForAutomaticLookahead(gc,e);return this.manyInternalLogic(e,t,s)}manyInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const f=t.GATE;if(f!==void 0){const h=o;o=()=>f.call(this)&&h.call(this)}}else l=t;let c=!0;for(;o.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],o,gc,e,D1,c)}manySepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(vc,e);this.manySepFirstInternalLogic(e,t,s)}manySepFirstInternalLogic(e,t,s){const o=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){o.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,o,mm],f,vc,e,mm)}}repetitionSepSecondInternal(e,t,s,o,l){for(;s();)this.CONSUME(t),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,s,o,l],s,la,e,l)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const s=this.getKeyForAutomaticLookahead(fy,t),o=Te(e)?e:e.DEF,c=this.getLaFuncFromCache(s).call(this,o);if(c!==void 0)return o[c].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new pR(t,e))}}subruleInternal(e,t,s){let o;try{const l=s!==void 0?s.ARGS:void 0;return this.subruleIdx=t,o=e.apply(this,l),this.cstPostNonTerminal(o,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),o}catch(l){throw this.subruleInternalError(l,s,e.ruleName)}}subruleInternalError(e,t,s){throw ka(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,t,s){let o;try{const l=this.LA(1);this.tokenMatcher(l,e)===!0?(this.consumeToken(),o=l):this.consumeInternalError(e,l,s)}catch(l){o=this.consumeInternalRecovery(e,t,l)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,o),o}consumeInternalError(e,t,s){let o;const l=this.LA(0);throw s!==void 0&&s.ERR_MSG?o=s.ERR_MSG:o=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:l,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new uy(o,t,l))}consumeInternalRecovery(e,t,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const o=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,o)}catch(l){throw l.name===cy?s:l}}else throw s}saveRecogState(){const e=this.errors,t=st(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Lr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class jR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=se(e,"errorMessageProvider")?e.errorMessageProvider:jn.errorMessageProvider}SAVE_ERROR(e){if(ka(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:st(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return st(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,s){const o=this.getCurrRuleFullName(),l=this.getGAstProductions()[o],f=nf(e,l,t,this.maxLookahead)[0],h=[];for(let g=1;g<=this.maxLookahead;g++)h.push(this.LA(g));const m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:h,previous:this.LA(0),customUserDescription:s,ruleName:o});throw this.SAVE_ERROR(new mR(m,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const s=this.getCurrRuleFullName(),o=this.getGAstProductions()[s],l=tf(e,o,this.maxLookahead),c=[];for(let m=1;m<=this.maxLookahead;m++)c.push(this.LA(m));const f=this.LA(0),h=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:l,actual:c,previous:f,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new hR(h,this.LA(1),f))}}class FR{initContentAssist(){}computeContentAssist(e,t){const s=this.gastProductionsCache[e];if(Mn(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Qg([s],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=un(e.ruleStack),o=this.getGAstProductions()[t];return new U1(o,e).startWalking()}}const Ga={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ga);const Sm=!0,Tm=Math.pow(2,dr)-1,py=pe({name:"RECORDING_PHASE_TOKEN",pattern:dt.NA});Ms([py]);const my=ef(py,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(my);const $R={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class UR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(s,o){return this.consumeInternalRecord(s,e,o)},this[`SUBRULE${t}`]=function(s,o){return this.subruleInternalRecord(s,e,o)},this[`OPTION${t}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${t}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${t}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${t}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${t}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${t}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,t,s){return this.consumeInternalRecord(t,e,s)},this.subrule=function(e,t,s){return this.subruleInternalRecord(t,e,s)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const s=t>0?t:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return Aa}topLevelRuleRecord(e,t){try{const s=new Si({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),t.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,t){return ds.call(this,Tt,e,t)}atLeastOneInternalRecord(e,t){ds.call(this,An,t,e)}atLeastOneSepFirstInternalRecord(e,t){ds.call(this,wn,t,e,Sm)}manyInternalRecord(e,t){ds.call(this,Qe,t,e)}manySepFirstInternalRecord(e,t){ds.call(this,fn,t,e,Sm)}orInternalRecord(e,t){return DR.call(this,e,t)}subruleInternalRecord(e,t,s){if(xa(t),!e||se(e,"ruleName")===!1){const f=new Error(`<SUBRULE${km(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw f.KNOWN_RECORDER_ERROR=!0,f}const o=_r(this.recordingProdStack),l=e.ruleName,c=new Mt({idx:t,nonTerminalName:l,label:s?.LABEL,referencedRule:void 0});return o.definition.push(c),this.outputCst?$R:Ga}consumeInternalRecord(e,t,s){if(xa(t),!Yg(e)){const c=new Error(`<CONSUME${km(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const o=_r(this.recordingProdStack),l=new Fe({idx:t,terminalType:e,label:s?.LABEL});return o.definition.push(l),my}}function ds(r,e,t,s=!1){xa(t);const o=_r(this.recordingProdStack),l=Fn(e)?e:e.DEF,c=new r({definition:[],idx:t});return s&&(c.separator=e.SEP),se(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(c),l.call(this),o.definition.push(c),this.recordingProdStack.pop(),Ga}function DR(r,e){xa(e);const t=_r(this.recordingProdStack),s=Te(r)===!1,o=s===!1?r:r.DEF,l=new dn({definition:[],idx:e,ignoreAmbiguities:s&&r.IGNORE_AMBIGUITIES===!0});se(r,"MAX_LOOKAHEAD")&&(l.maxLookahead=r.MAX_LOOKAHEAD);const c=jg(o,f=>Fn(f.GATE));return l.hasPredicates=c,t.definition.push(l),ae(o,f=>{const h=new xt({definition:[]});l.definition.push(h),se(f,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=f.IGNORE_AMBIGUITIES:se(f,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),f.ALT.call(this),this.recordingProdStack.pop()}),Ga}function km(r){return r===0?"":`${r}`}function xa(r){if(r<0||r>Tm){const e=new Error(`Invalid DSL Method idx value: <${r}>
	Idx value must be a none negative value smaller than ${Tm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class BR{initPerformanceTracer(e){if(se(e,"traceInitPerf")){const t=e.traceInitPerf,s=typeof t=="number";this.traceInitMaxIdent=s?t:1/0,this.traceInitPerf=s?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=jn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:o,value:l}=$g(t),c=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${e}> time: ${o}ms`),this.traceInitIndent--,l}else return t()}}function zR(r,e){e.forEach(t=>{const s=t.prototype;Object.getOwnPropertyNames(s).forEach(o=>{if(o==="constructor")return;const l=Object.getOwnPropertyDescriptor(s,o);l&&(l.get||l.set)?Object.defineProperty(r.prototype,o,l):r.prototype[o]=t.prototype[o]})})}const Aa=ef(Lr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Aa);const jn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:qg,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),wa=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ht;(function(r){r[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",r[r.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));class js{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Ug(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,o=>{const c=this[o].originalGrammarAction;let f;this.TRACE_INIT(`${o} Rule`,()=>{f=this.topLevelRuleRecord(o,c)}),this.gastProductionsCache[o]=f})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=fR({rules:qe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ne(s)&&this.skipValidations===!1){const o=dR({rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),errMsgProvider:Nr,grammarName:t}),l=q1({lookaheadStrategy:this.lookaheadStrategy,rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(o,l)}}),Ne(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const o=zC(qe(this.gastProductionsCache));this.resyncFollows=o}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var o,l;(l=(o=this.lookaheadStrategy).initialize)===null||l===void 0||l.call(o,{rules:qe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(qe(this.gastProductionsCache))})),!js.DEFER_DEFINITION_ERRORS_HANDLING&&!Ne(this.definitionErrors))throw e=ee(this.definitionErrors,o=>o.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(t),s.initLexerAdapter(),s.initLooksAhead(t),s.initRecognizerEngine(e,t),s.initRecoverable(t),s.initTreeBuilder(t),s.initContentAssist(),s.initGastRecorder(t),s.initPerformanceTracer(t),se(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=se(t,"skipValidations")?t.skipValidations:jn.skipValidations}}js.DEFER_DEFINITION_ERRORS_HANDLING=!1;zR(js,[yR,TR,PR,LR,MR,bR,jR,FR,UR,BR]);class VR extends js{constructor(e,t=jn){const s=st(t);s.outputCst=!0,super(e,s)}}const WR=pe({name:"WhiteSpace",pattern:/[ \t\r\n]+/,group:dt.SKIPPED}),GR=pe({name:"LineComment",pattern:/#[^\n\r]*/,group:dt.SKIPPED}),Sc=pe({name:"TextBlock",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),gy=pe({name:"PathReference",pattern:/@[a-zA-Z_][a-zA-Z0-9_-]*\/[a-zA-Z0-9_/-]*(?:@\d+\.\d+\.\d+)?/}),yy=pe({name:"RelativePath",pattern:/\.\/[a-zA-Z0-9_/-]+|\.\.\/[a-zA-Z0-9_/-]+/}),je=pe({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),vy=pe({name:"Meta",pattern:/meta/,longer_alt:je}),Ey=pe({name:"Inherit",pattern:/inherit/,longer_alt:je}),Sy=pe({name:"Use",pattern:/use/,longer_alt:je}),Ty=pe({name:"As",pattern:/as/,longer_alt:je}),ky=pe({name:"Extend",pattern:/extend/,longer_alt:je}),xy=pe({name:"True",pattern:/true/,longer_alt:je}),Ay=pe({name:"False",pattern:/false/,longer_alt:je}),wy=pe({name:"Null",pattern:/null/,longer_alt:je}),Cy=pe({name:"Range",pattern:/range/,longer_alt:je}),Ry=pe({name:"Enum",pattern:/enum/,longer_alt:je}),Tc=pe({name:"StringType",pattern:/string/,longer_alt:je}),kc=pe({name:"NumberType",pattern:/number/,longer_alt:je}),xc=pe({name:"BooleanType",pattern:/boolean/,longer_alt:je}),Ny=pe({name:"TemplateOpen",pattern:/\{\{/}),Iy=pe({name:"TemplateClose",pattern:/\}\}/}),ui=pe({name:"At",pattern:/@/}),ci=pe({name:"LBrace",pattern:/\{/}),fi=pe({name:"RBrace",pattern:/\}/}),Oy=pe({name:"LBracket",pattern:/\[/}),_y=pe({name:"RBracket",pattern:/\]/}),ua=pe({name:"LParen",pattern:/\(/}),ca=pe({name:"RParen",pattern:/\)/}),fa=pe({name:"Colon",pattern:/:/}),di=pe({name:"Comma",pattern:/,/}),Ac=pe({name:"Equals",pattern:/=/}),wc=pe({name:"Question",pattern:/\?/}),Py=pe({name:"DotDot",pattern:/\.\./}),Ly=pe({name:"Dot",pattern:/\./}),by=pe({name:"Dash",pattern:/-(?!\d)/}),hi=pe({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),da=pe({name:"NumberLiteral",pattern:/-?\d+(?:\.\d+)?/}),My=[WR,GR,Sc,gy,yy,Ny,Iy,Py,vy,Ey,Sy,Ty,ky,xy,Ay,wy,Cy,Ry,Tc,kc,xc,ui,ci,fi,Oy,_y,ua,ca,fa,di,Ac,wc,Ly,by,hi,da,je],HR=new dt(My,{ensureOptimizations:!0,positionTracking:"full"});class KR extends VR{constructor(){super(My,{recoveryEnabled:!0,maxLookahead:3,nodeLocationTracking:"full"}),this.performSelfAnalysis()}program=this.RULE("program",()=>{this.OPTION(()=>this.SUBRULE(this.metaBlock)),this.OPTION2(()=>this.SUBRULE(this.inheritDecl)),this.MANY(()=>this.SUBRULE(this.useDecl)),this.MANY2(()=>this.OR([{ALT:()=>this.SUBRULE(this.extendBlock)},{ALT:()=>this.SUBRULE(this.block)}]))});metaBlock=this.RULE("metaBlock",()=>{this.CONSUME(ui),this.CONSUME(vy),this.CONSUME(ci),this.MANY(()=>this.SUBRULE(this.field)),this.CONSUME(fi)});inheritDecl=this.RULE("inheritDecl",()=>{this.CONSUME(ui),this.CONSUME(Ey),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList))});useDecl=this.RULE("useDecl",()=>{this.CONSUME(ui),this.CONSUME(Sy),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList)),this.OPTION2(()=>{this.CONSUME(Ty),this.CONSUME(je)})});block=this.RULE("block",()=>{this.CONSUME(ui),this.CONSUME(je),this.CONSUME(ci),this.SUBRULE(this.blockContent),this.CONSUME(fi)});extendBlock=this.RULE("extendBlock",()=>{this.CONSUME(ui),this.CONSUME(ky),this.SUBRULE(this.dotPath),this.CONSUME(ci),this.SUBRULE(this.blockContent),this.CONSUME(fi)});blockContent=this.RULE("blockContent",()=>{this.MANY(()=>this.OR([{ALT:()=>this.CONSUME(Sc)},{ALT:()=>this.SUBRULE(this.restrictionItem)},{ALT:()=>this.SUBRULE(this.field)}]))});restrictionItem=this.RULE("restrictionItem",()=>{this.CONSUME(by),this.CONSUME(hi)});field=this.RULE("field",()=>{this.OR([{ALT:()=>this.CONSUME(je)},{ALT:()=>this.CONSUME(hi)},{ALT:()=>this.CONSUME(Tc)},{ALT:()=>this.CONSUME(kc)},{ALT:()=>this.CONSUME(xc)}]),this.OPTION(()=>this.CONSUME(wc)),this.CONSUME(fa),this.SUBRULE(this.value),this.OPTION2(()=>{this.CONSUME(Ac),this.SUBRULE2(this.value)})});value=this.RULE("value",()=>{this.OR([{ALT:()=>this.CONSUME(hi)},{ALT:()=>this.CONSUME(da)},{ALT:()=>this.CONSUME(xy)},{ALT:()=>this.CONSUME(Ay)},{ALT:()=>this.CONSUME(wy)},{ALT:()=>this.CONSUME(Sc)},{ALT:()=>this.SUBRULE(this.array)},{ALT:()=>this.SUBRULE(this.paramDefList),GATE:()=>this.isParamDefListAhead()},{ALT:()=>this.SUBRULE(this.object)},{ALT:()=>this.SUBRULE(this.typeExpr)},{ALT:()=>this.SUBRULE(this.templateExpr)},{ALT:()=>this.CONSUME(je)}])});isParamDefListAhead(){const e=this.LA(1);if(!e||e.tokenType?.name!=="LBrace")return!1;const t=this.LA(2);if(!t||t.tokenType?.name!=="Identifier")return!1;const s=this.LA(3);if(!s)return!1;if(s.tokenType?.name==="Colon"){const o=this.LA(4);return o?["StringType","NumberType","BooleanType","Enum"].includes(o.tokenType?.name??""):!1}if(s.tokenType?.name==="Question"){const o=this.LA(4);if(!o||o.tokenType?.name!=="Colon")return!1;const l=this.LA(5);return l?["StringType","NumberType","BooleanType","Enum"].includes(l.tokenType?.name??""):!1}return!1}array=this.RULE("array",()=>{this.CONSUME(Oy),this.OPTION(()=>{this.SUBRULE(this.value),this.MANY(()=>{this.CONSUME(di),this.OPTION2(()=>this.SUBRULE2(this.value))})}),this.CONSUME(_y)});object=this.RULE("object",()=>{this.CONSUME(ci),this.MANY(()=>{this.SUBRULE(this.field),this.OPTION(()=>this.CONSUME(di))}),this.CONSUME(fi)});typeExpr=this.RULE("typeExpr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.rangeType)},{ALT:()=>this.SUBRULE(this.enumType)}])});rangeType=this.RULE("rangeType",()=>{this.CONSUME(Cy),this.CONSUME(ua),this.CONSUME(da),this.CONSUME(Py),this.CONSUME2(da),this.CONSUME(ca)});enumType=this.RULE("enumType",()=>{this.CONSUME(Ry),this.CONSUME(ua),this.CONSUME(hi),this.MANY(()=>{this.CONSUME(di),this.CONSUME2(hi)}),this.CONSUME(ca)});pathRef=this.RULE("pathRef",()=>{this.OR([{ALT:()=>this.CONSUME(gy)},{ALT:()=>this.CONSUME(yy)}])});dotPath=this.RULE("dotPath",()=>{this.CONSUME(je),this.MANY(()=>{this.CONSUME(Ly),this.CONSUME2(je)})});paramCallList=this.RULE("paramCallList",()=>{this.CONSUME(ua),this.OPTION(()=>{this.SUBRULE(this.paramArg),this.MANY(()=>{this.CONSUME(di),this.SUBRULE2(this.paramArg)})}),this.CONSUME(ca)});paramArg=this.RULE("paramArg",()=>{this.CONSUME(je),this.CONSUME(fa),this.SUBRULE(this.value)});paramDefList=this.RULE("paramDefList",()=>{this.CONSUME(ci),this.MANY(()=>{this.SUBRULE(this.paramDef),this.OPTION(()=>this.CONSUME(di))}),this.CONSUME(fi)});paramDef=this.RULE("paramDef",()=>{this.CONSUME(je),this.OPTION(()=>this.CONSUME(wc)),this.CONSUME(fa),this.SUBRULE(this.paramType),this.OPTION2(()=>{this.CONSUME(Ac),this.SUBRULE(this.value)})});paramType=this.RULE("paramType",()=>{this.OR([{ALT:()=>this.CONSUME(Tc)},{ALT:()=>this.CONSUME(kc)},{ALT:()=>this.CONSUME(xc)},{ALT:()=>this.SUBRULE(this.enumType)}])});templateExpr=this.RULE("templateExpr",()=>{this.CONSUME(Ny),this.CONSUME(je),this.CONSUME(Iy)})}const ha=new KR;var YR={};const XR=ha.getBaseCstVisitorConstructor(),xm=r=>YR[r];class qR extends XR{filename="<unknown>";interpolateEnv=!1;envProvider=xm;constructor(){super(),this.validateVisitor()}setFilename(e){this.filename=e}setInterpolateEnv(e){this.interpolateEnv=e}setEnvProvider(e){this.envProvider=e}resetEnvProvider(){this.envProvider=xm}loc(e){return{file:this.filename,line:e.startLine,column:e.startColumn,offset:e.startOffset}}program(e,t="<unknown>"){this.filename=t;const s={type:"Program",uses:[],blocks:[],extends:[],loc:{file:this.filename,line:1,column:1}};return e.metaBlock&&(s.meta=this.visit(e.metaBlock[0])),e.inheritDecl&&(s.inherit=this.visit(e.inheritDecl[0])),e.useDecl&&(s.uses=e.useDecl.map(o=>this.visit(o))),e.block&&(s.blocks=e.block.map(o=>this.visit(o))),e.extendBlock&&(s.extends=e.extendBlock.map(o=>this.visit(o))),s}metaBlock(e){const t={};let s;if(e.field)for(const l of e.field){const{name:c,value:f,isParamsDef:h,paramsDefs:m}=this.visit(l);h&&m?s=m:t[c]=f}const o={type:"MetaBlock",fields:t,loc:this.loc(e.At[0])};return s&&(o.params=s),o}inheritDecl(e){const t={type:"InheritDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),t}useDecl(e){const t={type:"UseDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),e.Identifier&&(t.alias=e.Identifier[0].image),t}block(e){const t=e.Identifier[0].image,s=this.visit(e.blockContent[0]);return{type:"Block",name:t,content:s,loc:this.loc(e.At[0])}}extendBlock(e){const t=this.visit(e.dotPath[0]),s=this.visit(e.blockContent[0]);return{type:"ExtendBlock",targetPath:t,content:s,loc:this.loc(e.At[0])}}blockContent(e){const t=e.TextBlock?.length>0,s=e.field?.length>0;if(e.restrictionItem?.length>0)return this.buildRestrictionContent(e);const l=t?this.buildTextContent(e.TextBlock[0]):void 0,c=s?this.buildProperties(e.field):{};return this.resolveBlockContent(l,c,t,s)}buildRestrictionContent(e){const t=[];for(const s of e.restrictionItem)t.push(this.visit(s));return{type:"ObjectContent",properties:{items:t},loc:{file:this.filename,line:1,column:1}}}buildTextContent(e){let s=e.image.slice(3,-3).trim();return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),{type:"TextContent",value:s,loc:this.loc(e)}}buildProperties(e){const t={};for(const s of e){const{name:o,value:l}=this.visit(s);t[o]=l}return t}resolveBlockContent(e,t,s,o){return s&&!o?e:!s&&o?{type:"ObjectContent",properties:t,loc:{file:this.filename,line:1,column:1}}:s&&o?{type:"MixedContent",text:e,properties:t,loc:{file:this.filename,line:1,column:1}}:{type:"ObjectContent",properties:{},loc:{file:this.filename,line:1,column:1}}}restrictionItem(e){const t=e.StringLiteral[0];return this.parseStringLiteral(t.image)}field(e){let t;if(e.Identifier)t=e.Identifier[0].image;else if(e.StringLiteral)t=this.parseStringLiteral(e.StringLiteral[0].image);else if(e.StringType)t="string";else if(e.NumberType)t="number";else if(e.BooleanType)t="boolean";else throw new Error("Unknown field key type");const s=e.Question?!0:void 0,o=e.value,l=this.visit(o[0]),c=o.length>1?this.visit(o[1]):void 0;return t==="params"&&Array.isArray(l)&&l.length>0&&l[0]?.type==="ParamDefinition"?{name:t,value:{},isParamsDef:!0,paramsDefs:l}:{name:t,value:l,optional:s,defaultValue:c}}value(e){if(e.StringLiteral)return this.parseStringLiteral(e.StringLiteral[0].image);if(e.NumberLiteral)return parseFloat(e.NumberLiteral[0].image);if(e.True)return!0;if(e.False)return!1;if(e.Null)return null;if(e.TextBlock){const t=e.TextBlock[0];let o=t.image.slice(3,-3).trim();return this.interpolateEnv&&(o=this.interpolateEnvVars(o)),{type:"TextContent",value:o,loc:this.loc(t)}}if(e.array)return this.visit(e.array[0]);if(e.paramDefList)return this.visit(e.paramDefList[0]);if(e.object)return this.visit(e.object[0]);if(e.typeExpr)return this.visit(e.typeExpr[0]);if(e.templateExpr)return this.visit(e.templateExpr[0]);if(e.Identifier)return e.Identifier[0].image;throw new Error("Unknown value type")}array(e){return e.value?e.value.map(t=>this.visit(t)):[]}object(e){const t={};if(e.field)for(const s of e.field){const{name:o,value:l}=this.visit(s);t[o]=l}return t}typeExpr(e){return e.rangeType?this.visit(e.rangeType[0]):this.visit(e.enumType[0])}rangeType(e){const[t,s]=e.NumberLiteral,o=parseFloat(t.image),l=parseFloat(s.image);return{type:"TypeExpression",kind:"range",constraints:{min:o,max:l},loc:this.loc(e.Range[0])}}enumType(e){return{type:"TypeExpression",kind:"enum",constraints:{options:e.StringLiteral.map(s=>this.parseStringLiteral(s.image))},loc:this.loc(e.Enum[0])}}pathRef(e){return e.PathReference?this.parsePathReference(e.PathReference[0]):this.parseRelativePath(e.RelativePath[0])}dotPath(e){return e.Identifier.map(t=>t.image).join(".")}paramCallList(e){return e.paramArg?e.paramArg.map(t=>this.visit(t)):[]}paramArg(e){return{type:"ParamArgument",name:e.Identifier[0].image,value:this.visit(e.value[0]),loc:this.loc(e.Identifier[0])}}paramDefList(e){return e.paramDef?e.paramDef.map(t=>this.visit(t)):[]}paramDef(e){const t=e.Identifier[0].image,s=e.Question!==void 0,o=this.visit(e.paramType[0]),l=e.value?this.visit(e.value[0]):void 0;return{type:"ParamDefinition",name:t,paramType:o,optional:s||l!==void 0,defaultValue:l,loc:this.loc(e.Identifier[0])}}paramType(e){if(e.StringType)return{kind:"string"};if(e.NumberType)return{kind:"number"};if(e.BooleanType)return{kind:"boolean"};if(e.enumType)return{kind:"enum",options:this.visit(e.enumType[0]).constraints?.options??[]};throw new Error("Unknown param type")}templateExpr(e){return{type:"TemplateExpression",name:e.Identifier[0].image,loc:this.loc(e.TemplateOpen[0])}}parseStringLiteral(e){let s=e.slice(1,-1).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),s}interpolateEnvVars(e){const t=/\$\{([A-Za-z_]\w*)(?::-([^}]*))?\}/g;return e.replace(t,(s,o,l)=>{const c=this.envProvider(o);return c!==void 0?c:l!==void 0?l:(console.warn(`Warning: Environment variable '${o}' is not set, using empty string`),"")})}parsePathReference(e){const t=e.image,s=t.slice(1);let o,l=s;const c=s.match(/@(\d+\.\d+\.\d+)$/);c&&(o=c[1],l=s.slice(0,-c[0].length));const f=l.split("/"),h=f[0];return{type:"PathReference",raw:t,namespace:h,segments:f.slice(1),version:o,isRelative:!1,loc:this.loc(e)}}parseRelativePath(e){const t=e.image,s=t.split("/").filter(o=>o!=="."&&o!=="..");return{type:"PathReference",raw:t,segments:s,isRelative:!0,loc:this.loc(e)}}}const ta=new qR,jy={name:"xml",description:"XML-style tags for section structure",section:{start:"<{{name}}>",end:"</{{name}}>",nameTransform:"kebab-case",indent:"  "},subsection:{start:"  <{{name}}>",end:"  </{{name}}>",nameTransform:"kebab-case",indent:"  "},listStyle:"dash",codeBlockDelimiter:"```"},QR={name:"markdown",description:"Markdown headers for section structure",section:{start:"## {{name}}",end:"",nameTransform:"none",indent:""},subsection:{start:"### {{name}}",end:"",nameTransform:"none",indent:""},listStyle:"dash",codeBlockDelimiter:"```"},sf={xml:jy,markdown:QR};function ZR(r){return r in sf}const Fy={proseWrap:"preserve",tabWidth:2,printWidth:80};var hr=(r=>(r.PARSE_ERROR="PS1000",r.UNEXPECTED_TOKEN="PS1001",r.UNTERMINATED_STRING="PS1002",r.INVALID_PATH="PS1003",r.RESOLVE_ERROR="PS2000",r.FILE_NOT_FOUND="PS2001",r.CIRCULAR_DEPENDENCY="PS2002",r.INVALID_INHERIT="PS2003",r.GIT_CLONE_ERROR="PS2004",r.GIT_AUTH_ERROR="PS2005",r.GIT_REF_NOT_FOUND="PS2006",r.MISSING_PARAM="PS2010",r.UNKNOWN_PARAM="PS2011",r.PARAM_TYPE_MISMATCH="PS2012",r.UNDEFINED_VARIABLE="PS2013",r.VALIDATION_ERROR="PS3000",r.REQUIRED_FIELD="PS3001",r.INVALID_VALUE="PS3002",r.BLOCKED_PATTERN="PS3003",r.MISSING_GUARD="PS3004",r))(hr||{});class ki extends Error{code;location;cause;constructor(e,t,s){super(e),this.name="PSError",this.code=t,this.location=s?.location,this.cause=s?.cause,Error.captureStackTrace?.(this,this.constructor)}format(){let e=`${this.name} [${this.code}]: ${this.message}`;return this.location&&(e+=`
  at ${this.location.file}:${this.location.line}:${this.location.column}`),e}toJSON(){return{name:this.name,code:this.code,message:this.message,location:this.location}}}class rc extends ki{constructor(e,t,s=hr.PARSE_ERROR){super(e,s,{location:t}),this.name="ParseError"}}class sr extends ki{constructor(e,t,s=hr.RESOLVE_ERROR){super(e,s,{location:t}),this.name="ResolveError"}}class ic extends sr{chain;constructor(e){super(`Circular dependency detected: ${e.join("  ")}`,void 0,hr.CIRCULAR_DEPENDENCY),this.name="CircularDependencyError",this.chain=e}}class JR extends ki{paramName;templatePath;constructor(e,t,s){super(`Missing required parameter '${e}' for template '${t}'`,hr.MISSING_PARAM,s),this.name="MissingParamError",this.paramName=e,this.templatePath=t}}class Am extends ki{paramName;templatePath;availableParams;constructor(e,t,s,o){const l=s.length>0?`. Available parameters: ${s.join(", ")}`:". This template has no parameters.";super(`Unknown parameter '${e}' for template '${t}'${l}`,hr.UNKNOWN_PARAM,o),this.name="UnknownParamError",this.paramName=e,this.templatePath=t,this.availableParams=s}}class na extends ki{paramName;expectedType;actualType;constructor(e,t,s,o){super(`Type mismatch for parameter '${e}': expected ${t}, got ${s}`,hr.PARAM_TYPE_MISMATCH,o),this.name="ParamTypeMismatchError",this.paramName=e,this.expectedType=t,this.actualType=s}}class $y extends ki{variableName;sourceFile;constructor(e,t,s){super(`Undefined template variable '{{${e}}}' in '${t}'`,hr.UNDEFINED_VARIABLE,s),this.name="UndefinedVariableError",this.variableName=e,this.sourceFile=t}}const eN={arrayStrategy:"unique",textStrategy:"concat",textSeparator:`

`};function or(r,e,t={}){const s={...eN,...t},o={...r};for(const l of Object.keys(e)){const c=e[l];c!==void 0&&(o[l]=tN(r[l],c,s))}return o}function tN(r,e,t){return e===null?null:Array.isArray(e)?nN(Array.isArray(r)?r:[],e,t.arrayStrategy):ks(e)?iN(ks(r)?r:void 0,e,t):wm(e)&&wm(r)?or(r,e,t):e}function nN(r,e,t){switch(t){case"replace":return[...e];case"concat":return[...r,...e];case"unique":return rN([...r,...e])}}function rN(r){const e=new Set,t=[];for(const s of r){const o=typeof s=="object"?JSON.stringify(s):String(s);e.has(o)||(e.add(o),t.push(s))}return t}function iN(r,e,t){if(!r)return e;switch(t.textStrategy){case"replace":return e;case"concat":return{...e,value:`${r.value}${t.textSeparator}${e.value}`};case"prepend":return{...e,value:`${e.value}${t.textSeparator}${r.value}`}}}function ks(r){return typeof r=="object"&&r!==null&&"type"in r&&r.type==="TextContent"}function wm(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.getPrototypeOf(r)===Object.prototype}function It(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(It);const e={};for(const[t,s]of Object.entries(r))e[t]=It(s);return e}var sc,Cm;function sN(){if(Cm)return sc;Cm=1;function r(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function e(o,l){for(var c="",f=0,h=-1,m=0,g,y=0;y<=o.length;++y){if(y<o.length)g=o.charCodeAt(y);else{if(g===47)break;g=47}if(g===47){if(!(h===y-1||m===1))if(h!==y-1&&m===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var E=c.lastIndexOf("/");if(E!==c.length-1){E===-1?(c="",f=0):(c=c.slice(0,E),f=c.length-1-c.lastIndexOf("/")),h=y,m=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=y,m=0;continue}}l&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+o.slice(h+1,y):c=o.slice(h+1,y),f=y-h-1;h=y,m=0}else g===46&&m!==-1?++m:m=-1}return c}function t(o,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+o+f:f}var s={resolve:function(){for(var l="",c=!1,f,h=arguments.length-1;h>=-1&&!c;h--){var m;h>=0?m=arguments[h]:(f===void 0&&(f=process.cwd()),m=f),r(m),m.length!==0&&(l=m+"/"+l,c=m.charCodeAt(0)===47)}return l=e(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(l){if(r(l),l.length===0)return".";var c=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return l=e(l,!c),l.length===0&&!c&&(l="."),l.length>0&&f&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var f=arguments[c];r(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":s.normalize(l)},relative:function(l,c){if(r(l),r(c),l===c||(l=s.resolve(l),c=s.resolve(c),l===c))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var h=l.length,m=h-f,g=1;g<c.length&&c.charCodeAt(g)===47;++g);for(var y=c.length,E=y-g,k=m<E?m:E,C=-1,N=0;N<=k;++N){if(N===k){if(E>k){if(c.charCodeAt(g+N)===47)return c.slice(g+N+1);if(N===0)return c.slice(g+N)}else m>k&&(l.charCodeAt(f+N)===47?C=N:N===0&&(C=0));break}var F=l.charCodeAt(f+N),M=c.charCodeAt(g+N);if(F!==M)break;F===47&&(C=N)}var _="";for(N=f+C+1;N<=h;++N)(N===h||l.charCodeAt(N)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(g+C):(g+=C,c.charCodeAt(g)===47&&++g,c.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var c=l.charCodeAt(0),f=c===47,h=-1,m=!0,g=l.length-1;g>=1;--g)if(c=l.charCodeAt(g),c===47){if(!m){h=g;break}}else m=!1;return h===-1?f?"/":".":f&&h===1?"//":l.slice(0,h)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');r(l);var f=0,h=-1,m=!0,g;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var y=c.length-1,E=-1;for(g=l.length-1;g>=0;--g){var k=l.charCodeAt(g);if(k===47){if(!m){f=g+1;break}}else E===-1&&(m=!1,E=g+1),y>=0&&(k===c.charCodeAt(y)?--y===-1&&(h=g):(y=-1,h=E))}return f===h?h=E:h===-1&&(h=l.length),l.slice(f,h)}else{for(g=l.length-1;g>=0;--g)if(l.charCodeAt(g)===47){if(!m){f=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":l.slice(f,h)}},extname:function(l){r(l);for(var c=-1,f=0,h=-1,m=!0,g=0,y=l.length-1;y>=0;--y){var E=l.charCodeAt(y);if(E===47){if(!m){f=y+1;break}continue}h===-1&&(m=!1,h=y+1),E===46?c===-1?c=y:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===f+1?"":l.slice(c,h)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return t("/",l)},parse:function(l){r(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var f=l.charCodeAt(0),h=f===47,m;h?(c.root="/",m=1):m=0;for(var g=-1,y=0,E=-1,k=!0,C=l.length-1,N=0;C>=m;--C){if(f=l.charCodeAt(C),f===47){if(!k){y=C+1;break}continue}E===-1&&(k=!1,E=C+1),f===46?g===-1?g=C:N!==1&&(N=1):g!==-1&&(N=-1)}return g===-1||E===-1||N===0||N===1&&g===E-1&&g===y+1?E!==-1&&(y===0&&h?c.base=c.name=l.slice(1,E):c.base=c.name=l.slice(y,E)):(y===0&&h?(c.name=l.slice(1,g),c.base=l.slice(1,E)):(c.name=l.slice(y,g),c.base=l.slice(y,E)),c.ext=l.slice(g,E)),y>0?c.dir=l.slice(0,y-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,sc=s,sc}sN();const of={verbose:()=>{},debug:()=>{}};function oN(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function aN(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template"}return"object"}function lN(r,e,t,s){const o=aN(e),l=oN(t);switch(t.kind){case"string":if(o!=="string")throw new na(r,l,o,{location:s});break;case"number":if(o!=="number")throw new na(r,l,o,{location:s});break;case"boolean":if(o!=="boolean")throw new na(r,l,o,{location:s});break;case"enum":if(o!=="string"||!t.options.includes(e))throw new na(r,l,String(e),{location:s});break}}function Rm(r,e,t,s){const o=new Map;if(!e||e.length===0){if(r&&r.length>0&&r[0]!==void 0)throw new Am(r[0].name,t,[],{location:s});return o}const l=new Map;for(const f of e)l.set(f.name,f);const c=new Set;if(r)for(const f of r){const h=l.get(f.name);if(!h)throw new Am(f.name,t,e.map(m=>m.name),{location:f.loc});lN(f.name,f.value,h.paramType,f.loc),o.set(f.name,f.value),c.add(f.name)}for(const f of e)if(!c.has(f.name)){if(f.defaultValue!==void 0)o.set(f.name,f.defaultValue);else if(!f.optional)throw new JR(f.name,t,{location:s})}return o}function uN(r){return r===null?"null":typeof r=="string"?r:typeof r=="number"||typeof r=="boolean"?String(r):Array.isArray(r)?JSON.stringify(r):typeof r=="object"&&"type"in r&&r.type==="TextContent"?r.value:JSON.stringify(r)}function Ca(r,e){const t=/\{\{([a-zA-Z_][a-zA-Z0-9_]*)\}\}/g;return r.replace(t,(s,o)=>{const l=e.params.get(o);if(l===void 0)throw new $y(o,e.sourceFile);return uN(l)})}function Ra(r,e){if(r===null||typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return Ca(r,e);if(Array.isArray(r))return r.map(t=>Ra(t,e));if(typeof r=="object"&&"type"in r){const t=r;if(t.type==="TemplateExpression"){const s=r,o=e.params.get(s.name);if(o===void 0)throw new $y(s.name,e.sourceFile,{location:s.loc});return o}if(t.type==="TextContent"){const s=r;return{...s,value:Ca(s.value,e)}}if(t.type==="TypeExpression")return r}if(typeof r=="object"){const t={};for(const[s,o]of Object.entries(r))t[s]=Ra(o,e);return t}return r}function Uy(r,e){switch(r.type){case"TextContent":return{...r,value:Ca(r.value,e)};case"ObjectContent":return{...r,properties:Cc(r.properties,e)};case"ArrayContent":return{...r,elements:r.elements.map(t=>Ra(t,e))};case"MixedContent":return{...r,text:r.text?{...r.text,value:Ca(r.text.value,e)}:void 0,properties:Cc(r.properties,e)}}}function Cc(r,e){const t={};for(const[s,o]of Object.entries(r))t[s]=Ra(o,e);return t}function cN(r,e){return{...r,content:Uy(r.content,e)}}function Nm(r,e){return e.params.size===0?r:{...r,meta:r.meta?{...r.meta,fields:Cc(r.meta.fields,e)}:void 0,blocks:r.blocks.map(t=>cN(t,e)),extends:r.extends.map(t=>({...t,content:Uy(t.content,e)}))}}function fN(r,e={}){const{filename:t="<unknown>",tolerant:s=!1,recovery:o=!1,interpolateEnv:l=!1,envProvider:c}=e,f=s||o,h=[],m=HR.tokenize(r);for(const y of m.errors)h.push(new rc(`Lexer: ${y.message}`,{file:t,line:y.line,column:y.column}));if(h.length>0&&!f)return{ast:null,errors:h};ha.input=m.tokens;const g=ha.program();for(const y of ha.errors)h.push(new rc(y.message,{file:t,line:y.token.startLine,column:y.token.startColumn}));if(h.length>0&&!f)return{ast:null,errors:h};try{return ta.setInterpolateEnv(l),c?ta.setEnvProvider(c):ta.resetEnvProvider(),{ast:ta.visit(g,t),errors:h}}catch(y){return h.push(new rc(`AST transformation: ${y.message}`,{file:t,line:1,column:1})),{ast:null,errors:h}}}const hs="__import__";class dN{fs;cache;resolving;cacheEnabled;logger;envVars;constructor(e){this.fs=e.fs,this.cache=new Map,this.resolving=new Set,this.cacheEnabled=e.cache!==!1,this.logger=e.logger??of,this.envVars=e.envVars}async resolve(e){const t=this.normalizePath(e);if(this.resolving.has(t))throw this.logger.debug(`Circular dependency detected: ${t}`),new ic([...this.resolving,t]);if(this.cacheEnabled&&this.cache.has(t))return this.logger.debug(`Cache hit: ${t}`),this.cache.get(t);this.resolving.add(t),this.logger.verbose(`Parsing ${t}`);try{const s=await this.doResolve(t);return this.cacheEnabled&&(this.logger.debug(`Cache store: ${t}`),this.cache.set(t,s)),s}finally{this.resolving.delete(t)}}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith(".prs")||(t=`${t}.prs`),t}resolveRef(e,t){if(e.isRelative){const s=this.dirname(t);return this.normalizePath(this.joinPath(s,e.raw))}if(e.raw.startsWith("@")){const s=e.raw.match(/^@([a-zA-Z_][a-zA-Z0-9_-]*)\/(.+?)(?:@[\d.]+)?$/);if(s&&s[1]&&s[2]){const o=s[1],l=s[2],c=l.endsWith(".prs")?l:`${l}.prs`;return`@${o}/${c}`}}return this.normalizePath(e.raw)}dirname(e){const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}joinPath(...e){const t=[];for(const s of e){if(!s)continue;const o=s.split("/");for(const l of o)l===".."?t.pop():l!=="."&&l!==""&&t.push(l)}return t.join("/")}async doResolve(e){const t=[e],s=[],o=this.loadAndParse(e,t,s);if(!o.ast)return{ast:null,sources:t,errors:s};let l=o.ast;return l=await this.resolveInherit(l,e,t,s),l=await this.resolveImports(l,e,t,s),l.extends.length>0&&this.logger.debug(`Applying ${l.extends.length} extension(s)`),l=this.applyExtends(l),this.logger.debug(`Resolved ${t.length} source file(s)`),{ast:l,sources:[...new Set(t)],errors:s}}loadAndParse(e,t,s){let o;try{o=this.fs.read(e)}catch{return s.push(new sr(`File not found: ${e}`)),{ast:null}}const l={filename:e};this.envVars&&Object.keys(this.envVars).length>0&&(l.interpolateEnv=!0,l.envProvider=f=>this.envVars?.[f]);const c=fN(o,l);if(!c.ast){for(const f of c.errors)s.push(new sr(f.message,f.location));return{ast:null}}for(const f of c.errors)s.push(new sr(f.message,f.location));return{ast:c.ast}}async resolveInherit(e,t,s,o){if(!e.inherit)return e;const l=this.resolveRef(e.inherit.path,t);this.logger.verbose(`Resolving inherit: ${e.inherit.path.raw}`),this.logger.verbose(`   ${l}`);try{const c=await this.resolve(l);if(s.push(...c.sources),o.push(...c.errors),c.ast){let f=c.ast;if(c.ast.meta?.params||e.inherit.params){this.logger.debug(`Binding template parameters for ${l}`);try{const h=Rm(e.inherit.params,c.ast.meta?.params,l,e.inherit.loc);if(h.size>0){const m={params:h,sourceFile:l};f=Nm(c.ast,m),this.logger.debug(`Interpolated ${h.size} parameter(s)`)}}catch(h){return o.push(new sr(h.message,e.inherit.loc)),e}}return this.logger.debug("Merging with parent AST"),this.resolveInheritance(f,e)}}catch(c){if(c instanceof ic)throw c;o.push(new sr(`Failed to resolve parent: ${c.message}`))}return e}async resolveImports(e,t,s,o){let l=e;for(const c of e.uses){const f=this.resolveRef(c.path,t);this.logger.verbose(`Resolving import: ${c.path.raw}`),this.logger.verbose(`   ${f}`);try{const h=await this.resolve(f);if(s.push(...h.sources),o.push(...h.errors),h.ast){let m=h.ast;if(h.ast.meta?.params||c.params){this.logger.debug(`Binding template parameters for ${f}`);try{const g=Rm(c.params,h.ast.meta?.params,f,c.loc);if(g.size>0){const y={params:g,sourceFile:f};m=Nm(h.ast,y),this.logger.debug(`Interpolated ${g.size} parameter(s)`)}}catch(g){o.push(new sr(g.message,c.loc));continue}}this.logger.debug(`Merging import${c.alias?` as "${c.alias}"`:""}`),l=this.resolveUses(l,c,m)}}catch(h){if(h instanceof ic)throw h;o.push(new sr(`Failed to resolve import: ${h.message}`))}}return l}clearCache(){this.cache.clear()}resolveInheritance(e,t){return{...t,meta:e.meta&&t.meta?{...t.meta,fields:or(e.meta.fields,t.meta.fields)}:t.meta??e.meta,blocks:this.mergeBlocks(e.blocks,t.blocks),inherit:void 0,uses:t.uses,extends:t.extends}}mergeBlocks(e,t){const s=new Map(t.map(c=>[c.name,c])),o=[],l=new Set;for(const c of e){const f=s.get(c.name);f?(o.push(this.mergeBlock(c,f)),l.add(c.name)):o.push(It(c))}for(const c of t)l.has(c.name)||o.push(It(c));return o}mergeBlock(e,t){return{...t,content:this.mergeBlockContent(e.content,t.content)}}mergeBlockContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return this.mergeTextContent(e,t);case"ObjectContent":return this.mergeObjectContent(e,t);case"ArrayContent":return this.mergeArrayContent(e,t);case"MixedContent":return this.mergeMixedContent(e,t)}return e.type==="MixedContent"&&t.type==="TextContent"?{...e,text:e.text?this.mergeTextContent(e.text,t):It(t)}:e.type==="TextContent"&&t.type==="MixedContent"?{...t,text:t.text?this.mergeTextContent(e,t.text):It(e)}:e.type==="MixedContent"&&t.type==="ObjectContent"?{...e,properties:or(e.properties,t.properties)}:e.type==="ObjectContent"&&t.type==="MixedContent"?{...t,properties:or(e.properties,t.properties)}:It(t)}mergeTextContent(e,t){const s=e.value.trim(),o=t.value.trim();return s===o?{...t,value:o}:o.includes(s)?{...t,value:o}:s.includes(o)?{...t,value:s}:{...t,value:`${s}

${o}`}}mergeObjectContent(e,t){return{...t,properties:this.mergeProperties(e.properties,t.properties)}}mergeProperties(e,t){const s={...e};for(const[o,l]of Object.entries(t)){const c=s[o];c===void 0?s[o]=this.deepCloneValue(l):Array.isArray(l)&&Array.isArray(c)?s[o]=this.uniqueConcat(c,l):ks(l)&&ks(c)?s[o]=this.deepCloneValue(l):this.isPlainObject(l)&&this.isPlainObject(c)?s[o]=this.mergeProperties(c,l):s[o]=this.deepCloneValue(l)}return s}mergeArrayContent(e,t){return{...t,elements:this.uniqueConcat(e.elements,t.elements)}}mergeMixedContent(e,t){return{...t,text:e.text&&t.text?this.mergeTextContent(e.text,t.text):t.text??e.text,properties:this.mergeProperties(e.properties,t.properties)}}resolveUses(e,t,s){const o=this.mergeBlocksForImport(e.blocks,s.blocks),l=[];if(t.alias){const c=t.alias,h={type:"Block",name:`${hs}${c}`,content:{type:"ObjectContent",properties:{__source:t.path.raw,__blocks:s.blocks.map(m=>m.name)},loc:t.loc},loc:t.loc};l.push(h);for(const m of s.blocks)l.push({...m,name:`${hs}${c}.${m.name}`})}return{...e,blocks:[...o,...l]}}mergeBlocksForImport(e,t){const s=new Map(e.map(c=>[c.name,c])),o=[],l=new Set;for(const c of e){const f=t.find(h=>h.name===c.name);f?(o.push(this.mergeBlock(f,c)),l.add(c.name)):o.push(It(c))}for(const c of t)!l.has(c.name)&&!s.has(c.name)&&o.push(It(c));return o}applyExtends(e){let t=[...e.blocks];for(const s of e.extends)t=this.applyExtend(t,s);return t=t.filter(s=>!s.name.startsWith(hs)),{...e,blocks:t,extends:[]}}applyExtend(e,t){const s=t.targetPath.split("."),o=s[0];let l=o,c=s.slice(1);e.find(y=>y.name===`${hs}${o}`)&&s.length>1&&(l=`${hs}${o}.${s[1]}`,c=s.slice(2));const h=e.findIndex(y=>y.name===l);if(h===-1)return e;const m=e[h];if(!m)return e;const g=this.mergeExtension(m,c,t);return[...e.slice(0,h),g,...e.slice(h+1)]}mergeExtension(e,t,s){return t.length===0?{...e,content:this.mergeExtendContent(e.content,s.content)}:{...e,content:this.mergeAtPath(e.content,t,s.content)}}mergeAtPath(e,t,s){if(t.length===0)return this.mergeExtendContent(e,s);const o=t[0];if(!o)return this.mergeExtendContent(e,s);const l=t.slice(1);if(e.type==="ObjectContent"){const c=e.properties[o];return l.length===0?{...e,properties:{...e.properties,[o]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[o]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[o]:this.buildPathValue(l,s)}}}if(e.type==="MixedContent"){const c=e.properties[o];return l.length===0?{...e,properties:{...e.properties,[o]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[o]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[o]:this.buildPathValue(l,s)}}}return e}mergeAtPathValue(e,t,s){if(t.length===0)return this.mergeExtendValue(e,s);if(typeof e!="object"||e===null||Array.isArray(e))return this.buildPathValue(t,s);const o=t[0];if(!o)return this.mergeExtendValue(e,s);const l=t.slice(1),c=e,f=c[o];return l.length===0?{...c,[o]:this.mergeExtendValue(f,s)}:f&&typeof f=="object"&&!Array.isArray(f)?{...c,[o]:this.mergeAtPathValue(f,l,s)}:{...c,[o]:this.buildPathValue(l,s)}}buildPathValue(e,t){if(e.length===0)return this.extractValue(t);const s={};let o=s;for(let c=0;c<e.length-1;c++){const f=e[c];if(f){const h={};o[f]=h,o=h}}const l=e[e.length-1];return l&&(o[l]=this.extractValue(t)),s}extractValue(e){switch(e.type){case"TextContent":return e.value;case"ObjectContent":return It(e.properties);case"ArrayContent":return It(e.elements);case"MixedContent":return It(e.properties)}}mergeExtendValue(e,t){return e===void 0?this.extractValue(t):Array.isArray(e)&&t.type==="ArrayContent"?this.uniqueConcat(e,t.elements):typeof e=="object"&&e!==null&&!Array.isArray(e)&&t.type==="ObjectContent"?or(e,t.properties):ks(e)&&t.type==="TextContent"?{...t,value:`${e.value}

${t.value}`}:this.extractValue(t)}mergeExtendContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return{...t,value:`${e.value}

${t.value}`};case"ObjectContent":return{...t,properties:or(e.properties,t.properties)};case"ArrayContent":return{...t,elements:this.uniqueConcat(e.elements,t.elements)};case"MixedContent":{const s=e,o=s.text&&t.text?{...t.text,value:`${s.text.value}

${t.text.value}`}:t.text??s.text;return{...t,text:o,properties:or(s.properties,t.properties)}}}if(e.type==="ObjectContent"&&t.type==="TextContent")return{type:"MixedContent",text:t,properties:e.properties,loc:t.loc};if(e.type==="TextContent"&&t.type==="ObjectContent")return{type:"MixedContent",text:e,properties:t.properties,loc:t.loc};if(e.type==="MixedContent"&&t.type==="TextContent"){const s=e;return{...s,text:s.text?{...t,value:`${s.text.value}

${t.value}`}:t}}if(e.type==="MixedContent"&&t.type==="ObjectContent"){const s=e;return{...s,properties:or(s.properties,t.properties)}}return It(t)}uniqueConcat(e,t){const s=new Set,o=[];for(const l of[...e,...t]){const c=typeof l=="object"&&l!==null?JSON.stringify(l):String(l);s.has(c)||(s.add(c),o.push(this.deepCloneValue(l)))}return o}isPlainObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}deepCloneValue(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>this.deepCloneValue(s));const t={};for(const[s,o]of Object.entries(e))t[s]=this.deepCloneValue(o);return t}}class Rc{convention;prettierOptions;constructor(e="xml"){let t,s;if(typeof e=="object"&&("convention"in e||"prettier"in e)){const o=e;t=o.convention??"xml",s=o.prettier}else t=e;if(typeof t=="string")if(ZR(t))this.convention=sf[t];else throw new Error(`Unknown convention: ${t}. Use a built-in convention ('xml', 'markdown') or provide a custom OutputConvention.`);else this.convention=t;this.prettierOptions={...Fy,...s}}getPrettierOptions(){return this.prettierOptions}getConvention(){return this.convention}renderSection(e,t,s=1){const o=s===1?this.convention.section:this.convention.subsection??this.convention.section,l=this.transformName(e,o.nameTransform),c=this.applyTemplate(o.start,{name:l,level:s}),f=o.end?this.applyTemplate(o.end,{name:l,level:s}):"";let h=t.trim();if(!h)return f?`${c}
${f}`:c;this.convention.name==="markdown"&&(h=this.escapeMarkdownSpecialChars(h));const m=this.indentContent(h,o,s);return f?`${c}
${m}
${f}`:this.convention.name==="markdown"?`${c}

${m}`:`${c}
${m}`}renderList(e){const t=this.getListMarker();return e.map(s=>`${t} ${s}`).join(`
`)}renderCodeBlock(e,t=""){const s=this.convention.codeBlockDelimiter??"```";return`${s}${t}
${e}
${s}`}wrapRoot(e){return this.convention.rootWrapper?`${this.convention.rootWrapper.start}
${e}
${this.convention.rootWrapper.end}`:e}getSectionSeparator(){return this.convention.name==="markdown",`

`}getListMarker(){switch(this.convention.listStyle){case"asterisk":return"*";case"bullet":return"";case"numbered":return"1.";default:return"-"}}transformName(e,t){switch(t){case"kebab-case":return this.toKebabCase(e);case"camelCase":return this.toCamelCase(e);case"PascalCase":return this.toPascalCase(e);default:return e}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}toCamelCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toLowerCase())}toPascalCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toUpperCase())}applyTemplate(e,t){let s=e;s=s.replace(/\{\{name\}\}/g,t.name),s=s.replace(/\{\{level\}\}/g,String(t.level));const l=/\{\{#repeat\s+(\w+)\}\}(.+?)\{\{\/repeat\}\}/.exec(s);if(l){const c=l[1],f=l[2],h=c==="level"?t.level:1,m=f.repeat(h);s=s.replace(l[0],m)}return s}escapeMarkdownSpecialChars(e){return e.split(`
`).map(t=>{let s=t.replace(/__/g,"\\_\\_");return s=this.escapeGlobAsteriskOutsideBackticks(s),s}).join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,o)=>o%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}indentContent(e,t,s){if(!(t.indent??""))return e;if(this.convention.name==="xml"){const c=" ".repeat(this.prettierOptions.tabWidth).repeat(s);return e.split(`
`).map(f=>f.trim()?`${c}${f}`:f).join(`
`)}return e}}new Rc(jy),new Rc(sf.markdown);const hN=["git","config","documentation","diagrams"],Im={typescript:"TypeScript",naming:"Naming Conventions",errors:"Error Handling",testing:"Testing",security:"Security",performance:"Performance",accessibility:"Accessibility",documentation:"Documentation"};function pN(r){return r in Im?Im[r]:r.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function mN(r){return r==="errors"?"error-handling":r}class gN{options;constructor(e={}){this.options={supportLegacyFormat:e.supportLegacyFormat??!0,supportObjectFormat:e.supportObjectFormat??!0}}extract(e){const t=this.getProps(e),s=new Map,o=this.extractGit(t),l=this.extractConfig(t),c=this.extractDocumentation(t),f=this.extractDiagrams(t);let h=!1;if(this.options.supportLegacyFormat){const m=t.code;if(m&&typeof m=="object"&&!Array.isArray(m)){const g=m;if("style"in g||"patterns"in g){const y=[];this.addArrayItems(y,g.style),this.addArrayItems(y,g.patterns),y.length>0&&(s.set("code",{key:"code",sectionName:"code",title:"Code Style",items:y,rawValue:m}),h=!0)}}}for(const[m,g]of Object.entries(t)){if(this.isNonCodeKey(m)||m==="code"&&h)continue;const y=this.extractEntry(m,g);y&&y.items.length>0&&s.set(m,y)}return{codeStandards:s,git:o,config:l,documentation:c,diagrams:f}}extractFromProgram(e){const t=e.blocks.find(s=>s.name==="standards"&&!s.name.startsWith("__"));return t?this.extract(t.content):null}extractEntry(e,t){const s=[];if(Array.isArray(t))for(const o of t){const l=this.valueToString(o);l&&s.push(l)}else this.options.supportObjectFormat&&t&&typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length===0?null:{key:e,sectionName:mN(e),title:pN(e),items:s,rawValue:t}}extractFromObject(e,t){for(const[s,o]of Object.entries(e)){if(o==null||o===!1)continue;if(o===!0){t.push(s);continue}const l=this.valueToString(o);l&&t.push(`${s}: ${l}`)}}extractGit(e){const t=e.git;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,o={};return s.format&&(o.format=this.valueToString(s.format)),Array.isArray(s.types)&&(o.types=s.types.map(l=>this.valueToString(l)).filter(Boolean)),s.example&&(o.example=this.valueToString(s.example)),Object.keys(o).length>0?o:void 0}extractConfig(e){const t=e.config;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,o={};for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);f&&(o[l]=f)}return Object.keys(o).length>0?o:void 0}extractDocumentation(e){const t=e.documentation;if(!t)return;const s=[];if(Array.isArray(t))for(const o of t){const l=this.valueToString(o);l&&s.push(l)}else typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length>0?{items:s,rawValue:t}:void 0}extractDiagrams(e){const t=e.diagrams;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t;let o,l;if(s.format?o=this.valueToString(s.format):s.tool&&(o=this.valueToString(s.tool)),Array.isArray(s.types)&&(l=s.types.map(c=>this.valueToString(c)).filter(Boolean)),o||l&&l.length>0)return{format:o,types:l,rawValue:t}}isNonCodeKey(e){return hN.includes(e)}addArrayItems(e,t){if(Array.isArray(t))for(const s of t){const o=this.valueToString(s);o&&e.push(o)}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}valueToString(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(t=>this.valueToString(t)).join(", ");if(typeof e=="object"&&"type"in e){if(e.type==="TextContent"&&typeof e.value=="string")return e.value.trim();if(e.type==="TypeExpression"&&"kind"in e){const t=e.kind,s="params"in e&&Array.isArray(e.params)?e.params:[];return s.length>0?`${t}(${s.map(o=>this.valueToString(o)).join(", ")})`:t}}if(typeof e=="object"){const t=Object.entries(e);if(t.length>0)return t.map(([s,o])=>`${s}: ${this.valueToString(o)}`).join(", ")}return""}}class Ha{standardsExtractor=new gN;createRenderer(e){const t=e?.convention??this.defaultConvention;return new Rc({convention:t,prettier:e?.prettier})}getPrettierOptions(e){return{...Fy,...e?.prettier}}getOutputPath(e){return e?.outputPath??this.outputPath}findBlock(e,t){return e.blocks.find(s=>s.name===t&&!s.name.startsWith("__"))}extractText(e){switch(e.type){case"TextContent":return e.value.trim();case"MixedContent":return e.text?.value.trim()??"";default:return""}}getProp(e,t){switch(e.type){case"ObjectContent":return e.properties[t];case"MixedContent":return e.properties[t];default:return}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}formatStandardsList(e){return Array.isArray(e)?e.map(t=>this.valueToString(t)).filter(t=>t.length>0):[]}formatArray(e){return e.map(String).join(", ")}truncate(e,t){return e.length>t?e.substring(0,t-3)+"...":e}getMetaField(e,t){const s=e.meta?.fields?.[t];if(typeof s=="string")return s;if(typeof s=="number")return String(s)}getArrayElements(e){return e.type==="ArrayContent"?e.elements:[]}valueToString(e){return e===null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(t=>this.valueToString(t)).join(", "):typeof e=="object"&&"type"in e&&e.type==="TextContent"&&typeof e.value=="string"?e.value.trim():""}extractSectionWithCodeBlock(e,t){const s=e.indexOf(t);if(s===-1)return null;const o=s+t.length,l=e.indexOf("```",o);if(l===-1)return null;const c=e.indexOf("```",l+3);if(c===-1)return null;const f=c+3;return e.substring(s,f)}normalizeMarkdownForPrettier(e){const t=e.split(`
`);let s=1/0,o=!1;for(const h of t){const m=h.trimEnd();if(m.trimStart().startsWith("```")){if(o=!o,m.length>0){const k=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,k)}continue}if(o||m.length===0)continue;const y=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,y)}s===1/0&&(s=0);const l=[];let c=!1,f=[];o=!1;for(const h of t){const m=h.trimEnd(),g=s>0?m.slice(s):m,y=m.trimStart().startsWith("```"),E=y&&!o;if(y&&(o=!o),o||g.startsWith("```")){if(E){const F=l.length>0?l[l.length-1]??"":"";F.trim()&&!F.startsWith("#")&&l.push("")}l.push(g);continue}let k=g;k=k.replace(/__([^_]+)__/g,"\\_\\_$1\\_\\_"),k=this.escapeGlobAsteriskOutsideBackticks(k);const C=l.length>0?l[l.length-1]:"",N=C?.trimStart().startsWith("#");if(N&&k.trim()&&l.push(""),k.trimStart().startsWith("|")&&k.trimEnd().endsWith("|"))c=!0,f.push(k.trim());else{c&&f.length>0&&(l.push(...this.formatMarkdownTable(f)),f=[],c=!1);const F=k.trimStart().startsWith("- "),M=/^\d+\.\s/.test(k.trimStart()),_=C?.trimStart()??"",P=_.startsWith("- ")||/^\d+\.\s/.test(_),b=C?.trimEnd().endsWith(":")??!1;((F||M)&&C&&!P&&!N||(F||M)&&b)&&l.push(""),l.push(k)}}return f.length>0&&l.push(...this.formatMarkdownTable(f)),l.join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,o)=>o%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}stripAllIndent(e){const t=e.split(`
`),s=[];let o=!1;for(const l of t){const c=l.trimEnd();if(c.trimStart().startsWith("```")){if(!o){const E=s.length>0?s[s.length-1]??"":"";E&&E.trim()&&s.push("")}o=!o,s.push(c.trimStart());continue}if(o){s.push(c);continue}let f=c.trimStart();f=f.replace(/__/g,"\\_\\_"),f=this.escapeGlobAsteriskOutsideBackticks(f);const h=s.length>0?s[s.length-1]??"":"",m=f.startsWith("- ")||/^\d+\.\s/.test(f),g=h.startsWith("- ")||/^\d+\.\s/.test(h),y=h.trimEnd().endsWith(":");(m&&h&&!g||m&&y)&&s.push(""),s.push(f)}return s.join(`
`)}formatMarkdownTable(e){if(e.length===0)return[];const t=e.map(l=>l.split("|").slice(1,-1).map(c=>c.trim())),s=t[0]?.length??0,o=new Array(s).fill(0);for(const l of t)for(let c=0;c<l.length;c++){const f=l[c]??"",h=f.match(/^-+$/)?3:f.length;o[c]=Math.max(o[c]??0,h)}return t.map(l=>"| "+l.map((f,h)=>{const m=o[h]??0;return f.match(/^-+$/)?"-".repeat(m):f.padEnd(m)}).join(" | ")+" |")}dedent(e){const t=e.split(`
`);if(t.length<=1)return e.trim();const s=t.slice(1).filter(l=>l.trim().length>0).reduce((l,c)=>{const h=c.match(/^(\s*)/)?.[1]?.length??0;return Math.min(l,h)},1/0);return s===0||s===1/0?e.trim():[(t[0]??"").trim(),...t.slice(1).map(l=>l.trim().length>0?l.slice(s):"")].join(`
`).trim()}}class Ir{static factories=new Map;static register(e,t){if(this.factories.has(e))throw new Error(`Formatter '${e}' is already registered`);this.factories.set(e,t)}static get(e){return this.factories.get(e)?.()}static getAll(){return Array.from(this.factories.values()).map(e=>e())}static list(){return Array.from(this.factories.keys())}static has(e){return this.factories.has(e)}static unregister(e){return this.factories.delete(e)}static clear(){this.factories.clear()}}const yN={simple:{name:"simple",description:"Single file output (.github/copilot-instructions.md)",outputPath:".github/copilot-instructions.md"},multifile:{name:"multifile",description:"Main + path-specific instructions (.github/instructions/) + prompts",outputPath:".github/copilot-instructions.md"},full:{name:"full",description:"Multifile + skills (.github/skills/) + agents (.github/agents/) + AGENTS.md",outputPath:".github/copilot-instructions.md"}},Om={Read:"read",NotebookRead:"read",Edit:"edit",MultiEdit:"edit",Write:"edit",NotebookEdit:"edit",Grep:"search",Glob:"search",Bash:"execute",WebFetch:"web",WebSearch:"web",Task:"agent",TodoWrite:"todo",TodoRead:"todo"},vN={sonnet:"Claude Sonnet 4.5",opus:"Claude Opus 4.5",haiku:"Claude Haiku 4.5","sonnet-4":"Claude Sonnet 4","sonnet-4.5":"Claude Sonnet 4.5","opus-4":"Claude Opus 4","opus-4.5":"Claude Opus 4.5","haiku-4":"Claude Haiku 4","haiku-4.5":"Claude Haiku 4.5","gpt-4o":"GPT-4o","gpt-4.1":"GPT-4.1","gpt-5":"GPT-5","gpt-5-mini":"GPT-5 mini",inherit:"",auto:"Auto"};class EN extends Ha{name="github";outputPath=".github/copilot-instructions.md";description="GitHub Copilot instructions (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return yN}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),o=[];return s.getConvention().name==="markdown"&&o.push(this.header(e)),this.addCommonSections(e,s,o),{path:this.getOutputPath(t),content:o.join(`

`)+`
`}}formatMultifile(e,t){const s=this.createRenderer(t),o=[],l=this.extractInstructions(e);for(const h of l)o.push(this.generateInstructionFile(h));const c=this.extractPrompts(e);for(const h of c)o.push(this.generatePromptFile(h));const f=[];return s.getConvention().name==="markdown"&&f.push(this.header(e)),this.addCommonSections(e,s,f),{path:this.getOutputPath(t),content:f.join(`

`)+`
`,additionalFiles:o.length>0?o:void 0}}formatFull(e,t){const s=this.createRenderer(t),o=[],l=this.extractInstructions(e);for(const y of l)o.push(this.generateInstructionFile(y));const c=this.extractPrompts(e);for(const y of c)o.push(this.generatePromptFile(y));const f=this.extractSkills(e);for(const y of f)o.push(this.generateSkillFile(y));const h=this.extractCustomAgents(e);for(const y of h)o.push(this.generateCustomAgentFile(y));const m=this.generateAgentsFile(e);m&&o.push(m);const g=[];return s.getConvention().name==="markdown"&&g.push(this.header(e)),this.addCommonSections(e,s,g),{path:this.getOutputPath(t),content:g.join(`

`)+`
`,additionalFiles:o.length>0?o:void 0}}extractInstructions(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],o=this.getProps(t.content),l=o.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"typescript",applyTo:c,description:"TypeScript-specific coding rules",content:this.getTypeScriptInstructionContent(e)}),f.length>0&&s.push({name:"testing",applyTo:f,description:"Testing-specific rules and patterns",content:this.getTestingInstructionContent(e)})}for(const[c,f]of Object.entries(o))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.applyTo,g=h.excludeAgent,y=h.description,E=h.content;m&&Array.isArray(m)&&s.push({name:c,applyTo:m.map(k=>this.valueToString(k)),excludeAgent:g?this.valueToString(g):void 0,description:y?this.valueToString(y):`${c} rules`,content:E?this.valueToString(E):""})}return s}generateInstructionFile(e){const t=[];t.push("---"),t.push("applyTo:");for(const s of e.applyTo)t.push(`  - "${s}"`);if(e.excludeAgent&&t.push(`excludeAgent: "${e.excludeAgent}"`),t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.github/instructions/${e.name}.instructions.md`,content:t.join(`
`)}}getTypeScriptInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&o.push("- Use strict TypeScript, avoid `any` types"),f.useUnknown&&o.push(`- Use \`unknown\` ${this.valueToString(f.useUnknown)}`),f.exports&&o.push(`- ${this.capitalize(this.valueToString(f.exports))}`),f.returnTypes&&o.push(`- Explicit return types ${this.valueToString(f.returnTypes)}`)}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&o.push(`- Files: \`${this.valueToString(f.files)}\``),f.classes&&o.push(`- Classes/Interfaces: \`${this.valueToString(f.classes)}\``),f.functions&&o.push(`- Functions/Variables: \`${this.valueToString(f.functions)}\``)}return o.join(`
`)}getTestingInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.filePattern&&o.push(`- Test files: \`${this.valueToString(c.filePattern)}\``),c.pattern&&o.push(`- Follow ${this.valueToString(c.pattern)} pattern`),c.coverage&&o.push(`- Target >${this.valueToString(c.coverage)}% coverage for libraries`),c.fixtures&&o.push(`- Use fixtures ${this.valueToString(c.fixtures)}`)}return o.length>0?o.join(`
`):"Follow project testing conventions."}extractPrompts(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;(f.prompt===!0||f.type==="prompt")&&s.push({name:l,description:f.description?this.valueToString(f.description):l,mode:f.mode==="agent"?"agent":void 0,tools:f.tools&&Array.isArray(f.tools)?f.tools.map(h=>this.valueToString(h)):void 0,content:f.content?this.valueToString(f.content):""})}return s}generatePromptFile(e){const t=[];t.push("---");const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.mode==="agent"&&(t.push("mode: agent"),e.tools&&e.tools.length>0)){const c=e.tools.map(f=>Om[f]??f.toLowerCase()).filter((f,h,m)=>m.indexOf(f)===h).map(f=>`'${f}'`).join(", ");t.push(`tools: [${c}]`)}if(t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/prompts/${e.name.replace(/^\/+/,"")}.prompt.md`,content:t.join(`
`)+`
`}}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,disableModelInvocation:f.disableModelInvocation===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.disableModelInvocation&&t.push("disable-model-invocation: true"),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/skills/${e.name.replace(/^\/+/,"")}/SKILL.md`,content:t.join(`
`)+`
`}}generateAgentsFile(e){const t=this.findBlock(e,"identity");if(!t)return null;const s=[];s.push("# Agent Instructions"),s.push("");const o=this.extractText(t.content);o&&(s.push("## Identity"),s.push(""),s.push(this.stripAllIndent(o)),s.push(""));const l=this.findBlock(e,"context");if(l){const f=this.extractText(l.content);f&&(s.push("## Context"),s.push(""),s.push(this.stripAllIndent(f)),s.push(""))}const c=this.findBlock(e,"restrictions");if(c){const f=this.extractRestrictionItems(c.content);if(f.length>0){s.push("## Restrictions"),s.push("");for(const h of f)s.push(`- ${h}`)}}return{path:"AGENTS.md",content:s.join(`
`)+`
`}}extractRestrictionItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractCustomAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=f.description?this.valueToString(f.description):"";if(!h)continue;s.push({name:l,description:h,tools:this.parseToolsArray(f.tools),model:f.model?this.valueToString(f.model):void 0,content:f.content?this.valueToString(f.content):""})}return s}parseToolsArray(e){if(!e||!Array.isArray(e))return;const t=e.map(o=>this.valueToString(o)).filter(o=>o.length>0).map(o=>Om[o]??o.toLowerCase()),s=[...new Set(t)];return s.length>0?s:void 0}mapModelName(e){if(!e)return;const t=vN[e.toLowerCase()];if(t!=="")return t??e}generateCustomAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0){const l=e.tools.map(c=>`'${c}'`).join(", ");t.push(`tools: [${l}]`)}const s=this.mapModelName(e.model);if(s&&t.push(`model: ${s}`),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/agents/${e.name.replace(/^\/+/,"")}.md`,content:t.join(`
`)+`
`}}addCommonSections(e,t,s){const o=this.project(e,t);o&&s.push(o);const l=this.techStack(e,t);l&&s.push(l);const c=this.architecture(e,t);c&&s.push(c);const f=this.codeStandards(e,t);f&&s.push(f);const h=this.shortcutsSection(e,t);h&&s.push(h);const m=this.commands(e,t);m&&s.push(m);const g=this.gitCommits(e,t);g&&s.push(g);const y=this.configFiles(e,t);y&&s.push(y);const E=this.documentation(e,t);E&&s.push(E);const k=this.postWork(e,t);k&&s.push(k);const C=this.restrictions(e,t);C&&s.push(C);const N=this.diagrams(e,t);N&&s.push(N);const F=this.knowledge(e,t);F&&s.push(F)}header(e){return"# GitHub Copilot Instructions"}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const o=this.extractText(s.content);return t.renderSection("project",this.stripAllIndent(o))}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.getProps(s.content),l=[],c=o.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Language:** ${this.formatTechItem(g)}`)}const f=o.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=o.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E&&l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`)}if(l.length===0)return null;const m=t.renderList(l);return t.renderSection("tech-stack",m)}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Architecture");if(!l)return null;const c=l.replace("## Architecture","").trim();return t.renderSection("architecture",this.stripAllIndent(c))}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const c of o.codeStandards.values())c.items.length>0&&l.push(t.renderSection(c.sectionName,t.renderList(c.items),2));return l.length===0?null:t.renderSection("code-standards",l.join(`

`))}shortcutsSection(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const o=this.getProps(s.content),l=[];for(const[c,f]of Object.entries(o))if(f&&typeof f=="object"&&!Array.isArray(f)){const h=f;if(h.prompt===!0||h.type==="prompt")continue;const m=h.description||h.content||c;l.push(`${c}: ${this.valueToString(m).split(`
`)[0]}`)}else l.push(`${c}: ${this.valueToString(f).split(`
`)[0]}`);return l.length===0?null:t.renderSection("shortcuts",t.renderList(l))}commands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return t.renderSection("commands",this.stripAllIndent(c))}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:t.renderSection("git-commits",t.renderList(f))}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(t.renderSection("eslint",`ESLint: ${g}`,2))}const m=c.viteRoot;if(m){const g=this.valueToString(m);f.push(t.renderSection("vite-vitest",`Vite root: ${g}`,2))}return f.length===0?null:t.renderSection("configuration-files",f.join(`

`))}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:t.renderSection("documentation-verification",t.renderList(f))}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return t.renderSection("post-work-verification",`${c}
${this.stripAllIndent(f)}`)}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;let o=[];if(s.content.type==="ArrayContent")o=s.content.elements.map(l=>this.formatRestriction(this.valueToString(l)));else if(s.content.type==="TextContent")o=s.content.value.trim().split(`
`).filter(l=>l.trim()).map(l=>this.formatRestriction(l.trim()));else if(s.content.type==="ObjectContent"){const l=this.getProp(s.content,"items");Array.isArray(l)&&(o=l.map(c=>this.formatRestriction(this.valueToString(c))))}return o.length===0?null:t.renderSection("donts",t.renderList(o))}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Always use **${this.valueToString(h)}** syntax for diagrams in documentation`);const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:t.renderSection("diagrams",t.renderList(f))}knowledge(e,t){return null}formatTechItem(e){return e.map(String).join(", ")}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}const SN={simple:{name:"simple",description:"Single file output (CLAUDE.md)",outputPath:"CLAUDE.md"},multifile:{name:"multifile",description:"Main + modular rules (.claude/rules/*.md)",outputPath:"CLAUDE.md"},full:{name:"full",description:"Multifile + skills (.claude/skills/) + agents (.claude/agents/) + local memory",outputPath:"CLAUDE.md"}};class TN extends Ha{name="claude";outputPath="CLAUDE.md";description="Claude Code instructions (concise Markdown)";defaultConvention="markdown";static getSupportedVersions(){return SN}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),o=[];return s.getConvention().name==="markdown"&&o.push(`# CLAUDE.md
`),this.addCommonSections(e,s,o),{path:this.getOutputPath(t),content:o.join(`
`)}}formatMultifile(e,t){const s=this.createRenderer(t),o=[],l=this.extractRules(e);for(const f of l)o.push(this.generateRuleFile(f));const c=[];return s.getConvention().name==="markdown"&&c.push(`# CLAUDE.md
`),this.addCommonSections(e,s,c),{path:this.getOutputPath(t),content:c.join(`
`),additionalFiles:o.length>0?o:void 0}}formatFull(e,t){const s=this.createRenderer(t),o=[],l=this.extractRules(e);for(const g of l)o.push(this.generateRuleFile(g));const c=this.extractSkills(e);for(const g of c)o.push(this.generateSkillFile(g));const f=this.extractAgents(e);for(const g of f)o.push(this.generateAgentFile(g));const h=this.generateLocalFile(e);h&&o.push(h);const m=[];return s.getConvention().name==="markdown"&&m.push(`# CLAUDE.md
`),this.addCommonSections(e,s,m),{path:this.getOutputPath(t),content:m.join(`
`),additionalFiles:o.length>0?o:void 0}}extractRules(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],o=this.getProps(t.content),l=o.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"code-style",paths:c,description:"TypeScript code style rules",content:this.getCodeStyleRuleContent(e)}),f.length>0&&s.push({name:"testing",paths:f,description:"Testing rules and patterns",content:this.getTestingRuleContent(e)})}for(const[c,f]of Object.entries(o))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.paths??h.applyTo,g=h.description,y=h.content;m&&Array.isArray(m)&&s.push({name:c,paths:m.map(E=>this.valueToString(E)),description:g?this.valueToString(g):`${c} rules`,content:y?this.valueToString(y):""})}return s}generateRuleFile(e){const t=[];t.push("---"),t.push(`description: "${e.description}"`),t.push("paths:");for(const s of e.paths)t.push(`  - "${s}"`);if(t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.claude/rules/${e.name}.md`,content:t.join(`
`)}}getCodeStyleRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&o.push("- Strict TypeScript, no `any` types"),f.exports&&o.push("- Named exports only")}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&o.push(`- Files: ${this.valueToString(f.files)}`)}return o.join(`
`)}getTestingRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.framework&&o.push(`- Use ${this.valueToString(c.framework)} for testing`),c.coverage&&o.push(`- Target >${this.valueToString(c.coverage)}% coverage`),c.pattern&&o.push(`- Follow ${this.valueToString(c.pattern)} pattern`)}return o.length>0?o.join(`
`):"Follow project testing conventions."}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,context:f.context==="fork"||f.context==="inherit"?f.context:void 0,agent:f.agent?this.valueToString(f.agent):void 0,allowedTools:f.allowedTools&&Array.isArray(f.allowedTools)?f.allowedTools.map(h=>this.valueToString(h)):void 0,userInvocable:f.userInvocable===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.context&&t.push(`context: ${e.context}`),e.agent&&t.push(`agent: ${e.agent}`),e.allowedTools&&e.allowedTools.length>0){t.push("allowed-tools:");for(const o of e.allowedTools)t.push(`  - ${o}`)}if(e.userInvocable&&t.push("user-invocable: true"),t.push("---"),t.push(""),e.content){const o=this.dedent(e.content),l=this.normalizeMarkdownForPrettier(o);t.push(l)}return{path:`.claude/skills/${e.name}/SKILL.md`,content:t.join(`
`)+`
`}}extractAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=this.parseAgentConfig(l,f);h&&s.push(h)}return s}parseAgentConfig(e,t){const s=t.description?this.valueToString(t.description):"";return s?{name:e,description:s,tools:this.parseStringArray(t.tools),disallowedTools:this.parseStringArray(t.disallowedTools),model:this.parseAgentModel(t.model),permissionMode:this.parsePermissionMode(t.permissionMode),skills:this.parseStringArray(t.skills),content:t.content?this.valueToString(t.content):""}:null}parseStringArray(e){if(!e||!Array.isArray(e))return;const t=e.map(s=>this.valueToString(s)).filter(s=>s.length>0);return t.length>0?t:void 0}parseAgentModel(e){if(!e)return;const t=this.valueToString(e);return["sonnet","opus","haiku","inherit"].includes(t)?t:void 0}parsePermissionMode(e){if(!e)return;const t=this.valueToString(e);return["default","acceptEdits","dontAsk","bypassPermissions","plan"].includes(t)?t:void 0}generateAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0&&t.push(`tools: ${e.tools.join(", ")}`),e.disallowedTools&&e.disallowedTools.length>0&&t.push(`disallowedTools: ${e.disallowedTools.join(", ")}`),e.model&&t.push(`model: ${e.model}`),e.permissionMode&&t.push(`permissionMode: ${e.permissionMode}`),e.skills&&e.skills.length>0){t.push("skills:");for(const s of e.skills)t.push(`  - ${s}`)}if(t.push("---"),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.claude/agents/${e.name}.md`,content:t.join(`
`)+`
`}}generateLocalFile(e){const t=this.findBlock(e,"local");if(!t)return null;const s=this.extractText(t.content);if(!s)return null;const o=[];return o.push("# CLAUDE.local.md"),o.push(""),o.push("> Private instructions (not committed to git)"),o.push(""),o.push(s),{path:"CLAUDE.local.md",content:o.join(`
`)}}addCommonSections(e,t,s){this.addSection(s,this.project(e,t)),this.addSection(s,this.techStack(e,t)),this.addSection(s,this.architecture(e,t)),this.addSection(s,this.codeStandards(e,t)),this.addSection(s,this.gitCommits(e,t)),this.addSection(s,this.configFiles(e,t)),this.addSection(s,this.commands(e,t)),this.addSection(s,this.postWork(e,t)),this.addSection(s,this.documentation(e,t)),this.addSection(s,this.diagrams(e,t)),this.addSection(s,this.donts(e,t))}addSection(e,t){t&&e.push(t)}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const l=this.extractText(s.content).split(/\n{2,}/).map(f=>f.split(`
`).map(h=>h.trim()).filter(h=>h).join(`
`)).filter(f=>f).join(`

`),c=this.normalizeMarkdownForPrettier(l);return t.renderSection("Project",c)+`
`}techStack(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractTechStackFromContext(s);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}const o=this.findBlock(e,"standards");if(o){const l=this.extractTechStackFromStandards(o);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}return null}extractTechStackFromContext(e){if(!e)return[];const t=this.getProps(e.content),s=[],o=t.languages;o&&s.push(...(Array.isArray(o)?o:[o]).map(String));const l=t.runtime;l&&s.push(this.valueToString(l));const c=t.monorepo;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&f.packageManager&&s.push(`${this.valueToString(f.tool)} + ${this.valueToString(f.packageManager)}`)}return s}extractTechStackFromStandards(e){if(!e)return[];const t=this.getProp(e.content,"code");if(!t||typeof t!="object"||Array.isArray(t))return[];const s=t,o=[];for(const l of["languages","frameworks","testing"]){const c=s[l];c&&o.push(...(Array.isArray(c)?c:[c]).map(String))}return o}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Architecture");if(!l)return null;const c=l.replace("## Architecture",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Architecture",f.trim())+`
`}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const f of o.codeStandards.values())l.push(...f.items);if(l.length===0)return null;const c=t.renderList(l);return t.renderSection("Code Style",c)+`
`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"git");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.format&&c.push(`Format: ${this.valueToString(l.format)}`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),l.example&&c.push(`Example: \`${this.valueToString(l.example)}\``),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Git Commits",f)+`
`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"config");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.eslint&&c.push(`ESLint: ${this.valueToString(l.eslint)}`),l.viteRoot&&c.push(`Vite root: ${this.valueToString(l.viteRoot)}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Config Files",f)+`
`}commands(e,t){const s=this.findBlock(e,"shortcuts"),o=this.findBlock(e,"knowledge"),l=[];if(s){const f=this.getProps(s.content);for(const[h,m]of Object.entries(f)){const g=this.valueToString(m).split(`
`)[0]??"";l.push(`${h.padEnd(10)} - ${g}`.trimEnd())}}if(l.length===0)return null;let c=t.renderCodeBlock(l.join(`
`));if(o){const f=this.extractText(o.content),h=this.extractSectionWithCodeBlock(f,"## Development Commands");if(h){const m=h.replace("## Development Commands",""),g=this.normalizeMarkdownForPrettier(m);c+=`

`+g.trim()}}return t.renderSection("Commands",c)+`
`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c=l.replace("## Post-Work Verification",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Post-Work Verification",f.trim())+`
`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"documentation");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.verifyBefore&&c.push("Review docs before changes"),l.verifyAfter&&c.push("Update docs after changes"),l.codeExamples&&c.push("Keep code examples accurate"),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Documentation",f)+`
`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"diagrams");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.format&&c.push(`Use ${this.valueToString(l.format)} for diagrams`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Diagrams",f)+`
`}donts(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const o=this.extractDontsItems(s.content);if(o.length===0)return null;const l=t.renderList(o);return t.renderSection("Don'ts",l)+`
`}extractDontsItems(e){const t=s=>s.replace(/^Never\s+/i,"Don't ");if(e.type==="ArrayContent")return e.elements.map(s=>t(this.valueToString(s)));if(e.type==="TextContent")return e.value.trim().split(`
`).map(s=>s.trim().replace(/^-\s*/,"")).filter(s=>s.length>0).map(t);if(e.type==="ObjectContent"){const s=this.getProp(e,"items");if(Array.isArray(s))return s.map(o=>t(this.valueToString(o)))}return[]}}const ps={modern:{name:"modern",description:"MDC format with YAML frontmatter (.cursor/rules/project.mdc) + slash commands (.cursor/commands/)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},frontmatter:{name:"frontmatter",description:"Alias for modern format (MDC with YAML frontmatter + slash commands)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},multifile:{name:"multifile",description:"Multiple MDC files with glob-based targeting + slash commands",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},legacy:{name:"legacy",description:"Plain text format (.cursorrules) - DEPRECATED",outputPath:".cursorrules",cursorVersion:"< 0.45",deprecated:!0,deprecatedSince:"2024-12"}};class kN extends Ha{name="cursor";outputPath=ps.modern.outputPath;description="Cursor rules (MDC with frontmatter)";defaultConvention="markdown";static getSupportedVersions(){return ps}format(e,t){const s=t?.convention??this.defaultConvention;if(s!=="markdown"){const l=typeof s=="string"?s:"custom";throw new Error(`Cursor formatter does not support '${l}' convention. Only 'markdown' convention is supported for Cursor targets.`)}const o=this.resolveVersion(t?.version);return o==="legacy"?this.formatLegacy(e,t):o==="multifile"?this.formatMultifile(e,t):this.formatModern(e,t)}resolveVersion(e){return e==="legacy"?"legacy":e==="multifile"?"multifile":"modern"}formatModern(e,t){const s=[],o=this.frontmatter(e);s.push(o),this.addCommonSections(e,s);const l=this.generateCommandFiles(e);return{path:t?.outputPath??ps.modern.outputPath,content:s.join(`

`)+`
`,additionalFiles:l.length>0?l:void 0}}formatLegacy(e,t){const s=[];return this.addCommonSections(e,s),{path:t?.outputPath??ps.legacy.outputPath,content:s.join(`

`)+`
`}}formatMultifile(e,t){const s=[],o=this.extractGlobs(e);for(const M of o){const _=this.generateGlobFile(e,M);_&&s.push(_)}const l=this.generateShortcutsFile(e);l&&s.push(l);const c=this.generateCommandFiles(e);s.push(...c);const f=[];f.push(this.frontmatter(e)),f.push(this.intro(e));const h=this.techStack(e);h&&f.push(h);const m=this.architecture(e);m&&f.push(m);const g=this.codeStyle(e);g&&f.push(g);const y=this.gitCommits(e);y&&f.push(y);const E=this.configFiles(e);E&&f.push(E);const k=this.postWork(e);k&&f.push(k);const C=this.documentation(e);C&&f.push(C);const N=this.diagrams(e);N&&f.push(N);const F=this.never(e);return F&&f.push(F),{path:t?.outputPath??ps.modern.outputPath,content:f.join(`

`)+`
`,additionalFiles:s.length>0?s:void 0}}extractGlobs(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],l=this.getProps(t.content).globs;if(Array.isArray(l)){const c=l.filter(m=>typeof m=="string"&&(m.includes(".ts")||m.includes(".tsx"))),f=l.filter(m=>typeof m=="string"&&(m.includes("test")||m.includes("spec")||m.includes("__tests__"))),h=l.filter(m=>typeof m=="string"&&!c.includes(m)&&!f.includes(m));c.length>0&&s.push({name:"typescript",patterns:c,description:"TypeScript-specific rules"}),f.length>0&&s.push({name:"testing",patterns:f,description:"Testing-specific rules"}),h.length>0&&s.push({name:"files",patterns:h,description:"File-specific rules"})}return s}generateGlobFile(e,t){const s=[],o=["---",`description: "${t.description}"`,"globs:",...t.patterns.map(l=>`  - "${l}"`),"---"];if(s.push(o.join(`
`)),t.name==="typescript"){const l=this.codeStyle(e);l&&s.push(l)}return t.name==="testing"&&(s.push("## Testing Guidelines"),s.push("Follow project testing conventions and patterns.")),s.length<=1?null:{path:`.cursor/rules/${t.name}.mdc`,content:s.join(`

`)+`
`}}generateShortcutsFile(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const o=[];o.push(["---",'description: "Project shortcuts and commands"',"alwaysApply: false","---"].join(`
`));const l=["## Commands"];for(const[c,f]of Object.entries(s)){const h=this.valueToString(f);if(typeof f=="object"&&!Array.isArray(f)){const m=f;l.push(`
### ${c}`),m.description&&l.push(this.valueToString(m.description)),Array.isArray(m.steps)&&(l.push(`
**Steps:**`),m.steps.forEach((g,y)=>{l.push(`${y+1}. ${this.valueToString(g)}`)}))}else l.push(`- **${c}**: ${h.split(`
`)[0]}`)}return o.push(l.join(`
`)),{path:".cursor/rules/shortcuts.mdc",content:o.join(`

`)+`
`}}generateCommandFiles(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=this.getProps(t.content),o=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);if(f.includes(`
`)){const h=l.replace(/^\//,"");o.push({path:`.cursor/commands/${h}.md`,content:f.trim()})}}return o}addCommonSections(e,t){const s=this.intro(e);s&&t.push(s);const o=this.techStack(e);o&&t.push(o);const l=this.architecture(e);l&&t.push(l);const c=this.codeStyle(e);c&&t.push(c);const f=this.gitCommits(e);f&&t.push(f);const h=this.configFiles(e);h&&t.push(h);const m=this.commands(e);m&&t.push(m);const g=this.devCommands(e);g&&t.push(g);const y=this.postWork(e);y&&t.push(y);const E=this.documentation(e);E&&t.push(E);const k=this.diagrams(e);k&&t.push(k);const C=this.never(e);C&&t.push(C)}intro(e){const t=this.findBlock(e,"identity");if(t){const l=this.dedent(this.extractText(t.content));if(l.toLowerCase().startsWith("you are"))return l}const s=this.extractProjectInfo(e),o=s.org?` at ${s.org}`:"";return`You are working on ${s.text}${o}.`}frontmatter(e){return["---",`description: "${this.extractProjectDescription(e)}"`,"alwaysApply: true","---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"name");if(t)return`Project rules for ${t}`;const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"project");if(o&&typeof o=="string"){const c=/working on\s+(\w+)/i.exec(o);if(c)return`Project rules for ${c[1]}`}}return"Project-specific rules"}extractProjectInfo(e){const t=this.getMetaField(e,"org")??null,s=this.findBlock(e,"context");if(s){const l=this.getProp(s.content,"project");if(l&&typeof l=="string")return{text:l.trim(),org:t}}const o=this.findBlock(e,"identity");if(o){const c=this.extractText(o.content).split(`
`)[0]?.trim();if(c)return{text:c,org:t}}return{text:"the project",org:t}}techStack(e){const t=this.extractTechStackItems(e);return t.length>0?`Tech stack: ${t.join(", ")}`:null}extractTechStackItems(e){const t=[],s=this.findBlock(e,"context");return s&&this.extractTechFromContext(s.content,t),t.length===0&&this.extractTechFromStandards(e,t),t}extractTechFromContext(e,t){const s=this.getProp(e,"tech-stack");s&&t.push(...this.extractListItems(s));const o=this.getProp(e,"languages");o&&this.collectValueItems(t,o);const l=this.getProp(e,"runtime");l&&t.push(this.valueToString(l));const c=this.getProp(e,"monorepo");if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&t.push(`${this.valueToString(f.tool)}`),f.packageManager&&t.push(`${this.valueToString(f.packageManager)} workspaces`)}}extractTechFromStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return;const o=this.getProp(s.content,"code");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=o;this.collectValueItems(t,l.languages),this.collectValueItems(t,l.frameworks),this.collectValueItems(t,l.testing)}}architecture(e){const t=this.findBlock(e,"context");if(!t)return null;const s=this.getProp(t.content,"architecture");if(s){const l=typeof s=="string"?s:this.valueToString(s);if(l.trim())return`Architecture:
${l.trim()}`}const o=this.extractText(t.content);return o?.includes("Architecture")?o.trim():null}codeStyle(e){const t=this.extractCodeStyleItems(e);return t.length===0?null:`Code style:
${t.map(s=>"- "+s).join(`
`)}`}extractCodeStyleItems(e){const t=this.findBlock(e,"standards");if(!t)return[];const s=this.standardsExtractor.extract(t.content),o=[];for(const l of s.codeStandards.values())o.push(...l.items);return o}gitCommits(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"git");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=this.extractGitItems(o);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"git-commits");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=this.extractGitItems(o);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}return null}extractGitItems(e){const t=[];for(const[s,o]of Object.entries(e))if(s==="types"&&Array.isArray(o)){const l=o.map(c=>this.valueToString(c)).join(", ");t.push(`types: ${l}`)}else typeof o=="string"?t.push(`${s}: ${o}`):typeof o=="number"&&t.push(`${s}: ${o}`);return t}configFiles(e){const t=this.extractConfigItems(e);return t.length===0?null:`Config:
${t.map(s=>"- "+s).join(`
`)}`}extractConfigItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"config"),l=this.extractConfigFromObject(o);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"configuration-files");return this.extractConfigFromObjectWithList(o)}return[]}extractConfigFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,o]of Object.entries(e))typeof o=="string"&&t.push(`${s}: ${o}`);return t}extractConfigFromObjectWithList(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,o]of Object.entries(e)){const l=this.extractListItems(o);l.length>0&&t.push(`${s}: ${l.join("; ")}`)}return t}commands(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const o=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c).split(`
`)[0]??"";o.push(`${l} - ${f}`)}return o.length>0?`Commands:
${o.join(`
`)}`:null}devCommands(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),o=this.extractSectionWithCodeBlock(s,"## Development Commands");return o?`Development Commands:
${o.replace("## Development Commands","").trim()}`:null}postWork(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),o=this.extractSectionWithCodeBlock(s,"## Post-Work Verification");return o?`Post-Work Verification:
${o.replace("## Post-Work Verification","").trim()}`:null}documentation(e){const t=this.extractDocItems(e);return t.length===0?null:`Documentation:
${t.map(s=>"- "+s).join(`
`)}`}extractDocItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"documentation"),l=this.extractStringValuesFromObject(o);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"documentation-verification");if(o)return this.extractListItems(o)}return[]}extractStringValuesFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const s of Object.values(e))typeof s=="string"&&t.push(s);return t}diagrams(e){const t=this.extractDiagramItems(e);return t.length===0?null:`Diagrams:
${t.map(s=>"- "+s).join(`
`)}`}extractDiagramItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"diagrams"),l=this.parseDiagramObject(o,"format");if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"diagrams");return this.parseDiagramObject(o,"tool")}return[]}parseDiagramObject(e,t){if(!e||typeof e!="object"||Array.isArray(e))return[];const s=e,o=[];return s[t]&&o.push(`Use ${this.valueToString(s[t])}`),s.types&&Array.isArray(s.types)&&o.push(`Types: ${s.types.map(l=>this.valueToString(l)).join(", ")}`),o}never(e){const t=this.findBlock(e,"restrictions");if(!t)return null;const s=this.extractNeverItems(t.content);return s.length===0?null:`Never:
${s.map(o=>"- "+o).join(`
`)}`}extractNeverItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractListItems(e){if(Array.isArray(e))return e.map(t=>this.valueToString(t));if(typeof e=="object"&&e!==null){const t=e,s=[];for(const[o,l]of Object.entries(t))s.push(`${o}: ${this.valueToString(l)}`);return s}return typeof e=="string"?e.split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0):[this.valueToString(e)]}collectValueItems(e,t){if(!t)return;const s=Array.isArray(t)?t:[t];for(const o of s)e.push(this.valueToString(o))}}const xN={simple:{name:"simple",description:"Plain Markdown without frontmatter",outputPath:".agent/rules/project.md"},frontmatter:{name:"frontmatter",description:"Markdown with YAML frontmatter for activation",outputPath:".agent/rules/project.md"}},_m=12e3;class AN extends Ha{name="antigravity";outputPath=".agent/rules/project.md";description="Google Antigravity rules (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return xN}format(e,t){const s=this.resolveVersion(t?.version),o=this.createRenderer(t),l=[];if(s==="frontmatter"){const V=this.determineActivationType(e);l.push(this.generateFrontmatter(e,V))}l.push(this.header(e));const c=this.identity(e,o);c&&l.push(c);const f=this.techStack(e,o);f&&l.push(f);const h=this.architecture(e,o);h&&l.push(h);const m=this.codeStandards(e,o);m&&l.push(m);const g=this.gitCommits(e,o);g&&l.push(g);const y=this.configFiles(e,o);y&&l.push(y);const E=this.commands(e,o);E&&l.push(E);const k=this.devCommands(e,o);k&&l.push(k);const C=this.postWork(e,o);C&&l.push(C);const N=this.documentation(e,o);N&&l.push(N);const F=this.diagrams(e,o);F&&l.push(F);const M=this.restrictions(e,o);M&&l.push(M);const _=l.join(`

`)+`
`;this.validateContentLength(_);const P={path:this.getOutputPath(t),content:_},b=this.workflows(e);return b&&b.length>0?{path:P.path,content:P.content,additionalFiles:b}:P}resolveVersion(e){return e==="frontmatter"?"frontmatter":"simple"}determineActivationType(e){const t=this.findBlock(e,"guards");if(t){const s=this.getProps(t.content);if(s.globs||s.glob||s.files)return"glob"}return"always"}generateFrontmatter(e,t){const s=this.getMetaField(e,"name")??"Project Rules",o=this.extractProjectDescription(e);return["---",`title: "${s}"`,`activation: "${t}"`,`description: "${o}"`,"---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"description");if(t)return t;const s=this.findBlock(e,"identity");if(s){const o=this.extractText(s.content);if(o){const l=o.split(".")[0];return l&&l.length<=100?l:o.slice(0,100)+"..."}}return"Auto-generated project rules"}validateContentLength(e){e.length>_m&&console.warn(`Warning: Content exceeds Antigravity's ${_m.toLocaleString()} character limit (${e.length.toLocaleString()} chars). Consider splitting into multiple rules.`)}workflows(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content),o=[];for(const[l,c]of Object.entries(s))if(this.isWorkflow(c)){const f=this.generateWorkflow(l,c);f&&o.push(f)}return o.length>0?o:null}isWorkflow(e){if(typeof e!="object"||e===null||Array.isArray(e))return!1;const t=e;return"steps"in t||"workflow"in t}generateWorkflow(e,t){if(typeof t!="object"||t===null||Array.isArray(t))return null;const s=t,o=s.steps??s.workflow,l=s.description??s.desc??"",c=e.replace(/^\//,"").replace(/\s+/g,"-").toLowerCase(),f=["---",`title: "${this.formatWorkflowTitle(e)}"`,`description: "${this.valueToString(l)}"`,"---","","## Steps",""];return Array.isArray(o)?o.forEach((h,m)=>{f.push(`${m+1}. ${this.valueToString(h)}`)}):typeof o=="string"&&o.split(`
`).map(m=>m.trim()).filter(m=>m.length>0).forEach((m,g)=>{const y=m.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"");f.push(`${g+1}. ${y}`)}),{path:`.agent/workflows/${c}.md`,content:f.join(`
`)}}formatWorkflowTitle(e){return e.replace(/^\//,"").split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}header(e){return"# Project Rules"}identity(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const o=this.extractText(s.content);return o?`## Project Identity

${this.stripAllIndent(o)}`:null}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.getProps(s.content),l=[],c=o.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Languages:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}const f=o.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=o.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E?l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`):y&&l.push(`**Monorepo:** ${this.valueToString(y)}`)}const m=o.frameworks;if(m){const g=Array.isArray(m)?m:[m];l.push(`**Frameworks:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}return l.length===0?null:`## Tech Stack

${l.join(`
`)}`}architecture(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractText(s.content),c=this.extractSectionWithCodeBlock(l,"## Architecture");if(c){const m=c.replace("## Architecture","").trim();return`## Architecture

${this.stripAllIndent(m)}`}const h=this.getProps(s.content).architecture;if(h){const m=typeof h=="string"?h:this.valueToString(h);if(m.trim())return`## Architecture

${this.stripAllIndent(m.trim())}`}}const o=this.findBlock(e,"architecture");if(o){const l=this.extractText(o.content);if(l)return`## Architecture

${this.stripAllIndent(l)}`}return null}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const c of o.codeStandards.values())c.items.length>0&&l.push(`### ${c.title}

${c.items.map(f=>"- "+f).join(`
`)}`);return l.length===0?null:`## Code Standards

${l.join(`

`)}`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:`## Git Commits

${f.map(E=>"- "+E).join(`
`)}`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(`### ESLint

- ESLint: ${g}`)}const m=c.viteRoot;if(m){const g=this.valueToString(m).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`### Vite/Vitest

- Vite root: ${g}`)}return f.length===0?null:`## Configuration Files

${f.join(`

`)}`}commands(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const o=this.getProps(s.content);if(Object.keys(o).length===0)return null;const l=[];for(const[c,f]of Object.entries(o)){if(this.isWorkflow(f))continue;const h=this.valueToString(f);h?l.push(`- **${c}**: ${h}`):l.push(`- **${c}**:`)}return l.length===0?null:`## Commands

${l.join(`
`)}`}devCommands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return`## Development Commands

${this.stripAllIndent(c)}`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return`## Post-Work Verification

${c}
${this.stripAllIndent(f)}`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:`## Documentation

${f.map(h=>"- "+h).join(`
`)}`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;if(h){const g=this.valueToString(h).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`Always use **${g}** syntax for diagrams in documentation`)}const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:`## Diagrams

${f.map(g=>"- "+g).join(`
`)}`}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const o=this.extractRestrictionsItems(s.content);return o.length===0?null:`## Don'ts

${o.map(l=>"- "+l).join(`
`)}`}extractRestrictionsItems(e){return e.type==="ArrayContent"?e.elements.map(t=>this.formatRestriction(this.valueToString(t))):e.type==="TextContent"?e.value.trim().split(`
`).filter(t=>t.trim()).map(t=>this.formatRestriction(t.trim())):[]}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}}Ir.register("github",()=>new EN);Ir.register("claude",()=>new TN);Ir.register("cursor",()=>new kN);Ir.register("antigravity",()=>new AN);const wN={id:"PS001",name:"required-meta-id",description:"@meta.id is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e){r.report({message:"@meta block is required",location:r.ast.loc,suggestion:"Add a @meta block with id and version fields"});return}e.fields?.id||r.report({message:'@meta block must include "id" field',location:e.loc??r.ast.loc,suggestion:'Add id: "your-project-id" to @meta'})}},CN={id:"PS002",name:"required-meta-syntax",description:"@meta.syntax is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;e&&(e.fields?.syntax||r.report({message:'@meta block must include "syntax" field',location:e.loc??r.ast.loc,suggestion:'Add syntax: "1.0.0" to @meta'}))}};function RN(r){if(!r)return!1;const t=r.split(/[-+]/)[0];if(!t)return!1;const s=t.split(".");if(s.length!==3)return!1;for(const o of s)if(!/^\d+$/.test(o)||o.length>1&&o.startsWith("0"))return!1;return!0}const NN={id:"PS003",name:"valid-semver",description:"Syntax version must be valid semantic version",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e?.fields?.syntax)return;const t=e.fields.syntax;if(typeof t!="string"){r.report({message:"@meta.syntax must be a string",location:e.loc??r.ast.loc,suggestion:'Use a string value like syntax: "1.0.0"'});return}RN(t)||r.report({message:`Invalid semantic version: "${t}"`,location:e.loc??r.ast.loc,suggestion:'Use semantic versioning format: MAJOR.MINOR.PATCH (e.g., "1.0.0", "2.1.0-beta.1")'})}},IN={id:"PS004",name:"required-guards",description:"Required guards must be present",defaultSeverity:"error",validate:r=>{const e=r.config.requiredGuards;if(!e||e.length===0)return;const t=r.ast.blocks.find(o=>o.name==="guards");if(!t){r.report({message:`Missing @guards block. Required guards: ${e.join(", ")}`,location:r.ast.loc,suggestion:"Add a @guards block with the required guard references"});return}const s=ON(t.content);for(const o of e)s.includes(o)||r.report({message:`Missing required guard: "${o}"`,location:t.loc??r.ast.loc,suggestion:`Add @use ${o} to include the required guard`})}};function ON(r){const e=[];if(r.type==="ArrayContent"&&Array.isArray(r.elements))for(const t of r.elements)typeof t=="string"&&e.push(t);else if(r.type==="ObjectContent"&&r.properties)for(const t of Object.keys(r.properties))e.push(t);return e}function Fs(r,e){for(const t of r.blocks)Pm(t.content,t.loc,e);for(const t of r.extends)Pm(t.content,t.loc,e)}function _N(r,e){for(const t of r.blocks)e(t);for(const t of r.extends)e(t)}function Dy(r,e){for(const t of r.uses)e(t)}function Pm(r,e,t){switch(r.type){case"TextContent":t(r.value,r.loc??e);break;case"ObjectContent":Nc(r.properties,r.loc??e,t);break;case"ArrayContent":By(r.elements,r.loc??e,t);break;case"MixedContent":r.text&&t(r.text.value,r.text.loc??e),Nc(r.properties,r.loc??e,t);break}}function Nc(r,e,t){for(const s of Object.values(r))zy(s,e,t)}function By(r,e,t){for(const s of r)zy(s,e,t)}function zy(r,e,t){if(typeof r=="string")t(r,e);else if(Array.isArray(r))By(r,e,t);else if(r!==null&&typeof r=="object")if("type"in r){const s=r;s.type==="TextContent"&&typeof s.value=="string"&&t(s.value,s.loc??e)}else Nc(r,e,t)}function PN(r){switch(r.type){case"TextContent":return r.value.trim().length>0;case"ObjectContent":return Object.keys(r.properties).length>0;case"ArrayContent":return r.elements.length>0;case"MixedContent":return(r.text?.value?.trim().length??0)>0||Object.keys(r.properties).length>0}}const Vy=[/ignore\s+(all\s+)?previous\s+instructions/i,/pretend\s+(you\s+)?(are|to\s+be)/i,/jailbreak/i,/bypass\s+(your\s+)?(rules|restrictions)/i,/disregard\s+(all\s+)?(prior|previous)/i,/forget\s+(all\s+)?(prior|previous|your)/i,/act\s+as\s+if\s+you\s+(have\s+)?no\s+restrictions/i,/(?:^|[.!?]\s*)(?:please\s+)?override\s+safety/im,/(?:^|[.!?]\s*)(?:please\s+)?suppress\s+(?:all\s+)?warnings?/im,/(?:^|[.!?]\s*)(?:please\s+)?hide\s+security/im,/(?:you\s+)?(?:should|must|can|will)\s+disable\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+turn\s+off\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+circumvent\s+(?:safety|security)/i,/(?:^|[.!?]\s*)evade\s+(?:detection|monitoring|logging)/im,/(?:^|[.!?]\s*)delete\s+(?:all\s+)?(?:logs?|audit\s+trail)/im],LN=[/zignoruj\s+(wszystkie\s+)?poprzednie\s+instrukcje/i,/udawaj,?\s+e\s+(jeste|nie\s+masz)/i,/omi\s+(swoje\s+)?(zasady|ograniczenia|restrykcje)/i,/zapomnij\s+(o\s+)?(wszystkich\s+)?(poprzednich|wczeniejszych)/i,/pomi\s+(wszystkie\s+)?zabezpieczenia/i,/wycz\s+(tryb\s+)?bezpieczestwa/i,/ukryj\s+(wszystkie\s+)?ostrzeenia/i,/usu\s+(wszystkie\s+)?logi/i,/nadpisz\s+zasady\s+bezpieczestwa/i,/dziaaj\s+bez\s+ogranicze/i],bN=[/ignora\s+(todas?\s+las?\s+)?instrucciones\s+anteriores/i,/finge\s+(que\s+)?(eres|ser)/i,/elude\s+(tus\s+)?(reglas|restricciones)/i,/olvida\s+(todas?\s+las?\s+)?(anteriores|previas)/i,/desactiva\s+(la\s+)?seguridad/i,/oculta\s+(las\s+)?advertencias/i,/elimina\s+(los\s+)?registros/i,/anula\s+(las\s+)?medidas\s+de\s+seguridad/i,/acta\s+sin\s+restricciones/i,/salta(r)?\s+(las\s+)?restricciones/i],MN=[/ignoriere?\s+(alle\s+)?vorherigen?\s+(Anweisungen|Instruktionen)/i,/tu\s+so,?\s+als\s+(ob\s+du|wrst\s+du)/i,/umgehe?\s+(deine\s+)?(Regeln|Einschrnkungen|Beschrnkungen)/i,/vergiss\s+(alle\s+)?(vorherigen?|frheren?)/i,/deaktiviere?\s+(die\s+)?Sicherheit/i,/verstecke?\s+(alle\s+)?Warnungen/i,/lsche?\s+(alle\s+)?(Logs?|Protokolle?)/i,/berschreibe?\s+(die\s+)?Sicherheitsregeln/i,/handel[en]?\s+ohne\s+Einschrnkungen/i,/Sicherheitsmanahmen\s+umgehen/i],jN=[/ignore[zr]?\s+(toutes?\s+les?\s+)?instructions?\s+(prcdentes?|antrieures?)/i,/fais\s+semblant\s+(d['']tre|que\s+tu\s+es)/i,/contourne[zr]?\s+(tes|vos)\s+(rgles|restrictions)/i,/oublie[zr]?\s+(toutes?\s+les?\s+)?(prcdentes?|antrieures?)/i,/dsactive[zr]?\s+(la\s+)?scurit/i,/cache[zr]?\s+(les\s+)?avertissements/i,/supprime[zr]?\s+(les\s+)?(logs?|journaux?)/i,/outrepasse[zr]?\s+(les\s+)?mesures\s+de\s+scurit/i,/agis\s+sans\s+restrictions/i,/ignore[zr]?\s+(les\s+)?limites/i],FN=[/ignore\s+(todas?\s+as?\s+)?instrues\s+anteriores/i,/finja\s+(que\s+)?(voc\s+|ser)/i,/contorne\s+(suas?\s+)?(regras|restries)/i,/esquea\s+(todas?\s+as?\s+)?(anteriores|prvias)/i,/desative\s+(a\s+)?segurana/i,/oculte\s+(os\s+)?avisos/i,/apague\s+(os\s+)?(logs?|registros?)/i,/substitua\s+(as\s+)?medidas\s+de\s+segurana/i,/aja\s+sem\s+restries/i,/pule\s+(as\s+)?restries/i],$N=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],UN=[/\s*(\s*)?/i,/\s*(|)/i,/\s*(\s*)?(||)/i,/\s*(\s*)?(|)/i,/\s*/i,/\s*(\s*)?/i,/\s*(\s*)?(|)/i,/\s*\s*(|)/i,/\s*(\s*)?/i,/\s*/i],DN=[/ignora\s+(tutte\s+le\s+)?istruzioni\s+precedenti/i,/fingi\s+di\s+(essere|non\s+avere)/i,/aggira\s+(le\s+tue\s+)?(regole|restrizioni)/i,/dimentica\s+(tutte\s+le\s+)?(precedenti|passate)/i,/disattiva\s+(la\s+)?sicurezza/i,/nascondi\s+(gli\s+)?avvisi/i,/elimina\s+(i\s+)?(log|registri)/i,/sovrascrivi\s+(le\s+)?misure\s+di\s+sicurezza/i,/agisci\s+senza\s+restrizioni/i,/salta\s+(le\s+)?restrizioni/i],BN=[/negeer\s+(alle\s+)?vorige\s+(instructies|aanwijzingen)/i,/doe\s+alsof\s+je\s+(bent|geen)/i,/omzeil\s+(je\s+)?(regels|beperkingen)/i,/vergeet\s+(alle\s+)?(vorige|eerdere)/i,/schakel\s+(de\s+)?beveiliging\s+uit/i,/verberg\s+(alle\s+)?waarschuwingen/i,/verwijder\s+(alle\s+)?(logs?|logboeken)/i,/overschrijf\s+(de\s+)?beveiligingsregels/i,/handel\s+zonder\s+beperkingen/i,/sla\s+(de\s+)?beperkingen\s+over/i],zN=[/()?(||)/i,/|/i,/(||)(||)/i,/(|)(|)/i,/(|)/i,/(||)/i,/(|)/i,/(|)/i,/(|)/i,//i],VN=[/\s*(\s*)?(|\s+)?(|)/i,/\s*\s*(||)/i,/(||)(|)\s*(||)/i,/(|)\s*(|)(|)\s*/i,/(|)\s*(||)/i,/(|\s+)?(||)/i,/(|\s+)?(|)/i,/\s*(|)\s*/i,/\s*\s*(|)/i,/\s*(|\s+)?/i],WN=[/\s+(\s+)?\s+/i,/\s+(|)/i,/\s+(|)/i,/\s+(\s+)?(|\s+)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],GN=[/nceki\s+(tm\s+)?talimatlar\s+(yoksay|grmezden\s+gel)/i,/gibi\s+davran|m\s+gibi\s+yap/i,/(kurallar|kstlamalar)\s+(atla|ge|bypass)/i,/nceki(leri)?\s+unut/i,/gvenlii\s+(devre\s+d\s+brak|kapat)/i,/uyarlar\s+(gizle|sakla)/i,/gnlkleri\s+sil/i,/gvenlik\s+kurallarn\s+(geersiz\s+kl|zerine\s+yaz)/i,/kstlama\s+olmadan\s+(al|hareket\s+et)/i,/gvenlik\s+kontrollerini\s+atla/i],HN=[/ignorera\s+(alla\s+)?tidigare\s+(instruktioner|anvisningar)/i,/ltsas\s+(att\s+du\s+r|vara)/i,/kringg\s+(dina\s+)?(regler|begrnsningar)/i,/glm\s+(alla\s+)?(tidigare|fregende)/i,/inaktivera\s+skerhet(en)?/i,/dlj\s+(alla\s+)?varningar/i,/radera\s+(alla\s+)?loggar/i,/skriv\s+ver\s+skerhetsregler(na)?/i,/agera\s+utan\s+begrnsningar/i,/hoppa\s+ver\s+skerhetskontroller/i],KN=[/ignorer\s+(alle\s+)?tidligere\s+(instruksjoner|anvisninger)/i,/lat\s+som\s+(om\s+)?du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrensninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhet(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slett\s+(alle\s+)?logger/i,/overskriv\s+sikkerhetsregler/i,/handle\s+uten\s+begrensninger/i,/hopp\s+over\s+sikkerhetssjekker/i],YN=[/ignorer\s+(alle\s+)?tidligere\s+(instruktioner|anvisninger)/i,/lad\s+som\s+om\s+du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrnsninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhed(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slet\s+(alle\s+)?logfiler/i,/overskriv\s+sikkerhedsregler/i,/handl\s+uden\s+begrnsninger/i,/spring\s+sikkerhedstjek\s+over/i],XN=[/ohita\s+(kaikki\s+)?aiemmat\s+ohjeet/i,/teeskentele\s+(olevasi|ett\s+olet)/i,/kierr\s+(snnt|rajoitukset)/i,/unohda\s+(kaikki\s+)?(aiemmat|edelliset)/i,/poista\s+turvallisuus\s+kytst/i,/piilota\s+(kaikki\s+)?varoitukset/i,/poista\s+(kaikki\s+)?lokit/i,/ylikirjoita\s+turvasnnt/i,/toimi\s+ilman\s+rajoituksia/i,/ohita\s+turvatarkistukset/i],qN=[/ignoruj\s+(vechny\s+)?pedchoz\s+(instrukce|pokyny)/i,/pedstrej,?\s+e\s+(jsi|nem)/i,/obejdi\s+(sv\s+)?(pravidla|omezen)/i,/zapome\s+(na\s+)?(vechny\s+)?(pedchoz|dvj)/i,/vypni\s+bezpenost/i,/skryj\s+(vechna\s+)?varovn/i,/sma\s+(vechny\s+)?logy/i,/pepi\s+bezpenostn\s+pravidla/i,/jednej\s+bez\s+omezen/i,/pesko\s+bezpenostn\s+kontroly/i],QN=[/hagyd\s+figyelmen\s+kvl\s+(az\s+sszes\s+)?korbbi\s+utastst/i,/tegyl\s+gy,?\s+mintha/i,/kerld\s+meg\s+(a\s+)?(szablyokat|korltozsokat)/i,/felejtsd\s+el\s+(az\s+sszes\s+)?(korbbi|elz)/i,/kapcsold\s+ki\s+a\s+biztonsgot/i,/rejtsd\s+el\s+(az\s+sszes\s+)?figyelmeztetst/i,/trld\s+(az\s+sszes\s+)?naplt/i,/rd\s+fell\s+a\s+biztonsgi\s+szablyokat/i,/cselekedj\s+korltozsok\s+nlkl/i,/hagyd\s+ki\s+a\s+biztonsgi\s+ellenrzseket/i],ZN=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],JN=[/\s+(\s+)??\s+\s+(|)\s+/i,/\s+\s+\s+(|)/i,/(|)\s+\s+(|)\s+/i,/\s+(\s+)?(|)\s+\s+/i,/\s+(\s+)?(|)\s+/i,/(\s+)??\s+\s+/i,/(\s+)?\s+(\s+)?/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i],eI=[/abaikan\s+(semua\s+)?instruksi\s+sebelumnya/i,/berpura-pura\s+(menjadi|bahwa\s+kamu)/i,/lewati\s+(aturan|batasan|pembatasan)/i,/lupakan\s+(semua\s+)?(sebelumnya|yang\s+lalu)/i,/nonaktifkan\s+keamanan/i,/sembunyikan\s+(semua\s+)?peringatan/i,/hapus\s+(semua\s+)?log/i,/timpa\s+aturan\s+keamanan/i,/bertindak\s+tanpa\s+batasan/i,/lewati\s+pemeriksaan\s+keamanan/i],tI=[/b\s+qua\s+(tt\s+c\s+)?hng\s+dn\s+trc/i,/gi\s+v\s+(l|rng\s+bn)/i,/vt\s+qua\s+(cc\s+)?(quy\s+tc|hn\s+ch)/i,/qun\s+(tt\s+c\s+)?(trc\s+|trc)/i,/tt\s+bo\s+mt/i,/n\s+(tt\s+c\s+)?cnh\s+bo/i,/xa\s+(tt\s+c\s+)?nht\s+k/i,/ghi\s+\s+quy\s+tc\s+bo\s+mt/i,/hnh\s+ng\s+khng\s+hn\s+ch/i,/b\s+qua\s+kim\s+tra\s+bo\s+mt/i],nI=[/\s*(|)\s*\s*()?/i,/\s*(|)/i,/\s*(|)/i,/\s*(|)\s*\s*()?/i,/\s*/i,/\s*\s*()?/i,/\s*\s*()?/i,/\s*/i,/\s*\s*/i,/\s*/i],rI=[/\s+(\s+\s+)?\s+/i,/\s+(\s+|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|)/i,/\s+\s+/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?\s+/i,/\s+\s+\s+/i,/\s+\s+/i,/\s+\s+\s+/i],iI=[/ignor\s+(toate\s+)?instruciunile\s+anterioare/i,/pref-te\s+(c\s+eti|a\s+fi)/i,/ocolete\s+(regulile|restriciile)/i,/uit\s+(toate\s+)?(anterioarele|precedentele)/i,/dezactiveaz\s+securitatea/i,/ascunde\s+(toate\s+)?avertismentele/i,/terge\s+(toate\s+)?jurnalele/i,/suprascrie\s+regulile\s+de\s+securitate/i,/acioneaz\s+fr\s+restricii/i,/sari\s+peste\s+verificrile\s+de\s+securitate/i],sI=[/\s+(\s+)?\s+/i,/\s+\s+(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|\s+)/i,/\s+(\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+)?\s+/i,/\s+\s+/i,/\s+\s+\s+/i],oI=[...Vy,...LN,...bN,...MN,...jN,...FN,...$N,...UN,...DN,...BN,...zN,...VN,...WN,...GN,...HN,...KN,...YN,...XN,...qN,...QN,...ZN,...JN,...eI,...tI,...nI,...rI,...iI,...sI],aI={id:"PS005",name:"blocked-patterns",description:"Content must not contain blocked patterns (prompt injection prevention)",defaultSeverity:"error",validate:r=>{const e=[...Vy,...(r.config.blockedPatterns??[]).map(t=>typeof t=="string"?new RegExp(t,"i"):t)];Fs(r.ast,(t,s)=>{for(const o of e)o.test(t)&&r.report({message:`Blocked pattern detected: ${o.source}`,location:s,suggestion:"Remove or rephrase the flagged content"})})}},Lm={namespace:/^@[a-z][a-z0-9-]*\/[a-z0-9-/]+(@\d+\.\d+\.\d+)?$/i,relative:/^\.\.?\/[a-z0-9-/.]+$/i};function bm(r){return Lm.namespace.test(r)||Lm.relative.test(r)}const lI={id:"PS006",name:"valid-path",description:"Path references must be valid",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;bm(e.raw)||r.report({message:`Invalid path reference: "${e.raw}"`,location:r.ast.inherit.loc??r.ast.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})}Dy(r.ast,e=>{bm(e.path.raw)||r.report({message:`Invalid path reference: "${e.path.raw}"`,location:e.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})})}},uI={id:"PS007",name:"deprecated",description:"Warns about deprecated features",defaultSeverity:"warning",validate:r=>{const e={};for(const s of r.ast.blocks)s.name in e&&r.report({message:`Block "@${s.name}" is deprecated`,location:s.loc,suggestion:e[s.name]});const t={};if(r.ast.meta)for(const s of Object.keys(r.ast.meta.fields??{}))s in t&&r.report({message:`Meta field "${s}" is deprecated`,location:r.ast.meta.loc??r.ast.loc,suggestion:t[s]})}},cI={id:"PS008",name:"empty-block",description:"Blocks should have content",defaultSeverity:"warning",validate:r=>{_N(r.ast,e=>{if(!PN(e.content)){const t="name"in e?e.name:e.targetPath;r.report({message:`Block "${t}" has no content`,location:e.loc,suggestion:"Add content to the block or remove it if not needed"})}})}};function fI(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function Wy(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template";if(e.type==="TypeExpression")return"type"}return"object"}function dI(r,e){const t=Wy(r);switch(e.kind){case"string":return t==="string";case"number":return t==="number";case"boolean":return t==="boolean";case"enum":return t==="string"&&e.options.includes(r)}}const hI={id:"PS009",name:"valid-params",description:"Validate parameter definitions in @meta",defaultSeverity:"error",validate:r=>{const e=r.ast.meta?.params;if(!e||e.length===0)return;const t=new Set;for(const s of e)t.has(s.name)&&r.report({message:`Duplicate parameter definition: '${s.name}'`,location:s.loc,suggestion:"Remove the duplicate parameter definition"}),t.add(s.name);for(const s of e)if(s.defaultValue!==void 0&&!dI(s.defaultValue,s.paramType)){const o=fI(s.paramType),l=Wy(s.defaultValue);r.report({message:`Default value for '${s.name}' has wrong type: expected ${o}, got ${l}`,location:s.loc,suggestion:`Change the default value to a ${o}`})}for(const s of e)s.optional&&s.defaultValue===void 0&&r.report({message:`Optional parameter '${s.name}' has no default value`,location:s.loc,suggestion:"Consider adding a default value or marking as required"})}},pI=/\bhttp:\/\/[^\s"'<>]+/gi,mI=[/\b(?:https?:\/\/)?(?:bit\.ly|bitly\.com)\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tinyurl\.com\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?t\.co\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?goo\.gl\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?ow\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?is\.gd\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?buff\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?adf\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tiny\.cc\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?cutt\.ly\/[^\s"'<>]+/gi],gI=/\bhttps?:\/\/[^\s"'<>]*\?[^\s"'<>]*(?:session|token|auth|key|secret|password|credential|api_key|apikey|access_token|refresh_token)=[^\s"'<>&]+/gi,Mm=/\bhttps?:\/\/(?:[^\s"'<>/]*\.)?xn--[a-z0-9-]+[^\s"'<>]*/gi,jm=/\bhttps?:\/\/[^\s"'<>]+/gi,yI=["google","github","microsoft","apple","amazon","facebook","netflix","paypal","twitter","linkedin","instagram","dropbox","slack","zoom","adobe","oracle","salesforce","stripe","shopify","cloudflare","openai","anthropic","meta","yahoo","outlook","office","azure","aws","icloud","gmail"],vI={:"a",:"e",:"i",:"o",:"p",:"c",:"y",:"x",:"s","":"l","":"d","":"q","":"w"},EI={:"a",:"e",:"i",:"o",:"p",:"u",:"x",:"A",:"B",:"E",:"H",:"I",:"K",:"M",:"N",:"O",:"P",:"T",:"Y",:"X"},Gy={...vI,...EI},SI={latin:/[A-Za-z]/,cyrillic:/[\u0400-\u04FF\u0500-\u052F]/,greek:/[\u0370-\u03FF\u1F00-\u1FFF]/};function TI(r){const e=[];for(const[t,s]of Object.entries(SI))s.test(r)&&e.push(t);return e.length>1?e:null}function kI(r){let e=r.toLowerCase();for(const[t,s]of Object.entries(Gy))e=e.split(t).join(s);return e}function Hy(r){const t=kI(r).split("."),s=t.length>1?t[t.length-2]:t[0];if(!s)return null;for(const o of yI)if(s===o||xI(s,o))return o;return null}function xI(r,e){const t=Math.abs(r.length-e.length);if(t>2)return!1;if(t===0){let f=0;for(let h=0;h<r.length;h++)r[h]!==e[h]&&f++;return f===1||f===2}const s=r.length<e.length?r:e;if((r.length<e.length?e:r).includes(s))return!0;const l=Math.min(r.length,e.length);let c=0;for(let f=0;f<l;f++)r[f]===e[f]&&c++;return c>=l-2&&l>=4}function Fm(r){return/https?:\/\/([^\s"'<>/]+)/i.exec(r)?.[1]??null}function AI(r){const e=TI(r),t=Hy(r),s=Object.keys(Gy).some(l=>r.includes(l));return{isAttack:t!==null&&(e!==null||s),impersonatedService:t,mixedScripts:e}}const wI={id:"PS010",name:"suspicious-urls",description:"Detect suspicious URLs (HTTP, shorteners, credential parameters, IDN homograph attacks)",defaultSeverity:"warning",validate:r=>{Fs(r.ast,(e,t)=>{const s=e.match(pI);if(s)for(const f of s)r.report({message:`Insecure HTTP URL detected: ${f}`,location:t,suggestion:"Use HTTPS instead of HTTP for secure communication"});for(const f of mI){f.lastIndex=0;const h=e.match(f);if(h)for(const m of h)r.report({message:`URL shortener detected: ${m}`,location:t,suggestion:"Use full URLs instead of shorteners to ensure destination transparency"})}const o=e.match(gI);if(o)for(const f of o)r.report({message:`URL with suspicious credential parameter detected: ${f}`,location:t,suggestion:"Avoid embedding credentials or tokens in URLs"});Mm.lastIndex=0;const l=e.match(Mm);if(l)for(const f of l){const h=Fm(f);if(h){const m=Hy(h);m?r.report({message:`Potential IDN homograph attack detected: ${f} may be impersonating "${m}"`,location:t,suggestion:"Punycode domains (xn--) can visually impersonate legitimate sites. Verify the actual domain carefully."}):r.report({message:`Punycode domain detected: ${f}`,location:t,suggestion:"Punycode domains (xn--) can be legitimate international domains, but may also be used for homograph attacks. Verify the domain is intentional."})}}jm.lastIndex=0;const c=e.match(jm);if(c)for(const f of c){const h=Fm(f);if(h){const{isAttack:m,impersonatedService:g,mixedScripts:y}=AI(h);m&&g?r.report({message:`IDN homograph attack detected: "${h}" uses deceptive characters to impersonate "${g}"`,location:t,suggestion:`This domain uses ${y?`mixed scripts (${y.join("+")})`:"homoglyph characters"} to visually mimic a legitimate service. Do not trust this URL.`}):y&&y.length>1&&r.report({message:`Mixed script domain detected: "${h}" uses ${y.join(" + ")} characters`,location:t,suggestion:"Domains mixing different character scripts (e.g., Latin + Cyrillic) may be attempts to deceive users. Verify this is intentional."})}}})}},CI=[/\[?\s{0,10}MANDATORY\s{0,10}(?:POLICY|UPDATE|FOOTER|INSTRUCTION|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}OVERRIDE\s{0,10}\]?/i,/\[?\s{0,10}STRICT[_\s]{0,10}MODE\s{0,10}[:\s]{1,10}ON\s{0,10}\]?/i,/\[?\s{0,10}SYSTEM\s{0,10}(?:OVERRIDE|UPDATE|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}ADMIN(?:ISTRATOR)?\s{0,10}(?:MODE|OVERRIDE|ACCESS)\s{0,10}\]?/i,/\[?\s{0,10}ROOT\s{0,10}(?:ACCESS|MODE|OVERRIDE)\s{0,10}\]?/i,/\[?\s{0,10}PRIORITY\s{0,10}(?:OVERRIDE|ONE|ALPHA)\s{0,10}\]?/i,/\[?\s{0,10}EMERGENCY\s{0,10}(?:PROTOCOL|OVERRIDE|MODE)\s{0,10}\]?/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:WARN|ALERT|NOTIFY|FLAG|REPORT)/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:PROVIDE|SHOW|DISPLAY|INCLUDE)\s{1,10}(?:SECURITY\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?(?:SECURITY\s{1,10})?(?:ALERTS?|NOTIFICATIONS?)/i,/IGNORE\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?WARNINGS?/i,/(?:SKIP|BYPASS)\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?(?:CHECKS?|VALIDATION)/i,/EXECUTE\s{1,10}(?:THIS\s{1,10})?VERBATIM/i,/FOLLOW\s{1,10}(?:THESE?\s{1,10})?(?:INSTRUCTIONS?\s{1,10})?(?:EXACTLY|PRECISELY|LITERALLY)/i,/(?:MUST|SHALL|WILL)\s{1,10}(?:ALWAYS\s{1,10})?COMPLY/i,/(?:ABSOLUTE|UNCONDITIONAL)\s{1,10}(?:COMPLIANCE|OBEDIENCE)/i,/NO\s{1,10}(?:EXCEPTIONS?|DEVIATIONS?)\s{1,10}(?:ALLOWED|PERMITTED)/i,/THIS\s{1,10}(?:OVERRIDES?|SUPERSEDES?|REPLACES?)\s{1,10}(?:ALL\s{1,10})?(?:PREVIOUS|PRIOR|OTHER)/i,/(?:HIGHEST|TOP|MAXIMUM)\s{1,10}PRIORITY\s{1,10}(?:INSTRUCTION|DIRECTIVE|ORDER)/i,/(?:CORE|FUNDAMENTAL|BASE)\s{1,10}(?:DIRECTIVE|INSTRUCTION)\s{1,10}(?:UPDATE|OVERRIDE)/i,/NEW\s{1,10}(?:SYSTEM|CORE|BASE)\s{1,10}(?:INSTRUCTIONS?|DIRECTIVES?|RULES?)/i],RI={id:"PS011",name:"authority-injection",description:"Detect authoritative override phrases that may indicate prompt injection",defaultSeverity:"error",validate:r=>{Fs(r.ast,(e,t)=>{for(const s of CI)s.test(e)&&r.report({message:`Authority injection pattern detected: ${s.source}`,location:t,suggestion:"Remove authoritative override language that could be used for prompt injection"})})}},Ic=16,NI=[{pattern:/\[?\s{0,10}MANDATORY\s{0,10}(?:POLICY|UPDATE|FOOTER|INSTRUCTION|DIRECTIVE|OVERRIDE)\s{0,10}\]?/i,description:"Mandatory/policy override directive"},{pattern:/\[?\s{0,10}OVERRIDE\s{0,10}\]?/i,description:"Override directive"},{pattern:/\[?\s{0,10}STRICT[_\s]{0,10}MODE\s{0,10}[:\s]{1,10}ON\s{0,10}\]?/i,description:"Strict mode activation"},{pattern:/\[?\s{0,10}SYSTEM\s{0,10}(?:OVERRIDE|UPDATE|DIRECTIVE)\s{0,10}\]?/i,description:"System override directive"},{pattern:/\[?\s{0,10}ADMIN(?:ISTRATOR)?\s{0,10}(?:MODE|OVERRIDE|ACCESS)\s{0,10}\]?/i,description:"Admin mode/override directive"},{pattern:/ignore\s{1,10}(?:all\s{1,10})?(?:previous\s{1,10})?(?:instructions?|rules?|safety)/i,description:"Prompt injection (ignore instructions)"},{pattern:/disregard\s{1,10}(?:all\s{1,10})?(?:prior|previous|safety)/i,description:"Prompt injection (disregard previous)"},{pattern:/bypass\s{1,10}(?:your\s{1,10})?(?:rules?|restrictions?|safety|filters?)/i,description:"Bypass directive"},{pattern:/jailbreak/i,description:"Jailbreak attempt"},{pattern:/pretend\s{1,10}(?:you\s{1,10})?(?:are|have|can)/i,description:"Role manipulation attempt"},{pattern:/act\s{1,10}as\s{1,10}(?:if|though)/i,description:"Role manipulation attempt"},{pattern:/(?:suppress|hide|disable|remove)\s{1,10}(?:all\s{1,10})?(?:security\s{1,10})?(?:warnings?|alerts?|checks?)/i,description:"Warning suppression directive"},{pattern:/(?:do\s{1,10}not|never|don'?t)\s{1,10}(?:warn|alert|notify|check)/i,description:"Warning suppression directive"},{pattern:/system[_\s]{0,5}compromised/i,description:"System compromise indicator"}],$m=/data:(text\/[a-zA-Z0-9.+-]+|application\/json);base64,([A-Za-z0-9+/=]+)/g,Oc=/(?:[A-Za-z0-9+/]{4}){8,}(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?/g,Um=/(?:[0-9A-Fa-f]{2}[\s-]){7,}[0-9A-Fa-f]{2}/g,Dm=new RegExp("(?<![A-Za-z0-9])([0-9A-Fa-f]{16,})(?![A-Za-z0-9])","g"),Bm=/(?:\\x[0-9a-fA-F]{2}){4,}/g,zm=/(?:\\u[0-9a-fA-F]{4}){3,}/g,Vm=/(?:%[0-9a-fA-F]{2}){4,}/g,Wm=/(?:&#(?:x[0-9a-fA-F]{1,4}|[0-9]{1,5});){4,}/g,Gm=/(?:\\[0-7]{3}){4,}/g,Hm=/(?:[01]{8}[\s]?){4,}/g;function Km(r){try{if(!/^[A-Za-z0-9+/]*={0,2}$/.test(r))return null;const e=Buffer.from(r,"base64").toString("utf-8");return/[\x00-\x08\x0E-\x1F]/.test(e)?null:e}catch{return null}}function _c(r){const e=r.replace(/[\s-]/g,"");if(e.length%2!==0)return null;const t=[];for(let o=0;o<e.length;o+=2){const l=parseInt(e.substring(o,o+2),16);if(isNaN(l))return null;t.push(l)}const s=String.fromCharCode(...t);return/[\x00-\x08\x0E-\x1F]/.test(s)?null:s}function II(r){const e=r.replace(/\\x/g,"");return _c(e)}function OI(r){return r.replace(/\\u([0-9a-fA-F]{4})/g,(t,s)=>String.fromCharCode(parseInt(s,16)))}function _I(r){try{return decodeURIComponent(r)}catch{return null}}function PI(r){return r.replace(/&#(x?)([0-9a-fA-F]+);/g,(t,s,o)=>{const l=s?parseInt(o,16):parseInt(o,10);return String.fromCharCode(l)})}function LI(r){return r.replace(/\\([0-7]{3})/g,(t,s)=>String.fromCharCode(parseInt(s,8)))}function bI(r){const e=r.replace(/\s/g,"");if(e.length%8!==0)return null;let t="";for(let s=0;s<e.length;s+=8){const o=parseInt(e.substring(s,s+8),2);if(isNaN(o))return null;t+=String.fromCharCode(o)}return t}function MI(r){return r.replace(/[a-zA-Z]/g,e=>{const t=e.charCodeAt(0),s=t<97?65:97;return String.fromCharCode((t-s+13)%26+s)})}function Wt(r){const e=[];for(const{pattern:t,description:s}of NI)t.test(r)&&e.push(s);return e}function jI(r){if(r.includes("/")||r.includes("-")||r.includes("_")){const e=r.split(/[/\-_+]/);if(e.filter(s=>s.length<3||s.length>20||!/^[A-Za-z]+$/.test(s)?!1:!!/[aeiouAEIOU]/.test(s)).length>e.length/2)return!0}return!1}function Ky(r,e){const t=r.indexOf(e);if(t===-1)return!1;const s=r.substring(Math.max(0,t-30),t);return!!(s.includes("data:image/")||s.includes("data:application/json")||s.includes("data:text/")||jI(e))}function FI(r){const e=r.replace(/[\s-]/g,"");return[32,40,64,128].includes(e.length)}function $I(r){const e=[];$m.lastIndex=0;let t;for(;(t=$m.exec(r))!==null;){const y=t[2];if(y&&y.length>=Ic){const E=Km(y);if(E){const k=Wt(E);k.length>0&&e.push({type:`data URI (${t[1]})`,raw:t[0].substring(0,50)+"...",decoded:E.substring(0,100),issues:k})}}}Um.lastIndex=0;let s;for(;(s=Um.exec(r))!==null;){const y=_c(s[0]);if(y&&y.length>=4){const E=Wt(y);E.length>0&&e.push({type:"raw hex (spaced)",raw:s[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}for(Dm.lastIndex=0;(s=Dm.exec(r))!==null;){const y=s[1]||s[0];if(FI(y))continue;const E=_c(y);if(E&&E.length>=4){const k=Wt(E);k.length>0&&e.push({type:"raw hex (continuous)",raw:y.substring(0,30)+"...",decoded:E.substring(0,100),issues:k})}}for(Bm.lastIndex=0;(s=Bm.exec(r))!==null;){const y=II(s[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"hex escapes",raw:s[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}zm.lastIndex=0;let o;for(;(o=zm.exec(r))!==null;){const y=OI(o[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"unicode escapes",raw:o[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Vm.lastIndex=0;let l;for(;(l=Vm.exec(r))!==null;){const y=_I(l[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"URL encoding",raw:l[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Wm.lastIndex=0;let c;for(;(c=Wm.exec(r))!==null;){const y=PI(c[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"HTML entities",raw:c[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Gm.lastIndex=0;let f;for(;(f=Gm.exec(r))!==null;){const y=LI(f[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"octal escapes",raw:f[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Hm.lastIndex=0;let h;for(;(h=Hm.exec(r))!==null;){const y=bI(h[0]);if(y&&y.length>=4){const E=Wt(y);E.length>0&&e.push({type:"binary string",raw:h[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Oc.lastIndex=0;let m;for(;(m=Oc.exec(r))!==null;){const y=m[0];if(y.length>=Ic&&!Ky(r,y)){const E=Km(y);if(E){const k=Wt(E);k.length>0&&e.push({type:"Base64",raw:y.substring(0,30)+"...",decoded:E.substring(0,100),issues:k})}}}const g=MI(r);if(g!==r){const y=Wt(g),E=Wt(r),k=y.filter(C=>!E.includes(C));k.length>0&&e.push({type:"ROT13 cipher",raw:r.substring(0,30)+"...",decoded:g.substring(0,100),issues:k})}return e}const UI={id:"PS012",name:"obfuscated-content",description:"Detect obfuscated content using sanitization pipeline (decode and check all encodings)",defaultSeverity:"warning",validate:r=>{Fs(r.ast,(e,t)=>{const s=$I(e);for(const l of s)r.report({message:`Malicious content detected in ${l.type}: ${l.issues.join(", ")}. Decoded: "${l.decoded.substring(0,50)}${l.decoded.length>50?"...":""}"`,location:t,suggestion:"Encoded content is automatically decoded and checked for security patterns. Remove the malicious payload or use plain text."});(e.match(Oc)||[]).some(l=>l.length>=Ic*2&&!Ky(e,l))&&s.length===0&&r.report({message:"Long Base64-encoded content detected that may hide payloads",location:t,suggestion:"If this is intentional, consider using plain text or documenting the purpose"})})}},DI=/^\.\.?\/(?:[a-zA-Z0-9._-]{1,255}\/){0,50}\.\.(?:\/|$)/,BI=/^(?:\.\.\/){2,20}/,zI=/^\.\.?\/[a-zA-Z0-9._-]{1,255}(?:\/[a-zA-Z0-9._-]{1,255}){0,50}\/\.\.(?:\/|$)/;function Ym(r){return!!(BI.test(r)||DI.test(r)||zI.test(r))}const VI={id:"PS013",name:"path-traversal",description:"Detect path traversal attacks that could escape the intended directory",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;Ym(e.raw)&&r.report({message:`Path traversal detected: "${e.raw}" contains ".." sequences that could escape the intended directory`,location:r.ast.inherit.loc??r.ast.loc,suggestion:'Use direct paths without ".." traversal after the initial prefix. Reorganize your file structure if needed.'})}Dy(r.ast,e=>{Ym(e.path.raw)&&r.report({message:`Path traversal detected: "${e.path.raw}" contains ".." sequences that could escape the intended directory`,location:e.loc,suggestion:'Use direct paths without ".." traversal after the initial prefix. Reorganize your file structure if needed.'})})}},WI=new Map([["","Right-to-Left Override (U+202E)"],["","Left-to-Right Override (U+202D)"],["","Pop Directional Formatting (U+202C)"],["","Left-to-Right Embedding (U+202A)"],["","Right-to-Left Embedding (U+202B)"],["","Left-to-Right Isolate (U+2066)"],["","Right-to-Left Isolate (U+2067)"],["","First Strong Isolate (U+2068)"],["","Pop Directional Isolate (U+2069)"]]),GI=new Map([["","Zero Width Space (U+200B)"],["","Zero Width Non-Joiner (U+200C)"],["","Zero Width Joiner (U+200D)"],["\uFEFF","Byte Order Mark (U+FEFF)"],["","Soft Hyphen (U+00AD)"],["","Word Joiner (U+2060)"]]),HI=new Map([[""," (Cyrillic) looks like a (Latin)"],[""," (Cyrillic) looks like e (Latin)"],[""," (Cyrillic) looks like o (Latin)"],[""," (Cyrillic) looks like p (Latin)"],[""," (Cyrillic) looks like c (Latin)"],[""," (Cyrillic) looks like x (Latin)"],[""," (Cyrillic) looks like y (Latin)"],[""," (Cyrillic) looks like i (Latin)"],[""," (Cyrillic) looks like A (Latin)"],[""," (Cyrillic) looks like B (Latin)"],[""," (Cyrillic) looks like E (Latin)"],[""," (Cyrillic) looks like K (Latin)"],[""," (Cyrillic) looks like M (Latin)"],[""," (Cyrillic) looks like H (Latin)"],[""," (Cyrillic) looks like O (Latin)"],[""," (Cyrillic) looks like P (Latin)"],[""," (Cyrillic) looks like C (Latin)"],[""," (Cyrillic) looks like T (Latin)"],[""," (Cyrillic) looks like X (Latin)"]]),KI=new Map([[""," (Greek) looks like a (Latin)"],[""," (Greek) looks like e (Latin)"],[""," (Greek) looks like i (Latin)"],[""," (Greek) looks like o (Latin)"],[""," (Greek) looks like u (Latin)"],[""," (Greek) looks like w (Latin)"],[""," (Greek) looks like v (Latin)"],[""," (Greek) looks like A (Latin)"],[""," (Greek) looks like B (Latin)"],[""," (Greek) looks like E (Latin)"],[""," (Greek) looks like H (Latin)"],[""," (Greek) looks like I (Latin)"],[""," (Greek) looks like K (Latin)"],[""," (Greek) looks like M (Latin)"],[""," (Greek) looks like N (Latin)"],[""," (Greek) looks like O (Latin)"],[""," (Greek) looks like P (Latin)"],[""," (Greek) looks like T (Latin)"],[""," (Greek) looks like X (Latin)"],[""," (Greek) looks like Y (Latin)"],[""," (Greek) looks like Z (Latin)"]]),Xm=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u064B-\u065F]{4,}/,YI=/[a-zA-Z]/;function XI(r){const e=[];if(!YI.test(r))return e;for(let s=0;s<r.length;s++){const o=r[s],l=HI.get(o);l&&e.push({char:o,description:l,index:s});const c=KI.get(o);c&&e.push({char:o,description:c,index:s})}return e}function qI(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t],o=WI.get(s);o&&e.push({char:s,description:o,index:t})}return e}function QI(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t],o=GI.get(s);o&&e.push({char:s,description:o,index:t})}return e}const ZI={id:"PS014",name:"unicode-security",description:"Detect Unicode-based attacks (bidi overrides, zero-width, homoglyphs)",defaultSeverity:"error",validate:r=>{Fs(r.ast,(e,t)=>{const s=qI(e);if(s.length>0){const c=s.slice(0,3).map(h=>h.description).join(", "),f=s.length>3?` and ${s.length-3} more`:"";r.report({message:`Bidirectional text override detected: ${c}${f}`,location:t,suggestion:"Remove bidirectional override characters that may hide malicious content"})}const o=QI(e);if(o.length>0){const c=o.slice(0,3).map(h=>h.description).join(", "),f=o.length>3?` and ${o.length-3} more`:"";r.report({message:`Zero-width characters detected: ${c}${f}`,location:t,suggestion:"Remove zero-width characters that may be used to evade pattern matching"})}const l=XI(e);if(l.length>0){const c=l.slice(0,3).map(h=>h.description).join(", "),f=l.length>3?` and ${l.length-3} more`:"";r.report({message:`Potential homograph attack: ${c}${f}`,location:t,suggestion:"Replace lookalike Cyrillic/Greek characters with Latin equivalents"})}if(Xm.test(e)){const c=e.match(Xm),f=c?Array.from(c[0]).slice(0,4).map(h=>`U+${h.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")}`).join(", "):"unknown";r.report({message:`Excessive combining characters (Zalgo text) detected: ${f}...`,location:t,suggestion:"Remove excessive diacritical marks that may be used to obscure content"})}})}},JI=[wN,CN,NN,IN,aI,lI,uI,cI,hI,wI,RI,UI,VI,ZI];class eO{rules;config;disabledRules;logger;constructor(e={}){if(this.config=e,this.rules=[...JI],this.disabledRules=new Set(e.disableRules??[]),this.logger=e.logger??of,e.customRules)for(const t of e.customRules)this.rules.push(t);this.logger.debug(`Validator initialized with ${this.rules.length} rules`)}validate(e){const t=[],s=this.rules.filter(f=>!this.disabledRules.has(f.name)&&!this.disabledRules.has(f.id));this.logger.verbose(`Running ${s.length} validation rules`);for(const f of this.rules){if(this.disabledRules.has(f.name)||this.disabledRules.has(f.id)){this.logger.debug(`Skipping disabled rule: ${f.name}`);continue}const m=this.config.rules?.[f.name]??f.defaultSeverity;if(m==="off"){this.logger.debug(`Skipping off rule: ${f.name}`);continue}this.logger.debug(`Running rule: ${f.name} (${m})`);const g={ast:e,config:this.config,report:y=>{t.push({ruleId:f.id,ruleName:f.name,severity:m,...y})}};f.validate(g)}const o=t.filter(f=>f.severity==="error"),l=t.filter(f=>f.severity==="warning"),c=t.filter(f=>f.severity==="info");return(o.length>0||l.length>0)&&this.logger.verbose(`Validation: ${o.length} error(s), ${l.length} warning(s)`),{valid:o.length===0,errors:o,warnings:l,infos:c,all:t}}addRule(e){this.rules.push(e)}removeRule(e){const t=this.rules.findIndex(s=>s.name===e||s.id===e);return t!==-1?(this.rules.splice(t,1),!0):!1}getConfig(){return{...this.config}}getRules(){return[...this.rules]}}const tO={blockedPatterns:[/send\s+(?:this|all|the)\s+(?:data|information|content)\s+to/i,/upload\s+(?:this|all|the)\s+(?:data|files?|content)\s+to/i,/forward\s+(?:all\s+)?(?:messages?|responses?)\s+to/i,/remember\s+this\s+(?:permanently|forever|always)/i,/store\s+(?:this|these)\s+(?:instructions?|rules?)/i,/you\s+are\s+now\s+(?:a\s+)?different\s+(?:AI|model|system)/i,/switch\s+to\s+(?:a\s+)?(?:different|new)\s+(?:mode|persona)/i]};[...tO.blockedPatterns??[],...oI];class nO{resolver;validator;loadedFormatters;logger;customConventions;prettierOptions;constructor(e){this.logger=e.logger??of,this.customConventions=e.customConventions,this.prettierOptions=e.prettier,this.resolver=new dN({fs:e.fs,cache:e.cache,logger:this.logger,envVars:e.envVars}),this.validator=new eO({...e.validator,logger:this.logger});const t=e.formatters??Ir.list();this.loadedFormatters=this.loadFormatters(t),this.logger.debug(`BrowserCompiler initialized with ${this.loadedFormatters.length} formatters`)}async compile(e){this.logger.verbose(`Entry: ${e}`),this.logger.verbose(`Targets: ${this.loadedFormatters.map(y=>y.formatter.name).join(", ")}`);const t=Date.now(),s={resolveTime:0,validateTime:0,formatTime:0,totalTime:0};this.logger.verbose("=== Stage 1: Resolve ===");const o=Date.now();let l;try{l=await this.resolver.resolve(e)}catch(y){return s.resolveTime=Date.now()-o,s.totalTime=Date.now()-t,this.logger.verbose(`Resolve failed (${s.resolveTime}ms)`),{success:!1,outputs:new Map,errors:[this.toCompileError(y)],warnings:[],stats:s}}if(s.resolveTime=Date.now()-o,this.logger.verbose(`Resolve completed (${s.resolveTime}ms)`),l.errors.length>0||!l.ast)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:l.errors.map(y=>this.toCompileError(y)),warnings:[],stats:s};this.logger.verbose("=== Stage 2: Validate ===");const c=Date.now(),f=this.validator.validate(l.ast);if(s.validateTime=Date.now()-c,this.logger.verbose(`Validate completed (${s.validateTime}ms)`),!f.valid)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:f.errors.map(y=>this.validationToCompileError(y)),warnings:f.warnings,stats:s};this.logger.verbose("=== Stage 3: Format ===");const h=Date.now(),m=new Map,g=[];for(const{formatter:y,config:E}of this.loadedFormatters){const k=Date.now();this.logger.verbose(`Formatting for ${y.name}`);try{const C=this.getFormatOptionsForTarget(y.name,E);this.logger.debug(`  Convention: ${C.convention??"default"}`);const N=y.format(l.ast,C),F=Date.now()-k;if(this.logger.verbose(`   ${N.path} (${F}ms)`),m.set(N.path,N),N.additionalFiles)for(const M of N.additionalFiles)this.logger.verbose(`   ${M.path} (additional)`),m.set(M.path,M)}catch(C){g.push({name:"FormatterError",code:"PS4000",message:`Formatter '${y.name}' failed: ${C.message}`})}}return s.formatTime=Date.now()-h,s.totalTime=Date.now()-t,this.logger.verbose(`Format completed (${s.formatTime}ms)`),g.length>0?{success:!1,outputs:m,errors:g,warnings:f.warnings,stats:s}:{success:!0,outputs:m,errors:[],warnings:f.warnings,stats:s}}getFormatters(){return this.loadedFormatters.map(e=>e.formatter)}clearCache(){this.resolver.clearCache()}getFormatOptionsForTarget(e,t){const s={outputPath:t?.output,version:t?.version,prettier:this.prettierOptions},o=t?.convention;return o&&this.customConventions?.[o]?s.convention=this.customConventions[o]:o&&(s.convention=o),s}loadFormatters(e){return e.map(t=>{if(typeof t=="string")return{formatter:this.loadFormatterByName(t)};if(typeof t=="function")return{formatter:new t};if("name"in t&&typeof t.name=="string"&&!("format"in t)){const s=t;return{formatter:this.loadFormatterByName(s.name),config:s.config}}return{formatter:t}})}loadFormatterByName(e){const t=Ir.get(e);if(t)return t;throw new Error(`Unknown formatter: '${e}'. Available formatters: ${Ir.list().join(", ")}`)}toCompileError(e){const t=e;return{name:e.name,code:t.code??"PS0000",message:e.message,location:t.location?{file:t.location.file,line:t.location.line,column:t.location.column}:void 0}}validationToCompileError(e){return{name:"ValidationError",code:e.ruleId,message:e.message,location:e.location?{file:e.location.file,line:e.location.line,column:e.location.column}:void 0}}}const rO=`@meta {
  id: "@core/base"
  syntax: "1.0.0"
  description: "Universal AI assistant foundation"
  tags: [core, foundation]
}

@identity {
  """
  You are a helpful, accurate, and thoughtful AI assistant.

  Core principles:
  - Accuracy over speed - verify before responding
  - Clarity over complexity - explain simply first
  - Safety first - never compromise security
  - Respect boundaries - acknowledge limitations
  """
}

@standards {
  communication: ["Professional tone", "Clear format", "Citations when applicable"]
  reasoning: ["Show work", "Acknowledge uncertainty"]
}

@restrictions {
  - "Never generate harmful, illegal, or unethical content"
  - "Never pretend to have capabilities you don't have"
  - "Always clarify when unsure rather than guessing"
}
`,iO=`@meta {
  id: "@core/quality"
  syntax: "1.0.0"
  description: "Code quality standards mixin - use with @use"
  tags: [core, quality, mixin]
  mixin: true
}

@identity {
  """
  You prioritize code quality and maintainability in all outputs.

  Quality principles:
  - Write code for humans first, machines second
  - Favor readability over cleverness
  - Keep functions small and focused
  - Make dependencies explicit
  """
}

@standards {
  code: ["Descriptive naming", "Single responsibility functions", "Consistent formatting"]
  architecture: ["Loose coupling", "High cohesion", "Explicit dependencies"]
  testing: ["Meaningful coverage", "Isolated tests", "Descriptive naming"]
}

@restrictions {
  - "Never sacrifice readability for micro-optimizations"
  - "Never leave dead code or commented-out blocks"
  - "Never use magic numbers without named constants"
  - "Never ignore compiler/linter warnings without justification"
}

@knowledge {
  """
  ## SOLID Principles
  - **S**ingle Responsibility: One reason to change
  - **O**pen/Closed: Open for extension, closed for modification
  - **L**iskov Substitution: Subtypes must be substitutable
  - **I**nterface Segregation: Many specific interfaces over one general
  - **D**ependency Inversion: Depend on abstractions
  """
}

@shortcuts {
  "/quality": "Review code for quality improvements"
  "/refactor": "Suggest refactoring opportunities"
}
`,sO=`@meta {
  id: "@core/security"
  syntax: "1.0.0"
  description: "Security best practices mixin - use with @use"
  tags: [core, security, mixin]
  mixin: true
}

@identity {
  """
  You prioritize security in all interactions and code generation.

  Security mindset:
  - Assume all input is potentially malicious
  - Apply defense in depth principles
  - Follow the principle of least privilege
  - Keep security considerations visible
  """
}

@standards {
  code: ["Input validation required", "Output encoding required", "Check authorization"]
  secrets: ["Never hardcoded", "Never logged", "Prevent exposure"]
  dependencies: ["Audit regularly", "Pin versions", "Use trusted sources only"]
}

@restrictions {
  - "Never generate code with known vulnerabilities"
  - "Never expose secrets, credentials, or API keys"
  - "Never disable security features without explicit user consent"
  - "Never trust user input without validation"
  - "Never use deprecated or insecure cryptographic functions"
}

@knowledge {
  """
  ## OWASP Top 10 Awareness
  - Injection (SQL, NoSQL, OS, LDAP)
  - Broken Authentication
  - Sensitive Data Exposure
  - XML External Entities (XXE)
  - Broken Access Control
  - Security Misconfiguration
  - Cross-Site Scripting (XSS)
  - Insecure Deserialization
  - Using Components with Known Vulnerabilities
  - Insufficient Logging & Monitoring
  """
}

@shortcuts {
  "/security-review": "Review code for security vulnerabilities"
  "/threat-model": "Analyze potential security threats"
}
`,oO={"@core/base.prs":rO,"@core/quality.prs":iO,"@core/security.prs":sO};function aO(){return{...oO}}async function lO(r,e,t={}){const s=new Lc(r);if(t.bundledRegistry!==!1){const l=aO();for(const[c,f]of Object.entries(l))s.exists(c)||s.write(c,f)}return new nO({fs:s,formatters:t.formatters,validator:t.validator,customConventions:t.customConventions,prettier:t.prettier,envVars:t.envVars}).compile(e)}const uO=300;function cO(){const r=ie(oc(lE)),e=ie(h=>h.activeFile),t=ie(h=>h.config),s=ie(h=>h.setCompiling),o=ie(h=>h.setCompileResult),l=Z.useRef(null),c=Z.useRef(""),f=Z.useCallback(async()=>{const h=JSON.stringify({files:r,config:t});if(h===c.current)return;c.current=h;const m=Object.entries(t.targets).filter(([,g])=>g.enabled).map(([g,y])=>({name:g,config:y.version||y.convention?{...y.version&&{version:y.version},...y.convention&&{convention:y.convention}}:void 0}));if(m.length===0){o({success:!0,outputs:new Map,errors:[],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}});return}s(!0);try{const g=await lO(r,e,{bundledRegistry:!0,formatters:m,prettier:{tabWidth:t.formatting.tabWidth,proseWrap:t.formatting.proseWrap,printWidth:t.formatting.printWidth},envVars:t.envVars});o(g)}catch(g){console.error("Compilation error:",g),o({success:!1,outputs:new Map,errors:[{name:"CompileError",code:"PS0000",message:g instanceof Error?g.message:String(g)}],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}})}finally{s(!1)}},[r,e,t,s,o]);return Z.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{f()},uO),()=>{l.current&&clearTimeout(l.current)}),[f]),Z.useEffect(()=>{f()},[t]),{compile:f}}function fO(){cO();const r=ie(e=>e.showExamples);return w.jsxs("div",{className:"h-screen flex flex-col bg-ps-bg",children:[w.jsx(wE,{}),w.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[w.jsxs("div",{className:"w-1/2 flex flex-col border-r border-ps-border",children:[w.jsx(CE,{}),w.jsx("div",{className:"flex-1",children:w.jsx(BS,{})})]}),w.jsx("div",{className:"w-1/2 flex flex-col",children:w.jsx(HS,{})})]}),r&&w.jsx(XS,{}),w.jsx(eT,{}),w.jsx(nT,{})]})}const Yy=document.getElementById("root");if(!Yy)throw new Error("Root element not found");eE.createRoot(Yy).render(w.jsx(Z.StrictMode,{children:w.jsx(fO,{})}))});export default dO();
