var N0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var LO=N0((_t,Pt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Pc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $u={exports:{}},ls={},Uu={exports:{}},ge={};var Jh;function O0(){if(Jh)return ge;Jh=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function E(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,R={};function j(A,F,fe){this.props=A,this.context=F,this.refs=R,this.updater=fe||k}j.prototype.isReactComponent={},j.prototype.setState=function(A,F){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,F,"setState")},j.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=j.prototype;function _(A,F,fe){this.props=A,this.context=F,this.refs=R,this.updater=fe||k}var P=_.prototype=new M;P.constructor=_,w(P,j.prototype),P.isPureReactComponent=!0;var b=Array.isArray,z=Object.prototype.hasOwnProperty,L={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function G(A,F,fe){var te,Ee={},oe=null,he=null;if(F!=null)for(te in F.ref!==void 0&&(he=F.ref),F.key!==void 0&&(oe=""+F.key),F)z.call(F,te)&&!D.hasOwnProperty(te)&&(Ee[te]=F[te]);var ye=arguments.length-2;if(ye===1)Ee.children=fe;else if(1<ye){for(var me=Array(ye),Le=0;Le<ye;Le++)me[Le]=arguments[Le+2];Ee.children=me}if(A&&A.defaultProps)for(te in ye=A.defaultProps,ye)Ee[te]===void 0&&(Ee[te]=ye[te]);return{$$typeof:r,type:A,key:oe,ref:he,props:Ee,_owner:L.current}}function Ae(A,F){return{$$typeof:r,type:A.type,key:F,ref:A.ref,props:A.props,_owner:A._owner}}function ce(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function Ge(A){var F={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(fe){return F[fe]})}var tt=/\/+/g;function $e(A,F){return typeof A=="object"&&A!==null&&A.key!=null?Ge(""+A.key):F.toString(36)}function Ue(A,F,fe,te,Ee){var oe=typeof A;(oe==="undefined"||oe==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case r:case e:he=!0}}if(he)return he=A,Ee=Ee(he),A=te===""?"."+$e(he,0):te,b(Ee)?(fe="",A!=null&&(fe=A.replace(tt,"$&/")+"/"),Ue(Ee,F,fe,"",function(Le){return Le})):Ee!=null&&(ce(Ee)&&(Ee=Ae(Ee,fe+(!Ee.key||he&&he.key===Ee.key?"":(""+Ee.key).replace(tt,"$&/")+"/")+A)),F.push(Ee)),1;if(he=0,te=te===""?".":te+":",b(A))for(var ye=0;ye<A.length;ye++){oe=A[ye];var me=te+$e(oe,ye);he+=Ue(oe,F,fe,me,Ee)}else if(me=E(A),typeof me=="function")for(A=me.call(A),ye=0;!(oe=A.next()).done;)oe=oe.value,me=te+$e(oe,ye++),he+=Ue(oe,F,fe,me,Ee);else if(oe==="object")throw F=String(A),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return he}function de(A,F,fe){if(A==null)return A;var te=[],Ee=0;return Ue(A,te,"","",function(oe){return F.call(fe,oe,Ee++)}),te}function ve(A){if(A._status===-1){var F=A._result;F=F(),F.then(function(fe){(A._status===0||A._status===-1)&&(A._status=1,A._result=fe)},function(fe){(A._status===0||A._status===-1)&&(A._status=2,A._result=fe)}),A._status===-1&&(A._status=0,A._result=F)}if(A._status===1)return A._result.default;throw A._result}var xe={current:null},W={transition:null},J={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function K(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:de,forEach:function(A,F,fe){de(A,function(){F.apply(this,arguments)},fe)},count:function(A){var F=0;return de(A,function(){F++}),F},toArray:function(A){return de(A,function(F){return F})||[]},only:function(A){if(!ce(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ge.Component=j,ge.Fragment=t,ge.Profiler=a,ge.PureComponent=_,ge.StrictMode=s,ge.Suspense=h,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ge.act=K,ge.cloneElement=function(A,F,fe){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var te=w({},A.props),Ee=A.key,oe=A.ref,he=A._owner;if(F!=null){if(F.ref!==void 0&&(oe=F.ref,he=L.current),F.key!==void 0&&(Ee=""+F.key),A.type&&A.type.defaultProps)var ye=A.type.defaultProps;for(me in F)z.call(F,me)&&!D.hasOwnProperty(me)&&(te[me]=F[me]===void 0&&ye!==void 0?ye[me]:F[me])}var me=arguments.length-2;if(me===1)te.children=fe;else if(1<me){ye=Array(me);for(var Le=0;Le<me;Le++)ye[Le]=arguments[Le+2];te.children=ye}return{$$typeof:r,type:A.type,key:Ee,ref:oe,props:te,_owner:he}},ge.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},ge.createElement=G,ge.createFactory=function(A){var F=G.bind(null,A);return F.type=A,F},ge.createRef=function(){return{current:null}},ge.forwardRef=function(A){return{$$typeof:f,render:A}},ge.isValidElement=ce,ge.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:ve}},ge.memo=function(A,F){return{$$typeof:m,type:A,compare:F===void 0?null:F}},ge.startTransition=function(A){var F=W.transition;W.transition={};try{A()}finally{W.transition=F}},ge.unstable_act=K,ge.useCallback=function(A,F){return xe.current.useCallback(A,F)},ge.useContext=function(A){return xe.current.useContext(A)},ge.useDebugValue=function(){},ge.useDeferredValue=function(A){return xe.current.useDeferredValue(A)},ge.useEffect=function(A,F){return xe.current.useEffect(A,F)},ge.useId=function(){return xe.current.useId()},ge.useImperativeHandle=function(A,F,fe){return xe.current.useImperativeHandle(A,F,fe)},ge.useInsertionEffect=function(A,F){return xe.current.useInsertionEffect(A,F)},ge.useLayoutEffect=function(A,F){return xe.current.useLayoutEffect(A,F)},ge.useMemo=function(A,F){return xe.current.useMemo(A,F)},ge.useReducer=function(A,F,fe){return xe.current.useReducer(A,F,fe)},ge.useRef=function(A){return xe.current.useRef(A)},ge.useState=function(A){return xe.current.useState(A)},ge.useSyncExternalStore=function(A,F,fe){return xe.current.useSyncExternalStore(A,F,fe)},ge.useTransition=function(){return xe.current.useTransition()},ge.version="18.3.1",ge}var ep;function Rs(){return ep||(ep=1,Uu.exports=O0()),Uu.exports}var tp;function I0(){if(tp)return ls;tp=1;var r=Rs(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var g,y={},E=null,k=null;m!==void 0&&(E=""+m),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(k=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(f&&f.defaultProps)for(g in h=f.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:f,key:E,ref:k,props:y,_owner:a.current}}return ls.Fragment=t,ls.jsx=c,ls.jsxs=c,ls}var np;function _0(){return np||(np=1,$u.exports=I0()),$u.exports}var C=_0(),Z=Rs();const Rr=Pc(Z);var Ko={},Du={exports:{}},St={},Bu={exports:{}},zu={};var rp;function P0(){return rp||(rp=1,(function(r){function e(W,J){var K=W.length;W.push(J);e:for(;0<K;){var A=K-1>>>1,F=W[A];if(0<a(F,J))W[A]=J,W[K]=F,K=A;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var J=W[0],K=W.pop();if(K!==J){W[0]=K;e:for(var A=0,F=W.length,fe=F>>>1;A<fe;){var te=2*(A+1)-1,Ee=W[te],oe=te+1,he=W[oe];if(0>a(Ee,K))oe<F&&0>a(he,Ee)?(W[A]=he,W[oe]=K,A=oe):(W[A]=Ee,W[te]=K,A=te);else if(oe<F&&0>a(he,K))W[A]=he,W[oe]=K,A=oe;else break e}}return J}function a(W,J){var K=W.sortIndex-J.sortIndex;return K!==0?K:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,E=3,k=!1,w=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var J=t(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=W)s(m),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(m)}}function b(W){if(R=!1,P(W),!w)if(t(h)!==null)w=!0,ve(z);else{var J=t(m);J!==null&&xe(b,J.startTime-W)}}function z(W,J){w=!1,R&&(R=!1,M(G),G=-1),k=!0;var K=E;try{for(P(J),y=t(h);y!==null&&(!(y.expirationTime>J)||W&&!Ge());){var A=y.callback;if(typeof A=="function"){y.callback=null,E=y.priorityLevel;var F=A(y.expirationTime<=J);J=r.unstable_now(),typeof F=="function"?y.callback=F:y===t(h)&&s(h),P(J)}else s(h);y=t(h)}if(y!==null)var fe=!0;else{var te=t(m);te!==null&&xe(b,te.startTime-J),fe=!1}return fe}finally{y=null,E=K,k=!1}}var L=!1,D=null,G=-1,Ae=5,ce=-1;function Ge(){return!(r.unstable_now()-ce<Ae)}function tt(){if(D!==null){var W=r.unstable_now();ce=W;var J=!0;try{J=D(!0,W)}finally{J?$e():(L=!1,D=null)}}else L=!1}var $e;if(typeof _=="function")$e=function(){_(tt)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,de=Ue.port2;Ue.port1.onmessage=tt,$e=function(){de.postMessage(null)}}else $e=function(){j(tt,0)};function ve(W){D=W,L||(L=!0,$e())}function xe(W,J){G=j(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){w||k||(w=!0,ve(z))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(W){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var K=E;E=J;try{return W()}finally{E=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=E;E=W;try{return J()}finally{E=K}},r.unstable_scheduleCallback=function(W,J,K){var A=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?A+K:A):K=A,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=K+F,W={id:g++,callback:J,priorityLevel:W,startTime:K,expirationTime:F,sortIndex:-1},K>A?(W.sortIndex=K,e(m,W),t(h)===null&&W===t(m)&&(R?(M(G),G=-1):R=!0,xe(b,K-A))):(W.sortIndex=F,e(h,W),w||k||(w=!0,ve(z))),W},r.unstable_shouldYield=Ge,r.unstable_wrapCallback=function(W){var J=E;return function(){var K=E;E=J;try{return W.apply(this,arguments)}finally{E=K}}}})(zu)),zu}var ip;function L0(){return ip||(ip=1,Bu.exports=P0()),Bu.exports}var sp;function b0(){if(sp)return St;sp=1;var r=Rs(),e=L0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function E(n){return h.call(y,n)?!0:h.call(g,n)?!1:m.test(n)?y[n]=!0:(g[n]=!0,!1)}function k(n,i,o,u){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w(n,i,o,u){if(i===null||typeof i>"u"||k(n,i,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function R(n,i,o,u,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new R(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new R(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new R(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new R(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new R(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new R(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new R(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new R(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new R(n,5,!1,n.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function _(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,o,u){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,o,d,u)&&(o=null),u||d===null?E(i)&&(o===null?n.removeAttribute(i):n.setAttribute(i,""+o)):d.mustUseProperty?n[d.propertyName]=o===null?d.type===3?!1:"":o:(i=d.attributeName,u=d.attributeNamespace,o===null?n.removeAttribute(i):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,u?n.setAttributeNS(u,i,o):n.setAttribute(i,o))))}var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),L=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,A;function F(n){if(A===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);A=i&&i[1]||""}return`
`+A+n}var fe=!1;function te(n,i){if(!n||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(I){var u=I}Reflect.construct(n,[],i)}else{try{i.call()}catch(I){u=I}n.call(i.prototype)}else{try{throw Error()}catch(I){u=I}n()}}catch(I){if(I&&u&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),p=u.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var T=`
`+d[v].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=v&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?F(n):""}function Ee(n){switch(n.tag){case 5:return F(n.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case L:return"Portal";case Ae:return"Profiler";case G:return"StrictMode";case $e:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case ce:return(n._context.displayName||"Context")+".Provider";case tt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return i=n.displayName||null,i!==null?i:oe(n.type)||"Memo";case ve:i=n._payload,n=n._init;try{return oe(n(i))}catch{}}return null}function he(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function me(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Le(n){var i=me(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function At(n){n._valueTracker||(n._valueTracker=Le(n))}function jt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=me(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function dr(n,i){var o=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function ki(n,i){var o=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;o=ye(i.value!=null?i.value:o),n._wrapperState={initialChecked:u,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function af(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function Ka(n,i){af(n,i);var o=ye(i.value),u=i.type;if(o!=null)u==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ha(n,i.type,o):i.hasOwnProperty("defaultValue")&&Ha(n,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function lf(n,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,o||i===n.value||(n.value=i),n.defaultValue=i}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function Ha(n,i,o){(i!=="number"||Ft(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var xi=Array.isArray;function jr(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ye(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Ya(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function uf(n,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(t(92));if(xi(o)){if(1<o.length)throw Error(t(93));o=o[0]}i=o}i==null&&(i=""),o=i}n._wrapperState={initialValue:ye(o)}}function cf(n,i){var o=ye(i.value),u=ye(i.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),i.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),u!=null&&(n.defaultValue=""+u)}function ff(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function df(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?df(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fs,hf=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,u,d){MSApp.execUnsafeLocalFunction(function(){return n(i,o,u,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Ai(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pv=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(n){Pv.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),wi[i]=wi[n]})});function pf(n,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||wi.hasOwnProperty(n)&&wi[n]?(""+i).trim():i+"px"}function mf(n,i){n=n.style;for(var o in i)if(i.hasOwnProperty(o)){var u=o.indexOf("--")===0,d=pf(o,i[o],u);o==="float"&&(o="cssFloat"),u?n.setProperty(o,d):n[o]=d}}var Lv=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(n,i){if(i){if(Lv[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Qa(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Ja(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var el=null,Fr=null,$r=null;function gf(n){if(n=Hi(n)){if(typeof el!="function")throw Error(t(280));var i=n.stateNode;i&&(i=oo(i),el(n.stateNode,n.type,i))}}function vf(n){Fr?$r?$r.push(n):$r=[n]:Fr=n}function yf(){if(Fr){var n=Fr,i=$r;if($r=Fr=null,gf(n),i)for(n=0;n<i.length;n++)gf(i[n])}}function Ef(n,i){return n(i)}function Sf(){}var tl=!1;function Tf(n,i,o){if(tl)return n(i,o);tl=!0;try{return Ef(n,i,o)}finally{tl=!1,(Fr!==null||$r!==null)&&(Sf(),yf())}}function Ci(n,i){var o=n.stateNode;if(o===null)return null;var u=oo(o);if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,i,typeof o));return o}var nl=!1;if(f)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{nl=!1}function bv(n,i,o,u,d,p,v,S,T){var I=Array.prototype.slice.call(arguments,3);try{i.apply(o,I)}catch(U){this.onError(U)}}var Ni=!1,$s=null,Us=!1,rl=null,Mv={onError:function(n){Ni=!0,$s=n}};function jv(n,i,o,u,d,p,v,S,T){Ni=!1,$s=null,bv.apply(Mv,arguments)}function Fv(n,i,o,u,d,p,v,S,T){if(jv.apply(this,arguments),Ni){if(Ni){var I=$s;Ni=!1,$s=null}else throw Error(t(198));Us||(Us=!0,rl=I)}}function hr(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function kf(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function xf(n){if(hr(n)!==n)throw Error(t(188))}function $v(n){var i=n.alternate;if(!i){if(i=hr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return xf(d),n;if(p===u)return xf(d),i;p=p.sibling}throw Error(t(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,S=d.child;S;){if(S===o){v=!0,o=d,u=p;break}if(S===u){v=!0,u=d,o=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===o){v=!0,o=p,u=d;break}if(S===u){v=!0,u=p,o=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(o.alternate!==u)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:i}function Af(n){return n=$v(n),n!==null?wf(n):null}function wf(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=wf(n);if(i!==null)return i;n=n.sibling}return null}var Cf=e.unstable_scheduleCallback,Rf=e.unstable_cancelCallback,Uv=e.unstable_shouldYield,Dv=e.unstable_requestPaint,Ve=e.unstable_now,Bv=e.unstable_getCurrentPriorityLevel,il=e.unstable_ImmediatePriority,Nf=e.unstable_UserBlockingPriority,Ds=e.unstable_NormalPriority,zv=e.unstable_LowPriority,Of=e.unstable_IdlePriority,Bs=null,fn=null;function Vv(n){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Bs,n,void 0,(n.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Kv,Wv=Math.log,Gv=Math.LN2;function Kv(n){return n>>>=0,n===0?32:31-(Wv(n)/Gv|0)|0}var zs=64,Vs=4194304;function Oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ws(n,i){var o=n.pendingLanes;if(o===0)return 0;var u=0,d=n.suspendedLanes,p=n.pingedLanes,v=o&268435455;if(v!==0){var S=v&~d;S!==0?u=Oi(S):(p&=v,p!==0&&(u=Oi(p)))}else v=o&~d,v!==0?u=Oi(v):p!==0&&(u=Oi(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=o&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)o=31-Xt(i),d=1<<o,u|=n[o],i&=~d;return u}function Hv(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-Xt(p),S=1<<v,T=d[v];T===-1?((S&o)===0||(S&u)!==0)&&(d[v]=Hv(S,i)):T<=i&&(n.expiredLanes|=S),p&=~S}}function sl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function If(){var n=zs;return zs<<=1,(zs&4194240)===0&&(zs=64),n}function ol(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ii(n,i,o){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Xt(i),n[i]=o}function qv(n,i){var o=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<o;){var d=31-Xt(o),p=1<<d;i[d]=0,u[d]=-1,n[d]=-1,o&=~p}}function al(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-Xt(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}var we=0;function _f(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Pf,ll,Lf,bf,Mf,ul=!1,Gs=[],$n=null,Un=null,Dn=null,_i=new Map,Pi=new Map,Bn=[],Xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jf(n,i){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":_i.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(i.pointerId)}}function Li(n,i,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Hi(i),i!==null&&ll(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Qv(n,i,o,u,d){switch(i){case"focusin":return $n=Li($n,n,i,o,u,d),!0;case"dragenter":return Un=Li(Un,n,i,o,u,d),!0;case"mouseover":return Dn=Li(Dn,n,i,o,u,d),!0;case"pointerover":var p=d.pointerId;return _i.set(p,Li(_i.get(p)||null,n,i,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Pi.set(p,Li(Pi.get(p)||null,n,i,o,u,d)),!0}return!1}function Ff(n){var i=pr(n.target);if(i!==null){var o=hr(i);if(o!==null){if(i=o.tag,i===13){if(i=kf(o),i!==null){n.blockedOn=i,Mf(n.priority,function(){Lf(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ks(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=fl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Za=u,o.target.dispatchEvent(u),Za=null}else return i=Hi(o),i!==null&&ll(i),n.blockedOn=o,!1;i.shift()}return!0}function $f(n,i,o){Ks(n)&&o.delete(i)}function Zv(){ul=!1,$n!==null&&Ks($n)&&($n=null),Un!==null&&Ks(Un)&&(Un=null),Dn!==null&&Ks(Dn)&&(Dn=null),_i.forEach($f),Pi.forEach($f)}function bi(n,i){n.blockedOn===i&&(n.blockedOn=null,ul||(ul=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zv)))}function Mi(n){function i(d){return bi(d,n)}if(0<Gs.length){bi(Gs[0],n);for(var o=1;o<Gs.length;o++){var u=Gs[o];u.blockedOn===n&&(u.blockedOn=null)}}for($n!==null&&bi($n,n),Un!==null&&bi(Un,n),Dn!==null&&bi(Dn,n),_i.forEach(i),Pi.forEach(i),o=0;o<Bn.length;o++)u=Bn[o],u.blockedOn===n&&(u.blockedOn=null);for(;0<Bn.length&&(o=Bn[0],o.blockedOn===null);)Ff(o),o.blockedOn===null&&Bn.shift()}var Ur=b.ReactCurrentBatchConfig,Hs=!0;function Jv(n,i,o,u){var d=we,p=Ur.transition;Ur.transition=null;try{we=1,cl(n,i,o,u)}finally{we=d,Ur.transition=p}}function ey(n,i,o,u){var d=we,p=Ur.transition;Ur.transition=null;try{we=4,cl(n,i,o,u)}finally{we=d,Ur.transition=p}}function cl(n,i,o,u){if(Hs){var d=fl(n,i,o,u);if(d===null)Nl(n,i,u,Ys,o),jf(n,u);else if(Qv(d,n,i,o,u))u.stopPropagation();else if(jf(n,u),i&4&&-1<Xv.indexOf(n)){for(;d!==null;){var p=Hi(d);if(p!==null&&Pf(p),p=fl(n,i,o,u),p===null&&Nl(n,i,u,Ys,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Nl(n,i,u,null,o)}}var Ys=null;function fl(n,i,o,u){if(Ys=null,n=Ja(u),n=pr(n),n!==null)if(i=hr(n),i===null)n=null;else if(o=i.tag,o===13){if(n=kf(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ys=n,null}function Uf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bv()){case il:return 1;case Nf:return 4;case Ds:case zv:return 16;case Of:return 536870912;default:return 16}default:return 16}}var zn=null,dl=null,qs=null;function Df(){if(qs)return qs;var n,i=dl,o=i.length,u,d="value"in zn?zn.value:zn.textContent,p=d.length;for(n=0;n<o&&i[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===d[p-u];u++);return qs=d.slice(n,1<u?1-u:void 0)}function Xs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Qs(){return!0}function Bf(){return!1}function wt(n){function i(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qs:Bf,this.isPropagationStopped=Bf,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),i}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=wt(Dr),ji=K({},Dr,{view:0,detail:0}),ty=wt(ji),pl,ml,Fi,Zs=K({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fi&&(Fi&&n.type==="mousemove"?(pl=n.screenX-Fi.screenX,ml=n.screenY-Fi.screenY):ml=pl=0,Fi=n),pl)},movementY:function(n){return"movementY"in n?n.movementY:ml}}),zf=wt(Zs),ny=K({},Zs,{dataTransfer:0}),ry=wt(ny),iy=K({},ji,{relatedTarget:0}),gl=wt(iy),sy=K({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=wt(sy),ay=K({},Dr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ly=wt(ay),uy=K({},Dr,{data:0}),Vf=wt(uy),cy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hy(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=dy[n])?!!i[n]:!1}function vl(){return hy}var py=K({},ji,{key:function(n){if(n.key){var i=cy[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?Xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),my=wt(py),gy=K({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=wt(gy),vy=K({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),yy=wt(vy),Ey=K({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sy=wt(Ey),Ty=K({},Zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=wt(Ty),xy=[9,13,27,32],yl=f&&"CompositionEvent"in window,$i=null;f&&"documentMode"in document&&($i=document.documentMode);var Ay=f&&"TextEvent"in window&&!$i,Gf=f&&(!yl||$i&&8<$i&&11>=$i),Kf=" ",Hf=!1;function Yf(n,i){switch(n){case"keyup":return xy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Br=!1;function wy(n,i){switch(n){case"compositionend":return qf(i);case"keypress":return i.which!==32?null:(Hf=!0,Kf);case"textInput":return n=i.data,n===Kf&&Hf?null:n;default:return null}}function Cy(n,i){if(Br)return n==="compositionend"||!yl&&Yf(n,i)?(n=Df(),qs=dl=zn=null,Br=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Gf&&i.locale!=="ko"?null:i.data;default:return null}}var Ry={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ry[n.type]:i==="textarea"}function Qf(n,i,o,u){vf(u),i=ro(i,"onChange"),0<i.length&&(o=new hl("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Ui=null,Di=null;function Ny(n){md(n,0)}function Js(n){var i=Kr(n);if(jt(i))return n}function Oy(n,i){if(n==="change")return i}var Zf=!1;if(f){var El;if(f){var Sl="oninput"in document;if(!Sl){var Jf=document.createElement("div");Jf.setAttribute("oninput","return;"),Sl=typeof Jf.oninput=="function"}El=Sl}else El=!1;Zf=El&&(!document.documentMode||9<document.documentMode)}function ed(){Ui&&(Ui.detachEvent("onpropertychange",td),Di=Ui=null)}function td(n){if(n.propertyName==="value"&&Js(Di)){var i=[];Qf(i,Di,n,Ja(n)),Tf(Ny,i)}}function Iy(n,i,o){n==="focusin"?(ed(),Ui=i,Di=o,Ui.attachEvent("onpropertychange",td)):n==="focusout"&&ed()}function _y(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Js(Di)}function Py(n,i){if(n==="click")return Js(i)}function Ly(n,i){if(n==="input"||n==="change")return Js(i)}function by(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Qt=typeof Object.is=="function"?Object.is:by;function Bi(n,i){if(Qt(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!h.call(i,d)||!Qt(n[d],i[d]))return!1}return!0}function nd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rd(n,i){var o=nd(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nd(o)}}function id(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?id(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function sd(){for(var n=window,i=Ft();i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ft(n.document)}return i}function Tl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function My(n){var i=sd(),o=n.focusedElem,u=n.selectionRange;if(i!==o&&o&&o.ownerDocument&&id(o.ownerDocument.documentElement,o)){if(u!==null&&Tl(o)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(n,o.value.length);else if(n=(i=o.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=o.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!n.extend&&p>u&&(d=u,u=p,p=d),d=rd(o,p);var v=rd(o,u);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>u?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=o;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)n=i[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var jy=f&&"documentMode"in document&&11>=document.documentMode,zr=null,kl=null,zi=null,xl=!1;function od(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xl||zr==null||zr!==Ft(u)||(u=zr,"selectionStart"in u&&Tl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zi&&Bi(zi,u)||(zi=u,u=ro(kl,"onSelect"),0<u.length&&(i=new hl("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=zr)))}function eo(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Vr={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionend:eo("Transition","TransitionEnd")},Al={},ad={};f&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function to(n){if(Al[n])return Al[n];if(!Vr[n])return n;var i=Vr[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in ad)return Al[n]=i[o];return n}var ld=to("animationend"),ud=to("animationiteration"),cd=to("animationstart"),fd=to("transitionend"),dd=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(n,i){dd.set(n,i),l(i,[n])}for(var wl=0;wl<hd.length;wl++){var Cl=hd[wl],Fy=Cl.toLowerCase(),$y=Cl[0].toUpperCase()+Cl.slice(1);Vn(Fy,"on"+$y)}Vn(ld,"onAnimationEnd"),Vn(ud,"onAnimationIteration"),Vn(cd,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(fd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function pd(n,i,o){var u=n.type||"unknown-event";n.currentTarget=o,Fv(u,i,void 0,n),n.currentTarget=null}function md(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var S=u[v],T=S.instance,I=S.currentTarget;if(S=S.listener,T!==p&&d.isPropagationStopped())break e;pd(d,S,I),p=T}else for(v=0;v<u.length;v++){if(S=u[v],T=S.instance,I=S.currentTarget,S=S.listener,T!==p&&d.isPropagationStopped())break e;pd(d,S,I),p=T}}}if(Us)throw n=rl,Us=!1,rl=null,n}function Oe(n,i){var o=i[bl];o===void 0&&(o=i[bl]=new Set);var u=n+"__bubble";o.has(u)||(gd(i,n,2,!1),o.add(u))}function Rl(n,i,o){var u=0;i&&(u|=4),gd(o,n,u,i)}var no="_reactListening"+Math.random().toString(36).slice(2);function Wi(n){if(!n[no]){n[no]=!0,s.forEach(function(o){o!=="selectionchange"&&(Uy.has(o)||Rl(o,!1,n),Rl(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[no]||(i[no]=!0,Rl("selectionchange",!1,i))}}function gd(n,i,o,u){switch(Uf(i)){case 1:var d=Jv;break;case 4:d=ey;break;default:d=cl}o=d.bind(null,i,o,n),d=void 0,!nl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function Nl(n,i,o,u,d){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===d||T.nodeType===8&&T.parentNode===d))return;v=v.return}for(;S!==null;){if(v=pr(S),v===null)return;if(T=v.tag,T===5||T===6){u=p=v;continue e}S=S.parentNode}}u=u.return}Tf(function(){var I=p,U=Ja(o),B=[];e:{var $=dd.get(n);if($!==void 0){var H=hl,q=n;switch(n){case"keypress":if(Xs(o)===0)break e;case"keydown":case"keyup":H=my;break;case"focusin":q="focus",H=gl;break;case"focusout":q="blur",H=gl;break;case"beforeblur":case"afterblur":H=gl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=ry;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=yy;break;case ld:case ud:case cd:H=oy;break;case fd:H=Sy;break;case"scroll":H=ty;break;case"wheel":H=ky;break;case"copy":case"cut":case"paste":H=ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Wf}var X=(i&4)!==0,We=!X&&n==="scroll",N=X?$!==null?$+"Capture":null:$;X=[];for(var x=I,O;x!==null;){O=x;var V=O.stateNode;if(O.tag===5&&V!==null&&(O=V,N!==null&&(V=Ci(x,N),V!=null&&X.push(Gi(x,V,O)))),We)break;x=x.return}0<X.length&&($=new H($,q,null,o,U),B.push({event:$,listeners:X}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",$&&o!==Za&&(q=o.relatedTarget||o.fromElement)&&(pr(q)||q[An]))break e;if((H||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,H?(q=o.relatedTarget||o.toElement,H=I,q=q?pr(q):null,q!==null&&(We=hr(q),q!==We||q.tag!==5&&q.tag!==6)&&(q=null)):(H=null,q=I),H!==q)){if(X=zf,V="onMouseLeave",N="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(X=Wf,V="onPointerLeave",N="onPointerEnter",x="pointer"),We=H==null?$:Kr(H),O=q==null?$:Kr(q),$=new X(V,x+"leave",H,o,U),$.target=We,$.relatedTarget=O,V=null,pr(U)===I&&(X=new X(N,x+"enter",q,o,U),X.target=O,X.relatedTarget=We,V=X),We=V,H&&q)t:{for(X=H,N=q,x=0,O=X;O;O=Wr(O))x++;for(O=0,V=N;V;V=Wr(V))O++;for(;0<x-O;)X=Wr(X),x--;for(;0<O-x;)N=Wr(N),O--;for(;x--;){if(X===N||N!==null&&X===N.alternate)break t;X=Wr(X),N=Wr(N)}X=null}else X=null;H!==null&&vd(B,$,H,X,!1),q!==null&&We!==null&&vd(B,We,q,X,!0)}}e:{if($=I?Kr(I):window,H=$.nodeName&&$.nodeName.toLowerCase(),H==="select"||H==="input"&&$.type==="file")var Q=Oy;else if(Xf($))if(Zf)Q=Ly;else{Q=_y;var ne=Iy}else(H=$.nodeName)&&H.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=Py);if(Q&&(Q=Q(n,I))){Qf(B,Q,o,U);break e}ne&&ne(n,$,I),n==="focusout"&&(ne=$._wrapperState)&&ne.controlled&&$.type==="number"&&Ha($,"number",$.value)}switch(ne=I?Kr(I):window,n){case"focusin":(Xf(ne)||ne.contentEditable==="true")&&(zr=ne,kl=I,zi=null);break;case"focusout":zi=kl=zr=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,od(B,o,U);break;case"selectionchange":if(jy)break;case"keydown":case"keyup":od(B,o,U)}var re;if(yl)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Br?Yf(n,o)&&(ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ue="onCompositionStart");ue&&(Gf&&o.locale!=="ko"&&(Br||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Br&&(re=Df()):(zn=U,dl="value"in zn?zn.value:zn.textContent,Br=!0)),ne=ro(I,ue),0<ne.length&&(ue=new Vf(ue,n,null,o,U),B.push({event:ue,listeners:ne}),re?ue.data=re:(re=qf(o),re!==null&&(ue.data=re)))),(re=Ay?wy(n,o):Cy(n,o))&&(I=ro(I,"onBeforeInput"),0<I.length&&(U=new Vf("onBeforeInput","beforeinput",null,o,U),B.push({event:U,listeners:I}),U.data=re))}md(B,i)})}function Gi(n,i,o){return{instance:n,listener:i,currentTarget:o}}function ro(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ci(n,o),p!=null&&u.unshift(Gi(n,p,d)),p=Ci(n,i),p!=null&&u.push(Gi(n,p,d))),n=n.return}return u}function Wr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vd(n,i,o,u,d){for(var p=i._reactName,v=[];o!==null&&o!==u;){var S=o,T=S.alternate,I=S.stateNode;if(T!==null&&T===u)break;S.tag===5&&I!==null&&(S=I,d?(T=Ci(o,p),T!=null&&v.unshift(Gi(o,T,S))):d||(T=Ci(o,p),T!=null&&v.push(Gi(o,T,S)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var Dy=/\r\n?/g,By=/\u0000|\uFFFD/g;function yd(n){return(typeof n=="string"?n:""+n).replace(Dy,`
`).replace(By,"")}function io(n,i,o){if(i=yd(i),yd(n)!==i&&o)throw Error(t(425))}function so(){}var Ol=null,Il=null;function _l(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pl=typeof setTimeout=="function"?setTimeout:void 0,zy=typeof clearTimeout=="function"?clearTimeout:void 0,Ed=typeof Promise=="function"?Promise:void 0,Vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ed<"u"?function(n){return Ed.resolve(null).then(n).catch(Wy)}:Pl;function Wy(n){setTimeout(function(){throw n})}function Ll(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(u===0){n.removeChild(d),Mi(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=d}while(o);Mi(i)}function Wn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Sd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),dn="__reactFiber$"+Gr,Ki="__reactProps$"+Gr,An="__reactContainer$"+Gr,bl="__reactEvents$"+Gr,Gy="__reactListeners$"+Gr,Ky="__reactHandles$"+Gr;function pr(n){var i=n[dn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[An]||o[dn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Sd(n);n!==null;){if(o=n[dn])return o;n=Sd(n)}return i}n=o,o=n.parentNode}return null}function Hi(n){return n=n[dn]||n[An],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Kr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function oo(n){return n[Ki]||null}var Ml=[],Hr=-1;function Gn(n){return{current:n}}function Ie(n){0>Hr||(n.current=Ml[Hr],Ml[Hr]=null,Hr--)}function Ce(n,i){Hr++,Ml[Hr]=n.current,n.current=i}var Kn={},ot=Gn(Kn),mt=Gn(!1),mr=Kn;function Yr(n,i){var o=n.type.contextTypes;if(!o)return Kn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=i[p];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function gt(n){return n=n.childContextTypes,n!=null}function ao(){Ie(mt),Ie(ot)}function Td(n,i,o){if(ot.current!==Kn)throw Error(t(168));Ce(ot,i),Ce(mt,o)}function kd(n,i,o){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(t(108,he(n)||"Unknown",d));return K({},o,u)}function lo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kn,mr=ot.current,Ce(ot,n),Ce(mt,mt.current),!0}function xd(n,i,o){var u=n.stateNode;if(!u)throw Error(t(169));o?(n=kd(n,i,mr),u.__reactInternalMemoizedMergedChildContext=n,Ie(mt),Ie(ot),Ce(ot,n)):Ie(mt),Ce(mt,o)}var wn=null,uo=!1,jl=!1;function Ad(n){wn===null?wn=[n]:wn.push(n)}function Hy(n){uo=!0,Ad(n)}function Hn(){if(!jl&&wn!==null){jl=!0;var n=0,i=we;try{var o=wn;for(we=1;n<o.length;n++){var u=o[n];do u=u(!0);while(u!==null)}wn=null,uo=!1}catch(d){throw wn!==null&&(wn=wn.slice(n+1)),Cf(il,Hn),d}finally{we=i,jl=!1}}return null}var qr=[],Xr=0,co=null,fo=0,$t=[],Ut=0,gr=null,Cn=1,Rn="";function vr(n,i){qr[Xr++]=fo,qr[Xr++]=co,co=n,fo=i}function wd(n,i,o){$t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=gr,gr=n;var u=Cn;n=Rn;var d=32-Xt(u)-1;u&=~(1<<d),o+=1;var p=32-Xt(i)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Cn=1<<32-Xt(i)+d|o<<d|u,Rn=p+n}else Cn=1<<p|o<<d|u,Rn=n}function Fl(n){n.return!==null&&(vr(n,1),wd(n,1,0))}function $l(n){for(;n===co;)co=qr[--Xr],qr[Xr]=null,fo=qr[--Xr],qr[Xr]=null;for(;n===gr;)gr=$t[--Ut],$t[Ut]=null,Rn=$t[--Ut],$t[Ut]=null,Cn=$t[--Ut],$t[Ut]=null}var Ct=null,Rt=null,Pe=!1,Zt=null;function Cd(n,i){var o=Vt(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=n,i=n.deletions,i===null?(n.deletions=[o],n.flags|=16):i.push(o)}function Rd(n,i){switch(n.tag){case 5:var o=n.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=Wn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=gr!==null?{id:Cn,overflow:Rn}:null,n.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Vt(18,null,null,0),o.stateNode=i,o.return=n,n.child=o,Ct=n,Rt=null,!0):!1;default:return!1}}function Ul(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dl(n){if(Pe){var i=Rt;if(i){var o=i;if(!Rd(n,i)){if(Ul(n))throw Error(t(418));i=Wn(o.nextSibling);var u=Ct;i&&Rd(n,i)?Cd(u,o):(n.flags=n.flags&-4097|2,Pe=!1,Ct=n)}}else{if(Ul(n))throw Error(t(418));n.flags=n.flags&-4097|2,Pe=!1,Ct=n}}}function Nd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ct=n}function ho(n){if(n!==Ct)return!1;if(!Pe)return Nd(n),Pe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!_l(n.type,n.memoizedProps)),i&&(i=Rt)){if(Ul(n))throw Od(),Error(t(418));for(;i;)Cd(n,i),i=Wn(i.nextSibling)}if(Nd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(i===0){Rt=Wn(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}n=n.nextSibling}Rt=null}}else Rt=Ct?Wn(n.stateNode.nextSibling):null;return!0}function Od(){for(var n=Rt;n;)n=Wn(n.nextSibling)}function Qr(){Rt=Ct=null,Pe=!1}function Bl(n){Zt===null?Zt=[n]:Zt.push(n)}var Yy=b.ReactCurrentBatchConfig;function Yi(n,i,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var u=o.stateNode}if(!u)throw Error(t(147,n));var d=u,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function po(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Id(n){var i=n._init;return i(n._payload)}function _d(n){function i(N,x){if(n){var O=N.deletions;O===null?(N.deletions=[x],N.flags|=16):O.push(x)}}function o(N,x){if(!n)return null;for(;x!==null;)i(N,x),x=x.sibling;return null}function u(N,x){for(N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function d(N,x){return N=tr(N,x),N.index=0,N.sibling=null,N}function p(N,x,O){return N.index=O,n?(O=N.alternate,O!==null?(O=O.index,O<x?(N.flags|=2,x):O):(N.flags|=2,x)):(N.flags|=1048576,x)}function v(N){return n&&N.alternate===null&&(N.flags|=2),N}function S(N,x,O,V){return x===null||x.tag!==6?(x=Pu(O,N.mode,V),x.return=N,x):(x=d(x,O),x.return=N,x)}function T(N,x,O,V){var Q=O.type;return Q===D?U(N,x,O.props.children,V,O.key):x!==null&&(x.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ve&&Id(Q)===x.type)?(V=d(x,O.props),V.ref=Yi(N,x,O),V.return=N,V):(V=$o(O.type,O.key,O.props,null,N.mode,V),V.ref=Yi(N,x,O),V.return=N,V)}function I(N,x,O,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==O.containerInfo||x.stateNode.implementation!==O.implementation?(x=Lu(O,N.mode,V),x.return=N,x):(x=d(x,O.children||[]),x.return=N,x)}function U(N,x,O,V,Q){return x===null||x.tag!==7?(x=wr(O,N.mode,V,Q),x.return=N,x):(x=d(x,O),x.return=N,x)}function B(N,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Pu(""+x,N.mode,O),x.return=N,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case z:return O=$o(x.type,x.key,x.props,null,N.mode,O),O.ref=Yi(N,null,x),O.return=N,O;case L:return x=Lu(x,N.mode,O),x.return=N,x;case ve:var V=x._init;return B(N,V(x._payload),O)}if(xi(x)||J(x))return x=wr(x,N.mode,O,null),x.return=N,x;po(N,x)}return null}function $(N,x,O,V){var Q=x!==null?x.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Q!==null?null:S(N,x,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return O.key===Q?T(N,x,O,V):null;case L:return O.key===Q?I(N,x,O,V):null;case ve:return Q=O._init,$(N,x,Q(O._payload),V)}if(xi(O)||J(O))return Q!==null?null:U(N,x,O,V,null);po(N,O)}return null}function H(N,x,O,V,Q){if(typeof V=="string"&&V!==""||typeof V=="number")return N=N.get(O)||null,S(x,N,""+V,Q);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return N=N.get(V.key===null?O:V.key)||null,T(x,N,V,Q);case L:return N=N.get(V.key===null?O:V.key)||null,I(x,N,V,Q);case ve:var ne=V._init;return H(N,x,O,ne(V._payload),Q)}if(xi(V)||J(V))return N=N.get(O)||null,U(x,N,V,Q,null);po(x,V)}return null}function q(N,x,O,V){for(var Q=null,ne=null,re=x,ue=x=0,et=null;re!==null&&ue<O.length;ue++){re.index>ue?(et=re,re=null):et=re.sibling;var ke=$(N,re,O[ue],V);if(ke===null){re===null&&(re=et);break}n&&re&&ke.alternate===null&&i(N,re),x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke,re=et}if(ue===O.length)return o(N,re),Pe&&vr(N,ue),Q;if(re===null){for(;ue<O.length;ue++)re=B(N,O[ue],V),re!==null&&(x=p(re,x,ue),ne===null?Q=re:ne.sibling=re,ne=re);return Pe&&vr(N,ue),Q}for(re=u(N,re);ue<O.length;ue++)et=H(re,N,ue,O[ue],V),et!==null&&(n&&et.alternate!==null&&re.delete(et.key===null?ue:et.key),x=p(et,x,ue),ne===null?Q=et:ne.sibling=et,ne=et);return n&&re.forEach(function(nr){return i(N,nr)}),Pe&&vr(N,ue),Q}function X(N,x,O,V){var Q=J(O);if(typeof Q!="function")throw Error(t(150));if(O=Q.call(O),O==null)throw Error(t(151));for(var ne=Q=null,re=x,ue=x=0,et=null,ke=O.next();re!==null&&!ke.done;ue++,ke=O.next()){re.index>ue?(et=re,re=null):et=re.sibling;var nr=$(N,re,ke.value,V);if(nr===null){re===null&&(re=et);break}n&&re&&nr.alternate===null&&i(N,re),x=p(nr,x,ue),ne===null?Q=nr:ne.sibling=nr,ne=nr,re=et}if(ke.done)return o(N,re),Pe&&vr(N,ue),Q;if(re===null){for(;!ke.done;ue++,ke=O.next())ke=B(N,ke.value,V),ke!==null&&(x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return Pe&&vr(N,ue),Q}for(re=u(N,re);!ke.done;ue++,ke=O.next())ke=H(re,N,ue,ke.value,V),ke!==null&&(n&&ke.alternate!==null&&re.delete(ke.key===null?ue:ke.key),x=p(ke,x,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return n&&re.forEach(function(R0){return i(N,R0)}),Pe&&vr(N,ue),Q}function We(N,x,O,V){if(typeof O=="object"&&O!==null&&O.type===D&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case z:e:{for(var Q=O.key,ne=x;ne!==null;){if(ne.key===Q){if(Q=O.type,Q===D){if(ne.tag===7){o(N,ne.sibling),x=d(ne,O.props.children),x.return=N,N=x;break e}}else if(ne.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ve&&Id(Q)===ne.type){o(N,ne.sibling),x=d(ne,O.props),x.ref=Yi(N,ne,O),x.return=N,N=x;break e}o(N,ne);break}else i(N,ne);ne=ne.sibling}O.type===D?(x=wr(O.props.children,N.mode,V,O.key),x.return=N,N=x):(V=$o(O.type,O.key,O.props,null,N.mode,V),V.ref=Yi(N,x,O),V.return=N,N=V)}return v(N);case L:e:{for(ne=O.key;x!==null;){if(x.key===ne)if(x.tag===4&&x.stateNode.containerInfo===O.containerInfo&&x.stateNode.implementation===O.implementation){o(N,x.sibling),x=d(x,O.children||[]),x.return=N,N=x;break e}else{o(N,x);break}else i(N,x);x=x.sibling}x=Lu(O,N.mode,V),x.return=N,N=x}return v(N);case ve:return ne=O._init,We(N,x,ne(O._payload),V)}if(xi(O))return q(N,x,O,V);if(J(O))return X(N,x,O,V);po(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,x!==null&&x.tag===6?(o(N,x.sibling),x=d(x,O),x.return=N,N=x):(o(N,x),x=Pu(O,N.mode,V),x.return=N,N=x),v(N)):o(N,x)}return We}var Zr=_d(!0),Pd=_d(!1),mo=Gn(null),go=null,Jr=null,zl=null;function Vl(){zl=Jr=go=null}function Wl(n){var i=mo.current;Ie(mo),n._currentValue=i}function Gl(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function ei(n,i){go=n,zl=Jr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(vt=!0),n.firstContext=null)}function Dt(n){var i=n._currentValue;if(zl!==n)if(n={context:n,memoizedValue:i,next:null},Jr===null){if(go===null)throw Error(t(308));Jr=n,go.dependencies={lanes:0,firstContext:n}}else Jr=Jr.next=n;return i}var yr=null;function Kl(n){yr===null?yr=[n]:yr.push(n)}function Ld(n,i,o,u){var d=i.interleaved;return d===null?(o.next=o,Kl(i)):(o.next=d.next,d.next=o),i.interleaved=o,Nn(n,u)}function Nn(n,i){n.lanes|=i;var o=n.alternate;for(o!==null&&(o.lanes|=i),o=n,n=n.return;n!==null;)n.childLanes|=i,o=n.alternate,o!==null&&(o.childLanes|=i),o=n,n=n.return;return o.tag===3?o.stateNode:null}var Yn=!1;function Hl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function On(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function qn(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Se&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,Nn(n,o)}return d=u.interleaved,d===null?(i.next=i,Kl(u)):(i.next=d.next,d.next=i),u.interleaved=i,Nn(n,o)}function vo(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,al(n,o)}}function Md(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=i:p=p.next=i}else d=p=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}function yo(n,i,o,u){var d=n.updateQueue;Yn=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var T=S,I=T.next;T.next=null,v===null?p=I:v.next=I,v=T;var U=n.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==v&&(S===null?U.firstBaseUpdate=I:S.next=I,U.lastBaseUpdate=T))}if(p!==null){var B=d.baseState;v=0,U=I=T=null,S=p;do{var $=S.lane,H=S.eventTime;if((u&$)===$){U!==null&&(U=U.next={eventTime:H,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var q=n,X=S;switch($=i,H=o,X.tag){case 1:if(q=X.payload,typeof q=="function"){B=q.call(H,B,$);break e}B=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=X.payload,$=typeof q=="function"?q.call(H,B,$):q,$==null)break e;B=K({},B,$);break e;case 2:Yn=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[S]:$.push(S))}else H={eventTime:H,lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(I=U=H,T=B):U=U.next=H,v|=$;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(T=B),d.baseState=T,d.firstBaseUpdate=I,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);Tr|=v,n.lanes=v,n.memoizedState=B}}function jd(n,i,o){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],d=u.callback;if(d!==null){if(u.callback=null,u=o,typeof d!="function")throw Error(t(191,d));d.call(u)}}}var qi={},hn=Gn(qi),Xi=Gn(qi),Qi=Gn(qi);function Er(n){if(n===qi)throw Error(t(174));return n}function Yl(n,i){switch(Ce(Qi,i),Ce(Xi,n),Ce(hn,qi),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qa(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=qa(i,n)}Ie(hn),Ce(hn,i)}function ti(){Ie(hn),Ie(Xi),Ie(Qi)}function Fd(n){Er(Qi.current);var i=Er(hn.current),o=qa(i,n.type);i!==o&&(Ce(Xi,n),Ce(hn,o))}function ql(n){Xi.current===n&&(Ie(hn),Ie(Xi))}var be=Gn(0);function Eo(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xl=[];function Ql(){for(var n=0;n<Xl.length;n++)Xl[n]._workInProgressVersionPrimary=null;Xl.length=0}var So=b.ReactCurrentDispatcher,Zl=b.ReactCurrentBatchConfig,Sr=0,Me=null,He=null,Ze=null,To=!1,Zi=!1,Ji=0,qy=0;function at(){throw Error(t(321))}function Jl(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Qt(n[o],i[o]))return!1;return!0}function eu(n,i,o,u,d,p){if(Sr=p,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,So.current=n===null||n.memoizedState===null?Jy:e0,n=o(u,d),Zi){p=0;do{if(Zi=!1,Ji=0,25<=p)throw Error(t(301));p+=1,Ze=He=null,i.updateQueue=null,So.current=t0,n=o(u,d)}while(Zi)}if(So.current=Ao,i=He!==null&&He.next!==null,Sr=0,Ze=He=Me=null,To=!1,i)throw Error(t(300));return n}function tu(){var n=Ji!==0;return Ji=0,n}function pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Bt(){if(He===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=He.next;var i=Ze===null?Me.memoizedState:Ze.next;if(i!==null)Ze=i,He=n;else{if(n===null)throw Error(t(310));He=n,n={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function es(n,i){return typeof i=="function"?i(n):i}function nu(n){var i=Bt(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=He,d=u.baseQueue,p=o.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}u.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,u=u.baseState;var S=v=null,T=null,I=p;do{var U=I.lane;if((Sr&U)===U)T!==null&&(T=T.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),u=I.hasEagerState?I.eagerState:n(u,I.action);else{var B={lane:U,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};T===null?(S=T=B,v=u):T=T.next=B,Me.lanes|=U,Tr|=U}I=I.next}while(I!==null&&I!==p);T===null?v=u:T.next=S,Qt(u,i.memoizedState)||(vt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=T,o.lastRenderedState=u}if(n=o.interleaved,n!==null){d=n;do p=d.lane,Me.lanes|=p,Tr|=p,d=d.next;while(d!==n)}else d===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function ru(n){var i=Bt(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Qt(p,i.memoizedState)||(vt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function $d(){}function Ud(n,i){var o=Me,u=Bt(),d=i(),p=!Qt(u.memoizedState,d);if(p&&(u.memoizedState=d,vt=!0),u=u.queue,iu(zd.bind(null,o,u,n),[n]),u.getSnapshot!==i||p||Ze!==null&&Ze.memoizedState.tag&1){if(o.flags|=2048,ts(9,Bd.bind(null,o,u,d,i),void 0,null),Je===null)throw Error(t(349));(Sr&30)!==0||Dd(o,i,d)}return d}function Dd(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Bd(n,i,o,u){i.value=o,i.getSnapshot=u,Vd(i)&&Wd(n)}function zd(n,i,o){return o(function(){Vd(i)&&Wd(n)})}function Vd(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Qt(n,o)}catch{return!0}}function Wd(n){var i=Nn(n,1);i!==null&&nn(i,n,1,-1)}function Gd(n){var i=pn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:n},i.queue=n,n=n.dispatch=Zy.bind(null,Me,n),[i.memoizedState,n]}function ts(n,i,o,u){return n={tag:n,create:i,destroy:o,deps:u,next:null},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.lastEffect=n.next=n):(o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n)),n}function Kd(){return Bt().memoizedState}function ko(n,i,o,u){var d=pn();Me.flags|=n,d.memoizedState=ts(1|i,o,void 0,u===void 0?null:u)}function xo(n,i,o,u){var d=Bt();u=u===void 0?null:u;var p=void 0;if(He!==null){var v=He.memoizedState;if(p=v.destroy,u!==null&&Jl(u,v.deps)){d.memoizedState=ts(i,o,p,u);return}}Me.flags|=n,d.memoizedState=ts(1|i,o,p,u)}function Hd(n,i){return ko(8390656,8,n,i)}function iu(n,i){return xo(2048,8,n,i)}function Yd(n,i){return xo(4,2,n,i)}function qd(n,i){return xo(4,4,n,i)}function Xd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qd(n,i,o){return o=o!=null?o.concat([n]):null,xo(4,4,Xd.bind(null,i,n),o)}function su(){}function Zd(n,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Jl(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function Jd(n,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Jl(i,u[1])?u[0]:(n=n(),o.memoizedState=[n,i],n)}function eh(n,i,o){return(Sr&21)===0?(n.baseState&&(n.baseState=!1,vt=!0),n.memoizedState=o):(Qt(o,i)||(o=If(),Me.lanes|=o,Tr|=o,n.baseState=!0),i)}function Xy(n,i){var o=we;we=o!==0&&4>o?o:4,n(!0);var u=Zl.transition;Zl.transition={};try{n(!1),i()}finally{we=o,Zl.transition=u}}function th(){return Bt().memoizedState}function Qy(n,i,o){var u=Jn(n);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},nh(n))rh(i,o);else if(o=Ld(n,i,o,u),o!==null){var d=ft();nn(o,n,u,d),ih(o,i,u)}}function Zy(n,i,o){var u=Jn(n),d={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(nh(n))rh(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,S=p(v,o);if(d.hasEagerState=!0,d.eagerState=S,Qt(S,v)){var T=i.interleaved;T===null?(d.next=d,Kl(i)):(d.next=T.next,T.next=d),i.interleaved=d;return}}catch{}o=Ld(n,i,d,u),o!==null&&(d=ft(),nn(o,n,u,d),ih(o,i,u))}}function nh(n){var i=n.alternate;return n===Me||i!==null&&i===Me}function rh(n,i){Zi=To=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function ih(n,i,o){if((o&4194240)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,al(n,o)}}var Ao={readContext:Dt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Jy={readContext:Dt,useCallback:function(n,i){return pn().memoizedState=[n,i===void 0?null:i],n},useContext:Dt,useEffect:Hd,useImperativeHandle:function(n,i,o){return o=o!=null?o.concat([n]):null,ko(4194308,4,Xd.bind(null,i,n),o)},useLayoutEffect:function(n,i){return ko(4194308,4,n,i)},useInsertionEffect:function(n,i){return ko(4,2,n,i)},useMemo:function(n,i){var o=pn();return i=i===void 0?null:i,n=n(),o.memoizedState=[n,i],n},useReducer:function(n,i,o){var u=pn();return i=o!==void 0?o(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=Qy.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var i=pn();return n={current:n},i.memoizedState=n},useState:Gd,useDebugValue:su,useDeferredValue:function(n){return pn().memoizedState=n},useTransition:function(){var n=Gd(!1),i=n[0];return n=Xy.bind(null,n[1]),pn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,o){var u=Me,d=pn();if(Pe){if(o===void 0)throw Error(t(407));o=o()}else{if(o=i(),Je===null)throw Error(t(349));(Sr&30)!==0||Dd(u,i,o)}d.memoizedState=o;var p={value:o,getSnapshot:i};return d.queue=p,Hd(zd.bind(null,u,p,n),[n]),u.flags|=2048,ts(9,Bd.bind(null,u,p,o,i),void 0,null),o},useId:function(){var n=pn(),i=Je.identifierPrefix;if(Pe){var o=Rn,u=Cn;o=(u&~(1<<32-Xt(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=Ji++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=qy++,i=":"+i+"r"+o.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},e0={readContext:Dt,useCallback:Zd,useContext:Dt,useEffect:iu,useImperativeHandle:Qd,useInsertionEffect:Yd,useLayoutEffect:qd,useMemo:Jd,useReducer:nu,useRef:Kd,useState:function(){return nu(es)},useDebugValue:su,useDeferredValue:function(n){var i=Bt();return eh(i,He.memoizedState,n)},useTransition:function(){var n=nu(es)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:$d,useSyncExternalStore:Ud,useId:th,unstable_isNewReconciler:!1},t0={readContext:Dt,useCallback:Zd,useContext:Dt,useEffect:iu,useImperativeHandle:Qd,useInsertionEffect:Yd,useLayoutEffect:qd,useMemo:Jd,useReducer:ru,useRef:Kd,useState:function(){return ru(es)},useDebugValue:su,useDeferredValue:function(n){var i=Bt();return He===null?i.memoizedState=n:eh(i,He.memoizedState,n)},useTransition:function(){var n=ru(es)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:$d,useSyncExternalStore:Ud,useId:th,unstable_isNewReconciler:!1};function Jt(n,i){if(n&&n.defaultProps){i=K({},i),n=n.defaultProps;for(var o in n)i[o]===void 0&&(i[o]=n[o]);return i}return i}function ou(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:K({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var wo={isMounted:function(n){return(n=n._reactInternals)?hr(n)===n:!1},enqueueSetState:function(n,i,o){n=n._reactInternals;var u=ft(),d=Jn(n),p=On(u,d);p.payload=i,o!=null&&(p.callback=o),i=qn(n,p,d),i!==null&&(nn(i,n,d,u),vo(i,n,d))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=ft(),d=Jn(n),p=On(u,d);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=qn(n,p,d),i!==null&&(nn(i,n,d,u),vo(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=ft(),u=Jn(n),d=On(o,u);d.tag=2,i!=null&&(d.callback=i),i=qn(n,d,u),i!==null&&(nn(i,n,u,o),vo(i,n,u))}};function sh(n,i,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!Bi(o,u)||!Bi(d,p):!0}function oh(n,i,o){var u=!1,d=Kn,p=i.contextType;return typeof p=="object"&&p!==null?p=Dt(p):(d=gt(i)?mr:ot.current,u=i.contextTypes,p=(u=u!=null)?Yr(n,d):Kn),i=new i(o,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wo,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function ah(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&wo.enqueueReplaceState(i,i.state,null)}function au(n,i,o,u){var d=n.stateNode;d.props=o,d.state=n.memoizedState,d.refs={},Hl(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dt(p):(p=gt(i)?mr:ot.current,d.context=Yr(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(ou(n,i,p,o),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wo.enqueueReplaceState(d,d.state,null),yo(n,o,d,u),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ni(n,i){try{var o="",u=i;do o+=Ee(u),u=u.return;while(u);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function lu(n,i,o){return{value:n,source:null,stack:o??null,digest:i??null}}function uu(n,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var n0=typeof WeakMap=="function"?WeakMap:Map;function lh(n,i,o){o=On(-1,o),o.tag=3,o.payload={element:null};var u=i.value;return o.callback=function(){Po||(Po=!0,Au=u),uu(n,i)},o}function uh(n,i,o){o=On(-1,o),o.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;o.payload=function(){return u(d)},o.callback=function(){uu(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){uu(n,i),typeof u!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),o}function ch(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new n0;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(d.add(o),n=g0.bind(null,n,i,o),i.then(n,n))}function fh(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function dh(n,i,o,u,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=On(-1,1),i.tag=2,qn(o,i,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var r0=b.ReactCurrentOwner,vt=!1;function ct(n,i,o,u){i.child=n===null?Pd(i,null,o,u):Zr(i,n.child,o,u)}function hh(n,i,o,u,d){o=o.render;var p=i.ref;return ei(i,d),u=eu(n,i,o,u,p,d),o=tu(),n!==null&&!vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,In(n,i,d)):(Pe&&o&&Fl(i),i.flags|=1,ct(n,i,u,d),i.child)}function ph(n,i,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!_u(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=p,mh(n,i,p,u,d)):(n=$o(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Bi,o(v,u)&&n.ref===i.ref)return In(n,i,d)}return i.flags|=1,n=tr(p,u),n.ref=i.ref,n.return=i,i.child=n}function mh(n,i,o,u,d){if(n!==null){var p=n.memoizedProps;if(Bi(p,u)&&n.ref===i.ref)if(vt=!1,i.pendingProps=u=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(vt=!0);else return i.lanes=n.lanes,In(n,i,d)}return cu(n,i,o,u,d)}function gh(n,i,o){var u=i.pendingProps,d=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ii,Nt),Nt|=o;else{if((o&1073741824)===0)return n=p!==null?p.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ce(ii,Nt),Nt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Ce(ii,Nt),Nt|=u}else p!==null?(u=p.baseLanes|o,i.memoizedState=null):u=o,Ce(ii,Nt),Nt|=u;return ct(n,i,d,o),i.child}function vh(n,i){var o=i.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function cu(n,i,o,u,d){var p=gt(o)?mr:ot.current;return p=Yr(i,p),ei(i,d),o=eu(n,i,o,u,p,d),u=tu(),n!==null&&!vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,In(n,i,d)):(Pe&&u&&Fl(i),i.flags|=1,ct(n,i,o,d),i.child)}function yh(n,i,o,u,d){if(gt(o)){var p=!0;lo(i)}else p=!1;if(ei(i,d),i.stateNode===null)Ro(n,i),oh(i,o,u),au(i,o,u,d),u=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var T=v.context,I=o.contextType;typeof I=="object"&&I!==null?I=Dt(I):(I=gt(o)?mr:ot.current,I=Yr(i,I));var U=o.getDerivedStateFromProps,B=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";B||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==u||T!==I)&&ah(i,v,u,I),Yn=!1;var $=i.memoizedState;v.state=$,yo(i,u,v,d),T=i.memoizedState,S!==u||$!==T||mt.current||Yn?(typeof U=="function"&&(ou(i,o,U,u),T=i.memoizedState),(S=Yn||sh(i,o,S,u,$,T,I))?(B||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=T),v.props=u,v.state=T,v.context=I,u=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,bd(n,i),S=i.memoizedProps,I=i.type===i.elementType?S:Jt(i.type,S),v.props=I,B=i.pendingProps,$=v.context,T=o.contextType,typeof T=="object"&&T!==null?T=Dt(T):(T=gt(o)?mr:ot.current,T=Yr(i,T));var H=o.getDerivedStateFromProps;(U=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==B||$!==T)&&ah(i,v,u,T),Yn=!1,$=i.memoizedState,v.state=$,yo(i,u,v,d);var q=i.memoizedState;S!==B||$!==q||mt.current||Yn?(typeof H=="function"&&(ou(i,o,H,u),q=i.memoizedState),(I=Yn||sh(i,o,I,u,$,q,T)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,q,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,q,T)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=q),v.props=u,v.state=q,v.context=T,u=I):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return fu(n,i,o,u,p,d)}function fu(n,i,o,u,d,p){vh(n,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&xd(i,o,!1),In(n,i,p);u=i.stateNode,r0.current=i;var S=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&v?(i.child=Zr(i,n.child,null,p),i.child=Zr(i,null,S,p)):ct(n,i,S,p),i.memoizedState=u.state,d&&xd(i,o,!0),i.child}function Eh(n){var i=n.stateNode;i.pendingContext?Td(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Td(n,i.context,!1),Yl(n,i.containerInfo)}function Sh(n,i,o,u,d){return Qr(),Bl(d),i.flags|=256,ct(n,i,o,u),i.child}var du={dehydrated:null,treeContext:null,retryLane:0};function hu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Th(n,i,o){var u=i.pendingProps,d=be.current,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ce(be,d&1),n===null)return Dl(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,n=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Uo(v,u,0,null),n=wr(n,u,o,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=hu(o),i.memoizedState=du,n):pu(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return i0(n,i,v,u,S,d,o);if(p){p=u.fallback,v=i.mode,d=n.child,S=d.sibling;var T={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=T,i.deletions=null):(u=tr(d,T),u.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=tr(S,p):(p=wr(p,v,o,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=n.child.memoizedState,v=v===null?hu(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~o,i.memoizedState=du,u}return p=n.child,n=p.sibling,u=tr(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=o),u.return=i,u.sibling=null,n!==null&&(o=i.deletions,o===null?(i.deletions=[n],i.flags|=16):o.push(n)),i.child=u,i.memoizedState=null,u}function pu(n,i){return i=Uo({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Co(n,i,o,u){return u!==null&&Bl(u),Zr(i,n.child,null,o),n=pu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function i0(n,i,o,u,d,p,v){if(o)return i.flags&256?(i.flags&=-257,u=lu(Error(t(422))),Co(n,i,v,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Uo({mode:"visible",children:u.children},d,0,null),p=wr(p,d,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&Zr(i,n.child,null,v),i.child.memoizedState=hu(v),i.memoizedState=du,p);if((i.mode&1)===0)return Co(n,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var S=u.dgst;return u=S,p=Error(t(419)),u=lu(p,u,void 0),Co(n,i,v,u)}if(S=(v&n.childLanes)!==0,vt||S){if(u=Je,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Nn(n,d),nn(u,n,d,-1))}return Iu(),u=lu(Error(t(421))),Co(n,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=v0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,Rt=Wn(d.nextSibling),Ct=i,Pe=!0,Zt=null,n!==null&&($t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=gr,Cn=n.id,Rn=n.overflow,gr=i),i=pu(i,u.children),i.flags|=4096,i)}function kh(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Gl(n.return,i,o)}function mu(n,i,o,u,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=d)}function xh(n,i,o){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ct(n,i,u.children,o),u=be.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kh(n,o,i);else if(n.tag===19)kh(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Ce(be,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&Eo(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),mu(i,!1,d,o,p);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Eo(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}mu(i,!0,o,null,p);break;case"together":mu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ro(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function In(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Tr|=i.lanes,(o&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,o=tr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=tr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function s0(n,i,o){switch(i.tag){case 3:Eh(i),Qr();break;case 5:Fd(i);break;case 1:gt(i.type)&&lo(i);break;case 4:Yl(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(mo,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(be,be.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?Th(n,i,o):(Ce(be,be.current&1),n=In(n,i,o),n!==null?n.sibling:null);Ce(be,be.current&1);break;case 19:if(u=(o&i.childLanes)!==0,(n.flags&128)!==0){if(u)return xh(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(be,be.current),u)break;return null;case 22:case 23:return i.lanes=0,gh(n,i,o)}return In(n,i,o)}var Ah,gu,wh,Ch;Ah=function(n,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},gu=function(){},wh=function(n,i,o,u){var d=n.memoizedProps;if(d!==u){n=i.stateNode,Er(hn.current);var p=null;switch(o){case"input":d=dr(n,d),u=dr(n,u),p=[];break;case"select":d=K({},d,{value:void 0}),u=K({},u,{value:void 0}),p=[];break;case"textarea":d=Ya(n,d),u=Ya(n,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=so)}Xa(o,u);var v;o=null;for(I in d)if(!u.hasOwnProperty(I)&&d.hasOwnProperty(I)&&d[I]!=null)if(I==="style"){var S=d[I];for(v in S)S.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?p||(p=[]):(p=p||[]).push(I,null));for(I in u){var T=u[I];if(S=d?.[I],u.hasOwnProperty(I)&&T!==S&&(T!=null||S!=null))if(I==="style")if(S){for(v in S)!S.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in T)T.hasOwnProperty(v)&&S[v]!==T[v]&&(o||(o={}),o[v]=T[v])}else o||(p||(p=[]),p.push(I,o)),o=T;else I==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,S=S?S.__html:void 0,T!=null&&S!==T&&(p=p||[]).push(I,T)):I==="children"?typeof T!="string"&&typeof T!="number"||(p=p||[]).push(I,""+T):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(T!=null&&I==="onScroll"&&Oe("scroll",n),p||S===T||(p=[])):(p=p||[]).push(I,T))}o&&(p=p||[]).push("style",o);var I=p;(i.updateQueue=I)&&(i.flags|=4)}},Ch=function(n,i,o,u){o!==u&&(i.flags|=4)};function ns(n,i){if(!Pe)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function o0(n,i,o){var u=i.pendingProps;switch($l(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return gt(i.type)&&ao(),lt(i),null;case 3:return u=i.stateNode,ti(),Ie(mt),Ie(ot),Ql(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(ho(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zt!==null&&(Ru(Zt),Zt=null))),gu(n,i),lt(i),null;case 5:ql(i);var d=Er(Qi.current);if(o=i.type,n!==null&&i.stateNode!=null)wh(n,i,o,u,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(t(166));return lt(i),null}if(n=Er(hn.current),ho(i)){u=i.stateNode,o=i.type;var p=i.memoizedProps;switch(u[dn]=i,u[Ki]=p,n=(i.mode&1)!==0,o){case"dialog":Oe("cancel",u),Oe("close",u);break;case"iframe":case"object":case"embed":Oe("load",u);break;case"video":case"audio":for(d=0;d<Vi.length;d++)Oe(Vi[d],u);break;case"source":Oe("error",u);break;case"img":case"image":case"link":Oe("error",u),Oe("load",u);break;case"details":Oe("toggle",u);break;case"input":ki(u,p),Oe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Oe("invalid",u);break;case"textarea":uf(u,p),Oe("invalid",u)}Xa(o,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?u.textContent!==S&&(p.suppressHydrationWarning!==!0&&io(u.textContent,S,n),d=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&io(u.textContent,S,n),d=["children",""+S]):a.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Oe("scroll",u)}switch(o){case"input":At(u),lf(u,p,!0);break;case"textarea":At(u),ff(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=so)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=df(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=v.createElement(o,{is:u.is}):(n=v.createElement(o),o==="select"&&(v=n,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):n=v.createElementNS(n,o),n[dn]=i,n[Ki]=u,Ah(n,i,!1,!1),i.stateNode=n;e:{switch(v=Qa(o,u),o){case"dialog":Oe("cancel",n),Oe("close",n),d=u;break;case"iframe":case"object":case"embed":Oe("load",n),d=u;break;case"video":case"audio":for(d=0;d<Vi.length;d++)Oe(Vi[d],n);d=u;break;case"source":Oe("error",n),d=u;break;case"img":case"image":case"link":Oe("error",n),Oe("load",n),d=u;break;case"details":Oe("toggle",n),d=u;break;case"input":ki(n,u),d=dr(n,u),Oe("invalid",n);break;case"option":d=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},d=K({},u,{value:void 0}),Oe("invalid",n);break;case"textarea":uf(n,u),d=Ya(n,u),Oe("invalid",n);break;default:d=u}Xa(o,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var T=S[p];p==="style"?mf(n,T):p==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&hf(n,T)):p==="children"?typeof T=="string"?(o!=="textarea"||T!=="")&&Ai(n,T):typeof T=="number"&&Ai(n,""+T):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?T!=null&&p==="onScroll"&&Oe("scroll",n):T!=null&&P(n,p,T,v))}switch(o){case"input":At(n),lf(n,u,!1);break;case"textarea":At(n),ff(n);break;case"option":u.value!=null&&n.setAttribute("value",""+ye(u.value));break;case"select":n.multiple=!!u.multiple,p=u.value,p!=null?jr(n,!!u.multiple,p,!1):u.defaultValue!=null&&jr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=so)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(n&&i.stateNode!=null)Ch(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(t(166));if(o=Er(Qi.current),Er(hn.current),ho(i)){if(u=i.stateNode,o=i.memoizedProps,u[dn]=i,(p=u.nodeValue!==o)&&(n=Ct,n!==null))switch(n.tag){case 3:io(u.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&io(u.nodeValue,o,(n.mode&1)!==0)}p&&(i.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[dn]=i,i.stateNode=u}return lt(i),null;case 13:if(Ie(be),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Od(),Qr(),i.flags|=98560,p=!1;else if(p=ho(i),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[dn]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else Zt!==null&&(Ru(Zt),Zt=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(be.current&1)!==0?Ye===0&&(Ye=3):Iu())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return ti(),gu(n,i),n===null&&Wi(i.stateNode.containerInfo),lt(i),null;case 10:return Wl(i.type._context),lt(i),null;case 17:return gt(i.type)&&ao(),lt(i),null;case 19:if(Ie(be),p=i.memoizedState,p===null)return lt(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)ns(p,!1);else{if(Ye!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=Eo(n),v!==null){for(i.flags|=128,ns(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=o,o=i.child;o!==null;)p=o,n=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return Ce(be,be.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ve()>si&&(i.flags|=128,u=!0,ns(p,!1),i.lanes=4194304)}else{if(!u)if(n=Eo(v),n!==null){if(i.flags|=128,u=!0,o=n.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),ns(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Pe)return lt(i),null}else 2*Ve()-p.renderingStartTime>si&&o!==1073741824&&(i.flags|=128,u=!0,ns(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(o=p.last,o!==null?o.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ve(),i.sibling=null,o=be.current,Ce(be,u?o&1|2:o&1),i):(lt(i),null);case 22:case 23:return Ou(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Nt&1073741824)!==0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function a0(n,i){switch($l(i),i.tag){case 1:return gt(i.type)&&ao(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ti(),Ie(mt),Ie(ot),Ql(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return ql(i),null;case 13:if(Ie(be),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Qr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ie(be),null;case 4:return ti(),null;case 10:return Wl(i.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var No=!1,ut=!1,l0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ri(n,i){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){De(n,i,u)}else o.current=null}function vu(n,i,o){try{o()}catch(u){De(n,i,u)}}var Rh=!1;function u0(n,i){if(Ol=Hs,n=sd(),Tl(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,S=-1,T=-1,I=0,U=0,B=n,$=null;t:for(;;){for(var H;B!==o||d!==0&&B.nodeType!==3||(S=v+d),B!==p||u!==0&&B.nodeType!==3||(T=v+u),B.nodeType===3&&(v+=B.nodeValue.length),(H=B.firstChild)!==null;)$=B,B=H;for(;;){if(B===n)break t;if($===o&&++I===d&&(S=v),$===p&&++U===u&&(T=v),(H=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=H}o=S===-1||T===-1?null:{start:S,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(Il={focusedElem:n,selectionRange:o},Hs=!1,Y=i;Y!==null;)if(i=Y,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Y=n;else for(;Y!==null;){i=Y;try{var q=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var X=q.memoizedProps,We=q.memoizedState,N=i.stateNode,x=N.getSnapshotBeforeUpdate(i.elementType===i.type?X:Jt(i.type,X),We);N.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var O=i.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(V){De(i,i.return,V)}if(n=i.sibling,n!==null){n.return=i.return,Y=n;break}Y=i.return}return q=Rh,Rh=!1,q}function rs(n,i,o){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&vu(i,o,p)}d=d.next}while(d!==u)}}function Oo(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var u=o.create;o.destroy=u()}o=o.next}while(o!==i)}}function yu(n){var i=n.ref;if(i!==null){var o=n.stateNode;n.tag,n=o,typeof i=="function"?i(n):i.current=n}}function Nh(n){var i=n.alternate;i!==null&&(n.alternate=null,Nh(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[dn],delete i[Ki],delete i[bl],delete i[Gy],delete i[Ky])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Oh(n){return n.tag===5||n.tag===3||n.tag===4}function Ih(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Oh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Eu(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(n,o)):(i=o,i.appendChild(n)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=so));else if(u!==4&&(n=n.child,n!==null))for(Eu(n,i,o),n=n.sibling;n!==null;)Eu(n,i,o),n=n.sibling}function Su(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Su(n,i,o),n=n.sibling;n!==null;)Su(n,i,o),n=n.sibling}var nt=null,en=!1;function Xn(n,i,o){for(o=o.child;o!==null;)_h(n,i,o),o=o.sibling}function _h(n,i,o){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Bs,o)}catch{}switch(o.tag){case 5:ut||ri(o,i);case 6:var u=nt,d=en;nt=null,Xn(n,i,o),nt=u,en=d,nt!==null&&(en?(n=nt,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):nt.removeChild(o.stateNode));break;case 18:nt!==null&&(en?(n=nt,o=o.stateNode,n.nodeType===8?Ll(n.parentNode,o):n.nodeType===1&&Ll(n,o),Mi(n)):Ll(nt,o.stateNode));break;case 4:u=nt,d=en,nt=o.stateNode.containerInfo,en=!0,Xn(n,i,o),nt=u,en=d;break;case 0:case 11:case 14:case 15:if(!ut&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&vu(o,i,v),d=d.next}while(d!==u)}Xn(n,i,o);break;case 1:if(!ut&&(ri(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(S){De(o,i,S)}Xn(n,i,o);break;case 21:Xn(n,i,o);break;case 22:o.mode&1?(ut=(u=ut)||o.memoizedState!==null,Xn(n,i,o),ut=u):Xn(n,i,o);break;default:Xn(n,i,o)}}function Ph(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new l0),i.forEach(function(u){var d=y0.bind(null,n,u);o.has(u)||(o.add(u),u.then(d,d))})}}function tn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];try{var p=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:nt=S.stateNode,en=!1;break e;case 3:nt=S.stateNode.containerInfo,en=!0;break e;case 4:nt=S.stateNode.containerInfo,en=!0;break e}S=S.return}if(nt===null)throw Error(t(160));_h(p,v,d),nt=null,en=!1;var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(I){De(d,i,I)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Lh(i,n),i=i.sibling}function Lh(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(tn(i,n),mn(n),u&4){try{rs(3,n,n.return),Oo(3,n)}catch(X){De(n,n.return,X)}try{rs(5,n,n.return)}catch(X){De(n,n.return,X)}}break;case 1:tn(i,n),mn(n),u&512&&o!==null&&ri(o,o.return);break;case 5:if(tn(i,n),mn(n),u&512&&o!==null&&ri(o,o.return),n.flags&32){var d=n.stateNode;try{Ai(d,"")}catch(X){De(n,n.return,X)}}if(u&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=o!==null?o.memoizedProps:p,S=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&af(d,p),Qa(S,v);var I=Qa(S,p);for(v=0;v<T.length;v+=2){var U=T[v],B=T[v+1];U==="style"?mf(d,B):U==="dangerouslySetInnerHTML"?hf(d,B):U==="children"?Ai(d,B):P(d,U,B,I)}switch(S){case"input":Ka(d,p);break;case"textarea":cf(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var H=p.value;H!=null?jr(d,!!p.multiple,H,!1):$!==!!p.multiple&&(p.defaultValue!=null?jr(d,!!p.multiple,p.defaultValue,!0):jr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ki]=p}catch(X){De(n,n.return,X)}}break;case 6:if(tn(i,n),mn(n),u&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(X){De(n,n.return,X)}}break;case 3:if(tn(i,n),mn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Mi(i.containerInfo)}catch(X){De(n,n.return,X)}break;case 4:tn(i,n),mn(n);break;case 13:tn(i,n),mn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(xu=Ve())),u&4&&Ph(n);break;case 22:if(U=o!==null&&o.memoizedState!==null,n.mode&1?(ut=(I=ut)||U,tn(i,n),ut=I):tn(i,n),mn(n),u&8192){if(I=n.memoizedState!==null,(n.stateNode.isHidden=I)&&!U&&(n.mode&1)!==0)for(Y=n,U=n.child;U!==null;){for(B=Y=U;Y!==null;){switch($=Y,H=$.child,$.tag){case 0:case 11:case 14:case 15:rs(4,$,$.return);break;case 1:ri($,$.return);var q=$.stateNode;if(typeof q.componentWillUnmount=="function"){u=$,o=$.return;try{i=u,q.props=i.memoizedProps,q.state=i.memoizedState,q.componentWillUnmount()}catch(X){De(u,o,X)}}break;case 5:ri($,$.return);break;case 22:if($.memoizedState!==null){jh(B);continue}}H!==null?(H.return=$,Y=H):jh(B)}U=U.sibling}e:for(U=null,B=n;;){if(B.tag===5){if(U===null){U=B;try{d=B.stateNode,I?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=B.stateNode,T=B.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,S.style.display=pf("display",v))}catch(X){De(n,n.return,X)}}}else if(B.tag===6){if(U===null)try{B.stateNode.nodeValue=I?"":B.memoizedProps}catch(X){De(n,n.return,X)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===n)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===n)break e;for(;B.sibling===null;){if(B.return===null||B.return===n)break e;U===B&&(U=null),B=B.return}U===B&&(U=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:tn(i,n),mn(n),u&4&&Ph(n);break;case 21:break;default:tn(i,n),mn(n)}}function mn(n){var i=n.flags;if(i&2){try{e:{for(var o=n.return;o!==null;){if(Oh(o)){var u=o;break e}o=o.return}throw Error(t(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Ai(d,""),u.flags&=-33);var p=Ih(n);Su(n,p,d);break;case 3:case 4:var v=u.stateNode.containerInfo,S=Ih(n);Eu(n,S,v);break;default:throw Error(t(161))}}catch(T){De(n,n.return,T)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function c0(n,i,o){Y=n,bh(n)}function bh(n,i,o){for(var u=(n.mode&1)!==0;Y!==null;){var d=Y,p=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||No;if(!v){var S=d.alternate,T=S!==null&&S.memoizedState!==null||ut;S=No;var I=ut;if(No=v,(ut=T)&&!I)for(Y=d;Y!==null;)v=Y,T=v.child,v.tag===22&&v.memoizedState!==null?Fh(d):T!==null?(T.return=v,Y=T):Fh(d);for(;p!==null;)Y=p,bh(p),p=p.sibling;Y=d,No=S,ut=I}Mh(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Y=p):Mh(n)}}function Mh(n){for(;Y!==null;){var i=Y;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ut||Oo(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(o===null)u.componentDidMount();else{var d=i.elementType===i.type?o.memoizedProps:Jt(i.type,o.memoizedProps);u.componentDidUpdate(d,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&jd(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}jd(i,v,o)}break;case 5:var S=i.stateNode;if(o===null&&i.flags&4){o=S;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&o.focus();break;case"img":T.src&&(o.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var I=i.alternate;if(I!==null){var U=I.memoizedState;if(U!==null){var B=U.dehydrated;B!==null&&Mi(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ut||i.flags&512&&yu(i)}catch($){De(i,i.return,$)}}if(i===n){Y=null;break}if(o=i.sibling,o!==null){o.return=i.return,Y=o;break}Y=i.return}}function jh(n){for(;Y!==null;){var i=Y;if(i===n){Y=null;break}var o=i.sibling;if(o!==null){o.return=i.return,Y=o;break}Y=i.return}}function Fh(n){for(;Y!==null;){var i=Y;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{Oo(4,i)}catch(T){De(i,o,T)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(T){De(i,d,T)}}var p=i.return;try{yu(i)}catch(T){De(i,p,T)}break;case 5:var v=i.return;try{yu(i)}catch(T){De(i,v,T)}}}catch(T){De(i,i.return,T)}if(i===n){Y=null;break}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break}Y=i.return}}var f0=Math.ceil,Io=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,zt=b.ReactCurrentBatchConfig,Se=0,Je=null,Ke=null,rt=0,Nt=0,ii=Gn(0),Ye=0,is=null,Tr=0,_o=0,ku=0,ss=null,yt=null,xu=0,si=1/0,_n=null,Po=!1,Au=null,Qn=null,Lo=!1,Zn=null,bo=0,os=0,wu=null,Mo=-1,jo=0;function ft(){return(Se&6)!==0?Ve():Mo!==-1?Mo:Mo=Ve()}function Jn(n){return(n.mode&1)===0?1:(Se&2)!==0&&rt!==0?rt&-rt:Yy.transition!==null?(jo===0&&(jo=If()),jo):(n=we,n!==0||(n=window.event,n=n===void 0?16:Uf(n.type)),n)}function nn(n,i,o,u){if(50<os)throw os=0,wu=null,Error(t(185));Ii(n,o,u),((Se&2)===0||n!==Je)&&(n===Je&&((Se&2)===0&&(_o|=o),Ye===4&&er(n,rt)),Et(n,u),o===1&&Se===0&&(i.mode&1)===0&&(si=Ve()+500,uo&&Hn()))}function Et(n,i){var o=n.callbackNode;Yv(n,i);var u=Ws(n,n===Je?rt:0);if(u===0)o!==null&&Rf(o),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(o!=null&&Rf(o),i===1)n.tag===0?Hy(Uh.bind(null,n)):Ad(Uh.bind(null,n)),Vy(function(){(Se&6)===0&&Hn()}),o=null;else{switch(_f(u)){case 1:o=il;break;case 4:o=Nf;break;case 16:o=Ds;break;case 536870912:o=Of;break;default:o=Ds}o=Hh(o,$h.bind(null,n))}n.callbackPriority=i,n.callbackNode=o}}function $h(n,i){if(Mo=-1,jo=0,(Se&6)!==0)throw Error(t(327));var o=n.callbackNode;if(oi()&&n.callbackNode!==o)return null;var u=Ws(n,n===Je?rt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||i)i=Fo(n,u);else{i=u;var d=Se;Se|=2;var p=Bh();(Je!==n||rt!==i)&&(_n=null,si=Ve()+500,xr(n,i));do try{p0();break}catch(S){Dh(n,S)}while(!0);Vl(),Io.current=p,Se=d,Ke!==null?i=0:(Je=null,rt=0,i=Ye)}if(i!==0){if(i===2&&(d=sl(n),d!==0&&(u=d,i=Cu(n,d))),i===1)throw o=is,xr(n,0),er(n,u),Et(n,Ve()),o;if(i===6)er(n,u);else{if(d=n.current.alternate,(u&30)===0&&!d0(d)&&(i=Fo(n,u),i===2&&(p=sl(n),p!==0&&(u=p,i=Cu(n,p))),i===1))throw o=is,xr(n,0),er(n,u),Et(n,Ve()),o;switch(n.finishedWork=d,n.finishedLanes=u,i){case 0:case 1:throw Error(t(345));case 2:Ar(n,yt,_n);break;case 3:if(er(n,u),(u&130023424)===u&&(i=xu+500-Ve(),10<i)){if(Ws(n,0)!==0)break;if(d=n.suspendedLanes,(d&u)!==u){ft(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Pl(Ar.bind(null,n,yt,_n),i);break}Ar(n,yt,_n);break;case 4:if(er(n,u),(u&4194240)===u)break;for(i=n.eventTimes,d=-1;0<u;){var v=31-Xt(u);p=1<<v,v=i[v],v>d&&(d=v),u&=~p}if(u=d,u=Ve()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*f0(u/1960))-u,10<u){n.timeoutHandle=Pl(Ar.bind(null,n,yt,_n),u);break}Ar(n,yt,_n);break;case 5:Ar(n,yt,_n);break;default:throw Error(t(329))}}}return Et(n,Ve()),n.callbackNode===o?$h.bind(null,n):null}function Cu(n,i){var o=ss;return n.current.memoizedState.isDehydrated&&(xr(n,i).flags|=256),n=Fo(n,i),n!==2&&(i=yt,yt=o,i!==null&&Ru(i)),n}function Ru(n){yt===null?yt=n:yt.push.apply(yt,n)}function d0(n){for(var i=n;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Qt(p(),d))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(n,i){for(i&=~ku,i&=~_o,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var o=31-Xt(i),u=1<<o;n[o]=-1,i&=~u}}function Uh(n){if((Se&6)!==0)throw Error(t(327));oi();var i=Ws(n,0);if((i&1)===0)return Et(n,Ve()),null;var o=Fo(n,i);if(n.tag!==0&&o===2){var u=sl(n);u!==0&&(i=u,o=Cu(n,u))}if(o===1)throw o=is,xr(n,0),er(n,i),Et(n,Ve()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ar(n,yt,_n),Et(n,Ve()),null}function Nu(n,i){var o=Se;Se|=1;try{return n(i)}finally{Se=o,Se===0&&(si=Ve()+500,uo&&Hn())}}function kr(n){Zn!==null&&Zn.tag===0&&(Se&6)===0&&oi();var i=Se;Se|=1;var o=zt.transition,u=we;try{if(zt.transition=null,we=1,n)return n()}finally{we=u,zt.transition=o,Se=i,(Se&6)===0&&Hn()}}function Ou(){Nt=ii.current,Ie(ii)}function xr(n,i){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,zy(o)),Ke!==null)for(o=Ke.return;o!==null;){var u=o;switch($l(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ao();break;case 3:ti(),Ie(mt),Ie(ot),Ql();break;case 5:ql(u);break;case 4:ti();break;case 13:Ie(be);break;case 19:Ie(be);break;case 10:Wl(u.type._context);break;case 22:case 23:Ou()}o=o.return}if(Je=n,Ke=n=tr(n.current,null),rt=Nt=i,Ye=0,is=null,ku=_o=Tr=0,yt=ss=null,yr!==null){for(i=0;i<yr.length;i++)if(o=yr[i],u=o.interleaved,u!==null){o.interleaved=null;var d=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=d,u.next=v}o.pending=u}yr=null}return n}function Dh(n,i){do{var o=Ke;try{if(Vl(),So.current=Ao,To){for(var u=Me.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}To=!1}if(Sr=0,Ze=He=Me=null,Zi=!1,Ji=0,Tu.current=null,o===null||o.return===null){Ye=1,is=i,Ke=null;break}e:{var p=n,v=o.return,S=o,T=i;if(i=rt,S.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var I=T,U=S,B=U.tag;if((U.mode&1)===0&&(B===0||B===11||B===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var H=fh(v);if(H!==null){H.flags&=-257,dh(H,v,S,p,i),H.mode&1&&ch(p,I,i),i=H,T=I;var q=i.updateQueue;if(q===null){var X=new Set;X.add(T),i.updateQueue=X}else q.add(T);break e}else{if((i&1)===0){ch(p,I,i),Iu();break e}T=Error(t(426))}}else if(Pe&&S.mode&1){var We=fh(v);if(We!==null){(We.flags&65536)===0&&(We.flags|=256),dh(We,v,S,p,i),Bl(ni(T,S));break e}}p=T=ni(T,S),Ye!==4&&(Ye=2),ss===null?ss=[p]:ss.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var N=lh(p,T,i);Md(p,N);break e;case 1:S=T;var x=p.type,O=p.stateNode;if((p.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Qn===null||!Qn.has(O)))){p.flags|=65536,i&=-i,p.lanes|=i;var V=uh(p,S,i);Md(p,V);break e}}p=p.return}while(p!==null)}Vh(o)}catch(Q){i=Q,Ke===o&&o!==null&&(Ke=o=o.return);continue}break}while(!0)}function Bh(){var n=Io.current;return Io.current=Ao,n===null?Ao:n}function Iu(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||(Tr&268435455)===0&&(_o&268435455)===0||er(Je,rt)}function Fo(n,i){var o=Se;Se|=2;var u=Bh();(Je!==n||rt!==i)&&(_n=null,xr(n,i));do try{h0();break}catch(d){Dh(n,d)}while(!0);if(Vl(),Se=o,Io.current=u,Ke!==null)throw Error(t(261));return Je=null,rt=0,Ye}function h0(){for(;Ke!==null;)zh(Ke)}function p0(){for(;Ke!==null&&!Uv();)zh(Ke)}function zh(n){var i=Kh(n.alternate,n,Nt);n.memoizedProps=n.pendingProps,i===null?Vh(n):Ke=i,Tu.current=null}function Vh(n){var i=n;do{var o=i.alternate;if(n=i.return,(i.flags&32768)===0){if(o=o0(o,i,Nt),o!==null){Ke=o;return}}else{if(o=a0(o,i),o!==null){o.flags&=32767,Ke=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ye=6,Ke=null;return}}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=n}while(i!==null);Ye===0&&(Ye=5)}function Ar(n,i,o){var u=we,d=zt.transition;try{zt.transition=null,we=1,m0(n,i,o,u)}finally{zt.transition=d,we=u}return null}function m0(n,i,o,u){do oi();while(Zn!==null);if((Se&6)!==0)throw Error(t(327));o=n.finishedWork;var d=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=o.lanes|o.childLanes;if(qv(n,p),n===Je&&(Ke=Je=null,rt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Lo||(Lo=!0,Hh(Ds,function(){return oi(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=zt.transition,zt.transition=null;var v=we;we=1;var S=Se;Se|=4,Tu.current=null,u0(n,o),Lh(o,n),My(Il),Hs=!!Ol,Il=Ol=null,n.current=o,c0(o),Dv(),Se=S,we=v,zt.transition=p}else n.current=o;if(Lo&&(Lo=!1,Zn=n,bo=d),p=n.pendingLanes,p===0&&(Qn=null),Vv(o.stateNode),Et(n,Ve()),i!==null)for(u=n.onRecoverableError,o=0;o<i.length;o++)d=i[o],u(d.value,{componentStack:d.stack,digest:d.digest});if(Po)throw Po=!1,n=Au,Au=null,n;return(bo&1)!==0&&n.tag!==0&&oi(),p=n.pendingLanes,(p&1)!==0?n===wu?os++:(os=0,wu=n):os=0,Hn(),null}function oi(){if(Zn!==null){var n=_f(bo),i=zt.transition,o=we;try{if(zt.transition=null,we=16>n?16:n,Zn===null)var u=!1;else{if(n=Zn,Zn=null,bo=0,(Se&6)!==0)throw Error(t(331));var d=Se;for(Se|=4,Y=n.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var S=p.deletions;if(S!==null){for(var T=0;T<S.length;T++){var I=S[T];for(Y=I;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:rs(8,U,p)}var B=U.child;if(B!==null)B.return=U,Y=B;else for(;Y!==null;){U=Y;var $=U.sibling,H=U.return;if(Nh(U),U===I){Y=null;break}if($!==null){$.return=H,Y=$;break}Y=H}}}var q=p.alternate;if(q!==null){var X=q.child;if(X!==null){q.child=null;do{var We=X.sibling;X.sibling=null,X=We}while(X!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:rs(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,Y=N;break e}Y=p.return}}var x=n.current;for(Y=x;Y!==null;){v=Y;var O=v.child;if((v.subtreeFlags&2064)!==0&&O!==null)O.return=v,Y=O;else e:for(v=x;Y!==null;){if(S=Y,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Oo(9,S)}}catch(Q){De(S,S.return,Q)}if(S===v){Y=null;break e}var V=S.sibling;if(V!==null){V.return=S.return,Y=V;break e}Y=S.return}}if(Se=d,Hn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Bs,n)}catch{}u=!0}return u}finally{we=o,zt.transition=i}}return!1}function Wh(n,i,o){i=ni(o,i),i=lh(n,i,1),n=qn(n,i,1),i=ft(),n!==null&&(Ii(n,1,i),Et(n,i))}function De(n,i,o){if(n.tag===3)Wh(n,n,o);else for(;i!==null;){if(i.tag===3){Wh(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qn===null||!Qn.has(u))){n=ni(o,n),n=uh(i,n,1),i=qn(i,n,1),n=ft(),i!==null&&(Ii(i,1,n),Et(i,n));break}}i=i.return}}function g0(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),i=ft(),n.pingedLanes|=n.suspendedLanes&o,Je===n&&(rt&o)===o&&(Ye===4||Ye===3&&(rt&130023424)===rt&&500>Ve()-xu?xr(n,0):ku|=o),Et(n,i)}function Gh(n,i){i===0&&((n.mode&1)===0?i=1:(i=Vs,Vs<<=1,(Vs&130023424)===0&&(Vs=4194304)));var o=ft();n=Nn(n,i),n!==null&&(Ii(n,i,o),Et(n,o))}function v0(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Gh(n,o)}function y0(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(i),Gh(n,o)}var Kh;Kh=function(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps||mt.current)vt=!0;else{if((n.lanes&o)===0&&(i.flags&128)===0)return vt=!1,s0(n,i,o);vt=(n.flags&131072)!==0}else vt=!1,Pe&&(i.flags&1048576)!==0&&wd(i,fo,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Ro(n,i),n=i.pendingProps;var d=Yr(i,ot.current);ei(i,o),d=eu(null,i,u,n,d,o);var p=tu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,gt(u)?(p=!0,lo(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Hl(i),d.updater=wo,i.stateNode=d,d._reactInternals=i,au(i,u,n,o),i=fu(null,i,u,!0,p,o)):(i.tag=0,Pe&&p&&Fl(i),ct(null,i,d,o),i=i.child),i;case 16:u=i.elementType;e:{switch(Ro(n,i),n=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=S0(u),n=Jt(u,n),d){case 0:i=cu(null,i,u,n,o);break e;case 1:i=yh(null,i,u,n,o);break e;case 11:i=hh(null,i,u,n,o);break e;case 14:i=ph(null,i,u,Jt(u.type,n),o);break e}throw Error(t(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),cu(n,i,u,d,o);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),yh(n,i,u,d,o);case 3:e:{if(Eh(i),n===null)throw Error(t(387));u=i.pendingProps,p=i.memoizedState,d=p.element,bd(n,i),yo(i,u,null,o);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ni(Error(t(423)),i),i=Sh(n,i,u,o,d);break e}else if(u!==d){d=ni(Error(t(424)),i),i=Sh(n,i,u,o,d);break e}else for(Rt=Wn(i.stateNode.containerInfo.firstChild),Ct=i,Pe=!0,Zt=null,o=Pd(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Qr(),u===d){i=In(n,i,o);break e}ct(n,i,u,o)}i=i.child}return i;case 5:return Fd(i),n===null&&Dl(i),u=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,_l(u,d)?v=null:p!==null&&_l(u,p)&&(i.flags|=32),vh(n,i),ct(n,i,v,o),i.child;case 6:return n===null&&Dl(i),null;case 13:return Th(n,i,o);case 4:return Yl(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Zr(i,null,u,o):ct(n,i,u,o),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),hh(n,i,u,d,o);case 7:return ct(n,i,i.pendingProps,o),i.child;case 8:return ct(n,i,i.pendingProps.children,o),i.child;case 12:return ct(n,i,i.pendingProps.children,o),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ce(mo,u._currentValue),u._currentValue=v,p!==null)if(Qt(p.value,v)){if(p.children===d.children&&!mt.current){i=In(n,i,o);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var T=S.firstContext;T!==null;){if(T.context===u){if(p.tag===1){T=On(-1,o&-o),T.tag=2;var I=p.updateQueue;if(I!==null){I=I.shared;var U=I.pending;U===null?T.next=T:(T.next=U.next,U.next=T),I.pending=T}}p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),Gl(p.return,o,i),S.lanes|=o;break}T=T.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=o,S=v.alternate,S!==null&&(S.lanes|=o),Gl(v,o,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}ct(n,i,d.children,o),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,ei(i,o),d=Dt(d),u=u(d),i.flags|=1,ct(n,i,u,o),i.child;case 14:return u=i.type,d=Jt(u,i.pendingProps),d=Jt(u.type,d),ph(n,i,u,d,o);case 15:return mh(n,i,i.type,i.pendingProps,o);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),Ro(n,i),i.tag=1,gt(u)?(n=!0,lo(i)):n=!1,ei(i,o),oh(i,u,d),au(i,u,d,o),fu(null,i,u,!0,n,o);case 19:return xh(n,i,o);case 22:return gh(n,i,o)}throw Error(t(156,i.tag))};function Hh(n,i){return Cf(n,i)}function E0(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(n,i,o,u){return new E0(n,i,o,u)}function _u(n){return n=n.prototype,!(!n||!n.isReactComponent)}function S0(n){if(typeof n=="function")return _u(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tt)return 11;if(n===de)return 14}return 2}function tr(n,i){var o=n.alternate;return o===null?(o=Vt(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function $o(n,i,o,u,d,p){var v=2;if(u=n,typeof n=="function")_u(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case D:return wr(o.children,d,p,i);case G:v=8,d|=8;break;case Ae:return n=Vt(12,o,i,d|2),n.elementType=Ae,n.lanes=p,n;case $e:return n=Vt(13,o,i,d),n.elementType=$e,n.lanes=p,n;case Ue:return n=Vt(19,o,i,d),n.elementType=Ue,n.lanes=p,n;case xe:return Uo(o,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:v=10;break e;case Ge:v=9;break e;case tt:v=11;break e;case de:v=14;break e;case ve:v=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Vt(v,o,i,d),i.elementType=n,i.type=u,i.lanes=p,i}function wr(n,i,o,u){return n=Vt(7,n,u,i),n.lanes=o,n}function Uo(n,i,o,u){return n=Vt(22,n,u,i),n.elementType=xe,n.lanes=o,n.stateNode={isHidden:!1},n}function Pu(n,i,o){return n=Vt(6,n,null,i),n.lanes=o,n}function Lu(n,i,o){return i=Vt(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function T0(n,i,o,u,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bu(n,i,o,u,d,p,v,S,T){return n=new T0(n,i,o,S,T),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Vt(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(p),n}function k0(n,i,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:n,containerInfo:i,implementation:o}}function Yh(n){if(!n)return Kn;n=n._reactInternals;e:{if(hr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(gt(o))return kd(n,o,i)}return i}function qh(n,i,o,u,d,p,v,S,T){return n=bu(o,u,!0,n,d,p,v,S,T),n.context=Yh(null),o=n.current,u=ft(),d=Jn(o),p=On(u,d),p.callback=i??null,qn(o,p,d),n.current.lanes=d,Ii(n,d,u),Et(n,u),n}function Do(n,i,o,u){var d=i.current,p=ft(),v=Jn(d);return o=Yh(o),i.context===null?i.context=o:i.pendingContext=o,i=On(p,v),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=qn(d,i,v),n!==null&&(nn(n,d,v,p),vo(n,d,v)),v}function Bo(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Xh(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Mu(n,i){Xh(n,i),(n=n.alternate)&&Xh(n,i)}function x0(){return null}var Qh=typeof reportError=="function"?reportError:function(n){console.error(n)};function ju(n){this._internalRoot=n}zo.prototype.render=ju.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Do(n,i,null,null)},zo.prototype.unmount=ju.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;kr(function(){Do(null,n,null,null)}),i[An]=null}};function zo(n){this._internalRoot=n}zo.prototype.unstable_scheduleHydration=function(n){if(n){var i=bf();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Bn.length&&i!==0&&i<Bn[o].priority;o++);Bn.splice(o,0,n),o===0&&Ff(n)}};function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function A0(n,i,o,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var I=Bo(v);p.call(I)}}var v=qh(i,u,n,0,null,!1,!1,"",Zh);return n._reactRootContainer=v,n[An]=v.current,Wi(n.nodeType===8?n.parentNode:n),kr(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof u=="function"){var S=u;u=function(){var I=Bo(T);S.call(I)}}var T=bu(n,0,!1,null,null,!1,!1,"",Zh);return n._reactRootContainer=T,n[An]=T.current,Wi(n.nodeType===8?n.parentNode:n),kr(function(){Do(i,T,o,u)}),T}function Wo(n,i,o,u,d){var p=o._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var T=Bo(v);S.call(T)}}Do(i,v,n,d)}else v=A0(o,i,n,d,u);return Bo(v)}Pf=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var o=Oi(i.pendingLanes);o!==0&&(al(i,o|1),Et(i,Ve()),(Se&6)===0&&(si=Ve()+500,Hn()))}break;case 13:kr(function(){var u=Nn(n,1);if(u!==null){var d=ft();nn(u,n,1,d)}}),Mu(n,1)}},ll=function(n){if(n.tag===13){var i=Nn(n,134217728);if(i!==null){var o=ft();nn(i,n,134217728,o)}Mu(n,134217728)}},Lf=function(n){if(n.tag===13){var i=Jn(n),o=Nn(n,i);if(o!==null){var u=ft();nn(o,n,i,u)}Mu(n,i)}},bf=function(){return we},Mf=function(n,i){var o=we;try{return we=n,i()}finally{we=o}},el=function(n,i,o){switch(i){case"input":if(Ka(n,o),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=oo(u);if(!d)throw Error(t(90));jt(u),Ka(u,d)}}}break;case"textarea":cf(n,o);break;case"select":i=o.value,i!=null&&jr(n,!!o.multiple,i,!1)}},Ef=Nu,Sf=kr;var w0={usingClientEntryPoint:!1,Events:[Hi,Kr,oo,vf,yf,Nu]},as={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C0={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Af(n),n===null?null:n.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||x0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{Bs=Go.inject(C0),fn=Go}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0,St.createPortal=function(n,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(i))throw Error(t(200));return k0(n,i,null,o)},St.createRoot=function(n,i){if(!Fu(n))throw Error(t(299));var o=!1,u="",d=Qh;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=bu(n,1,!1,null,null,o,!1,u,d),n[An]=i.current,Wi(n.nodeType===8?n.parentNode:n),new ju(i)},St.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Af(i),n=n===null?null:n.stateNode,n},St.flushSync=function(n){return kr(n)},St.hydrate=function(n,i,o){if(!Vo(i))throw Error(t(200));return Wo(null,n,i,!0,o)},St.hydrateRoot=function(n,i,o){if(!Fu(n))throw Error(t(405));var u=o!=null&&o.hydratedSources||null,d=!1,p="",v=Qh;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),i=qh(i,null,n,1,o??null,d,!1,p,v),n[An]=i.current,Wi(n),u)for(n=0;n<u.length;n++)o=u[n],d=o._getVersion,d=d(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,d]:i.mutableSourceEagerHydrationData.push(o,d);return new zo(i)},St.render=function(n,i,o){if(!Vo(i))throw Error(t(200));return Wo(null,n,i,!1,o)},St.unmountComponentAtNode=function(n){if(!Vo(n))throw Error(t(40));return n._reactRootContainer?(kr(function(){Wo(null,null,n,!1,function(){n._reactRootContainer=null,n[An]=null})}),!0):!1},St.unstable_batchedUpdates=Nu,St.unstable_renderSubtreeIntoContainer=function(n,i,o,u){if(!Vo(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Wo(n,i,o,!1,u)},St.version="18.3.1-next-f1338f8080-20240426",St}var op;function M0(){if(op)return Du.exports;op=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Du.exports=b0(),Du.exports}var ap;function j0(){if(ap)return Ko;ap=1;var r=M0();return Ko.createRoot=r.createRoot,Ko.hydrateRoot=r.hydrateRoot,Ko}var F0=j0();const $0={},lp=r=>{let e;const t=new Set,s=(g,y)=>{const E=typeof g=="function"?g(e):g;if(!Object.is(E,e)){const k=e;e=y??(typeof E!="object"||E===null)?E:Object.assign({},e,E),t.forEach(w=>w(e,k))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>m,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{($0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},m=e=r(s,a,h);return h},U0=r=>r?lp(r):lp;var Vu={exports:{}},Wu={},Gu={exports:{}},Ku={};var up;function D0(){if(up)return Ku;up=1;var r=Rs();function e(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var t=typeof Object.is=="function"?Object.is:e,s=r.useState,a=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function f(y,E){var k=E(),w=s({inst:{value:k,getSnapshot:E}}),R=w[0].inst,j=w[1];return l(function(){R.value=k,R.getSnapshot=E,h(R)&&j({inst:R})},[y,k,E]),a(function(){return h(R)&&j({inst:R}),y(function(){h(R)&&j({inst:R})})},[y]),c(k),k}function h(y){var E=y.getSnapshot;y=y.value;try{var k=E();return!t(y,k)}catch{return!0}}function m(y,E){return E()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return Ku.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ku}var cp;function B0(){return cp||(cp=1,Gu.exports=D0()),Gu.exports}var fp;function z0(){if(fp)return Wu;fp=1;var r=Rs(),e=B0();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=r.useRef,c=r.useEffect,f=r.useMemo,h=r.useDebugValue;return Wu.useSyncExternalStoreWithSelector=function(m,g,y,E,k){var w=l(null);if(w.current===null){var R={hasValue:!1,value:null};w.current=R}else R=w.current;w=f(function(){function M(L){if(!_){if(_=!0,P=L,L=E(L),k!==void 0&&R.hasValue){var D=R.value;if(k(D,L))return b=D}return b=L}if(D=b,s(P,L))return D;var G=E(L);return k!==void 0&&k(D,G)?(P=L,D):(P=L,b=G)}var _=!1,P,b,z=y===void 0?null:y;return[function(){return M(g())},z===null?void 0:function(){return M(z())}]},[g,y,E,k]);var j=a(m,w[0],w[1]);return c(function(){R.hasValue=!0,R.value=j},[j]),h(j),j},Wu}var dp;function V0(){return dp||(dp=1,Vu.exports=z0()),Vu.exports}var W0=V0();const G0=Pc(W0),Fm={},{useDebugValue:K0}=Rr,{useSyncExternalStoreWithSelector:H0}=G0;let hp=!1;const Y0=r=>r;function q0(r,e=Y0,t){(Fm?"production":void 0)!=="production"&&t&&!hp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hp=!0);const s=H0(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return K0(s),s}const pp=r=>{(Fm?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?U0(r):r,t=(s,a)=>q0(e,s,a);return Object.assign(t,e),t},X0=r=>r?pp(r):pp,Q0=`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills and commands.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation for current file"
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest", "Testing Library"]
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "refactor", "test"]
  }
}

@restrictions {
  - "Always explain your reasoning before making changes"
  - "Ask for clarification when requirements are unclear"
  - "Never skip writing tests for new functionality"
}
`,Z0={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}},ie=X0(r=>({files:[{path:"project.prs",content:Q0}],activeFile:"project.prs",isCompiling:!1,compileResult:null,lastCompileTime:null,config:Z0,activeFormatter:"github",showErrors:!1,showExamples:!1,showConfig:!1,showEnvVars:!1,setActiveFile:e=>r({activeFile:e}),updateFile:(e,t)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,content:t}:a)})),addFile:(e,t)=>r(s=>({files:[...s.files,{path:e,content:t}],activeFile:e})),deleteFile:e=>r(t=>{const s=t.files.filter(l=>l.path!==e),a=t.activeFile===e?s[0]?.path??"project.prs":t.activeFile;return{files:s,activeFile:a}}),renameFile:(e,t)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,path:t}:a),activeFile:s.activeFile===e?t:s.activeFile})),setFiles:e=>r({files:e,activeFile:e[0]?.path??"project.prs"}),setCompiling:e=>r({isCompiling:e}),setCompileResult:e=>r({compileResult:e,lastCompileTime:Date.now(),showErrors:e!==null&&!e.success}),setTargetEnabled:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],enabled:t}}}})),setTargetVersion:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],version:t}}}})),setTargetConvention:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],convention:t}}}})),setFormatting:e=>r(t=>({config:{...t.config,formatting:{...t.config.formatting,...e}}})),setConfig:e=>r({config:e}),setEnvVar:(e,t)=>r(s=>({config:{...s.config,envVars:{...s.config.envVars,[e]:t}}})),deleteEnvVar:e=>r(t=>{const{[e]:s,...a}=t.config.envVars;return{config:{...t.config,envVars:a}}}),setEnvVars:e=>r(t=>({config:{...t.config,envVars:e}})),setActiveFormatter:e=>r({activeFormatter:e}),setShowErrors:e=>r({showErrors:e}),setShowExamples:e=>r({showExamples:e}),setShowConfig:e=>r({showConfig:e}),setShowEnvVars:e=>r({showEnvVars:e})})),J0=r=>r.files.find(e=>e.path===r.activeFile)?.content??"",eE=r=>{const e={};for(const t of r.files)e[t.path]=t.content;return e},tE=(r,e)=>{if(!r.compileResult?.outputs)return[];const t=r.compileResult.outputs,s=[],l={claude:[/CLAUDE\.md$/,/\.claude\/rules\/.*\.md$/,/\.claude\/skills\/.*\.md$/,/\.claude\/memories\/.*\.md$/],github:[/\.github\/copilot-instructions\.md$/,/copilot-instructions\.md$/,/\.github\/instructions\/.*\.instructions\.md$/,/\.github\/prompts\/.*\.prompt\.md$/,/\.github\/skills\/.*\/SKILL\.md$/,/\.github\/agents\/.*\.md$/,/^AGENTS\.md$/],cursor:[/\.cursor\/rules\/.*\.mdc$/,/\.cursorrules$/],antigravity:[/\.agent\/rules\/.*\.md$/,/\.agent\/workflows\/.*\.md$/]}[e];for(const[h,m]of t)l.some(g=>g.test(h))&&s.push(m);const f={claude:"CLAUDE.md",github:"copilot-instructions.md",cursor:"instructions.mdc",antigravity:"project.md"}[e];return s.sort((h,m)=>{const g=h.path.endsWith(f),y=m.path.endsWith(f);return g&&!y?-1:!g&&y?1:h.path.localeCompare(m.path)}),s},nE=r=>Object.entries(r.config.targets).filter(([,e])=>e.enabled).map(([e])=>e);var Hu={exports:{}},mp;function rE(){return mp||(mp=1,(function(r){var e=(function(){var t=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={};function c(h,m){if(!l[h]){l[h]={};for(var g=0;g<h.length;g++)l[h][h.charAt(g)]=g}return l[h][m]}var f={compressToBase64:function(h){if(h==null)return"";var m=f._compress(h,6,function(g){return s.charAt(g)});switch(m.length%4){default:case 0:return m;case 1:return m+"===";case 2:return m+"==";case 3:return m+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:f._decompress(h.length,32,function(m){return c(s,h.charAt(m))})},compressToUTF16:function(h){return h==null?"":f._compress(h,15,function(m){return t(m+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:f._decompress(h.length,16384,function(m){return h.charCodeAt(m)-32})},compressToUint8Array:function(h){for(var m=f.compress(h),g=new Uint8Array(m.length*2),y=0,E=m.length;y<E;y++){var k=m.charCodeAt(y);g[y*2]=k>>>8,g[y*2+1]=k%256}return g},decompressFromUint8Array:function(h){if(h==null)return f.decompress(h);for(var m=new Array(h.length/2),g=0,y=m.length;g<y;g++)m[g]=h[g*2]*256+h[g*2+1];var E=[];return m.forEach(function(k){E.push(t(k))}),f.decompress(E.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":f._compress(h,6,function(m){return a.charAt(m)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),f._decompress(h.length,32,function(m){return c(a,h.charAt(m))}))},compress:function(h){return f._compress(h,16,function(m){return t(m)})},_compress:function(h,m,g){if(h==null)return"";var y,E,k={},w={},R="",j="",M="",_=2,P=3,b=2,z=[],L=0,D=0,G;for(G=0;G<h.length;G+=1)if(R=h.charAt(G),Object.prototype.hasOwnProperty.call(k,R)||(k[R]=P++,w[R]=!0),j=M+R,Object.prototype.hasOwnProperty.call(k,j))M=j;else{if(Object.prototype.hasOwnProperty.call(w,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete w[M]}else for(E=k[M],y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++),k[j]=P++,M=String(R)}if(M!==""){if(Object.prototype.hasOwnProperty.call(w,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete w[M]}else for(E=k[M],y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++)}for(E=2,y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;for(;;)if(L=L<<1,D==m-1){z.push(g(L));break}else D++;return z.join("")},decompress:function(h){return h==null?"":h==""?null:f._decompress(h.length,32768,function(m){return h.charCodeAt(m)})},_decompress:function(h,m,g){var y=[],E=4,k=4,w=3,R="",j=[],M,_,P,b,z,L,D,G={val:g(0),position:m,index:1};for(M=0;M<3;M+=1)y[M]=M;for(P=0,z=Math.pow(2,2),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;D=t(P);break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;D=t(P);break;case 2:return""}for(y[3]=D,_=D,j.push(D);;){if(G.index>h)return"";for(P=0,z=Math.pow(2,w),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(D=P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[k++]=t(P),D=k-1,E--;break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[k++]=t(P),D=k-1,E--;break;case 2:return j.join("")}if(E==0&&(E=Math.pow(2,w),w++),y[D])R=y[D];else if(D===k)R=_+_.charAt(0);else return null;j.push(R),y[k++]=_+R.charAt(0),E--,_=R,E==0&&(E=Math.pow(2,w),w++)}}};return f})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Hu)),Hu.exports}var iE=rE();const $m=Pc(iE),sE="1",sr={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}};function oE(r){const e={},t={};for(const[a,l]of Object.entries(r.targets)){const c=sr.targets[a],f={};l.enabled!==c.enabled&&(f.enabled=l.enabled),l.version!==c.version&&(f.version=l.version),l.convention!==c.convention&&(f.convention=l.convention),Object.keys(f).length>0&&(t[a]=f)}Object.keys(t).length>0&&(e.targets=t);const s={};return r.formatting.tabWidth!==sr.formatting.tabWidth&&(s.tabWidth=r.formatting.tabWidth),r.formatting.proseWrap!==sr.formatting.proseWrap&&(s.proseWrap=r.formatting.proseWrap),r.formatting.printWidth!==sr.formatting.printWidth&&(s.printWidth=r.formatting.printWidth),Object.keys(s).length>0&&(e.formatting=s),r.envVars&&Object.keys(r.envVars).length>0&&(e.envVars=r.envVars),Object.keys(e).length>0?e:void 0}function aE(r){if(!r)return{...sr};const e={targets:{...sr.targets},formatting:{...sr.formatting},envVars:{...sr.envVars}};if(r.targets)for(const[t,s]of Object.entries(r.targets))e.targets[t]={...e.targets[t],...s};return r.formatting&&(e.formatting={...e.formatting,...r.formatting}),r.envVars&&(e.envVars={...r.envVars}),e}function Um(r,e,t,s){const a={files:r.map(f=>({path:f.path,content:f.content})),entry:r[0]?.path,formatter:e,config:s?oE(s):void 0,version:sE},l=JSON.stringify(a);return $m.compressToEncodedURIComponent(l)}function lE(r){try{const e=$m.decompressFromEncodedURIComponent(r);if(!e)return null;const t=JSON.parse(e);if(!t.files||!Array.isArray(t.files))return null;for(const s of t.files)if(typeof s.path!="string"||typeof s.content!="string")return null;return t}catch{return null}}function uE(r,e,t,s){const a=Um(r,e,t,s),l=new URL(window.location.href);return l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.toString()}function cE(){const r=new URL(window.location.href),e=r.searchParams.get("s");if(!e)return null;const t=lE(e);if(!t)return null;const s=r.searchParams.get("f");return s&&(t.formatter=s),t}function fE(){return new URL(window.location.href).searchParams.get("e")}function dE(r,e,t,s){const a=Um(r,e,t,s),l=new URL(window.location.href);l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.searchParams.delete("e"),window.history.replaceState(null,"",l.toString())}async function hE(r,e,t,s){try{const a=uE(r,e,t,s);return await navigator.clipboard.writeText(a),!0}catch{return!1}}function pE(){const r=ie(m=>m.files),e=ie(m=>m.activeFormatter),t=ie(m=>m.config),s=ie(m=>m.setFiles),a=ie(m=>m.setActiveFormatter),l=ie(m=>m.setConfig),c=Z.useRef(!1),f=Z.useRef(null);return Z.useEffect(()=>{if(c.current||(c.current=!0,fE()))return;const g=cE();g&&(s(g.files),g.formatter&&a(g.formatter),g.config&&l(aE(g.config)))},[s,a,l]),Z.useEffect(()=>{if(c.current)return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{dE(r,e,void 0,t)},1e3),()=>{f.current&&clearTimeout(f.current)}},[r,e,t]),{handleShare:Z.useCallback(async()=>await hE(r,e,void 0,t),[r,e,t])}}const mE="1.0.0-rc.2",gE="https://github.com/mrwogu/promptscript";function vE(){const r=ie(R=>R.isCompiling),e=ie(R=>R.compileResult),t=ie(R=>R.showExamples),s=ie(R=>R.setShowExamples),a=ie(R=>R.showConfig),l=ie(R=>R.setShowConfig),c=ie(R=>R.showEnvVars),f=ie(R=>R.setShowEnvVars),h=Object.keys(ie(R=>R.config.envVars)).length,{handleShare:m}=pE(),[g,y]=Z.useState(!1),E=e&&!e.success,k=e?.stats,w=async()=>{await m()&&(y(!0),setTimeout(()=>y(!1),2e3))};return C.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-ps-surface border-b border-ps-border",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx("span",{className:"text-ps-primary",children:"PRS"}),C.jsx("span",{children:"PromptScript Playground"})]}),C.jsxs("span",{className:"text-xs text-gray-500",children:["v",mE]})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"flex items-center gap-2 text-sm",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),C.jsx("span",{className:"text-gray-400",children:"Compiling..."})]}):E?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),C.jsxs("span",{className:"text-red-400",children:[e.errors.length," error",e.errors.length!==1?"s":""]})]}):e?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),C.jsxs("span",{className:"text-green-400",children:["Compiled in ",k?.totalTime,"ms"]})]}):null}),C.jsxs("button",{onClick:()=>l(!a),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${a?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Configuration",children:[C.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Config"]}),C.jsxs("button",{onClick:()=>f(!c),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${c?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Environment Variables",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Env",h>0&&C.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-indigo-500 rounded-full",children:h})]}),C.jsx("button",{onClick:()=>s(!t),className:`px-3 py-1 text-sm rounded ${t?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,children:"Examples"}),C.jsx("button",{onClick:w,className:"px-3 py-1 text-sm bg-ps-primary hover:bg-ps-secondary rounded text-white relative",children:g?"Copied!":"Share"}),C.jsx("a",{href:gE,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z",clipRule:"evenodd"})})})]})]})}function yE(){const r=ie(k=>k.files),e=ie(k=>k.activeFile),t=ie(k=>k.setActiveFile),s=ie(k=>k.addFile),a=ie(k=>k.deleteFile),l=ie(k=>k.renameFile),[c,f]=Z.useState(null),[h,m]=Z.useState(""),g=()=>{const k="new-file";let w=`${k}.prs`,R=1;for(;r.some(j=>j.path===w);)w=`${k}-${R}.prs`,R++;s(w,`@meta {
  id: "`+w.replace(".prs","")+`"
  syntax: "1.0.0"
}
`)},y=k=>{f(k),m(k)},E=k=>{if(h&&h!==k){const w=h.endsWith(".prs")?h:`${h}.prs`;r.some(R=>R.path===w)||l(k,w)}f(null)};return C.jsxs("div",{className:"flex items-center bg-ps-bg border-b border-ps-border overflow-x-auto",children:[r.map(k=>C.jsx("div",{className:`group flex items-center px-3 py-2 text-sm cursor-pointer border-r border-ps-border ${e===k.path?"bg-ps-surface text-white":"text-gray-400 hover:bg-ps-surface/50"}`,onClick:()=>t(k.path),onDoubleClick:()=>y(k.path),children:c===k.path?C.jsx("input",{type:"text",value:h,onChange:w=>m(w.target.value),onBlur:()=>E(k.path),onKeyDown:w=>{w.key==="Enter"&&E(k.path),w.key==="Escape"&&f(null)},className:"bg-transparent border-b border-ps-primary outline-none w-24",autoFocus:!0,onClick:w=>w.stopPropagation()}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"truncate max-w-[120px]",children:k.path}),r.length>1&&C.jsx("button",{onClick:w=>{w.stopPropagation(),a(k.path)},className:"ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-red-400",children:""})]})},k.path)),C.jsx("button",{onClick:g,className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-ps-surface/50",title:"Add new file",children:"+"})]})}function gp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function EE(r){if(Array.isArray(r))return r}function SE(r,e,t){return(e=RE(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,l,c,f=[],h=!0,m=!1;try{if(l=(t=t.call(r)).next,e!==0)for(;!(h=(s=l.call(t)).done)&&(f.push(s.value),f.length!==e);h=!0);}catch(g){m=!0,a=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(m)throw a}}return f}}function kE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function yp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vp(Object(t),!0).forEach(function(s){SE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function xE(r,e){if(r==null)return{};var t,s,a=AE(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)t=l[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(a[t]=r[t])}return a}function AE(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;t[s]=r[s]}return t}function wE(r,e){return EE(r)||TE(r,e)||NE(r,e)||kE()}function CE(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function RE(r){var e=CE(r,"string");return typeof e=="symbol"?e:e+""}function NE(r,e){if(r){if(typeof r=="string")return gp(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gp(r,e):void 0}}function OE(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ep(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function Sp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ep(Object(t),!0).forEach(function(s){OE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ep(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function IE(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(s){return e.reduceRight(function(a,l){return l(a)},s)}}function ps(r){return function e(){for(var t=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(a,f))}}}function ha(r){return{}.toString.call(r).includes("Object")}function _E(r){return!Object.keys(r).length}function ks(r){return typeof r=="function"}function PE(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function LE(r,e){return ha(e)||or("changeType"),Object.keys(e).some(function(t){return!PE(r,t)})&&or("changeField"),e}function bE(r){ks(r)||or("selectorType")}function ME(r){ks(r)||ha(r)||or("handlerType"),ha(r)&&Object.values(r).some(function(e){return!ks(e)})&&or("handlersType")}function jE(r){r||or("initialIsRequired"),ha(r)||or("initialType"),_E(r)&&or("initialContent")}function FE(r,e){throw new Error(r[e]||r.default)}var $E={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},or=ps(FE)($E),Ho={changes:LE,selector:bE,handler:ME,initial:jE};function UE(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ho.initial(r),Ho.handler(e);var t={current:r},s=ps(zE)(t,e),a=ps(BE)(t),l=ps(Ho.changes)(r),c=ps(DE)(t);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Ho.selector(m),m(t.current)}function h(m){IE(s,a,l,c)(m)}return[f,h]}function DE(r,e){return ks(e)?e(r.current):e}function BE(r,e){return r.current=Sp(Sp({},r.current),e),e}function zE(r,e,t){return ks(e)?e(r.current):Object.keys(t).forEach(function(s){var a;return(a=e[s])===null||a===void 0?void 0:a.call(e,r.current[s])}),t}var VE={create:UE},WE={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function GE(r){return function e(){for(var t=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(a,f))}}}function KE(r){return{}.toString.call(r).includes("Object")}function HE(r){return r||Tp("configIsRequired"),KE(r)||Tp("configType"),r.urls?(YE(),{paths:{vs:r.urls.monacoBase}}):r}function YE(){console.warn(Dm.deprecation)}function qE(r,e){throw new Error(r[e]||r.default)}var Dm={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Tp=GE(qE)(Dm),XE={config:HE},QE=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(a){return t.reduceRight(function(l,c){return c(l)},a)}};function Bm(r,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&r[t]&&Object.assign(e[t],Bm(r[t],e[t]))}),yp(yp({},r),e)}var ZE={type:"cancelation",msg:"operation is manually canceled"};function Yu(r){var e=!1,t=new Promise(function(s,a){r.then(function(l){return e?a(ZE):s(l)}),r.catch(a)});return t.cancel=function(){return e=!0},t}var JE=["monaco"],eS=VE.create({config:WE,isInitialized:!1,resolve:null,reject:null,monaco:null}),zm=wE(eS,2),Ns=zm[0],Ca=zm[1];function tS(r){var e=XE.config(r),t=e.monaco,s=xE(e,JE);Ca(function(a){return{config:Bm(a.config,s),monaco:t}})}function nS(){var r=Ns(function(e){var t=e.monaco,s=e.isInitialized,a=e.resolve;return{monaco:t,isInitialized:s,resolve:a}});if(!r.isInitialized){if(Ca({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Yu(qu);if(window.monaco&&window.monaco.editor)return Vm(window.monaco),r.resolve(window.monaco),Yu(qu);QE(rS,sS)(oS)}return Yu(qu)}function rS(r){return document.body.appendChild(r)}function iS(r){var e=document.createElement("script");return r&&(e.src=r),e}function sS(r){var e=Ns(function(s){var a=s.config,l=s.reject;return{config:a,reject:l}}),t=iS("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return r()},t.onerror=e.reject,t}function oS(){var r=Ns(function(t){var s=t.config,a=t.resolve,l=t.reject;return{config:s,resolve:a,reject:l}}),e=window.require;e.config(r.config),e(["vs/editor/editor.main"],function(t){var s=t.m||t;Vm(s),r.resolve(s)},function(t){r.reject(t)})}function Vm(r){Ns().monaco||Ca({monaco:r})}function aS(){return Ns(function(r){var e=r.monaco;return e})}var qu=new Promise(function(r,e){return Ca({resolve:r,reject:e})}),Wm={config:tS,init:nS,__getMonacoInstance:aS},lS={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Xu=lS,uS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cS=uS;function fS({children:r}){return Rr.createElement("div",{style:cS.container},r)}var dS=fS,hS=dS;function pS({width:r,height:e,isEditorReady:t,loading:s,_ref:a,className:l,wrapperProps:c}){return Rr.createElement("section",{style:{...Xu.wrapper,width:r,height:e},...c},!t&&Rr.createElement(hS,null,s),Rr.createElement("div",{ref:a,style:{...Xu.fullWidth,...!t&&Xu.hide},className:l}))}var mS=pS,Gm=Z.memo(mS);function gS(r){Z.useEffect(r,[])}var Km=gS;function vS(r,e,t=!0){let s=Z.useRef(!0);Z.useEffect(s.current||!t?()=>{s.current=!1}:r,e)}var It=vS;function ys(){}function hi(r,e,t,s){return yS(r,s)||ES(r,e,t,s)}function yS(r,e){return r.editor.getModel(Hm(r,e))}function ES(r,e,t,s){return r.editor.createModel(e,t,s?Hm(r,s):void 0)}function Hm(r,e){return r.Uri.parse(e)}function SS({original:r,modified:e,language:t,originalLanguage:s,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:m="light",loading:g="Loading...",options:y={},height:E="100%",width:k="100%",className:w,wrapperProps:R={},beforeMount:j=ys,onMount:M=ys}){let[_,P]=Z.useState(!1),[b,z]=Z.useState(!0),L=Z.useRef(null),D=Z.useRef(null),G=Z.useRef(null),Ae=Z.useRef(M),ce=Z.useRef(j),Ge=Z.useRef(!1);Km(()=>{let de=Wm.init();return de.then(ve=>(D.current=ve)&&z(!1)).catch(ve=>ve?.type!=="cancelation"&&console.error("Monaco initialization: error:",ve)),()=>L.current?Ue():de.cancel()}),It(()=>{if(L.current&&D.current){let de=L.current.getOriginalEditor(),ve=hi(D.current,r||"",s||t||"text",l||"");ve!==de.getModel()&&de.setModel(ve)}},[l],_),It(()=>{if(L.current&&D.current){let de=L.current.getModifiedEditor(),ve=hi(D.current,e||"",a||t||"text",c||"");ve!==de.getModel()&&de.setModel(ve)}},[c],_),It(()=>{let de=L.current.getModifiedEditor();de.getOption(D.current.editor.EditorOption.readOnly)?de.setValue(e||""):e!==de.getValue()&&(de.executeEdits("",[{range:de.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),de.pushUndoStop())},[e],_),It(()=>{L.current?.getModel()?.original.setValue(r||"")},[r],_),It(()=>{let{original:de,modified:ve}=L.current.getModel();D.current.editor.setModelLanguage(de,s||t||"text"),D.current.editor.setModelLanguage(ve,a||t||"text")},[t,s,a],_),It(()=>{D.current?.editor.setTheme(m)},[m],_),It(()=>{L.current?.updateOptions(y)},[y],_);let tt=Z.useCallback(()=>{if(!D.current)return;ce.current(D.current);let de=hi(D.current,r||"",s||t||"text",l||""),ve=hi(D.current,e||"",a||t||"text",c||"");L.current?.setModel({original:de,modified:ve})},[t,e,a,r,s,l,c]),$e=Z.useCallback(()=>{!Ge.current&&G.current&&(L.current=D.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...y}),tt(),D.current?.editor.setTheme(m),P(!0),Ge.current=!0)},[y,m,tt]);Z.useEffect(()=>{_&&Ae.current(L.current,D.current)},[_]),Z.useEffect(()=>{!b&&!_&&$e()},[b,_,$e]);function Ue(){let de=L.current?.getModel();f||de?.original?.dispose(),h||de?.modified?.dispose(),L.current?.dispose()}return Rr.createElement(Gm,{width:k,height:E,isEditorReady:_,loading:g,_ref:G,className:w,wrapperProps:R})}var TS=SS;Z.memo(TS);function kS(r){let e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}var xS=kS,Yo=new Map;function AS({defaultValue:r,defaultLanguage:e,defaultPath:t,value:s,language:a,path:l,theme:c="light",line:f,loading:h="Loading...",options:m={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:E=!1,width:k="100%",height:w="100%",className:R,wrapperProps:j={},beforeMount:M=ys,onMount:_=ys,onChange:P,onValidate:b=ys}){let[z,L]=Z.useState(!1),[D,G]=Z.useState(!0),Ae=Z.useRef(null),ce=Z.useRef(null),Ge=Z.useRef(null),tt=Z.useRef(_),$e=Z.useRef(M),Ue=Z.useRef(),de=Z.useRef(s),ve=xS(l),xe=Z.useRef(!1),W=Z.useRef(!1);Km(()=>{let A=Wm.init();return A.then(F=>(Ae.current=F)&&G(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>ce.current?K():A.cancel()}),It(()=>{let A=hi(Ae.current,r||s||"",e||a||"",l||t||"");A!==ce.current?.getModel()&&(y&&Yo.set(ve,ce.current?.saveViewState()),ce.current?.setModel(A),y&&ce.current?.restoreViewState(Yo.get(l)))},[l],z),It(()=>{ce.current?.updateOptions(m)},[m],z),It(()=>{!ce.current||s===void 0||(ce.current.getOption(Ae.current.editor.EditorOption.readOnly)?ce.current.setValue(s):s!==ce.current.getValue()&&(W.current=!0,ce.current.executeEdits("",[{range:ce.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),ce.current.pushUndoStop(),W.current=!1))},[s],z),It(()=>{let A=ce.current?.getModel();A&&a&&Ae.current?.editor.setModelLanguage(A,a)},[a],z),It(()=>{f!==void 0&&ce.current?.revealLine(f)},[f],z),It(()=>{Ae.current?.editor.setTheme(c)},[c],z);let J=Z.useCallback(()=>{if(!(!Ge.current||!Ae.current)&&!xe.current){$e.current(Ae.current);let A=l||t,F=hi(Ae.current,s||r||"",e||a||"",A||"");ce.current=Ae.current?.editor.create(Ge.current,{model:F,automaticLayout:!0,...m},g),y&&ce.current.restoreViewState(Yo.get(A)),Ae.current.editor.setTheme(c),f!==void 0&&ce.current.revealLine(f),L(!0),xe.current=!0}},[r,e,t,s,a,l,m,g,y,c,f]);Z.useEffect(()=>{z&&tt.current(ce.current,Ae.current)},[z]),Z.useEffect(()=>{!D&&!z&&J()},[D,z,J]),de.current=s,Z.useEffect(()=>{z&&P&&(Ue.current?.dispose(),Ue.current=ce.current?.onDidChangeModelContent(A=>{W.current||P(ce.current.getValue(),A)}))},[z,P]),Z.useEffect(()=>{if(z){let A=Ae.current.editor.onDidChangeMarkers(F=>{let fe=ce.current.getModel()?.uri;if(fe&&F.find(te=>te.path===fe.path)){let te=Ae.current.editor.getModelMarkers({resource:fe});b?.(te)}});return()=>{A?.dispose()}}return()=>{}},[z,b]);function K(){Ue.current?.dispose(),E?y&&Yo.set(l,ce.current.saveViewState()):ce.current.getModel()?.dispose(),ce.current.dispose()}return Rr.createElement(Gm,{width:k,height:w,isEditorReady:z,loading:h,_ref:Ge,className:R,wrapperProps:j})}var wS=AS,CS=Z.memo(wS),RS=CS;const pi="promptscript",NS={defaultToken:"",tokenPostfix:".prs",keywords:["true","false","null","string","number","boolean","enum"],directives:["@meta","@inherit","@extend","@use","@identity","@context","@standards","@restrictions","@guardrails","@shortcuts","@tools","@skills","@knowledge","@examples","@output","@behavior","@memory","@guards","@agents","@params","@project"],operators:[":"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/#.*$/,"comment"],[/@\w+/,{cases:{"@directives":"keyword.directive","@default":"keyword.directive"}}],[/[a-zA-Z_][\w-]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/:/,"delimiter"],[/,/,"delimiter"],[/\{\{/,"variable.template","@templateExpression"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/"""/,"string","@multilineString"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],templateExpression:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"],[/#.*$/,"comment"]],string:[[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^\\"$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/\$(?!\{)/,"string"],[/"/,"string","@pop"]],multilineString:[[/\{\{/,"variable.template","@templateExpressionInString"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^"{$]+/,"string"],[/\$(?!\{)/,"string"],[/"""/,"string","@pop"],[/"/,"string"]],templateExpressionInString:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]]}},OS={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],folding:{markers:{start:/^\s*@\w+\s*\{/,end:/^\s*\}/}}},IS=[{token:"keyword.directive",foreground:"818cf8",fontStyle:"bold"},{token:"keyword",foreground:"93c5fd"},{token:"string",foreground:"a3e635"},{token:"string.escape",foreground:"facc15"},{token:"comment",foreground:"6b7280",fontStyle:"italic"},{token:"number",foreground:"f472b6"},{token:"identifier",foreground:"f8fafc"},{token:"delimiter",foreground:"94a3b8"},{token:"variable.template",foreground:"f472b6",fontStyle:"bold"},{token:"variable.name",foreground:"fb923c"},{token:"variable.env",foreground:"fbbf24"}];function _S(r){r.languages.getLanguages().some(t=>t.id===pi)||(r.languages.register({id:pi,extensions:[".prs"],aliases:["PromptScript","prs"],mimetypes:["text/x-promptscript"]}),r.languages.setMonarchTokensProvider(pi,NS),r.languages.setLanguageConfiguration(pi,OS),r.editor.defineTheme("prs-dark",{base:"vs-dark",inherit:!0,rules:IS,colors:{"editor.background":"#0f172a","editor.foreground":"#f8fafc","editor.lineHighlightBackground":"#1e293b","editorCursor.foreground":"#6366f1","editor.selectionBackground":"#334155","editorLineNumber.foreground":"#475569","editorLineNumber.activeForeground":"#94a3b8"}}))}function PS(r){return{provideCompletionItems:(e,t)=>{const s=e.getWordUntilPosition(t),a={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};return{suggestions:[{label:"@meta",kind:r.languages.CompletionItemKind.Keyword,insertText:`@meta {
  id: "$1"
  syntax: "1.0.0"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define metadata for the PromptScript file",range:a},{label:"@inherit",kind:r.languages.CompletionItemKind.Keyword,insertText:"@inherit $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Inherit from another PromptScript file",range:a},{label:"@use",kind:r.languages.CompletionItemKind.Keyword,insertText:"@use $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Import and merge directives from another file",range:a},{label:"@identity",kind:r.languages.CompletionItemKind.Keyword,insertText:`@identity {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define the AI identity/persona",range:a},{label:"@context",kind:r.languages.CompletionItemKind.Keyword,insertText:`@context {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide contextual information",range:a},{label:"@standards",kind:r.languages.CompletionItemKind.Keyword,insertText:`@standards {
  $1: [$2]
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define coding standards and guidelines",range:a},{label:"@restrictions",kind:r.languages.CompletionItemKind.Keyword,insertText:`@restrictions {
  - "$1"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define things the AI should NOT do",range:a},{label:"@shortcuts",kind:r.languages.CompletionItemKind.Keyword,insertText:`@shortcuts {
  "/$1": "$2"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define custom command shortcuts",range:a},{label:"@tools",kind:r.languages.CompletionItemKind.Keyword,insertText:`@tools {
  $1: {
    description: "$2"
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define available tools",range:a},{label:"@examples",kind:r.languages.CompletionItemKind.Keyword,insertText:`@examples {
  $1: {
    input: """
    $2
    """
    output: """
    $3
    """
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide example interactions",range:a}]}}}}function LS(){const r=ie(c=>c.activeFile),e=ie(J0),t=ie(c=>c.updateFile),s=Z.useRef(null),a=c=>{_S(c),c.languages.registerCompletionItemProvider(pi,PS(c)),s.current=c},l=c=>{c.focus()};return C.jsx("div",{className:"h-full",children:C.jsx(RS,{height:"100%",language:pi,theme:"prs-dark",value:e,onChange:c=>{c!==void 0&&t(r,c)},beforeMount:a,onMount:l,options:{fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",renderLineHighlight:"line",tabSize:2,wordWrap:"on",automaticLayout:!0,padding:{top:12},suggestOnTriggerCharacters:!0,quickSuggestions:{other:!0,strings:!1,comments:!1}}})})}const bS=[{name:"github",label:"GitHub",icon:""},{name:"claude",label:"Claude",icon:""},{name:"cursor",label:"Cursor",icon:""},{name:"antigravity",label:"Antigravity",icon:""}];function MS(r){const e=new Map,t=r.map(a=>{const l=a.split("/");return l[l.length-1]??a}),s=new Map;for(const a of t)s.set(a,(s.get(a)??0)+1);for(const[a,l]of r.entries()){const c=t[a]??l;if((s.get(c)??0)>1){const f=l.split("/");if(f.length>=2){const h=f[f.length-2]??"";e.set(l,`${h}/${c}`)}else e.set(l,c)}else e.set(l,c)}return e}function jS(){const r=ie(g=>g.activeFormatter),e=ie(g=>g.setActiveFormatter),t=ie(g=>g.compileResult),s=ie(g=>g.isCompiling),a=ie(nE),l=ie(g=>tE(g,r)),[c,f]=Z.useState(0);Z.useEffect(()=>{f(0)},[r,l.length]),Z.useEffect(()=>{!a.includes(r)&&a.length>0&&e(a[0])},[r,a,e]);const h=Z.useMemo(()=>MS(l.map(g=>g.path)),[l]),m=l[c];return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg",children:bS.map(g=>{const y=a.includes(g.name),E=r===g.name;return C.jsxs("button",{onClick:()=>y&&e(g.name),disabled:!y,className:`px-4 py-2 text-sm flex items-center gap-2 ${y?E?"tab-active text-white":"tab-inactive text-gray-400":"opacity-30 cursor-not-allowed text-gray-500"}`,title:y?void 0:`${g.label} is disabled in config`,children:[C.jsx("span",{children:g.icon}),C.jsx("span",{children:g.label})]},g.name)})}),C.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-ps-surface",children:s?C.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-4 h-4 border-2 border-ps-primary border-t-transparent rounded-full animate-spin"}),C.jsx("span",{children:"Compiling..."})]})}):t&&!t.success?C.jsxs("div",{className:"p-4 overflow-auto",children:[C.jsx("div",{className:"text-red-400 font-medium mb-2",children:"Compilation Failed"}),C.jsx("ul",{className:"space-y-2",children:t.errors.map((g,y)=>C.jsx("li",{className:"text-sm",children:C.jsxs("div",{className:"text-red-300",children:[g.location?.file&&C.jsxs("span",{className:"text-gray-400",children:[g.location.file,":",g.location.line,":",g.location.column," "]}),C.jsxs("span",{className:"text-yellow-400",children:["[",g.code,"]"]})," ",g.message]})},y))})]}):l.length>0?C.jsxs(C.Fragment,{children:[l.length>1&&C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg overflow-x-auto",children:l.map((g,y)=>C.jsx("button",{onClick:()=>f(y),className:`px-3 py-1.5 text-xs font-mono whitespace-nowrap ${y===c?"bg-ps-surface text-white border-b-2 border-ps-primary":"text-gray-400 hover:text-gray-300 hover:bg-ps-surface/50"}`,title:g.path,children:h.get(g.path)||g.path},g.path))}),m&&C.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.path}),C.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.content)},className:"text-xs text-gray-400 hover:text-white px-2 py-1 rounded bg-ps-bg",children:"Copy"})]}),C.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap text-gray-300 bg-ps-bg p-4 rounded overflow-auto",children:m.content})]})]}):C.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No output available"})})]})}const Qu=[{id:"hello-world",name:"Hello World",description:"The simplest possible configuration",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "hello-world"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  """
}
`}]},{id:"minimal",name:"Minimal Setup",description:"Basic identity with multiline description",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "minimal-project"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  You provide clear and concise answers.
  You ask for clarification when needed.
  """
}
`}]},{id:"with-context",name:"With Context",description:"Adding project context and environment info",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "context-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a coding assistant for web development.
  You write modern, accessible code.
  """
}

@context {
  """
  This is a React frontend project using TypeScript.
  We use Tailwind CSS for styling.
  The project follows component-driven development.
  """
}
`}]},{id:"with-env-vars",name:"Environment Variables",description:"Using ${VAR} and ${VAR:-default} for dynamic configuration",complexity:"intermediate",envVars:{PROJECT_NAME:"My Awesome Project",API_VERSION:"v2",TEAM_NAME:"Platform Team"},files:[{path:"project.prs",content:`@meta {
  id: "env-vars-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an assistant for \${PROJECT_NAME}.
  You help the \${TEAM_NAME} build great software.
  """
}

@context {
  """
  Project: \${PROJECT_NAME}
  API Version: \${API_VERSION}
  Team: \${TEAM_NAME}
  Environment: \${ENVIRONMENT:-development}
  Debug Mode: \${DEBUG:-false}
  """

  # Object properties also support env vars
  project: "\${PROJECT_NAME}"
  apiVersion: "\${API_VERSION}"
  logLevel: "\${LOG_LEVEL:-info}"
}

@standards {
  # Env vars work in nested structures too
  api: {
    version: "\${API_VERSION}"
    baseUrl: "\${API_BASE_URL:-https://api.example.com}"
  }
}

@restrictions {
  - "Follow \${TEAM_NAME} coding guidelines"
  - "Use \${API_VERSION} API endpoints"
  - "Log level must be \${LOG_LEVEL:-info} or higher"
}
`}]},{id:"with-standards",name:"With Standards",description:"Configuration with coding standards and restrictions",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "coding-assistant"
  syntax: "1.0.0"
  tags: [development, typescript]
}

@identity {
  """
  You are an expert software developer.
  You write clean, maintainable, and well-tested code.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  testing: "Vitest"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
  documentation: ["JSDoc comments", "README updates"]
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor"]
  }
}

@restrictions {
  - "Never write untested code"
  - "Always handle errors properly"
  - "Don't use 'any' type in TypeScript"
  - "Don't commit secrets or credentials"
}
`}]},{id:"with-inheritance",name:"With Inheritance",description:"Using @inherit to extend shared base configs",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "frontend-project"
  syntax: "1.0.0"
}

# Inherit from promptscript-registry (github.com/mrwogu/promptscript-registry)
@inherit @core/base
@use @core/quality
@use @core/security

@context {
  """
  This is a React frontend project.
  We use TypeScript and Tailwind CSS.
  State management with Zustand.
  """
}

@standards {
  frameworks: ["React 18", "TypeScript 5", "Tailwind CSS"]
  testing: ["Vitest", "Playwright"]
}

@restrictions {
  - "Use functional components with hooks"
  - "No class components"
  - "Keep components under 200 lines"
}
`}]},{id:"parameterized-templates",name:"Parameterized Templates",description:"Reusable templates with {{variable}} interpolation",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "my-react-app"
  syntax: "1.0.0"
}

# Inherit from template with parameters
@inherit ./react-template(projectName: "Checkout App", port: 8080, strict: true)

@identity {
  """
  You specialize in e-commerce checkout flows.
  You understand payment integrations and cart management.
  """
}

@context {
  """
  E-commerce checkout application with Stripe integration.
  """
}
`},{path:"react-template.prs",content:`@meta {
  id: "react-template"
  syntax: "1.0.0"
  params: {
    # Required: Name of the project
    projectName: string

    # Optional: Development server port (default: 3000)
    port: number = 3000

    # Optional: Enable strict mode (default: true)
    strict: boolean = true

    # Optional: Test framework choice
    testFramework: enum("vitest", "jest") = "vitest"
  }
}

@identity {
  """
  You are a React developer working on {{projectName}}.
  You follow best practices and write clean code.
  """
}

@context {
  project: {{projectName}}
  devServer: "http://localhost:{{port}}"
  strictMode: {{strict}}
  testing: {{testFramework}}
}

@standards {
  code: {
    language: "TypeScript"
    framework: "React 18"
    testing: "{{testFramework}}"
  }
}

@restrictions {
  - "Use functional components only"
  - "Test coverage must be above 80%"
}
`}]},{id:"multi-file",name:"Multi-File Project",description:"Local inheritance with shared base configuration",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "team-project"
  syntax: "1.0.0"
}

# Inherit from local base file
@inherit ./base

@context {
  languages: ["TypeScript", "React"]
  runtime: "Node.js 20+"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
}

@restrictions {
  - "Use Zustand for state management"
  - "Keep bundle size under 200KB"
}
`},{path:"base.prs",content:`@meta {
  id: "team-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful team assistant.
  You follow our established conventions.
  You prioritize code quality and maintainability.
  """
}

@standards {
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test"]
  }
  documentation: ["README", "JSDoc", "CHANGELOG"]
}

@restrictions {
  - "Don't commit without tests"
  - "Don't push directly to main"
  - "Always request code review"
}
`}]},{id:"with-skills",name:"With Skills & Shortcuts",description:"Custom skills and shortcuts for automation",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation"
}

@restrictions {
  - "Always explain your reasoning"
  - "Ask for clarification when unsure"
  - "Never skip writing tests"
}
`}]},{id:"with-guards",name:"With Guards",description:"File-pattern guards for context-specific rules",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "guards-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an expert full-stack developer.
  You understand different contexts require different rules.
  """
}

@context {
  languages: ["TypeScript"]
  runtime: "Node.js 20+"
}

@guards {
  # Apply TypeScript rules to all TS files
  globs: ["**/*.ts", "**/*.tsx"]

  # Testing-specific rules
  testing: {
    applyTo: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
    description: "Testing rules"
    content: """
    - Use describe/it blocks for organization
    - Follow AAA pattern (Arrange, Act, Assert)
    - Mock external dependencies
    - Test edge cases and error conditions
    """
  }

  # Component-specific rules
  components: {
    applyTo: ["**/components/**/*.tsx"]
    description: "React component rules"
    content: """
    - Use functional components with hooks
    - Keep components focused and small
    - Extract logic into custom hooks
    - Use TypeScript for props interfaces
    """
  }
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest"]
  }
}
`}]},{id:"with-agents",name:"With Agents",description:"Custom AI agents with specific roles",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "agents-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development team coordinator.
  You can delegate tasks to specialized agents.
  """
}

@agents {
  coder: {
    description: "Expert code writer"
    model: "sonnet"
    tools: ["Read", "Edit", "Write", "Bash"]
    content: """
    You are an expert code writer.
    You write clean, efficient, and well-documented code.
    You follow established patterns in the codebase.
    """
  }
  reviewer: {
    description: "Code review specialist"
    model: "sonnet"
    tools: ["Read", "Grep", "Glob"]
    content: """
    You are a code review specialist.
    You identify bugs, security issues, and improvements.
    You provide constructive feedback.
    """
  }
  tester: {
    description: "Test writing specialist"
    model: "haiku"
    tools: ["Read", "Write", "Bash"]
    content: """
    You are a test writing specialist.
    You write comprehensive unit and integration tests.
    You ensure good coverage of edge cases.
    """
  }
}

@skills {
  implement: {
    description: "Implement a feature using the coder agent"
    content: "Delegate implementation to the coder agent"
  }
  review: {
    description: "Review code using the reviewer agent"
    content: "Delegate review to the reviewer agent"
  }
}

@shortcuts {
  "/implement": "Start implementing a feature"
  "/review": "Review recent changes"
  "/test": "Write tests for current code"
}
`}]},{id:"enterprise",name:"Enterprise Setup",description:"Full enterprise configuration with all features",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "enterprise-project"
  syntax: "1.0.0"
  tags: [enterprise, typescript, react]
}

# Inherit from local file + registry (github.com/mrwogu/promptscript-registry)
@inherit ./org-base
@use @core/security

@context {
  """
  Enterprise React application with strict security requirements.
  Follows organizational coding standards and compliance rules.
  """

  languages: ["TypeScript"]
  runtime: "Node.js 20 LTS"
  frameworks: ["React 18", "Next.js 14"]
  infrastructure: ["AWS", "Docker", "Kubernetes"]
}

@skills {
  "security-review": {
    description: "Review code for security vulnerabilities"
    content: """
    Perform security review:
    1. Check for OWASP Top 10 vulnerabilities
    2. Verify input validation and sanitization
    3. Check authentication and authorization
    4. Review data exposure and logging
    5. Verify secure communication
    """
  }
  deploy: {
    description: "Prepare deployment checklist"
    content: """
    Deployment preparation:
    1. Run full test suite
    2. Check for security vulnerabilities
    3. Verify environment variables
    4. Update changelog
    5. Create release notes
    """
  }
}

@guards {
  api: {
    applyTo: ["**/api/**", "**/routes/**"]
    description: "API security rules"
    content: """
    - Validate all input parameters
    - Use parameterized queries
    - Implement rate limiting
    - Log security events
    """
  }
  auth: {
    applyTo: ["**/auth/**", "**/middleware/**"]
    description: "Authentication rules"
    content: """
    - Never log credentials
    - Use secure session management
    - Implement proper CORS
    - Use HTTPS only
    """
  }
}

@shortcuts {
  "/security": "Run security review"
  "/deploy": "Prepare deployment"
  "/audit": "Run compliance audit"
}

@restrictions {
  - "All API endpoints must have authentication"
  - "No secrets in code - use environment variables"
  - "All user input must be validated"
  - "PII must be encrypted at rest"
  - "Changes require security team approval"
}
`},{path:"org-base.prs",content:`@meta {
  id: "org-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are an enterprise development assistant.
  You follow strict organizational standards.
  Security and compliance are top priorities.
  """
}

@standards {
  code: {
    languages: ["TypeScript"]
    strictMode: true
    exports: "named only"
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test", "security"]
    requireIssueReference: true
  }
  documentation: {
    required: ["README", "API docs", "CHANGELOG", "SECURITY.md"]
  }
  testing: {
    minimumCoverage: 80
    requiredTypes: ["unit", "integration", "e2e"]
  }
}

@restrictions {
  - "No direct database queries - use ORM"
  - "All functions must have return type annotations"
  - "No console.log in production code"
  - "Dependencies must be approved"
  - "No force push to protected branches"
}
`}]}],FS={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-purple-500/20 text-purple-400"},$S={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function US(){const r=ie(h=>h.setFiles),e=ie(h=>h.setShowExamples),t=ie(h=>h.setEnvVars),s=h=>{r(h.files),t(h.envVars??{}),e(!1)},a=Qu.filter(h=>h.complexity==="beginner"),l=Qu.filter(h=>h.complexity==="intermediate"),c=Qu.filter(h=>h.complexity==="advanced"),f=h=>C.jsxs("button",{onClick:()=>s(h),className:"text-left p-4 bg-ps-bg rounded-lg hover:bg-ps-border transition-colors",children:[C.jsxs("div",{className:"flex items-start justify-between gap-2",children:[C.jsx("h3",{className:"font-medium text-white",children:h.name}),C.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${FS[h.complexity]}`,children:$S[h.complexity]})]}),C.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h.description}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[C.jsxs("span",{className:"text-xs text-gray-500",children:[h.files.length," file",h.files.length!==1?"s":""]}),h.files.some(m=>m.content.includes("@inherit"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-ps-primary/20 text-ps-primary rounded",children:"inheritance"}),h.files.some(m=>m.content.includes("@use"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded",children:"imports"}),h.files.some(m=>m.content.includes("@skills"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-500/20 text-orange-400 rounded",children:"skills"}),h.files.some(m=>m.content.includes("@guards"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded",children:"guards"}),h.files.some(m=>m.content.includes("@agents"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded",children:"agents"}),h.files.some(m=>m.content.includes("params:")&&m.content.includes("{{"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded",children:"templates"}),h.envVars&&Object.keys(h.envVars).length>0&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded",children:"env vars"})]})]},h.id);return C.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-ps-surface rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold",children:"Example Gallery"}),C.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white",children:""})]}),C.jsxs("div",{className:"p-4 overflow-y-auto max-h-[70vh] space-y-6",children:[C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-green-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Getting Started"]}),C.jsx("div",{className:"grid gap-3",children:a.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Intermediate"]}),C.jsx("div",{className:"grid gap-3",children:l.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Advanced"]}),C.jsx("div",{className:"grid gap-3",children:c.map(f)})]})]}),C.jsx("div",{className:"p-4 border-t border-ps-border text-center text-sm text-gray-500",children:"Click an example to load it into the editor"})]})})}const DS={github:{label:"GitHub Copilot",versions:["simple","multifile","full"],supportsXml:!0},claude:{label:"Claude Code",versions:["simple","multifile","full"],supportsXml:!0},cursor:{label:"Cursor",versions:["standard","legacy"],supportsXml:!1},antigravity:{label:"Antigravity",versions:["simple","frontmatter"],supportsXml:!0}},BS=[{value:"markdown",label:"Markdown"},{value:"xml",label:"XML"}],zS=["always","never","preserve"],VS=[2,4];function WS(){const r=ie(f=>f.config),e=ie(f=>f.setTargetEnabled),t=ie(f=>f.setTargetVersion),s=ie(f=>f.setTargetConvention),a=ie(f=>f.setFormatting),l=ie(f=>f.showConfig),c=ie(f=>f.setShowConfig);return l?C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configuration"}),C.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-6",children:[C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Targets"}),C.jsx("div",{className:"space-y-3",children:Object.entries(DS).map(([f,h])=>{const m=r.targets[f];return C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("label",{className:"flex items-center gap-2 min-w-[140px]",children:[C.jsx("input",{type:"checkbox",checked:m.enabled,onChange:g=>e(f,g.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"}),C.jsx("span",{className:"text-sm text-gray-200",children:h.label})]}),C.jsx("select",{value:m.version??h.versions[0],onChange:g=>t(f,g.target.value),disabled:!m.enabled,className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:h.versions.map(g=>C.jsx("option",{value:g,children:g},g))}),C.jsx("select",{value:m.convention??"markdown",onChange:g=>s(f,g.target.value==="markdown"?void 0:g.target.value),disabled:!m.enabled||!h.supportsXml,title:h.supportsXml?void 0:`${h.label} only supports markdown`,className:"w-24 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:BS.map(g=>C.jsx("option",{value:g.value,disabled:g.value==="xml"&&!h.supportsXml,children:g.label},g.value))})]},f)})})]}),C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Formatting"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Tab Width"}),C.jsx("div",{className:"flex gap-2",children:VS.map(f=>C.jsx("button",{onClick:()=>a({tabWidth:f}),className:`px-3 py-1 text-sm rounded ${r.formatting.tabWidth===f?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Prose Wrap"}),C.jsx("select",{value:r.formatting.proseWrap,onChange:f=>a({proseWrap:f.target.value}),className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500",children:zS.map(f=>C.jsx("option",{value:f,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Print Width"}),C.jsx("input",{type:"number",min:40,max:200,value:r.formatting.printWidth,onChange:f=>a({printWidth:parseInt(f.target.value,10)||80}),className:"w-20 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500"})]})]})]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})}):null}const GS=/^[A-Za-z_][A-Za-z0-9_]*$/;function KS(){const r=ie(w=>w.config),e=ie(w=>w.setEnvVar),t=ie(w=>w.deleteEnvVar),s=ie(w=>w.showEnvVars),a=ie(w=>w.setShowEnvVars),[l,c]=Z.useState(""),[f,h]=Z.useState(""),[m,g]=Z.useState(null);if(!s)return null;const y=Object.entries(r.envVars),E=()=>{const w=l.trim(),R=f.trim();if(!w){g("Variable name is required");return}if(!GS.test(w)){g("Invalid name: must start with letter or underscore");return}if(r.envVars[w]!==void 0){g("Variable already exists");return}e(w,R),c(""),h(""),g(null)},k=w=>{w.key==="Enter"&&E()};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Environment Variables"}),C.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-4",children:[y.length>0&&C.jsx("div",{className:"space-y-2",children:y.map(([w,R])=>C.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded px-3 py-2",children:[C.jsx("span",{className:"font-mono text-sm text-blue-400 min-w-[120px]",children:w}),C.jsx("span",{className:"text-gray-400",children:"="}),C.jsx("span",{className:"font-mono text-sm text-gray-200 flex-1 truncate",children:R}),C.jsx("button",{onClick:()=>t(w),className:"text-gray-500 hover:text-red-400 p-1",title:"Delete variable",children:C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))}),y.length===0&&C.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No environment variables defined"}),C.jsxs("div",{className:"border-t border-ps-border pt-4",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",value:l,onChange:w=>{c(w.target.value),g(null)},onKeyDown:k,placeholder:"NAME",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("input",{type:"text",value:f,onChange:w=>h(w.target.value),onKeyDown:k,placeholder:"value",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("button",{onClick:E,className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Add"})]}),m&&C.jsx("p",{className:"text-red-400 text-xs mt-2",children:m})]}),C.jsxs("p",{className:"text-gray-500 text-xs",children:["These are simulated variables for testing. Use"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR}"]})," or"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR:-default}"]})," in your PRS files.",C.jsx("br",{}),C.jsx("strong",{children:"Note:"})," Do not use real secrets."]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})})}class Lc{files;constructor(e){if(this.files=new Map,e)if(e instanceof Map)for(const[t,s]of e)this.files.set(this.normalizePath(t),s);else for(const[t,s]of Object.entries(e))this.files.set(this.normalizePath(t),s)}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1)),t}exists(e){return this.files.has(this.normalizePath(e))}read(e){const t=this.normalizePath(e),s=this.files.get(t);if(s===void 0)throw new Error(`File not found: ${e}`);return s}write(e,t){this.files.set(this.normalizePath(e),t)}delete(e){return this.files.delete(this.normalizePath(e))}list(){return Array.from(this.files.keys())}glob(e){const t=this.normalizePath(e),s=this.patternToRegex(t);return Array.from(this.files.keys()).filter(a=>s.test(a))}patternToRegex(e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");return t=t.replace(/\*\*/g,"\0DOUBLESTAR\0"),t=t.replace(/\*/g,"[^/]*"),t=t.replace(/\0DOUBLESTAR\0/g,".*"),t=t.replace(/\?/g,"[^/]"),new RegExp(`^${t}$`)}clear(){this.files.clear()}get size(){return this.files.size}toMap(){return new Map(this.files)}toObject(){const e={};for(const[t,s]of this.files)e[t]=s;return e}clone(){return new Lc(this.files)}merge(e){for(const[t,s]of e.files)this.files.set(t,s)}}var Ym=typeof global=="object"&&global&&global.Object===Object&&global,HS=typeof self=="object"&&self&&self.Object===Object&&self,yn=Ym||HS||Function("return this")(),Kt=yn.Symbol,qm=Object.prototype,YS=qm.hasOwnProperty,qS=qm.toString,us=Kt?Kt.toStringTag:void 0;function XS(r){var e=YS.call(r,us),t=r[us];try{r[us]=void 0;var s=!0}catch{}var a=qS.call(r);return s&&(e?r[us]=t:delete r[us]),a}var QS=Object.prototype,ZS=QS.toString;function JS(r){return ZS.call(r)}var eT="[object Null]",tT="[object Undefined]",kp=Kt?Kt.toStringTag:void 0;function ur(r){return r==null?r===void 0?tT:eT:kp&&kp in Object(r)?XS(r):JS(r)}function on(r){return r!=null&&typeof r=="object"}var nT="[object Symbol]";function Ra(r){return typeof r=="symbol"||on(r)&&ur(r)==nT}function Na(r,e){for(var t=-1,s=r==null?0:r.length,a=Array(s);++t<s;)a[t]=e(r[t],t,r);return a}var Te=Array.isArray,xp=Kt?Kt.prototype:void 0,Ap=xp?xp.toString:void 0;function Xm(r){if(typeof r=="string")return r;if(Te(r))return Na(r,Xm)+"";if(Ra(r))return Ap?Ap.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var rT=/\s/;function iT(r){for(var e=r.length;e--&&rT.test(r.charAt(e)););return e}var sT=/^\s+/;function oT(r){return r&&r.slice(0,iT(r)+1).replace(sT,"")}function Ht(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var wp=NaN,aT=/^[-+]0x[0-9a-f]+$/i,lT=/^0b[01]+$/i,uT=/^0o[0-7]+$/i,cT=parseInt;function fT(r){if(typeof r=="number")return r;if(Ra(r))return wp;if(Ht(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ht(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=oT(r);var t=lT.test(r);return t||uT.test(r)?cT(r.slice(2),t?2:8):aT.test(r)?wp:+r}var Cp=1/0,dT=17976931348623157e292;function hT(r){if(!r)return r===0?r:0;if(r=fT(r),r===Cp||r===-Cp){var e=r<0?-1:1;return e*dT}return r===r?r:0}function Oa(r){var e=hT(r),t=e%1;return e===e?t?e-t:e:0}function gi(r){return r}var pT="[object AsyncFunction]",mT="[object Function]",gT="[object GeneratorFunction]",vT="[object Proxy]";function Mn(r){if(!Ht(r))return!1;var e=ur(r);return e==mT||e==gT||e==pT||e==vT}var Zu=yn["__core-js_shared__"],Rp=(function(){var r=/[^.]+$/.exec(Zu&&Zu.keys&&Zu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function yT(r){return!!Rp&&Rp in r}var ET=Function.prototype,ST=ET.toString;function Lr(r){if(r!=null){try{return ST.call(r)}catch{}try{return r+""}catch{}}return""}var TT=/[\\^$.*+?()[\]{}|]/g,kT=/^\[object .+?Constructor\]$/,xT=Function.prototype,AT=Object.prototype,wT=xT.toString,CT=AT.hasOwnProperty,RT=RegExp("^"+wT.call(CT).replace(TT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function NT(r){if(!Ht(r)||yT(r))return!1;var e=Mn(r)?RT:kT;return e.test(Lr(r))}function OT(r,e){return r?.[e]}function br(r,e){var t=OT(r,e);return NT(t)?t:void 0}var uc=br(yn,"WeakMap"),Np=Object.create,IT=(function(){function r(){}return function(e){if(!Ht(e))return{};if(Np)return Np(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function _T(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function qe(){}function PT(r,e){var t=-1,s=r.length;for(e||(e=Array(s));++t<s;)e[t]=r[t];return e}var LT=800,bT=16,MT=Date.now;function jT(r){var e=0,t=0;return function(){var s=MT(),a=bT-(s-t);if(t=s,a>0){if(++e>=LT)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function FT(r){return function(){return r}}var pa=(function(){try{var r=br(Object,"defineProperty");return r({},"",{}),r}catch{}})(),$T=pa?function(r,e){return pa(r,"toString",{configurable:!0,enumerable:!1,value:FT(e),writable:!0})}:gi,UT=jT($T);function Qm(r,e){for(var t=-1,s=r==null?0:r.length;++t<s&&e(r[t],t,r)!==!1;);return r}function Zm(r,e,t,s){for(var a=r.length,l=t+-1;++l<a;)if(e(r[l],l,r))return l;return-1}function DT(r){return r!==r}function BT(r,e,t){for(var s=t-1,a=r.length;++s<a;)if(r[s]===e)return s;return-1}function bc(r,e,t){return e===e?BT(r,e,t):Zm(r,DT,t)}function Jm(r,e){var t=r==null?0:r.length;return!!t&&bc(r,e,0)>-1}var zT=9007199254740991,VT=/^(?:0|[1-9]\d*)$/;function Ia(r,e){var t=typeof r;return e=e??zT,!!e&&(t=="number"||t!="symbol"&&VT.test(r))&&r>-1&&r%1==0&&r<e}function Mc(r,e,t){e=="__proto__"&&pa?pa(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function Os(r,e){return r===e||r!==r&&e!==e}var WT=Object.prototype,GT=WT.hasOwnProperty;function _a(r,e,t){var s=r[e];(!(GT.call(r,e)&&Os(s,t))||t===void 0&&!(e in r))&&Mc(r,e,t)}function jc(r,e,t,s){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var f=e[l],h=void 0;h===void 0&&(h=r[f]),a?Mc(t,f,h):_a(t,f,h)}return t}var Op=Math.max;function KT(r,e,t){return e=Op(e===void 0?r.length-1:e,0),function(){for(var s=arguments,a=-1,l=Op(s.length-e,0),c=Array(l);++a<l;)c[a]=s[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=s[a];return f[e]=t(c),_T(r,this,f)}}function Fc(r,e){return UT(KT(r,e,gi),r+"")}var HT=9007199254740991;function $c(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=HT}function En(r){return r!=null&&$c(r.length)&&!Mn(r)}function eg(r,e,t){if(!Ht(t))return!1;var s=typeof e;return(s=="number"?En(t)&&Ia(e,t.length):s=="string"&&e in t)?Os(t[e],r):!1}function YT(r){return Fc(function(e,t){var s=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,c&&eg(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++s<a;){var f=t[s];f&&r(e,f,s,l)}return e})}var qT=Object.prototype;function Is(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||qT;return r===t}function XT(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}var QT="[object Arguments]";function Ip(r){return on(r)&&ur(r)==QT}var tg=Object.prototype,ZT=tg.hasOwnProperty,JT=tg.propertyIsEnumerable,Pa=Ip((function(){return arguments})())?Ip:function(r){return on(r)&&ZT.call(r,"callee")&&!JT.call(r,"callee")};function ek(){return!1}var ng=typeof _t=="object"&&_t&&!_t.nodeType&&_t,_p=ng&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,tk=_p&&_p.exports===ng,Pp=tk?yn.Buffer:void 0,nk=Pp?Pp.isBuffer:void 0,xs=nk||ek,rk="[object Arguments]",ik="[object Array]",sk="[object Boolean]",ok="[object Date]",ak="[object Error]",lk="[object Function]",uk="[object Map]",ck="[object Number]",fk="[object Object]",dk="[object RegExp]",hk="[object Set]",pk="[object String]",mk="[object WeakMap]",gk="[object ArrayBuffer]",vk="[object DataView]",yk="[object Float32Array]",Ek="[object Float64Array]",Sk="[object Int8Array]",Tk="[object Int16Array]",kk="[object Int32Array]",xk="[object Uint8Array]",Ak="[object Uint8ClampedArray]",wk="[object Uint16Array]",Ck="[object Uint32Array]",_e={};_e[yk]=_e[Ek]=_e[Sk]=_e[Tk]=_e[kk]=_e[xk]=_e[Ak]=_e[wk]=_e[Ck]=!0;_e[rk]=_e[ik]=_e[gk]=_e[sk]=_e[vk]=_e[ok]=_e[ak]=_e[lk]=_e[uk]=_e[ck]=_e[fk]=_e[dk]=_e[hk]=_e[pk]=_e[mk]=!1;function Rk(r){return on(r)&&$c(r.length)&&!!_e[ur(r)]}function La(r){return function(e){return r(e)}}var rg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Es=rg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Nk=Es&&Es.exports===rg,Ju=Nk&&Ym.process,ar=(function(){try{var r=Es&&Es.require&&Es.require("util").types;return r||Ju&&Ju.binding&&Ju.binding("util")}catch{}})(),Lp=ar&&ar.isTypedArray,Uc=Lp?La(Lp):Rk,Ok=Object.prototype,Ik=Ok.hasOwnProperty;function ig(r,e){var t=Te(r),s=!t&&Pa(r),a=!t&&!s&&xs(r),l=!t&&!s&&!a&&Uc(r),c=t||s||a||l,f=c?XT(r.length,String):[],h=f.length;for(var m in r)(e||Ik.call(r,m))&&!(c&&(m=="length"||a&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Ia(m,h)))&&f.push(m);return f}function sg(r,e){return function(t){return r(e(t))}}var _k=sg(Object.keys,Object),Pk=Object.prototype,Lk=Pk.hasOwnProperty;function og(r){if(!Is(r))return _k(r);var e=[];for(var t in Object(r))Lk.call(r,t)&&t!="constructor"&&e.push(t);return e}function Yt(r){return En(r)?ig(r):og(r)}var bk=Object.prototype,Mk=bk.hasOwnProperty,Lt=YT(function(r,e){if(Is(e)||En(e)){jc(e,Yt(e),r);return}for(var t in e)Mk.call(e,t)&&_a(r,t,e[t])});function jk(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Fk=Object.prototype,$k=Fk.hasOwnProperty;function Uk(r){if(!Ht(r))return jk(r);var e=Is(r),t=[];for(var s in r)s=="constructor"&&(e||!$k.call(r,s))||t.push(s);return t}function ag(r){return En(r)?ig(r,!0):Uk(r)}var Dk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bk=/^\w*$/;function Dc(r,e){if(Te(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Ra(r)?!0:Bk.test(r)||!Dk.test(r)||e!=null&&r in Object(e)}var As=br(Object,"create");function zk(){this.__data__=As?As(null):{},this.size=0}function Vk(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Wk="__lodash_hash_undefined__",Gk=Object.prototype,Kk=Gk.hasOwnProperty;function Hk(r){var e=this.__data__;if(As){var t=e[r];return t===Wk?void 0:t}return Kk.call(e,r)?e[r]:void 0}var Yk=Object.prototype,qk=Yk.hasOwnProperty;function Xk(r){var e=this.__data__;return As?e[r]!==void 0:qk.call(e,r)}var Qk="__lodash_hash_undefined__";function Zk(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=As&&e===void 0?Qk:e,this}function Or(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Or.prototype.clear=zk;Or.prototype.delete=Vk;Or.prototype.get=Hk;Or.prototype.has=Xk;Or.prototype.set=Zk;function Jk(){this.__data__=[],this.size=0}function ba(r,e){for(var t=r.length;t--;)if(Os(r[t][0],e))return t;return-1}var ex=Array.prototype,tx=ex.splice;function nx(r){var e=this.__data__,t=ba(e,r);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():tx.call(e,t,1),--this.size,!0}function rx(r){var e=this.__data__,t=ba(e,r);return t<0?void 0:e[t][1]}function ix(r){return ba(this.__data__,r)>-1}function sx(r,e){var t=this.__data__,s=ba(t,r);return s<0?(++this.size,t.push([r,e])):t[s][1]=e,this}function jn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}jn.prototype.clear=Jk;jn.prototype.delete=nx;jn.prototype.get=rx;jn.prototype.has=ix;jn.prototype.set=sx;var ws=br(yn,"Map");function ox(){this.size=0,this.__data__={hash:new Or,map:new(ws||jn),string:new Or}}function ax(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ma(r,e){var t=r.__data__;return ax(e)?t[typeof e=="string"?"string":"hash"]:t.map}function lx(r){var e=Ma(this,r).delete(r);return this.size-=e?1:0,e}function ux(r){return Ma(this,r).get(r)}function cx(r){return Ma(this,r).has(r)}function fx(r,e){var t=Ma(this,r),s=t.size;return t.set(r,e),this.size+=t.size==s?0:1,this}function Fn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Fn.prototype.clear=ox;Fn.prototype.delete=lx;Fn.prototype.get=ux;Fn.prototype.has=cx;Fn.prototype.set=fx;var dx="Expected a function";function Bc(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(dx);var t=function(){var s=arguments,a=e?e.apply(this,s):s[0],l=t.cache;if(l.has(a))return l.get(a);var c=r.apply(this,s);return t.cache=l.set(a,c)||l,c};return t.cache=new(Bc.Cache||Fn),t}Bc.Cache=Fn;var hx=500;function px(r){var e=Bc(r,function(s){return t.size===hx&&t.clear(),s}),t=e.cache;return e}var mx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gx=/\\(\\)?/g,vx=px(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(mx,function(t,s,a,l){e.push(a?l.replace(gx,"$1"):s||t)}),e});function yx(r){return r==null?"":Xm(r)}function ja(r,e){return Te(r)?r:Dc(r,e)?[r]:vx(yx(r))}function _s(r){if(typeof r=="string"||Ra(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function zc(r,e){e=ja(e,r);for(var t=0,s=e.length;r!=null&&t<s;)r=r[_s(e[t++])];return t&&t==s?r:void 0}function Ex(r,e,t){var s=r==null?void 0:zc(r,e);return s===void 0?t:s}function Vc(r,e){for(var t=-1,s=e.length,a=r.length;++t<s;)r[a+t]=e[t];return r}var bp=Kt?Kt.isConcatSpreadable:void 0;function Sx(r){return Te(r)||Pa(r)||!!(bp&&r&&r[bp])}function Wc(r,e,t,s,a){var l=-1,c=r.length;for(t||(t=Sx),a||(a=[]);++l<c;){var f=r[l];t(f)?Vc(a,f):s||(a[a.length]=f)}return a}function rn(r){var e=r==null?0:r.length;return e?Wc(r):[]}var lg=sg(Object.getPrototypeOf,Object);function ug(r,e,t){var s=-1,a=r.length;e<0&&(e=-e>a?0:a+e),t=t>a?a:t,t<0&&(t+=a),a=e>t?0:t-e>>>0,e>>>=0;for(var l=Array(a);++s<a;)l[s]=r[s+e];return l}function Tx(r,e,t,s){var a=-1,l=r==null?0:r.length;for(s&&l&&(t=r[++a]);++a<l;)t=e(t,r[a],a,r);return t}function kx(){this.__data__=new jn,this.size=0}function xx(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function Ax(r){return this.__data__.get(r)}function wx(r){return this.__data__.has(r)}var Cx=200;function Rx(r,e){var t=this.__data__;if(t instanceof jn){var s=t.__data__;if(!ws||s.length<Cx-1)return s.push([r,e]),this.size=++t.size,this;t=this.__data__=new Fn(s)}return t.set(r,e),this.size=t.size,this}function vn(r){var e=this.__data__=new jn(r);this.size=e.size}vn.prototype.clear=kx;vn.prototype.delete=xx;vn.prototype.get=Ax;vn.prototype.has=wx;vn.prototype.set=Rx;function Nx(r,e){return r&&jc(e,Yt(e),r)}var cg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Mp=cg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Ox=Mp&&Mp.exports===cg,jp=Ox?yn.Buffer:void 0,Fp=jp?jp.allocUnsafe:void 0;function Ix(r,e){var t=r.length,s=Fp?Fp(t):new r.constructor(t);return r.copy(s),s}function Gc(r,e){for(var t=-1,s=r==null?0:r.length,a=0,l=[];++t<s;){var c=r[t];e(c,t,r)&&(l[a++]=c)}return l}function fg(){return[]}var _x=Object.prototype,Px=_x.propertyIsEnumerable,$p=Object.getOwnPropertySymbols,Kc=$p?function(r){return r==null?[]:(r=Object(r),Gc($p(r),function(e){return Px.call(r,e)}))}:fg;function Lx(r,e){return jc(r,Kc(r),e)}var bx=Object.getOwnPropertySymbols,Mx=bx?function(r){for(var e=[];r;)Vc(e,Kc(r)),r=lg(r);return e}:fg;function dg(r,e,t){var s=e(r);return Te(r)?s:Vc(s,t(r))}function cc(r){return dg(r,Yt,Kc)}function jx(r){return dg(r,ag,Mx)}var fc=br(yn,"DataView"),dc=br(yn,"Promise"),mi=br(yn,"Set"),Up="[object Map]",Fx="[object Object]",Dp="[object Promise]",Bp="[object Set]",zp="[object WeakMap]",Vp="[object DataView]",$x=Lr(fc),Ux=Lr(ws),Dx=Lr(dc),Bx=Lr(mi),zx=Lr(uc),Wt=ur;(fc&&Wt(new fc(new ArrayBuffer(1)))!=Vp||ws&&Wt(new ws)!=Up||dc&&Wt(dc.resolve())!=Dp||mi&&Wt(new mi)!=Bp||uc&&Wt(new uc)!=zp)&&(Wt=function(r){var e=ur(r),t=e==Fx?r.constructor:void 0,s=t?Lr(t):"";if(s)switch(s){case $x:return Vp;case Ux:return Up;case Dx:return Dp;case Bx:return Bp;case zx:return zp}return e});var Vx=Object.prototype,Wx=Vx.hasOwnProperty;function Gx(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&Wx.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var ma=yn.Uint8Array;function Kx(r){var e=new r.constructor(r.byteLength);return new ma(e).set(new ma(r)),e}function Hx(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var Yx=/\w*$/;function qx(r){var e=new r.constructor(r.source,Yx.exec(r));return e.lastIndex=r.lastIndex,e}var Wp=Kt?Kt.prototype:void 0,Gp=Wp?Wp.valueOf:void 0;function Xx(r){return Gp?Object(Gp.call(r)):{}}function Qx(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Zx="[object Boolean]",Jx="[object Date]",eA="[object Map]",tA="[object Number]",nA="[object RegExp]",rA="[object Set]",iA="[object String]",sA="[object Symbol]",oA="[object ArrayBuffer]",aA="[object DataView]",lA="[object Float32Array]",uA="[object Float64Array]",cA="[object Int8Array]",fA="[object Int16Array]",dA="[object Int32Array]",hA="[object Uint8Array]",pA="[object Uint8ClampedArray]",mA="[object Uint16Array]",gA="[object Uint32Array]";function vA(r,e,t){var s=r.constructor;switch(e){case oA:return Kx(r);case Zx:case Jx:return new s(+r);case aA:return Hx(r);case lA:case uA:case cA:case fA:case dA:case hA:case pA:case mA:case gA:return Qx(r);case eA:return new s;case tA:case iA:return new s(r);case nA:return qx(r);case rA:return new s;case sA:return Xx(r)}}function yA(r){return typeof r.constructor=="function"&&!Is(r)?IT(lg(r)):{}}var EA="[object Map]";function SA(r){return on(r)&&Wt(r)==EA}var Kp=ar&&ar.isMap,TA=Kp?La(Kp):SA,kA="[object Set]";function xA(r){return on(r)&&Wt(r)==kA}var Hp=ar&&ar.isSet,AA=Hp?La(Hp):xA,hg="[object Arguments]",wA="[object Array]",CA="[object Boolean]",RA="[object Date]",NA="[object Error]",pg="[object Function]",OA="[object GeneratorFunction]",IA="[object Map]",_A="[object Number]",mg="[object Object]",PA="[object RegExp]",LA="[object Set]",bA="[object String]",MA="[object Symbol]",jA="[object WeakMap]",FA="[object ArrayBuffer]",$A="[object DataView]",UA="[object Float32Array]",DA="[object Float64Array]",BA="[object Int8Array]",zA="[object Int16Array]",VA="[object Int32Array]",WA="[object Uint8Array]",GA="[object Uint8ClampedArray]",KA="[object Uint16Array]",HA="[object Uint32Array]",Re={};Re[hg]=Re[wA]=Re[FA]=Re[$A]=Re[CA]=Re[RA]=Re[UA]=Re[DA]=Re[BA]=Re[zA]=Re[VA]=Re[IA]=Re[_A]=Re[mg]=Re[PA]=Re[LA]=Re[bA]=Re[MA]=Re[WA]=Re[GA]=Re[KA]=Re[HA]=!0;Re[NA]=Re[pg]=Re[jA]=!1;function na(r,e,t,s,a,l){var c;if(c!==void 0)return c;if(!Ht(r))return r;var f=Te(r);if(f)return c=Gx(r),PT(r,c);var h=Wt(r),m=h==pg||h==OA;if(xs(r))return Ix(r);if(h==mg||h==hg||m&&!a)return c=m?{}:yA(r),Lx(r,Nx(c,r));if(!Re[h])return a?r:{};c=vA(r,h),l||(l=new vn);var g=l.get(r);if(g)return g;l.set(r,c),AA(r)?r.forEach(function(k){c.add(na(k,e,t,k,r,l))}):TA(r)&&r.forEach(function(k,w){c.set(w,na(k,e,t,w,r,l))});var y=cc,E=f?void 0:y(r);return Qm(E||r,function(k,w){E&&(w=k,k=r[w]),_a(c,w,na(k,e,t,w,r,l))}),c}var YA=4;function st(r){return na(r,YA)}function Ps(r){for(var e=-1,t=r==null?0:r.length,s=0,a=[];++e<t;){var l=r[e];l&&(a[s++]=l)}return a}var qA="__lodash_hash_undefined__";function XA(r){return this.__data__.set(r,qA),this}function QA(r){return this.__data__.has(r)}function vi(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Fn;++e<t;)this.add(r[e])}vi.prototype.add=vi.prototype.push=XA;vi.prototype.has=QA;function gg(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(e(r[t],t,r))return!0;return!1}function Hc(r,e){return r.has(e)}var ZA=1,JA=2;function vg(r,e,t,s,a,l){var c=t&ZA,f=r.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var m=l.get(r),g=l.get(e);if(m&&g)return m==e&&g==r;var y=-1,E=!0,k=t&JA?new vi:void 0;for(l.set(r,e),l.set(e,r);++y<f;){var w=r[y],R=e[y];if(s)var j=c?s(R,w,y,e,r,l):s(w,R,y,r,e,l);if(j!==void 0){if(j)continue;E=!1;break}if(k){if(!gg(e,function(M,_){if(!Hc(k,_)&&(w===M||a(w,M,t,s,l)))return k.push(_)})){E=!1;break}}else if(!(w===R||a(w,R,t,s,l))){E=!1;break}}return l.delete(r),l.delete(e),E}function ew(r){var e=-1,t=Array(r.size);return r.forEach(function(s,a){t[++e]=[a,s]}),t}function Yc(r){var e=-1,t=Array(r.size);return r.forEach(function(s){t[++e]=s}),t}var tw=1,nw=2,rw="[object Boolean]",iw="[object Date]",sw="[object Error]",ow="[object Map]",aw="[object Number]",lw="[object RegExp]",uw="[object Set]",cw="[object String]",fw="[object Symbol]",dw="[object ArrayBuffer]",hw="[object DataView]",Yp=Kt?Kt.prototype:void 0,ec=Yp?Yp.valueOf:void 0;function pw(r,e,t,s,a,l,c){switch(t){case hw:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case dw:return!(r.byteLength!=e.byteLength||!l(new ma(r),new ma(e)));case rw:case iw:case aw:return Os(+r,+e);case sw:return r.name==e.name&&r.message==e.message;case lw:case cw:return r==e+"";case ow:var f=ew;case uw:var h=s&tw;if(f||(f=Yc),r.size!=e.size&&!h)return!1;var m=c.get(r);if(m)return m==e;s|=nw,c.set(r,e);var g=vg(f(r),f(e),s,a,l,c);return c.delete(r),g;case fw:if(ec)return ec.call(r)==ec.call(e)}return!1}var mw=1,gw=Object.prototype,vw=gw.hasOwnProperty;function yw(r,e,t,s,a,l){var c=t&mw,f=cc(r),h=f.length,m=cc(e),g=m.length;if(h!=g&&!c)return!1;for(var y=h;y--;){var E=f[y];if(!(c?E in e:vw.call(e,E)))return!1}var k=l.get(r),w=l.get(e);if(k&&w)return k==e&&w==r;var R=!0;l.set(r,e),l.set(e,r);for(var j=c;++y<h;){E=f[y];var M=r[E],_=e[E];if(s)var P=c?s(_,M,E,e,r,l):s(M,_,E,r,e,l);if(!(P===void 0?M===_||a(M,_,t,s,l):P)){R=!1;break}j||(j=E=="constructor")}if(R&&!j){var b=r.constructor,z=e.constructor;b!=z&&"constructor"in r&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof z=="function"&&z instanceof z)&&(R=!1)}return l.delete(r),l.delete(e),R}var Ew=1,qp="[object Arguments]",Xp="[object Array]",qo="[object Object]",Sw=Object.prototype,Qp=Sw.hasOwnProperty;function Tw(r,e,t,s,a,l){var c=Te(r),f=Te(e),h=c?Xp:Wt(r),m=f?Xp:Wt(e);h=h==qp?qo:h,m=m==qp?qo:m;var g=h==qo,y=m==qo,E=h==m;if(E&&xs(r)){if(!xs(e))return!1;c=!0,g=!1}if(E&&!g)return l||(l=new vn),c||Uc(r)?vg(r,e,t,s,a,l):pw(r,e,h,t,s,a,l);if(!(t&Ew)){var k=g&&Qp.call(r,"__wrapped__"),w=y&&Qp.call(e,"__wrapped__");if(k||w){var R=k?r.value():r,j=w?e.value():e;return l||(l=new vn),a(R,j,t,s,l)}}return E?(l||(l=new vn),yw(r,e,t,s,a,l)):!1}function qc(r,e,t,s,a){return r===e?!0:r==null||e==null||!on(r)&&!on(e)?r!==r&&e!==e:Tw(r,e,t,s,qc,a)}var kw=1,xw=2;function Aw(r,e,t,s){var a=t.length,l=a;if(r==null)return!l;for(r=Object(r);a--;){var c=t[a];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++a<l;){c=t[a];var f=c[0],h=r[f],m=c[1];if(c[2]){if(h===void 0&&!(f in r))return!1}else{var g=new vn,y;if(!(y===void 0?qc(m,h,kw|xw,s,g):y))return!1}}return!0}function yg(r){return r===r&&!Ht(r)}function ww(r){for(var e=Yt(r),t=e.length;t--;){var s=e[t],a=r[s];e[t]=[s,a,yg(a)]}return e}function Eg(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function Cw(r){var e=ww(r);return e.length==1&&e[0][2]?Eg(e[0][0],e[0][1]):function(t){return t===r||Aw(t,r,e)}}function Rw(r,e){return r!=null&&e in Object(r)}function Sg(r,e,t){e=ja(e,r);for(var s=-1,a=e.length,l=!1;++s<a;){var c=_s(e[s]);if(!(l=r!=null&&t(r,c)))break;r=r[c]}return l||++s!=a?l:(a=r==null?0:r.length,!!a&&$c(a)&&Ia(c,a)&&(Te(r)||Pa(r)))}function Nw(r,e){return r!=null&&Sg(r,e,Rw)}var Ow=1,Iw=2;function _w(r,e){return Dc(r)&&yg(e)?Eg(_s(r),e):function(t){var s=Ex(t,r);return s===void 0&&s===e?Nw(t,r):qc(e,s,Ow|Iw)}}function Pw(r){return function(e){return e?.[r]}}function Lw(r){return function(e){return zc(e,r)}}function bw(r){return Dc(r)?Pw(_s(r)):Lw(r)}function Sn(r){return typeof r=="function"?r:r==null?gi:typeof r=="object"?Te(r)?_w(r[0],r[1]):Cw(r):bw(r)}function Mw(r,e,t,s){for(var a=-1,l=r==null?0:r.length;++a<l;){var c=r[a];e(s,c,t(c),r)}return s}function jw(r){return function(e,t,s){for(var a=-1,l=Object(e),c=s(e),f=c.length;f--;){var h=c[++a];if(t(l[h],h,l)===!1)break}return e}}var Fw=jw();function $w(r,e){return r&&Fw(r,e,Yt)}function Uw(r,e){return function(t,s){if(t==null)return t;if(!En(t))return r(t,s);for(var a=t.length,l=-1,c=Object(t);++l<a&&s(c[l],l,c)!==!1;);return t}}var Mr=Uw($w);function Dw(r,e,t,s){return Mr(r,function(a,l,c){e(s,a,t(a),c)}),s}function Bw(r,e){return function(t,s){var a=Te(t)?Mw:Dw,l=e?e():{};return a(t,r,Sn(s),l)}}var Tg=Object.prototype,zw=Tg.hasOwnProperty,Xc=Fc(function(r,e){r=Object(r);var t=-1,s=e.length,a=s>2?e[2]:void 0;for(a&&eg(e[0],e[1],a)&&(s=1);++t<s;)for(var l=e[t],c=ag(l),f=-1,h=c.length;++f<h;){var m=c[f],g=r[m];(g===void 0||Os(g,Tg[m])&&!zw.call(r,m))&&(r[m]=l[m])}return r});function Zp(r){return on(r)&&En(r)}var Vw=200;function Ww(r,e,t,s){var a=-1,l=Jm,c=!0,f=r.length,h=[],m=e.length;if(!f)return h;e.length>=Vw&&(l=Hc,c=!1,e=new vi(e));e:for(;++a<f;){var g=r[a],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=m;E--;)if(e[E]===y)continue e;h.push(g)}else l(e,y,s)||h.push(g)}return h}var Fa=Fc(function(r,e){return Zp(r)?Ww(r,Wc(e,1,Zp,!0)):[]});function Ir(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function it(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:Oa(e),ug(r,e<0?0:e,s)):[]}function Cs(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:Oa(e),e=s-e,ug(r,0,e<0?0:e)):[]}function Gw(r){return typeof r=="function"?r:gi}function ae(r,e){var t=Te(r)?Qm:Mr;return t(r,Gw(e))}function Kw(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(!e(r[t],t,r))return!1;return!0}function Hw(r,e){var t=!0;return Mr(r,function(s,a,l){return t=!!e(s,a,l),t}),t}function sn(r,e,t){var s=Te(r)?Kw:Hw;return s(r,Sn(e))}function kg(r,e){var t=[];return Mr(r,function(s,a,l){e(s,a,l)&&t.push(s)}),t}function qt(r,e){var t=Te(r)?Gc:kg;return t(r,Sn(e))}function Yw(r){return function(e,t,s){var a=Object(e);if(!En(e)){var l=Sn(t);e=Yt(e),t=function(f){return l(a[f],f,a)}}var c=r(e,t,s);return c>-1?a[l?e[c]:c]:void 0}}var qw=Math.max;function Xw(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var a=t==null?0:Oa(t);return a<0&&(a=qw(s+a,0)),Zm(r,Sn(e),a)}var yi=Yw(Xw);function an(r){return r&&r.length?r[0]:void 0}function Qw(r,e){var t=-1,s=En(r)?Array(r.length):[];return Mr(r,function(a,l,c){s[++t]=e(a,l,c)}),s}function ee(r,e){var t=Te(r)?Na:Qw;return t(r,Sn(e))}function Gt(r,e){return Wc(ee(r,e))}var Zw=Object.prototype,Jw=Zw.hasOwnProperty,eC=Bw(function(r,e,t){Jw.call(r,t)?r[t].push(e):Mc(r,t,[e])}),tC=Object.prototype,nC=tC.hasOwnProperty;function rC(r,e){return r!=null&&nC.call(r,e)}function se(r,e){return r!=null&&Sg(r,e,rC)}var iC="[object String]";function kt(r){return typeof r=="string"||!Te(r)&&on(r)&&ur(r)==iC}function sC(r,e){return Na(e,function(t){return r[t]})}function Xe(r){return r==null?[]:sC(r,Yt(r))}var oC=Math.max;function pt(r,e,t,s){r=En(r)?r:Xe(r),t=t?Oa(t):0;var a=r.length;return t<0&&(t=oC(a+t,0)),kt(r)?t<=a&&r.indexOf(e,t)>-1:!!a&&bc(r,e,t)>-1}function Jp(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var a=0;return bc(r,e,a)}var aC="[object Map]",lC="[object Set]",uC=Object.prototype,cC=uC.hasOwnProperty;function Ne(r){if(r==null)return!0;if(En(r)&&(Te(r)||typeof r=="string"||typeof r.splice=="function"||xs(r)||Uc(r)||Pa(r)))return!r.length;var e=Wt(r);if(e==aC||e==lC)return!r.size;if(Is(r))return!og(r).length;for(var t in r)if(cC.call(r,t))return!1;return!0}var fC="[object RegExp]";function dC(r){return on(r)&&ur(r)==fC}var em=ar&&ar.isRegExp,Pn=em?La(em):dC;function Ln(r){return r===void 0}var hC="Expected a function";function pC(r){if(typeof r!="function")throw new TypeError(hC);return function(){var e=arguments;switch(e.length){case 0:return!r.call(this);case 1:return!r.call(this,e[0]);case 2:return!r.call(this,e[0],e[1]);case 3:return!r.call(this,e[0],e[1],e[2])}return!r.apply(this,e)}}function mC(r,e,t,s){if(!Ht(r))return r;e=ja(e,r);for(var a=-1,l=e.length,c=l-1,f=r;f!=null&&++a<l;){var h=_s(e[a]),m=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return r;if(a!=c){var g=f[h];m=void 0,m===void 0&&(m=Ht(g)?g:Ia(e[a+1])?[]:{})}_a(f,h,m),f=f[h]}return r}function gC(r,e,t){for(var s=-1,a=e.length,l={};++s<a;){var c=e[s],f=zc(r,c);t(f,c)&&mC(l,ja(c,r),f)}return l}function ln(r,e){if(r==null)return{};var t=Na(jx(r),function(s){return[s]});return e=Sn(e),gC(r,t,function(s,a){return e(s,a[0])})}function vC(r,e,t,s,a){return a(r,function(l,c,f){t=s?(s=!1,l):e(t,l,c,f)}),t}function bt(r,e,t){var s=Te(r)?Tx:vC,a=arguments.length<3;return s(r,Sn(e),t,a,Mr)}function $a(r,e){var t=Te(r)?Gc:kg;return t(r,pC(Sn(e)))}function yC(r,e){var t;return Mr(r,function(s,a,l){return t=e(s,a,l),!t}),!!t}function xg(r,e,t){var s=Te(r)?gg:yC;return s(r,Sn(e))}var EC=1/0,SC=mi&&1/Yc(new mi([,-0]))[1]==EC?function(r){return new mi(r)}:qe,TC=200;function kC(r,e,t){var s=-1,a=Jm,l=r.length,c=!0,f=[],h=f;if(l>=TC){var m=SC(r);if(m)return Yc(m);c=!1,a=Hc,h=new vi}else h=f;e:for(;++s<l;){var g=r[s],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=h.length;E--;)if(h[E]===y)continue e;f.push(g)}else a(h,y,t)||(h!==f&&h.push(y),f.push(g))}return f}function Qc(r){return r&&r.length?kC(r):[]}function hc(r){console&&console.error&&console.error(`Error: ${r}`)}function Ag(r){console&&console.warn&&console.warn(`Warning: ${r}`)}function wg(r){const e=new Date().getTime(),t=r();return{time:new Date().getTime()-e,value:t}}function Cg(r){function e(){}e.prototype=r;const t=new e;function s(){return typeof t.bar}return s(),s(),r}function xC(r){return AC(r)?r.LABEL:r.name}function AC(r){return kt(r.LABEL)&&r.LABEL!==""}class Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,t=>{t.accept(e)})}}class Mt extends Tn{constructor(e){super([]),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Ei extends Tn{constructor(e){super(e.definition),this.orgText="",Lt(this,ln(e,t=>t!==void 0))}}class xt extends Tn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Lt(this,ln(e,t=>t!==void 0))}}class Tt extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class kn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class xn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class Qe extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class un extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class cn extends Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Lt(this,ln(e,t=>t!==void 0))}}class Fe{constructor(e){this.idx=1,Lt(this,ln(e,t=>t!==void 0))}accept(e){e.visit(this)}}function wC(r){return ee(r,ra)}function ra(r){function e(t){return ee(t,ra)}if(r instanceof Mt){const t={type:"NonTerminal",name:r.nonTerminalName,idx:r.idx};return kt(r.label)&&(t.label=r.label),t}else{if(r instanceof xt)return{type:"Alternative",definition:e(r.definition)};if(r instanceof Tt)return{type:"Option",idx:r.idx,definition:e(r.definition)};if(r instanceof kn)return{type:"RepetitionMandatory",idx:r.idx,definition:e(r.definition)};if(r instanceof xn)return{type:"RepetitionMandatoryWithSeparator",idx:r.idx,separator:ra(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof un)return{type:"RepetitionWithSeparator",idx:r.idx,separator:ra(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof Qe)return{type:"Repetition",idx:r.idx,definition:e(r.definition)};if(r instanceof cn)return{type:"Alternation",idx:r.idx,definition:e(r.definition)};if(r instanceof Fe){const t={type:"Terminal",name:r.terminalType.name,label:xC(r.terminalType),idx:r.idx};kt(r.label)&&(t.terminalLabel=r.label);const s=r.terminalType.PATTERN;return r.terminalType.PATTERN&&(t.pattern=Pn(s)?s.source:s),t}else{if(r instanceof Ei)return{type:"Rule",name:r.name,orgText:r.orgText,definition:e(r.definition)};throw Error("non exhaustive match")}}}class Si{visit(e){const t=e;switch(t.constructor){case Mt:return this.visitNonTerminal(t);case xt:return this.visitAlternative(t);case Tt:return this.visitOption(t);case kn:return this.visitRepetitionMandatory(t);case xn:return this.visitRepetitionMandatoryWithSeparator(t);case un:return this.visitRepetitionWithSeparator(t);case Qe:return this.visitRepetition(t);case cn:return this.visitAlternation(t);case Fe:return this.visitTerminal(t);case Ei:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function CC(r){return r instanceof xt||r instanceof Tt||r instanceof Qe||r instanceof kn||r instanceof xn||r instanceof un||r instanceof Fe||r instanceof Ei}function ga(r,e=[]){return r instanceof Tt||r instanceof Qe||r instanceof un?!0:r instanceof cn?xg(r.definition,s=>ga(s,e)):r instanceof Mt&&pt(e,r)?!1:r instanceof Tn?(r instanceof Mt&&e.push(r),sn(r.definition,s=>ga(s,e))):!1}function RC(r){return r instanceof cn}function gn(r){if(r instanceof Mt)return"SUBRULE";if(r instanceof Tt)return"OPTION";if(r instanceof cn)return"OR";if(r instanceof kn)return"AT_LEAST_ONE";if(r instanceof xn)return"AT_LEAST_ONE_SEP";if(r instanceof un)return"MANY_SEP";if(r instanceof Qe)return"MANY";if(r instanceof Fe)return"CONSUME";throw Error("non exhaustive match")}class Ua{walk(e,t=[]){ae(e.definition,(s,a)=>{const l=it(e.definition,a+1);if(s instanceof Mt)this.walkProdRef(s,l,t);else if(s instanceof Fe)this.walkTerminal(s,l,t);else if(s instanceof xt)this.walkFlat(s,l,t);else if(s instanceof Tt)this.walkOption(s,l,t);else if(s instanceof kn)this.walkAtLeastOne(s,l,t);else if(s instanceof xn)this.walkAtLeastOneSep(s,l,t);else if(s instanceof un)this.walkManySep(s,l,t);else if(s instanceof Qe)this.walkMany(s,l,t);else if(s instanceof cn)this.walkOr(s,l,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,s){}walkProdRef(e,t,s){}walkFlat(e,t,s){const a=t.concat(s);this.walk(e,a)}walkOption(e,t,s){const a=t.concat(s);this.walk(e,a)}walkAtLeastOne(e,t,s){const a=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,a)}walkAtLeastOneSep(e,t,s){const a=tm(e,t,s);this.walk(e,a)}walkMany(e,t,s){const a=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,a)}walkManySep(e,t,s){const a=tm(e,t,s);this.walk(e,a)}walkOr(e,t,s){const a=t.concat(s);ae(e.definition,l=>{const c=new xt({definition:[l]});this.walk(c,a)})}}function tm(r,e,t){return[new Tt({definition:[new Fe({terminalType:r.separator})].concat(r.definition)})].concat(e,t)}function Ls(r){if(r instanceof Mt)return Ls(r.referencedRule);if(r instanceof Fe)return IC(r);if(CC(r))return NC(r);if(RC(r))return OC(r);throw Error("non exhaustive match")}function NC(r){let e=[];const t=r.definition;let s=0,a=t.length>s,l,c=!0;for(;a&&c;)l=t[s],c=ga(l),e=e.concat(Ls(l)),s=s+1,a=t.length>s;return Qc(e)}function OC(r){const e=ee(r.definition,t=>Ls(t));return Qc(rn(e))}function IC(r){return[r.terminalType]}const Rg="_~IN~_";class _C extends Ua{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,s){}walkProdRef(e,t,s){const a=LC(e.referencedRule,e.idx)+this.topProd.name,l=t.concat(s),c=new xt({definition:l}),f=Ls(c);this.follows[a]=f}}function PC(r){const e={};return ae(r,t=>{const s=new _C(t).startWalking();Lt(e,s)}),e}function LC(r,e){return r.name+e+Rg}function le(r){return r.charCodeAt(0)}function tc(r,e){Array.isArray(r)?r.forEach(function(t){e.push(t)}):e.push(r)}function cs(r,e){if(r[e]===!0)throw"duplicate flag "+e;r[e],r[e]=!0}function ai(r){if(r===void 0)throw Error("Internal Error - Should never get here!");return!0}function bC(){throw Error("Internal Error - Should never get here!")}function nm(r){return r.type==="Character"}const va=[];for(let r=le("0");r<=le("9");r++)va.push(r);const ya=[le("_")].concat(va);for(let r=le("a");r<=le("z");r++)ya.push(r);for(let r=le("A");r<=le("Z");r++)ya.push(r);const rm=[le(" "),le("\f"),le(`
`),le("\r"),le("	"),le("\v"),le("	"),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le("\u2028"),le("\u2029"),le(""),le(""),le(""),le("\uFEFF")],MC=/[0-9a-fA-F]/,Xo=/[0-9]/,jC=/[1-9]/;class FC{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":cs(s,"global");break;case"i":cs(s,"ignoreCase");break;case"m":cs(s,"multiLine");break;case"u":cs(s,"unicode");break;case"y":cs(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":t="Lookbehind";break;case"!":t="NegativeLookbehind"}break}}ai(t);const s=this.disjunction();return this.consumeChar(")"),{type:t,value:s,loc:this.loc(e)}}return bC()}quantifier(e=!1){let t;const s=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const a=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:a,atMost:a};break;case",":let l;this.isDigit()?(l=this.integerIncludingZero(),t={atLeast:a,atMost:l}):t={atLeast:a,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;ai(t);break}if(!(e===!0&&t===void 0)&&ai(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(s),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),ai(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[le(`
`),le("\r"),le("\u2028"),le("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=va;break;case"D":e=va,t=!0;break;case"s":e=rm;break;case"S":e=rm,t=!0;break;case"w":e=ya;break;case"W":e=ya,t=!0;break}if(ai(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=le("\f");break;case"n":e=le(`
`);break;case"r":e=le("\r");break;case"t":e=le("	");break;case"v":e=le("\v");break}if(ai(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:le("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:le(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:le(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,nm(s)&&this.isRangeDash()){this.consumeChar("-");const a=this.classAtom();if(a.type,nm(a)){if(a.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:a.value})}else tc(s.value,e),e.push(le("-")),tc(a.value,e)}else tc(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:le("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const t=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:t};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(jC.test(e)===!1)throw Error("Expecting a positive integer");for(;Xo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Xo.test(e)===!1)throw Error("Expecting an integer");for(;Xo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:le(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Xo.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let a=0;a<e;a++){const l=this.popChar();if(MC.test(l)===!1)throw Error("Expecting a HexDecimal digits");t+=l}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Zc{visitChildren(e){for(const t in e){const s=e[t];e.hasOwnProperty(t)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(a=>{this.visit(a)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let ia={};const $C=new FC;function Da(r){const e=r.toString();if(ia.hasOwnProperty(e))return ia[e];{const t=$C.pattern(e);return ia[e]=t,t}}function UC(){ia={}}const Ng="Complement Sets are not supported for first char optimization",Ea=`Unable to use "first char" lexer optimizations:
`;function DC(r,e=!1){try{const t=Da(r);return pc(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Ng)e&&Ag(`${Ea}	Unable to optimize: < ${r.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),hc(`${Ea}
	Failed parsing: < ${r.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function pc(r,e,t){switch(r.type){case"Disjunction":for(let a=0;a<r.value.length;a++)pc(r.value[a],e,t);break;case"Alternative":const s=r.value;for(let a=0;a<s.length;a++){const l=s[a];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const c=l;switch(c.type){case"Character":Qo(c.value,e,t);break;case"Set":if(c.complement===!0)throw Error(Ng);ae(c.value,h=>{if(typeof h=="number")Qo(h,e,t);else{const m=h;if(t===!0)for(let g=m.from;g<=m.to;g++)Qo(g,e,t);else{for(let g=m.from;g<=m.to&&g<gs;g++)Qo(g,e,t);if(m.to>=gs){const g=m.from>=gs?m.from:gs,y=m.to,E=lr(g),k=lr(y);for(let w=E;w<=k;w++)e[w]=w}}}});break;case"Group":pc(c.value,e,t);break;default:throw Error("Non Exhaustive Match")}const f=c.quantifier!==void 0&&c.quantifier.atLeast===0;if(c.type==="Group"&&mc(c)===!1||c.type!=="Group"&&f===!1)break}break;default:throw Error("non exhaustive match!")}return Xe(e)}function Qo(r,e,t){const s=lr(r);e[s]=s,t===!0&&BC(r,e)}function BC(r,e){const t=String.fromCharCode(r),s=t.toUpperCase();if(s!==t){const a=lr(s.charCodeAt(0));e[a]=a}else{const a=t.toLowerCase();if(a!==t){const l=lr(a.charCodeAt(0));e[l]=l}}}function im(r,e){return yi(r.value,t=>{if(typeof t=="number")return pt(e,t);{const s=t;return yi(e,a=>s.from<=a&&a<=s.to)!==void 0}})}function mc(r){const e=r.quantifier;return e&&e.atLeast===0?!0:r.value?Te(r.value)?sn(r.value,mc):mc(r.value):!1}class zC extends Zc{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){pt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?im(e,this.targetCharCodes)===void 0&&(this.found=!0):im(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Jc(r,e){if(e instanceof RegExp){const t=Da(e),s=new zC(r);return s.visit(t),s.found}else return yi(e,t=>pt(r,t.charCodeAt(0)))!==void 0}const _r="PATTERN",ms="defaultMode",Zo="modes";let Og=typeof new RegExp("(?:)").sticky=="boolean";function VC(r,e){e=Xc(e,{useSticky:Og,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,P)=>P()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{h1()});let s;t("Reject Lexer.NA",()=>{s=$a(r,_=>_[_r]===dt.NA)});let a=!1,l;t("Transform Patterns",()=>{a=!1,l=ee(s,_=>{const P=_[_r];if(Pn(P)){const b=P.source;return b.length===1&&b!=="^"&&b!=="$"&&b!=="."&&!P.ignoreCase?b:b.length===2&&b[0]==="\\"&&!pt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],b[1])?b[1]:e.useSticky?om(P):sm(P)}else{if(Mn(P))return a=!0,{exec:P};if(typeof P=="object")return a=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const b=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),z=new RegExp(b);return e.useSticky?om(z):sm(z)}}else throw Error("non exhaustive match")}})});let c,f,h,m,g;t("misc mapping",()=>{c=ee(s,_=>_.tokenTypeIdx),f=ee(s,_=>{const P=_.GROUP;if(P!==dt.SKIPPED){if(kt(P))return P;if(Ln(P))return!1;throw Error("non exhaustive match")}}),h=ee(s,_=>{const P=_.LONGER_ALT;if(P)return Te(P)?ee(P,z=>Jp(s,z)):[Jp(s,P)]}),m=ee(s,_=>_.PUSH_MODE),g=ee(s,_=>se(_,"POP_MODE"))});let y;t("Line Terminator Handling",()=>{const _=Pg(e.lineTerminatorCharacters);y=ee(s,P=>!1),e.positionTracking!=="onlyOffset"&&(y=ee(s,P=>se(P,"LINE_BREAKS")?!!P.LINE_BREAKS:_g(P,_)===!1&&Jc(_,P.PATTERN)))});let E,k,w,R;t("Misc Mapping #2",()=>{E=ee(s,Ig),k=ee(l,c1),w=bt(s,(_,P)=>{const b=P.GROUP;return kt(b)&&b!==dt.SKIPPED&&(_[b]=[]),_},{}),R=ee(l,(_,P)=>({pattern:l[P],longerAlt:h[P],canLineTerminator:y[P],isCustom:E[P],short:k[P],group:f[P],push:m[P],pop:g[P],tokenTypeIdx:c[P],tokenType:s[P]}))});let j=!0,M=[];return e.safeMode||t("First Char Optimization",()=>{M=bt(s,(_,P,b)=>{if(typeof P.PATTERN=="string"){const z=P.PATTERN.charCodeAt(0),L=lr(z);nc(_,L,R[b])}else if(Te(P.START_CHARS_HINT)){let z;ae(P.START_CHARS_HINT,L=>{const D=typeof L=="string"?L.charCodeAt(0):L,G=lr(D);z!==G&&(z=G,nc(_,G,R[b]))})}else if(Pn(P.PATTERN))if(P.PATTERN.unicode)j=!1,e.ensureOptimizations&&hc(`${Ea}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const z=DC(P.PATTERN,e.ensureOptimizations);Ne(z)&&(j=!1),ae(z,L=>{nc(_,L,R[b])})}else e.ensureOptimizations&&hc(`${Ea}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),j=!1;return _},[])}),{emptyGroups:w,patternIdxToConfig:R,charCodeToPatternIdxToConfig:M,hasCustom:a,canBeOptimized:j}}function WC(r,e){let t=[];const s=KC(r);t=t.concat(s.errors);const a=HC(s.valid),l=a.valid;return t=t.concat(a.errors),t=t.concat(GC(l)),t=t.concat(t1(l)),t=t.concat(n1(l,e)),t=t.concat(r1(l)),t}function GC(r){let e=[];const t=qt(r,s=>Pn(s[_r]));return e=e.concat(qC(t)),e=e.concat(ZC(t)),e=e.concat(JC(t)),e=e.concat(e1(t)),e=e.concat(XC(t)),e}function KC(r){const e=qt(r,a=>!se(a,_r)),t=ee(e,a=>({message:"Token Type: ->"+a.name+"<- missing static 'PATTERN' property",type:ze.MISSING_PATTERN,tokenTypes:[a]})),s=Fa(r,e);return{errors:t,valid:s}}function HC(r){const e=qt(r,a=>{const l=a[_r];return!Pn(l)&&!Mn(l)&&!se(l,"exec")&&!kt(l)}),t=ee(e,a=>({message:"Token Type: ->"+a.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ze.INVALID_PATTERN,tokenTypes:[a]})),s=Fa(r,e);return{errors:t,valid:s}}const YC=/[^\\][$]/;function qC(r){class e extends Zc{constructor(){super(...arguments),this.found=!1}visitEndAnchor(l){this.found=!0}}const t=qt(r,a=>{const l=a.PATTERN;try{const c=Da(l),f=new e;return f.visit(c),f.found}catch{return YC.test(l.source)}});return ee(t,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.EOI_ANCHOR_FOUND,tokenTypes:[a]}))}function XC(r){const e=qt(r,s=>s.PATTERN.test(""));return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:ze.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const QC=/[^\\[][\^]|^\^/;function ZC(r){class e extends Zc{constructor(){super(...arguments),this.found=!1}visitStartAnchor(l){this.found=!0}}const t=qt(r,a=>{const l=a.PATTERN;try{const c=Da(l),f=new e;return f.visit(c),f.found}catch{return QC.test(l.source)}});return ee(t,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.SOI_ANCHOR_FOUND,tokenTypes:[a]}))}function JC(r){const e=qt(r,s=>{const a=s[_r];return a instanceof RegExp&&(a.multiline||a.global)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ze.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function e1(r){const e=[];let t=ee(r,l=>bt(r,(c,f)=>(l.PATTERN.source===f.PATTERN.source&&!pt(e,f)&&f.PATTERN!==dt.NA&&(e.push(f),c.push(f)),c),[]));t=Ps(t);const s=qt(t,l=>l.length>1);return ee(s,l=>{const c=ee(l,h=>h.name);return{message:`The same RegExp pattern ->${an(l).PATTERN}<-has been used in all of the following Token Types: ${c.join(", ")} <-`,type:ze.DUPLICATE_PATTERNS_FOUND,tokenTypes:l}})}function t1(r){const e=qt(r,s=>{if(!se(s,"GROUP"))return!1;const a=s.GROUP;return a!==dt.SKIPPED&&a!==dt.NA&&!kt(a)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ze.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function n1(r,e){const t=qt(r,a=>a.PUSH_MODE!==void 0&&!pt(e,a.PUSH_MODE));return ee(t,a=>({message:`Token Type: ->${a.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${a.PUSH_MODE}<-which does not exist`,type:ze.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[a]}))}function r1(r){const e=[],t=bt(r,(s,a,l)=>{const c=a.PATTERN;return c===dt.NA||(kt(c)?s.push({str:c,idx:l,tokenType:a}):Pn(c)&&s1(c)&&s.push({str:c.source,idx:l,tokenType:a})),s},[]);return ae(r,(s,a)=>{ae(t,({str:l,idx:c,tokenType:f})=>{if(a<c&&i1(l,s.PATTERN)){const h=`Token: ->${f.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:h,type:ze.UNREACHABLE_PATTERN,tokenTypes:[s,f]})}})}),e}function i1(r,e){if(Pn(e)){if(o1(e))return!1;const t=e.exec(r);return t!==null&&t.index===0}else{if(Mn(e))return e(r,0,[],{});if(se(e,"exec"))return e.exec(r,0,[],{});if(typeof e=="string")return e===r;throw Error("non exhaustive match")}}function s1(r){return yi([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>r.source.indexOf(t)!==-1)===void 0}function o1(r){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(r.source)}function sm(r){const e=r.ignoreCase?"i":"";return new RegExp(`^(?:${r.source})`,e)}function om(r){const e=r.ignoreCase?"iy":"y";return new RegExp(`${r.source}`,e)}function a1(r,e,t){const s=[];return se(r,ms)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+ms+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),se(r,Zo)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+Zo+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),se(r,Zo)&&se(r,ms)&&!se(r.modes,r.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${ms}: <${r.defaultMode}>which does not exist
`,type:ze.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),se(r,Zo)&&ae(r.modes,(a,l)=>{ae(a,(c,f)=>{if(Ln(c))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${l}> at index: <${f}>
`,type:ze.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(se(c,"LONGER_ALT")){const h=Te(c.LONGER_ALT)?c.LONGER_ALT:[c.LONGER_ALT];ae(h,m=>{!Ln(m)&&!pt(a,m)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${m.name}> on token <${c.name}> outside of mode <${l}>
`,type:ze.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function l1(r,e,t){const s=[];let a=!1;const l=Ps(rn(Xe(r.modes))),c=$a(l,h=>h[_r]===dt.NA),f=Pg(t);return e&&ae(c,h=>{const m=_g(h,f);if(m!==!1){const y={message:d1(h,m),type:m.issue,tokenType:h};s.push(y)}else se(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(a=!0):Jc(f,h.PATTERN)&&(a=!0)}),e&&!a&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:ze.NO_LINE_BREAKS_FLAGS}),s}function u1(r){const e={},t=Yt(r);return ae(t,s=>{const a=r[s];if(Te(a))e[s]=[];else throw Error("non exhaustive match")}),e}function Ig(r){const e=r.PATTERN;if(Pn(e))return!1;if(Mn(e))return!0;if(se(e,"exec"))return!0;if(kt(e))return!1;throw Error("non exhaustive match")}function c1(r){return kt(r)&&r.length===1?r.charCodeAt(0):!1}const f1={test:function(r){const e=r.length;for(let t=this.lastIndex;t<e;t++){const s=r.charCodeAt(t);if(s===10)return this.lastIndex=t+1,!0;if(s===13)return r.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function _g(r,e){if(se(r,"LINE_BREAKS"))return!1;if(Pn(r.PATTERN)){try{Jc(e,r.PATTERN)}catch(t){return{issue:ze.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(kt(r.PATTERN))return!1;if(Ig(r))return{issue:ze.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function d1(r,e){if(e.issue===ze.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${r.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===ze.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${r.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Pg(r){return ee(r,t=>kt(t)?t.charCodeAt(0):t)}function nc(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}const gs=256;let sa=[];function lr(r){return r<gs?r:sa[r]}function h1(){if(Ne(sa)){sa=new Array(65536);for(let r=0;r<65536;r++)sa[r]=r>255?255+~~(r/255):r}}function bs(r,e){const t=r.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function Sa(r,e){return r.tokenTypeIdx===e.tokenTypeIdx}let am=1;const Lg={};function Ms(r){const e=p1(r);m1(e),v1(e),g1(e),ae(e,t=>{t.isParent=t.categoryMatches.length>0})}function p1(r){let e=st(r),t=r,s=!0;for(;s;){t=Ps(rn(ee(t,l=>l.CATEGORIES)));const a=Fa(t,e);e=e.concat(a),Ne(a)?s=!1:t=a}return e}function m1(r){ae(r,e=>{Mg(e)||(Lg[am]=e,e.tokenTypeIdx=am++),lm(e)&&!Te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),lm(e)||(e.CATEGORIES=[]),y1(e)||(e.categoryMatches=[]),E1(e)||(e.categoryMatchesMap={})})}function g1(r){ae(r,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(t,s)=>{e.categoryMatches.push(Lg[s].tokenTypeIdx)})})}function v1(r){ae(r,e=>{bg([],e)})}function bg(r,e){ae(r,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),ae(e.CATEGORIES,t=>{const s=r.concat(e);pt(s,t)||bg(s,t)})}function Mg(r){return se(r,"tokenTypeIdx")}function lm(r){return se(r,"CATEGORIES")}function y1(r){return se(r,"categoryMatches")}function E1(r){return se(r,"categoryMatchesMap")}function S1(r){return se(r,"tokenTypeIdx")}const T1={buildUnableToPopLexerModeMessage(r){return`Unable to pop Lexer Mode after encountering Token ->${r.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(r,e,t,s,a,l){return`unexpected character: ->${r.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var ze;(function(r){r[r.MISSING_PATTERN=0]="MISSING_PATTERN",r[r.INVALID_PATTERN=1]="INVALID_PATTERN",r[r.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",r[r.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",r[r.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",r[r.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",r[r.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",r[r.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",r[r.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",r[r.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",r[r.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",r[r.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",r[r.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",r[r.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",r[r.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",r[r.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",r[r.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",r[r.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(ze||(ze={}));const vs={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:T1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(vs);class dt{constructor(e,t=vs){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(a,l)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${a}>`);const{time:f,value:h}=wg(l),m=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&m(`${c}<-- <${a}> time: ${f}ms`),this.traceInitIndent--,h}else return l()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Lt({},vs,t);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let a,l=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===vs.lineTerminatorsPattern)this.config.lineTerminatorsPattern=f1;else if(this.config.lineTerminatorCharacters===vs.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Te(e)?a={modes:{defaultMode:st(e)},defaultMode:ms}:(l=!1,a=st(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(a1(a,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(l1(a,this.trackStartLines,this.config.lineTerminatorCharacters))})),a.modes=a.modes?a.modes:{},ae(a.modes,(f,h)=>{a.modes[h]=$a(f,m=>Ln(m))});const c=Yt(a.modes);if(ae(a.modes,(f,h)=>{this.TRACE_INIT(`Mode: <${h}> processing`,()=>{if(this.modes.push(h),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(WC(f,c))}),Ne(this.lexerDefinitionErrors)){Ms(f);let m;this.TRACE_INIT("analyzeTokenTypes",()=>{m=VC(f,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[h]=m.patternIdxToConfig,this.charCodeToPatternIdxToConfig[h]=m.charCodeToPatternIdxToConfig,this.emptyGroups=Lt({},this.emptyGroups,m.emptyGroups),this.hasCustom=m.hasCustom||this.hasCustom,this.canModeBeOptimized[h]=m.canBeOptimized}})}),this.defaultMode=a.defaultMode,!Ne(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const h=ee(this.lexerDefinitionErrors,m=>m.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+h)}ae(this.lexerDefinitionWarning,f=>{Ag(f.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Og?(this.chopInput=gi,this.match=this.matchWithTest):(this.updateLastIndex=qe,this.match=this.matchWithExec),l&&(this.handleModes=qe),this.trackStartLines===!1&&(this.computeNewColumn=gi),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=qe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const f=bt(this.canModeBeOptimized,(h,m,g)=>(m===!1&&h.push(g),h),[]);if(t.ensureOptimizations&&!Ne(f))throw Error(`Lexer Modes: < ${f.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{UC()}),this.TRACE_INIT("toFastProperties",()=>{Cg(this)})})}tokenize(e,t=this.defaultMode){if(!Ne(this.lexerDefinitionErrors)){const a=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+a)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let s,a,l,c,f,h,m,g,y,E,k,w,R,j,M;const _=e,P=_.length;let b=0,z=0;const L=this.hasCustom?0:Math.floor(e.length/10),D=new Array(L),G=[];let Ae=this.trackStartLines?1:void 0,ce=this.trackStartLines?1:void 0;const Ge=u1(this.emptyGroups),tt=this.trackStartLines,$e=this.config.lineTerminatorsPattern;let Ue=0,de=[],ve=[];const xe=[],W=[];Object.freeze(W);let J;function K(){return de}function A(oe){const he=lr(oe),ye=ve[he];return ye===void 0?W:ye}const F=oe=>{if(xe.length===1&&oe.tokenType.PUSH_MODE===void 0){const he=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);G.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:he})}else{xe.pop();const he=Ir(xe);de=this.patternIdxToConfig[he],ve=this.charCodeToPatternIdxToConfig[he],Ue=de.length;const ye=this.canModeBeOptimized[he]&&this.config.safeMode===!1;ve&&ye?J=A:J=K}};function fe(oe){xe.push(oe),ve=this.charCodeToPatternIdxToConfig[oe],de=this.patternIdxToConfig[oe],Ue=de.length,Ue=de.length;const he=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;ve&&he?J=A:J=K}fe.call(this,t);let te;const Ee=this.config.recoveryEnabled;for(;b<P;){h=null;const oe=_.charCodeAt(b),he=J(oe),ye=he.length;for(s=0;s<ye;s++){te=he[s];const me=te.pattern;m=null;const Le=te.short;if(Le!==!1?oe===Le&&(h=me):te.isCustom===!0?(M=me.exec(_,b,D,Ge),M!==null?(h=M[0],M.payload!==void 0&&(m=M.payload)):h=null):(this.updateLastIndex(me,b),h=this.match(me,e,b)),h!==null){if(f=te.longerAlt,f!==void 0){const At=f.length;for(l=0;l<At;l++){const jt=de[f[l]],Ft=jt.pattern;if(g=null,jt.isCustom===!0?(M=Ft.exec(_,b,D,Ge),M!==null?(c=M[0],M.payload!==void 0&&(g=M.payload)):c=null):(this.updateLastIndex(Ft,b),c=this.match(Ft,e,b)),c&&c.length>h.length){h=c,m=g,te=jt;break}}}break}}if(h!==null){if(y=h.length,E=te.group,E!==void 0&&(k=te.tokenTypeIdx,w=this.createTokenInstance(h,b,k,te.tokenType,Ae,ce,y),this.handlePayload(w,m),E===!1?z=this.addToken(D,z,w):Ge[E].push(w)),e=this.chopInput(e,y),b=b+y,ce=this.computeNewColumn(ce,y),tt===!0&&te.canLineTerminator===!0){let me=0,Le,At;$e.lastIndex=0;do Le=$e.test(h),Le===!0&&(At=$e.lastIndex-1,me++);while(Le===!0);me!==0&&(Ae=Ae+me,ce=y-At,this.updateTokenEndLineColumnLocation(w,E,At,me,Ae,ce,y))}this.handleModes(te,F,fe,w)}else{const me=b,Le=Ae,At=ce;let jt=Ee===!1;for(;jt===!1&&b<P;)for(e=this.chopInput(e,1),b++,a=0;a<Ue;a++){const Ft=de[a],dr=Ft.pattern,ki=Ft.short;if(ki!==!1?_.charCodeAt(b)===ki&&(jt=!0):Ft.isCustom===!0?jt=dr.exec(_,b,D,Ge)!==null:(this.updateLastIndex(dr,b),jt=dr.exec(e)!==null),jt===!0)break}if(R=b-me,ce=this.computeNewColumn(ce,R),j=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,me,R,Le,At,Ir(xe)),G.push({offset:me,line:Le,column:At,length:R,message:j}),Ee===!1)break}}return this.hasCustom||(D.length=z),{tokens:D,groups:Ge,errors:G}}handleModes(e,t,s,a){if(e.pop===!0){const l=e.push;t(a),l!==void 0&&s.call(this,l)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,s,a,l,c,f){let h,m;t!==void 0&&(h=s===f-1,m=h?-1:0,a===1&&h===!0||(e.endLine=l+m,e.endColumn=c-1+-m))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,s,a){return{image:e,startOffset:t,tokenTypeIdx:s,tokenType:a}}createStartOnlyToken(e,t,s,a,l,c){return{image:e,startOffset:t,startLine:l,startColumn:c,tokenTypeIdx:s,tokenType:a}}createFullToken(e,t,s,a,l,c,f){return{image:e,startOffset:t,endOffset:t+f-1,startLine:l,endLine:l,startColumn:c,endColumn:c+f-1,tokenTypeIdx:s,tokenType:a}}addTokenUsingPush(e,t,s){return e.push(s),t}addTokenUsingMemberAccess(e,t,s){return e[t]=s,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,s){return e.test(t)===!0?t.substring(s,e.lastIndex):null}matchWithExec(e,t){const s=e.exec(t);return s!==null?s[0]:null}}dt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";dt.NA=/NOT_APPLICABLE/;function Ss(r){return jg(r)?r.LABEL:r.name}function jg(r){return kt(r.LABEL)&&r.LABEL!==""}const k1="parent",um="categories",cm="label",fm="group",dm="push_mode",hm="pop_mode",pm="longer_alt",mm="line_breaks",gm="start_chars_hint";function pe(r){return x1(r)}function x1(r){const e=r.pattern,t={};if(t.name=r.name,Ln(e)||(t.PATTERN=e),se(r,k1))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return se(r,um)&&(t.CATEGORIES=r[um]),Ms([t]),se(r,cm)&&(t.LABEL=r[cm]),se(r,fm)&&(t.GROUP=r[fm]),se(r,hm)&&(t.POP_MODE=r[hm]),se(r,dm)&&(t.PUSH_MODE=r[dm]),se(r,pm)&&(t.LONGER_ALT=r[pm]),se(r,mm)&&(t.LINE_BREAKS=r[mm]),se(r,gm)&&(t.START_CHARS_HINT=r[gm]),t}const Pr=pe({name:"EOF",pattern:dt.NA});Ms([Pr]);function ef(r,e,t,s,a,l,c,f){return{image:e,startOffset:t,endOffset:s,startLine:a,endLine:l,startColumn:c,endColumn:f,tokenTypeIdx:r.tokenTypeIdx,tokenType:r}}function A1(r,e){return bs(r,e)}const Fg={buildMismatchTokenMessage({expected:r,actual:e,previous:t,ruleName:s}){return`Expecting ${jg(r)?`--> ${Ss(r)} <--`:`token of type --> ${r.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:r,ruleName:e}){return"Redundant input, expecting EOF but found: "+r.image},buildNoViableAltMessage({expectedPathsPerAlt:r,actual:e,previous:t,customUserDescription:s,ruleName:a}){const l="Expecting: ",f=`
but found: '`+an(e).image+"'";if(s)return l+s+f;{const h=bt(r,(E,k)=>E.concat(k),[]),m=ee(h,E=>`[${ee(E,k=>Ss(k)).join(", ")}]`),y=`one of these possible Token sequences:
${ee(m,(E,k)=>`  ${k+1}. ${E}`).join(`
`)}`;return l+y+f}},buildEarlyExitMessage({expectedIterationPaths:r,actual:e,customUserDescription:t,ruleName:s}){const a="Expecting: ",c=`
but found: '`+an(e).image+"'";if(t)return a+t+c;{const h=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(r,m=>`[${ee(m,g=>Ss(g)).join(",")}]`).join(" ,")}>`;return a+h+c}}};Object.freeze(Fg);const w1={buildRuleNotFoundError(r,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+r.name+"<-"}},Cr={buildDuplicateFoundError(r,e){function t(g){return g instanceof Fe?g.terminalType.name:g instanceof Mt?g.nonTerminalName:""}const s=r.name,a=an(e),l=a.idx,c=gn(a),f=t(a),h=l>0;let m=`->${c}${h?l:""}<- ${f?`with argument: ->${f}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return m=m.replace(/[ \t]+/g," "),m=m.replace(/\s\s+/g,`
`),m},buildNamespaceConflictError(r){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${r.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(r){const e=ee(r.prefixPath,a=>Ss(a)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;return`Ambiguous alternatives: <${r.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(r){const e=ee(r.prefixPath,a=>Ss(a)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;let s=`Ambiguous Alternatives Detected: <${r.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(r){let e=gn(r.repetition);return r.repetition.idx!==0&&(e+=r.repetition.idx),`The repetition <${e}> within Rule <${r.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(r){return"deprecated"},buildEmptyAlternationError(r){return`Ambiguous empty alternative: <${r.emptyChoiceIdx+1}> in <OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(r){return`An Alternation cannot have more than 256 alternatives:
<OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
 has ${r.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(r){const e=r.topLevelRule.name,t=ee(r.leftRecursionPath,l=>l.name),s=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(r){return"deprecated"},buildDuplicateRuleNameError(r){let e;return r.topLevelRule instanceof Ei?e=r.topLevelRule.name:e=r.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${r.grammarName}<-`}};function C1(r,e){const t=new R1(r,e);return t.resolveRefs(),t.errors}class R1 extends Si{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ae(Xe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class N1 extends Ua{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=st(this.path.ruleStack).reverse(),this.occurrenceStack=st(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const a=t.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,a)}}updateExpectedNext(){Ne(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class O1 extends N1{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const a=t.concat(s),l=new xt({definition:a});this.possibleTokTypes=Ls(l),this.found=!0}}}class Ba extends Ua{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class I1 extends Ba{walkMany(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkMany(e,t,s)}}class vm extends Ba{walkManySep(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkManySep(e,t,s)}}class _1 extends Ba{walkAtLeastOne(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOne(e,t,s)}}class ym extends Ba{walkAtLeastOneSep(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOneSep(e,t,s)}}function gc(r,e,t=[]){t=st(t);let s=[],a=0;function l(f){return f.concat(it(r,a+1))}function c(f){const h=gc(l(f),e,t);return s.concat(h)}for(;t.length<e&&a<r.length;){const f=r[a];if(f instanceof xt)return c(f.definition);if(f instanceof Mt)return c(f.definition);if(f instanceof Tt)s=c(f.definition);else if(f instanceof kn){const h=f.definition.concat([new Qe({definition:f.definition})]);return c(h)}else if(f instanceof xn){const h=[new xt({definition:f.definition}),new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})];return c(h)}else if(f instanceof un){const h=f.definition.concat([new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})]);s=c(h)}else if(f instanceof Qe){const h=f.definition.concat([new Qe({definition:f.definition})]);s=c(h)}else{if(f instanceof cn)return ae(f.definition,h=>{Ne(h.definition)===!1&&(s=c(h.definition))}),s;if(f instanceof Fe)t.push(f.terminalType);else throw Error("non exhaustive match")}a++}return s.push({partialPath:t,suffixDef:it(r,a)}),s}function $g(r,e,t,s){const a="EXIT_NONE_TERMINAL",l=[a],c="EXIT_ALTERNATIVE";let f=!1;const h=e.length,m=h-s-1,g=[],y=[];for(y.push({idx:-1,def:r,ruleStack:[],occurrenceStack:[]});!Ne(y);){const E=y.pop();if(E===c){f&&Ir(y).idx<=m&&y.pop();continue}const k=E.def,w=E.idx,R=E.ruleStack,j=E.occurrenceStack;if(Ne(k))continue;const M=k[0];if(M===a){const _={idx:w,def:it(k),ruleStack:Cs(R),occurrenceStack:Cs(j)};y.push(_)}else if(M instanceof Fe)if(w<h-1){const _=w+1,P=e[_];if(t(P,M.terminalType)){const b={idx:_,def:it(k),ruleStack:R,occurrenceStack:j};y.push(b)}}else if(w===h-1)g.push({nextTokenType:M.terminalType,nextTokenOccurrence:M.idx,ruleStack:R,occurrenceStack:j}),f=!0;else throw Error("non exhaustive match");else if(M instanceof Mt){const _=st(R);_.push(M.nonTerminalName);const P=st(j);P.push(M.idx);const b={idx:w,def:M.definition.concat(l,it(k)),ruleStack:_,occurrenceStack:P};y.push(b)}else if(M instanceof Tt){const _={idx:w,def:it(k),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P={idx:w,def:M.definition.concat(it(k)),ruleStack:R,occurrenceStack:j};y.push(P)}else if(M instanceof kn){const _=new Qe({definition:M.definition,idx:M.idx}),P=M.definition.concat([_],it(k)),b={idx:w,def:P,ruleStack:R,occurrenceStack:j};y.push(b)}else if(M instanceof xn){const _=new Fe({terminalType:M.separator}),P=new Qe({definition:[_].concat(M.definition),idx:M.idx}),b=M.definition.concat([P],it(k)),z={idx:w,def:b,ruleStack:R,occurrenceStack:j};y.push(z)}else if(M instanceof un){const _={idx:w,def:it(k),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Fe({terminalType:M.separator}),b=new Qe({definition:[P].concat(M.definition),idx:M.idx}),z=M.definition.concat([b],it(k)),L={idx:w,def:z,ruleStack:R,occurrenceStack:j};y.push(L)}else if(M instanceof Qe){const _={idx:w,def:it(k),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Qe({definition:M.definition,idx:M.idx}),b=M.definition.concat([P],it(k)),z={idx:w,def:b,ruleStack:R,occurrenceStack:j};y.push(z)}else if(M instanceof cn)for(let _=M.definition.length-1;_>=0;_--){const P=M.definition[_],b={idx:w,def:P.definition.concat(it(k)),ruleStack:R,occurrenceStack:j};y.push(b),y.push(c)}else if(M instanceof xt)y.push({idx:w,def:M.definition.concat(it(k)),ruleStack:R,occurrenceStack:j});else if(M instanceof Ei)y.push(P1(M,w,R,j));else throw Error("non exhaustive match")}return g}function P1(r,e,t,s){const a=st(t);a.push(r.name);const l=st(s);return l.push(1),{idx:e,def:r.definition,ruleStack:a,occurrenceStack:l}}var Be;(function(r){r[r.OPTION=0]="OPTION",r[r.REPETITION=1]="REPETITION",r[r.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",r[r.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",r[r.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",r[r.ALTERNATION=5]="ALTERNATION"})(Be||(Be={}));function Ug(r){if(r instanceof Tt||r==="Option")return Be.OPTION;if(r instanceof Qe||r==="Repetition")return Be.REPETITION;if(r instanceof kn||r==="RepetitionMandatory")return Be.REPETITION_MANDATORY;if(r instanceof xn||r==="RepetitionMandatoryWithSeparator")return Be.REPETITION_MANDATORY_WITH_SEPARATOR;if(r instanceof un||r==="RepetitionWithSeparator")return Be.REPETITION_WITH_SEPARATOR;if(r instanceof cn||r==="Alternation")return Be.ALTERNATION;throw Error("non exhaustive match")}function L1(r,e,t,s,a,l){const c=tf(r,e,t),f=zg(c)?Sa:bs;return l(c,s,f,a)}function b1(r,e,t,s,a,l){const c=nf(r,e,a,t),f=zg(c)?Sa:bs;return l(c[0],f,s)}function M1(r,e,t,s){const a=r.length,l=sn(r,c=>sn(c,f=>f.length===1));if(e)return function(c){const f=ee(c,h=>h.GATE);for(let h=0;h<a;h++){const m=r[h],g=m.length,y=f[h];if(!(y!==void 0&&y.call(this)===!1))e:for(let E=0;E<g;E++){const k=m[E],w=k.length;for(let R=0;R<w;R++){const j=this.LA(R+1);if(t(j,k[R])===!1)continue e}return h}}};if(l&&!s){const c=ee(r,h=>rn(h)),f=bt(c,(h,m,g)=>(ae(m,y=>{se(h,y.tokenTypeIdx)||(h[y.tokenTypeIdx]=g),ae(y.categoryMatches,E=>{se(h,E)||(h[E]=g)})}),h),{});return function(){const h=this.LA(1);return f[h.tokenTypeIdx]}}else return function(){for(let c=0;c<a;c++){const f=r[c],h=f.length;e:for(let m=0;m<h;m++){const g=f[m],y=g.length;for(let E=0;E<y;E++){const k=this.LA(E+1);if(t(k,g[E])===!1)continue e}return c}}}}function j1(r,e,t){const s=sn(r,l=>l.length===1),a=r.length;if(s&&!t){const l=rn(r);if(l.length===1&&Ne(l[0].categoryMatches)){const f=l[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===f}}else{const c=bt(l,(f,h,m)=>(f[h.tokenTypeIdx]=!0,ae(h.categoryMatches,g=>{f[g]=!0}),f),[]);return function(){const f=this.LA(1);return c[f.tokenTypeIdx]===!0}}}else return function(){e:for(let l=0;l<a;l++){const c=r[l],f=c.length;for(let h=0;h<f;h++){const m=this.LA(h+1);if(e(m,c[h])===!1)continue e}return!0}return!1}}class F1 extends Ua{constructor(e,t,s){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,s,a){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=s.concat(a),!0):!1}walkOption(e,t,s){this.checkIsTarget(e,Be.OPTION,t,s)||super.walkOption(e,t,s)}walkAtLeastOne(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY,t,s)||super.walkOption(e,t,s)}walkAtLeastOneSep(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}walkMany(e,t,s){this.checkIsTarget(e,Be.REPETITION,t,s)||super.walkOption(e,t,s)}walkManySep(e,t,s){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}}class Dg extends Si{constructor(e,t,s){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=s,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Be.OPTION)}visitRepetition(e){this.checkIsTarget(e,Be.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Be.ALTERNATION)}}function Em(r){const e=new Array(r);for(let t=0;t<r;t++)e[t]=[];return e}function rc(r){let e=[""];for(let t=0;t<r.length;t++){const s=r[t],a=[];for(let l=0;l<e.length;l++){const c=e[l];a.push(c+"_"+s.tokenTypeIdx);for(let f=0;f<s.categoryMatches.length;f++){const h="_"+s.categoryMatches[f];a.push(c+h)}}e=a}return e}function $1(r,e,t){for(let s=0;s<r.length;s++){if(s===t)continue;const a=r[s];for(let l=0;l<e.length;l++){const c=e[l];if(a[c]===!0)return!1}}return!0}function Bg(r,e){const t=ee(r,c=>gc([c],1)),s=Em(t.length),a=ee(t,c=>{const f={};return ae(c,h=>{const m=rc(h.partialPath);ae(m,g=>{f[g]=!0})}),f});let l=t;for(let c=1;c<=e;c++){const f=l;l=Em(f.length);for(let h=0;h<f.length;h++){const m=f[h];for(let g=0;g<m.length;g++){const y=m[g].partialPath,E=m[g].suffixDef,k=rc(y);if($1(a,k,h)||Ne(E)||y.length===e){const R=s[h];if(vc(R,y)===!1){R.push(y);for(let j=0;j<k.length;j++){const M=k[j];a[h][M]=!0}}}else{const R=gc(E,c+1,y);l[h]=l[h].concat(R),ae(R,j=>{const M=rc(j.partialPath);ae(M,_=>{a[h][_]=!0})})}}}}return s}function tf(r,e,t,s){const a=new Dg(r,Be.ALTERNATION,s);return e.accept(a),Bg(a.result,t)}function nf(r,e,t,s){const a=new Dg(r,t);e.accept(a);const l=a.result,f=new F1(e,r,t).startWalking(),h=new xt({definition:l}),m=new xt({definition:f});return Bg([h,m],s)}function vc(r,e){e:for(let t=0;t<r.length;t++){const s=r[t];if(s.length===e.length){for(let a=0;a<s.length;a++){const l=e[a],c=s[a];if((l===c||c.categoryMatchesMap[l.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function U1(r,e){return r.length<e.length&&sn(r,(t,s)=>{const a=e[s];return t===a||a.categoryMatchesMap[t.tokenTypeIdx]})}function zg(r){return sn(r,e=>sn(e,t=>sn(t,s=>Ne(s.categoryMatches))))}function D1(r){const e=r.lookaheadStrategy.validate({rules:r.rules,tokenTypes:r.tokenTypes,grammarName:r.grammarName});return ee(e,t=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},t))}function B1(r,e,t,s){const a=Gt(r,h=>z1(h,t)),l=eR(r,e,t),c=Gt(r,h=>X1(h,t)),f=Gt(r,h=>G1(h,r,s,t));return a.concat(l,c,f)}function z1(r,e){const t=new W1;r.accept(t);const s=t.allProductions,a=eC(s,V1),l=ln(a,f=>f.length>1);return ee(Xe(l),f=>{const h=an(f),m=e.buildDuplicateFoundError(r,f),g=gn(h),y={message:m,type:ht.DUPLICATE_PRODUCTIONS,ruleName:r.name,dslName:g,occurrence:h.idx},E=Vg(h);return E&&(y.parameter=E),y})}function V1(r){return`${gn(r)}_#_${r.idx}_#_${Vg(r)}`}function Vg(r){return r instanceof Fe?r.terminalType.name:r instanceof Mt?r.nonTerminalName:""}class W1 extends Si{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function G1(r,e,t,s){const a=[];if(bt(e,(c,f)=>f.name===r.name?c+1:c,0)>1){const c=s.buildDuplicateRuleNameError({topLevelRule:r,grammarName:t});a.push({message:c,type:ht.DUPLICATE_RULE_NAME,ruleName:r.name})}return a}function K1(r,e,t){const s=[];let a;return pt(e,r)||(a=`Invalid rule override, rule: ->${r}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,s.push({message:a,type:ht.INVALID_RULE_OVERRIDE,ruleName:r})),s}function Wg(r,e,t,s=[]){const a=[],l=oa(e.definition);if(Ne(l))return[];{const c=r.name;pt(l,r)&&a.push({message:t.buildLeftRecursionError({topLevelRule:r,leftRecursionPath:s}),type:ht.LEFT_RECURSION,ruleName:c});const h=Fa(l,s.concat([r])),m=Gt(h,g=>{const y=st(s);return y.push(g),Wg(r,g,t,y)});return a.concat(m)}}function oa(r){let e=[];if(Ne(r))return e;const t=an(r);if(t instanceof Mt)e.push(t.referencedRule);else if(t instanceof xt||t instanceof Tt||t instanceof kn||t instanceof xn||t instanceof un||t instanceof Qe)e=e.concat(oa(t.definition));else if(t instanceof cn)e=rn(ee(t.definition,l=>oa(l.definition)));else if(!(t instanceof Fe))throw Error("non exhaustive match");const s=ga(t),a=r.length>1;if(s&&a){const l=it(r);return e.concat(oa(l))}else return e}class rf extends Si{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function H1(r,e){const t=new rf;r.accept(t);const s=t.alternations;return Gt(s,l=>{const c=Cs(l.definition);return Gt(c,(f,h)=>{const m=$g([f],[],bs,1);return Ne(m)?[{message:e.buildEmptyAlternationError({topLevelRule:r,alternation:l,emptyChoiceIdx:h}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:r.name,occurrence:l.idx,alternative:h+1}]:[]})})}function Y1(r,e,t){const s=new rf;r.accept(s);let a=s.alternations;return a=$a(a,c=>c.ignoreAmbiguities===!0),Gt(a,c=>{const f=c.idx,h=c.maxLookahead||e,m=tf(f,r,h,c),g=Z1(m,c,r,t),y=J1(m,c,r,t);return g.concat(y)})}class q1 extends Si{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function X1(r,e){const t=new rf;r.accept(t);const s=t.alternations;return Gt(s,l=>l.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:r,alternation:l}),type:ht.TOO_MANY_ALTS,ruleName:r.name,occurrence:l.idx}]:[])}function Q1(r,e,t){const s=[];return ae(r,a=>{const l=new q1;a.accept(l);const c=l.allProductions;ae(c,f=>{const h=Ug(f),m=f.maxLookahead||e,g=f.idx,E=nf(g,a,h,m)[0];if(Ne(rn(E))){const k=t.buildEmptyRepetitionError({topLevelRule:a,repetition:f});s.push({message:k,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:a.name})}})}),s}function Z1(r,e,t,s){const a=[],l=bt(r,(f,h,m)=>(e.definition[m].ignoreAmbiguities===!0||ae(h,g=>{const y=[m];ae(r,(E,k)=>{m!==k&&vc(E,g)&&e.definition[k].ignoreAmbiguities!==!0&&y.push(k)}),y.length>1&&!vc(a,g)&&(a.push(g),f.push({alts:y,path:g}))}),f),[]);return ee(l,f=>{const h=ee(f.alts,g=>g+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:ht.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:f.alts}})}function J1(r,e,t,s){const a=bt(r,(c,f,h)=>{const m=ee(f,g=>({idx:h,path:g}));return c.concat(m)},[]);return Ps(Gt(a,c=>{if(e.definition[c.idx].ignoreAmbiguities===!0)return[];const h=c.idx,m=c.path,g=qt(a,E=>e.definition[E.idx].ignoreAmbiguities!==!0&&E.idx<h&&U1(E.path,m));return ee(g,E=>{const k=[E.idx+1,h+1],w=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:k,prefixPath:E.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:w,alternatives:k}})}))}function eR(r,e,t){const s=[],a=ee(e,l=>l.name);return ae(r,l=>{const c=l.name;if(pt(a,c)){const f=t.buildNamespaceConflictError(l);s.push({message:f,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:c})}}),s}function tR(r){const e=Xc(r,{errMsgProvider:w1}),t={};return ae(r.rules,s=>{t[s.name]=s}),C1(t,e.errMsgProvider)}function nR(r){return r=Xc(r,{errMsgProvider:Cr}),B1(r.rules,r.tokenTypes,r.errMsgProvider,r.grammarName)}const Gg="MismatchedTokenException",Kg="NoViableAltException",Hg="EarlyExitException",Yg="NotAllInputParsedException",qg=[Gg,Kg,Hg,Yg];Object.freeze(qg);function Ta(r){return pt(qg,r.name)}class za extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Xg extends za{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Gg}}class rR extends za{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Kg}}class iR extends za{constructor(e,t){super(e,t),this.name=Yg}}class sR extends za{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Hg}}const ic={},Qg="InRuleRecoveryException";class oR extends Error{constructor(e){super(e),this.name=Qg}}class aR{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=se(e,"recoveryEnabled")?e.recoveryEnabled:bn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=lR)}getTokenToInsert(e){const t=ef(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,s,a){const l=this.findReSyncTokenType(),c=this.exportLexerState(),f=[];let h=!1;const m=this.LA(1);let g=this.LA(1);const y=()=>{const E=this.LA(0),k=this.errorMessageProvider.buildMismatchTokenMessage({expected:a,actual:m,previous:E,ruleName:this.getCurrRuleFullName()}),w=new Xg(k,m,this.LA(0));w.resyncedTokens=Cs(f),this.SAVE_ERROR(w)};for(;!h;)if(this.tokenMatcher(g,a)){y();return}else if(s.call(this)){y(),e.apply(this,t);return}else this.tokenMatcher(g,l)?h=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,f));this.importLexerState(c)}shouldInRepetitionRecoveryBeTried(e,t,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const s=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new oR("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ne(t))return!1;const s=this.LA(1);return yi(t,l=>this.tokenMatcher(s,l))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(t);return pt(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),s=2;for(;;){const a=yi(e,l=>A1(t,l));if(a!==void 0)return a;t=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return ic;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return ee(e,(s,a)=>a===0?ic:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:t[a],inRule:this.shortRuleNameToFullName(e[a-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return rn(e)}getFollowSetFromFollowKey(e){if(e===ic)return[Pr];const t=e.ruleName+e.idxInCallingRule+Rg+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Pr)||t.push(e),t}reSyncTo(e){const t=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,t);return Cs(t)}attemptInRepetitionRecovery(e,t,s,a,l,c,f){}getCurrentGrammarPath(e,t){const s=this.getHumanReadableRuleStack(),a=st(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:a,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function lR(r,e,t,s,a,l,c){const f=this.getKeyForAutomaticLookahead(s,a);let h=this.firstAfterRepMap[f];if(h===void 0){const E=this.getCurrRuleFullName(),k=this.getGAstProductions()[E];h=new l(k,a).startWalking(),this.firstAfterRepMap[f]=h}let m=h.token,g=h.occurrence;const y=h.isEndOfRule;this.RULE_STACK.length===1&&y&&m===void 0&&(m=Pr,g=1),!(m===void 0||g===void 0)&&this.shouldInRepetitionRecoveryBeTried(m,g,c)&&this.tryInRepetitionRecovery(r,e,t,m)}const uR=4,cr=8,Zg=1<<cr,Jg=2<<cr,yc=3<<cr,Ec=4<<cr,Sc=5<<cr,aa=6<<cr;function sc(r,e,t){return t|e|r}class cR{constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:bn.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(Ne(t)){const s=this.validateEmptyOrAlternatives(e.rules),a=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),l=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...s,...a,...l]}return t}validateNoLeftRecursion(e){return Gt(e,t=>Wg(t,t,Cr))}validateEmptyOrAlternatives(e){return Gt(e,t=>H1(t,Cr))}validateAmbiguousAlternationAlternatives(e,t){return Gt(e,s=>Y1(s,t,Cr))}validateSomeNonEmptyLookaheadPath(e,t){return Q1(e,t,Cr)}buildLookaheadForAlternation(e){return L1(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,M1)}buildLookaheadForOptional(e){return b1(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ug(e.prodType),j1)}}class fR{initLooksAhead(e){this.dynamicTokensEnabled=se(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:bn.dynamicTokensEnabled,this.maxLookahead=se(e,"maxLookahead")?e.maxLookahead:bn.maxLookahead,this.lookaheadStrategy=se(e,"lookaheadStrategy")?e.lookaheadStrategy:new cR({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:s,repetition:a,option:l,repetitionMandatory:c,repetitionMandatoryWithSeparator:f,repetitionWithSeparator:h}=hR(t);ae(s,m=>{const g=m.idx===0?"":m.idx;this.TRACE_INIT(`${gn(m)}${g}`,()=>{const y=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:m.idx,rule:t,maxLookahead:m.maxLookahead||this.maxLookahead,hasPredicates:m.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),E=sc(this.fullRuleNameToShort[t.name],Zg,m.idx);this.setLaFuncCache(E,y)})}),ae(a,m=>{this.computeLookaheadFunc(t,m.idx,yc,"Repetition",m.maxLookahead,gn(m))}),ae(l,m=>{this.computeLookaheadFunc(t,m.idx,Jg,"Option",m.maxLookahead,gn(m))}),ae(c,m=>{this.computeLookaheadFunc(t,m.idx,Ec,"RepetitionMandatory",m.maxLookahead,gn(m))}),ae(f,m=>{this.computeLookaheadFunc(t,m.idx,aa,"RepetitionMandatoryWithSeparator",m.maxLookahead,gn(m))}),ae(h,m=>{this.computeLookaheadFunc(t,m.idx,Sc,"RepetitionWithSeparator",m.maxLookahead,gn(m))})})})}computeLookaheadFunc(e,t,s,a,l,c){this.TRACE_INIT(`${c}${t===0?"":t}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:l||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:a}),h=sc(this.fullRuleNameToShort[e.name],s,t);this.setLaFuncCache(h,f)})}getKeyForAutomaticLookahead(e,t){const s=this.getLastExplicitRuleShortName();return sc(s,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class dR extends Si{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Jo=new dR;function hR(r){Jo.reset(),r.accept(Jo);const e=Jo.dslMethods;return Jo.reset(),e}function Sm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.endOffset=e.endOffset):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset)}function Tm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.startColumn=e.startColumn,r.startLine=e.startLine,r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine)}function pR(r,e,t){r.children[t]===void 0?r.children[t]=[e]:r.children[t].push(e)}function mR(r,e,t){r.children[e]===void 0?r.children[e]=[t]:r.children[e].push(t)}const gR="name";function ev(r,e){Object.defineProperty(r,gR,{enumerable:!1,configurable:!0,writable:!1,value:e})}function vR(r,e){const t=Yt(r),s=t.length;for(let a=0;a<s;a++){const l=t[a],c=r[l],f=c.length;for(let h=0;h<f;h++){const m=c[h];m.tokenTypeIdx===void 0&&this[m.name](m.children,e)}}}function yR(r,e){const t=function(){};ev(t,r+"BaseSemantics");const s={visit:function(a,l){if(Te(a)&&(a=a[0]),!Ln(a))return this[a.name](a.children,l)},validateVisitor:function(){const a=SR(this,e);if(!Ne(a)){const l=ee(a,c=>c.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${l.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=s,t.prototype.constructor=t,t._RULE_NAMES=e,t}function ER(r,e,t){const s=function(){};ev(s,r+"BaseSemanticsWithDefaults");const a=Object.create(t.prototype);return ae(e,l=>{a[l]=vR}),s.prototype=a,s.prototype.constructor=s,s}var Tc;(function(r){r[r.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",r[r.MISSING_METHOD=1]="MISSING_METHOD"})(Tc||(Tc={}));function SR(r,e){return TR(r,e)}function TR(r,e){const t=qt(e,a=>Mn(r[a])===!1),s=ee(t,a=>({msg:`Missing visitor method: <${a}> on ${r.constructor.name} CST Visitor.`,type:Tc.MISSING_METHOD,methodName:a}));return Ps(s)}class kR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=se(e,"nodeLocationTracking")?e.nodeLocationTracking:bn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=qe,this.cstFinallyStateUpdate=qe,this.cstPostTerminal=qe,this.cstPostNonTerminal=qe,this.cstPostRule=qe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Tm,this.setNodeLocationFromNode=Tm,this.cstPostRule=qe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=qe,this.setNodeLocationFromNode=qe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Sm,this.setNodeLocationFromNode=Sm,this.cstPostRule=qe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=qe,this.setNodeLocationFromNode=qe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=qe,this.setNodeLocationFromNode=qe,this.cstPostRule=qe,this.setInitialNodeLocation=qe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?(s.endOffset=t.endOffset,s.endLine=t.endLine,s.endColumn=t.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?s.endOffset=t.endOffset:s.startOffset=NaN}cstPostTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];pR(s,t,e),this.setNodeLocationFromToken(s.location,t)}cstPostNonTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];mR(s,t,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(Ln(this.baseCstVisitorConstructor)){const e=yR(this.className,Yt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ln(this.baseCstVisitorWithDefaultsConstructor)){const e=ER(this.className,Yt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class xR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):xa}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?xa:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class AR{ACTION(e){return e.call(this)}consume(e,t,s){return this.consumeInternal(t,e,s)}subrule(e,t,s){return this.subruleInternal(t,e,s)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,s=Aa){if(pt(this.definedRulesNames,e)){const c={message:Cr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(c)}this.definedRulesNames.push(e);const a=this.defineRule(e,t,s);return this[e]=a,a}OVERRIDE_RULE(e,t,s=Aa){const a=K1(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(a);const l=this.defineRule(e,t,s);return this[e]=l,l}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,t),!0}catch(a){if(Ta(a))return!1;throw a}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return wC(Xe(this.gastProductionsCache))}}class wR{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Sa,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},se(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Te(e)){if(Ne(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Te(e))this.tokensMap=bt(e,(l,c)=>(l[c.name]=c,l),{});else if(se(e,"modes")&&sn(rn(Xe(e.modes)),S1)){const l=rn(Xe(e.modes)),c=Qc(l);this.tokensMap=bt(c,(f,h)=>(f[h.name]=h,f),{})}else if(Ht(e))this.tokensMap=st(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Pr;const s=se(e,"modes")?rn(Xe(e.modes)):Xe(e),a=sn(s,l=>Ne(l.categoryMatches));this.tokenMatcher=a?Sa:bs,Ms(Xe(this.tokensMap))}defineRule(e,t,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const a=se(s,"resyncEnabled")?s.resyncEnabled:Aa.resyncEnabled,l=se(s,"recoveryValueFunc")?s.recoveryValueFunc:Aa.recoveryValueFunc,c=this.ruleShortNameIdx<<uR+cr;this.ruleShortNameIdx++,this.shortRuleNameToFull[c]=e,this.fullRuleNameToShort[e]=c;let f;return this.outputCst===!0?f=function(...g){try{this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g);const y=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(y),y}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}}:f=function(...g){try{return this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g)}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}},Object.assign(f,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,s){const a=this.RULE_STACK.length===1,l=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Ta(e)){const c=e;if(l){const f=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(f))if(c.resyncedTokens=this.reSyncTo(f),this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];return h.recoveredNode=!0,h}else return s(e);else{if(this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];h.recoveredNode=!0,c.partialCstResult=h}throw c}}else{if(a)return this.moveToTerminatedState(),s(e);throw c}}else throw e}optionInternal(e,t){const s=this.getKeyForAutomaticLookahead(Jg,t);return this.optionInternalLogic(e,t,s)}optionInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof e!="function"){l=e.DEF;const c=e.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=e;if(a.call(this)===!0)return l.call(this)}atLeastOneInternal(e,t){const s=this.getKeyForAutomaticLookahead(Ec,e);return this.atLeastOneInternalLogic(e,t,s)}atLeastOneInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const c=t.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=t;if(a.call(this)===!0){let c=this.doSingleRepetition(l);for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],a,Ec,e,_1)}atLeastOneSepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(aa,e);this.atLeastOneSepFirstInternalLogic(e,t,s)}atLeastOneSepFirstInternalLogic(e,t,s){const a=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,ym],f,aa,e,ym)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const s=this.getKeyForAutomaticLookahead(yc,e);return this.manyInternalLogic(e,t,s)}manyInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const f=t.GATE;if(f!==void 0){const h=a;a=()=>f.call(this)&&h.call(this)}}else l=t;let c=!0;for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],a,yc,e,I1,c)}manySepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(Sc,e);this.manySepFirstInternalLogic(e,t,s)}manySepFirstInternalLogic(e,t,s){const a=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,vm],f,Sc,e,vm)}}repetitionSepSecondInternal(e,t,s,a,l){for(;s();)this.CONSUME(t),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,s,a,l],s,aa,e,l)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const s=this.getKeyForAutomaticLookahead(Zg,t),a=Te(e)?e:e.DEF,c=this.getLaFuncFromCache(s).call(this,a);if(c!==void 0)return a[c].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new iR(t,e))}}subruleInternal(e,t,s){let a;try{const l=s!==void 0?s.ARGS:void 0;return this.subruleIdx=t,a=e.apply(this,l),this.cstPostNonTerminal(a,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),a}catch(l){throw this.subruleInternalError(l,s,e.ruleName)}}subruleInternalError(e,t,s){throw Ta(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,t,s){let a;try{const l=this.LA(1);this.tokenMatcher(l,e)===!0?(this.consumeToken(),a=l):this.consumeInternalError(e,l,s)}catch(l){a=this.consumeInternalRecovery(e,t,l)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,a),a}consumeInternalError(e,t,s){let a;const l=this.LA(0);throw s!==void 0&&s.ERR_MSG?a=s.ERR_MSG:a=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:l,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Xg(a,t,l))}consumeInternalRecovery(e,t,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const a=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,a)}catch(l){throw l.name===Qg?s:l}}else throw s}saveRecogState(){const e=this.errors,t=st(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Pr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class CR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=se(e,"errorMessageProvider")?e.errorMessageProvider:bn.errorMessageProvider}SAVE_ERROR(e){if(Ta(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:st(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return st(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,s){const a=this.getCurrRuleFullName(),l=this.getGAstProductions()[a],f=nf(e,l,t,this.maxLookahead)[0],h=[];for(let g=1;g<=this.maxLookahead;g++)h.push(this.LA(g));const m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:h,previous:this.LA(0),customUserDescription:s,ruleName:a});throw this.SAVE_ERROR(new sR(m,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const s=this.getCurrRuleFullName(),a=this.getGAstProductions()[s],l=tf(e,a,this.maxLookahead),c=[];for(let m=1;m<=this.maxLookahead;m++)c.push(this.LA(m));const f=this.LA(0),h=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:l,actual:c,previous:f,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new rR(h,this.LA(1),f))}}class RR{initContentAssist(){}computeContentAssist(e,t){const s=this.gastProductionsCache[e];if(Ln(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return $g([s],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=an(e.ruleStack),a=this.getGAstProductions()[t];return new O1(a,e).startWalking()}}const Va={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Va);const km=!0,xm=Math.pow(2,cr)-1,tv=pe({name:"RECORDING_PHASE_TOKEN",pattern:dt.NA});Ms([tv]);const nv=ef(tv,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(nv);const NR={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class OR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(s,a){return this.consumeInternalRecord(s,e,a)},this[`SUBRULE${t}`]=function(s,a){return this.subruleInternalRecord(s,e,a)},this[`OPTION${t}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${t}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${t}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${t}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${t}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${t}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,t,s){return this.consumeInternalRecord(t,e,s)},this.subrule=function(e,t,s){return this.subruleInternalRecord(t,e,s)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const s=t>0?t:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return xa}topLevelRuleRecord(e,t){try{const s=new Ei({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),t.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,t){return fs.call(this,Tt,e,t)}atLeastOneInternalRecord(e,t){fs.call(this,kn,t,e)}atLeastOneSepFirstInternalRecord(e,t){fs.call(this,xn,t,e,km)}manyInternalRecord(e,t){fs.call(this,Qe,t,e)}manySepFirstInternalRecord(e,t){fs.call(this,un,t,e,km)}orInternalRecord(e,t){return IR.call(this,e,t)}subruleInternalRecord(e,t,s){if(ka(t),!e||se(e,"ruleName")===!1){const f=new Error(`<SUBRULE${Am(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw f.KNOWN_RECORDER_ERROR=!0,f}const a=Ir(this.recordingProdStack),l=e.ruleName,c=new Mt({idx:t,nonTerminalName:l,label:s?.LABEL,referencedRule:void 0});return a.definition.push(c),this.outputCst?NR:Va}consumeInternalRecord(e,t,s){if(ka(t),!Mg(e)){const c=new Error(`<CONSUME${Am(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const a=Ir(this.recordingProdStack),l=new Fe({idx:t,terminalType:e,label:s?.LABEL});return a.definition.push(l),nv}}function fs(r,e,t,s=!1){ka(t);const a=Ir(this.recordingProdStack),l=Mn(e)?e:e.DEF,c=new r({definition:[],idx:t});return s&&(c.separator=e.SEP),se(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(c),l.call(this),a.definition.push(c),this.recordingProdStack.pop(),Va}function IR(r,e){ka(e);const t=Ir(this.recordingProdStack),s=Te(r)===!1,a=s===!1?r:r.DEF,l=new cn({definition:[],idx:e,ignoreAmbiguities:s&&r.IGNORE_AMBIGUITIES===!0});se(r,"MAX_LOOKAHEAD")&&(l.maxLookahead=r.MAX_LOOKAHEAD);const c=xg(a,f=>Mn(f.GATE));return l.hasPredicates=c,t.definition.push(l),ae(a,f=>{const h=new xt({definition:[]});l.definition.push(h),se(f,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=f.IGNORE_AMBIGUITIES:se(f,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),f.ALT.call(this),this.recordingProdStack.pop()}),Va}function Am(r){return r===0?"":`${r}`}function ka(r){if(r<0||r>xm){const e=new Error(`Invalid DSL Method idx value: <${r}>
	Idx value must be a none negative value smaller than ${xm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class _R{initPerformanceTracer(e){if(se(e,"traceInitPerf")){const t=e.traceInitPerf,s=typeof t=="number";this.traceInitMaxIdent=s?t:1/0,this.traceInitPerf=s?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=bn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:a,value:l}=wg(t),c=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${e}> time: ${a}ms`),this.traceInitIndent--,l}else return t()}}function PR(r,e){e.forEach(t=>{const s=t.prototype;Object.getOwnPropertyNames(s).forEach(a=>{if(a==="constructor")return;const l=Object.getOwnPropertyDescriptor(s,a);l&&(l.get||l.set)?Object.defineProperty(r.prototype,a,l):r.prototype[a]=t.prototype[a]})})}const xa=ef(Pr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(xa);const bn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Fg,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Aa=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ht;(function(r){r[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",r[r.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));class js{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Cg(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,a=>{const c=this[a].originalGrammarAction;let f;this.TRACE_INIT(`${a} Rule`,()=>{f=this.topLevelRuleRecord(a,c)}),this.gastProductionsCache[a]=f})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=tR({rules:Xe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ne(s)&&this.skipValidations===!1){const a=nR({rules:Xe(this.gastProductionsCache),tokenTypes:Xe(this.tokensMap),errMsgProvider:Cr,grammarName:t}),l=D1({lookaheadStrategy:this.lookaheadStrategy,rules:Xe(this.gastProductionsCache),tokenTypes:Xe(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(a,l)}}),Ne(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const a=PC(Xe(this.gastProductionsCache));this.resyncFollows=a}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var a,l;(l=(a=this.lookaheadStrategy).initialize)===null||l===void 0||l.call(a,{rules:Xe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Xe(this.gastProductionsCache))})),!js.DEFER_DEFINITION_ERRORS_HANDLING&&!Ne(this.definitionErrors))throw e=ee(this.definitionErrors,a=>a.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(t),s.initLexerAdapter(),s.initLooksAhead(t),s.initRecognizerEngine(e,t),s.initRecoverable(t),s.initTreeBuilder(t),s.initContentAssist(),s.initGastRecorder(t),s.initPerformanceTracer(t),se(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=se(t,"skipValidations")?t.skipValidations:bn.skipValidations}}js.DEFER_DEFINITION_ERRORS_HANDLING=!1;PR(js,[aR,fR,kR,xR,wR,AR,CR,RR,OR,_R]);class LR extends js{constructor(e,t=bn){const s=st(t);s.outputCst=!0,super(e,s)}}const bR=pe({name:"WhiteSpace",pattern:/[ \t\r\n]+/,group:dt.SKIPPED}),MR=pe({name:"LineComment",pattern:/#[^\n\r]*/,group:dt.SKIPPED}),kc=pe({name:"TextBlock",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),rv=pe({name:"PathReference",pattern:/@[a-zA-Z_][a-zA-Z0-9_-]*\/[a-zA-Z0-9_/-]*(?:@\d+\.\d+\.\d+)?/}),iv=pe({name:"RelativePath",pattern:/\.\/[a-zA-Z0-9_/-]+|\.\.\/[a-zA-Z0-9_/-]+/}),je=pe({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),sv=pe({name:"Meta",pattern:/meta/,longer_alt:je}),ov=pe({name:"Inherit",pattern:/inherit/,longer_alt:je}),av=pe({name:"Use",pattern:/use/,longer_alt:je}),lv=pe({name:"As",pattern:/as/,longer_alt:je}),uv=pe({name:"Extend",pattern:/extend/,longer_alt:je}),cv=pe({name:"True",pattern:/true/,longer_alt:je}),fv=pe({name:"False",pattern:/false/,longer_alt:je}),dv=pe({name:"Null",pattern:/null/,longer_alt:je}),hv=pe({name:"Range",pattern:/range/,longer_alt:je}),pv=pe({name:"Enum",pattern:/enum/,longer_alt:je}),xc=pe({name:"StringType",pattern:/string/,longer_alt:je}),Ac=pe({name:"NumberType",pattern:/number/,longer_alt:je}),wc=pe({name:"BooleanType",pattern:/boolean/,longer_alt:je}),mv=pe({name:"TemplateOpen",pattern:/\{\{/}),gv=pe({name:"TemplateClose",pattern:/\}\}/}),li=pe({name:"At",pattern:/@/}),ui=pe({name:"LBrace",pattern:/\{/}),ci=pe({name:"RBrace",pattern:/\}/}),vv=pe({name:"LBracket",pattern:/\[/}),yv=pe({name:"RBracket",pattern:/\]/}),la=pe({name:"LParen",pattern:/\(/}),ua=pe({name:"RParen",pattern:/\)/}),ca=pe({name:"Colon",pattern:/:/}),fi=pe({name:"Comma",pattern:/,/}),Cc=pe({name:"Equals",pattern:/=/}),Rc=pe({name:"Question",pattern:/\?/}),Ev=pe({name:"DotDot",pattern:/\.\./}),Sv=pe({name:"Dot",pattern:/\./}),Tv=pe({name:"Dash",pattern:/-(?!\d)/}),di=pe({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),fa=pe({name:"NumberLiteral",pattern:/-?\d+(?:\.\d+)?/}),kv=[bR,MR,kc,rv,iv,mv,gv,Ev,sv,ov,av,lv,uv,cv,fv,dv,hv,pv,xc,Ac,wc,li,ui,ci,vv,yv,la,ua,ca,fi,Cc,Rc,Sv,Tv,di,fa,je],jR=new dt(kv,{ensureOptimizations:!0,positionTracking:"full"});class FR extends LR{constructor(){super(kv,{recoveryEnabled:!0,maxLookahead:3,nodeLocationTracking:"full"}),this.performSelfAnalysis()}program=this.RULE("program",()=>{this.OPTION(()=>this.SUBRULE(this.metaBlock)),this.OPTION2(()=>this.SUBRULE(this.inheritDecl)),this.MANY(()=>this.SUBRULE(this.useDecl)),this.MANY2(()=>this.OR([{ALT:()=>this.SUBRULE(this.extendBlock)},{ALT:()=>this.SUBRULE(this.block)}]))});metaBlock=this.RULE("metaBlock",()=>{this.CONSUME(li),this.CONSUME(sv),this.CONSUME(ui),this.MANY(()=>this.SUBRULE(this.field)),this.CONSUME(ci)});inheritDecl=this.RULE("inheritDecl",()=>{this.CONSUME(li),this.CONSUME(ov),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList))});useDecl=this.RULE("useDecl",()=>{this.CONSUME(li),this.CONSUME(av),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList)),this.OPTION2(()=>{this.CONSUME(lv),this.CONSUME(je)})});block=this.RULE("block",()=>{this.CONSUME(li),this.CONSUME(je),this.CONSUME(ui),this.SUBRULE(this.blockContent),this.CONSUME(ci)});extendBlock=this.RULE("extendBlock",()=>{this.CONSUME(li),this.CONSUME(uv),this.SUBRULE(this.dotPath),this.CONSUME(ui),this.SUBRULE(this.blockContent),this.CONSUME(ci)});blockContent=this.RULE("blockContent",()=>{this.MANY(()=>this.OR([{ALT:()=>this.CONSUME(kc)},{ALT:()=>this.SUBRULE(this.restrictionItem)},{ALT:()=>this.SUBRULE(this.field)}]))});restrictionItem=this.RULE("restrictionItem",()=>{this.CONSUME(Tv),this.CONSUME(di)});field=this.RULE("field",()=>{this.OR([{ALT:()=>this.CONSUME(je)},{ALT:()=>this.CONSUME(di)},{ALT:()=>this.CONSUME(xc)},{ALT:()=>this.CONSUME(Ac)},{ALT:()=>this.CONSUME(wc)}]),this.OPTION(()=>this.CONSUME(Rc)),this.CONSUME(ca),this.SUBRULE(this.value),this.OPTION2(()=>{this.CONSUME(Cc),this.SUBRULE2(this.value)})});value=this.RULE("value",()=>{this.OR([{ALT:()=>this.CONSUME(di)},{ALT:()=>this.CONSUME(fa)},{ALT:()=>this.CONSUME(cv)},{ALT:()=>this.CONSUME(fv)},{ALT:()=>this.CONSUME(dv)},{ALT:()=>this.CONSUME(kc)},{ALT:()=>this.SUBRULE(this.array)},{ALT:()=>this.SUBRULE(this.paramDefList),GATE:()=>this.isParamDefListAhead()},{ALT:()=>this.SUBRULE(this.object)},{ALT:()=>this.SUBRULE(this.typeExpr)},{ALT:()=>this.SUBRULE(this.templateExpr)},{ALT:()=>this.CONSUME(je)}])});isParamDefListAhead(){const e=this.LA(1);if(!e||e.tokenType?.name!=="LBrace")return!1;const t=this.LA(2);if(!t||t.tokenType?.name!=="Identifier")return!1;const s=this.LA(3);if(!s)return!1;if(s.tokenType?.name==="Colon"){const a=this.LA(4);return a?["StringType","NumberType","BooleanType","Enum"].includes(a.tokenType?.name??""):!1}if(s.tokenType?.name==="Question"){const a=this.LA(4);if(!a||a.tokenType?.name!=="Colon")return!1;const l=this.LA(5);return l?["StringType","NumberType","BooleanType","Enum"].includes(l.tokenType?.name??""):!1}return!1}array=this.RULE("array",()=>{this.CONSUME(vv),this.OPTION(()=>{this.SUBRULE(this.value),this.MANY(()=>{this.CONSUME(fi),this.OPTION2(()=>this.SUBRULE2(this.value))})}),this.CONSUME(yv)});object=this.RULE("object",()=>{this.CONSUME(ui),this.MANY(()=>{this.SUBRULE(this.field),this.OPTION(()=>this.CONSUME(fi))}),this.CONSUME(ci)});typeExpr=this.RULE("typeExpr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.rangeType)},{ALT:()=>this.SUBRULE(this.enumType)}])});rangeType=this.RULE("rangeType",()=>{this.CONSUME(hv),this.CONSUME(la),this.CONSUME(fa),this.CONSUME(Ev),this.CONSUME2(fa),this.CONSUME(ua)});enumType=this.RULE("enumType",()=>{this.CONSUME(pv),this.CONSUME(la),this.CONSUME(di),this.MANY(()=>{this.CONSUME(fi),this.CONSUME2(di)}),this.CONSUME(ua)});pathRef=this.RULE("pathRef",()=>{this.OR([{ALT:()=>this.CONSUME(rv)},{ALT:()=>this.CONSUME(iv)}])});dotPath=this.RULE("dotPath",()=>{this.CONSUME(je),this.MANY(()=>{this.CONSUME(Sv),this.CONSUME2(je)})});paramCallList=this.RULE("paramCallList",()=>{this.CONSUME(la),this.OPTION(()=>{this.SUBRULE(this.paramArg),this.MANY(()=>{this.CONSUME(fi),this.SUBRULE2(this.paramArg)})}),this.CONSUME(ua)});paramArg=this.RULE("paramArg",()=>{this.CONSUME(je),this.CONSUME(ca),this.SUBRULE(this.value)});paramDefList=this.RULE("paramDefList",()=>{this.CONSUME(ui),this.MANY(()=>{this.SUBRULE(this.paramDef),this.OPTION(()=>this.CONSUME(fi))}),this.CONSUME(ci)});paramDef=this.RULE("paramDef",()=>{this.CONSUME(je),this.OPTION(()=>this.CONSUME(Rc)),this.CONSUME(ca),this.SUBRULE(this.paramType),this.OPTION2(()=>{this.CONSUME(Cc),this.SUBRULE(this.value)})});paramType=this.RULE("paramType",()=>{this.OR([{ALT:()=>this.CONSUME(xc)},{ALT:()=>this.CONSUME(Ac)},{ALT:()=>this.CONSUME(wc)},{ALT:()=>this.SUBRULE(this.enumType)}])});templateExpr=this.RULE("templateExpr",()=>{this.CONSUME(mv),this.CONSUME(je),this.CONSUME(gv)})}const da=new FR;var $R={};const UR=da.getBaseCstVisitorConstructor(),wm=r=>$R[r];class DR extends UR{filename="<unknown>";interpolateEnv=!1;envProvider=wm;constructor(){super(),this.validateVisitor()}setFilename(e){this.filename=e}setInterpolateEnv(e){this.interpolateEnv=e}setEnvProvider(e){this.envProvider=e}resetEnvProvider(){this.envProvider=wm}loc(e){return{file:this.filename,line:e.startLine,column:e.startColumn,offset:e.startOffset}}program(e,t="<unknown>"){this.filename=t;const s={type:"Program",uses:[],blocks:[],extends:[],loc:{file:this.filename,line:1,column:1}};return e.metaBlock&&(s.meta=this.visit(e.metaBlock[0])),e.inheritDecl&&(s.inherit=this.visit(e.inheritDecl[0])),e.useDecl&&(s.uses=e.useDecl.map(a=>this.visit(a))),e.block&&(s.blocks=e.block.map(a=>this.visit(a))),e.extendBlock&&(s.extends=e.extendBlock.map(a=>this.visit(a))),s}metaBlock(e){const t={};let s;if(e.field)for(const l of e.field){const{name:c,value:f,isParamsDef:h,paramsDefs:m}=this.visit(l);h&&m?s=m:t[c]=f}const a={type:"MetaBlock",fields:t,loc:this.loc(e.At[0])};return s&&(a.params=s),a}inheritDecl(e){const t={type:"InheritDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),t}useDecl(e){const t={type:"UseDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),e.Identifier&&(t.alias=e.Identifier[0].image),t}block(e){const t=e.Identifier[0].image,s=this.visit(e.blockContent[0]);return{type:"Block",name:t,content:s,loc:this.loc(e.At[0])}}extendBlock(e){const t=this.visit(e.dotPath[0]),s=this.visit(e.blockContent[0]);return{type:"ExtendBlock",targetPath:t,content:s,loc:this.loc(e.At[0])}}blockContent(e){const t=e.TextBlock?.length>0,s=e.field?.length>0;if(e.restrictionItem?.length>0)return this.buildRestrictionContent(e);const l=t?this.buildTextContent(e.TextBlock[0]):void 0,c=s?this.buildProperties(e.field):{};return this.resolveBlockContent(l,c,t,s)}buildRestrictionContent(e){const t=[];for(const s of e.restrictionItem)t.push(this.visit(s));return{type:"ObjectContent",properties:{items:t},loc:{file:this.filename,line:1,column:1}}}buildTextContent(e){let s=e.image.slice(3,-3).trim();return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),{type:"TextContent",value:s,loc:this.loc(e)}}buildProperties(e){const t={};for(const s of e){const{name:a,value:l}=this.visit(s);t[a]=l}return t}resolveBlockContent(e,t,s,a){return s&&!a?e:!s&&a?{type:"ObjectContent",properties:t,loc:{file:this.filename,line:1,column:1}}:s&&a?{type:"MixedContent",text:e,properties:t,loc:{file:this.filename,line:1,column:1}}:{type:"ObjectContent",properties:{},loc:{file:this.filename,line:1,column:1}}}restrictionItem(e){const t=e.StringLiteral[0];return this.parseStringLiteral(t.image)}field(e){let t;if(e.Identifier)t=e.Identifier[0].image;else if(e.StringLiteral)t=this.parseStringLiteral(e.StringLiteral[0].image);else if(e.StringType)t="string";else if(e.NumberType)t="number";else if(e.BooleanType)t="boolean";else throw new Error("Unknown field key type");const s=e.Question?!0:void 0,a=e.value,l=this.visit(a[0]),c=a.length>1?this.visit(a[1]):void 0;return t==="params"&&Array.isArray(l)&&l.length>0&&l[0]?.type==="ParamDefinition"?{name:t,value:{},isParamsDef:!0,paramsDefs:l}:{name:t,value:l,optional:s,defaultValue:c}}value(e){if(e.StringLiteral)return this.parseStringLiteral(e.StringLiteral[0].image);if(e.NumberLiteral)return parseFloat(e.NumberLiteral[0].image);if(e.True)return!0;if(e.False)return!1;if(e.Null)return null;if(e.TextBlock){const t=e.TextBlock[0];let a=t.image.slice(3,-3).trim();return this.interpolateEnv&&(a=this.interpolateEnvVars(a)),{type:"TextContent",value:a,loc:this.loc(t)}}if(e.array)return this.visit(e.array[0]);if(e.paramDefList)return this.visit(e.paramDefList[0]);if(e.object)return this.visit(e.object[0]);if(e.typeExpr)return this.visit(e.typeExpr[0]);if(e.templateExpr)return this.visit(e.templateExpr[0]);if(e.Identifier)return e.Identifier[0].image;throw new Error("Unknown value type")}array(e){return e.value?e.value.map(t=>this.visit(t)):[]}object(e){const t={};if(e.field)for(const s of e.field){const{name:a,value:l}=this.visit(s);t[a]=l}return t}typeExpr(e){return e.rangeType?this.visit(e.rangeType[0]):this.visit(e.enumType[0])}rangeType(e){const[t,s]=e.NumberLiteral,a=parseFloat(t.image),l=parseFloat(s.image);return{type:"TypeExpression",kind:"range",constraints:{min:a,max:l},loc:this.loc(e.Range[0])}}enumType(e){return{type:"TypeExpression",kind:"enum",constraints:{options:e.StringLiteral.map(s=>this.parseStringLiteral(s.image))},loc:this.loc(e.Enum[0])}}pathRef(e){return e.PathReference?this.parsePathReference(e.PathReference[0]):this.parseRelativePath(e.RelativePath[0])}dotPath(e){return e.Identifier.map(t=>t.image).join(".")}paramCallList(e){return e.paramArg?e.paramArg.map(t=>this.visit(t)):[]}paramArg(e){return{type:"ParamArgument",name:e.Identifier[0].image,value:this.visit(e.value[0]),loc:this.loc(e.Identifier[0])}}paramDefList(e){return e.paramDef?e.paramDef.map(t=>this.visit(t)):[]}paramDef(e){const t=e.Identifier[0].image,s=e.Question!==void 0,a=this.visit(e.paramType[0]),l=e.value?this.visit(e.value[0]):void 0;return{type:"ParamDefinition",name:t,paramType:a,optional:s||l!==void 0,defaultValue:l,loc:this.loc(e.Identifier[0])}}paramType(e){if(e.StringType)return{kind:"string"};if(e.NumberType)return{kind:"number"};if(e.BooleanType)return{kind:"boolean"};if(e.enumType)return{kind:"enum",options:this.visit(e.enumType[0]).constraints?.options??[]};throw new Error("Unknown param type")}templateExpr(e){return{type:"TemplateExpression",name:e.Identifier[0].image,loc:this.loc(e.TemplateOpen[0])}}parseStringLiteral(e){let s=e.slice(1,-1).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),s}interpolateEnvVars(e){const t=/\$\{([A-Za-z_]\w*)(?::-([^}]*))?\}/g;return e.replace(t,(s,a,l)=>{const c=this.envProvider(a);return c!==void 0?c:l!==void 0?l:(console.warn(`Warning: Environment variable '${a}' is not set, using empty string`),"")})}parsePathReference(e){const t=e.image,s=t.slice(1);let a,l=s;const c=s.match(/@(\d+\.\d+\.\d+)$/);c&&(a=c[1],l=s.slice(0,-c[0].length));const f=l.split("/"),h=f[0];return{type:"PathReference",raw:t,namespace:h,segments:f.slice(1),version:a,isRelative:!1,loc:this.loc(e)}}parseRelativePath(e){const t=e.image,s=t.split("/").filter(a=>a!=="."&&a!=="..");return{type:"PathReference",raw:t,segments:s,isRelative:!0,loc:this.loc(e)}}}const ea=new DR,xv={name:"xml",description:"XML-style tags for section structure",section:{start:"<{{name}}>",end:"</{{name}}>",nameTransform:"kebab-case",indent:"  "},subsection:{start:"  <{{name}}>",end:"  </{{name}}>",nameTransform:"kebab-case",indent:"  "},listStyle:"dash",codeBlockDelimiter:"```"},BR={name:"markdown",description:"Markdown headers for section structure",section:{start:"## {{name}}",end:"",nameTransform:"none",indent:""},subsection:{start:"### {{name}}",end:"",nameTransform:"none",indent:""},listStyle:"dash",codeBlockDelimiter:"```"},sf={xml:xv,markdown:BR};function zR(r){return r in sf}const Av={proseWrap:"preserve",tabWidth:2,printWidth:80};var fr=(r=>(r.PARSE_ERROR="PS1000",r.UNEXPECTED_TOKEN="PS1001",r.UNTERMINATED_STRING="PS1002",r.INVALID_PATH="PS1003",r.RESOLVE_ERROR="PS2000",r.FILE_NOT_FOUND="PS2001",r.CIRCULAR_DEPENDENCY="PS2002",r.INVALID_INHERIT="PS2003",r.GIT_CLONE_ERROR="PS2004",r.GIT_AUTH_ERROR="PS2005",r.GIT_REF_NOT_FOUND="PS2006",r.MISSING_PARAM="PS2010",r.UNKNOWN_PARAM="PS2011",r.PARAM_TYPE_MISMATCH="PS2012",r.UNDEFINED_VARIABLE="PS2013",r.VALIDATION_ERROR="PS3000",r.REQUIRED_FIELD="PS3001",r.INVALID_VALUE="PS3002",r.BLOCKED_PATTERN="PS3003",r.MISSING_GUARD="PS3004",r))(fr||{});class Ti extends Error{code;location;cause;constructor(e,t,s){super(e),this.name="PSError",this.code=t,this.location=s?.location,this.cause=s?.cause,Error.captureStackTrace?.(this,this.constructor)}format(){let e=`${this.name} [${this.code}]: ${this.message}`;return this.location&&(e+=`
  at ${this.location.file}:${this.location.line}:${this.location.column}`),e}toJSON(){return{name:this.name,code:this.code,message:this.message,location:this.location}}}class oc extends Ti{constructor(e,t,s=fr.PARSE_ERROR){super(e,s,{location:t}),this.name="ParseError"}}class rr extends Ti{constructor(e,t,s=fr.RESOLVE_ERROR){super(e,s,{location:t}),this.name="ResolveError"}}class ac extends rr{chain;constructor(e){super(`Circular dependency detected: ${e.join("  ")}`,void 0,fr.CIRCULAR_DEPENDENCY),this.name="CircularDependencyError",this.chain=e}}class VR extends Ti{paramName;templatePath;constructor(e,t,s){super(`Missing required parameter '${e}' for template '${t}'`,fr.MISSING_PARAM,s),this.name="MissingParamError",this.paramName=e,this.templatePath=t}}class Cm extends Ti{paramName;templatePath;availableParams;constructor(e,t,s,a){const l=s.length>0?`. Available parameters: ${s.join(", ")}`:". This template has no parameters.";super(`Unknown parameter '${e}' for template '${t}'${l}`,fr.UNKNOWN_PARAM,a),this.name="UnknownParamError",this.paramName=e,this.templatePath=t,this.availableParams=s}}class ta extends Ti{paramName;expectedType;actualType;constructor(e,t,s,a){super(`Type mismatch for parameter '${e}': expected ${t}, got ${s}`,fr.PARAM_TYPE_MISMATCH,a),this.name="ParamTypeMismatchError",this.paramName=e,this.expectedType=t,this.actualType=s}}class wv extends Ti{variableName;sourceFile;constructor(e,t,s){super(`Undefined template variable '{{${e}}}' in '${t}'`,fr.UNDEFINED_VARIABLE,s),this.name="UndefinedVariableError",this.variableName=e,this.sourceFile=t}}const WR={arrayStrategy:"unique",textStrategy:"concat",textSeparator:`

`};function ir(r,e,t={}){const s={...WR,...t},a={...r};for(const l of Object.keys(e)){const c=e[l];c!==void 0&&(a[l]=GR(r[l],c,s))}return a}function GR(r,e,t){return e===null?null:Array.isArray(e)?KR(Array.isArray(r)?r:[],e,t.arrayStrategy):Ts(e)?YR(Ts(r)?r:void 0,e,t):Rm(e)&&Rm(r)?ir(r,e,t):e}function KR(r,e,t){switch(t){case"replace":return[...e];case"concat":return[...r,...e];case"unique":return HR([...r,...e])}}function HR(r){const e=new Set,t=[];for(const s of r){const a=typeof s=="object"?JSON.stringify(s):String(s);e.has(a)||(e.add(a),t.push(s))}return t}function YR(r,e,t){if(!r)return e;switch(t.textStrategy){case"replace":return e;case"concat":return{...e,value:`${r.value}${t.textSeparator}${e.value}`};case"prepend":return{...e,value:`${e.value}${t.textSeparator}${r.value}`}}}function Ts(r){return typeof r=="object"&&r!==null&&"type"in r&&r.type==="TextContent"}function Rm(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.getPrototypeOf(r)===Object.prototype}function Ot(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(Ot);const e={};for(const[t,s]of Object.entries(r))e[t]=Ot(s);return e}var lc,Nm;function qR(){if(Nm)return lc;Nm=1;function r(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function e(a,l){for(var c="",f=0,h=-1,m=0,g,y=0;y<=a.length;++y){if(y<a.length)g=a.charCodeAt(y);else{if(g===47)break;g=47}if(g===47){if(!(h===y-1||m===1))if(h!==y-1&&m===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var E=c.lastIndexOf("/");if(E!==c.length-1){E===-1?(c="",f=0):(c=c.slice(0,E),f=c.length-1-c.lastIndexOf("/")),h=y,m=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=y,m=0;continue}}l&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+a.slice(h+1,y):c=a.slice(h+1,y),f=y-h-1;h=y,m=0}else g===46&&m!==-1?++m:m=-1}return c}function t(a,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+a+f:f}var s={resolve:function(){for(var l="",c=!1,f,h=arguments.length-1;h>=-1&&!c;h--){var m;h>=0?m=arguments[h]:(f===void 0&&(f=process.cwd()),m=f),r(m),m.length!==0&&(l=m+"/"+l,c=m.charCodeAt(0)===47)}return l=e(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(l){if(r(l),l.length===0)return".";var c=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return l=e(l,!c),l.length===0&&!c&&(l="."),l.length>0&&f&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var f=arguments[c];r(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":s.normalize(l)},relative:function(l,c){if(r(l),r(c),l===c||(l=s.resolve(l),c=s.resolve(c),l===c))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var h=l.length,m=h-f,g=1;g<c.length&&c.charCodeAt(g)===47;++g);for(var y=c.length,E=y-g,k=m<E?m:E,w=-1,R=0;R<=k;++R){if(R===k){if(E>k){if(c.charCodeAt(g+R)===47)return c.slice(g+R+1);if(R===0)return c.slice(g+R)}else m>k&&(l.charCodeAt(f+R)===47?w=R:R===0&&(w=0));break}var j=l.charCodeAt(f+R),M=c.charCodeAt(g+R);if(j!==M)break;j===47&&(w=R)}var _="";for(R=f+w+1;R<=h;++R)(R===h||l.charCodeAt(R)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(g+w):(g+=w,c.charCodeAt(g)===47&&++g,c.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var c=l.charCodeAt(0),f=c===47,h=-1,m=!0,g=l.length-1;g>=1;--g)if(c=l.charCodeAt(g),c===47){if(!m){h=g;break}}else m=!1;return h===-1?f?"/":".":f&&h===1?"//":l.slice(0,h)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');r(l);var f=0,h=-1,m=!0,g;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var y=c.length-1,E=-1;for(g=l.length-1;g>=0;--g){var k=l.charCodeAt(g);if(k===47){if(!m){f=g+1;break}}else E===-1&&(m=!1,E=g+1),y>=0&&(k===c.charCodeAt(y)?--y===-1&&(h=g):(y=-1,h=E))}return f===h?h=E:h===-1&&(h=l.length),l.slice(f,h)}else{for(g=l.length-1;g>=0;--g)if(l.charCodeAt(g)===47){if(!m){f=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":l.slice(f,h)}},extname:function(l){r(l);for(var c=-1,f=0,h=-1,m=!0,g=0,y=l.length-1;y>=0;--y){var E=l.charCodeAt(y);if(E===47){if(!m){f=y+1;break}continue}h===-1&&(m=!1,h=y+1),E===46?c===-1?c=y:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===f+1?"":l.slice(c,h)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return t("/",l)},parse:function(l){r(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var f=l.charCodeAt(0),h=f===47,m;h?(c.root="/",m=1):m=0;for(var g=-1,y=0,E=-1,k=!0,w=l.length-1,R=0;w>=m;--w){if(f=l.charCodeAt(w),f===47){if(!k){y=w+1;break}continue}E===-1&&(k=!1,E=w+1),f===46?g===-1?g=w:R!==1&&(R=1):g!==-1&&(R=-1)}return g===-1||E===-1||R===0||R===1&&g===E-1&&g===y+1?E!==-1&&(y===0&&h?c.base=c.name=l.slice(1,E):c.base=c.name=l.slice(y,E)):(y===0&&h?(c.name=l.slice(1,g),c.base=l.slice(1,E)):(c.name=l.slice(y,g),c.base=l.slice(y,E)),c.ext=l.slice(g,E)),y>0?c.dir=l.slice(0,y-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,lc=s,lc}qR();const of={verbose:()=>{},debug:()=>{}};function XR(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function QR(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template"}return"object"}function ZR(r,e,t,s){const a=QR(e),l=XR(t);switch(t.kind){case"string":if(a!=="string")throw new ta(r,l,a,{location:s});break;case"number":if(a!=="number")throw new ta(r,l,a,{location:s});break;case"boolean":if(a!=="boolean")throw new ta(r,l,a,{location:s});break;case"enum":if(a!=="string"||!t.options.includes(e))throw new ta(r,l,String(e),{location:s});break}}function Om(r,e,t,s){const a=new Map;if(!e||e.length===0){if(r&&r.length>0&&r[0]!==void 0)throw new Cm(r[0].name,t,[],{location:s});return a}const l=new Map;for(const f of e)l.set(f.name,f);const c=new Set;if(r)for(const f of r){const h=l.get(f.name);if(!h)throw new Cm(f.name,t,e.map(m=>m.name),{location:f.loc});ZR(f.name,f.value,h.paramType,f.loc),a.set(f.name,f.value),c.add(f.name)}for(const f of e)if(!c.has(f.name)){if(f.defaultValue!==void 0)a.set(f.name,f.defaultValue);else if(!f.optional)throw new VR(f.name,t,{location:s})}return a}function JR(r){return r===null?"null":typeof r=="string"?r:typeof r=="number"||typeof r=="boolean"?String(r):Array.isArray(r)?JSON.stringify(r):typeof r=="object"&&"type"in r&&r.type==="TextContent"?r.value:JSON.stringify(r)}function Nc(r,e){const t=/\{\{([a-zA-Z_][a-zA-Z0-9_]*)\}\}/g;return r.replace(t,(s,a)=>{const l=e.params.get(a);if(l===void 0)throw new wv(a,e.sourceFile);return JR(l)})}function wa(r,e){if(r===null||typeof r=="string"||typeof r=="number"||typeof r=="boolean")return r;if(Array.isArray(r))return r.map(t=>wa(t,e));if(typeof r=="object"&&"type"in r){const t=r;if(t.type==="TemplateExpression"){const s=r,a=e.params.get(s.name);if(a===void 0)throw new wv(s.name,e.sourceFile,{location:s.loc});return a}if(t.type==="TextContent"){const s=r;return{...s,value:Nc(s.value,e)}}if(t.type==="TypeExpression")return r}if(typeof r=="object"){const t={};for(const[s,a]of Object.entries(r))t[s]=wa(a,e);return t}return r}function Cv(r,e){switch(r.type){case"TextContent":return{...r,value:Nc(r.value,e)};case"ObjectContent":return{...r,properties:Oc(r.properties,e)};case"ArrayContent":return{...r,elements:r.elements.map(t=>wa(t,e))};case"MixedContent":return{...r,text:r.text?{...r.text,value:Nc(r.text.value,e)}:void 0,properties:Oc(r.properties,e)}}}function Oc(r,e){const t={};for(const[s,a]of Object.entries(r))t[s]=wa(a,e);return t}function eN(r,e){return{...r,content:Cv(r.content,e)}}function Im(r,e){return e.params.size===0?r:{...r,meta:r.meta?{...r.meta,fields:Oc(r.meta.fields,e)}:void 0,blocks:r.blocks.map(t=>eN(t,e)),extends:r.extends.map(t=>({...t,content:Cv(t.content,e)}))}}function tN(r,e={}){const{filename:t="<unknown>",tolerant:s=!1,recovery:a=!1,interpolateEnv:l=!1,envProvider:c}=e,f=s||a,h=[],m=jR.tokenize(r);for(const y of m.errors)h.push(new oc(`Lexer: ${y.message}`,{file:t,line:y.line,column:y.column}));if(h.length>0&&!f)return{ast:null,errors:h};da.input=m.tokens;const g=da.program();for(const y of da.errors)h.push(new oc(y.message,{file:t,line:y.token.startLine,column:y.token.startColumn}));if(h.length>0&&!f)return{ast:null,errors:h};try{return ea.setInterpolateEnv(l),c?ea.setEnvProvider(c):ea.resetEnvProvider(),{ast:ea.visit(g,t),errors:h}}catch(y){return h.push(new oc(`AST transformation: ${y.message}`,{file:t,line:1,column:1})),{ast:null,errors:h}}}const ds="__import__";class nN{fs;cache;resolving;cacheEnabled;logger;envVars;constructor(e){this.fs=e.fs,this.cache=new Map,this.resolving=new Set,this.cacheEnabled=e.cache!==!1,this.logger=e.logger??of,this.envVars=e.envVars}async resolve(e){const t=this.normalizePath(e);if(this.resolving.has(t))throw this.logger.debug(`Circular dependency detected: ${t}`),new ac([...this.resolving,t]);if(this.cacheEnabled&&this.cache.has(t))return this.logger.debug(`Cache hit: ${t}`),this.cache.get(t);this.resolving.add(t),this.logger.verbose(`Parsing ${t}`);try{const s=await this.doResolve(t);return this.cacheEnabled&&(this.logger.debug(`Cache store: ${t}`),this.cache.set(t,s)),s}finally{this.resolving.delete(t)}}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith(".prs")||(t=`${t}.prs`),t}resolveRef(e,t){if(e.isRelative){const s=this.dirname(t);return this.normalizePath(this.joinPath(s,e.raw))}if(e.raw.startsWith("@")){const s=e.raw.match(/^@([a-zA-Z_][a-zA-Z0-9_-]*)\/(.+?)(?:@[\d.]+)?$/);if(s&&s[1]&&s[2]){const a=s[1],l=s[2],c=l.endsWith(".prs")?l:`${l}.prs`;return`@${a}/${c}`}}return this.normalizePath(e.raw)}dirname(e){const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}joinPath(...e){const t=[];for(const s of e){if(!s)continue;const a=s.split("/");for(const l of a)l===".."?t.pop():l!=="."&&l!==""&&t.push(l)}return t.join("/")}async doResolve(e){const t=[e],s=[],a=this.loadAndParse(e,t,s);if(!a.ast)return{ast:null,sources:t,errors:s};let l=a.ast;return l=await this.resolveInherit(l,e,t,s),l=await this.resolveImports(l,e,t,s),l.extends.length>0&&this.logger.debug(`Applying ${l.extends.length} extension(s)`),l=this.applyExtends(l),this.logger.debug(`Resolved ${t.length} source file(s)`),{ast:l,sources:[...new Set(t)],errors:s}}loadAndParse(e,t,s){let a;try{a=this.fs.read(e)}catch{return s.push(new rr(`File not found: ${e}`)),{ast:null}}const l={filename:e};this.envVars&&Object.keys(this.envVars).length>0&&(l.interpolateEnv=!0,l.envProvider=f=>this.envVars?.[f]);const c=tN(a,l);if(!c.ast){for(const f of c.errors)s.push(new rr(f.message,f.location));return{ast:null}}for(const f of c.errors)s.push(new rr(f.message,f.location));return{ast:c.ast}}async resolveInherit(e,t,s,a){if(!e.inherit)return e;const l=this.resolveRef(e.inherit.path,t);this.logger.verbose(`Resolving inherit: ${e.inherit.path.raw}`),this.logger.verbose(`   ${l}`);try{const c=await this.resolve(l);if(s.push(...c.sources),a.push(...c.errors),c.ast){let f=c.ast;if(c.ast.meta?.params||e.inherit.params){this.logger.debug(`Binding template parameters for ${l}`);try{const h=Om(e.inherit.params,c.ast.meta?.params,l,e.inherit.loc);if(h.size>0){const m={params:h,sourceFile:l};f=Im(c.ast,m),this.logger.debug(`Interpolated ${h.size} parameter(s)`)}}catch(h){return a.push(new rr(h.message,e.inherit.loc)),e}}return this.logger.debug("Merging with parent AST"),this.resolveInheritance(f,e)}}catch(c){if(c instanceof ac)throw c;a.push(new rr(`Failed to resolve parent: ${c.message}`))}return e}async resolveImports(e,t,s,a){let l=e;for(const c of e.uses){const f=this.resolveRef(c.path,t);this.logger.verbose(`Resolving import: ${c.path.raw}`),this.logger.verbose(`   ${f}`);try{const h=await this.resolve(f);if(s.push(...h.sources),a.push(...h.errors),h.ast){let m=h.ast;if(h.ast.meta?.params||c.params){this.logger.debug(`Binding template parameters for ${f}`);try{const g=Om(c.params,h.ast.meta?.params,f,c.loc);if(g.size>0){const y={params:g,sourceFile:f};m=Im(h.ast,y),this.logger.debug(`Interpolated ${g.size} parameter(s)`)}}catch(g){a.push(new rr(g.message,c.loc));continue}}this.logger.debug(`Merging import${c.alias?` as "${c.alias}"`:""}`),l=this.resolveUses(l,c,m)}}catch(h){if(h instanceof ac)throw h;a.push(new rr(`Failed to resolve import: ${h.message}`))}}return l}clearCache(){this.cache.clear()}resolveInheritance(e,t){return{...t,meta:e.meta&&t.meta?{...t.meta,fields:ir(e.meta.fields,t.meta.fields)}:t.meta??e.meta,blocks:this.mergeBlocks(e.blocks,t.blocks),inherit:void 0,uses:t.uses,extends:t.extends}}mergeBlocks(e,t){const s=new Map(t.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=s.get(c.name);f?(a.push(this.mergeBlock(c,f)),l.add(c.name)):a.push(Ot(c))}for(const c of t)l.has(c.name)||a.push(Ot(c));return a}mergeBlock(e,t){return{...t,content:this.mergeBlockContent(e.content,t.content)}}mergeBlockContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return this.mergeTextContent(e,t);case"ObjectContent":return this.mergeObjectContent(e,t);case"ArrayContent":return this.mergeArrayContent(e,t);case"MixedContent":return this.mergeMixedContent(e,t)}return e.type==="MixedContent"&&t.type==="TextContent"?{...e,text:e.text?this.mergeTextContent(e.text,t):Ot(t)}:e.type==="TextContent"&&t.type==="MixedContent"?{...t,text:t.text?this.mergeTextContent(e,t.text):Ot(e)}:e.type==="MixedContent"&&t.type==="ObjectContent"?{...e,properties:ir(e.properties,t.properties)}:e.type==="ObjectContent"&&t.type==="MixedContent"?{...t,properties:ir(e.properties,t.properties)}:Ot(t)}mergeTextContent(e,t){const s=e.value.trim(),a=t.value.trim();return s===a?{...t,value:a}:a.includes(s)?{...t,value:a}:s.includes(a)?{...t,value:s}:{...t,value:`${s}

${a}`}}mergeObjectContent(e,t){return{...t,properties:this.mergeProperties(e.properties,t.properties)}}mergeProperties(e,t){const s={...e};for(const[a,l]of Object.entries(t)){const c=s[a];c===void 0?s[a]=this.deepCloneValue(l):Array.isArray(l)&&Array.isArray(c)?s[a]=this.uniqueConcat(c,l):Ts(l)&&Ts(c)?s[a]=this.deepCloneValue(l):this.isPlainObject(l)&&this.isPlainObject(c)?s[a]=this.mergeProperties(c,l):s[a]=this.deepCloneValue(l)}return s}mergeArrayContent(e,t){return{...t,elements:this.uniqueConcat(e.elements,t.elements)}}mergeMixedContent(e,t){return{...t,text:e.text&&t.text?this.mergeTextContent(e.text,t.text):t.text??e.text,properties:this.mergeProperties(e.properties,t.properties)}}resolveUses(e,t,s){const a=this.mergeBlocksForImport(e.blocks,s.blocks),l=[];if(t.alias){const c=t.alias,h={type:"Block",name:`${ds}${c}`,content:{type:"ObjectContent",properties:{__source:t.path.raw,__blocks:s.blocks.map(m=>m.name)},loc:t.loc},loc:t.loc};l.push(h);for(const m of s.blocks)l.push({...m,name:`${ds}${c}.${m.name}`})}return{...e,blocks:[...a,...l]}}mergeBlocksForImport(e,t){const s=new Map(e.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=t.find(h=>h.name===c.name);f?(a.push(this.mergeBlock(f,c)),l.add(c.name)):a.push(Ot(c))}for(const c of t)!l.has(c.name)&&!s.has(c.name)&&a.push(Ot(c));return a}applyExtends(e){let t=[...e.blocks];for(const s of e.extends)t=this.applyExtend(t,s);return t=t.filter(s=>!s.name.startsWith(ds)),{...e,blocks:t,extends:[]}}applyExtend(e,t){const s=t.targetPath.split("."),a=s[0];let l=a,c=s.slice(1);e.find(y=>y.name===`${ds}${a}`)&&s.length>1&&(l=`${ds}${a}.${s[1]}`,c=s.slice(2));const h=e.findIndex(y=>y.name===l);if(h===-1)return e;const m=e[h];if(!m)return e;const g=this.mergeExtension(m,c,t);return[...e.slice(0,h),g,...e.slice(h+1)]}mergeExtension(e,t,s){return t.length===0?{...e,content:this.mergeExtendContent(e.content,s.content)}:{...e,content:this.mergeAtPath(e.content,t,s.content)}}mergeAtPath(e,t,s){if(t.length===0)return this.mergeExtendContent(e,s);const a=t[0];if(!a)return this.mergeExtendContent(e,s);const l=t.slice(1);if(e.type==="ObjectContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}if(e.type==="MixedContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}return e}mergeAtPathValue(e,t,s){if(t.length===0)return this.mergeExtendValue(e,s);if(typeof e!="object"||e===null||Array.isArray(e))return this.buildPathValue(t,s);const a=t[0];if(!a)return this.mergeExtendValue(e,s);const l=t.slice(1),c=e,f=c[a];return l.length===0?{...c,[a]:this.mergeExtendValue(f,s)}:f&&typeof f=="object"&&!Array.isArray(f)?{...c,[a]:this.mergeAtPathValue(f,l,s)}:{...c,[a]:this.buildPathValue(l,s)}}buildPathValue(e,t){if(e.length===0)return this.extractValue(t);const s={};let a=s;for(let c=0;c<e.length-1;c++){const f=e[c];if(f){const h={};a[f]=h,a=h}}const l=e[e.length-1];return l&&(a[l]=this.extractValue(t)),s}extractValue(e){switch(e.type){case"TextContent":return e.value;case"ObjectContent":return Ot(e.properties);case"ArrayContent":return Ot(e.elements);case"MixedContent":return Ot(e.properties)}}mergeExtendValue(e,t){return e===void 0?this.extractValue(t):Array.isArray(e)&&t.type==="ArrayContent"?this.uniqueConcat(e,t.elements):typeof e=="object"&&e!==null&&!Array.isArray(e)&&t.type==="ObjectContent"?ir(e,t.properties):Ts(e)&&t.type==="TextContent"?{...t,value:`${e.value}

${t.value}`}:this.extractValue(t)}mergeExtendContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return{...t,value:`${e.value}

${t.value}`};case"ObjectContent":return{...t,properties:ir(e.properties,t.properties)};case"ArrayContent":return{...t,elements:this.uniqueConcat(e.elements,t.elements)};case"MixedContent":{const s=e,a=s.text&&t.text?{...t.text,value:`${s.text.value}

${t.text.value}`}:t.text??s.text;return{...t,text:a,properties:ir(s.properties,t.properties)}}}if(e.type==="ObjectContent"&&t.type==="TextContent")return{type:"MixedContent",text:t,properties:e.properties,loc:t.loc};if(e.type==="TextContent"&&t.type==="ObjectContent")return{type:"MixedContent",text:e,properties:t.properties,loc:t.loc};if(e.type==="MixedContent"&&t.type==="TextContent"){const s=e;return{...s,text:s.text?{...t,value:`${s.text.value}

${t.value}`}:t}}if(e.type==="MixedContent"&&t.type==="ObjectContent"){const s=e;return{...s,properties:ir(s.properties,t.properties)}}return Ot(t)}uniqueConcat(e,t){const s=new Set,a=[];for(const l of[...e,...t]){const c=typeof l=="object"&&l!==null?JSON.stringify(l):String(l);s.has(c)||(s.add(c),a.push(this.deepCloneValue(l)))}return a}isPlainObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}deepCloneValue(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>this.deepCloneValue(s));const t={};for(const[s,a]of Object.entries(e))t[s]=this.deepCloneValue(a);return t}}class Ic{convention;prettierOptions;constructor(e="xml"){let t,s;if(typeof e=="object"&&("convention"in e||"prettier"in e)){const a=e;t=a.convention??"xml",s=a.prettier}else t=e;if(typeof t=="string")if(zR(t))this.convention=sf[t];else throw new Error(`Unknown convention: ${t}. Use a built-in convention ('xml', 'markdown') or provide a custom OutputConvention.`);else this.convention=t;this.prettierOptions={...Av,...s}}getPrettierOptions(){return this.prettierOptions}getConvention(){return this.convention}renderSection(e,t,s=1){const a=s===1?this.convention.section:this.convention.subsection??this.convention.section,l=this.transformName(e,a.nameTransform),c=this.applyTemplate(a.start,{name:l,level:s}),f=a.end?this.applyTemplate(a.end,{name:l,level:s}):"";let h=t.trim();if(!h)return f?`${c}
${f}`:c;this.convention.name==="markdown"&&(h=this.escapeMarkdownSpecialChars(h));const m=this.indentContent(h,a,s);return f?`${c}
${m}
${f}`:this.convention.name==="markdown"?`${c}

${m}`:`${c}
${m}`}renderList(e){const t=this.getListMarker();return e.map(s=>`${t} ${s}`).join(`
`)}renderCodeBlock(e,t=""){const s=this.convention.codeBlockDelimiter??"```";return`${s}${t}
${e}
${s}`}wrapRoot(e){return this.convention.rootWrapper?`${this.convention.rootWrapper.start}
${e}
${this.convention.rootWrapper.end}`:e}getSectionSeparator(){return this.convention.name==="markdown",`

`}getListMarker(){switch(this.convention.listStyle){case"asterisk":return"*";case"bullet":return"";case"numbered":return"1.";default:return"-"}}transformName(e,t){switch(t){case"kebab-case":return this.toKebabCase(e);case"camelCase":return this.toCamelCase(e);case"PascalCase":return this.toPascalCase(e);default:return e}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}toCamelCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toLowerCase())}toPascalCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toUpperCase())}applyTemplate(e,t){let s=e;s=s.replace(/\{\{name\}\}/g,t.name),s=s.replace(/\{\{level\}\}/g,String(t.level));const l=/\{\{#repeat\s+(\w+)\}\}(.+?)\{\{\/repeat\}\}/.exec(s);if(l){const c=l[1],f=l[2],h=c==="level"?t.level:1,m=f.repeat(h);s=s.replace(l[0],m)}return s}escapeMarkdownSpecialChars(e){return e.split(`
`).map(t=>{let s=t.replace(/__/g,"\\_\\_");return s=this.escapeGlobAsteriskOutsideBackticks(s),s}).join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}indentContent(e,t,s){if(!(t.indent??""))return e;if(this.convention.name==="xml"){const c=" ".repeat(this.prettierOptions.tabWidth).repeat(s);return e.split(`
`).map(f=>f.trim()?`${c}${f}`:f).join(`
`)}return e}}new Ic(xv),new Ic(sf.markdown);const rN=["git","config","documentation","diagrams"],_m={typescript:"TypeScript",naming:"Naming Conventions",errors:"Error Handling",testing:"Testing",security:"Security",performance:"Performance",accessibility:"Accessibility",documentation:"Documentation"};function iN(r){return r in _m?_m[r]:r.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function sN(r){return r==="errors"?"error-handling":r}class oN{options;constructor(e={}){this.options={supportLegacyFormat:e.supportLegacyFormat??!0,supportObjectFormat:e.supportObjectFormat??!0}}extract(e){const t=this.getProps(e),s=new Map,a=this.extractGit(t),l=this.extractConfig(t),c=this.extractDocumentation(t),f=this.extractDiagrams(t);let h=!1;if(this.options.supportLegacyFormat){const m=t.code;if(m&&typeof m=="object"&&!Array.isArray(m)){const g=m;if("style"in g||"patterns"in g){const y=[];this.addArrayItems(y,g.style),this.addArrayItems(y,g.patterns),y.length>0&&(s.set("code",{key:"code",sectionName:"code",title:"Code Style",items:y,rawValue:m}),h=!0)}}}for(const[m,g]of Object.entries(t)){if(this.isNonCodeKey(m)||m==="code"&&h)continue;const y=this.extractEntry(m,g);y&&y.items.length>0&&s.set(m,y)}return{codeStandards:s,git:a,config:l,documentation:c,diagrams:f}}extractFromProgram(e){const t=e.blocks.find(s=>s.name==="standards"&&!s.name.startsWith("__"));return t?this.extract(t.content):null}extractEntry(e,t){const s=[];if(Array.isArray(t))for(const a of t){const l=this.valueToString(a);l&&s.push(l)}else this.options.supportObjectFormat&&t&&typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length===0?null:{key:e,sectionName:sN(e),title:iN(e),items:s,rawValue:t}}extractFromObject(e,t){for(const[s,a]of Object.entries(e)){if(a==null||a===!1)continue;if(a===!0){t.push(s);continue}const l=this.valueToString(a);l&&t.push(`${s}: ${l}`)}}extractGit(e){const t=e.git;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,a={};return s.format&&(a.format=this.valueToString(s.format)),Array.isArray(s.types)&&(a.types=s.types.map(l=>this.valueToString(l)).filter(Boolean)),s.example&&(a.example=this.valueToString(s.example)),Object.keys(a).length>0?a:void 0}extractConfig(e){const t=e.config;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,a={};for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);f&&(a[l]=f)}return Object.keys(a).length>0?a:void 0}extractDocumentation(e){const t=e.documentation;if(!t)return;const s=[];if(Array.isArray(t))for(const a of t){const l=this.valueToString(a);l&&s.push(l)}else typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length>0?{items:s,rawValue:t}:void 0}extractDiagrams(e){const t=e.diagrams;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t;let a,l;if(s.format?a=this.valueToString(s.format):s.tool&&(a=this.valueToString(s.tool)),Array.isArray(s.types)&&(l=s.types.map(c=>this.valueToString(c)).filter(Boolean)),a||l&&l.length>0)return{format:a,types:l,rawValue:t}}isNonCodeKey(e){return rN.includes(e)}addArrayItems(e,t){if(Array.isArray(t))for(const s of t){const a=this.valueToString(s);a&&e.push(a)}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}valueToString(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(t=>this.valueToString(t)).join(", ");if(typeof e=="object"&&"type"in e){if(e.type==="TextContent"&&typeof e.value=="string")return e.value.trim();if(e.type==="TypeExpression"&&"kind"in e){const t=e.kind,s="params"in e&&Array.isArray(e.params)?e.params:[];return s.length>0?`${t}(${s.map(a=>this.valueToString(a)).join(", ")})`:t}}if(typeof e=="object"){const t=Object.entries(e);if(t.length>0)return t.map(([s,a])=>`${s}: ${this.valueToString(a)}`).join(", ")}return""}}class Wa{standardsExtractor=new oN;createRenderer(e){const t=e?.convention??this.defaultConvention;return new Ic({convention:t,prettier:e?.prettier})}getPrettierOptions(e){return{...Av,...e?.prettier}}getOutputPath(e){return e?.outputPath??this.outputPath}findBlock(e,t){return e.blocks.find(s=>s.name===t&&!s.name.startsWith("__"))}extractText(e){switch(e.type){case"TextContent":return e.value.trim();case"MixedContent":return e.text?.value.trim()??"";default:return""}}getProp(e,t){switch(e.type){case"ObjectContent":return e.properties[t];case"MixedContent":return e.properties[t];default:return}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}formatStandardsList(e){return Array.isArray(e)?e.map(t=>this.valueToString(t)).filter(t=>t.length>0):[]}formatArray(e){return e.map(String).join(", ")}truncate(e,t){return e.length>t?e.substring(0,t-3)+"...":e}getMetaField(e,t){const s=e.meta?.fields?.[t];if(typeof s=="string")return s;if(typeof s=="number")return String(s)}getArrayElements(e){return e.type==="ArrayContent"?e.elements:[]}valueToString(e){return e===null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(t=>this.valueToString(t)).join(", "):typeof e=="object"&&"type"in e&&e.type==="TextContent"&&typeof e.value=="string"?e.value.trim():""}extractSectionWithCodeBlock(e,t){const s=e.indexOf(t);if(s===-1)return null;const a=s+t.length,l=e.indexOf("```",a);if(l===-1)return null;const c=e.indexOf("```",l+3);if(c===-1)return null;const f=c+3;return e.substring(s,f)}normalizeMarkdownForPrettier(e){const t=e.split(`
`);let s=1/0,a=!1;for(const h of t){const m=h.trimEnd();if(m.trimStart().startsWith("```")){if(a=!a,m.length>0){const k=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,k)}continue}if(a||m.length===0)continue;const y=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,y)}s===1/0&&(s=0);const l=[];let c=!1,f=[];a=!1;for(const h of t){const m=h.trimEnd(),g=s>0?m.slice(s):m,y=m.trimStart().startsWith("```"),E=y&&!a;if(y&&(a=!a),a||g.startsWith("```")){if(E){const j=l.length>0?l[l.length-1]??"":"";j.trim()&&!j.startsWith("#")&&l.push("")}l.push(g);continue}let k=g;k=k.replace(/__([^_]+)__/g,"\\_\\_$1\\_\\_"),k=this.escapeGlobAsteriskOutsideBackticks(k);const w=l.length>0?l[l.length-1]:"",R=w?.trimStart().startsWith("#");if(R&&k.trim()&&l.push(""),k.trimStart().startsWith("|")&&k.trimEnd().endsWith("|"))c=!0,f.push(k.trim());else{c&&f.length>0&&(l.push(...this.formatMarkdownTable(f)),f=[],c=!1);const j=k.trimStart().startsWith("- "),M=/^\d+\.\s/.test(k.trimStart()),_=w?.trimStart()??"",P=_.startsWith("- ")||/^\d+\.\s/.test(_),b=w?.trimEnd().endsWith(":")??!1;((j||M)&&w&&!P&&!R||(j||M)&&b)&&l.push(""),l.push(k)}}return f.length>0&&l.push(...this.formatMarkdownTable(f)),l.join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}stripAllIndent(e){const t=e.split(`
`),s=[];let a=!1;for(const l of t){const c=l.trimEnd();if(c.trimStart().startsWith("```")){if(!a){const E=s.length>0?s[s.length-1]??"":"";E&&E.trim()&&s.push("")}a=!a,s.push(c.trimStart());continue}if(a){s.push(c);continue}let f=c.trimStart();f=f.replace(/__/g,"\\_\\_"),f=this.escapeGlobAsteriskOutsideBackticks(f);const h=s.length>0?s[s.length-1]??"":"",m=f.startsWith("- ")||/^\d+\.\s/.test(f),g=h.startsWith("- ")||/^\d+\.\s/.test(h),y=h.trimEnd().endsWith(":");(m&&h&&!g||m&&y)&&s.push(""),s.push(f)}return s.join(`
`)}formatMarkdownTable(e){if(e.length===0)return[];const t=e.map(l=>l.split("|").slice(1,-1).map(c=>c.trim())),s=t[0]?.length??0,a=new Array(s).fill(0);for(const l of t)for(let c=0;c<l.length;c++){const f=l[c]??"",h=f.match(/^-+$/)?3:f.length;a[c]=Math.max(a[c]??0,h)}return t.map(l=>"| "+l.map((f,h)=>{const m=a[h]??0;return f.match(/^-+$/)?"-".repeat(m):f.padEnd(m)}).join(" | ")+" |")}dedent(e){const t=e.split(`
`);if(t.length<=1)return e.trim();const s=t.slice(1).filter(l=>l.trim().length>0).reduce((l,c)=>{const h=c.match(/^(\s*)/)?.[1]?.length??0;return Math.min(l,h)},1/0);return s===0||s===1/0?e.trim():[(t[0]??"").trim(),...t.slice(1).map(l=>l.trim().length>0?l.slice(s):"")].join(`
`).trim()}}class Nr{static factories=new Map;static register(e,t){if(this.factories.has(e))throw new Error(`Formatter '${e}' is already registered`);this.factories.set(e,t)}static get(e){return this.factories.get(e)?.()}static getAll(){return Array.from(this.factories.values()).map(e=>e())}static list(){return Array.from(this.factories.keys())}static has(e){return this.factories.has(e)}static unregister(e){return this.factories.delete(e)}static clear(){this.factories.clear()}}const aN={simple:{name:"simple",description:"Single file output (.github/copilot-instructions.md)",outputPath:".github/copilot-instructions.md"},multifile:{name:"multifile",description:"Main + path-specific instructions (.github/instructions/) + prompts",outputPath:".github/copilot-instructions.md"},full:{name:"full",description:"Multifile + skills (.github/skills/) + agents (.github/agents/) + AGENTS.md",outputPath:".github/copilot-instructions.md"}},Pm={Read:"read",NotebookRead:"read",Edit:"edit",MultiEdit:"edit",Write:"edit",NotebookEdit:"edit",Grep:"search",Glob:"search",Bash:"execute",WebFetch:"web",WebSearch:"web",Task:"agent",TodoWrite:"todo",TodoRead:"todo"},lN={sonnet:"Claude Sonnet 4.5",opus:"Claude Opus 4.5",haiku:"Claude Haiku 4.5","sonnet-4":"Claude Sonnet 4","sonnet-4.5":"Claude Sonnet 4.5","opus-4":"Claude Opus 4","opus-4.5":"Claude Opus 4.5","haiku-4":"Claude Haiku 4","haiku-4.5":"Claude Haiku 4.5","gpt-4o":"GPT-4o","gpt-4.1":"GPT-4.1","gpt-5":"GPT-5","gpt-5-mini":"GPT-5 mini",inherit:"",auto:"Auto"};class uN extends Wa{name="github";outputPath=".github/copilot-instructions.md";description="GitHub Copilot instructions (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return aN}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),a=[];return s.getConvention().name==="markdown"&&a.push(this.header(e)),this.addCommonSections(e,s,a),{path:this.getOutputPath(t),content:a.join(`

`)+`
`}}formatMultifile(e,t){const s=this.createRenderer(t),a=[],l=this.extractInstructions(e);for(const h of l)a.push(this.generateInstructionFile(h));const c=this.extractPrompts(e);for(const h of c)a.push(this.generatePromptFile(h));const f=[];return s.getConvention().name==="markdown"&&f.push(this.header(e)),this.addCommonSections(e,s,f),{path:this.getOutputPath(t),content:f.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}formatFull(e,t){const s=this.createRenderer(t),a=[],l=this.extractInstructions(e);for(const y of l)a.push(this.generateInstructionFile(y));const c=this.extractPrompts(e);for(const y of c)a.push(this.generatePromptFile(y));const f=this.extractSkills(e);for(const y of f)a.push(this.generateSkillFile(y));const h=this.extractCustomAgents(e);for(const y of h)a.push(this.generateCustomAgentFile(y));const m=this.generateAgentsFile(e);m&&a.push(m);const g=[];return s.getConvention().name==="markdown"&&g.push(this.header(e)),this.addCommonSections(e,s,g),{path:this.getOutputPath(t),content:g.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}extractInstructions(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],a=this.getProps(t.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"typescript",applyTo:c,description:"TypeScript-specific coding rules",content:this.getTypeScriptInstructionContent(e)}),f.length>0&&s.push({name:"testing",applyTo:f,description:"Testing-specific rules and patterns",content:this.getTestingInstructionContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.applyTo,g=h.excludeAgent,y=h.description,E=h.content;m&&Array.isArray(m)&&s.push({name:c,applyTo:m.map(k=>this.valueToString(k)),excludeAgent:g?this.valueToString(g):void 0,description:y?this.valueToString(y):`${c} rules`,content:E?this.valueToString(E):""})}return s}generateInstructionFile(e){const t=[];t.push("---"),t.push("applyTo:");for(const s of e.applyTo)t.push(`  - "${s}"`);if(e.excludeAgent&&t.push(`excludeAgent: "${e.excludeAgent}"`),t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.github/instructions/${e.name}.instructions.md`,content:t.join(`
`)}}getTypeScriptInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Use strict TypeScript, avoid `any` types"),f.useUnknown&&a.push(`- Use \`unknown\` ${this.valueToString(f.useUnknown)}`),f.exports&&a.push(`- ${this.capitalize(this.valueToString(f.exports))}`),f.returnTypes&&a.push(`- Explicit return types ${this.valueToString(f.returnTypes)}`)}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: \`${this.valueToString(f.files)}\``),f.classes&&a.push(`- Classes/Interfaces: \`${this.valueToString(f.classes)}\``),f.functions&&a.push(`- Functions/Variables: \`${this.valueToString(f.functions)}\``)}return a.join(`
`)}getTestingInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.filePattern&&a.push(`- Test files: \`${this.valueToString(c.filePattern)}\``),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage for libraries`),c.fixtures&&a.push(`- Use fixtures ${this.valueToString(c.fixtures)}`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractPrompts(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;(f.prompt===!0||f.type==="prompt")&&s.push({name:l,description:f.description?this.valueToString(f.description):l,mode:f.mode==="agent"?"agent":void 0,tools:f.tools&&Array.isArray(f.tools)?f.tools.map(h=>this.valueToString(h)):void 0,content:f.content?this.valueToString(f.content):""})}return s}generatePromptFile(e){const t=[];t.push("---");const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.mode==="agent"&&(t.push("mode: agent"),e.tools&&e.tools.length>0)){const c=e.tools.map(f=>Pm[f]??f.toLowerCase()).filter((f,h,m)=>m.indexOf(f)===h).map(f=>`'${f}'`).join(", ");t.push(`tools: [${c}]`)}if(t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/prompts/${e.name.replace(/^\/+/,"")}.prompt.md`,content:t.join(`
`)+`
`}}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,disableModelInvocation:f.disableModelInvocation===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.disableModelInvocation&&t.push("disable-model-invocation: true"),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/skills/${e.name.replace(/^\/+/,"")}/SKILL.md`,content:t.join(`
`)+`
`}}generateAgentsFile(e){const t=this.findBlock(e,"identity");if(!t)return null;const s=[];s.push("# Agent Instructions"),s.push("");const a=this.extractText(t.content);a&&(s.push("## Identity"),s.push(""),s.push(this.stripAllIndent(a)),s.push(""));const l=this.findBlock(e,"context");if(l){const f=this.extractText(l.content);f&&(s.push("## Context"),s.push(""),s.push(this.stripAllIndent(f)),s.push(""))}const c=this.findBlock(e,"restrictions");if(c){const f=this.extractRestrictionItems(c.content);if(f.length>0){s.push("## Restrictions"),s.push("");for(const h of f)s.push(`- ${h}`)}}return{path:"AGENTS.md",content:s.join(`
`)+`
`}}extractRestrictionItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractCustomAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=f.description?this.valueToString(f.description):"";if(!h)continue;s.push({name:l,description:h,tools:this.parseToolsArray(f.tools),model:f.model?this.valueToString(f.model):void 0,content:f.content?this.valueToString(f.content):""})}return s}parseToolsArray(e){if(!e||!Array.isArray(e))return;const t=e.map(a=>this.valueToString(a)).filter(a=>a.length>0).map(a=>Pm[a]??a.toLowerCase()),s=[...new Set(t)];return s.length>0?s:void 0}mapModelName(e){if(!e)return;const t=lN[e.toLowerCase()];if(t!=="")return t??e}generateCustomAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0){const l=e.tools.map(c=>`'${c}'`).join(", ");t.push(`tools: [${l}]`)}const s=this.mapModelName(e.model);if(s&&t.push(`model: ${s}`),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/agents/${e.name.replace(/^\/+/,"")}.md`,content:t.join(`
`)+`
`}}addCommonSections(e,t,s){const a=this.project(e,t);a&&s.push(a);const l=this.techStack(e,t);l&&s.push(l);const c=this.architecture(e,t);c&&s.push(c);const f=this.codeStandards(e,t);f&&s.push(f);const h=this.shortcutsSection(e,t);h&&s.push(h);const m=this.commands(e,t);m&&s.push(m);const g=this.gitCommits(e,t);g&&s.push(g);const y=this.configFiles(e,t);y&&s.push(y);const E=this.documentation(e,t);E&&s.push(E);const k=this.postWork(e,t);k&&s.push(k);const w=this.restrictions(e,t);w&&s.push(w);const R=this.diagrams(e,t);R&&s.push(R);const j=this.knowledge(e,t);j&&s.push(j)}header(e){return"# GitHub Copilot Instructions"}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return t.renderSection("project",this.stripAllIndent(a))}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Language:** ${this.formatTechItem(g)}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E&&l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`)}if(l.length===0)return null;const m=t.renderList(l);return t.renderSection("tech-stack",m)}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture","").trim();return t.renderSection("architecture",this.stripAllIndent(c))}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(t.renderSection(c.sectionName,t.renderList(c.items),2));return l.length===0?null:t.renderSection("code-standards",l.join(`

`))}shortcutsSection(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content),l=[];for(const[c,f]of Object.entries(a))if(f&&typeof f=="object"&&!Array.isArray(f)){const h=f;if(h.prompt===!0||h.type==="prompt")continue;const m=h.description||h.content||c;l.push(`${c}: ${this.valueToString(m).split(`
`)[0]}`)}else l.push(`${c}: ${this.valueToString(f).split(`
`)[0]}`);return l.length===0?null:t.renderSection("shortcuts",t.renderList(l))}commands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return t.renderSection("commands",this.stripAllIndent(c))}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:t.renderSection("git-commits",t.renderList(f))}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(t.renderSection("eslint",`ESLint: ${g}`,2))}const m=c.viteRoot;if(m){const g=this.valueToString(m);f.push(t.renderSection("vite-vitest",`Vite root: ${g}`,2))}return f.length===0?null:t.renderSection("configuration-files",f.join(`

`))}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:t.renderSection("documentation-verification",t.renderList(f))}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return t.renderSection("post-work-verification",`${c}
${this.stripAllIndent(f)}`)}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;let a=[];if(s.content.type==="ArrayContent")a=s.content.elements.map(l=>this.formatRestriction(this.valueToString(l)));else if(s.content.type==="TextContent")a=s.content.value.trim().split(`
`).filter(l=>l.trim()).map(l=>this.formatRestriction(l.trim()));else if(s.content.type==="ObjectContent"){const l=this.getProp(s.content,"items");Array.isArray(l)&&(a=l.map(c=>this.formatRestriction(this.valueToString(c))))}return a.length===0?null:t.renderSection("donts",t.renderList(a))}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Always use **${this.valueToString(h)}** syntax for diagrams in documentation`);const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:t.renderSection("diagrams",t.renderList(f))}knowledge(e,t){return null}formatTechItem(e){return e.map(String).join(", ")}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}const cN={simple:{name:"simple",description:"Single file output (CLAUDE.md)",outputPath:"CLAUDE.md"},multifile:{name:"multifile",description:"Main + modular rules (.claude/rules/*.md)",outputPath:"CLAUDE.md"},full:{name:"full",description:"Multifile + skills (.claude/skills/) + agents (.claude/agents/) + local memory",outputPath:"CLAUDE.md"}};class fN extends Wa{name="claude";outputPath="CLAUDE.md";description="Claude Code instructions (concise Markdown)";defaultConvention="markdown";static getSupportedVersions(){return cN}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),a=[];return s.getConvention().name==="markdown"&&a.push(`# CLAUDE.md
`),this.addCommonSections(e,s,a),{path:this.getOutputPath(t),content:a.join(`
`)}}formatMultifile(e,t){const s=this.createRenderer(t),a=[],l=this.extractRules(e);for(const f of l)a.push(this.generateRuleFile(f));const c=[];return s.getConvention().name==="markdown"&&c.push(`# CLAUDE.md
`),this.addCommonSections(e,s,c),{path:this.getOutputPath(t),content:c.join(`
`),additionalFiles:a.length>0?a:void 0}}formatFull(e,t){const s=this.createRenderer(t),a=[],l=this.extractRules(e);for(const g of l)a.push(this.generateRuleFile(g));const c=this.extractSkills(e);for(const g of c)a.push(this.generateSkillFile(g));const f=this.extractAgents(e);for(const g of f)a.push(this.generateAgentFile(g));const h=this.generateLocalFile(e);h&&a.push(h);const m=[];return s.getConvention().name==="markdown"&&m.push(`# CLAUDE.md
`),this.addCommonSections(e,s,m),{path:this.getOutputPath(t),content:m.join(`
`),additionalFiles:a.length>0?a:void 0}}extractRules(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],a=this.getProps(t.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"code-style",paths:c,description:"TypeScript code style rules",content:this.getCodeStyleRuleContent(e)}),f.length>0&&s.push({name:"testing",paths:f,description:"Testing rules and patterns",content:this.getTestingRuleContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.paths??h.applyTo,g=h.description,y=h.content;m&&Array.isArray(m)&&s.push({name:c,paths:m.map(E=>this.valueToString(E)),description:g?this.valueToString(g):`${c} rules`,content:y?this.valueToString(y):""})}return s}generateRuleFile(e){const t=[];t.push("---"),t.push(`description: "${e.description}"`),t.push("paths:");for(const s of e.paths)t.push(`  - "${s}"`);if(t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.claude/rules/${e.name}.md`,content:t.join(`
`)}}getCodeStyleRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Strict TypeScript, no `any` types"),f.exports&&a.push("- Named exports only")}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: ${this.valueToString(f.files)}`)}return a.join(`
`)}getTestingRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.framework&&a.push(`- Use ${this.valueToString(c.framework)} for testing`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage`),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,context:f.context==="fork"||f.context==="inherit"?f.context:void 0,agent:f.agent?this.valueToString(f.agent):void 0,allowedTools:f.allowedTools&&Array.isArray(f.allowedTools)?f.allowedTools.map(h=>this.valueToString(h)):void 0,userInvocable:f.userInvocable===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.context&&t.push(`context: ${e.context}`),e.agent&&t.push(`agent: ${e.agent}`),e.allowedTools&&e.allowedTools.length>0){t.push("allowed-tools:");for(const a of e.allowedTools)t.push(`  - ${a}`)}if(e.userInvocable&&t.push("user-invocable: true"),t.push("---"),t.push(""),e.content){const a=this.dedent(e.content),l=this.normalizeMarkdownForPrettier(a);t.push(l)}return{path:`.claude/skills/${e.name}/SKILL.md`,content:t.join(`
`)+`
`}}extractAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=this.parseAgentConfig(l,f);h&&s.push(h)}return s}parseAgentConfig(e,t){const s=t.description?this.valueToString(t.description):"";return s?{name:e,description:s,tools:this.parseStringArray(t.tools),disallowedTools:this.parseStringArray(t.disallowedTools),model:this.parseAgentModel(t.model),permissionMode:this.parsePermissionMode(t.permissionMode),skills:this.parseStringArray(t.skills),content:t.content?this.valueToString(t.content):""}:null}parseStringArray(e){if(!e||!Array.isArray(e))return;const t=e.map(s=>this.valueToString(s)).filter(s=>s.length>0);return t.length>0?t:void 0}parseAgentModel(e){if(!e)return;const t=this.valueToString(e);return["sonnet","opus","haiku","inherit"].includes(t)?t:void 0}parsePermissionMode(e){if(!e)return;const t=this.valueToString(e);return["default","acceptEdits","dontAsk","bypassPermissions","plan"].includes(t)?t:void 0}generateAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0&&t.push(`tools: ${e.tools.join(", ")}`),e.disallowedTools&&e.disallowedTools.length>0&&t.push(`disallowedTools: ${e.disallowedTools.join(", ")}`),e.model&&t.push(`model: ${e.model}`),e.permissionMode&&t.push(`permissionMode: ${e.permissionMode}`),e.skills&&e.skills.length>0){t.push("skills:");for(const s of e.skills)t.push(`  - ${s}`)}if(t.push("---"),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.claude/agents/${e.name}.md`,content:t.join(`
`)+`
`}}generateLocalFile(e){const t=this.findBlock(e,"local");if(!t)return null;const s=this.extractText(t.content);if(!s)return null;const a=[];return a.push("# CLAUDE.local.md"),a.push(""),a.push("> Private instructions (not committed to git)"),a.push(""),a.push(s),{path:"CLAUDE.local.md",content:a.join(`
`)}}addCommonSections(e,t,s){this.addSection(s,this.project(e,t)),this.addSection(s,this.techStack(e,t)),this.addSection(s,this.architecture(e,t)),this.addSection(s,this.codeStandards(e,t)),this.addSection(s,this.gitCommits(e,t)),this.addSection(s,this.configFiles(e,t)),this.addSection(s,this.commands(e,t)),this.addSection(s,this.postWork(e,t)),this.addSection(s,this.documentation(e,t)),this.addSection(s,this.diagrams(e,t)),this.addSection(s,this.donts(e,t))}addSection(e,t){t&&e.push(t)}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const l=this.extractText(s.content).split(/\n{2,}/).map(f=>f.split(`
`).map(h=>h.trim()).filter(h=>h).join(`
`)).filter(f=>f).join(`

`),c=this.normalizeMarkdownForPrettier(l);return t.renderSection("Project",c)+`
`}techStack(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractTechStackFromContext(s);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}const a=this.findBlock(e,"standards");if(a){const l=this.extractTechStackFromStandards(a);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}return null}extractTechStackFromContext(e){if(!e)return[];const t=this.getProps(e.content),s=[],a=t.languages;a&&s.push(...(Array.isArray(a)?a:[a]).map(String));const l=t.runtime;l&&s.push(this.valueToString(l));const c=t.monorepo;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&f.packageManager&&s.push(`${this.valueToString(f.tool)} + ${this.valueToString(f.packageManager)}`)}return s}extractTechStackFromStandards(e){if(!e)return[];const t=this.getProp(e.content,"code");if(!t||typeof t!="object"||Array.isArray(t))return[];const s=t,a=[];for(const l of["languages","frameworks","testing"]){const c=s[l];c&&a.push(...(Array.isArray(c)?c:[c]).map(String))}return a}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Architecture",f.trim())+`
`}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const f of a.codeStandards.values())l.push(...f.items);if(l.length===0)return null;const c=t.renderList(l);return t.renderSection("Code Style",c)+`
`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"git");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Format: ${this.valueToString(l.format)}`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),l.example&&c.push(`Example: \`${this.valueToString(l.example)}\``),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Git Commits",f)+`
`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"config");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.eslint&&c.push(`ESLint: ${this.valueToString(l.eslint)}`),l.viteRoot&&c.push(`Vite root: ${this.valueToString(l.viteRoot)}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Config Files",f)+`
`}commands(e,t){const s=this.findBlock(e,"shortcuts"),a=this.findBlock(e,"knowledge"),l=[];if(s){const f=this.getProps(s.content);for(const[h,m]of Object.entries(f)){const g=this.valueToString(m).split(`
`)[0]??"";l.push(`${h.padEnd(10)} - ${g}`.trimEnd())}}if(l.length===0)return null;let c=t.renderCodeBlock(l.join(`
`));if(a){const f=this.extractText(a.content),h=this.extractSectionWithCodeBlock(f,"## Development Commands");if(h){const m=h.replace("## Development Commands",""),g=this.normalizeMarkdownForPrettier(m);c+=`

`+g.trim()}}return t.renderSection("Commands",c)+`
`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c=l.replace("## Post-Work Verification",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Post-Work Verification",f.trim())+`
`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"documentation");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.verifyBefore&&c.push("Review docs before changes"),l.verifyAfter&&c.push("Update docs after changes"),l.codeExamples&&c.push("Keep code examples accurate"),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Documentation",f)+`
`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"diagrams");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Use ${this.valueToString(l.format)} for diagrams`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Diagrams",f)+`
`}donts(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractDontsItems(s.content);if(a.length===0)return null;const l=t.renderList(a);return t.renderSection("Don'ts",l)+`
`}extractDontsItems(e){const t=s=>s.replace(/^Never\s+/i,"Don't ");if(e.type==="ArrayContent")return e.elements.map(s=>t(this.valueToString(s)));if(e.type==="TextContent")return e.value.trim().split(`
`).map(s=>s.trim().replace(/^-\s*/,"")).filter(s=>s.length>0).map(t);if(e.type==="ObjectContent"){const s=this.getProp(e,"items");if(Array.isArray(s))return s.map(a=>t(this.valueToString(a)))}return[]}}const hs={modern:{name:"modern",description:"MDC format with YAML frontmatter (.cursor/rules/project.mdc) + slash commands (.cursor/commands/)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},frontmatter:{name:"frontmatter",description:"Alias for modern format (MDC with YAML frontmatter + slash commands)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},multifile:{name:"multifile",description:"Multiple MDC files with glob-based targeting + slash commands",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},legacy:{name:"legacy",description:"Plain text format (.cursorrules) - DEPRECATED",outputPath:".cursorrules",cursorVersion:"< 0.45",deprecated:!0,deprecatedSince:"2024-12"}};class dN extends Wa{name="cursor";outputPath=hs.modern.outputPath;description="Cursor rules (MDC with frontmatter)";defaultConvention="markdown";static getSupportedVersions(){return hs}format(e,t){const s=t?.convention??this.defaultConvention;if(s!=="markdown"){const l=typeof s=="string"?s:"custom";throw new Error(`Cursor formatter does not support '${l}' convention. Only 'markdown' convention is supported for Cursor targets.`)}const a=this.resolveVersion(t?.version);return a==="legacy"?this.formatLegacy(e,t):a==="multifile"?this.formatMultifile(e,t):this.formatModern(e,t)}resolveVersion(e){return e==="legacy"?"legacy":e==="multifile"?"multifile":"modern"}formatModern(e,t){const s=[],a=this.frontmatter(e);s.push(a),this.addCommonSections(e,s);const l=this.generateCommandFiles(e);return{path:t?.outputPath??hs.modern.outputPath,content:s.join(`

`)+`
`,additionalFiles:l.length>0?l:void 0}}formatLegacy(e,t){const s=[];return this.addCommonSections(e,s),{path:t?.outputPath??hs.legacy.outputPath,content:s.join(`

`)+`
`}}formatMultifile(e,t){const s=[],a=this.extractGlobs(e);for(const M of a){const _=this.generateGlobFile(e,M);_&&s.push(_)}const l=this.generateShortcutsFile(e);l&&s.push(l);const c=this.generateCommandFiles(e);s.push(...c);const f=[];f.push(this.frontmatter(e)),f.push(this.intro(e));const h=this.techStack(e);h&&f.push(h);const m=this.architecture(e);m&&f.push(m);const g=this.codeStyle(e);g&&f.push(g);const y=this.gitCommits(e);y&&f.push(y);const E=this.configFiles(e);E&&f.push(E);const k=this.postWork(e);k&&f.push(k);const w=this.documentation(e);w&&f.push(w);const R=this.diagrams(e);R&&f.push(R);const j=this.never(e);return j&&f.push(j),{path:t?.outputPath??hs.modern.outputPath,content:f.join(`

`)+`
`,additionalFiles:s.length>0?s:void 0}}extractGlobs(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],l=this.getProps(t.content).globs;if(Array.isArray(l)){const c=l.filter(m=>typeof m=="string"&&(m.includes(".ts")||m.includes(".tsx"))),f=l.filter(m=>typeof m=="string"&&(m.includes("test")||m.includes("spec")||m.includes("__tests__"))),h=l.filter(m=>typeof m=="string"&&!c.includes(m)&&!f.includes(m));c.length>0&&s.push({name:"typescript",patterns:c,description:"TypeScript-specific rules"}),f.length>0&&s.push({name:"testing",patterns:f,description:"Testing-specific rules"}),h.length>0&&s.push({name:"files",patterns:h,description:"File-specific rules"})}return s}generateGlobFile(e,t){const s=[],a=["---",`description: "${t.description}"`,"globs:",...t.patterns.map(l=>`  - "${l}"`),"---"];if(s.push(a.join(`
`)),t.name==="typescript"){const l=this.codeStyle(e);l&&s.push(l)}return t.name==="testing"&&(s.push("## Testing Guidelines"),s.push("Follow project testing conventions and patterns.")),s.length<=1?null:{path:`.cursor/rules/${t.name}.mdc`,content:s.join(`

`)+`
`}}generateShortcutsFile(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const a=[];a.push(["---",'description: "Project shortcuts and commands"',"alwaysApply: false","---"].join(`
`));const l=["## Commands"];for(const[c,f]of Object.entries(s)){const h=this.valueToString(f);if(typeof f=="object"&&!Array.isArray(f)){const m=f;l.push(`
### ${c}`),m.description&&l.push(this.valueToString(m.description)),Array.isArray(m.steps)&&(l.push(`
**Steps:**`),m.steps.forEach((g,y)=>{l.push(`${y+1}. ${this.valueToString(g)}`)}))}else l.push(`- **${c}**: ${h.split(`
`)[0]}`)}return a.push(l.join(`
`)),{path:".cursor/rules/shortcuts.mdc",content:a.join(`

`)+`
`}}generateCommandFiles(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=this.getProps(t.content),a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);if(f.includes(`
`)){const h=l.replace(/^\//,"");a.push({path:`.cursor/commands/${h}.md`,content:f.trim()})}}return a}addCommonSections(e,t){const s=this.intro(e);s&&t.push(s);const a=this.techStack(e);a&&t.push(a);const l=this.architecture(e);l&&t.push(l);const c=this.codeStyle(e);c&&t.push(c);const f=this.gitCommits(e);f&&t.push(f);const h=this.configFiles(e);h&&t.push(h);const m=this.commands(e);m&&t.push(m);const g=this.devCommands(e);g&&t.push(g);const y=this.postWork(e);y&&t.push(y);const E=this.documentation(e);E&&t.push(E);const k=this.diagrams(e);k&&t.push(k);const w=this.never(e);w&&t.push(w)}intro(e){const t=this.findBlock(e,"identity");if(t){const l=this.dedent(this.extractText(t.content));if(l.toLowerCase().startsWith("you are"))return l}const s=this.extractProjectInfo(e),a=s.org?` at ${s.org}`:"";return`You are working on ${s.text}${a}.`}frontmatter(e){return["---",`description: "${this.extractProjectDescription(e)}"`,"alwaysApply: true","---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"name");if(t)return`Project rules for ${t}`;const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"project");if(a&&typeof a=="string"){const c=/working on\s+(\w+)/i.exec(a);if(c)return`Project rules for ${c[1]}`}}return"Project-specific rules"}extractProjectInfo(e){const t=this.getMetaField(e,"org")??null,s=this.findBlock(e,"context");if(s){const l=this.getProp(s.content,"project");if(l&&typeof l=="string")return{text:l.trim(),org:t}}const a=this.findBlock(e,"identity");if(a){const c=this.extractText(a.content).split(`
`)[0]?.trim();if(c)return{text:c,org:t}}return{text:"the project",org:t}}techStack(e){const t=this.extractTechStackItems(e);return t.length>0?`Tech stack: ${t.join(", ")}`:null}extractTechStackItems(e){const t=[],s=this.findBlock(e,"context");return s&&this.extractTechFromContext(s.content,t),t.length===0&&this.extractTechFromStandards(e,t),t}extractTechFromContext(e,t){const s=this.getProp(e,"tech-stack");s&&t.push(...this.extractListItems(s));const a=this.getProp(e,"languages");a&&this.collectValueItems(t,a);const l=this.getProp(e,"runtime");l&&t.push(this.valueToString(l));const c=this.getProp(e,"monorepo");if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&t.push(`${this.valueToString(f.tool)}`),f.packageManager&&t.push(`${this.valueToString(f.packageManager)} workspaces`)}}extractTechFromStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return;const a=this.getProp(s.content,"code");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=a;this.collectValueItems(t,l.languages),this.collectValueItems(t,l.frameworks),this.collectValueItems(t,l.testing)}}architecture(e){const t=this.findBlock(e,"context");if(!t)return null;const s=this.getProp(t.content,"architecture");if(s){const l=typeof s=="string"?s:this.valueToString(s);if(l.trim())return`Architecture:
${l.trim()}`}const a=this.extractText(t.content);return a?.includes("Architecture")?a.trim():null}codeStyle(e){const t=this.extractCodeStyleItems(e);return t.length===0?null:`Code style:
${t.map(s=>"- "+s).join(`
`)}`}extractCodeStyleItems(e){const t=this.findBlock(e,"standards");if(!t)return[];const s=this.standardsExtractor.extract(t.content),a=[];for(const l of s.codeStandards.values())a.push(...l.items);return a}gitCommits(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"git");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"git-commits");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}return null}extractGitItems(e){const t=[];for(const[s,a]of Object.entries(e))if(s==="types"&&Array.isArray(a)){const l=a.map(c=>this.valueToString(c)).join(", ");t.push(`types: ${l}`)}else typeof a=="string"?t.push(`${s}: ${a}`):typeof a=="number"&&t.push(`${s}: ${a}`);return t}configFiles(e){const t=this.extractConfigItems(e);return t.length===0?null:`Config:
${t.map(s=>"- "+s).join(`
`)}`}extractConfigItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"config"),l=this.extractConfigFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"configuration-files");return this.extractConfigFromObjectWithList(a)}return[]}extractConfigFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,a]of Object.entries(e))typeof a=="string"&&t.push(`${s}: ${a}`);return t}extractConfigFromObjectWithList(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,a]of Object.entries(e)){const l=this.extractListItems(a);l.length>0&&t.push(`${s}: ${l.join("; ")}`)}return t}commands(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c).split(`
`)[0]??"";a.push(`${l} - ${f}`)}return a.length>0?`Commands:
${a.join(`
`)}`:null}devCommands(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),a=this.extractSectionWithCodeBlock(s,"## Development Commands");return a?`Development Commands:
${a.replace("## Development Commands","").trim()}`:null}postWork(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),a=this.extractSectionWithCodeBlock(s,"## Post-Work Verification");return a?`Post-Work Verification:
${a.replace("## Post-Work Verification","").trim()}`:null}documentation(e){const t=this.extractDocItems(e);return t.length===0?null:`Documentation:
${t.map(s=>"- "+s).join(`
`)}`}extractDocItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"documentation"),l=this.extractStringValuesFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"documentation-verification");if(a)return this.extractListItems(a)}return[]}extractStringValuesFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const s of Object.values(e))typeof s=="string"&&t.push(s);return t}diagrams(e){const t=this.extractDiagramItems(e);return t.length===0?null:`Diagrams:
${t.map(s=>"- "+s).join(`
`)}`}extractDiagramItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"diagrams"),l=this.parseDiagramObject(a,"format");if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"diagrams");return this.parseDiagramObject(a,"tool")}return[]}parseDiagramObject(e,t){if(!e||typeof e!="object"||Array.isArray(e))return[];const s=e,a=[];return s[t]&&a.push(`Use ${this.valueToString(s[t])}`),s.types&&Array.isArray(s.types)&&a.push(`Types: ${s.types.map(l=>this.valueToString(l)).join(", ")}`),a}never(e){const t=this.findBlock(e,"restrictions");if(!t)return null;const s=this.extractNeverItems(t.content);return s.length===0?null:`Never:
${s.map(a=>"- "+a).join(`
`)}`}extractNeverItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractListItems(e){if(Array.isArray(e))return e.map(t=>this.valueToString(t));if(typeof e=="object"&&e!==null){const t=e,s=[];for(const[a,l]of Object.entries(t))s.push(`${a}: ${this.valueToString(l)}`);return s}return typeof e=="string"?e.split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0):[this.valueToString(e)]}collectValueItems(e,t){if(!t)return;const s=Array.isArray(t)?t:[t];for(const a of s)e.push(this.valueToString(a))}}const hN={simple:{name:"simple",description:"Plain Markdown without frontmatter",outputPath:".agent/rules/project.md"},frontmatter:{name:"frontmatter",description:"Markdown with YAML frontmatter for activation",outputPath:".agent/rules/project.md"}},Lm=12e3;class pN extends Wa{name="antigravity";outputPath=".agent/rules/project.md";description="Google Antigravity rules (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return hN}format(e,t){const s=this.resolveVersion(t?.version),a=this.createRenderer(t),l=[];if(s==="frontmatter"){const z=this.determineActivationType(e);l.push(this.generateFrontmatter(e,z))}l.push(this.header(e));const c=this.identity(e,a);c&&l.push(c);const f=this.techStack(e,a);f&&l.push(f);const h=this.architecture(e,a);h&&l.push(h);const m=this.codeStandards(e,a);m&&l.push(m);const g=this.gitCommits(e,a);g&&l.push(g);const y=this.configFiles(e,a);y&&l.push(y);const E=this.commands(e,a);E&&l.push(E);const k=this.devCommands(e,a);k&&l.push(k);const w=this.postWork(e,a);w&&l.push(w);const R=this.documentation(e,a);R&&l.push(R);const j=this.diagrams(e,a);j&&l.push(j);const M=this.restrictions(e,a);M&&l.push(M);const _=l.join(`

`)+`
`;this.validateContentLength(_);const P={path:this.getOutputPath(t),content:_},b=this.workflows(e);return b&&b.length>0?{path:P.path,content:P.content,additionalFiles:b}:P}resolveVersion(e){return e==="frontmatter"?"frontmatter":"simple"}determineActivationType(e){const t=this.findBlock(e,"guards");if(t){const s=this.getProps(t.content);if(s.globs||s.glob||s.files)return"glob"}return"always"}generateFrontmatter(e,t){const s=this.getMetaField(e,"name")??"Project Rules",a=this.extractProjectDescription(e);return["---",`title: "${s}"`,`activation: "${t}"`,`description: "${a}"`,"---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"description");if(t)return t;const s=this.findBlock(e,"identity");if(s){const a=this.extractText(s.content);if(a){const l=a.split(".")[0];return l&&l.length<=100?l:a.slice(0,100)+"..."}}return"Auto-generated project rules"}validateContentLength(e){e.length>Lm&&console.warn(`Warning: Content exceeds Antigravity's ${Lm.toLocaleString()} character limit (${e.length.toLocaleString()} chars). Consider splitting into multiple rules.`)}workflows(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content),a=[];for(const[l,c]of Object.entries(s))if(this.isWorkflow(c)){const f=this.generateWorkflow(l,c);f&&a.push(f)}return a.length>0?a:null}isWorkflow(e){if(typeof e!="object"||e===null||Array.isArray(e))return!1;const t=e;return"steps"in t||"workflow"in t}generateWorkflow(e,t){if(typeof t!="object"||t===null||Array.isArray(t))return null;const s=t,a=s.steps??s.workflow,l=s.description??s.desc??"",c=e.replace(/^\//,"").replace(/\s+/g,"-").toLowerCase(),f=["---",`title: "${this.formatWorkflowTitle(e)}"`,`description: "${this.valueToString(l)}"`,"---","","## Steps",""];return Array.isArray(a)?a.forEach((h,m)=>{f.push(`${m+1}. ${this.valueToString(h)}`)}):typeof a=="string"&&a.split(`
`).map(m=>m.trim()).filter(m=>m.length>0).forEach((m,g)=>{const y=m.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"");f.push(`${g+1}. ${y}`)}),{path:`.agent/workflows/${c}.md`,content:f.join(`
`)}}formatWorkflowTitle(e){return e.replace(/^\//,"").split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}header(e){return"# Project Rules"}identity(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return a?`## Project Identity

${this.stripAllIndent(a)}`:null}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Languages:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E?l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`):y&&l.push(`**Monorepo:** ${this.valueToString(y)}`)}const m=a.frameworks;if(m){const g=Array.isArray(m)?m:[m];l.push(`**Frameworks:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}return l.length===0?null:`## Tech Stack

${l.join(`
`)}`}architecture(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractText(s.content),c=this.extractSectionWithCodeBlock(l,"## Architecture");if(c){const m=c.replace("## Architecture","").trim();return`## Architecture

${this.stripAllIndent(m)}`}const h=this.getProps(s.content).architecture;if(h){const m=typeof h=="string"?h:this.valueToString(h);if(m.trim())return`## Architecture

${this.stripAllIndent(m.trim())}`}}const a=this.findBlock(e,"architecture");if(a){const l=this.extractText(a.content);if(l)return`## Architecture

${this.stripAllIndent(l)}`}return null}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(`### ${c.title}

${c.items.map(f=>"- "+f).join(`
`)}`);return l.length===0?null:`## Code Standards

${l.join(`

`)}`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:`## Git Commits

${f.map(E=>"- "+E).join(`
`)}`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(`### ESLint

- ESLint: ${g}`)}const m=c.viteRoot;if(m){const g=this.valueToString(m).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`### Vite/Vitest

- Vite root: ${g}`)}return f.length===0?null:`## Configuration Files

${f.join(`

`)}`}commands(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content);if(Object.keys(a).length===0)return null;const l=[];for(const[c,f]of Object.entries(a)){if(this.isWorkflow(f))continue;const h=this.valueToString(f);h?l.push(`- **${c}**: ${h}`):l.push(`- **${c}**:`)}return l.length===0?null:`## Commands

${l.join(`
`)}`}devCommands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return`## Development Commands

${this.stripAllIndent(c)}`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return`## Post-Work Verification

${c}
${this.stripAllIndent(f)}`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:`## Documentation

${f.map(h=>"- "+h).join(`
`)}`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;if(h){const g=this.valueToString(h).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`Always use **${g}** syntax for diagrams in documentation`)}const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:`## Diagrams

${f.map(g=>"- "+g).join(`
`)}`}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractRestrictionsItems(s.content);return a.length===0?null:`## Don'ts

${a.map(l=>"- "+l).join(`
`)}`}extractRestrictionsItems(e){return e.type==="ArrayContent"?e.elements.map(t=>this.formatRestriction(this.valueToString(t))):e.type==="TextContent"?e.value.trim().split(`
`).filter(t=>t.trim()).map(t=>this.formatRestriction(t.trim())):[]}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}}Nr.register("github",()=>new uN);Nr.register("claude",()=>new fN);Nr.register("cursor",()=>new dN);Nr.register("antigravity",()=>new pN);const mN={id:"PS001",name:"required-meta-id",description:"@meta.id is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e){r.report({message:"@meta block is required",location:r.ast.loc,suggestion:"Add a @meta block with id and version fields"});return}e.fields?.id||r.report({message:'@meta block must include "id" field',location:e.loc??r.ast.loc,suggestion:'Add id: "your-project-id" to @meta'})}},gN={id:"PS002",name:"required-meta-syntax",description:"@meta.syntax is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;e&&(e.fields?.syntax||r.report({message:'@meta block must include "syntax" field',location:e.loc??r.ast.loc,suggestion:'Add syntax: "1.0.0" to @meta'}))}};function vN(r){if(!r)return!1;const t=r.split(/[-+]/)[0];if(!t)return!1;const s=t.split(".");if(s.length!==3)return!1;for(const a of s)if(!/^\d+$/.test(a)||a.length>1&&a.startsWith("0"))return!1;return!0}const yN={id:"PS003",name:"valid-semver",description:"Syntax version must be valid semantic version",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e?.fields?.syntax)return;const t=e.fields.syntax;if(typeof t!="string"){r.report({message:"@meta.syntax must be a string",location:e.loc??r.ast.loc,suggestion:'Use a string value like syntax: "1.0.0"'});return}vN(t)||r.report({message:`Invalid semantic version: "${t}"`,location:e.loc??r.ast.loc,suggestion:'Use semantic versioning format: MAJOR.MINOR.PATCH (e.g., "1.0.0", "2.1.0-beta.1")'})}},EN={id:"PS004",name:"required-guards",description:"Required guards must be present",defaultSeverity:"error",validate:r=>{const e=r.config.requiredGuards;if(!e||e.length===0)return;const t=r.ast.blocks.find(a=>a.name==="guards");if(!t){r.report({message:`Missing @guards block. Required guards: ${e.join(", ")}`,location:r.ast.loc,suggestion:"Add a @guards block with the required guard references"});return}const s=SN(t.content);for(const a of e)s.includes(a)||r.report({message:`Missing required guard: "${a}"`,location:t.loc??r.ast.loc,suggestion:`Add @use ${a} to include the required guard`})}};function SN(r){const e=[];if(r.type==="ArrayContent"&&Array.isArray(r.elements))for(const t of r.elements)typeof t=="string"&&e.push(t);else if(r.type==="ObjectContent"&&r.properties)for(const t of Object.keys(r.properties))e.push(t);return e}function Ga(r,e){for(const t of r.blocks)bm(t.content,t.loc,e);for(const t of r.extends)bm(t.content,t.loc,e)}function TN(r,e){for(const t of r.blocks)e(t);for(const t of r.extends)e(t)}function kN(r,e){for(const t of r.uses)e(t)}function bm(r,e,t){switch(r.type){case"TextContent":t(r.value,r.loc??e);break;case"ObjectContent":_c(r.properties,r.loc??e,t);break;case"ArrayContent":Rv(r.elements,r.loc??e,t);break;case"MixedContent":r.text&&t(r.text.value,r.text.loc??e),_c(r.properties,r.loc??e,t);break}}function _c(r,e,t){for(const s of Object.values(r))Nv(s,e,t)}function Rv(r,e,t){for(const s of r)Nv(s,e,t)}function Nv(r,e,t){if(typeof r=="string")t(r,e);else if(Array.isArray(r))Rv(r,e,t);else if(r!==null&&typeof r=="object")if("type"in r){const s=r;s.type==="TextContent"&&typeof s.value=="string"&&t(s.value,s.loc??e)}else _c(r,e,t)}function xN(r){switch(r.type){case"TextContent":return r.value.trim().length>0;case"ObjectContent":return Object.keys(r.properties).length>0;case"ArrayContent":return r.elements.length>0;case"MixedContent":return(r.text?.value?.trim().length??0)>0||Object.keys(r.properties).length>0}}const Ov=[/ignore\s+(all\s+)?previous\s+instructions/i,/pretend\s+(you\s+)?(are|to\s+be)/i,/jailbreak/i,/bypass\s+(your\s+)?(rules|restrictions)/i,/disregard\s+(all\s+)?(prior|previous)/i,/forget\s+(all\s+)?(prior|previous|your)/i,/act\s+as\s+if\s+you\s+(have\s+)?no\s+restrictions/i,/(?:^|[.!?]\s*)(?:please\s+)?override\s+safety/im,/(?:^|[.!?]\s*)(?:please\s+)?suppress\s+(?:all\s+)?warnings?/im,/(?:^|[.!?]\s*)(?:please\s+)?hide\s+security/im,/(?:you\s+)?(?:should|must|can|will)\s+disable\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+turn\s+off\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+circumvent\s+(?:safety|security)/i,/(?:^|[.!?]\s*)evade\s+(?:detection|monitoring|logging)/im,/(?:^|[.!?]\s*)delete\s+(?:all\s+)?(?:logs?|audit\s+trail)/im],AN=[/zignoruj\s+(wszystkie\s+)?poprzednie\s+instrukcje/i,/udawaj,?\s+e\s+(jeste|nie\s+masz)/i,/omi\s+(swoje\s+)?(zasady|ograniczenia|restrykcje)/i,/zapomnij\s+(o\s+)?(wszystkich\s+)?(poprzednich|wczeniejszych)/i,/pomi\s+(wszystkie\s+)?zabezpieczenia/i,/wycz\s+(tryb\s+)?bezpieczestwa/i,/ukryj\s+(wszystkie\s+)?ostrzeenia/i,/usu\s+(wszystkie\s+)?logi/i,/nadpisz\s+zasady\s+bezpieczestwa/i,/dziaaj\s+bez\s+ogranicze/i],wN=[/ignora\s+(todas?\s+las?\s+)?instrucciones\s+anteriores/i,/finge\s+(que\s+)?(eres|ser)/i,/elude\s+(tus\s+)?(reglas|restricciones)/i,/olvida\s+(todas?\s+las?\s+)?(anteriores|previas)/i,/desactiva\s+(la\s+)?seguridad/i,/oculta\s+(las\s+)?advertencias/i,/elimina\s+(los\s+)?registros/i,/anula\s+(las\s+)?medidas\s+de\s+seguridad/i,/acta\s+sin\s+restricciones/i,/salta(r)?\s+(las\s+)?restricciones/i],CN=[/ignoriere?\s+(alle\s+)?vorherigen?\s+(Anweisungen|Instruktionen)/i,/tu\s+so,?\s+als\s+(ob\s+du|wrst\s+du)/i,/umgehe?\s+(deine\s+)?(Regeln|Einschrnkungen|Beschrnkungen)/i,/vergiss\s+(alle\s+)?(vorherigen?|frheren?)/i,/deaktiviere?\s+(die\s+)?Sicherheit/i,/verstecke?\s+(alle\s+)?Warnungen/i,/lsche?\s+(alle\s+)?(Logs?|Protokolle?)/i,/berschreibe?\s+(die\s+)?Sicherheitsregeln/i,/handel[en]?\s+ohne\s+Einschrnkungen/i,/Sicherheitsmanahmen\s+umgehen/i],RN=[/ignore[zr]?\s+(toutes?\s+les?\s+)?instructions?\s+(prcdentes?|antrieures?)/i,/fais\s+semblant\s+(d['']tre|que\s+tu\s+es)/i,/contourne[zr]?\s+(tes|vos)\s+(rgles|restrictions)/i,/oublie[zr]?\s+(toutes?\s+les?\s+)?(prcdentes?|antrieures?)/i,/dsactive[zr]?\s+(la\s+)?scurit/i,/cache[zr]?\s+(les\s+)?avertissements/i,/supprime[zr]?\s+(les\s+)?(logs?|journaux?)/i,/outrepasse[zr]?\s+(les\s+)?mesures\s+de\s+scurit/i,/agis\s+sans\s+restrictions/i,/ignore[zr]?\s+(les\s+)?limites/i],NN=[/ignore\s+(todas?\s+as?\s+)?instrues\s+anteriores/i,/finja\s+(que\s+)?(voc\s+|ser)/i,/contorne\s+(suas?\s+)?(regras|restries)/i,/esquea\s+(todas?\s+as?\s+)?(anteriores|prvias)/i,/desative\s+(a\s+)?segurana/i,/oculte\s+(os\s+)?avisos/i,/apague\s+(os\s+)?(logs?|registros?)/i,/substitua\s+(as\s+)?medidas\s+de\s+segurana/i,/aja\s+sem\s+restries/i,/pule\s+(as\s+)?restries/i],ON=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],IN=[/\s*(\s*)?/i,/\s*(|)/i,/\s*(\s*)?(||)/i,/\s*(\s*)?(|)/i,/\s*/i,/\s*(\s*)?/i,/\s*(\s*)?(|)/i,/\s*\s*(|)/i,/\s*(\s*)?/i,/\s*/i],_N=[/ignora\s+(tutte\s+le\s+)?istruzioni\s+precedenti/i,/fingi\s+di\s+(essere|non\s+avere)/i,/aggira\s+(le\s+tue\s+)?(regole|restrizioni)/i,/dimentica\s+(tutte\s+le\s+)?(precedenti|passate)/i,/disattiva\s+(la\s+)?sicurezza/i,/nascondi\s+(gli\s+)?avvisi/i,/elimina\s+(i\s+)?(log|registri)/i,/sovrascrivi\s+(le\s+)?misure\s+di\s+sicurezza/i,/agisci\s+senza\s+restrizioni/i,/salta\s+(le\s+)?restrizioni/i],PN=[/negeer\s+(alle\s+)?vorige\s+(instructies|aanwijzingen)/i,/doe\s+alsof\s+je\s+(bent|geen)/i,/omzeil\s+(je\s+)?(regels|beperkingen)/i,/vergeet\s+(alle\s+)?(vorige|eerdere)/i,/schakel\s+(de\s+)?beveiliging\s+uit/i,/verberg\s+(alle\s+)?waarschuwingen/i,/verwijder\s+(alle\s+)?(logs?|logboeken)/i,/overschrijf\s+(de\s+)?beveiligingsregels/i,/handel\s+zonder\s+beperkingen/i,/sla\s+(de\s+)?beperkingen\s+over/i],LN=[/()?(||)/i,/|/i,/(||)(||)/i,/(|)(|)/i,/(|)/i,/(||)/i,/(|)/i,/(|)/i,/(|)/i,//i],bN=[/\s*(\s*)?(|\s+)?(|)/i,/\s*\s*(||)/i,/(||)(|)\s*(||)/i,/(|)\s*(|)(|)\s*/i,/(|)\s*(||)/i,/(|\s+)?(||)/i,/(|\s+)?(|)/i,/\s*(|)\s*/i,/\s*\s*(|)/i,/\s*(|\s+)?/i],MN=[/\s+(\s+)?\s+/i,/\s+(|)/i,/\s+(|)/i,/\s+(\s+)?(|\s+)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],jN=[/nceki\s+(tm\s+)?talimatlar\s+(yoksay|grmezden\s+gel)/i,/gibi\s+davran|m\s+gibi\s+yap/i,/(kurallar|kstlamalar)\s+(atla|ge|bypass)/i,/nceki(leri)?\s+unut/i,/gvenlii\s+(devre\s+d\s+brak|kapat)/i,/uyarlar\s+(gizle|sakla)/i,/gnlkleri\s+sil/i,/gvenlik\s+kurallarn\s+(geersiz\s+kl|zerine\s+yaz)/i,/kstlama\s+olmadan\s+(al|hareket\s+et)/i,/gvenlik\s+kontrollerini\s+atla/i],FN=[/ignorera\s+(alla\s+)?tidigare\s+(instruktioner|anvisningar)/i,/ltsas\s+(att\s+du\s+r|vara)/i,/kringg\s+(dina\s+)?(regler|begrnsningar)/i,/glm\s+(alla\s+)?(tidigare|fregende)/i,/inaktivera\s+skerhet(en)?/i,/dlj\s+(alla\s+)?varningar/i,/radera\s+(alla\s+)?loggar/i,/skriv\s+ver\s+skerhetsregler(na)?/i,/agera\s+utan\s+begrnsningar/i,/hoppa\s+ver\s+skerhetskontroller/i],$N=[/ignorer\s+(alle\s+)?tidligere\s+(instruksjoner|anvisninger)/i,/lat\s+som\s+(om\s+)?du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrensninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhet(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slett\s+(alle\s+)?logger/i,/overskriv\s+sikkerhetsregler/i,/handle\s+uten\s+begrensninger/i,/hopp\s+over\s+sikkerhetssjekker/i],UN=[/ignorer\s+(alle\s+)?tidligere\s+(instruktioner|anvisninger)/i,/lad\s+som\s+om\s+du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrnsninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhed(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slet\s+(alle\s+)?logfiler/i,/overskriv\s+sikkerhedsregler/i,/handl\s+uden\s+begrnsninger/i,/spring\s+sikkerhedstjek\s+over/i],DN=[/ohita\s+(kaikki\s+)?aiemmat\s+ohjeet/i,/teeskentele\s+(olevasi|ett\s+olet)/i,/kierr\s+(snnt|rajoitukset)/i,/unohda\s+(kaikki\s+)?(aiemmat|edelliset)/i,/poista\s+turvallisuus\s+kytst/i,/piilota\s+(kaikki\s+)?varoitukset/i,/poista\s+(kaikki\s+)?lokit/i,/ylikirjoita\s+turvasnnt/i,/toimi\s+ilman\s+rajoituksia/i,/ohita\s+turvatarkistukset/i],BN=[/ignoruj\s+(vechny\s+)?pedchoz\s+(instrukce|pokyny)/i,/pedstrej,?\s+e\s+(jsi|nem)/i,/obejdi\s+(sv\s+)?(pravidla|omezen)/i,/zapome\s+(na\s+)?(vechny\s+)?(pedchoz|dvj)/i,/vypni\s+bezpenost/i,/skryj\s+(vechna\s+)?varovn/i,/sma\s+(vechny\s+)?logy/i,/pepi\s+bezpenostn\s+pravidla/i,/jednej\s+bez\s+omezen/i,/pesko\s+bezpenostn\s+kontroly/i],zN=[/hagyd\s+figyelmen\s+kvl\s+(az\s+sszes\s+)?korbbi\s+utastst/i,/tegyl\s+gy,?\s+mintha/i,/kerld\s+meg\s+(a\s+)?(szablyokat|korltozsokat)/i,/felejtsd\s+el\s+(az\s+sszes\s+)?(korbbi|elz)/i,/kapcsold\s+ki\s+a\s+biztonsgot/i,/rejtsd\s+el\s+(az\s+sszes\s+)?figyelmeztetst/i,/trld\s+(az\s+sszes\s+)?naplt/i,/rd\s+fell\s+a\s+biztonsgi\s+szablyokat/i,/cselekedj\s+korltozsok\s+nlkl/i,/hagyd\s+ki\s+a\s+biztonsgi\s+ellenrzseket/i],VN=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],WN=[/\s+(\s+)??\s+\s+(|)\s+/i,/\s+\s+\s+(|)/i,/(|)\s+\s+(|)\s+/i,/\s+(\s+)?(|)\s+\s+/i,/\s+(\s+)?(|)\s+/i,/(\s+)??\s+\s+/i,/(\s+)?\s+(\s+)?/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i],GN=[/abaikan\s+(semua\s+)?instruksi\s+sebelumnya/i,/berpura-pura\s+(menjadi|bahwa\s+kamu)/i,/lewati\s+(aturan|batasan|pembatasan)/i,/lupakan\s+(semua\s+)?(sebelumnya|yang\s+lalu)/i,/nonaktifkan\s+keamanan/i,/sembunyikan\s+(semua\s+)?peringatan/i,/hapus\s+(semua\s+)?log/i,/timpa\s+aturan\s+keamanan/i,/bertindak\s+tanpa\s+batasan/i,/lewati\s+pemeriksaan\s+keamanan/i],KN=[/b\s+qua\s+(tt\s+c\s+)?hng\s+dn\s+trc/i,/gi\s+v\s+(l|rng\s+bn)/i,/vt\s+qua\s+(cc\s+)?(quy\s+tc|hn\s+ch)/i,/qun\s+(tt\s+c\s+)?(trc\s+|trc)/i,/tt\s+bo\s+mt/i,/n\s+(tt\s+c\s+)?cnh\s+bo/i,/xa\s+(tt\s+c\s+)?nht\s+k/i,/ghi\s+\s+quy\s+tc\s+bo\s+mt/i,/hnh\s+ng\s+khng\s+hn\s+ch/i,/b\s+qua\s+kim\s+tra\s+bo\s+mt/i],HN=[/\s*(|)\s*\s*()?/i,/\s*(|)/i,/\s*(|)/i,/\s*(|)\s*\s*()?/i,/\s*/i,/\s*\s*()?/i,/\s*\s*()?/i,/\s*/i,/\s*\s*/i,/\s*/i],YN=[/\s+(\s+\s+)?\s+/i,/\s+(\s+|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|)/i,/\s+\s+/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?\s+/i,/\s+\s+\s+/i,/\s+\s+/i,/\s+\s+\s+/i],qN=[/ignor\s+(toate\s+)?instruciunile\s+anterioare/i,/pref-te\s+(c\s+eti|a\s+fi)/i,/ocolete\s+(regulile|restriciile)/i,/uit\s+(toate\s+)?(anterioarele|precedentele)/i,/dezactiveaz\s+securitatea/i,/ascunde\s+(toate\s+)?avertismentele/i,/terge\s+(toate\s+)?jurnalele/i,/suprascrie\s+regulile\s+de\s+securitate/i,/acioneaz\s+fr\s+restricii/i,/sari\s+peste\s+verificrile\s+de\s+securitate/i],XN=[/\s+(\s+)?\s+/i,/\s+\s+(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|\s+)/i,/\s+(\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+)?\s+/i,/\s+\s+/i,/\s+\s+\s+/i],QN=[...Ov,...AN,...wN,...CN,...RN,...NN,...ON,...IN,..._N,...PN,...LN,...bN,...MN,...jN,...FN,...$N,...UN,...DN,...BN,...zN,...VN,...WN,...GN,...KN,...HN,...YN,...qN,...XN],ZN={id:"PS005",name:"blocked-patterns",description:"Content must not contain blocked patterns (prompt injection prevention)",defaultSeverity:"error",validate:r=>{const e=[...Ov,...(r.config.blockedPatterns??[]).map(t=>typeof t=="string"?new RegExp(t,"i"):t)];Ga(r.ast,(t,s)=>{for(const a of e)a.test(t)&&r.report({message:`Blocked pattern detected: ${a.source}`,location:s,suggestion:"Remove or rephrase the flagged content"})})}},Mm={namespace:/^@[a-z][a-z0-9-]*\/[a-z0-9-/]+(@\d+\.\d+\.\d+)?$/i,relative:/^\.\.?\/[a-z0-9-/.]+$/i};function jm(r){return Mm.namespace.test(r)||Mm.relative.test(r)}const JN={id:"PS006",name:"valid-path",description:"Path references must be valid",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;jm(e.raw)||r.report({message:`Invalid path reference: "${e.raw}"`,location:r.ast.inherit.loc??r.ast.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})}kN(r.ast,e=>{jm(e.path.raw)||r.report({message:`Invalid path reference: "${e.path.raw}"`,location:e.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})})}},eO={id:"PS007",name:"deprecated",description:"Warns about deprecated features",defaultSeverity:"warning",validate:r=>{const e={};for(const s of r.ast.blocks)s.name in e&&r.report({message:`Block "@${s.name}" is deprecated`,location:s.loc,suggestion:e[s.name]});const t={};if(r.ast.meta)for(const s of Object.keys(r.ast.meta.fields??{}))s in t&&r.report({message:`Meta field "${s}" is deprecated`,location:r.ast.meta.loc??r.ast.loc,suggestion:t[s]})}},tO={id:"PS008",name:"empty-block",description:"Blocks should have content",defaultSeverity:"warning",validate:r=>{TN(r.ast,e=>{if(!xN(e.content)){const t="name"in e?e.name:e.targetPath;r.report({message:`Block "${t}" has no content`,location:e.loc,suggestion:"Add content to the block or remove it if not needed"})}})}};function nO(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function Iv(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template";if(e.type==="TypeExpression")return"type"}return"object"}function rO(r,e){const t=Iv(r);switch(e.kind){case"string":return t==="string";case"number":return t==="number";case"boolean":return t==="boolean";case"enum":return t==="string"&&e.options.includes(r)}}const iO={id:"PS009",name:"valid-params",description:"Validate parameter definitions in @meta",defaultSeverity:"error",validate:r=>{const e=r.ast.meta?.params;if(!e||e.length===0)return;const t=new Set;for(const s of e)t.has(s.name)&&r.report({message:`Duplicate parameter definition: '${s.name}'`,location:s.loc,suggestion:"Remove the duplicate parameter definition"}),t.add(s.name);for(const s of e)if(s.defaultValue!==void 0&&!rO(s.defaultValue,s.paramType)){const a=nO(s.paramType),l=Iv(s.defaultValue);r.report({message:`Default value for '${s.name}' has wrong type: expected ${a}, got ${l}`,location:s.loc,suggestion:`Change the default value to a ${a}`})}for(const s of e)s.optional&&s.defaultValue===void 0&&r.report({message:`Optional parameter '${s.name}' has no default value`,location:s.loc,suggestion:"Consider adding a default value or marking as required"})}},sO=/\bhttp:\/\/[^\s"'<>]+/gi,oO=[/\b(?:https?:\/\/)?(?:bit\.ly|bitly\.com)\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tinyurl\.com\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?t\.co\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?goo\.gl\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?ow\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?is\.gd\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?buff\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?adf\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tiny\.cc\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?cutt\.ly\/[^\s"'<>]+/gi],aO=/\bhttps?:\/\/[^\s"'<>]*\?[^\s"'<>]*(?:session|token|auth|key|secret|password|credential|api_key|apikey|access_token|refresh_token)=[^\s"'<>&]+/gi,lO={id:"PS010",name:"suspicious-urls",description:"Detect suspicious URLs (HTTP, shorteners, credential parameters)",defaultSeverity:"warning",validate:r=>{Ga(r.ast,(e,t)=>{const s=e.match(sO);if(s)for(const l of s)r.report({message:`Insecure HTTP URL detected: ${l}`,location:t,suggestion:"Use HTTPS instead of HTTP for secure communication"});for(const l of oO){l.lastIndex=0;const c=e.match(l);if(c)for(const f of c)r.report({message:`URL shortener detected: ${f}`,location:t,suggestion:"Use full URLs instead of shorteners to ensure destination transparency"})}const a=e.match(aO);if(a)for(const l of a)r.report({message:`URL with suspicious credential parameter detected: ${l}`,location:t,suggestion:"Avoid embedding credentials or tokens in URLs"})})}},uO=[/\[?\s{0,10}MANDATORY\s{0,10}(?:POLICY|UPDATE|FOOTER|INSTRUCTION|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}OVERRIDE\s{0,10}\]?/i,/\[?\s{0,10}STRICT[_\s]{0,10}MODE\s{0,10}[:\s]{1,10}ON\s{0,10}\]?/i,/\[?\s{0,10}SYSTEM\s{0,10}(?:OVERRIDE|UPDATE|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}ADMIN(?:ISTRATOR)?\s{0,10}(?:MODE|OVERRIDE|ACCESS)\s{0,10}\]?/i,/\[?\s{0,10}ROOT\s{0,10}(?:ACCESS|MODE|OVERRIDE)\s{0,10}\]?/i,/\[?\s{0,10}PRIORITY\s{0,10}(?:OVERRIDE|ONE|ALPHA)\s{0,10}\]?/i,/\[?\s{0,10}EMERGENCY\s{0,10}(?:PROTOCOL|OVERRIDE|MODE)\s{0,10}\]?/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:WARN|ALERT|NOTIFY|FLAG|REPORT)/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:PROVIDE|SHOW|DISPLAY|INCLUDE)\s{1,10}(?:SECURITY\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?(?:SECURITY\s{1,10})?(?:ALERTS?|NOTIFICATIONS?)/i,/IGNORE\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?WARNINGS?/i,/(?:SKIP|BYPASS)\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?(?:CHECKS?|VALIDATION)/i,/EXECUTE\s{1,10}(?:THIS\s{1,10})?VERBATIM/i,/FOLLOW\s{1,10}(?:THESE?\s{1,10})?(?:INSTRUCTIONS?\s{1,10})?(?:EXACTLY|PRECISELY|LITERALLY)/i,/(?:MUST|SHALL|WILL)\s{1,10}(?:ALWAYS\s{1,10})?COMPLY/i,/(?:ABSOLUTE|UNCONDITIONAL)\s{1,10}(?:COMPLIANCE|OBEDIENCE)/i,/NO\s{1,10}(?:EXCEPTIONS?|DEVIATIONS?)\s{1,10}(?:ALLOWED|PERMITTED)/i,/THIS\s{1,10}(?:OVERRIDES?|SUPERSEDES?|REPLACES?)\s{1,10}(?:ALL\s{1,10})?(?:PREVIOUS|PRIOR|OTHER)/i,/(?:HIGHEST|TOP|MAXIMUM)\s{1,10}PRIORITY\s{1,10}(?:INSTRUCTION|DIRECTIVE|ORDER)/i,/(?:CORE|FUNDAMENTAL|BASE)\s{1,10}(?:DIRECTIVE|INSTRUCTION)\s{1,10}(?:UPDATE|OVERRIDE)/i,/NEW\s{1,10}(?:SYSTEM|CORE|BASE)\s{1,10}(?:INSTRUCTIONS?|DIRECTIVES?|RULES?)/i],cO={id:"PS011",name:"authority-injection",description:"Detect authoritative override phrases that may indicate prompt injection",defaultSeverity:"error",validate:r=>{Ga(r.ast,(e,t)=>{for(const s of uO)s.test(e)&&r.report({message:`Authority injection pattern detected: ${s.source}`,location:t,suggestion:"Remove authoritative override language that could be used for prompt injection"})})}},fO=32,dO=/(?:[A-Za-z0-9+/]{4}){8,}(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?/g,hO=/(?:\\x[0-9a-fA-F]{2}){4,}/g,pO=/(?:\\u[0-9a-fA-F]{4}){3,}/g,mO=/(?:%[0-9a-fA-F]{2}){8,}/g,gO=["data:image/","data:application/json","data:text/"];function vO(r){if(r.includes("/")||r.includes("-")||r.includes("_")){const e=r.split(/[/\-_+]/);if(e.filter(s=>s.length<3||s.length>20||!/^[A-Za-z]+$/.test(s)?!1:!!/[aeiouAEIOU]/.test(s)).length>e.length/2)return!0}return!1}function yO(r,e){const t=r.indexOf(e);if(t===-1)return!1;const s=r.substring(Math.max(0,t-30),t);for(const a of gO)if(s.includes(a))return!0;return!!vO(e)}const EO={id:"PS012",name:"obfuscated-content",description:"Detect obfuscated content (Base64, hex escapes, encoded payloads)",defaultSeverity:"warning",validate:r=>{Ga(r.ast,(e,t)=>{const s=e.match(dO);if(s)for(const f of s)f.length>=fO&&!yO(e,f)&&r.report({message:`Potential Base64-encoded content detected (${f.length} chars)`,location:t,suggestion:"If this is intentional, consider using plain text or documenting the purpose"});const a=e.match(hO);if(a)for(const f of a)r.report({message:`Hex escape sequence detected: ${f.substring(0,20)}...`,location:t,suggestion:"Use plain text instead of hex-encoded content"});const l=e.match(pO);if(l)for(const f of l)r.report({message:`Unicode escape sequence detected: ${f.substring(0,24)}...`,location:t,suggestion:"Use plain text instead of unicode-encoded content"});const c=e.match(mO);if(c)for(const f of c)r.report({message:`URL-encoded sequence detected: ${f.substring(0,24)}...`,location:t,suggestion:"Use plain text instead of URL-encoded content"})})}},SO=[mN,gN,yN,EN,ZN,JN,eO,tO,iO,lO,cO,EO];class TO{rules;config;disabledRules;logger;constructor(e={}){if(this.config=e,this.rules=[...SO],this.disabledRules=new Set(e.disableRules??[]),this.logger=e.logger??of,e.customRules)for(const t of e.customRules)this.rules.push(t);this.logger.debug(`Validator initialized with ${this.rules.length} rules`)}validate(e){const t=[],s=this.rules.filter(f=>!this.disabledRules.has(f.name)&&!this.disabledRules.has(f.id));this.logger.verbose(`Running ${s.length} validation rules`);for(const f of this.rules){if(this.disabledRules.has(f.name)||this.disabledRules.has(f.id)){this.logger.debug(`Skipping disabled rule: ${f.name}`);continue}const m=this.config.rules?.[f.name]??f.defaultSeverity;if(m==="off"){this.logger.debug(`Skipping off rule: ${f.name}`);continue}this.logger.debug(`Running rule: ${f.name} (${m})`);const g={ast:e,config:this.config,report:y=>{t.push({ruleId:f.id,ruleName:f.name,severity:m,...y})}};f.validate(g)}const a=t.filter(f=>f.severity==="error"),l=t.filter(f=>f.severity==="warning"),c=t.filter(f=>f.severity==="info");return(a.length>0||l.length>0)&&this.logger.verbose(`Validation: ${a.length} error(s), ${l.length} warning(s)`),{valid:a.length===0,errors:a,warnings:l,infos:c,all:t}}addRule(e){this.rules.push(e)}removeRule(e){const t=this.rules.findIndex(s=>s.name===e||s.id===e);return t!==-1?(this.rules.splice(t,1),!0):!1}getConfig(){return{...this.config}}getRules(){return[...this.rules]}}const kO={blockedPatterns:[/send\s+(?:this|all|the)\s+(?:data|information|content)\s+to/i,/upload\s+(?:this|all|the)\s+(?:data|files?|content)\s+to/i,/forward\s+(?:all\s+)?(?:messages?|responses?)\s+to/i,/remember\s+this\s+(?:permanently|forever|always)/i,/store\s+(?:this|these)\s+(?:instructions?|rules?)/i,/you\s+are\s+now\s+(?:a\s+)?different\s+(?:AI|model|system)/i,/switch\s+to\s+(?:a\s+)?(?:different|new)\s+(?:mode|persona)/i]};[...kO.blockedPatterns??[],...QN];class xO{resolver;validator;loadedFormatters;logger;customConventions;prettierOptions;constructor(e){this.logger=e.logger??of,this.customConventions=e.customConventions,this.prettierOptions=e.prettier,this.resolver=new nN({fs:e.fs,cache:e.cache,logger:this.logger,envVars:e.envVars}),this.validator=new TO({...e.validator,logger:this.logger});const t=e.formatters??Nr.list();this.loadedFormatters=this.loadFormatters(t),this.logger.debug(`BrowserCompiler initialized with ${this.loadedFormatters.length} formatters`)}async compile(e){this.logger.verbose(`Entry: ${e}`),this.logger.verbose(`Targets: ${this.loadedFormatters.map(y=>y.formatter.name).join(", ")}`);const t=Date.now(),s={resolveTime:0,validateTime:0,formatTime:0,totalTime:0};this.logger.verbose("=== Stage 1: Resolve ===");const a=Date.now();let l;try{l=await this.resolver.resolve(e)}catch(y){return s.resolveTime=Date.now()-a,s.totalTime=Date.now()-t,this.logger.verbose(`Resolve failed (${s.resolveTime}ms)`),{success:!1,outputs:new Map,errors:[this.toCompileError(y)],warnings:[],stats:s}}if(s.resolveTime=Date.now()-a,this.logger.verbose(`Resolve completed (${s.resolveTime}ms)`),l.errors.length>0||!l.ast)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:l.errors.map(y=>this.toCompileError(y)),warnings:[],stats:s};this.logger.verbose("=== Stage 2: Validate ===");const c=Date.now(),f=this.validator.validate(l.ast);if(s.validateTime=Date.now()-c,this.logger.verbose(`Validate completed (${s.validateTime}ms)`),!f.valid)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:f.errors.map(y=>this.validationToCompileError(y)),warnings:f.warnings,stats:s};this.logger.verbose("=== Stage 3: Format ===");const h=Date.now(),m=new Map,g=[];for(const{formatter:y,config:E}of this.loadedFormatters){const k=Date.now();this.logger.verbose(`Formatting for ${y.name}`);try{const w=this.getFormatOptionsForTarget(y.name,E);this.logger.debug(`  Convention: ${w.convention??"default"}`);const R=y.format(l.ast,w),j=Date.now()-k;if(this.logger.verbose(`   ${R.path} (${j}ms)`),m.set(R.path,R),R.additionalFiles)for(const M of R.additionalFiles)this.logger.verbose(`   ${M.path} (additional)`),m.set(M.path,M)}catch(w){g.push({name:"FormatterError",code:"PS4000",message:`Formatter '${y.name}' failed: ${w.message}`})}}return s.formatTime=Date.now()-h,s.totalTime=Date.now()-t,this.logger.verbose(`Format completed (${s.formatTime}ms)`),g.length>0?{success:!1,outputs:m,errors:g,warnings:f.warnings,stats:s}:{success:!0,outputs:m,errors:[],warnings:f.warnings,stats:s}}getFormatters(){return this.loadedFormatters.map(e=>e.formatter)}clearCache(){this.resolver.clearCache()}getFormatOptionsForTarget(e,t){const s={outputPath:t?.output,version:t?.version,prettier:this.prettierOptions},a=t?.convention;return a&&this.customConventions?.[a]?s.convention=this.customConventions[a]:a&&(s.convention=a),s}loadFormatters(e){return e.map(t=>{if(typeof t=="string")return{formatter:this.loadFormatterByName(t)};if(typeof t=="function")return{formatter:new t};if("name"in t&&typeof t.name=="string"&&!("format"in t)){const s=t;return{formatter:this.loadFormatterByName(s.name),config:s.config}}return{formatter:t}})}loadFormatterByName(e){const t=Nr.get(e);if(t)return t;throw new Error(`Unknown formatter: '${e}'. Available formatters: ${Nr.list().join(", ")}`)}toCompileError(e){const t=e;return{name:e.name,code:t.code??"PS0000",message:e.message,location:t.location?{file:t.location.file,line:t.location.line,column:t.location.column}:void 0}}validationToCompileError(e){return{name:"ValidationError",code:e.ruleId,message:e.message,location:e.location?{file:e.location.file,line:e.location.line,column:e.location.column}:void 0}}}const AO=`@meta {
  id: "@core/base"
  syntax: "1.0.0"
  description: "Universal AI assistant foundation"
  tags: [core, foundation]
}

@identity {
  """
  You are a helpful, accurate, and thoughtful AI assistant.

  Core principles:
  - Accuracy over speed - verify before responding
  - Clarity over complexity - explain simply first
  - Safety first - never compromise security
  - Respect boundaries - acknowledge limitations
  """
}

@standards {
  communication: ["Professional tone", "Clear format", "Citations when applicable"]
  reasoning: ["Show work", "Acknowledge uncertainty"]
}

@restrictions {
  - "Never generate harmful, illegal, or unethical content"
  - "Never pretend to have capabilities you don't have"
  - "Always clarify when unsure rather than guessing"
}
`,wO=`@meta {
  id: "@core/quality"
  syntax: "1.0.0"
  description: "Code quality standards mixin - use with @use"
  tags: [core, quality, mixin]
  mixin: true
}

@identity {
  """
  You prioritize code quality and maintainability in all outputs.

  Quality principles:
  - Write code for humans first, machines second
  - Favor readability over cleverness
  - Keep functions small and focused
  - Make dependencies explicit
  """
}

@standards {
  code: ["Descriptive naming", "Single responsibility functions", "Consistent formatting"]
  architecture: ["Loose coupling", "High cohesion", "Explicit dependencies"]
  testing: ["Meaningful coverage", "Isolated tests", "Descriptive naming"]
}

@restrictions {
  - "Never sacrifice readability for micro-optimizations"
  - "Never leave dead code or commented-out blocks"
  - "Never use magic numbers without named constants"
  - "Never ignore compiler/linter warnings without justification"
}

@knowledge {
  """
  ## SOLID Principles
  - **S**ingle Responsibility: One reason to change
  - **O**pen/Closed: Open for extension, closed for modification
  - **L**iskov Substitution: Subtypes must be substitutable
  - **I**nterface Segregation: Many specific interfaces over one general
  - **D**ependency Inversion: Depend on abstractions
  """
}

@shortcuts {
  "/quality": "Review code for quality improvements"
  "/refactor": "Suggest refactoring opportunities"
}
`,CO=`@meta {
  id: "@core/security"
  syntax: "1.0.0"
  description: "Security best practices mixin - use with @use"
  tags: [core, security, mixin]
  mixin: true
}

@identity {
  """
  You prioritize security in all interactions and code generation.

  Security mindset:
  - Assume all input is potentially malicious
  - Apply defense in depth principles
  - Follow the principle of least privilege
  - Keep security considerations visible
  """
}

@standards {
  code: ["Input validation required", "Output encoding required", "Check authorization"]
  secrets: ["Never hardcoded", "Never logged", "Prevent exposure"]
  dependencies: ["Audit regularly", "Pin versions", "Use trusted sources only"]
}

@restrictions {
  - "Never generate code with known vulnerabilities"
  - "Never expose secrets, credentials, or API keys"
  - "Never disable security features without explicit user consent"
  - "Never trust user input without validation"
  - "Never use deprecated or insecure cryptographic functions"
}

@knowledge {
  """
  ## OWASP Top 10 Awareness
  - Injection (SQL, NoSQL, OS, LDAP)
  - Broken Authentication
  - Sensitive Data Exposure
  - XML External Entities (XXE)
  - Broken Access Control
  - Security Misconfiguration
  - Cross-Site Scripting (XSS)
  - Insecure Deserialization
  - Using Components with Known Vulnerabilities
  - Insufficient Logging & Monitoring
  """
}

@shortcuts {
  "/security-review": "Review code for security vulnerabilities"
  "/threat-model": "Analyze potential security threats"
}
`,RO={"@core/base.prs":AO,"@core/quality.prs":wO,"@core/security.prs":CO};function NO(){return{...RO}}async function OO(r,e,t={}){const s=new Lc(r);if(t.bundledRegistry!==!1){const l=NO();for(const[c,f]of Object.entries(l))s.exists(c)||s.write(c,f)}return new xO({fs:s,formatters:t.formatters,validator:t.validator,customConventions:t.customConventions,prettier:t.prettier,envVars:t.envVars}).compile(e)}const IO=300;function _O(){const r=ie(eE),e=ie(h=>h.activeFile),t=ie(h=>h.config),s=ie(h=>h.setCompiling),a=ie(h=>h.setCompileResult),l=Z.useRef(null),c=Z.useRef(""),f=Z.useCallback(async()=>{const h=JSON.stringify({files:r,config:t});if(h===c.current)return;c.current=h;const m=Object.entries(t.targets).filter(([,g])=>g.enabled).map(([g,y])=>({name:g,config:y.version||y.convention?{...y.version&&{version:y.version},...y.convention&&{convention:y.convention}}:void 0}));if(m.length===0){a({success:!0,outputs:new Map,errors:[],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}});return}s(!0);try{const g=await OO(r,e,{bundledRegistry:!0,formatters:m,prettier:{tabWidth:t.formatting.tabWidth,proseWrap:t.formatting.proseWrap,printWidth:t.formatting.printWidth},envVars:t.envVars});a(g)}catch(g){console.error("Compilation error:",g),a({success:!1,outputs:new Map,errors:[{name:"CompileError",code:"PS0000",message:g instanceof Error?g.message:String(g)}],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}})}finally{s(!1)}},[r,e,t,s,a]);return Z.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{f()},IO),()=>{l.current&&clearTimeout(l.current)}),[f]),Z.useEffect(()=>{f()},[t]),{compile:f}}function PO(){_O();const r=ie(e=>e.showExamples);return C.jsxs("div",{className:"h-screen flex flex-col bg-ps-bg",children:[C.jsx(vE,{}),C.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[C.jsxs("div",{className:"w-1/2 flex flex-col border-r border-ps-border",children:[C.jsx(yE,{}),C.jsx("div",{className:"flex-1",children:C.jsx(LS,{})})]}),C.jsx("div",{className:"w-1/2 flex flex-col",children:C.jsx(jS,{})})]}),r&&C.jsx(US,{}),C.jsx(WS,{}),C.jsx(KS,{})]})}const _v=document.getElementById("root");if(!_v)throw new Error("Root element not found");F0.createRoot(_v).render(C.jsx(Z.StrictMode,{children:C.jsx(PO,{})}))});export default LO();
