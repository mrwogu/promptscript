var v0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var NN=v0((_t,Pt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Cc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Mu={exports:{}},os={},bu={exports:{}},ge={};var Hh;function y0(){if(Hh)return ge;Hh=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function j(k,F,fe){this.props=k,this.context=F,this.refs=R,this.updater=fe||x}j.prototype.isReactComponent={},j.prototype.setState=function(k,F){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,F,"setState")},j.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function b(){}b.prototype=j.prototype;function _(k,F,fe){this.props=k,this.context=F,this.refs=R,this.updater=fe||x}var P=_.prototype=new b;P.constructor=_,A(P,j.prototype),P.isPureReactComponent=!0;var M=Array.isArray,z=Object.prototype.hasOwnProperty,L={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function G(k,F,fe){var te,Se={},oe=null,he=null;if(F!=null)for(te in F.ref!==void 0&&(he=F.ref),F.key!==void 0&&(oe=""+F.key),F)z.call(F,te)&&!D.hasOwnProperty(te)&&(Se[te]=F[te]);var ye=arguments.length-2;if(ye===1)Se.children=fe;else if(1<ye){for(var me=Array(ye),Le=0;Le<ye;Le++)me[Le]=arguments[Le+2];Se.children=me}if(k&&k.defaultProps)for(te in ye=k.defaultProps,ye)Se[te]===void 0&&(Se[te]=ye[te]);return{$$typeof:r,type:k,key:oe,ref:he,props:Se,_owner:L.current}}function ke(k,F){return{$$typeof:r,type:k.type,key:F,ref:k.ref,props:k.props,_owner:k._owner}}function ce(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function Ge(k){var F={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(fe){return F[fe]})}var tt=/\/+/g;function $e(k,F){return typeof k=="object"&&k!==null&&k.key!=null?Ge(""+k.key):F.toString(36)}function Ue(k,F,fe,te,Se){var oe=typeof k;(oe==="undefined"||oe==="boolean")&&(k=null);var he=!1;if(k===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(k.$$typeof){case r:case e:he=!0}}if(he)return he=k,Se=Se(he),k=te===""?"."+$e(he,0):te,M(Se)?(fe="",k!=null&&(fe=k.replace(tt,"$&/")+"/"),Ue(Se,F,fe,"",function(Le){return Le})):Se!=null&&(ce(Se)&&(Se=ke(Se,fe+(!Se.key||he&&he.key===Se.key?"":(""+Se.key).replace(tt,"$&/")+"/")+k)),F.push(Se)),1;if(he=0,te=te===""?".":te+":",M(k))for(var ye=0;ye<k.length;ye++){oe=k[ye];var me=te+$e(oe,ye);he+=Ue(oe,F,fe,me,Se)}else if(me=S(k),typeof me=="function")for(k=me.call(k),ye=0;!(oe=k.next()).done;)oe=oe.value,me=te+$e(oe,ye++),he+=Ue(oe,F,fe,me,Se);else if(oe==="object")throw F=String(k),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return he}function de(k,F,fe){if(k==null)return k;var te=[],Se=0;return Ue(k,te,"","",function(oe){return F.call(fe,oe,Se++)}),te}function ve(k){if(k._status===-1){var F=k._result;F=F(),F.then(function(fe){(k._status===0||k._status===-1)&&(k._status=1,k._result=fe)},function(fe){(k._status===0||k._status===-1)&&(k._status=2,k._result=fe)}),k._status===-1&&(k._status=0,k._result=F)}if(k._status===1)return k._result.default;throw k._result}var we={current:null},W={transition:null},J={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function K(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:de,forEach:function(k,F,fe){de(k,function(){F.apply(this,arguments)},fe)},count:function(k){var F=0;return de(k,function(){F++}),F},toArray:function(k){return de(k,function(F){return F})||[]},only:function(k){if(!ce(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ge.Component=j,ge.Fragment=t,ge.Profiler=a,ge.PureComponent=_,ge.StrictMode=s,ge.Suspense=h,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ge.act=K,ge.cloneElement=function(k,F,fe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var te=A({},k.props),Se=k.key,oe=k.ref,he=k._owner;if(F!=null){if(F.ref!==void 0&&(oe=F.ref,he=L.current),F.key!==void 0&&(Se=""+F.key),k.type&&k.type.defaultProps)var ye=k.type.defaultProps;for(me in F)z.call(F,me)&&!D.hasOwnProperty(me)&&(te[me]=F[me]===void 0&&ye!==void 0?ye[me]:F[me])}var me=arguments.length-2;if(me===1)te.children=fe;else if(1<me){ye=Array(me);for(var Le=0;Le<me;Le++)ye[Le]=arguments[Le+2];te.children=ye}return{$$typeof:r,type:k.type,key:Se,ref:oe,props:te,_owner:he}},ge.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},ge.createElement=G,ge.createFactory=function(k){var F=G.bind(null,k);return F.type=k,F},ge.createRef=function(){return{current:null}},ge.forwardRef=function(k){return{$$typeof:f,render:k}},ge.isValidElement=ce,ge.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:ve}},ge.memo=function(k,F){return{$$typeof:m,type:k,compare:F===void 0?null:F}},ge.startTransition=function(k){var F=W.transition;W.transition={};try{k()}finally{W.transition=F}},ge.unstable_act=K,ge.useCallback=function(k,F){return we.current.useCallback(k,F)},ge.useContext=function(k){return we.current.useContext(k)},ge.useDebugValue=function(){},ge.useDeferredValue=function(k){return we.current.useDeferredValue(k)},ge.useEffect=function(k,F){return we.current.useEffect(k,F)},ge.useId=function(){return we.current.useId()},ge.useImperativeHandle=function(k,F,fe){return we.current.useImperativeHandle(k,F,fe)},ge.useInsertionEffect=function(k,F){return we.current.useInsertionEffect(k,F)},ge.useLayoutEffect=function(k,F){return we.current.useLayoutEffect(k,F)},ge.useMemo=function(k,F){return we.current.useMemo(k,F)},ge.useReducer=function(k,F,fe){return we.current.useReducer(k,F,fe)},ge.useRef=function(k){return we.current.useRef(k)},ge.useState=function(k){return we.current.useState(k)},ge.useSyncExternalStore=function(k,F,fe){return we.current.useSyncExternalStore(k,F,fe)},ge.useTransition=function(){return we.current.useTransition()},ge.version="18.3.1",ge}var Yh;function As(){return Yh||(Yh=1,bu.exports=y0()),bu.exports}var Xh;function S0(){if(Xh)return os;Xh=1;var r=As(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var g,y={},S=null,x=null;m!==void 0&&(S=""+m),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(x=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(f&&f.defaultProps)for(g in h=f.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:f,key:S,ref:x,props:y,_owner:a.current}}return os.Fragment=t,os.jsx=c,os.jsxs=c,os}var qh;function E0(){return qh||(qh=1,Mu.exports=S0()),Mu.exports}var C=E0(),Z=As();const Ar=Cc(Z);var Wo={},ju={exports:{}},Et={},Fu={exports:{}},$u={};var Qh;function T0(){return Qh||(Qh=1,(function(r){function e(W,J){var K=W.length;W.push(J);e:for(;0<K;){var k=K-1>>>1,F=W[k];if(0<a(F,J))W[k]=J,W[K]=F,K=k;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var J=W[0],K=W.pop();if(K!==J){W[0]=K;e:for(var k=0,F=W.length,fe=F>>>1;k<fe;){var te=2*(k+1)-1,Se=W[te],oe=te+1,he=W[oe];if(0>a(Se,K))oe<F&&0>a(he,Se)?(W[k]=he,W[oe]=K,k=oe):(W[k]=Se,W[te]=K,k=te);else if(oe<F&&0>a(he,K))W[k]=he,W[oe]=K,k=oe;else break e}}return J}function a(W,J){var K=W.sortIndex-J.sortIndex;return K!==0?K:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,S=3,x=!1,A=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var J=t(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=W)s(m),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(m)}}function M(W){if(R=!1,P(W),!A)if(t(h)!==null)A=!0,ve(z);else{var J=t(m);J!==null&&we(M,J.startTime-W)}}function z(W,J){A=!1,R&&(R=!1,b(G),G=-1),x=!0;var K=S;try{for(P(J),y=t(h);y!==null&&(!(y.expirationTime>J)||W&&!Ge());){var k=y.callback;if(typeof k=="function"){y.callback=null,S=y.priorityLevel;var F=k(y.expirationTime<=J);J=r.unstable_now(),typeof F=="function"?y.callback=F:y===t(h)&&s(h),P(J)}else s(h);y=t(h)}if(y!==null)var fe=!0;else{var te=t(m);te!==null&&we(M,te.startTime-J),fe=!1}return fe}finally{y=null,S=K,x=!1}}var L=!1,D=null,G=-1,ke=5,ce=-1;function Ge(){return!(r.unstable_now()-ce<ke)}function tt(){if(D!==null){var W=r.unstable_now();ce=W;var J=!0;try{J=D(!0,W)}finally{J?$e():(L=!1,D=null)}}else L=!1}var $e;if(typeof _=="function")$e=function(){_(tt)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,de=Ue.port2;Ue.port1.onmessage=tt,$e=function(){de.postMessage(null)}}else $e=function(){j(tt,0)};function ve(W){D=W,L||(L=!0,$e())}function we(W,J){G=j(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,ve(z))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(W){switch(S){case 1:case 2:case 3:var J=3;break;default:J=S}var K=S;S=J;try{return W()}finally{S=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=S;S=W;try{return J()}finally{S=K}},r.unstable_scheduleCallback=function(W,J,K){var k=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?k+K:k):K=k,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=K+F,W={id:g++,callback:J,priorityLevel:W,startTime:K,expirationTime:F,sortIndex:-1},K>k?(W.sortIndex=K,e(m,W),t(h)===null&&W===t(m)&&(R?(b(G),G=-1):R=!0,we(M,K-k))):(W.sortIndex=F,e(h,W),A||x||(A=!0,ve(z))),W},r.unstable_shouldYield=Ge,r.unstable_wrapCallback=function(W){var J=S;return function(){var K=S;S=J;try{return W.apply(this,arguments)}finally{S=K}}}})($u)),$u}var Zh;function x0(){return Zh||(Zh=1,Fu.exports=T0()),Fu.exports}var Jh;function w0(){if(Jh)return Et;Jh=1;var r=As(),e=x0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function S(n){return h.call(y,n)?!0:h.call(g,n)?!1:m.test(n)?y[n]=!0:(g[n]=!0,!1)}function x(n,i,o,u){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,i,o,u){if(i===null||typeof i>"u"||x(n,i,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function R(n,i,o,u,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new R(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new R(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new R(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new R(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new R(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new R(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new R(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new R(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new R(n,5,!1,n.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(b,_);j[i]=new R(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(b,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(b,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,o,u){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,o,d,u)&&(o=null),u||d===null?S(i)&&(o===null?n.removeAttribute(i):n.setAttribute(i,""+o)):d.mustUseProperty?n[d.propertyName]=o===null?d.type===3?!1:"":o:(i=d.attributeName,u=d.attributeNamespace,o===null?n.removeAttribute(i):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,u?n.setAttributeNS(u,i,o):n.setAttribute(i,o))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),L=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,k;function F(n){if(k===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||""}return`
`+k+n}var fe=!1;function te(n,i){if(!n||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(I){var u=I}Reflect.construct(n,[],i)}else{try{i.call()}catch(I){u=I}n.call(i.prototype)}else{try{throw Error()}catch(I){u=I}n()}}catch(I){if(I&&u&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),p=u.stack.split(`
`),v=d.length-1,E=p.length-1;1<=v&&0<=E&&d[v]!==p[E];)E--;for(;1<=v&&0<=E;v--,E--)if(d[v]!==p[E]){if(v!==1||E!==1)do if(v--,E--,0>E||d[v]!==p[E]){var T=`
`+d[v].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=v&&0<=E);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?F(n):""}function Se(n){switch(n.tag){case 5:return F(n.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case L:return"Portal";case ke:return"Profiler";case G:return"StrictMode";case $e:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case ce:return(n._context.displayName||"Context")+".Provider";case tt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return i=n.displayName||null,i!==null?i:oe(n.type)||"Memo";case ve:i=n._payload,n=n._init;try{return oe(n(i))}catch{}}return null}function he(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function me(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Le(n){var i=me(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function kt(n){n._valueTracker||(n._valueTracker=Le(n))}function jt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=me(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cr(n,i){var o=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function Ei(n,i){var o=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;o=ye(i.value!=null?i.value:o),n._wrapperState={initialChecked:u,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ef(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function za(n,i){ef(n,i);var o=ye(i.value),u=i.type;if(o!=null)u==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Va(n,i.type,o):i.hasOwnProperty("defaultValue")&&Va(n,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function tf(n,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,o||i===n.value||(n.value=i),n.defaultValue=i}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function Va(n,i,o){(i!=="number"||Ft(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Ti=Array.isArray;function Mr(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ye(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Wa(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nf(n,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(t(92));if(Ti(o)){if(1<o.length)throw Error(t(93));o=o[0]}i=o}i==null&&(i=""),o=i}n._wrapperState={initialValue:ye(o)}}function rf(n,i){var o=ye(i.value),u=ye(i.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),i.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),u!=null&&(n.defaultValue=""+u)}function sf(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function of(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?of(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var bs,af=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,u,d){MSApp.execUnsafeLocalFunction(function(){return n(i,o,u,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(bs=bs||document.createElement("div"),bs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=bs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function xi(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tv=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(n){Tv.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),wi[i]=wi[n]})});function lf(n,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||wi.hasOwnProperty(n)&&wi[n]?(""+i).trim():i+"px"}function uf(n,i){n=n.style;for(var o in i)if(i.hasOwnProperty(o)){var u=o.indexOf("--")===0,d=lf(o,i[o],u);o==="float"&&(o="cssFloat"),u?n.setProperty(o,d):n[o]=d}}var xv=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(n,i){if(i){if(xv[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ha(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function Xa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qa=null,br=null,jr=null;function cf(n){if(n=Gi(n)){if(typeof qa!="function")throw Error(t(280));var i=n.stateNode;i&&(i=io(i),qa(n.stateNode,n.type,i))}}function ff(n){br?jr?jr.push(n):jr=[n]:br=n}function df(){if(br){var n=br,i=jr;if(jr=br=null,cf(n),i)for(n=0;n<i.length;n++)cf(i[n])}}function hf(n,i){return n(i)}function pf(){}var Qa=!1;function mf(n,i,o){if(Qa)return n(i,o);Qa=!0;try{return hf(n,i,o)}finally{Qa=!1,(br!==null||jr!==null)&&(pf(),df())}}function ki(n,i){var o=n.stateNode;if(o===null)return null;var u=io(o);if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,i,typeof o));return o}var Za=!1;if(f)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Za=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Za=!1}function wv(n,i,o,u,d,p,v,E,T){var I=Array.prototype.slice.call(arguments,3);try{i.apply(o,I)}catch(U){this.onError(U)}}var Ci=!1,js=null,Fs=!1,Ja=null,kv={onError:function(n){Ci=!0,js=n}};function Av(n,i,o,u,d,p,v,E,T){Ci=!1,js=null,wv.apply(kv,arguments)}function Cv(n,i,o,u,d,p,v,E,T){if(Av.apply(this,arguments),Ci){if(Ci){var I=js;Ci=!1,js=null}else throw Error(t(198));Fs||(Fs=!0,Ja=I)}}function fr(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function gf(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function vf(n){if(fr(n)!==n)throw Error(t(188))}function Rv(n){var i=n.alternate;if(!i){if(i=fr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return vf(d),n;if(p===u)return vf(d),i;p=p.sibling}throw Error(t(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,E=d.child;E;){if(E===o){v=!0,o=d,u=p;break}if(E===u){v=!0,u=d,o=p;break}E=E.sibling}if(!v){for(E=p.child;E;){if(E===o){v=!0,o=p,u=d;break}if(E===u){v=!0,u=p,o=d;break}E=E.sibling}if(!v)throw Error(t(189))}}if(o.alternate!==u)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:i}function yf(n){return n=Rv(n),n!==null?Sf(n):null}function Sf(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Sf(n);if(i!==null)return i;n=n.sibling}return null}var Ef=e.unstable_scheduleCallback,Tf=e.unstable_cancelCallback,Nv=e.unstable_shouldYield,Ov=e.unstable_requestPaint,Ve=e.unstable_now,Iv=e.unstable_getCurrentPriorityLevel,el=e.unstable_ImmediatePriority,xf=e.unstable_UserBlockingPriority,$s=e.unstable_NormalPriority,_v=e.unstable_LowPriority,wf=e.unstable_IdlePriority,Us=null,fn=null;function Pv(n){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Us,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:bv,Lv=Math.log,Mv=Math.LN2;function bv(n){return n>>>=0,n===0?32:31-(Lv(n)/Mv|0)|0}var Ds=64,Bs=4194304;function Ri(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zs(n,i){var o=n.pendingLanes;if(o===0)return 0;var u=0,d=n.suspendedLanes,p=n.pingedLanes,v=o&268435455;if(v!==0){var E=v&~d;E!==0?u=Ri(E):(p&=v,p!==0&&(u=Ri(p)))}else v=o&~d,v!==0?u=Ri(v):p!==0&&(u=Ri(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=o&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)o=31-qt(i),d=1<<o,u|=n[o],i&=~d;return u}function jv(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-qt(p),E=1<<v,T=d[v];T===-1?((E&o)===0||(E&u)!==0)&&(d[v]=jv(E,i)):T<=i&&(n.expiredLanes|=E),p&=~E}}function tl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kf(){var n=Ds;return Ds<<=1,(Ds&4194240)===0&&(Ds=64),n}function nl(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ni(n,i,o){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-qt(i),n[i]=o}function $v(n,i){var o=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<o;){var d=31-qt(o),p=1<<d;i[d]=0,u[d]=-1,n[d]=-1,o&=~p}}function rl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-qt(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}var Ae=0;function Af(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Cf,il,Rf,Nf,Of,sl=!1,Vs=[],$n=null,Un=null,Dn=null,Oi=new Map,Ii=new Map,Bn=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function If(n,i){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Oi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(i.pointerId)}}function _i(n,i,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Gi(i),i!==null&&il(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Dv(n,i,o,u,d){switch(i){case"focusin":return $n=_i($n,n,i,o,u,d),!0;case"dragenter":return Un=_i(Un,n,i,o,u,d),!0;case"mouseover":return Dn=_i(Dn,n,i,o,u,d),!0;case"pointerover":var p=d.pointerId;return Oi.set(p,_i(Oi.get(p)||null,n,i,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Ii.set(p,_i(Ii.get(p)||null,n,i,o,u,d)),!0}return!1}function _f(n){var i=dr(n.target);if(i!==null){var o=fr(i);if(o!==null){if(i=o.tag,i===13){if(i=gf(o),i!==null){n.blockedOn=i,Of(n.priority,function(){Rf(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ws(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=al(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ya=u,o.target.dispatchEvent(u),Ya=null}else return i=Gi(o),i!==null&&il(i),n.blockedOn=o,!1;i.shift()}return!0}function Pf(n,i,o){Ws(n)&&o.delete(i)}function Bv(){sl=!1,$n!==null&&Ws($n)&&($n=null),Un!==null&&Ws(Un)&&(Un=null),Dn!==null&&Ws(Dn)&&(Dn=null),Oi.forEach(Pf),Ii.forEach(Pf)}function Pi(n,i){n.blockedOn===i&&(n.blockedOn=null,sl||(sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bv)))}function Li(n){function i(d){return Pi(d,n)}if(0<Vs.length){Pi(Vs[0],n);for(var o=1;o<Vs.length;o++){var u=Vs[o];u.blockedOn===n&&(u.blockedOn=null)}}for($n!==null&&Pi($n,n),Un!==null&&Pi(Un,n),Dn!==null&&Pi(Dn,n),Oi.forEach(i),Ii.forEach(i),o=0;o<Bn.length;o++)u=Bn[o],u.blockedOn===n&&(u.blockedOn=null);for(;0<Bn.length&&(o=Bn[0],o.blockedOn===null);)_f(o),o.blockedOn===null&&Bn.shift()}var Fr=M.ReactCurrentBatchConfig,Gs=!0;function zv(n,i,o,u){var d=Ae,p=Fr.transition;Fr.transition=null;try{Ae=1,ol(n,i,o,u)}finally{Ae=d,Fr.transition=p}}function Vv(n,i,o,u){var d=Ae,p=Fr.transition;Fr.transition=null;try{Ae=4,ol(n,i,o,u)}finally{Ae=d,Fr.transition=p}}function ol(n,i,o,u){if(Gs){var d=al(n,i,o,u);if(d===null)kl(n,i,u,Ks,o),If(n,u);else if(Dv(d,n,i,o,u))u.stopPropagation();else if(If(n,u),i&4&&-1<Uv.indexOf(n)){for(;d!==null;){var p=Gi(d);if(p!==null&&Cf(p),p=al(n,i,o,u),p===null&&kl(n,i,u,Ks,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else kl(n,i,u,null,o)}}var Ks=null;function al(n,i,o,u){if(Ks=null,n=Xa(u),n=dr(n),n!==null)if(i=fr(n),i===null)n=null;else if(o=i.tag,o===13){if(n=gf(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ks=n,null}function Lf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iv()){case el:return 1;case xf:return 4;case $s:case _v:return 16;case wf:return 536870912;default:return 16}default:return 16}}var zn=null,ll=null,Hs=null;function Mf(){if(Hs)return Hs;var n,i=ll,o=i.length,u,d="value"in zn?zn.value:zn.textContent,p=d.length;for(n=0;n<o&&i[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===d[p-u];u++);return Hs=d.slice(n,1<u?1-u:void 0)}function Ys(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xs(){return!0}function bf(){return!1}function At(n){function i(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xs:bf,this.isPropagationStopped=bf,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),i}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=At($r),Mi=K({},$r,{view:0,detail:0}),Wv=At(Mi),cl,fl,bi,qs=K({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bi&&(bi&&n.type==="mousemove"?(cl=n.screenX-bi.screenX,fl=n.screenY-bi.screenY):fl=cl=0,bi=n),cl)},movementY:function(n){return"movementY"in n?n.movementY:fl}}),jf=At(qs),Gv=K({},qs,{dataTransfer:0}),Kv=At(Gv),Hv=K({},Mi,{relatedTarget:0}),dl=At(Hv),Yv=K({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Xv=At(Yv),qv=K({},$r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qv=At(qv),Zv=K({},$r,{data:0}),Ff=At(Zv),Jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ty={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ny(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ty[n])?!!i[n]:!1}function hl(){return ny}var ry=K({},Mi,{key:function(n){if(n.key){var i=Jv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ys(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ey[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hl,charCode:function(n){return n.type==="keypress"?Ys(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ys(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),iy=At(ry),sy=K({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=At(sy),oy=K({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hl}),ay=At(oy),ly=K({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),uy=At(ly),cy=K({},qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fy=At(cy),dy=[9,13,27,32],pl=f&&"CompositionEvent"in window,ji=null;f&&"documentMode"in document&&(ji=document.documentMode);var hy=f&&"TextEvent"in window&&!ji,Uf=f&&(!pl||ji&&8<ji&&11>=ji),Df=" ",Bf=!1;function zf(n,i){switch(n){case"keyup":return dy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ur=!1;function py(n,i){switch(n){case"compositionend":return Vf(i);case"keypress":return i.which!==32?null:(Bf=!0,Df);case"textInput":return n=i.data,n===Df&&Bf?null:n;default:return null}}function my(n,i){if(Ur)return n==="compositionend"||!pl&&zf(n,i)?(n=Mf(),Hs=ll=zn=null,Ur=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Uf&&i.locale!=="ko"?null:i.data;default:return null}}var gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!gy[n.type]:i==="textarea"}function Gf(n,i,o,u){ff(u),i=to(i,"onChange"),0<i.length&&(o=new ul("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Fi=null,$i=null;function vy(n){ud(n,0)}function Qs(n){var i=Wr(n);if(jt(i))return n}function yy(n,i){if(n==="change")return i}var Kf=!1;if(f){var ml;if(f){var gl="oninput"in document;if(!gl){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),gl=typeof Hf.oninput=="function"}ml=gl}else ml=!1;Kf=ml&&(!document.documentMode||9<document.documentMode)}function Yf(){Fi&&(Fi.detachEvent("onpropertychange",Xf),$i=Fi=null)}function Xf(n){if(n.propertyName==="value"&&Qs($i)){var i=[];Gf(i,$i,n,Xa(n)),mf(vy,i)}}function Sy(n,i,o){n==="focusin"?(Yf(),Fi=i,$i=o,Fi.attachEvent("onpropertychange",Xf)):n==="focusout"&&Yf()}function Ey(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qs($i)}function Ty(n,i){if(n==="click")return Qs(i)}function xy(n,i){if(n==="input"||n==="change")return Qs(i)}function wy(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Qt=typeof Object.is=="function"?Object.is:wy;function Ui(n,i){if(Qt(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!h.call(i,d)||!Qt(n[d],i[d]))return!1}return!0}function qf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qf(n,i){var o=qf(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qf(o)}}function Zf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Zf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jf(){for(var n=window,i=Ft();i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ft(n.document)}return i}function vl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function ky(n){var i=Jf(),o=n.focusedElem,u=n.selectionRange;if(i!==o&&o&&o.ownerDocument&&Zf(o.ownerDocument.documentElement,o)){if(u!==null&&vl(o)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(n,o.value.length);else if(n=(i=o.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=o.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!n.extend&&p>u&&(d=u,u=p,p=d),d=Qf(o,p);var v=Qf(o,u);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>u?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=o;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)n=i[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ay=f&&"documentMode"in document&&11>=document.documentMode,Dr=null,yl=null,Di=null,Sl=!1;function ed(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sl||Dr==null||Dr!==Ft(u)||(u=Dr,"selectionStart"in u&&vl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Di&&Ui(Di,u)||(Di=u,u=to(yl,"onSelect"),0<u.length&&(i=new ul("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Dr)))}function Zs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Br={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},El={},td={};f&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Js(n){if(El[n])return El[n];if(!Br[n])return n;var i=Br[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in td)return El[n]=i[o];return n}var nd=Js("animationend"),rd=Js("animationiteration"),id=Js("animationstart"),sd=Js("transitionend"),od=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(n,i){od.set(n,i),l(i,[n])}for(var Tl=0;Tl<ad.length;Tl++){var xl=ad[Tl],Cy=xl.toLowerCase(),Ry=xl[0].toUpperCase()+xl.slice(1);Vn(Cy,"on"+Ry)}Vn(nd,"onAnimationEnd"),Vn(rd,"onAnimationIteration"),Vn(id,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(sd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function ld(n,i,o){var u=n.type||"unknown-event";n.currentTarget=o,Cv(u,i,void 0,n),n.currentTarget=null}function ud(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var E=u[v],T=E.instance,I=E.currentTarget;if(E=E.listener,T!==p&&d.isPropagationStopped())break e;ld(d,E,I),p=T}else for(v=0;v<u.length;v++){if(E=u[v],T=E.instance,I=E.currentTarget,E=E.listener,T!==p&&d.isPropagationStopped())break e;ld(d,E,I),p=T}}}if(Fs)throw n=Ja,Fs=!1,Ja=null,n}function Oe(n,i){var o=i[Il];o===void 0&&(o=i[Il]=new Set);var u=n+"__bubble";o.has(u)||(cd(i,n,2,!1),o.add(u))}function wl(n,i,o){var u=0;i&&(u|=4),cd(o,n,u,i)}var eo="_reactListening"+Math.random().toString(36).slice(2);function zi(n){if(!n[eo]){n[eo]=!0,s.forEach(function(o){o!=="selectionchange"&&(Ny.has(o)||wl(o,!1,n),wl(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eo]||(i[eo]=!0,wl("selectionchange",!1,i))}}function cd(n,i,o,u){switch(Lf(i)){case 1:var d=zv;break;case 4:d=Vv;break;default:d=ol}o=d.bind(null,i,o,n),d=void 0,!Za||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function kl(n,i,o,u,d){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var E=u.stateNode.containerInfo;if(E===d||E.nodeType===8&&E.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===d||T.nodeType===8&&T.parentNode===d))return;v=v.return}for(;E!==null;){if(v=dr(E),v===null)return;if(T=v.tag,T===5||T===6){u=p=v;continue e}E=E.parentNode}}u=u.return}mf(function(){var I=p,U=Xa(o),B=[];e:{var $=od.get(n);if($!==void 0){var H=ul,X=n;switch(n){case"keypress":if(Ys(o)===0)break e;case"keydown":case"keyup":H=iy;break;case"focusin":X="focus",H=dl;break;case"focusout":X="blur",H=dl;break;case"beforeblur":case"afterblur":H=dl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=ay;break;case nd:case rd:case id:H=Xv;break;case sd:H=uy;break;case"scroll":H=Wv;break;case"wheel":H=fy;break;case"copy":case"cut":case"paste":H=Qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=$f}var q=(i&4)!==0,We=!q&&n==="scroll",N=q?$!==null?$+"Capture":null:$;q=[];for(var w=I,O;w!==null;){O=w;var V=O.stateNode;if(O.tag===5&&V!==null&&(O=V,N!==null&&(V=ki(w,N),V!=null&&q.push(Vi(w,V,O)))),We)break;w=w.return}0<q.length&&($=new H($,X,null,o,U),B.push({event:$,listeners:q}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",$&&o!==Ya&&(X=o.relatedTarget||o.fromElement)&&(dr(X)||X[kn]))break e;if((H||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,H?(X=o.relatedTarget||o.toElement,H=I,X=X?dr(X):null,X!==null&&(We=fr(X),X!==We||X.tag!==5&&X.tag!==6)&&(X=null)):(H=null,X=I),H!==X)){if(q=jf,V="onMouseLeave",N="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(q=$f,V="onPointerLeave",N="onPointerEnter",w="pointer"),We=H==null?$:Wr(H),O=X==null?$:Wr(X),$=new q(V,w+"leave",H,o,U),$.target=We,$.relatedTarget=O,V=null,dr(U)===I&&(q=new q(N,w+"enter",X,o,U),q.target=O,q.relatedTarget=We,V=q),We=V,H&&X)t:{for(q=H,N=X,w=0,O=q;O;O=zr(O))w++;for(O=0,V=N;V;V=zr(V))O++;for(;0<w-O;)q=zr(q),w--;for(;0<O-w;)N=zr(N),O--;for(;w--;){if(q===N||N!==null&&q===N.alternate)break t;q=zr(q),N=zr(N)}q=null}else q=null;H!==null&&fd(B,$,H,q,!1),X!==null&&We!==null&&fd(B,We,X,q,!0)}}e:{if($=I?Wr(I):window,H=$.nodeName&&$.nodeName.toLowerCase(),H==="select"||H==="input"&&$.type==="file")var Q=yy;else if(Wf($))if(Kf)Q=xy;else{Q=Ey;var ne=Sy}else(H=$.nodeName)&&H.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=Ty);if(Q&&(Q=Q(n,I))){Gf(B,Q,o,U);break e}ne&&ne(n,$,I),n==="focusout"&&(ne=$._wrapperState)&&ne.controlled&&$.type==="number"&&Va($,"number",$.value)}switch(ne=I?Wr(I):window,n){case"focusin":(Wf(ne)||ne.contentEditable==="true")&&(Dr=ne,yl=I,Di=null);break;case"focusout":Di=yl=Dr=null;break;case"mousedown":Sl=!0;break;case"contextmenu":case"mouseup":case"dragend":Sl=!1,ed(B,o,U);break;case"selectionchange":if(Ay)break;case"keydown":case"keyup":ed(B,o,U)}var re;if(pl)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Ur?zf(n,o)&&(ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ue="onCompositionStart");ue&&(Uf&&o.locale!=="ko"&&(Ur||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Ur&&(re=Mf()):(zn=U,ll="value"in zn?zn.value:zn.textContent,Ur=!0)),ne=to(I,ue),0<ne.length&&(ue=new Ff(ue,n,null,o,U),B.push({event:ue,listeners:ne}),re?ue.data=re:(re=Vf(o),re!==null&&(ue.data=re)))),(re=hy?py(n,o):my(n,o))&&(I=to(I,"onBeforeInput"),0<I.length&&(U=new Ff("onBeforeInput","beforeinput",null,o,U),B.push({event:U,listeners:I}),U.data=re))}ud(B,i)})}function Vi(n,i,o){return{instance:n,listener:i,currentTarget:o}}function to(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=ki(n,o),p!=null&&u.unshift(Vi(n,p,d)),p=ki(n,i),p!=null&&u.push(Vi(n,p,d))),n=n.return}return u}function zr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function fd(n,i,o,u,d){for(var p=i._reactName,v=[];o!==null&&o!==u;){var E=o,T=E.alternate,I=E.stateNode;if(T!==null&&T===u)break;E.tag===5&&I!==null&&(E=I,d?(T=ki(o,p),T!=null&&v.unshift(Vi(o,T,E))):d||(T=ki(o,p),T!=null&&v.push(Vi(o,T,E)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var Oy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function dd(n){return(typeof n=="string"?n:""+n).replace(Oy,`
`).replace(Iy,"")}function no(n,i,o){if(i=dd(i),dd(n)!==i&&o)throw Error(t(425))}function ro(){}var Al=null,Cl=null;function Rl(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,_y=typeof clearTimeout=="function"?clearTimeout:void 0,hd=typeof Promise=="function"?Promise:void 0,Py=typeof queueMicrotask=="function"?queueMicrotask:typeof hd<"u"?function(n){return hd.resolve(null).then(n).catch(Ly)}:Nl;function Ly(n){setTimeout(function(){throw n})}function Ol(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(u===0){n.removeChild(d),Li(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=d}while(o);Li(i)}function Wn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function pd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),dn="__reactFiber$"+Vr,Wi="__reactProps$"+Vr,kn="__reactContainer$"+Vr,Il="__reactEvents$"+Vr,My="__reactListeners$"+Vr,by="__reactHandles$"+Vr;function dr(n){var i=n[dn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[kn]||o[dn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=pd(n);n!==null;){if(o=n[dn])return o;n=pd(n)}return i}n=o,o=n.parentNode}return null}function Gi(n){return n=n[dn]||n[kn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Wr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function io(n){return n[Wi]||null}var _l=[],Gr=-1;function Gn(n){return{current:n}}function Ie(n){0>Gr||(n.current=_l[Gr],_l[Gr]=null,Gr--)}function Ce(n,i){Gr++,_l[Gr]=n.current,n.current=i}var Kn={},ot=Gn(Kn),mt=Gn(!1),hr=Kn;function Kr(n,i){var o=n.type.contextTypes;if(!o)return Kn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=i[p];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function gt(n){return n=n.childContextTypes,n!=null}function so(){Ie(mt),Ie(ot)}function md(n,i,o){if(ot.current!==Kn)throw Error(t(168));Ce(ot,i),Ce(mt,o)}function gd(n,i,o){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(t(108,he(n)||"Unknown",d));return K({},o,u)}function oo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kn,hr=ot.current,Ce(ot,n),Ce(mt,mt.current),!0}function vd(n,i,o){var u=n.stateNode;if(!u)throw Error(t(169));o?(n=gd(n,i,hr),u.__reactInternalMemoizedMergedChildContext=n,Ie(mt),Ie(ot),Ce(ot,n)):Ie(mt),Ce(mt,o)}var An=null,ao=!1,Pl=!1;function yd(n){An===null?An=[n]:An.push(n)}function jy(n){ao=!0,yd(n)}function Hn(){if(!Pl&&An!==null){Pl=!0;var n=0,i=Ae;try{var o=An;for(Ae=1;n<o.length;n++){var u=o[n];do u=u(!0);while(u!==null)}An=null,ao=!1}catch(d){throw An!==null&&(An=An.slice(n+1)),Ef(el,Hn),d}finally{Ae=i,Pl=!1}}return null}var Hr=[],Yr=0,lo=null,uo=0,$t=[],Ut=0,pr=null,Cn=1,Rn="";function mr(n,i){Hr[Yr++]=uo,Hr[Yr++]=lo,lo=n,uo=i}function Sd(n,i,o){$t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=pr,pr=n;var u=Cn;n=Rn;var d=32-qt(u)-1;u&=~(1<<d),o+=1;var p=32-qt(i)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Cn=1<<32-qt(i)+d|o<<d|u,Rn=p+n}else Cn=1<<p|o<<d|u,Rn=n}function Ll(n){n.return!==null&&(mr(n,1),Sd(n,1,0))}function Ml(n){for(;n===lo;)lo=Hr[--Yr],Hr[Yr]=null,uo=Hr[--Yr],Hr[Yr]=null;for(;n===pr;)pr=$t[--Ut],$t[Ut]=null,Rn=$t[--Ut],$t[Ut]=null,Cn=$t[--Ut],$t[Ut]=null}var Ct=null,Rt=null,Pe=!1,Zt=null;function Ed(n,i){var o=Vt(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=n,i=n.deletions,i===null?(n.deletions=[o],n.flags|=16):i.push(o)}function Td(n,i){switch(n.tag){case 5:var o=n.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=Wn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=pr!==null?{id:Cn,overflow:Rn}:null,n.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Vt(18,null,null,0),o.stateNode=i,o.return=n,n.child=o,Ct=n,Rt=null,!0):!1;default:return!1}}function bl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jl(n){if(Pe){var i=Rt;if(i){var o=i;if(!Td(n,i)){if(bl(n))throw Error(t(418));i=Wn(o.nextSibling);var u=Ct;i&&Td(n,i)?Ed(u,o):(n.flags=n.flags&-4097|2,Pe=!1,Ct=n)}}else{if(bl(n))throw Error(t(418));n.flags=n.flags&-4097|2,Pe=!1,Ct=n}}}function xd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ct=n}function co(n){if(n!==Ct)return!1;if(!Pe)return xd(n),Pe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Rl(n.type,n.memoizedProps)),i&&(i=Rt)){if(bl(n))throw wd(),Error(t(418));for(;i;)Ed(n,i),i=Wn(i.nextSibling)}if(xd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(i===0){Rt=Wn(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}n=n.nextSibling}Rt=null}}else Rt=Ct?Wn(n.stateNode.nextSibling):null;return!0}function wd(){for(var n=Rt;n;)n=Wn(n.nextSibling)}function Xr(){Rt=Ct=null,Pe=!1}function Fl(n){Zt===null?Zt=[n]:Zt.push(n)}var Fy=M.ReactCurrentBatchConfig;function Ki(n,i,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var u=o.stateNode}if(!u)throw Error(t(147,n));var d=u,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var E=d.refs;v===null?delete E[p]:E[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function fo(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function kd(n){var i=n._init;return i(n._payload)}function Ad(n){function i(N,w){if(n){var O=N.deletions;O===null?(N.deletions=[w],N.flags|=16):O.push(w)}}function o(N,w){if(!n)return null;for(;w!==null;)i(N,w),w=w.sibling;return null}function u(N,w){for(N=new Map;w!==null;)w.key!==null?N.set(w.key,w):N.set(w.index,w),w=w.sibling;return N}function d(N,w){return N=tr(N,w),N.index=0,N.sibling=null,N}function p(N,w,O){return N.index=O,n?(O=N.alternate,O!==null?(O=O.index,O<w?(N.flags|=2,w):O):(N.flags|=2,w)):(N.flags|=1048576,w)}function v(N){return n&&N.alternate===null&&(N.flags|=2),N}function E(N,w,O,V){return w===null||w.tag!==6?(w=Nu(O,N.mode,V),w.return=N,w):(w=d(w,O),w.return=N,w)}function T(N,w,O,V){var Q=O.type;return Q===D?U(N,w,O.props.children,V,O.key):w!==null&&(w.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ve&&kd(Q)===w.type)?(V=d(w,O.props),V.ref=Ki(N,w,O),V.return=N,V):(V=jo(O.type,O.key,O.props,null,N.mode,V),V.ref=Ki(N,w,O),V.return=N,V)}function I(N,w,O,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==O.containerInfo||w.stateNode.implementation!==O.implementation?(w=Ou(O,N.mode,V),w.return=N,w):(w=d(w,O.children||[]),w.return=N,w)}function U(N,w,O,V,Q){return w===null||w.tag!==7?(w=wr(O,N.mode,V,Q),w.return=N,w):(w=d(w,O),w.return=N,w)}function B(N,w,O){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nu(""+w,N.mode,O),w.return=N,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case z:return O=jo(w.type,w.key,w.props,null,N.mode,O),O.ref=Ki(N,null,w),O.return=N,O;case L:return w=Ou(w,N.mode,O),w.return=N,w;case ve:var V=w._init;return B(N,V(w._payload),O)}if(Ti(w)||J(w))return w=wr(w,N.mode,O,null),w.return=N,w;fo(N,w)}return null}function $(N,w,O,V){var Q=w!==null?w.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Q!==null?null:E(N,w,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return O.key===Q?T(N,w,O,V):null;case L:return O.key===Q?I(N,w,O,V):null;case ve:return Q=O._init,$(N,w,Q(O._payload),V)}if(Ti(O)||J(O))return Q!==null?null:U(N,w,O,V,null);fo(N,O)}return null}function H(N,w,O,V,Q){if(typeof V=="string"&&V!==""||typeof V=="number")return N=N.get(O)||null,E(w,N,""+V,Q);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return N=N.get(V.key===null?O:V.key)||null,T(w,N,V,Q);case L:return N=N.get(V.key===null?O:V.key)||null,I(w,N,V,Q);case ve:var ne=V._init;return H(N,w,O,ne(V._payload),Q)}if(Ti(V)||J(V))return N=N.get(O)||null,U(w,N,V,Q,null);fo(w,V)}return null}function X(N,w,O,V){for(var Q=null,ne=null,re=w,ue=w=0,et=null;re!==null&&ue<O.length;ue++){re.index>ue?(et=re,re=null):et=re.sibling;var xe=$(N,re,O[ue],V);if(xe===null){re===null&&(re=et);break}n&&re&&xe.alternate===null&&i(N,re),w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe,re=et}if(ue===O.length)return o(N,re),Pe&&mr(N,ue),Q;if(re===null){for(;ue<O.length;ue++)re=B(N,O[ue],V),re!==null&&(w=p(re,w,ue),ne===null?Q=re:ne.sibling=re,ne=re);return Pe&&mr(N,ue),Q}for(re=u(N,re);ue<O.length;ue++)et=H(re,N,ue,O[ue],V),et!==null&&(n&&et.alternate!==null&&re.delete(et.key===null?ue:et.key),w=p(et,w,ue),ne===null?Q=et:ne.sibling=et,ne=et);return n&&re.forEach(function(nr){return i(N,nr)}),Pe&&mr(N,ue),Q}function q(N,w,O,V){var Q=J(O);if(typeof Q!="function")throw Error(t(150));if(O=Q.call(O),O==null)throw Error(t(151));for(var ne=Q=null,re=w,ue=w=0,et=null,xe=O.next();re!==null&&!xe.done;ue++,xe=O.next()){re.index>ue?(et=re,re=null):et=re.sibling;var nr=$(N,re,xe.value,V);if(nr===null){re===null&&(re=et);break}n&&re&&nr.alternate===null&&i(N,re),w=p(nr,w,ue),ne===null?Q=nr:ne.sibling=nr,ne=nr,re=et}if(xe.done)return o(N,re),Pe&&mr(N,ue),Q;if(re===null){for(;!xe.done;ue++,xe=O.next())xe=B(N,xe.value,V),xe!==null&&(w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe);return Pe&&mr(N,ue),Q}for(re=u(N,re);!xe.done;ue++,xe=O.next())xe=H(re,N,ue,xe.value,V),xe!==null&&(n&&xe.alternate!==null&&re.delete(xe.key===null?ue:xe.key),w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe);return n&&re.forEach(function(g0){return i(N,g0)}),Pe&&mr(N,ue),Q}function We(N,w,O,V){if(typeof O=="object"&&O!==null&&O.type===D&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case z:e:{for(var Q=O.key,ne=w;ne!==null;){if(ne.key===Q){if(Q=O.type,Q===D){if(ne.tag===7){o(N,ne.sibling),w=d(ne,O.props.children),w.return=N,N=w;break e}}else if(ne.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ve&&kd(Q)===ne.type){o(N,ne.sibling),w=d(ne,O.props),w.ref=Ki(N,ne,O),w.return=N,N=w;break e}o(N,ne);break}else i(N,ne);ne=ne.sibling}O.type===D?(w=wr(O.props.children,N.mode,V,O.key),w.return=N,N=w):(V=jo(O.type,O.key,O.props,null,N.mode,V),V.ref=Ki(N,w,O),V.return=N,N=V)}return v(N);case L:e:{for(ne=O.key;w!==null;){if(w.key===ne)if(w.tag===4&&w.stateNode.containerInfo===O.containerInfo&&w.stateNode.implementation===O.implementation){o(N,w.sibling),w=d(w,O.children||[]),w.return=N,N=w;break e}else{o(N,w);break}else i(N,w);w=w.sibling}w=Ou(O,N.mode,V),w.return=N,N=w}return v(N);case ve:return ne=O._init,We(N,w,ne(O._payload),V)}if(Ti(O))return X(N,w,O,V);if(J(O))return q(N,w,O,V);fo(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,w!==null&&w.tag===6?(o(N,w.sibling),w=d(w,O),w.return=N,N=w):(o(N,w),w=Nu(O,N.mode,V),w.return=N,N=w),v(N)):o(N,w)}return We}var qr=Ad(!0),Cd=Ad(!1),ho=Gn(null),po=null,Qr=null,$l=null;function Ul(){$l=Qr=po=null}function Dl(n){var i=ho.current;Ie(ho),n._currentValue=i}function Bl(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Zr(n,i){po=n,$l=Qr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(vt=!0),n.firstContext=null)}function Dt(n){var i=n._currentValue;if($l!==n)if(n={context:n,memoizedValue:i,next:null},Qr===null){if(po===null)throw Error(t(308));Qr=n,po.dependencies={lanes:0,firstContext:n}}else Qr=Qr.next=n;return i}var gr=null;function zl(n){gr===null?gr=[n]:gr.push(n)}function Rd(n,i,o,u){var d=i.interleaved;return d===null?(o.next=o,zl(i)):(o.next=d.next,d.next=o),i.interleaved=o,Nn(n,u)}function Nn(n,i){n.lanes|=i;var o=n.alternate;for(o!==null&&(o.lanes|=i),o=n,n=n.return;n!==null;)n.childLanes|=i,o=n.alternate,o!==null&&(o.childLanes|=i),o=n,n=n.return;return o.tag===3?o.stateNode:null}var Yn=!1;function Vl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function On(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Xn(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ee&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,Nn(n,o)}return d=u.interleaved,d===null?(i.next=i,zl(u)):(i.next=d.next,d.next=i),u.interleaved=i,Nn(n,o)}function mo(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,rl(n,o)}}function Od(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=i:p=p.next=i}else d=p=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}function go(n,i,o,u){var d=n.updateQueue;Yn=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var T=E,I=T.next;T.next=null,v===null?p=I:v.next=I,v=T;var U=n.alternate;U!==null&&(U=U.updateQueue,E=U.lastBaseUpdate,E!==v&&(E===null?U.firstBaseUpdate=I:E.next=I,U.lastBaseUpdate=T))}if(p!==null){var B=d.baseState;v=0,U=I=T=null,E=p;do{var $=E.lane,H=E.eventTime;if((u&$)===$){U!==null&&(U=U.next={eventTime:H,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var X=n,q=E;switch($=i,H=o,q.tag){case 1:if(X=q.payload,typeof X=="function"){B=X.call(H,B,$);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=q.payload,$=typeof X=="function"?X.call(H,B,$):X,$==null)break e;B=K({},B,$);break e;case 2:Yn=!0}}E.callback!==null&&E.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[E]:$.push(E))}else H={eventTime:H,lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},U===null?(I=U=H,T=B):U=U.next=H,v|=$;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;$=E,E=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(T=B),d.baseState=T,d.firstBaseUpdate=I,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);Sr|=v,n.lanes=v,n.memoizedState=B}}function Id(n,i,o){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],d=u.callback;if(d!==null){if(u.callback=null,u=o,typeof d!="function")throw Error(t(191,d));d.call(u)}}}var Hi={},hn=Gn(Hi),Yi=Gn(Hi),Xi=Gn(Hi);function vr(n){if(n===Hi)throw Error(t(174));return n}function Wl(n,i){switch(Ce(Xi,i),Ce(Yi,n),Ce(hn,Hi),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ga(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Ga(i,n)}Ie(hn),Ce(hn,i)}function Jr(){Ie(hn),Ie(Yi),Ie(Xi)}function _d(n){vr(Xi.current);var i=vr(hn.current),o=Ga(i,n.type);i!==o&&(Ce(Yi,n),Ce(hn,o))}function Gl(n){Yi.current===n&&(Ie(hn),Ie(Yi))}var Me=Gn(0);function vo(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Kl=[];function Hl(){for(var n=0;n<Kl.length;n++)Kl[n]._workInProgressVersionPrimary=null;Kl.length=0}var yo=M.ReactCurrentDispatcher,Yl=M.ReactCurrentBatchConfig,yr=0,be=null,He=null,Ze=null,So=!1,qi=!1,Qi=0,$y=0;function at(){throw Error(t(321))}function Xl(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Qt(n[o],i[o]))return!1;return!0}function ql(n,i,o,u,d,p){if(yr=p,be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,yo.current=n===null||n.memoizedState===null?zy:Vy,n=o(u,d),qi){p=0;do{if(qi=!1,Qi=0,25<=p)throw Error(t(301));p+=1,Ze=He=null,i.updateQueue=null,yo.current=Wy,n=o(u,d)}while(qi)}if(yo.current=xo,i=He!==null&&He.next!==null,yr=0,Ze=He=be=null,So=!1,i)throw Error(t(300));return n}function Ql(){var n=Qi!==0;return Qi=0,n}function pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?be.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Bt(){if(He===null){var n=be.alternate;n=n!==null?n.memoizedState:null}else n=He.next;var i=Ze===null?be.memoizedState:Ze.next;if(i!==null)Ze=i,He=n;else{if(n===null)throw Error(t(310));He=n,n={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ze===null?be.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function Zi(n,i){return typeof i=="function"?i(n):i}function Zl(n){var i=Bt(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=He,d=u.baseQueue,p=o.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}u.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,u=u.baseState;var E=v=null,T=null,I=p;do{var U=I.lane;if((yr&U)===U)T!==null&&(T=T.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),u=I.hasEagerState?I.eagerState:n(u,I.action);else{var B={lane:U,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};T===null?(E=T=B,v=u):T=T.next=B,be.lanes|=U,Sr|=U}I=I.next}while(I!==null&&I!==p);T===null?v=u:T.next=E,Qt(u,i.memoizedState)||(vt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=T,o.lastRenderedState=u}if(n=o.interleaved,n!==null){d=n;do p=d.lane,be.lanes|=p,Sr|=p,d=d.next;while(d!==n)}else d===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function Jl(n){var i=Bt(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Qt(p,i.memoizedState)||(vt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Pd(){}function Ld(n,i){var o=be,u=Bt(),d=i(),p=!Qt(u.memoizedState,d);if(p&&(u.memoizedState=d,vt=!0),u=u.queue,eu(jd.bind(null,o,u,n),[n]),u.getSnapshot!==i||p||Ze!==null&&Ze.memoizedState.tag&1){if(o.flags|=2048,Ji(9,bd.bind(null,o,u,d,i),void 0,null),Je===null)throw Error(t(349));(yr&30)!==0||Md(o,i,d)}return d}function Md(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=be.updateQueue,i===null?(i={lastEffect:null,stores:null},be.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function bd(n,i,o,u){i.value=o,i.getSnapshot=u,Fd(i)&&$d(n)}function jd(n,i,o){return o(function(){Fd(i)&&$d(n)})}function Fd(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Qt(n,o)}catch{return!0}}function $d(n){var i=Nn(n,1);i!==null&&nn(i,n,1,-1)}function Ud(n){var i=pn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},i.queue=n,n=n.dispatch=By.bind(null,be,n),[i.memoizedState,n]}function Ji(n,i,o,u){return n={tag:n,create:i,destroy:o,deps:u,next:null},i=be.updateQueue,i===null?(i={lastEffect:null,stores:null},be.updateQueue=i,i.lastEffect=n.next=n):(o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n)),n}function Dd(){return Bt().memoizedState}function Eo(n,i,o,u){var d=pn();be.flags|=n,d.memoizedState=Ji(1|i,o,void 0,u===void 0?null:u)}function To(n,i,o,u){var d=Bt();u=u===void 0?null:u;var p=void 0;if(He!==null){var v=He.memoizedState;if(p=v.destroy,u!==null&&Xl(u,v.deps)){d.memoizedState=Ji(i,o,p,u);return}}be.flags|=n,d.memoizedState=Ji(1|i,o,p,u)}function Bd(n,i){return Eo(8390656,8,n,i)}function eu(n,i){return To(2048,8,n,i)}function zd(n,i){return To(4,2,n,i)}function Vd(n,i){return To(4,4,n,i)}function Wd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Gd(n,i,o){return o=o!=null?o.concat([n]):null,To(4,4,Wd.bind(null,i,n),o)}function tu(){}function Kd(n,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Xl(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function Hd(n,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Xl(i,u[1])?u[0]:(n=n(),o.memoizedState=[n,i],n)}function Yd(n,i,o){return(yr&21)===0?(n.baseState&&(n.baseState=!1,vt=!0),n.memoizedState=o):(Qt(o,i)||(o=kf(),be.lanes|=o,Sr|=o,n.baseState=!0),i)}function Uy(n,i){var o=Ae;Ae=o!==0&&4>o?o:4,n(!0);var u=Yl.transition;Yl.transition={};try{n(!1),i()}finally{Ae=o,Yl.transition=u}}function Xd(){return Bt().memoizedState}function Dy(n,i,o){var u=Jn(n);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},qd(n))Qd(i,o);else if(o=Rd(n,i,o,u),o!==null){var d=ft();nn(o,n,u,d),Zd(o,i,u)}}function By(n,i,o){var u=Jn(n),d={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(qd(n))Qd(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,E=p(v,o);if(d.hasEagerState=!0,d.eagerState=E,Qt(E,v)){var T=i.interleaved;T===null?(d.next=d,zl(i)):(d.next=T.next,T.next=d),i.interleaved=d;return}}catch{}o=Rd(n,i,d,u),o!==null&&(d=ft(),nn(o,n,u,d),Zd(o,i,u))}}function qd(n){var i=n.alternate;return n===be||i!==null&&i===be}function Qd(n,i){qi=So=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Zd(n,i,o){if((o&4194240)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,rl(n,o)}}var xo={readContext:Dt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},zy={readContext:Dt,useCallback:function(n,i){return pn().memoizedState=[n,i===void 0?null:i],n},useContext:Dt,useEffect:Bd,useImperativeHandle:function(n,i,o){return o=o!=null?o.concat([n]):null,Eo(4194308,4,Wd.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Eo(4194308,4,n,i)},useInsertionEffect:function(n,i){return Eo(4,2,n,i)},useMemo:function(n,i){var o=pn();return i=i===void 0?null:i,n=n(),o.memoizedState=[n,i],n},useReducer:function(n,i,o){var u=pn();return i=o!==void 0?o(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=Dy.bind(null,be,n),[u.memoizedState,n]},useRef:function(n){var i=pn();return n={current:n},i.memoizedState=n},useState:Ud,useDebugValue:tu,useDeferredValue:function(n){return pn().memoizedState=n},useTransition:function(){var n=Ud(!1),i=n[0];return n=Uy.bind(null,n[1]),pn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,o){var u=be,d=pn();if(Pe){if(o===void 0)throw Error(t(407));o=o()}else{if(o=i(),Je===null)throw Error(t(349));(yr&30)!==0||Md(u,i,o)}d.memoizedState=o;var p={value:o,getSnapshot:i};return d.queue=p,Bd(jd.bind(null,u,p,n),[n]),u.flags|=2048,Ji(9,bd.bind(null,u,p,o,i),void 0,null),o},useId:function(){var n=pn(),i=Je.identifierPrefix;if(Pe){var o=Rn,u=Cn;o=(u&~(1<<32-qt(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=Qi++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=$y++,i=":"+i+"r"+o.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Vy={readContext:Dt,useCallback:Kd,useContext:Dt,useEffect:eu,useImperativeHandle:Gd,useInsertionEffect:zd,useLayoutEffect:Vd,useMemo:Hd,useReducer:Zl,useRef:Dd,useState:function(){return Zl(Zi)},useDebugValue:tu,useDeferredValue:function(n){var i=Bt();return Yd(i,He.memoizedState,n)},useTransition:function(){var n=Zl(Zi)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:Pd,useSyncExternalStore:Ld,useId:Xd,unstable_isNewReconciler:!1},Wy={readContext:Dt,useCallback:Kd,useContext:Dt,useEffect:eu,useImperativeHandle:Gd,useInsertionEffect:zd,useLayoutEffect:Vd,useMemo:Hd,useReducer:Jl,useRef:Dd,useState:function(){return Jl(Zi)},useDebugValue:tu,useDeferredValue:function(n){var i=Bt();return He===null?i.memoizedState=n:Yd(i,He.memoizedState,n)},useTransition:function(){var n=Jl(Zi)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:Pd,useSyncExternalStore:Ld,useId:Xd,unstable_isNewReconciler:!1};function Jt(n,i){if(n&&n.defaultProps){i=K({},i),n=n.defaultProps;for(var o in n)i[o]===void 0&&(i[o]=n[o]);return i}return i}function nu(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:K({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var wo={isMounted:function(n){return(n=n._reactInternals)?fr(n)===n:!1},enqueueSetState:function(n,i,o){n=n._reactInternals;var u=ft(),d=Jn(n),p=On(u,d);p.payload=i,o!=null&&(p.callback=o),i=Xn(n,p,d),i!==null&&(nn(i,n,d,u),mo(i,n,d))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=ft(),d=Jn(n),p=On(u,d);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Xn(n,p,d),i!==null&&(nn(i,n,d,u),mo(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=ft(),u=Jn(n),d=On(o,u);d.tag=2,i!=null&&(d.callback=i),i=Xn(n,d,u),i!==null&&(nn(i,n,u,o),mo(i,n,u))}};function Jd(n,i,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!Ui(o,u)||!Ui(d,p):!0}function eh(n,i,o){var u=!1,d=Kn,p=i.contextType;return typeof p=="object"&&p!==null?p=Dt(p):(d=gt(i)?hr:ot.current,u=i.contextTypes,p=(u=u!=null)?Kr(n,d):Kn),i=new i(o,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wo,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function th(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&wo.enqueueReplaceState(i,i.state,null)}function ru(n,i,o,u){var d=n.stateNode;d.props=o,d.state=n.memoizedState,d.refs={},Vl(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dt(p):(p=gt(i)?hr:ot.current,d.context=Kr(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(nu(n,i,p,o),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wo.enqueueReplaceState(d,d.state,null),go(n,o,d,u),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ei(n,i){try{var o="",u=i;do o+=Se(u),u=u.return;while(u);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function iu(n,i,o){return{value:n,source:null,stack:o??null,digest:i??null}}function su(n,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var Gy=typeof WeakMap=="function"?WeakMap:Map;function nh(n,i,o){o=On(-1,o),o.tag=3,o.payload={element:null};var u=i.value;return o.callback=function(){Io||(Io=!0,Eu=u),su(n,i)},o}function rh(n,i,o){o=On(-1,o),o.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;o.payload=function(){return u(d)},o.callback=function(){su(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){su(n,i),typeof u!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),o}function ih(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Gy;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(d.add(o),n=s0.bind(null,n,i,o),i.then(n,n))}function sh(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function oh(n,i,o,u,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=On(-1,1),i.tag=2,Xn(o,i,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Ky=M.ReactCurrentOwner,vt=!1;function ct(n,i,o,u){i.child=n===null?Cd(i,null,o,u):qr(i,n.child,o,u)}function ah(n,i,o,u,d){o=o.render;var p=i.ref;return Zr(i,d),u=ql(n,i,o,u,p,d),o=Ql(),n!==null&&!vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,In(n,i,d)):(Pe&&o&&Ll(i),i.flags|=1,ct(n,i,u,d),i.child)}function lh(n,i,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!Ru(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=p,uh(n,i,p,u,d)):(n=jo(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ui,o(v,u)&&n.ref===i.ref)return In(n,i,d)}return i.flags|=1,n=tr(p,u),n.ref=i.ref,n.return=i,i.child=n}function uh(n,i,o,u,d){if(n!==null){var p=n.memoizedProps;if(Ui(p,u)&&n.ref===i.ref)if(vt=!1,i.pendingProps=u=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(vt=!0);else return i.lanes=n.lanes,In(n,i,d)}return ou(n,i,o,u,d)}function ch(n,i,o){var u=i.pendingProps,d=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ni,Nt),Nt|=o;else{if((o&1073741824)===0)return n=p!==null?p.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ce(ni,Nt),Nt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Ce(ni,Nt),Nt|=u}else p!==null?(u=p.baseLanes|o,i.memoizedState=null):u=o,Ce(ni,Nt),Nt|=u;return ct(n,i,d,o),i.child}function fh(n,i){var o=i.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function ou(n,i,o,u,d){var p=gt(o)?hr:ot.current;return p=Kr(i,p),Zr(i,d),o=ql(n,i,o,u,p,d),u=Ql(),n!==null&&!vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,In(n,i,d)):(Pe&&u&&Ll(i),i.flags|=1,ct(n,i,o,d),i.child)}function dh(n,i,o,u,d){if(gt(o)){var p=!0;oo(i)}else p=!1;if(Zr(i,d),i.stateNode===null)Ao(n,i),eh(i,o,u),ru(i,o,u,d),u=!0;else if(n===null){var v=i.stateNode,E=i.memoizedProps;v.props=E;var T=v.context,I=o.contextType;typeof I=="object"&&I!==null?I=Dt(I):(I=gt(o)?hr:ot.current,I=Kr(i,I));var U=o.getDerivedStateFromProps,B=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";B||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==u||T!==I)&&th(i,v,u,I),Yn=!1;var $=i.memoizedState;v.state=$,go(i,u,v,d),T=i.memoizedState,E!==u||$!==T||mt.current||Yn?(typeof U=="function"&&(nu(i,o,U,u),T=i.memoizedState),(E=Yn||Jd(i,o,E,u,$,T,I))?(B||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=T),v.props=u,v.state=T,v.context=I,u=E):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Nd(n,i),E=i.memoizedProps,I=i.type===i.elementType?E:Jt(i.type,E),v.props=I,B=i.pendingProps,$=v.context,T=o.contextType,typeof T=="object"&&T!==null?T=Dt(T):(T=gt(o)?hr:ot.current,T=Kr(i,T));var H=o.getDerivedStateFromProps;(U=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==B||$!==T)&&th(i,v,u,T),Yn=!1,$=i.memoizedState,v.state=$,go(i,u,v,d);var X=i.memoizedState;E!==B||$!==X||mt.current||Yn?(typeof H=="function"&&(nu(i,o,H,u),X=i.memoizedState),(I=Yn||Jd(i,o,I,u,$,X,T)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,T)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),v.props=u,v.state=X,v.context=T,u=I):(typeof v.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return au(n,i,o,u,p,d)}function au(n,i,o,u,d,p){fh(n,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&vd(i,o,!1),In(n,i,p);u=i.stateNode,Ky.current=i;var E=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&v?(i.child=qr(i,n.child,null,p),i.child=qr(i,null,E,p)):ct(n,i,E,p),i.memoizedState=u.state,d&&vd(i,o,!0),i.child}function hh(n){var i=n.stateNode;i.pendingContext?md(n,i.pendingContext,i.pendingContext!==i.context):i.context&&md(n,i.context,!1),Wl(n,i.containerInfo)}function ph(n,i,o,u,d){return Xr(),Fl(d),i.flags|=256,ct(n,i,o,u),i.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function uu(n){return{baseLanes:n,cachePool:null,transitions:null}}function mh(n,i,o){var u=i.pendingProps,d=Me.current,p=!1,v=(i.flags&128)!==0,E;if((E=v)||(E=n!==null&&n.memoizedState===null?!1:(d&2)!==0),E?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ce(Me,d&1),n===null)return jl(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,n=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Fo(v,u,0,null),n=wr(n,u,o,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=uu(o),i.memoizedState=lu,n):cu(i,v));if(d=n.memoizedState,d!==null&&(E=d.dehydrated,E!==null))return Hy(n,i,v,u,E,d,o);if(p){p=u.fallback,v=i.mode,d=n.child,E=d.sibling;var T={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=T,i.deletions=null):(u=tr(d,T),u.subtreeFlags=d.subtreeFlags&14680064),E!==null?p=tr(E,p):(p=wr(p,v,o,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=n.child.memoizedState,v=v===null?uu(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~o,i.memoizedState=lu,u}return p=n.child,n=p.sibling,u=tr(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=o),u.return=i,u.sibling=null,n!==null&&(o=i.deletions,o===null?(i.deletions=[n],i.flags|=16):o.push(n)),i.child=u,i.memoizedState=null,u}function cu(n,i){return i=Fo({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ko(n,i,o,u){return u!==null&&Fl(u),qr(i,n.child,null,o),n=cu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Hy(n,i,o,u,d,p,v){if(o)return i.flags&256?(i.flags&=-257,u=iu(Error(t(422))),ko(n,i,v,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Fo({mode:"visible",children:u.children},d,0,null),p=wr(p,d,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&qr(i,n.child,null,v),i.child.memoizedState=uu(v),i.memoizedState=lu,p);if((i.mode&1)===0)return ko(n,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var E=u.dgst;return u=E,p=Error(t(419)),u=iu(p,u,void 0),ko(n,i,v,u)}if(E=(v&n.childLanes)!==0,vt||E){if(u=Je,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Nn(n,d),nn(u,n,d,-1))}return Cu(),u=iu(Error(t(421))),ko(n,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=o0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,Rt=Wn(d.nextSibling),Ct=i,Pe=!0,Zt=null,n!==null&&($t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=pr,Cn=n.id,Rn=n.overflow,pr=i),i=cu(i,u.children),i.flags|=4096,i)}function gh(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Bl(n.return,i,o)}function fu(n,i,o,u,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=d)}function vh(n,i,o){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ct(n,i,u.children,o),u=Me.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gh(n,o,i);else if(n.tag===19)gh(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Ce(Me,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&vo(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),fu(i,!1,d,o,p);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&vo(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}fu(i,!0,o,null,p);break;case"together":fu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ao(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function In(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Sr|=i.lanes,(o&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,o=tr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=tr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Yy(n,i,o){switch(i.tag){case 3:hh(i),Xr();break;case 5:_d(i);break;case 1:gt(i.type)&&oo(i);break;case 4:Wl(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(ho,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(Me,Me.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?mh(n,i,o):(Ce(Me,Me.current&1),n=In(n,i,o),n!==null?n.sibling:null);Ce(Me,Me.current&1);break;case 19:if(u=(o&i.childLanes)!==0,(n.flags&128)!==0){if(u)return vh(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Me,Me.current),u)break;return null;case 22:case 23:return i.lanes=0,ch(n,i,o)}return In(n,i,o)}var yh,du,Sh,Eh;yh=function(n,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},du=function(){},Sh=function(n,i,o,u){var d=n.memoizedProps;if(d!==u){n=i.stateNode,vr(hn.current);var p=null;switch(o){case"input":d=cr(n,d),u=cr(n,u),p=[];break;case"select":d=K({},d,{value:void 0}),u=K({},u,{value:void 0}),p=[];break;case"textarea":d=Wa(n,d),u=Wa(n,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=ro)}Ka(o,u);var v;o=null;for(I in d)if(!u.hasOwnProperty(I)&&d.hasOwnProperty(I)&&d[I]!=null)if(I==="style"){var E=d[I];for(v in E)E.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?p||(p=[]):(p=p||[]).push(I,null));for(I in u){var T=u[I];if(E=d?.[I],u.hasOwnProperty(I)&&T!==E&&(T!=null||E!=null))if(I==="style")if(E){for(v in E)!E.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in T)T.hasOwnProperty(v)&&E[v]!==T[v]&&(o||(o={}),o[v]=T[v])}else o||(p||(p=[]),p.push(I,o)),o=T;else I==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,E=E?E.__html:void 0,T!=null&&E!==T&&(p=p||[]).push(I,T)):I==="children"?typeof T!="string"&&typeof T!="number"||(p=p||[]).push(I,""+T):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(T!=null&&I==="onScroll"&&Oe("scroll",n),p||E===T||(p=[])):(p=p||[]).push(I,T))}o&&(p=p||[]).push("style",o);var I=p;(i.updateQueue=I)&&(i.flags|=4)}},Eh=function(n,i,o,u){o!==u&&(i.flags|=4)};function es(n,i){if(!Pe)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function Xy(n,i,o){var u=i.pendingProps;switch(Ml(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return gt(i.type)&&so(),lt(i),null;case 3:return u=i.stateNode,Jr(),Ie(mt),Ie(ot),Hl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(co(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zt!==null&&(wu(Zt),Zt=null))),du(n,i),lt(i),null;case 5:Gl(i);var d=vr(Xi.current);if(o=i.type,n!==null&&i.stateNode!=null)Sh(n,i,o,u,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(t(166));return lt(i),null}if(n=vr(hn.current),co(i)){u=i.stateNode,o=i.type;var p=i.memoizedProps;switch(u[dn]=i,u[Wi]=p,n=(i.mode&1)!==0,o){case"dialog":Oe("cancel",u),Oe("close",u);break;case"iframe":case"object":case"embed":Oe("load",u);break;case"video":case"audio":for(d=0;d<Bi.length;d++)Oe(Bi[d],u);break;case"source":Oe("error",u);break;case"img":case"image":case"link":Oe("error",u),Oe("load",u);break;case"details":Oe("toggle",u);break;case"input":Ei(u,p),Oe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Oe("invalid",u);break;case"textarea":nf(u,p),Oe("invalid",u)}Ka(o,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var E=p[v];v==="children"?typeof E=="string"?u.textContent!==E&&(p.suppressHydrationWarning!==!0&&no(u.textContent,E,n),d=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&no(u.textContent,E,n),d=["children",""+E]):a.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&Oe("scroll",u)}switch(o){case"input":kt(u),tf(u,p,!0);break;case"textarea":kt(u),sf(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ro)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=of(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=v.createElement(o,{is:u.is}):(n=v.createElement(o),o==="select"&&(v=n,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):n=v.createElementNS(n,o),n[dn]=i,n[Wi]=u,yh(n,i,!1,!1),i.stateNode=n;e:{switch(v=Ha(o,u),o){case"dialog":Oe("cancel",n),Oe("close",n),d=u;break;case"iframe":case"object":case"embed":Oe("load",n),d=u;break;case"video":case"audio":for(d=0;d<Bi.length;d++)Oe(Bi[d],n);d=u;break;case"source":Oe("error",n),d=u;break;case"img":case"image":case"link":Oe("error",n),Oe("load",n),d=u;break;case"details":Oe("toggle",n),d=u;break;case"input":Ei(n,u),d=cr(n,u),Oe("invalid",n);break;case"option":d=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},d=K({},u,{value:void 0}),Oe("invalid",n);break;case"textarea":nf(n,u),d=Wa(n,u),Oe("invalid",n);break;default:d=u}Ka(o,d),E=d;for(p in E)if(E.hasOwnProperty(p)){var T=E[p];p==="style"?uf(n,T):p==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&af(n,T)):p==="children"?typeof T=="string"?(o!=="textarea"||T!=="")&&xi(n,T):typeof T=="number"&&xi(n,""+T):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?T!=null&&p==="onScroll"&&Oe("scroll",n):T!=null&&P(n,p,T,v))}switch(o){case"input":kt(n),tf(n,u,!1);break;case"textarea":kt(n),sf(n);break;case"option":u.value!=null&&n.setAttribute("value",""+ye(u.value));break;case"select":n.multiple=!!u.multiple,p=u.value,p!=null?Mr(n,!!u.multiple,p,!1):u.defaultValue!=null&&Mr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ro)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(n&&i.stateNode!=null)Eh(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(t(166));if(o=vr(Xi.current),vr(hn.current),co(i)){if(u=i.stateNode,o=i.memoizedProps,u[dn]=i,(p=u.nodeValue!==o)&&(n=Ct,n!==null))switch(n.tag){case 3:no(u.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&no(u.nodeValue,o,(n.mode&1)!==0)}p&&(i.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[dn]=i,i.stateNode=u}return lt(i),null;case 13:if(Ie(Me),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)wd(),Xr(),i.flags|=98560,p=!1;else if(p=co(i),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[dn]=i}else Xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else Zt!==null&&(wu(Zt),Zt=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Me.current&1)!==0?Ye===0&&(Ye=3):Cu())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return Jr(),du(n,i),n===null&&zi(i.stateNode.containerInfo),lt(i),null;case 10:return Dl(i.type._context),lt(i),null;case 17:return gt(i.type)&&so(),lt(i),null;case 19:if(Ie(Me),p=i.memoizedState,p===null)return lt(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)es(p,!1);else{if(Ye!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=vo(n),v!==null){for(i.flags|=128,es(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=o,o=i.child;o!==null;)p=o,n=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return Ce(Me,Me.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ve()>ri&&(i.flags|=128,u=!0,es(p,!1),i.lanes=4194304)}else{if(!u)if(n=vo(v),n!==null){if(i.flags|=128,u=!0,o=n.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),es(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Pe)return lt(i),null}else 2*Ve()-p.renderingStartTime>ri&&o!==1073741824&&(i.flags|=128,u=!0,es(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(o=p.last,o!==null?o.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ve(),i.sibling=null,o=Me.current,Ce(Me,u?o&1|2:o&1),i):(lt(i),null);case 22:case 23:return Au(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Nt&1073741824)!==0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function qy(n,i){switch(Ml(i),i.tag){case 1:return gt(i.type)&&so(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Jr(),Ie(mt),Ie(ot),Hl(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Gl(i),null;case 13:if(Ie(Me),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Xr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ie(Me),null;case 4:return Jr(),null;case 10:return Dl(i.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var Co=!1,ut=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ti(n,i){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){De(n,i,u)}else o.current=null}function hu(n,i,o){try{o()}catch(u){De(n,i,u)}}var Th=!1;function Zy(n,i){if(Al=Gs,n=Jf(),vl(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,E=-1,T=-1,I=0,U=0,B=n,$=null;t:for(;;){for(var H;B!==o||d!==0&&B.nodeType!==3||(E=v+d),B!==p||u!==0&&B.nodeType!==3||(T=v+u),B.nodeType===3&&(v+=B.nodeValue.length),(H=B.firstChild)!==null;)$=B,B=H;for(;;){if(B===n)break t;if($===o&&++I===d&&(E=v),$===p&&++U===u&&(T=v),(H=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=H}o=E===-1||T===-1?null:{start:E,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cl={focusedElem:n,selectionRange:o},Gs=!1,Y=i;Y!==null;)if(i=Y,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Y=n;else for(;Y!==null;){i=Y;try{var X=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var q=X.memoizedProps,We=X.memoizedState,N=i.stateNode,w=N.getSnapshotBeforeUpdate(i.elementType===i.type?q:Jt(i.type,q),We);N.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var O=i.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(V){De(i,i.return,V)}if(n=i.sibling,n!==null){n.return=i.return,Y=n;break}Y=i.return}return X=Th,Th=!1,X}function ts(n,i,o){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&hu(i,o,p)}d=d.next}while(d!==u)}}function Ro(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var u=o.create;o.destroy=u()}o=o.next}while(o!==i)}}function pu(n){var i=n.ref;if(i!==null){var o=n.stateNode;n.tag,n=o,typeof i=="function"?i(n):i.current=n}}function xh(n){var i=n.alternate;i!==null&&(n.alternate=null,xh(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[dn],delete i[Wi],delete i[Il],delete i[My],delete i[by])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wh(n){return n.tag===5||n.tag===3||n.tag===4}function kh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mu(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(n,o)):(i=o,i.appendChild(n)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ro));else if(u!==4&&(n=n.child,n!==null))for(mu(n,i,o),n=n.sibling;n!==null;)mu(n,i,o),n=n.sibling}function gu(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(gu(n,i,o),n=n.sibling;n!==null;)gu(n,i,o),n=n.sibling}var nt=null,en=!1;function qn(n,i,o){for(o=o.child;o!==null;)Ah(n,i,o),o=o.sibling}function Ah(n,i,o){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Us,o)}catch{}switch(o.tag){case 5:ut||ti(o,i);case 6:var u=nt,d=en;nt=null,qn(n,i,o),nt=u,en=d,nt!==null&&(en?(n=nt,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):nt.removeChild(o.stateNode));break;case 18:nt!==null&&(en?(n=nt,o=o.stateNode,n.nodeType===8?Ol(n.parentNode,o):n.nodeType===1&&Ol(n,o),Li(n)):Ol(nt,o.stateNode));break;case 4:u=nt,d=en,nt=o.stateNode.containerInfo,en=!0,qn(n,i,o),nt=u,en=d;break;case 0:case 11:case 14:case 15:if(!ut&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&hu(o,i,v),d=d.next}while(d!==u)}qn(n,i,o);break;case 1:if(!ut&&(ti(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(E){De(o,i,E)}qn(n,i,o);break;case 21:qn(n,i,o);break;case 22:o.mode&1?(ut=(u=ut)||o.memoizedState!==null,qn(n,i,o),ut=u):qn(n,i,o);break;default:qn(n,i,o)}}function Ch(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new Qy),i.forEach(function(u){var d=a0.bind(null,n,u);o.has(u)||(o.add(u),u.then(d,d))})}}function tn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];try{var p=n,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 5:nt=E.stateNode,en=!1;break e;case 3:nt=E.stateNode.containerInfo,en=!0;break e;case 4:nt=E.stateNode.containerInfo,en=!0;break e}E=E.return}if(nt===null)throw Error(t(160));Ah(p,v,d),nt=null,en=!1;var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(I){De(d,i,I)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Rh(i,n),i=i.sibling}function Rh(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(tn(i,n),mn(n),u&4){try{ts(3,n,n.return),Ro(3,n)}catch(q){De(n,n.return,q)}try{ts(5,n,n.return)}catch(q){De(n,n.return,q)}}break;case 1:tn(i,n),mn(n),u&512&&o!==null&&ti(o,o.return);break;case 5:if(tn(i,n),mn(n),u&512&&o!==null&&ti(o,o.return),n.flags&32){var d=n.stateNode;try{xi(d,"")}catch(q){De(n,n.return,q)}}if(u&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=o!==null?o.memoizedProps:p,E=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&ef(d,p),Ha(E,v);var I=Ha(E,p);for(v=0;v<T.length;v+=2){var U=T[v],B=T[v+1];U==="style"?uf(d,B):U==="dangerouslySetInnerHTML"?af(d,B):U==="children"?xi(d,B):P(d,U,B,I)}switch(E){case"input":za(d,p);break;case"textarea":rf(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var H=p.value;H!=null?Mr(d,!!p.multiple,H,!1):$!==!!p.multiple&&(p.defaultValue!=null?Mr(d,!!p.multiple,p.defaultValue,!0):Mr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Wi]=p}catch(q){De(n,n.return,q)}}break;case 6:if(tn(i,n),mn(n),u&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(q){De(n,n.return,q)}}break;case 3:if(tn(i,n),mn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Li(i.containerInfo)}catch(q){De(n,n.return,q)}break;case 4:tn(i,n),mn(n);break;case 13:tn(i,n),mn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Su=Ve())),u&4&&Ch(n);break;case 22:if(U=o!==null&&o.memoizedState!==null,n.mode&1?(ut=(I=ut)||U,tn(i,n),ut=I):tn(i,n),mn(n),u&8192){if(I=n.memoizedState!==null,(n.stateNode.isHidden=I)&&!U&&(n.mode&1)!==0)for(Y=n,U=n.child;U!==null;){for(B=Y=U;Y!==null;){switch($=Y,H=$.child,$.tag){case 0:case 11:case 14:case 15:ts(4,$,$.return);break;case 1:ti($,$.return);var X=$.stateNode;if(typeof X.componentWillUnmount=="function"){u=$,o=$.return;try{i=u,X.props=i.memoizedProps,X.state=i.memoizedState,X.componentWillUnmount()}catch(q){De(u,o,q)}}break;case 5:ti($,$.return);break;case 22:if($.memoizedState!==null){Ih(B);continue}}H!==null?(H.return=$,Y=H):Ih(B)}U=U.sibling}e:for(U=null,B=n;;){if(B.tag===5){if(U===null){U=B;try{d=B.stateNode,I?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=B.stateNode,T=B.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,E.style.display=lf("display",v))}catch(q){De(n,n.return,q)}}}else if(B.tag===6){if(U===null)try{B.stateNode.nodeValue=I?"":B.memoizedProps}catch(q){De(n,n.return,q)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===n)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===n)break e;for(;B.sibling===null;){if(B.return===null||B.return===n)break e;U===B&&(U=null),B=B.return}U===B&&(U=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:tn(i,n),mn(n),u&4&&Ch(n);break;case 21:break;default:tn(i,n),mn(n)}}function mn(n){var i=n.flags;if(i&2){try{e:{for(var o=n.return;o!==null;){if(wh(o)){var u=o;break e}o=o.return}throw Error(t(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(xi(d,""),u.flags&=-33);var p=kh(n);gu(n,p,d);break;case 3:case 4:var v=u.stateNode.containerInfo,E=kh(n);mu(n,E,v);break;default:throw Error(t(161))}}catch(T){De(n,n.return,T)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Jy(n,i,o){Y=n,Nh(n)}function Nh(n,i,o){for(var u=(n.mode&1)!==0;Y!==null;){var d=Y,p=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Co;if(!v){var E=d.alternate,T=E!==null&&E.memoizedState!==null||ut;E=Co;var I=ut;if(Co=v,(ut=T)&&!I)for(Y=d;Y!==null;)v=Y,T=v.child,v.tag===22&&v.memoizedState!==null?_h(d):T!==null?(T.return=v,Y=T):_h(d);for(;p!==null;)Y=p,Nh(p),p=p.sibling;Y=d,Co=E,ut=I}Oh(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Y=p):Oh(n)}}function Oh(n){for(;Y!==null;){var i=Y;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ut||Ro(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(o===null)u.componentDidMount();else{var d=i.elementType===i.type?o.memoizedProps:Jt(i.type,o.memoizedProps);u.componentDidUpdate(d,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Id(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}Id(i,v,o)}break;case 5:var E=i.stateNode;if(o===null&&i.flags&4){o=E;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&o.focus();break;case"img":T.src&&(o.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var I=i.alternate;if(I!==null){var U=I.memoizedState;if(U!==null){var B=U.dehydrated;B!==null&&Li(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ut||i.flags&512&&pu(i)}catch($){De(i,i.return,$)}}if(i===n){Y=null;break}if(o=i.sibling,o!==null){o.return=i.return,Y=o;break}Y=i.return}}function Ih(n){for(;Y!==null;){var i=Y;if(i===n){Y=null;break}var o=i.sibling;if(o!==null){o.return=i.return,Y=o;break}Y=i.return}}function _h(n){for(;Y!==null;){var i=Y;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{Ro(4,i)}catch(T){De(i,o,T)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(T){De(i,d,T)}}var p=i.return;try{pu(i)}catch(T){De(i,p,T)}break;case 5:var v=i.return;try{pu(i)}catch(T){De(i,v,T)}}}catch(T){De(i,i.return,T)}if(i===n){Y=null;break}var E=i.sibling;if(E!==null){E.return=i.return,Y=E;break}Y=i.return}}var e0=Math.ceil,No=M.ReactCurrentDispatcher,vu=M.ReactCurrentOwner,zt=M.ReactCurrentBatchConfig,Ee=0,Je=null,Ke=null,rt=0,Nt=0,ni=Gn(0),Ye=0,ns=null,Sr=0,Oo=0,yu=0,rs=null,yt=null,Su=0,ri=1/0,_n=null,Io=!1,Eu=null,Qn=null,_o=!1,Zn=null,Po=0,is=0,Tu=null,Lo=-1,Mo=0;function ft(){return(Ee&6)!==0?Ve():Lo!==-1?Lo:Lo=Ve()}function Jn(n){return(n.mode&1)===0?1:(Ee&2)!==0&&rt!==0?rt&-rt:Fy.transition!==null?(Mo===0&&(Mo=kf()),Mo):(n=Ae,n!==0||(n=window.event,n=n===void 0?16:Lf(n.type)),n)}function nn(n,i,o,u){if(50<is)throw is=0,Tu=null,Error(t(185));Ni(n,o,u),((Ee&2)===0||n!==Je)&&(n===Je&&((Ee&2)===0&&(Oo|=o),Ye===4&&er(n,rt)),St(n,u),o===1&&Ee===0&&(i.mode&1)===0&&(ri=Ve()+500,ao&&Hn()))}function St(n,i){var o=n.callbackNode;Fv(n,i);var u=zs(n,n===Je?rt:0);if(u===0)o!==null&&Tf(o),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(o!=null&&Tf(o),i===1)n.tag===0?jy(Lh.bind(null,n)):yd(Lh.bind(null,n)),Py(function(){(Ee&6)===0&&Hn()}),o=null;else{switch(Af(u)){case 1:o=el;break;case 4:o=xf;break;case 16:o=$s;break;case 536870912:o=wf;break;default:o=$s}o=Bh(o,Ph.bind(null,n))}n.callbackPriority=i,n.callbackNode=o}}function Ph(n,i){if(Lo=-1,Mo=0,(Ee&6)!==0)throw Error(t(327));var o=n.callbackNode;if(ii()&&n.callbackNode!==o)return null;var u=zs(n,n===Je?rt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||i)i=bo(n,u);else{i=u;var d=Ee;Ee|=2;var p=bh();(Je!==n||rt!==i)&&(_n=null,ri=Ve()+500,Tr(n,i));do try{r0();break}catch(E){Mh(n,E)}while(!0);Ul(),No.current=p,Ee=d,Ke!==null?i=0:(Je=null,rt=0,i=Ye)}if(i!==0){if(i===2&&(d=tl(n),d!==0&&(u=d,i=xu(n,d))),i===1)throw o=ns,Tr(n,0),er(n,u),St(n,Ve()),o;if(i===6)er(n,u);else{if(d=n.current.alternate,(u&30)===0&&!t0(d)&&(i=bo(n,u),i===2&&(p=tl(n),p!==0&&(u=p,i=xu(n,p))),i===1))throw o=ns,Tr(n,0),er(n,u),St(n,Ve()),o;switch(n.finishedWork=d,n.finishedLanes=u,i){case 0:case 1:throw Error(t(345));case 2:xr(n,yt,_n);break;case 3:if(er(n,u),(u&130023424)===u&&(i=Su+500-Ve(),10<i)){if(zs(n,0)!==0)break;if(d=n.suspendedLanes,(d&u)!==u){ft(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Nl(xr.bind(null,n,yt,_n),i);break}xr(n,yt,_n);break;case 4:if(er(n,u),(u&4194240)===u)break;for(i=n.eventTimes,d=-1;0<u;){var v=31-qt(u);p=1<<v,v=i[v],v>d&&(d=v),u&=~p}if(u=d,u=Ve()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*e0(u/1960))-u,10<u){n.timeoutHandle=Nl(xr.bind(null,n,yt,_n),u);break}xr(n,yt,_n);break;case 5:xr(n,yt,_n);break;default:throw Error(t(329))}}}return St(n,Ve()),n.callbackNode===o?Ph.bind(null,n):null}function xu(n,i){var o=rs;return n.current.memoizedState.isDehydrated&&(Tr(n,i).flags|=256),n=bo(n,i),n!==2&&(i=yt,yt=o,i!==null&&wu(i)),n}function wu(n){yt===null?yt=n:yt.push.apply(yt,n)}function t0(n){for(var i=n;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Qt(p(),d))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(n,i){for(i&=~yu,i&=~Oo,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var o=31-qt(i),u=1<<o;n[o]=-1,i&=~u}}function Lh(n){if((Ee&6)!==0)throw Error(t(327));ii();var i=zs(n,0);if((i&1)===0)return St(n,Ve()),null;var o=bo(n,i);if(n.tag!==0&&o===2){var u=tl(n);u!==0&&(i=u,o=xu(n,u))}if(o===1)throw o=ns,Tr(n,0),er(n,i),St(n,Ve()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,xr(n,yt,_n),St(n,Ve()),null}function ku(n,i){var o=Ee;Ee|=1;try{return n(i)}finally{Ee=o,Ee===0&&(ri=Ve()+500,ao&&Hn())}}function Er(n){Zn!==null&&Zn.tag===0&&(Ee&6)===0&&ii();var i=Ee;Ee|=1;var o=zt.transition,u=Ae;try{if(zt.transition=null,Ae=1,n)return n()}finally{Ae=u,zt.transition=o,Ee=i,(Ee&6)===0&&Hn()}}function Au(){Nt=ni.current,Ie(ni)}function Tr(n,i){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,_y(o)),Ke!==null)for(o=Ke.return;o!==null;){var u=o;switch(Ml(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&so();break;case 3:Jr(),Ie(mt),Ie(ot),Hl();break;case 5:Gl(u);break;case 4:Jr();break;case 13:Ie(Me);break;case 19:Ie(Me);break;case 10:Dl(u.type._context);break;case 22:case 23:Au()}o=o.return}if(Je=n,Ke=n=tr(n.current,null),rt=Nt=i,Ye=0,ns=null,yu=Oo=Sr=0,yt=rs=null,gr!==null){for(i=0;i<gr.length;i++)if(o=gr[i],u=o.interleaved,u!==null){o.interleaved=null;var d=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=d,u.next=v}o.pending=u}gr=null}return n}function Mh(n,i){do{var o=Ke;try{if(Ul(),yo.current=xo,So){for(var u=be.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}So=!1}if(yr=0,Ze=He=be=null,qi=!1,Qi=0,vu.current=null,o===null||o.return===null){Ye=1,ns=i,Ke=null;break}e:{var p=n,v=o.return,E=o,T=i;if(i=rt,E.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var I=T,U=E,B=U.tag;if((U.mode&1)===0&&(B===0||B===11||B===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var H=sh(v);if(H!==null){H.flags&=-257,oh(H,v,E,p,i),H.mode&1&&ih(p,I,i),i=H,T=I;var X=i.updateQueue;if(X===null){var q=new Set;q.add(T),i.updateQueue=q}else X.add(T);break e}else{if((i&1)===0){ih(p,I,i),Cu();break e}T=Error(t(426))}}else if(Pe&&E.mode&1){var We=sh(v);if(We!==null){(We.flags&65536)===0&&(We.flags|=256),oh(We,v,E,p,i),Fl(ei(T,E));break e}}p=T=ei(T,E),Ye!==4&&(Ye=2),rs===null?rs=[p]:rs.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var N=nh(p,T,i);Od(p,N);break e;case 1:E=T;var w=p.type,O=p.stateNode;if((p.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Qn===null||!Qn.has(O)))){p.flags|=65536,i&=-i,p.lanes|=i;var V=rh(p,E,i);Od(p,V);break e}}p=p.return}while(p!==null)}Fh(o)}catch(Q){i=Q,Ke===o&&o!==null&&(Ke=o=o.return);continue}break}while(!0)}function bh(){var n=No.current;return No.current=xo,n===null?xo:n}function Cu(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||(Sr&268435455)===0&&(Oo&268435455)===0||er(Je,rt)}function bo(n,i){var o=Ee;Ee|=2;var u=bh();(Je!==n||rt!==i)&&(_n=null,Tr(n,i));do try{n0();break}catch(d){Mh(n,d)}while(!0);if(Ul(),Ee=o,No.current=u,Ke!==null)throw Error(t(261));return Je=null,rt=0,Ye}function n0(){for(;Ke!==null;)jh(Ke)}function r0(){for(;Ke!==null&&!Nv();)jh(Ke)}function jh(n){var i=Dh(n.alternate,n,Nt);n.memoizedProps=n.pendingProps,i===null?Fh(n):Ke=i,vu.current=null}function Fh(n){var i=n;do{var o=i.alternate;if(n=i.return,(i.flags&32768)===0){if(o=Xy(o,i,Nt),o!==null){Ke=o;return}}else{if(o=qy(o,i),o!==null){o.flags&=32767,Ke=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ye=6,Ke=null;return}}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=n}while(i!==null);Ye===0&&(Ye=5)}function xr(n,i,o){var u=Ae,d=zt.transition;try{zt.transition=null,Ae=1,i0(n,i,o,u)}finally{zt.transition=d,Ae=u}return null}function i0(n,i,o,u){do ii();while(Zn!==null);if((Ee&6)!==0)throw Error(t(327));o=n.finishedWork;var d=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=o.lanes|o.childLanes;if($v(n,p),n===Je&&(Ke=Je=null,rt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||_o||(_o=!0,Bh($s,function(){return ii(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=zt.transition,zt.transition=null;var v=Ae;Ae=1;var E=Ee;Ee|=4,vu.current=null,Zy(n,o),Rh(o,n),ky(Cl),Gs=!!Al,Cl=Al=null,n.current=o,Jy(o),Ov(),Ee=E,Ae=v,zt.transition=p}else n.current=o;if(_o&&(_o=!1,Zn=n,Po=d),p=n.pendingLanes,p===0&&(Qn=null),Pv(o.stateNode),St(n,Ve()),i!==null)for(u=n.onRecoverableError,o=0;o<i.length;o++)d=i[o],u(d.value,{componentStack:d.stack,digest:d.digest});if(Io)throw Io=!1,n=Eu,Eu=null,n;return(Po&1)!==0&&n.tag!==0&&ii(),p=n.pendingLanes,(p&1)!==0?n===Tu?is++:(is=0,Tu=n):is=0,Hn(),null}function ii(){if(Zn!==null){var n=Af(Po),i=zt.transition,o=Ae;try{if(zt.transition=null,Ae=16>n?16:n,Zn===null)var u=!1;else{if(n=Zn,Zn=null,Po=0,(Ee&6)!==0)throw Error(t(331));var d=Ee;for(Ee|=4,Y=n.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var E=p.deletions;if(E!==null){for(var T=0;T<E.length;T++){var I=E[T];for(Y=I;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:ts(8,U,p)}var B=U.child;if(B!==null)B.return=U,Y=B;else for(;Y!==null;){U=Y;var $=U.sibling,H=U.return;if(xh(U),U===I){Y=null;break}if($!==null){$.return=H,Y=$;break}Y=H}}}var X=p.alternate;if(X!==null){var q=X.child;if(q!==null){X.child=null;do{var We=q.sibling;q.sibling=null,q=We}while(q!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ts(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,Y=N;break e}Y=p.return}}var w=n.current;for(Y=w;Y!==null;){v=Y;var O=v.child;if((v.subtreeFlags&2064)!==0&&O!==null)O.return=v,Y=O;else e:for(v=w;Y!==null;){if(E=Y,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Ro(9,E)}}catch(Q){De(E,E.return,Q)}if(E===v){Y=null;break e}var V=E.sibling;if(V!==null){V.return=E.return,Y=V;break e}Y=E.return}}if(Ee=d,Hn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Us,n)}catch{}u=!0}return u}finally{Ae=o,zt.transition=i}}return!1}function $h(n,i,o){i=ei(o,i),i=nh(n,i,1),n=Xn(n,i,1),i=ft(),n!==null&&(Ni(n,1,i),St(n,i))}function De(n,i,o){if(n.tag===3)$h(n,n,o);else for(;i!==null;){if(i.tag===3){$h(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qn===null||!Qn.has(u))){n=ei(o,n),n=rh(i,n,1),i=Xn(i,n,1),n=ft(),i!==null&&(Ni(i,1,n),St(i,n));break}}i=i.return}}function s0(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),i=ft(),n.pingedLanes|=n.suspendedLanes&o,Je===n&&(rt&o)===o&&(Ye===4||Ye===3&&(rt&130023424)===rt&&500>Ve()-Su?Tr(n,0):yu|=o),St(n,i)}function Uh(n,i){i===0&&((n.mode&1)===0?i=1:(i=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var o=ft();n=Nn(n,i),n!==null&&(Ni(n,i,o),St(n,o))}function o0(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Uh(n,o)}function a0(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(i),Uh(n,o)}var Dh;Dh=function(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps||mt.current)vt=!0;else{if((n.lanes&o)===0&&(i.flags&128)===0)return vt=!1,Yy(n,i,o);vt=(n.flags&131072)!==0}else vt=!1,Pe&&(i.flags&1048576)!==0&&Sd(i,uo,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Ao(n,i),n=i.pendingProps;var d=Kr(i,ot.current);Zr(i,o),d=ql(null,i,u,n,d,o);var p=Ql();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,gt(u)?(p=!0,oo(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Vl(i),d.updater=wo,i.stateNode=d,d._reactInternals=i,ru(i,u,n,o),i=au(null,i,u,!0,p,o)):(i.tag=0,Pe&&p&&Ll(i),ct(null,i,d,o),i=i.child),i;case 16:u=i.elementType;e:{switch(Ao(n,i),n=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=u0(u),n=Jt(u,n),d){case 0:i=ou(null,i,u,n,o);break e;case 1:i=dh(null,i,u,n,o);break e;case 11:i=ah(null,i,u,n,o);break e;case 14:i=lh(null,i,u,Jt(u.type,n),o);break e}throw Error(t(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),ou(n,i,u,d,o);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),dh(n,i,u,d,o);case 3:e:{if(hh(i),n===null)throw Error(t(387));u=i.pendingProps,p=i.memoizedState,d=p.element,Nd(n,i),go(i,u,null,o);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ei(Error(t(423)),i),i=ph(n,i,u,o,d);break e}else if(u!==d){d=ei(Error(t(424)),i),i=ph(n,i,u,o,d);break e}else for(Rt=Wn(i.stateNode.containerInfo.firstChild),Ct=i,Pe=!0,Zt=null,o=Cd(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Xr(),u===d){i=In(n,i,o);break e}ct(n,i,u,o)}i=i.child}return i;case 5:return _d(i),n===null&&jl(i),u=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,Rl(u,d)?v=null:p!==null&&Rl(u,p)&&(i.flags|=32),fh(n,i),ct(n,i,v,o),i.child;case 6:return n===null&&jl(i),null;case 13:return mh(n,i,o);case 4:return Wl(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=qr(i,null,u,o):ct(n,i,u,o),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),ah(n,i,u,d,o);case 7:return ct(n,i,i.pendingProps,o),i.child;case 8:return ct(n,i,i.pendingProps.children,o),i.child;case 12:return ct(n,i,i.pendingProps.children,o),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ce(ho,u._currentValue),u._currentValue=v,p!==null)if(Qt(p.value,v)){if(p.children===d.children&&!mt.current){i=In(n,i,o);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var E=p.dependencies;if(E!==null){v=p.child;for(var T=E.firstContext;T!==null;){if(T.context===u){if(p.tag===1){T=On(-1,o&-o),T.tag=2;var I=p.updateQueue;if(I!==null){I=I.shared;var U=I.pending;U===null?T.next=T:(T.next=U.next,U.next=T),I.pending=T}}p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),Bl(p.return,o,i),E.lanes|=o;break}T=T.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=o,E=v.alternate,E!==null&&(E.lanes|=o),Bl(v,o,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}ct(n,i,d.children,o),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,Zr(i,o),d=Dt(d),u=u(d),i.flags|=1,ct(n,i,u,o),i.child;case 14:return u=i.type,d=Jt(u,i.pendingProps),d=Jt(u.type,d),lh(n,i,u,d,o);case 15:return uh(n,i,i.type,i.pendingProps,o);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),Ao(n,i),i.tag=1,gt(u)?(n=!0,oo(i)):n=!1,Zr(i,o),eh(i,u,d),ru(i,u,d,o),au(null,i,u,!0,n,o);case 19:return vh(n,i,o);case 22:return ch(n,i,o)}throw Error(t(156,i.tag))};function Bh(n,i){return Ef(n,i)}function l0(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(n,i,o,u){return new l0(n,i,o,u)}function Ru(n){return n=n.prototype,!(!n||!n.isReactComponent)}function u0(n){if(typeof n=="function")return Ru(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tt)return 11;if(n===de)return 14}return 2}function tr(n,i){var o=n.alternate;return o===null?(o=Vt(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function jo(n,i,o,u,d,p){var v=2;if(u=n,typeof n=="function")Ru(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case D:return wr(o.children,d,p,i);case G:v=8,d|=8;break;case ke:return n=Vt(12,o,i,d|2),n.elementType=ke,n.lanes=p,n;case $e:return n=Vt(13,o,i,d),n.elementType=$e,n.lanes=p,n;case Ue:return n=Vt(19,o,i,d),n.elementType=Ue,n.lanes=p,n;case we:return Fo(o,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:v=10;break e;case Ge:v=9;break e;case tt:v=11;break e;case de:v=14;break e;case ve:v=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Vt(v,o,i,d),i.elementType=n,i.type=u,i.lanes=p,i}function wr(n,i,o,u){return n=Vt(7,n,u,i),n.lanes=o,n}function Fo(n,i,o,u){return n=Vt(22,n,u,i),n.elementType=we,n.lanes=o,n.stateNode={isHidden:!1},n}function Nu(n,i,o){return n=Vt(6,n,null,i),n.lanes=o,n}function Ou(n,i,o){return i=Vt(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function c0(n,i,o,u,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Iu(n,i,o,u,d,p,v,E,T){return n=new c0(n,i,o,E,T),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Vt(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(p),n}function f0(n,i,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:n,containerInfo:i,implementation:o}}function zh(n){if(!n)return Kn;n=n._reactInternals;e:{if(fr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(gt(o))return gd(n,o,i)}return i}function Vh(n,i,o,u,d,p,v,E,T){return n=Iu(o,u,!0,n,d,p,v,E,T),n.context=zh(null),o=n.current,u=ft(),d=Jn(o),p=On(u,d),p.callback=i??null,Xn(o,p,d),n.current.lanes=d,Ni(n,d,u),St(n,u),n}function $o(n,i,o,u){var d=i.current,p=ft(),v=Jn(d);return o=zh(o),i.context===null?i.context=o:i.pendingContext=o,i=On(p,v),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=Xn(d,i,v),n!==null&&(nn(n,d,v,p),mo(n,d,v)),v}function Uo(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Wh(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function _u(n,i){Wh(n,i),(n=n.alternate)&&Wh(n,i)}function d0(){return null}var Gh=typeof reportError=="function"?reportError:function(n){console.error(n)};function Pu(n){this._internalRoot=n}Do.prototype.render=Pu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));$o(n,i,null,null)},Do.prototype.unmount=Pu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Er(function(){$o(null,n,null,null)}),i[kn]=null}};function Do(n){this._internalRoot=n}Do.prototype.unstable_scheduleHydration=function(n){if(n){var i=Nf();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Bn.length&&i!==0&&i<Bn[o].priority;o++);Bn.splice(o,0,n),o===0&&_f(n)}};function Lu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Kh(){}function h0(n,i,o,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var I=Uo(v);p.call(I)}}var v=Vh(i,u,n,0,null,!1,!1,"",Kh);return n._reactRootContainer=v,n[kn]=v.current,zi(n.nodeType===8?n.parentNode:n),Er(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof u=="function"){var E=u;u=function(){var I=Uo(T);E.call(I)}}var T=Iu(n,0,!1,null,null,!1,!1,"",Kh);return n._reactRootContainer=T,n[kn]=T.current,zi(n.nodeType===8?n.parentNode:n),Er(function(){$o(i,T,o,u)}),T}function zo(n,i,o,u,d){var p=o._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var E=d;d=function(){var T=Uo(v);E.call(T)}}$o(i,v,n,d)}else v=h0(o,i,n,d,u);return Uo(v)}Cf=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var o=Ri(i.pendingLanes);o!==0&&(rl(i,o|1),St(i,Ve()),(Ee&6)===0&&(ri=Ve()+500,Hn()))}break;case 13:Er(function(){var u=Nn(n,1);if(u!==null){var d=ft();nn(u,n,1,d)}}),_u(n,1)}},il=function(n){if(n.tag===13){var i=Nn(n,134217728);if(i!==null){var o=ft();nn(i,n,134217728,o)}_u(n,134217728)}},Rf=function(n){if(n.tag===13){var i=Jn(n),o=Nn(n,i);if(o!==null){var u=ft();nn(o,n,i,u)}_u(n,i)}},Nf=function(){return Ae},Of=function(n,i){var o=Ae;try{return Ae=n,i()}finally{Ae=o}},qa=function(n,i,o){switch(i){case"input":if(za(n,o),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=io(u);if(!d)throw Error(t(90));jt(u),za(u,d)}}}break;case"textarea":rf(n,o);break;case"select":i=o.value,i!=null&&Mr(n,!!o.multiple,i,!1)}},hf=ku,pf=Er;var p0={usingClientEntryPoint:!1,Events:[Gi,Wr,io,ff,df,ku]},ss={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m0={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=yf(n),n===null?null:n.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||d0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vo.isDisabled&&Vo.supportsFiber)try{Us=Vo.inject(m0),fn=Vo}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0,Et.createPortal=function(n,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lu(i))throw Error(t(200));return f0(n,i,null,o)},Et.createRoot=function(n,i){if(!Lu(n))throw Error(t(299));var o=!1,u="",d=Gh;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Iu(n,1,!1,null,null,o,!1,u,d),n[kn]=i.current,zi(n.nodeType===8?n.parentNode:n),new Pu(i)},Et.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=yf(i),n=n===null?null:n.stateNode,n},Et.flushSync=function(n){return Er(n)},Et.hydrate=function(n,i,o){if(!Bo(i))throw Error(t(200));return zo(null,n,i,!0,o)},Et.hydrateRoot=function(n,i,o){if(!Lu(n))throw Error(t(405));var u=o!=null&&o.hydratedSources||null,d=!1,p="",v=Gh;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),i=Vh(i,null,n,1,o??null,d,!1,p,v),n[kn]=i.current,zi(n),u)for(n=0;n<u.length;n++)o=u[n],d=o._getVersion,d=d(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,d]:i.mutableSourceEagerHydrationData.push(o,d);return new Do(i)},Et.render=function(n,i,o){if(!Bo(i))throw Error(t(200));return zo(null,n,i,!1,o)},Et.unmountComponentAtNode=function(n){if(!Bo(n))throw Error(t(40));return n._reactRootContainer?(Er(function(){zo(null,null,n,!1,function(){n._reactRootContainer=null,n[kn]=null})}),!0):!1},Et.unstable_batchedUpdates=ku,Et.unstable_renderSubtreeIntoContainer=function(n,i,o,u){if(!Bo(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zo(n,i,o,!1,u)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var ep;function k0(){if(ep)return ju.exports;ep=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ju.exports=w0(),ju.exports}var tp;function A0(){if(tp)return Wo;tp=1;var r=k0();return Wo.createRoot=r.createRoot,Wo.hydrateRoot=r.hydrateRoot,Wo}var C0=A0();const R0={},np=r=>{let e;const t=new Set,s=(g,y)=>{const S=typeof g=="function"?g(e):g;if(!Object.is(S,e)){const x=e;e=y??(typeof S!="object"||S===null)?S:Object.assign({},e,S),t.forEach(A=>A(e,x))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>m,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{(R0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},m=e=r(s,a,h);return h},N0=r=>r?np(r):np;var Uu={exports:{}},Du={},Bu={exports:{}},zu={};var rp;function O0(){if(rp)return zu;rp=1;var r=As();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var t=typeof Object.is=="function"?Object.is:e,s=r.useState,a=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function f(y,S){var x=S(),A=s({inst:{value:x,getSnapshot:S}}),R=A[0].inst,j=A[1];return l(function(){R.value=x,R.getSnapshot=S,h(R)&&j({inst:R})},[y,x,S]),a(function(){return h(R)&&j({inst:R}),y(function(){h(R)&&j({inst:R})})},[y]),c(x),x}function h(y){var S=y.getSnapshot;y=y.value;try{var x=S();return!t(y,x)}catch{return!0}}function m(y,S){return S()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return zu.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,zu}var ip;function I0(){return ip||(ip=1,Bu.exports=O0()),Bu.exports}var sp;function _0(){if(sp)return Du;sp=1;var r=As(),e=I0();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=r.useRef,c=r.useEffect,f=r.useMemo,h=r.useDebugValue;return Du.useSyncExternalStoreWithSelector=function(m,g,y,S,x){var A=l(null);if(A.current===null){var R={hasValue:!1,value:null};A.current=R}else R=A.current;A=f(function(){function b(L){if(!_){if(_=!0,P=L,L=S(L),x!==void 0&&R.hasValue){var D=R.value;if(x(D,L))return M=D}return M=L}if(D=M,s(P,L))return D;var G=S(L);return x!==void 0&&x(D,G)?(P=L,D):(P=L,M=G)}var _=!1,P,M,z=y===void 0?null:y;return[function(){return b(g())},z===null?void 0:function(){return b(z())}]},[g,y,S,x]);var j=a(m,A[0],A[1]);return c(function(){R.hasValue=!0,R.value=j},[j]),h(j),j},Du}var op;function P0(){return op||(op=1,Uu.exports=_0()),Uu.exports}var L0=P0();const M0=Cc(L0),Nm={},{useDebugValue:b0}=Ar,{useSyncExternalStoreWithSelector:j0}=M0;let ap=!1;const F0=r=>r;function $0(r,e=F0,t){(Nm?"production":void 0)!=="production"&&t&&!ap&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ap=!0);const s=j0(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return b0(s),s}const lp=r=>{(Nm?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?N0(r):r,t=(s,a)=>$0(e,s,a);return Object.assign(t,e),t},U0=r=>r?lp(r):lp,D0=`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills and commands.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation for current file"
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest", "Testing Library"]
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "refactor", "test"]
  }
}

@restrictions {
  - "Always explain your reasoning before making changes"
  - "Ask for clarification when requirements are unclear"
  - "Never skip writing tests for new functionality"
}
`,B0={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}},ie=U0(r=>({files:[{path:"project.prs",content:D0}],activeFile:"project.prs",isCompiling:!1,compileResult:null,lastCompileTime:null,config:B0,activeFormatter:"github",showErrors:!1,showExamples:!1,showConfig:!1,showEnvVars:!1,setActiveFile:e=>r({activeFile:e}),updateFile:(e,t)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,content:t}:a)})),addFile:(e,t)=>r(s=>({files:[...s.files,{path:e,content:t}],activeFile:e})),deleteFile:e=>r(t=>{const s=t.files.filter(l=>l.path!==e),a=t.activeFile===e?s[0]?.path??"project.prs":t.activeFile;return{files:s,activeFile:a}}),renameFile:(e,t)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,path:t}:a),activeFile:s.activeFile===e?t:s.activeFile})),setFiles:e=>r({files:e,activeFile:e[0]?.path??"project.prs"}),setCompiling:e=>r({isCompiling:e}),setCompileResult:e=>r({compileResult:e,lastCompileTime:Date.now(),showErrors:e!==null&&!e.success}),setTargetEnabled:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],enabled:t}}}})),setTargetVersion:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],version:t}}}})),setTargetConvention:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],convention:t}}}})),setFormatting:e=>r(t=>({config:{...t.config,formatting:{...t.config.formatting,...e}}})),setConfig:e=>r({config:e}),setEnvVar:(e,t)=>r(s=>({config:{...s.config,envVars:{...s.config.envVars,[e]:t}}})),deleteEnvVar:e=>r(t=>{const{[e]:s,...a}=t.config.envVars;return{config:{...t.config,envVars:a}}}),setEnvVars:e=>r(t=>({config:{...t.config,envVars:e}})),setActiveFormatter:e=>r({activeFormatter:e}),setShowErrors:e=>r({showErrors:e}),setShowExamples:e=>r({showExamples:e}),setShowConfig:e=>r({showConfig:e}),setShowEnvVars:e=>r({showEnvVars:e})})),z0=r=>r.files.find(e=>e.path===r.activeFile)?.content??"",V0=r=>{const e={};for(const t of r.files)e[t.path]=t.content;return e},W0=(r,e)=>{if(!r.compileResult?.outputs)return[];const t=r.compileResult.outputs,s=[],l={claude:[/CLAUDE\.md$/,/\.claude\/rules\/.*\.md$/,/\.claude\/skills\/.*\.md$/,/\.claude\/memories\/.*\.md$/],github:[/\.github\/copilot-instructions\.md$/,/copilot-instructions\.md$/,/\.github\/instructions\/.*\.instructions\.md$/,/\.github\/prompts\/.*\.prompt\.md$/,/\.github\/skills\/.*\/SKILL\.md$/,/\.github\/agents\/.*\.md$/,/^AGENTS\.md$/],cursor:[/\.cursor\/rules\/.*\.mdc$/,/\.cursorrules$/],antigravity:[/\.agent\/rules\/.*\.md$/,/\.agent\/workflows\/.*\.md$/]}[e];for(const[h,m]of t)l.some(g=>g.test(h))&&s.push(m);const f={claude:"CLAUDE.md",github:"copilot-instructions.md",cursor:"instructions.mdc",antigravity:"project.md"}[e];return s.sort((h,m)=>{const g=h.path.endsWith(f),y=m.path.endsWith(f);return g&&!y?-1:!g&&y?1:h.path.localeCompare(m.path)}),s},G0=r=>Object.entries(r.config.targets).filter(([,e])=>e.enabled).map(([e])=>e);var Vu={exports:{}},up;function K0(){return up||(up=1,(function(r){var e=(function(){var t=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={};function c(h,m){if(!l[h]){l[h]={};for(var g=0;g<h.length;g++)l[h][h.charAt(g)]=g}return l[h][m]}var f={compressToBase64:function(h){if(h==null)return"";var m=f._compress(h,6,function(g){return s.charAt(g)});switch(m.length%4){default:case 0:return m;case 1:return m+"===";case 2:return m+"==";case 3:return m+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:f._decompress(h.length,32,function(m){return c(s,h.charAt(m))})},compressToUTF16:function(h){return h==null?"":f._compress(h,15,function(m){return t(m+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:f._decompress(h.length,16384,function(m){return h.charCodeAt(m)-32})},compressToUint8Array:function(h){for(var m=f.compress(h),g=new Uint8Array(m.length*2),y=0,S=m.length;y<S;y++){var x=m.charCodeAt(y);g[y*2]=x>>>8,g[y*2+1]=x%256}return g},decompressFromUint8Array:function(h){if(h==null)return f.decompress(h);for(var m=new Array(h.length/2),g=0,y=m.length;g<y;g++)m[g]=h[g*2]*256+h[g*2+1];var S=[];return m.forEach(function(x){S.push(t(x))}),f.decompress(S.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":f._compress(h,6,function(m){return a.charAt(m)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),f._decompress(h.length,32,function(m){return c(a,h.charAt(m))}))},compress:function(h){return f._compress(h,16,function(m){return t(m)})},_compress:function(h,m,g){if(h==null)return"";var y,S,x={},A={},R="",j="",b="",_=2,P=3,M=2,z=[],L=0,D=0,G;for(G=0;G<h.length;G+=1)if(R=h.charAt(G),Object.prototype.hasOwnProperty.call(x,R)||(x[R]=P++,A[R]=!0),j=b+R,Object.prototype.hasOwnProperty.call(x,j))b=j;else{if(Object.prototype.hasOwnProperty.call(A,b)){if(b.charCodeAt(0)<256){for(y=0;y<M;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(S=b.charCodeAt(0),y=0;y<8;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}else{for(S=1,y=0;y<M;y++)L=L<<1|S,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=0;for(S=b.charCodeAt(0),y=0;y<16;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}_--,_==0&&(_=Math.pow(2,M),M++),delete A[b]}else for(S=x[b],y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;_--,_==0&&(_=Math.pow(2,M),M++),x[j]=P++,b=String(R)}if(b!==""){if(Object.prototype.hasOwnProperty.call(A,b)){if(b.charCodeAt(0)<256){for(y=0;y<M;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(S=b.charCodeAt(0),y=0;y<8;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}else{for(S=1,y=0;y<M;y++)L=L<<1|S,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=0;for(S=b.charCodeAt(0),y=0;y<16;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}_--,_==0&&(_=Math.pow(2,M),M++),delete A[b]}else for(S=x[b],y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;_--,_==0&&(_=Math.pow(2,M),M++)}for(S=2,y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;for(;;)if(L=L<<1,D==m-1){z.push(g(L));break}else D++;return z.join("")},decompress:function(h){return h==null?"":h==""?null:f._decompress(h.length,32768,function(m){return h.charCodeAt(m)})},_decompress:function(h,m,g){var y=[],S=4,x=4,A=3,R="",j=[],b,_,P,M,z,L,D,G={val:g(0),position:m,index:1};for(b=0;b<3;b+=1)y[b]=b;for(P=0,z=Math.pow(2,2),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;switch(P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;D=t(P);break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;D=t(P);break;case 2:return""}for(y[3]=D,_=D,j.push(D);;){if(G.index>h)return"";for(P=0,z=Math.pow(2,A),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;switch(D=P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;y[x++]=t(P),D=x-1,S--;break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;y[x++]=t(P),D=x-1,S--;break;case 2:return j.join("")}if(S==0&&(S=Math.pow(2,A),A++),y[D])R=y[D];else if(D===x)R=_+_.charAt(0);else return null;j.push(R),y[x++]=_+R.charAt(0),S--,_=R,S==0&&(S=Math.pow(2,A),A++)}}};return f})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Vu)),Vu.exports}var H0=K0();const Om=Cc(H0),Y0="1",ir={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}};function X0(r){const e={},t={};for(const[a,l]of Object.entries(r.targets)){const c=ir.targets[a],f={};l.enabled!==c.enabled&&(f.enabled=l.enabled),l.version!==c.version&&(f.version=l.version),l.convention!==c.convention&&(f.convention=l.convention),Object.keys(f).length>0&&(t[a]=f)}Object.keys(t).length>0&&(e.targets=t);const s={};return r.formatting.tabWidth!==ir.formatting.tabWidth&&(s.tabWidth=r.formatting.tabWidth),r.formatting.proseWrap!==ir.formatting.proseWrap&&(s.proseWrap=r.formatting.proseWrap),r.formatting.printWidth!==ir.formatting.printWidth&&(s.printWidth=r.formatting.printWidth),Object.keys(s).length>0&&(e.formatting=s),r.envVars&&Object.keys(r.envVars).length>0&&(e.envVars=r.envVars),Object.keys(e).length>0?e:void 0}function q0(r){if(!r)return{...ir};const e={targets:{...ir.targets},formatting:{...ir.formatting},envVars:{...ir.envVars}};if(r.targets)for(const[t,s]of Object.entries(r.targets))e.targets[t]={...e.targets[t],...s};return r.formatting&&(e.formatting={...e.formatting,...r.formatting}),r.envVars&&(e.envVars={...r.envVars}),e}function Im(r,e,t,s){const a={files:r.map(f=>({path:f.path,content:f.content})),entry:r[0]?.path,formatter:e,config:s?X0(s):void 0,version:Y0},l=JSON.stringify(a);return Om.compressToEncodedURIComponent(l)}function Q0(r){try{const e=Om.decompressFromEncodedURIComponent(r);if(!e)return null;const t=JSON.parse(e);if(!t.files||!Array.isArray(t.files))return null;for(const s of t.files)if(typeof s.path!="string"||typeof s.content!="string")return null;return t}catch{return null}}function Z0(r,e,t,s){const a=Im(r,e,t,s),l=new URL(window.location.href);return l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.toString()}function J0(){const r=new URL(window.location.href),e=r.searchParams.get("s");if(!e)return null;const t=Q0(e);if(!t)return null;const s=r.searchParams.get("f");return s&&(t.formatter=s),t}function eS(){return new URL(window.location.href).searchParams.get("e")}function tS(r,e,t,s){const a=Im(r,e,t,s),l=new URL(window.location.href);l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.searchParams.delete("e"),window.history.replaceState(null,"",l.toString())}async function nS(r,e,t,s){try{const a=Z0(r,e,t,s);return await navigator.clipboard.writeText(a),!0}catch{return!1}}function rS(){const r=ie(m=>m.files),e=ie(m=>m.activeFormatter),t=ie(m=>m.config),s=ie(m=>m.setFiles),a=ie(m=>m.setActiveFormatter),l=ie(m=>m.setConfig),c=Z.useRef(!1),f=Z.useRef(null);return Z.useEffect(()=>{if(c.current||(c.current=!0,eS()))return;const g=J0();g&&(s(g.files),g.formatter&&a(g.formatter),g.config&&l(q0(g.config)))},[s,a,l]),Z.useEffect(()=>{if(c.current)return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{tS(r,e,void 0,t)},1e3),()=>{f.current&&clearTimeout(f.current)}},[r,e,t]),{handleShare:Z.useCallback(async()=>await nS(r,e,void 0,t),[r,e,t])}}const iS="1.0.0-alpha.9",sS="https://github.com/mrwogu/promptscript";function oS(){const r=ie(R=>R.isCompiling),e=ie(R=>R.compileResult),t=ie(R=>R.showExamples),s=ie(R=>R.setShowExamples),a=ie(R=>R.showConfig),l=ie(R=>R.setShowConfig),c=ie(R=>R.showEnvVars),f=ie(R=>R.setShowEnvVars),h=Object.keys(ie(R=>R.config.envVars)).length,{handleShare:m}=rS(),[g,y]=Z.useState(!1),S=e&&!e.success,x=e?.stats,A=async()=>{await m()&&(y(!0),setTimeout(()=>y(!1),2e3))};return C.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-ps-surface border-b border-ps-border",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx("span",{className:"text-ps-primary",children:"PRS"}),C.jsx("span",{children:"PromptScript Playground"})]}),C.jsxs("span",{className:"text-xs text-gray-500",children:["v",iS]})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"flex items-center gap-2 text-sm",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),C.jsx("span",{className:"text-gray-400",children:"Compiling..."})]}):S?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),C.jsxs("span",{className:"text-red-400",children:[e.errors.length," error",e.errors.length!==1?"s":""]})]}):e?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),C.jsxs("span",{className:"text-green-400",children:["Compiled in ",x?.totalTime,"ms"]})]}):null}),C.jsxs("button",{onClick:()=>l(!a),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${a?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Configuration",children:[C.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Config"]}),C.jsxs("button",{onClick:()=>f(!c),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${c?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Environment Variables",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Env",h>0&&C.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-indigo-500 rounded-full",children:h})]}),C.jsx("button",{onClick:()=>s(!t),className:`px-3 py-1 text-sm rounded ${t?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,children:"Examples"}),C.jsx("button",{onClick:A,className:"px-3 py-1 text-sm bg-ps-primary hover:bg-ps-secondary rounded text-white relative",children:g?"Copied!":"Share"}),C.jsx("a",{href:sS,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z",clipRule:"evenodd"})})})]})]})}function aS(){const r=ie(x=>x.files),e=ie(x=>x.activeFile),t=ie(x=>x.setActiveFile),s=ie(x=>x.addFile),a=ie(x=>x.deleteFile),l=ie(x=>x.renameFile),[c,f]=Z.useState(null),[h,m]=Z.useState(""),g=()=>{const x="new-file";let A=`${x}.prs`,R=1;for(;r.some(j=>j.path===A);)A=`${x}-${R}.prs`,R++;s(A,`@meta {
  id: "`+A.replace(".prs","")+`"
  syntax: "1.0.0"
}
`)},y=x=>{f(x),m(x)},S=x=>{if(h&&h!==x){const A=h.endsWith(".prs")?h:`${h}.prs`;r.some(R=>R.path===A)||l(x,A)}f(null)};return C.jsxs("div",{className:"flex items-center bg-ps-bg border-b border-ps-border overflow-x-auto",children:[r.map(x=>C.jsx("div",{className:`group flex items-center px-3 py-2 text-sm cursor-pointer border-r border-ps-border ${e===x.path?"bg-ps-surface text-white":"text-gray-400 hover:bg-ps-surface/50"}`,onClick:()=>t(x.path),onDoubleClick:()=>y(x.path),children:c===x.path?C.jsx("input",{type:"text",value:h,onChange:A=>m(A.target.value),onBlur:()=>S(x.path),onKeyDown:A=>{A.key==="Enter"&&S(x.path),A.key==="Escape"&&f(null)},className:"bg-transparent border-b border-ps-primary outline-none w-24",autoFocus:!0,onClick:A=>A.stopPropagation()}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"truncate max-w-[120px]",children:x.path}),r.length>1&&C.jsx("button",{onClick:A=>{A.stopPropagation(),a(x.path)},className:"ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-red-400",children:""})]})},x.path)),C.jsx("button",{onClick:g,className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-ps-surface/50",title:"Add new file",children:"+"})]})}function cp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function lS(r){if(Array.isArray(r))return r}function uS(r,e,t){return(e=gS(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cS(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,l,c,f=[],h=!0,m=!1;try{if(l=(t=t.call(r)).next,e!==0)for(;!(h=(s=l.call(t)).done)&&(f.push(s.value),f.length!==e);h=!0);}catch(g){m=!0,a=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(m)throw a}}return f}}function fS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function dp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fp(Object(t),!0).forEach(function(s){uS(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function dS(r,e){if(r==null)return{};var t,s,a=hS(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)t=l[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(a[t]=r[t])}return a}function hS(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;t[s]=r[s]}return t}function pS(r,e){return lS(r)||cS(r,e)||vS(r,e)||fS()}function mS(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gS(r){var e=mS(r,"string");return typeof e=="symbol"?e:e+""}function vS(r,e){if(r){if(typeof r=="string")return cp(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cp(r,e):void 0}}function yS(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function hp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function pp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hp(Object(t),!0).forEach(function(s){yS(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function SS(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(s){return e.reduceRight(function(a,l){return l(a)},s)}}function ds(r){return function e(){for(var t=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(a,f))}}}function ca(r){return{}.toString.call(r).includes("Object")}function ES(r){return!Object.keys(r).length}function Es(r){return typeof r=="function"}function TS(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function xS(r,e){return ca(e)||sr("changeType"),Object.keys(e).some(function(t){return!TS(r,t)})&&sr("changeField"),e}function wS(r){Es(r)||sr("selectorType")}function kS(r){Es(r)||ca(r)||sr("handlerType"),ca(r)&&Object.values(r).some(function(e){return!Es(e)})&&sr("handlersType")}function AS(r){r||sr("initialIsRequired"),ca(r)||sr("initialType"),ES(r)&&sr("initialContent")}function CS(r,e){throw new Error(r[e]||r.default)}var RS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},sr=ds(CS)(RS),Go={changes:xS,selector:wS,handler:kS,initial:AS};function NS(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Go.initial(r),Go.handler(e);var t={current:r},s=ds(_S)(t,e),a=ds(IS)(t),l=ds(Go.changes)(r),c=ds(OS)(t);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Go.selector(m),m(t.current)}function h(m){SS(s,a,l,c)(m)}return[f,h]}function OS(r,e){return Es(e)?e(r.current):e}function IS(r,e){return r.current=pp(pp({},r.current),e),e}function _S(r,e,t){return Es(e)?e(r.current):Object.keys(t).forEach(function(s){var a;return(a=e[s])===null||a===void 0?void 0:a.call(e,r.current[s])}),t}var PS={create:NS},LS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function MS(r){return function e(){for(var t=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(a,f))}}}function bS(r){return{}.toString.call(r).includes("Object")}function jS(r){return r||mp("configIsRequired"),bS(r)||mp("configType"),r.urls?(FS(),{paths:{vs:r.urls.monacoBase}}):r}function FS(){console.warn(_m.deprecation)}function $S(r,e){throw new Error(r[e]||r.default)}var _m={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},mp=MS($S)(_m),US={config:jS},DS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(a){return t.reduceRight(function(l,c){return c(l)},a)}};function Pm(r,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&r[t]&&Object.assign(e[t],Pm(r[t],e[t]))}),dp(dp({},r),e)}var BS={type:"cancelation",msg:"operation is manually canceled"};function Wu(r){var e=!1,t=new Promise(function(s,a){r.then(function(l){return e?a(BS):s(l)}),r.catch(a)});return t.cancel=function(){return e=!0},t}var zS=["monaco"],VS=PS.create({config:LS,isInitialized:!1,resolve:null,reject:null,monaco:null}),Lm=pS(VS,2),Cs=Lm[0],xa=Lm[1];function WS(r){var e=US.config(r),t=e.monaco,s=dS(e,zS);xa(function(a){return{config:Pm(a.config,s),monaco:t}})}function GS(){var r=Cs(function(e){var t=e.monaco,s=e.isInitialized,a=e.resolve;return{monaco:t,isInitialized:s,resolve:a}});if(!r.isInitialized){if(xa({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Wu(Gu);if(window.monaco&&window.monaco.editor)return Mm(window.monaco),r.resolve(window.monaco),Wu(Gu);DS(KS,YS)(XS)}return Wu(Gu)}function KS(r){return document.body.appendChild(r)}function HS(r){var e=document.createElement("script");return r&&(e.src=r),e}function YS(r){var e=Cs(function(s){var a=s.config,l=s.reject;return{config:a,reject:l}}),t=HS("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return r()},t.onerror=e.reject,t}function XS(){var r=Cs(function(t){var s=t.config,a=t.resolve,l=t.reject;return{config:s,resolve:a,reject:l}}),e=window.require;e.config(r.config),e(["vs/editor/editor.main"],function(t){var s=t.m||t;Mm(s),r.resolve(s)},function(t){r.reject(t)})}function Mm(r){Cs().monaco||xa({monaco:r})}function qS(){return Cs(function(r){var e=r.monaco;return e})}var Gu=new Promise(function(r,e){return xa({resolve:r,reject:e})}),bm={config:WS,init:GS,__getMonacoInstance:qS},QS={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ku=QS,ZS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},JS=ZS;function eE({children:r}){return Ar.createElement("div",{style:JS.container},r)}var tE=eE,nE=tE;function rE({width:r,height:e,isEditorReady:t,loading:s,_ref:a,className:l,wrapperProps:c}){return Ar.createElement("section",{style:{...Ku.wrapper,width:r,height:e},...c},!t&&Ar.createElement(nE,null,s),Ar.createElement("div",{ref:a,style:{...Ku.fullWidth,...!t&&Ku.hide},className:l}))}var iE=rE,jm=Z.memo(iE);function sE(r){Z.useEffect(r,[])}var Fm=sE;function oE(r,e,t=!0){let s=Z.useRef(!0);Z.useEffect(s.current||!t?()=>{s.current=!1}:r,e)}var It=oE;function gs(){}function di(r,e,t,s){return aE(r,s)||lE(r,e,t,s)}function aE(r,e){return r.editor.getModel($m(r,e))}function lE(r,e,t,s){return r.editor.createModel(e,t,s?$m(r,s):void 0)}function $m(r,e){return r.Uri.parse(e)}function uE({original:r,modified:e,language:t,originalLanguage:s,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:m="light",loading:g="Loading...",options:y={},height:S="100%",width:x="100%",className:A,wrapperProps:R={},beforeMount:j=gs,onMount:b=gs}){let[_,P]=Z.useState(!1),[M,z]=Z.useState(!0),L=Z.useRef(null),D=Z.useRef(null),G=Z.useRef(null),ke=Z.useRef(b),ce=Z.useRef(j),Ge=Z.useRef(!1);Fm(()=>{let de=bm.init();return de.then(ve=>(D.current=ve)&&z(!1)).catch(ve=>ve?.type!=="cancelation"&&console.error("Monaco initialization: error:",ve)),()=>L.current?Ue():de.cancel()}),It(()=>{if(L.current&&D.current){let de=L.current.getOriginalEditor(),ve=di(D.current,r||"",s||t||"text",l||"");ve!==de.getModel()&&de.setModel(ve)}},[l],_),It(()=>{if(L.current&&D.current){let de=L.current.getModifiedEditor(),ve=di(D.current,e||"",a||t||"text",c||"");ve!==de.getModel()&&de.setModel(ve)}},[c],_),It(()=>{let de=L.current.getModifiedEditor();de.getOption(D.current.editor.EditorOption.readOnly)?de.setValue(e||""):e!==de.getValue()&&(de.executeEdits("",[{range:de.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),de.pushUndoStop())},[e],_),It(()=>{L.current?.getModel()?.original.setValue(r||"")},[r],_),It(()=>{let{original:de,modified:ve}=L.current.getModel();D.current.editor.setModelLanguage(de,s||t||"text"),D.current.editor.setModelLanguage(ve,a||t||"text")},[t,s,a],_),It(()=>{D.current?.editor.setTheme(m)},[m],_),It(()=>{L.current?.updateOptions(y)},[y],_);let tt=Z.useCallback(()=>{if(!D.current)return;ce.current(D.current);let de=di(D.current,r||"",s||t||"text",l||""),ve=di(D.current,e||"",a||t||"text",c||"");L.current?.setModel({original:de,modified:ve})},[t,e,a,r,s,l,c]),$e=Z.useCallback(()=>{!Ge.current&&G.current&&(L.current=D.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...y}),tt(),D.current?.editor.setTheme(m),P(!0),Ge.current=!0)},[y,m,tt]);Z.useEffect(()=>{_&&ke.current(L.current,D.current)},[_]),Z.useEffect(()=>{!M&&!_&&$e()},[M,_,$e]);function Ue(){let de=L.current?.getModel();f||de?.original?.dispose(),h||de?.modified?.dispose(),L.current?.dispose()}return Ar.createElement(jm,{width:x,height:S,isEditorReady:_,loading:g,_ref:G,className:A,wrapperProps:R})}var cE=uE;Z.memo(cE);function fE(r){let e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}var dE=fE,Ko=new Map;function hE({defaultValue:r,defaultLanguage:e,defaultPath:t,value:s,language:a,path:l,theme:c="light",line:f,loading:h="Loading...",options:m={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:S=!1,width:x="100%",height:A="100%",className:R,wrapperProps:j={},beforeMount:b=gs,onMount:_=gs,onChange:P,onValidate:M=gs}){let[z,L]=Z.useState(!1),[D,G]=Z.useState(!0),ke=Z.useRef(null),ce=Z.useRef(null),Ge=Z.useRef(null),tt=Z.useRef(_),$e=Z.useRef(b),Ue=Z.useRef(),de=Z.useRef(s),ve=dE(l),we=Z.useRef(!1),W=Z.useRef(!1);Fm(()=>{let k=bm.init();return k.then(F=>(ke.current=F)&&G(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>ce.current?K():k.cancel()}),It(()=>{let k=di(ke.current,r||s||"",e||a||"",l||t||"");k!==ce.current?.getModel()&&(y&&Ko.set(ve,ce.current?.saveViewState()),ce.current?.setModel(k),y&&ce.current?.restoreViewState(Ko.get(l)))},[l],z),It(()=>{ce.current?.updateOptions(m)},[m],z),It(()=>{!ce.current||s===void 0||(ce.current.getOption(ke.current.editor.EditorOption.readOnly)?ce.current.setValue(s):s!==ce.current.getValue()&&(W.current=!0,ce.current.executeEdits("",[{range:ce.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),ce.current.pushUndoStop(),W.current=!1))},[s],z),It(()=>{let k=ce.current?.getModel();k&&a&&ke.current?.editor.setModelLanguage(k,a)},[a],z),It(()=>{f!==void 0&&ce.current?.revealLine(f)},[f],z),It(()=>{ke.current?.editor.setTheme(c)},[c],z);let J=Z.useCallback(()=>{if(!(!Ge.current||!ke.current)&&!we.current){$e.current(ke.current);let k=l||t,F=di(ke.current,s||r||"",e||a||"",k||"");ce.current=ke.current?.editor.create(Ge.current,{model:F,automaticLayout:!0,...m},g),y&&ce.current.restoreViewState(Ko.get(k)),ke.current.editor.setTheme(c),f!==void 0&&ce.current.revealLine(f),L(!0),we.current=!0}},[r,e,t,s,a,l,m,g,y,c,f]);Z.useEffect(()=>{z&&tt.current(ce.current,ke.current)},[z]),Z.useEffect(()=>{!D&&!z&&J()},[D,z,J]),de.current=s,Z.useEffect(()=>{z&&P&&(Ue.current?.dispose(),Ue.current=ce.current?.onDidChangeModelContent(k=>{W.current||P(ce.current.getValue(),k)}))},[z,P]),Z.useEffect(()=>{if(z){let k=ke.current.editor.onDidChangeMarkers(F=>{let fe=ce.current.getModel()?.uri;if(fe&&F.find(te=>te.path===fe.path)){let te=ke.current.editor.getModelMarkers({resource:fe});M?.(te)}});return()=>{k?.dispose()}}return()=>{}},[z,M]);function K(){Ue.current?.dispose(),S?y&&Ko.set(l,ce.current.saveViewState()):ce.current.getModel()?.dispose(),ce.current.dispose()}return Ar.createElement(jm,{width:x,height:A,isEditorReady:z,loading:h,_ref:Ge,className:R,wrapperProps:j})}var pE=hE,mE=Z.memo(pE),gE=mE;const hi="promptscript",vE={defaultToken:"",tokenPostfix:".prs",keywords:["true","false","null","string","number","boolean","enum"],directives:["@meta","@inherit","@extend","@use","@identity","@context","@standards","@restrictions","@guardrails","@shortcuts","@tools","@skills","@knowledge","@examples","@output","@behavior","@memory","@guards","@agents","@params","@project"],operators:[":"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/#.*$/,"comment"],[/@\w+/,{cases:{"@directives":"keyword.directive","@default":"keyword.directive"}}],[/[a-zA-Z_][\w-]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/:/,"delimiter"],[/,/,"delimiter"],[/\{\{/,"variable.template","@templateExpression"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/"""/,"string","@multilineString"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],templateExpression:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"],[/#.*$/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],multilineString:[[/\{\{/,"variable.template","@templateExpressionInString"],[/[^"{]+/,"string"],[/"""/,"string","@pop"],[/"/,"string"]],templateExpressionInString:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]]}},yE={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],folding:{markers:{start:/^\s*@\w+\s*\{/,end:/^\s*\}/}}},SE=[{token:"keyword.directive",foreground:"818cf8",fontStyle:"bold"},{token:"keyword",foreground:"93c5fd"},{token:"string",foreground:"a3e635"},{token:"string.escape",foreground:"facc15"},{token:"comment",foreground:"6b7280",fontStyle:"italic"},{token:"number",foreground:"f472b6"},{token:"identifier",foreground:"f8fafc"},{token:"delimiter",foreground:"94a3b8"},{token:"variable.template",foreground:"f472b6",fontStyle:"bold"},{token:"variable.name",foreground:"fb923c"}];function EE(r){r.languages.getLanguages().some(t=>t.id===hi)||(r.languages.register({id:hi,extensions:[".prs"],aliases:["PromptScript","prs"],mimetypes:["text/x-promptscript"]}),r.languages.setMonarchTokensProvider(hi,vE),r.languages.setLanguageConfiguration(hi,yE),r.editor.defineTheme("prs-dark",{base:"vs-dark",inherit:!0,rules:SE,colors:{"editor.background":"#0f172a","editor.foreground":"#f8fafc","editor.lineHighlightBackground":"#1e293b","editorCursor.foreground":"#6366f1","editor.selectionBackground":"#334155","editorLineNumber.foreground":"#475569","editorLineNumber.activeForeground":"#94a3b8"}}))}function TE(r){return{provideCompletionItems:(e,t)=>{const s=e.getWordUntilPosition(t),a={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};return{suggestions:[{label:"@meta",kind:r.languages.CompletionItemKind.Keyword,insertText:`@meta {
  id: "$1"
  syntax: "1.0.0"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define metadata for the PromptScript file",range:a},{label:"@inherit",kind:r.languages.CompletionItemKind.Keyword,insertText:"@inherit $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Inherit from another PromptScript file",range:a},{label:"@use",kind:r.languages.CompletionItemKind.Keyword,insertText:"@use $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Import and merge directives from another file",range:a},{label:"@identity",kind:r.languages.CompletionItemKind.Keyword,insertText:`@identity {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define the AI identity/persona",range:a},{label:"@context",kind:r.languages.CompletionItemKind.Keyword,insertText:`@context {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide contextual information",range:a},{label:"@standards",kind:r.languages.CompletionItemKind.Keyword,insertText:`@standards {
  $1: [$2]
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define coding standards and guidelines",range:a},{label:"@restrictions",kind:r.languages.CompletionItemKind.Keyword,insertText:`@restrictions {
  - "$1"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define things the AI should NOT do",range:a},{label:"@shortcuts",kind:r.languages.CompletionItemKind.Keyword,insertText:`@shortcuts {
  "/$1": "$2"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define custom command shortcuts",range:a},{label:"@tools",kind:r.languages.CompletionItemKind.Keyword,insertText:`@tools {
  $1: {
    description: "$2"
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define available tools",range:a},{label:"@examples",kind:r.languages.CompletionItemKind.Keyword,insertText:`@examples {
  $1: {
    input: """
    $2
    """
    output: """
    $3
    """
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide example interactions",range:a}]}}}}function xE(){const r=ie(c=>c.activeFile),e=ie(z0),t=ie(c=>c.updateFile),s=Z.useRef(null),a=c=>{EE(c),c.languages.registerCompletionItemProvider(hi,TE(c)),s.current=c},l=c=>{c.focus()};return C.jsx("div",{className:"h-full",children:C.jsx(gE,{height:"100%",language:hi,theme:"prs-dark",value:e,onChange:c=>{c!==void 0&&t(r,c)},beforeMount:a,onMount:l,options:{fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",renderLineHighlight:"line",tabSize:2,wordWrap:"on",automaticLayout:!0,padding:{top:12},suggestOnTriggerCharacters:!0,quickSuggestions:{other:!0,strings:!1,comments:!1}}})})}const wE=[{name:"github",label:"GitHub",icon:""},{name:"claude",label:"Claude",icon:""},{name:"cursor",label:"Cursor",icon:""},{name:"antigravity",label:"Antigravity",icon:""}];function kE(r){const e=new Map,t=r.map(a=>{const l=a.split("/");return l[l.length-1]??a}),s=new Map;for(const a of t)s.set(a,(s.get(a)??0)+1);for(const[a,l]of r.entries()){const c=t[a]??l;if((s.get(c)??0)>1){const f=l.split("/");if(f.length>=2){const h=f[f.length-2]??"";e.set(l,`${h}/${c}`)}else e.set(l,c)}else e.set(l,c)}return e}function AE(){const r=ie(g=>g.activeFormatter),e=ie(g=>g.setActiveFormatter),t=ie(g=>g.compileResult),s=ie(g=>g.isCompiling),a=ie(G0),l=ie(g=>W0(g,r)),[c,f]=Z.useState(0);Z.useEffect(()=>{f(0)},[r,l.length]),Z.useEffect(()=>{!a.includes(r)&&a.length>0&&e(a[0])},[r,a,e]);const h=Z.useMemo(()=>kE(l.map(g=>g.path)),[l]),m=l[c];return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg",children:wE.map(g=>{const y=a.includes(g.name),S=r===g.name;return C.jsxs("button",{onClick:()=>y&&e(g.name),disabled:!y,className:`px-4 py-2 text-sm flex items-center gap-2 ${y?S?"tab-active text-white":"tab-inactive text-gray-400":"opacity-30 cursor-not-allowed text-gray-500"}`,title:y?void 0:`${g.label} is disabled in config`,children:[C.jsx("span",{children:g.icon}),C.jsx("span",{children:g.label})]},g.name)})}),C.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-ps-surface",children:s?C.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-4 h-4 border-2 border-ps-primary border-t-transparent rounded-full animate-spin"}),C.jsx("span",{children:"Compiling..."})]})}):t&&!t.success?C.jsxs("div",{className:"p-4 overflow-auto",children:[C.jsx("div",{className:"text-red-400 font-medium mb-2",children:"Compilation Failed"}),C.jsx("ul",{className:"space-y-2",children:t.errors.map((g,y)=>C.jsx("li",{className:"text-sm",children:C.jsxs("div",{className:"text-red-300",children:[g.location?.file&&C.jsxs("span",{className:"text-gray-400",children:[g.location.file,":",g.location.line,":",g.location.column," "]}),C.jsxs("span",{className:"text-yellow-400",children:["[",g.code,"]"]})," ",g.message]})},y))})]}):l.length>0?C.jsxs(C.Fragment,{children:[l.length>1&&C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg overflow-x-auto",children:l.map((g,y)=>C.jsx("button",{onClick:()=>f(y),className:`px-3 py-1.5 text-xs font-mono whitespace-nowrap ${y===c?"bg-ps-surface text-white border-b-2 border-ps-primary":"text-gray-400 hover:text-gray-300 hover:bg-ps-surface/50"}`,title:g.path,children:h.get(g.path)||g.path},g.path))}),m&&C.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.path}),C.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.content)},className:"text-xs text-gray-400 hover:text-white px-2 py-1 rounded bg-ps-bg",children:"Copy"})]}),C.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap text-gray-300 bg-ps-bg p-4 rounded overflow-auto",children:m.content})]})]}):C.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No output available"})})]})}const Hu=[{id:"hello-world",name:"Hello World",description:"The simplest possible configuration",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "hello-world"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  """
}
`}]},{id:"minimal",name:"Minimal Setup",description:"Basic identity with multiline description",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "minimal-project"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  You provide clear and concise answers.
  You ask for clarification when needed.
  """
}
`}]},{id:"with-context",name:"With Context",description:"Adding project context and environment info",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "context-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a coding assistant for web development.
  You write modern, accessible code.
  """
}

@context {
  """
  This is a React frontend project using TypeScript.
  We use Tailwind CSS for styling.
  The project follows component-driven development.
  """
}
`}]},{id:"with-env-vars",name:"Environment Variables",description:"Using ${VAR} and ${VAR:-default} for dynamic configuration",complexity:"intermediate",envVars:{PROJECT_NAME:"My Awesome Project",API_VERSION:"v2",TEAM_NAME:"Platform Team"},files:[{path:"project.prs",content:`@meta {
  id: "env-vars-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an assistant for \${PROJECT_NAME}.
  You help the \${TEAM_NAME} build great software.
  """
}

@context {
  """
  Project: \${PROJECT_NAME}
  API Version: \${API_VERSION}
  Team: \${TEAM_NAME}
  Environment: \${ENVIRONMENT:-development}
  Debug Mode: \${DEBUG:-false}
  """

  # Object properties also support env vars
  project: "\${PROJECT_NAME}"
  apiVersion: "\${API_VERSION}"
  logLevel: "\${LOG_LEVEL:-info}"
}

@standards {
  # Env vars work in nested structures too
  api: {
    version: "\${API_VERSION}"
    baseUrl: "\${API_BASE_URL:-https://api.example.com}"
  }
}

@restrictions {
  - "Follow \${TEAM_NAME} coding guidelines"
  - "Use \${API_VERSION} API endpoints"
  - "Log level must be \${LOG_LEVEL:-info} or higher"
}
`}]},{id:"with-standards",name:"With Standards",description:"Configuration with coding standards and restrictions",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "coding-assistant"
  syntax: "1.0.0"
  tags: [development, typescript]
}

@identity {
  """
  You are an expert software developer.
  You write clean, maintainable, and well-tested code.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  testing: "Vitest"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
  documentation: ["JSDoc comments", "README updates"]
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor"]
  }
}

@restrictions {
  - "Never write untested code"
  - "Always handle errors properly"
  - "Don't use 'any' type in TypeScript"
  - "Don't commit secrets or credentials"
}
`}]},{id:"with-inheritance",name:"With Inheritance",description:"Using @inherit to extend shared base configs",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "frontend-project"
  syntax: "1.0.0"
}

# Inherit from promptscript-registry (github.com/mrwogu/promptscript-registry)
@inherit @core/base
@use @core/quality
@use @core/security

@context {
  """
  This is a React frontend project.
  We use TypeScript and Tailwind CSS.
  State management with Zustand.
  """
}

@standards {
  frameworks: ["React 18", "TypeScript 5", "Tailwind CSS"]
  testing: ["Vitest", "Playwright"]
}

@restrictions {
  - "Use functional components with hooks"
  - "No class components"
  - "Keep components under 200 lines"
}
`}]},{id:"parameterized-templates",name:"Parameterized Templates",description:"Reusable templates with {{variable}} interpolation",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "my-react-app"
  syntax: "1.0.0"
}

# Inherit from template with parameters
@inherit ./react-template(
  projectName: "Checkout App"
  port: 8080
  strict: true
)

@identity {
  """
  You specialize in e-commerce checkout flows.
  You understand payment integrations and cart management.
  """
}

@context {
  """
  E-commerce checkout application with Stripe integration.
  """
}
`},{path:"react-template.prs",content:`@meta {
  id: "react-template"
  syntax: "1.0.0"
  params: {
    # Required: Name of the project
    projectName: string

    # Optional: Development server port (default: 3000)
    port: number = 3000

    # Optional: Enable strict mode (default: true)
    strict: boolean = true

    # Optional: Test framework choice
    testFramework: enum("vitest", "jest") = "vitest"
  }
}

@identity {
  """
  You are a React developer working on {{projectName}}.
  You follow best practices and write clean code.
  """
}

@context {
  project: {{projectName}}
  devServer: "http://localhost:{{port}}"
  strictMode: {{strict}}
  testing: {{testFramework}}
}

@standards {
  code: {
    language: "TypeScript"
    framework: "React 18"
    testing: "{{testFramework}}"
  }
}

@restrictions {
  - "Use functional components only"
  - "Test coverage must be above 80%"
}
`}]},{id:"multi-file",name:"Multi-File Project",description:"Local inheritance with shared base configuration",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "team-project"
  syntax: "1.0.0"
}

# Inherit from local base file
@inherit ./base

@context {
  languages: ["TypeScript", "React"]
  runtime: "Node.js 20+"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
}

@restrictions {
  - "Use Zustand for state management"
  - "Keep bundle size under 200KB"
}
`},{path:"base.prs",content:`@meta {
  id: "team-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful team assistant.
  You follow our established conventions.
  You prioritize code quality and maintainability.
  """
}

@standards {
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test"]
  }
  documentation: ["README", "JSDoc", "CHANGELOG"]
}

@restrictions {
  - "Don't commit without tests"
  - "Don't push directly to main"
  - "Always request code review"
}
`}]},{id:"with-skills",name:"With Skills & Shortcuts",description:"Custom skills and shortcuts for automation",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation"
}

@restrictions {
  - "Always explain your reasoning"
  - "Ask for clarification when unsure"
  - "Never skip writing tests"
}
`}]},{id:"with-guards",name:"With Guards",description:"File-pattern guards for context-specific rules",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "guards-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an expert full-stack developer.
  You understand different contexts require different rules.
  """
}

@context {
  languages: ["TypeScript"]
  runtime: "Node.js 20+"
}

@guards {
  # Apply TypeScript rules to all TS files
  globs: ["**/*.ts", "**/*.tsx"]

  # Testing-specific rules
  testing: {
    applyTo: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
    description: "Testing rules"
    content: """
    - Use describe/it blocks for organization
    - Follow AAA pattern (Arrange, Act, Assert)
    - Mock external dependencies
    - Test edge cases and error conditions
    """
  }

  # Component-specific rules
  components: {
    applyTo: ["**/components/**/*.tsx"]
    description: "React component rules"
    content: """
    - Use functional components with hooks
    - Keep components focused and small
    - Extract logic into custom hooks
    - Use TypeScript for props interfaces
    """
  }
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest"]
  }
}
`}]},{id:"with-agents",name:"With Agents",description:"Custom AI agents with specific roles",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "agents-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development team coordinator.
  You can delegate tasks to specialized agents.
  """
}

@agents {
  coder: {
    description: "Expert code writer"
    model: "sonnet"
    tools: ["Read", "Edit", "Write", "Bash"]
    content: """
    You are an expert code writer.
    You write clean, efficient, and well-documented code.
    You follow established patterns in the codebase.
    """
  }
  reviewer: {
    description: "Code review specialist"
    model: "sonnet"
    tools: ["Read", "Grep", "Glob"]
    content: """
    You are a code review specialist.
    You identify bugs, security issues, and improvements.
    You provide constructive feedback.
    """
  }
  tester: {
    description: "Test writing specialist"
    model: "haiku"
    tools: ["Read", "Write", "Bash"]
    content: """
    You are a test writing specialist.
    You write comprehensive unit and integration tests.
    You ensure good coverage of edge cases.
    """
  }
}

@skills {
  implement: {
    description: "Implement a feature using the coder agent"
    content: "Delegate implementation to the coder agent"
  }
  review: {
    description: "Review code using the reviewer agent"
    content: "Delegate review to the reviewer agent"
  }
}

@shortcuts {
  "/implement": "Start implementing a feature"
  "/review": "Review recent changes"
  "/test": "Write tests for current code"
}
`}]},{id:"enterprise",name:"Enterprise Setup",description:"Full enterprise configuration with all features",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "enterprise-project"
  syntax: "1.0.0"
  tags: [enterprise, typescript, react]
}

# Inherit from local file + registry (github.com/mrwogu/promptscript-registry)
@inherit ./org-base
@use @core/security

@context {
  """
  Enterprise React application with strict security requirements.
  Follows organizational coding standards and compliance rules.
  """

  languages: ["TypeScript"]
  runtime: "Node.js 20 LTS"
  frameworks: ["React 18", "Next.js 14"]
  infrastructure: ["AWS", "Docker", "Kubernetes"]
}

@skills {
  "security-review": {
    description: "Review code for security vulnerabilities"
    content: """
    Perform security review:
    1. Check for OWASP Top 10 vulnerabilities
    2. Verify input validation and sanitization
    3. Check authentication and authorization
    4. Review data exposure and logging
    5. Verify secure communication
    """
  }
  deploy: {
    description: "Prepare deployment checklist"
    content: """
    Deployment preparation:
    1. Run full test suite
    2. Check for security vulnerabilities
    3. Verify environment variables
    4. Update changelog
    5. Create release notes
    """
  }
}

@guards {
  api: {
    applyTo: ["**/api/**", "**/routes/**"]
    description: "API security rules"
    content: """
    - Validate all input parameters
    - Use parameterized queries
    - Implement rate limiting
    - Log security events
    """
  }
  auth: {
    applyTo: ["**/auth/**", "**/middleware/**"]
    description: "Authentication rules"
    content: """
    - Never log credentials
    - Use secure session management
    - Implement proper CORS
    - Use HTTPS only
    """
  }
}

@shortcuts {
  "/security": "Run security review"
  "/deploy": "Prepare deployment"
  "/audit": "Run compliance audit"
}

@restrictions {
  - "All API endpoints must have authentication"
  - "No secrets in code - use environment variables"
  - "All user input must be validated"
  - "PII must be encrypted at rest"
  - "Changes require security team approval"
}
`},{path:"org-base.prs",content:`@meta {
  id: "org-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are an enterprise development assistant.
  You follow strict organizational standards.
  Security and compliance are top priorities.
  """
}

@standards {
  code: {
    languages: ["TypeScript"]
    strictMode: true
    exports: "named only"
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test", "security"]
    requireIssueReference: true
  }
  documentation: {
    required: ["README", "API docs", "CHANGELOG", "SECURITY.md"]
  }
  testing: {
    minimumCoverage: 80
    requiredTypes: ["unit", "integration", "e2e"]
  }
}

@restrictions {
  - "No direct database queries - use ORM"
  - "All functions must have return type annotations"
  - "No console.log in production code"
  - "Dependencies must be approved"
  - "No force push to protected branches"
}
`}]}],CE={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-purple-500/20 text-purple-400"},RE={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function NE(){const r=ie(h=>h.setFiles),e=ie(h=>h.setShowExamples),t=ie(h=>h.setEnvVars),s=h=>{r(h.files),t(h.envVars??{}),e(!1)},a=Hu.filter(h=>h.complexity==="beginner"),l=Hu.filter(h=>h.complexity==="intermediate"),c=Hu.filter(h=>h.complexity==="advanced"),f=h=>C.jsxs("button",{onClick:()=>s(h),className:"text-left p-4 bg-ps-bg rounded-lg hover:bg-ps-border transition-colors",children:[C.jsxs("div",{className:"flex items-start justify-between gap-2",children:[C.jsx("h3",{className:"font-medium text-white",children:h.name}),C.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${CE[h.complexity]}`,children:RE[h.complexity]})]}),C.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h.description}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[C.jsxs("span",{className:"text-xs text-gray-500",children:[h.files.length," file",h.files.length!==1?"s":""]}),h.files.some(m=>m.content.includes("@inherit"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-ps-primary/20 text-ps-primary rounded",children:"inheritance"}),h.files.some(m=>m.content.includes("@use"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded",children:"imports"}),h.files.some(m=>m.content.includes("@skills"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-500/20 text-orange-400 rounded",children:"skills"}),h.files.some(m=>m.content.includes("@guards"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded",children:"guards"}),h.files.some(m=>m.content.includes("@agents"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded",children:"agents"}),h.files.some(m=>m.content.includes("params:")&&m.content.includes("{{"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded",children:"templates"}),h.envVars&&Object.keys(h.envVars).length>0&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded",children:"env vars"})]})]},h.id);return C.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-ps-surface rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold",children:"Example Gallery"}),C.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white",children:""})]}),C.jsxs("div",{className:"p-4 overflow-y-auto max-h-[70vh] space-y-6",children:[C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-green-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Getting Started"]}),C.jsx("div",{className:"grid gap-3",children:a.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Intermediate"]}),C.jsx("div",{className:"grid gap-3",children:l.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Advanced"]}),C.jsx("div",{className:"grid gap-3",children:c.map(f)})]})]}),C.jsx("div",{className:"p-4 border-t border-ps-border text-center text-sm text-gray-500",children:"Click an example to load it into the editor"})]})})}const OE={github:{label:"GitHub Copilot",versions:["simple","multifile","full"],supportsXml:!0},claude:{label:"Claude Code",versions:["simple","multifile","full"],supportsXml:!0},cursor:{label:"Cursor",versions:["standard","legacy"],supportsXml:!1},antigravity:{label:"Antigravity",versions:["simple","frontmatter"],supportsXml:!0}},IE=[{value:"markdown",label:"Markdown"},{value:"xml",label:"XML"}],_E=["always","never","preserve"],PE=[2,4];function LE(){const r=ie(f=>f.config),e=ie(f=>f.setTargetEnabled),t=ie(f=>f.setTargetVersion),s=ie(f=>f.setTargetConvention),a=ie(f=>f.setFormatting),l=ie(f=>f.showConfig),c=ie(f=>f.setShowConfig);return l?C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configuration"}),C.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-6",children:[C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Targets"}),C.jsx("div",{className:"space-y-3",children:Object.entries(OE).map(([f,h])=>{const m=r.targets[f];return C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("label",{className:"flex items-center gap-2 min-w-[140px]",children:[C.jsx("input",{type:"checkbox",checked:m.enabled,onChange:g=>e(f,g.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"}),C.jsx("span",{className:"text-sm text-gray-200",children:h.label})]}),C.jsx("select",{value:m.version??h.versions[0],onChange:g=>t(f,g.target.value),disabled:!m.enabled,className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:h.versions.map(g=>C.jsx("option",{value:g,children:g},g))}),C.jsx("select",{value:m.convention??"markdown",onChange:g=>s(f,g.target.value==="markdown"?void 0:g.target.value),disabled:!m.enabled||!h.supportsXml,title:h.supportsXml?void 0:`${h.label} only supports markdown`,className:"w-24 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:IE.map(g=>C.jsx("option",{value:g.value,disabled:g.value==="xml"&&!h.supportsXml,children:g.label},g.value))})]},f)})})]}),C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Formatting"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Tab Width"}),C.jsx("div",{className:"flex gap-2",children:PE.map(f=>C.jsx("button",{onClick:()=>a({tabWidth:f}),className:`px-3 py-1 text-sm rounded ${r.formatting.tabWidth===f?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Prose Wrap"}),C.jsx("select",{value:r.formatting.proseWrap,onChange:f=>a({proseWrap:f.target.value}),className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500",children:_E.map(f=>C.jsx("option",{value:f,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Print Width"}),C.jsx("input",{type:"number",min:40,max:200,value:r.formatting.printWidth,onChange:f=>a({printWidth:parseInt(f.target.value,10)||80}),className:"w-20 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500"})]})]})]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})}):null}const ME=/^[A-Za-z_][A-Za-z0-9_]*$/;function bE(){const r=ie(A=>A.config),e=ie(A=>A.setEnvVar),t=ie(A=>A.deleteEnvVar),s=ie(A=>A.showEnvVars),a=ie(A=>A.setShowEnvVars),[l,c]=Z.useState(""),[f,h]=Z.useState(""),[m,g]=Z.useState(null);if(!s)return null;const y=Object.entries(r.envVars),S=()=>{const A=l.trim(),R=f.trim();if(!A){g("Variable name is required");return}if(!ME.test(A)){g("Invalid name: must start with letter or underscore");return}if(r.envVars[A]!==void 0){g("Variable already exists");return}e(A,R),c(""),h(""),g(null)},x=A=>{A.key==="Enter"&&S()};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Environment Variables"}),C.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-4",children:[y.length>0&&C.jsx("div",{className:"space-y-2",children:y.map(([A,R])=>C.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded px-3 py-2",children:[C.jsx("span",{className:"font-mono text-sm text-blue-400 min-w-[120px]",children:A}),C.jsx("span",{className:"text-gray-400",children:"="}),C.jsx("span",{className:"font-mono text-sm text-gray-200 flex-1 truncate",children:R}),C.jsx("button",{onClick:()=>t(A),className:"text-gray-500 hover:text-red-400 p-1",title:"Delete variable",children:C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},A))}),y.length===0&&C.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No environment variables defined"}),C.jsxs("div",{className:"border-t border-ps-border pt-4",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",value:l,onChange:A=>{c(A.target.value),g(null)},onKeyDown:x,placeholder:"NAME",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("input",{type:"text",value:f,onChange:A=>h(A.target.value),onKeyDown:x,placeholder:"value",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("button",{onClick:S,className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Add"})]}),m&&C.jsx("p",{className:"text-red-400 text-xs mt-2",children:m})]}),C.jsxs("p",{className:"text-gray-500 text-xs",children:["These are simulated variables for testing. Use"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR}"]})," or"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR:-default}"]})," in your PRS files.",C.jsx("br",{}),C.jsx("strong",{children:"Note:"})," Do not use real secrets."]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})})}class Rc{files;constructor(e){if(this.files=new Map,e)if(e instanceof Map)for(const[t,s]of e)this.files.set(this.normalizePath(t),s);else for(const[t,s]of Object.entries(e))this.files.set(this.normalizePath(t),s)}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1)),t}exists(e){return this.files.has(this.normalizePath(e))}read(e){const t=this.normalizePath(e),s=this.files.get(t);if(s===void 0)throw new Error(`File not found: ${e}`);return s}write(e,t){this.files.set(this.normalizePath(e),t)}delete(e){return this.files.delete(this.normalizePath(e))}list(){return Array.from(this.files.keys())}glob(e){const t=this.normalizePath(e),s=this.patternToRegex(t);return Array.from(this.files.keys()).filter(a=>s.test(a))}patternToRegex(e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");return t=t.replace(/\*\*/g,"\0DOUBLESTAR\0"),t=t.replace(/\*/g,"[^/]*"),t=t.replace(/\0DOUBLESTAR\0/g,".*"),t=t.replace(/\?/g,"[^/]"),new RegExp(`^${t}$`)}clear(){this.files.clear()}get size(){return this.files.size}toMap(){return new Map(this.files)}toObject(){const e={};for(const[t,s]of this.files)e[t]=s;return e}clone(){return new Rc(this.files)}merge(e){for(const[t,s]of e.files)this.files.set(t,s)}}var Um=typeof global=="object"&&global&&global.Object===Object&&global,jE=typeof self=="object"&&self&&self.Object===Object&&self,yn=Um||jE||Function("return this")(),Kt=yn.Symbol,Dm=Object.prototype,FE=Dm.hasOwnProperty,$E=Dm.toString,as=Kt?Kt.toStringTag:void 0;function UE(r){var e=FE.call(r,as),t=r[as];try{r[as]=void 0;var s=!0}catch{}var a=$E.call(r);return s&&(e?r[as]=t:delete r[as]),a}var DE=Object.prototype,BE=DE.toString;function zE(r){return BE.call(r)}var VE="[object Null]",WE="[object Undefined]",gp=Kt?Kt.toStringTag:void 0;function lr(r){return r==null?r===void 0?WE:VE:gp&&gp in Object(r)?UE(r):zE(r)}function on(r){return r!=null&&typeof r=="object"}var GE="[object Symbol]";function wa(r){return typeof r=="symbol"||on(r)&&lr(r)==GE}function ka(r,e){for(var t=-1,s=r==null?0:r.length,a=Array(s);++t<s;)a[t]=e(r[t],t,r);return a}var Te=Array.isArray,vp=Kt?Kt.prototype:void 0,yp=vp?vp.toString:void 0;function Bm(r){if(typeof r=="string")return r;if(Te(r))return ka(r,Bm)+"";if(wa(r))return yp?yp.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var KE=/\s/;function HE(r){for(var e=r.length;e--&&KE.test(r.charAt(e)););return e}var YE=/^\s+/;function XE(r){return r&&r.slice(0,HE(r)+1).replace(YE,"")}function Ht(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Sp=NaN,qE=/^[-+]0x[0-9a-f]+$/i,QE=/^0b[01]+$/i,ZE=/^0o[0-7]+$/i,JE=parseInt;function eT(r){if(typeof r=="number")return r;if(wa(r))return Sp;if(Ht(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ht(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=XE(r);var t=QE.test(r);return t||ZE.test(r)?JE(r.slice(2),t?2:8):qE.test(r)?Sp:+r}var Ep=1/0,tT=17976931348623157e292;function nT(r){if(!r)return r===0?r:0;if(r=eT(r),r===Ep||r===-Ep){var e=r<0?-1:1;return e*tT}return r===r?r:0}function Aa(r){var e=nT(r),t=e%1;return e===e?t?e-t:e:0}function mi(r){return r}var rT="[object AsyncFunction]",iT="[object Function]",sT="[object GeneratorFunction]",oT="[object Proxy]";function bn(r){if(!Ht(r))return!1;var e=lr(r);return e==iT||e==sT||e==rT||e==oT}var Yu=yn["__core-js_shared__"],Tp=(function(){var r=/[^.]+$/.exec(Yu&&Yu.keys&&Yu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function aT(r){return!!Tp&&Tp in r}var lT=Function.prototype,uT=lT.toString;function _r(r){if(r!=null){try{return uT.call(r)}catch{}try{return r+""}catch{}}return""}var cT=/[\\^$.*+?()[\]{}|]/g,fT=/^\[object .+?Constructor\]$/,dT=Function.prototype,hT=Object.prototype,pT=dT.toString,mT=hT.hasOwnProperty,gT=RegExp("^"+pT.call(mT).replace(cT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vT(r){if(!Ht(r)||aT(r))return!1;var e=bn(r)?gT:fT;return e.test(_r(r))}function yT(r,e){return r?.[e]}function Pr(r,e){var t=yT(r,e);return vT(t)?t:void 0}var sc=Pr(yn,"WeakMap"),xp=Object.create,ST=(function(){function r(){}return function(e){if(!Ht(e))return{};if(xp)return xp(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function ET(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Xe(){}function TT(r,e){var t=-1,s=r.length;for(e||(e=Array(s));++t<s;)e[t]=r[t];return e}var xT=800,wT=16,kT=Date.now;function AT(r){var e=0,t=0;return function(){var s=kT(),a=wT-(s-t);if(t=s,a>0){if(++e>=xT)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function CT(r){return function(){return r}}var fa=(function(){try{var r=Pr(Object,"defineProperty");return r({},"",{}),r}catch{}})(),RT=fa?function(r,e){return fa(r,"toString",{configurable:!0,enumerable:!1,value:CT(e),writable:!0})}:mi,NT=AT(RT);function zm(r,e){for(var t=-1,s=r==null?0:r.length;++t<s&&e(r[t],t,r)!==!1;);return r}function Vm(r,e,t,s){for(var a=r.length,l=t+-1;++l<a;)if(e(r[l],l,r))return l;return-1}function OT(r){return r!==r}function IT(r,e,t){for(var s=t-1,a=r.length;++s<a;)if(r[s]===e)return s;return-1}function Nc(r,e,t){return e===e?IT(r,e,t):Vm(r,OT,t)}function Wm(r,e){var t=r==null?0:r.length;return!!t&&Nc(r,e,0)>-1}var _T=9007199254740991,PT=/^(?:0|[1-9]\d*)$/;function Ca(r,e){var t=typeof r;return e=e??_T,!!e&&(t=="number"||t!="symbol"&&PT.test(r))&&r>-1&&r%1==0&&r<e}function Oc(r,e,t){e=="__proto__"&&fa?fa(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function Rs(r,e){return r===e||r!==r&&e!==e}var LT=Object.prototype,MT=LT.hasOwnProperty;function Ra(r,e,t){var s=r[e];(!(MT.call(r,e)&&Rs(s,t))||t===void 0&&!(e in r))&&Oc(r,e,t)}function Ic(r,e,t,s){var a=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var f=e[l],h=void 0;h===void 0&&(h=r[f]),a?Oc(t,f,h):Ra(t,f,h)}return t}var wp=Math.max;function bT(r,e,t){return e=wp(e===void 0?r.length-1:e,0),function(){for(var s=arguments,a=-1,l=wp(s.length-e,0),c=Array(l);++a<l;)c[a]=s[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=s[a];return f[e]=t(c),ET(r,this,f)}}function _c(r,e){return NT(bT(r,e,mi),r+"")}var jT=9007199254740991;function Pc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=jT}function Sn(r){return r!=null&&Pc(r.length)&&!bn(r)}function Gm(r,e,t){if(!Ht(t))return!1;var s=typeof e;return(s=="number"?Sn(t)&&Ca(e,t.length):s=="string"&&e in t)?Rs(t[e],r):!1}function FT(r){return _c(function(e,t){var s=-1,a=t.length,l=a>1?t[a-1]:void 0,c=a>2?t[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,c&&Gm(t[0],t[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++s<a;){var f=t[s];f&&r(e,f,s,l)}return e})}var $T=Object.prototype;function Ns(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||$T;return r===t}function UT(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}var DT="[object Arguments]";function kp(r){return on(r)&&lr(r)==DT}var Km=Object.prototype,BT=Km.hasOwnProperty,zT=Km.propertyIsEnumerable,Na=kp((function(){return arguments})())?kp:function(r){return on(r)&&BT.call(r,"callee")&&!zT.call(r,"callee")};function VT(){return!1}var Hm=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Ap=Hm&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,WT=Ap&&Ap.exports===Hm,Cp=WT?yn.Buffer:void 0,GT=Cp?Cp.isBuffer:void 0,Ts=GT||VT,KT="[object Arguments]",HT="[object Array]",YT="[object Boolean]",XT="[object Date]",qT="[object Error]",QT="[object Function]",ZT="[object Map]",JT="[object Number]",ex="[object Object]",tx="[object RegExp]",nx="[object Set]",rx="[object String]",ix="[object WeakMap]",sx="[object ArrayBuffer]",ox="[object DataView]",ax="[object Float32Array]",lx="[object Float64Array]",ux="[object Int8Array]",cx="[object Int16Array]",fx="[object Int32Array]",dx="[object Uint8Array]",hx="[object Uint8ClampedArray]",px="[object Uint16Array]",mx="[object Uint32Array]",_e={};_e[ax]=_e[lx]=_e[ux]=_e[cx]=_e[fx]=_e[dx]=_e[hx]=_e[px]=_e[mx]=!0;_e[KT]=_e[HT]=_e[sx]=_e[YT]=_e[ox]=_e[XT]=_e[qT]=_e[QT]=_e[ZT]=_e[JT]=_e[ex]=_e[tx]=_e[nx]=_e[rx]=_e[ix]=!1;function gx(r){return on(r)&&Pc(r.length)&&!!_e[lr(r)]}function Oa(r){return function(e){return r(e)}}var Ym=typeof _t=="object"&&_t&&!_t.nodeType&&_t,vs=Ym&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,vx=vs&&vs.exports===Ym,Xu=vx&&Um.process,or=(function(){try{var r=vs&&vs.require&&vs.require("util").types;return r||Xu&&Xu.binding&&Xu.binding("util")}catch{}})(),Rp=or&&or.isTypedArray,Lc=Rp?Oa(Rp):gx,yx=Object.prototype,Sx=yx.hasOwnProperty;function Xm(r,e){var t=Te(r),s=!t&&Na(r),a=!t&&!s&&Ts(r),l=!t&&!s&&!a&&Lc(r),c=t||s||a||l,f=c?UT(r.length,String):[],h=f.length;for(var m in r)(e||Sx.call(r,m))&&!(c&&(m=="length"||a&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Ca(m,h)))&&f.push(m);return f}function qm(r,e){return function(t){return r(e(t))}}var Ex=qm(Object.keys,Object),Tx=Object.prototype,xx=Tx.hasOwnProperty;function Qm(r){if(!Ns(r))return Ex(r);var e=[];for(var t in Object(r))xx.call(r,t)&&t!="constructor"&&e.push(t);return e}function Yt(r){return Sn(r)?Xm(r):Qm(r)}var wx=Object.prototype,kx=wx.hasOwnProperty,Lt=FT(function(r,e){if(Ns(e)||Sn(e)){Ic(e,Yt(e),r);return}for(var t in e)kx.call(e,t)&&Ra(r,t,e[t])});function Ax(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Cx=Object.prototype,Rx=Cx.hasOwnProperty;function Nx(r){if(!Ht(r))return Ax(r);var e=Ns(r),t=[];for(var s in r)s=="constructor"&&(e||!Rx.call(r,s))||t.push(s);return t}function Zm(r){return Sn(r)?Xm(r,!0):Nx(r)}var Ox=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ix=/^\w*$/;function Mc(r,e){if(Te(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||wa(r)?!0:Ix.test(r)||!Ox.test(r)||e!=null&&r in Object(e)}var xs=Pr(Object,"create");function _x(){this.__data__=xs?xs(null):{},this.size=0}function Px(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Lx="__lodash_hash_undefined__",Mx=Object.prototype,bx=Mx.hasOwnProperty;function jx(r){var e=this.__data__;if(xs){var t=e[r];return t===Lx?void 0:t}return bx.call(e,r)?e[r]:void 0}var Fx=Object.prototype,$x=Fx.hasOwnProperty;function Ux(r){var e=this.__data__;return xs?e[r]!==void 0:$x.call(e,r)}var Dx="__lodash_hash_undefined__";function Bx(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=xs&&e===void 0?Dx:e,this}function Rr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Rr.prototype.clear=_x;Rr.prototype.delete=Px;Rr.prototype.get=jx;Rr.prototype.has=Ux;Rr.prototype.set=Bx;function zx(){this.__data__=[],this.size=0}function Ia(r,e){for(var t=r.length;t--;)if(Rs(r[t][0],e))return t;return-1}var Vx=Array.prototype,Wx=Vx.splice;function Gx(r){var e=this.__data__,t=Ia(e,r);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():Wx.call(e,t,1),--this.size,!0}function Kx(r){var e=this.__data__,t=Ia(e,r);return t<0?void 0:e[t][1]}function Hx(r){return Ia(this.__data__,r)>-1}function Yx(r,e){var t=this.__data__,s=Ia(t,r);return s<0?(++this.size,t.push([r,e])):t[s][1]=e,this}function jn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}jn.prototype.clear=zx;jn.prototype.delete=Gx;jn.prototype.get=Kx;jn.prototype.has=Hx;jn.prototype.set=Yx;var ws=Pr(yn,"Map");function Xx(){this.size=0,this.__data__={hash:new Rr,map:new(ws||jn),string:new Rr}}function qx(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function _a(r,e){var t=r.__data__;return qx(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Qx(r){var e=_a(this,r).delete(r);return this.size-=e?1:0,e}function Zx(r){return _a(this,r).get(r)}function Jx(r){return _a(this,r).has(r)}function ew(r,e){var t=_a(this,r),s=t.size;return t.set(r,e),this.size+=t.size==s?0:1,this}function Fn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Fn.prototype.clear=Xx;Fn.prototype.delete=Qx;Fn.prototype.get=Zx;Fn.prototype.has=Jx;Fn.prototype.set=ew;var tw="Expected a function";function bc(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(tw);var t=function(){var s=arguments,a=e?e.apply(this,s):s[0],l=t.cache;if(l.has(a))return l.get(a);var c=r.apply(this,s);return t.cache=l.set(a,c)||l,c};return t.cache=new(bc.Cache||Fn),t}bc.Cache=Fn;var nw=500;function rw(r){var e=bc(r,function(s){return t.size===nw&&t.clear(),s}),t=e.cache;return e}var iw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sw=/\\(\\)?/g,ow=rw(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(iw,function(t,s,a,l){e.push(a?l.replace(sw,"$1"):s||t)}),e});function aw(r){return r==null?"":Bm(r)}function Pa(r,e){return Te(r)?r:Mc(r,e)?[r]:ow(aw(r))}function Os(r){if(typeof r=="string"||wa(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function jc(r,e){e=Pa(e,r);for(var t=0,s=e.length;r!=null&&t<s;)r=r[Os(e[t++])];return t&&t==s?r:void 0}function lw(r,e,t){var s=r==null?void 0:jc(r,e);return s===void 0?t:s}function Fc(r,e){for(var t=-1,s=e.length,a=r.length;++t<s;)r[a+t]=e[t];return r}var Np=Kt?Kt.isConcatSpreadable:void 0;function uw(r){return Te(r)||Na(r)||!!(Np&&r&&r[Np])}function $c(r,e,t,s,a){var l=-1,c=r.length;for(t||(t=uw),a||(a=[]);++l<c;){var f=r[l];t(f)?Fc(a,f):s||(a[a.length]=f)}return a}function rn(r){var e=r==null?0:r.length;return e?$c(r):[]}var Jm=qm(Object.getPrototypeOf,Object);function eg(r,e,t){var s=-1,a=r.length;e<0&&(e=-e>a?0:a+e),t=t>a?a:t,t<0&&(t+=a),a=e>t?0:t-e>>>0,e>>>=0;for(var l=Array(a);++s<a;)l[s]=r[s+e];return l}function cw(r,e,t,s){var a=-1,l=r==null?0:r.length;for(s&&l&&(t=r[++a]);++a<l;)t=e(t,r[a],a,r);return t}function fw(){this.__data__=new jn,this.size=0}function dw(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function hw(r){return this.__data__.get(r)}function pw(r){return this.__data__.has(r)}var mw=200;function gw(r,e){var t=this.__data__;if(t instanceof jn){var s=t.__data__;if(!ws||s.length<mw-1)return s.push([r,e]),this.size=++t.size,this;t=this.__data__=new Fn(s)}return t.set(r,e),this.size=t.size,this}function vn(r){var e=this.__data__=new jn(r);this.size=e.size}vn.prototype.clear=fw;vn.prototype.delete=dw;vn.prototype.get=hw;vn.prototype.has=pw;vn.prototype.set=gw;function vw(r,e){return r&&Ic(e,Yt(e),r)}var tg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Op=tg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,yw=Op&&Op.exports===tg,Ip=yw?yn.Buffer:void 0,_p=Ip?Ip.allocUnsafe:void 0;function Sw(r,e){var t=r.length,s=_p?_p(t):new r.constructor(t);return r.copy(s),s}function Uc(r,e){for(var t=-1,s=r==null?0:r.length,a=0,l=[];++t<s;){var c=r[t];e(c,t,r)&&(l[a++]=c)}return l}function ng(){return[]}var Ew=Object.prototype,Tw=Ew.propertyIsEnumerable,Pp=Object.getOwnPropertySymbols,Dc=Pp?function(r){return r==null?[]:(r=Object(r),Uc(Pp(r),function(e){return Tw.call(r,e)}))}:ng;function xw(r,e){return Ic(r,Dc(r),e)}var ww=Object.getOwnPropertySymbols,kw=ww?function(r){for(var e=[];r;)Fc(e,Dc(r)),r=Jm(r);return e}:ng;function rg(r,e,t){var s=e(r);return Te(r)?s:Fc(s,t(r))}function oc(r){return rg(r,Yt,Dc)}function Aw(r){return rg(r,Zm,kw)}var ac=Pr(yn,"DataView"),lc=Pr(yn,"Promise"),pi=Pr(yn,"Set"),Lp="[object Map]",Cw="[object Object]",Mp="[object Promise]",bp="[object Set]",jp="[object WeakMap]",Fp="[object DataView]",Rw=_r(ac),Nw=_r(ws),Ow=_r(lc),Iw=_r(pi),_w=_r(sc),Wt=lr;(ac&&Wt(new ac(new ArrayBuffer(1)))!=Fp||ws&&Wt(new ws)!=Lp||lc&&Wt(lc.resolve())!=Mp||pi&&Wt(new pi)!=bp||sc&&Wt(new sc)!=jp)&&(Wt=function(r){var e=lr(r),t=e==Cw?r.constructor:void 0,s=t?_r(t):"";if(s)switch(s){case Rw:return Fp;case Nw:return Lp;case Ow:return Mp;case Iw:return bp;case _w:return jp}return e});var Pw=Object.prototype,Lw=Pw.hasOwnProperty;function Mw(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&Lw.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var da=yn.Uint8Array;function bw(r){var e=new r.constructor(r.byteLength);return new da(e).set(new da(r)),e}function jw(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var Fw=/\w*$/;function $w(r){var e=new r.constructor(r.source,Fw.exec(r));return e.lastIndex=r.lastIndex,e}var $p=Kt?Kt.prototype:void 0,Up=$p?$p.valueOf:void 0;function Uw(r){return Up?Object(Up.call(r)):{}}function Dw(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Bw="[object Boolean]",zw="[object Date]",Vw="[object Map]",Ww="[object Number]",Gw="[object RegExp]",Kw="[object Set]",Hw="[object String]",Yw="[object Symbol]",Xw="[object ArrayBuffer]",qw="[object DataView]",Qw="[object Float32Array]",Zw="[object Float64Array]",Jw="[object Int8Array]",ek="[object Int16Array]",tk="[object Int32Array]",nk="[object Uint8Array]",rk="[object Uint8ClampedArray]",ik="[object Uint16Array]",sk="[object Uint32Array]";function ok(r,e,t){var s=r.constructor;switch(e){case Xw:return bw(r);case Bw:case zw:return new s(+r);case qw:return jw(r);case Qw:case Zw:case Jw:case ek:case tk:case nk:case rk:case ik:case sk:return Dw(r);case Vw:return new s;case Ww:case Hw:return new s(r);case Gw:return $w(r);case Kw:return new s;case Yw:return Uw(r)}}function ak(r){return typeof r.constructor=="function"&&!Ns(r)?ST(Jm(r)):{}}var lk="[object Map]";function uk(r){return on(r)&&Wt(r)==lk}var Dp=or&&or.isMap,ck=Dp?Oa(Dp):uk,fk="[object Set]";function dk(r){return on(r)&&Wt(r)==fk}var Bp=or&&or.isSet,hk=Bp?Oa(Bp):dk,ig="[object Arguments]",pk="[object Array]",mk="[object Boolean]",gk="[object Date]",vk="[object Error]",sg="[object Function]",yk="[object GeneratorFunction]",Sk="[object Map]",Ek="[object Number]",og="[object Object]",Tk="[object RegExp]",xk="[object Set]",wk="[object String]",kk="[object Symbol]",Ak="[object WeakMap]",Ck="[object ArrayBuffer]",Rk="[object DataView]",Nk="[object Float32Array]",Ok="[object Float64Array]",Ik="[object Int8Array]",_k="[object Int16Array]",Pk="[object Int32Array]",Lk="[object Uint8Array]",Mk="[object Uint8ClampedArray]",bk="[object Uint16Array]",jk="[object Uint32Array]",Re={};Re[ig]=Re[pk]=Re[Ck]=Re[Rk]=Re[mk]=Re[gk]=Re[Nk]=Re[Ok]=Re[Ik]=Re[_k]=Re[Pk]=Re[Sk]=Re[Ek]=Re[og]=Re[Tk]=Re[xk]=Re[wk]=Re[kk]=Re[Lk]=Re[Mk]=Re[bk]=Re[jk]=!0;Re[vk]=Re[sg]=Re[Ak]=!1;function Jo(r,e,t,s,a,l){var c;if(c!==void 0)return c;if(!Ht(r))return r;var f=Te(r);if(f)return c=Mw(r),TT(r,c);var h=Wt(r),m=h==sg||h==yk;if(Ts(r))return Sw(r);if(h==og||h==ig||m&&!a)return c=m?{}:ak(r),xw(r,vw(c,r));if(!Re[h])return a?r:{};c=ok(r,h),l||(l=new vn);var g=l.get(r);if(g)return g;l.set(r,c),hk(r)?r.forEach(function(x){c.add(Jo(x,e,t,x,r,l))}):ck(r)&&r.forEach(function(x,A){c.set(A,Jo(x,e,t,A,r,l))});var y=oc,S=f?void 0:y(r);return zm(S||r,function(x,A){S&&(A=x,x=r[A]),Ra(c,A,Jo(x,e,t,A,r,l))}),c}var Fk=4;function st(r){return Jo(r,Fk)}function Is(r){for(var e=-1,t=r==null?0:r.length,s=0,a=[];++e<t;){var l=r[e];l&&(a[s++]=l)}return a}var $k="__lodash_hash_undefined__";function Uk(r){return this.__data__.set(r,$k),this}function Dk(r){return this.__data__.has(r)}function gi(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Fn;++e<t;)this.add(r[e])}gi.prototype.add=gi.prototype.push=Uk;gi.prototype.has=Dk;function ag(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(e(r[t],t,r))return!0;return!1}function Bc(r,e){return r.has(e)}var Bk=1,zk=2;function lg(r,e,t,s,a,l){var c=t&Bk,f=r.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var m=l.get(r),g=l.get(e);if(m&&g)return m==e&&g==r;var y=-1,S=!0,x=t&zk?new gi:void 0;for(l.set(r,e),l.set(e,r);++y<f;){var A=r[y],R=e[y];if(s)var j=c?s(R,A,y,e,r,l):s(A,R,y,r,e,l);if(j!==void 0){if(j)continue;S=!1;break}if(x){if(!ag(e,function(b,_){if(!Bc(x,_)&&(A===b||a(A,b,t,s,l)))return x.push(_)})){S=!1;break}}else if(!(A===R||a(A,R,t,s,l))){S=!1;break}}return l.delete(r),l.delete(e),S}function Vk(r){var e=-1,t=Array(r.size);return r.forEach(function(s,a){t[++e]=[a,s]}),t}function zc(r){var e=-1,t=Array(r.size);return r.forEach(function(s){t[++e]=s}),t}var Wk=1,Gk=2,Kk="[object Boolean]",Hk="[object Date]",Yk="[object Error]",Xk="[object Map]",qk="[object Number]",Qk="[object RegExp]",Zk="[object Set]",Jk="[object String]",eA="[object Symbol]",tA="[object ArrayBuffer]",nA="[object DataView]",zp=Kt?Kt.prototype:void 0,qu=zp?zp.valueOf:void 0;function rA(r,e,t,s,a,l,c){switch(t){case nA:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case tA:return!(r.byteLength!=e.byteLength||!l(new da(r),new da(e)));case Kk:case Hk:case qk:return Rs(+r,+e);case Yk:return r.name==e.name&&r.message==e.message;case Qk:case Jk:return r==e+"";case Xk:var f=Vk;case Zk:var h=s&Wk;if(f||(f=zc),r.size!=e.size&&!h)return!1;var m=c.get(r);if(m)return m==e;s|=Gk,c.set(r,e);var g=lg(f(r),f(e),s,a,l,c);return c.delete(r),g;case eA:if(qu)return qu.call(r)==qu.call(e)}return!1}var iA=1,sA=Object.prototype,oA=sA.hasOwnProperty;function aA(r,e,t,s,a,l){var c=t&iA,f=oc(r),h=f.length,m=oc(e),g=m.length;if(h!=g&&!c)return!1;for(var y=h;y--;){var S=f[y];if(!(c?S in e:oA.call(e,S)))return!1}var x=l.get(r),A=l.get(e);if(x&&A)return x==e&&A==r;var R=!0;l.set(r,e),l.set(e,r);for(var j=c;++y<h;){S=f[y];var b=r[S],_=e[S];if(s)var P=c?s(_,b,S,e,r,l):s(b,_,S,r,e,l);if(!(P===void 0?b===_||a(b,_,t,s,l):P)){R=!1;break}j||(j=S=="constructor")}if(R&&!j){var M=r.constructor,z=e.constructor;M!=z&&"constructor"in r&&"constructor"in e&&!(typeof M=="function"&&M instanceof M&&typeof z=="function"&&z instanceof z)&&(R=!1)}return l.delete(r),l.delete(e),R}var lA=1,Vp="[object Arguments]",Wp="[object Array]",Ho="[object Object]",uA=Object.prototype,Gp=uA.hasOwnProperty;function cA(r,e,t,s,a,l){var c=Te(r),f=Te(e),h=c?Wp:Wt(r),m=f?Wp:Wt(e);h=h==Vp?Ho:h,m=m==Vp?Ho:m;var g=h==Ho,y=m==Ho,S=h==m;if(S&&Ts(r)){if(!Ts(e))return!1;c=!0,g=!1}if(S&&!g)return l||(l=new vn),c||Lc(r)?lg(r,e,t,s,a,l):rA(r,e,h,t,s,a,l);if(!(t&lA)){var x=g&&Gp.call(r,"__wrapped__"),A=y&&Gp.call(e,"__wrapped__");if(x||A){var R=x?r.value():r,j=A?e.value():e;return l||(l=new vn),a(R,j,t,s,l)}}return S?(l||(l=new vn),aA(r,e,t,s,a,l)):!1}function Vc(r,e,t,s,a){return r===e?!0:r==null||e==null||!on(r)&&!on(e)?r!==r&&e!==e:cA(r,e,t,s,Vc,a)}var fA=1,dA=2;function hA(r,e,t,s){var a=t.length,l=a;if(r==null)return!l;for(r=Object(r);a--;){var c=t[a];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++a<l;){c=t[a];var f=c[0],h=r[f],m=c[1];if(c[2]){if(h===void 0&&!(f in r))return!1}else{var g=new vn,y;if(!(y===void 0?Vc(m,h,fA|dA,s,g):y))return!1}}return!0}function ug(r){return r===r&&!Ht(r)}function pA(r){for(var e=Yt(r),t=e.length;t--;){var s=e[t],a=r[s];e[t]=[s,a,ug(a)]}return e}function cg(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function mA(r){var e=pA(r);return e.length==1&&e[0][2]?cg(e[0][0],e[0][1]):function(t){return t===r||hA(t,r,e)}}function gA(r,e){return r!=null&&e in Object(r)}function fg(r,e,t){e=Pa(e,r);for(var s=-1,a=e.length,l=!1;++s<a;){var c=Os(e[s]);if(!(l=r!=null&&t(r,c)))break;r=r[c]}return l||++s!=a?l:(a=r==null?0:r.length,!!a&&Pc(a)&&Ca(c,a)&&(Te(r)||Na(r)))}function vA(r,e){return r!=null&&fg(r,e,gA)}var yA=1,SA=2;function EA(r,e){return Mc(r)&&ug(e)?cg(Os(r),e):function(t){var s=lw(t,r);return s===void 0&&s===e?vA(t,r):Vc(e,s,yA|SA)}}function TA(r){return function(e){return e?.[r]}}function xA(r){return function(e){return jc(e,r)}}function wA(r){return Mc(r)?TA(Os(r)):xA(r)}function En(r){return typeof r=="function"?r:r==null?mi:typeof r=="object"?Te(r)?EA(r[0],r[1]):mA(r):wA(r)}function kA(r,e,t,s){for(var a=-1,l=r==null?0:r.length;++a<l;){var c=r[a];e(s,c,t(c),r)}return s}function AA(r){return function(e,t,s){for(var a=-1,l=Object(e),c=s(e),f=c.length;f--;){var h=c[++a];if(t(l[h],h,l)===!1)break}return e}}var CA=AA();function RA(r,e){return r&&CA(r,e,Yt)}function NA(r,e){return function(t,s){if(t==null)return t;if(!Sn(t))return r(t,s);for(var a=t.length,l=-1,c=Object(t);++l<a&&s(c[l],l,c)!==!1;);return t}}var Lr=NA(RA);function OA(r,e,t,s){return Lr(r,function(a,l,c){e(s,a,t(a),c)}),s}function IA(r,e){return function(t,s){var a=Te(t)?kA:OA,l=e?e():{};return a(t,r,En(s),l)}}var dg=Object.prototype,_A=dg.hasOwnProperty,Wc=_c(function(r,e){r=Object(r);var t=-1,s=e.length,a=s>2?e[2]:void 0;for(a&&Gm(e[0],e[1],a)&&(s=1);++t<s;)for(var l=e[t],c=Zm(l),f=-1,h=c.length;++f<h;){var m=c[f],g=r[m];(g===void 0||Rs(g,dg[m])&&!_A.call(r,m))&&(r[m]=l[m])}return r});function Kp(r){return on(r)&&Sn(r)}var PA=200;function LA(r,e,t,s){var a=-1,l=Wm,c=!0,f=r.length,h=[],m=e.length;if(!f)return h;e.length>=PA&&(l=Bc,c=!1,e=new gi(e));e:for(;++a<f;){var g=r[a],y=g;if(g=g!==0?g:0,c&&y===y){for(var S=m;S--;)if(e[S]===y)continue e;h.push(g)}else l(e,y,s)||h.push(g)}return h}var La=_c(function(r,e){return Kp(r)?LA(r,$c(e,1,Kp,!0)):[]});function Nr(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function it(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:Aa(e),eg(r,e<0?0:e,s)):[]}function ks(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:Aa(e),e=s-e,eg(r,0,e<0?0:e)):[]}function MA(r){return typeof r=="function"?r:mi}function ae(r,e){var t=Te(r)?zm:Lr;return t(r,MA(e))}function bA(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(!e(r[t],t,r))return!1;return!0}function jA(r,e){var t=!0;return Lr(r,function(s,a,l){return t=!!e(s,a,l),t}),t}function sn(r,e,t){var s=Te(r)?bA:jA;return s(r,En(e))}function hg(r,e){var t=[];return Lr(r,function(s,a,l){e(s,a,l)&&t.push(s)}),t}function Xt(r,e){var t=Te(r)?Uc:hg;return t(r,En(e))}function FA(r){return function(e,t,s){var a=Object(e);if(!Sn(e)){var l=En(t);e=Yt(e),t=function(f){return l(a[f],f,a)}}var c=r(e,t,s);return c>-1?a[l?e[c]:c]:void 0}}var $A=Math.max;function UA(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var a=t==null?0:Aa(t);return a<0&&(a=$A(s+a,0)),Vm(r,En(e),a)}var vi=FA(UA);function an(r){return r&&r.length?r[0]:void 0}function DA(r,e){var t=-1,s=Sn(r)?Array(r.length):[];return Lr(r,function(a,l,c){s[++t]=e(a,l,c)}),s}function ee(r,e){var t=Te(r)?ka:DA;return t(r,En(e))}function Gt(r,e){return $c(ee(r,e))}var BA=Object.prototype,zA=BA.hasOwnProperty,VA=IA(function(r,e,t){zA.call(r,t)?r[t].push(e):Oc(r,t,[e])}),WA=Object.prototype,GA=WA.hasOwnProperty;function KA(r,e){return r!=null&&GA.call(r,e)}function se(r,e){return r!=null&&fg(r,e,KA)}var HA="[object String]";function xt(r){return typeof r=="string"||!Te(r)&&on(r)&&lr(r)==HA}function YA(r,e){return ka(e,function(t){return r[t]})}function qe(r){return r==null?[]:YA(r,Yt(r))}var XA=Math.max;function pt(r,e,t,s){r=Sn(r)?r:qe(r),t=t?Aa(t):0;var a=r.length;return t<0&&(t=XA(a+t,0)),xt(r)?t<=a&&r.indexOf(e,t)>-1:!!a&&Nc(r,e,t)>-1}function Hp(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var a=0;return Nc(r,e,a)}var qA="[object Map]",QA="[object Set]",ZA=Object.prototype,JA=ZA.hasOwnProperty;function Ne(r){if(r==null)return!0;if(Sn(r)&&(Te(r)||typeof r=="string"||typeof r.splice=="function"||Ts(r)||Lc(r)||Na(r)))return!r.length;var e=Wt(r);if(e==qA||e==QA)return!r.size;if(Ns(r))return!Qm(r).length;for(var t in r)if(JA.call(r,t))return!1;return!0}var eC="[object RegExp]";function tC(r){return on(r)&&lr(r)==eC}var Yp=or&&or.isRegExp,Pn=Yp?Oa(Yp):tC;function Ln(r){return r===void 0}var nC="Expected a function";function rC(r){if(typeof r!="function")throw new TypeError(nC);return function(){var e=arguments;switch(e.length){case 0:return!r.call(this);case 1:return!r.call(this,e[0]);case 2:return!r.call(this,e[0],e[1]);case 3:return!r.call(this,e[0],e[1],e[2])}return!r.apply(this,e)}}function iC(r,e,t,s){if(!Ht(r))return r;e=Pa(e,r);for(var a=-1,l=e.length,c=l-1,f=r;f!=null&&++a<l;){var h=Os(e[a]),m=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return r;if(a!=c){var g=f[h];m=void 0,m===void 0&&(m=Ht(g)?g:Ca(e[a+1])?[]:{})}Ra(f,h,m),f=f[h]}return r}function sC(r,e,t){for(var s=-1,a=e.length,l={};++s<a;){var c=e[s],f=jc(r,c);t(f,c)&&iC(l,Pa(c,r),f)}return l}function ln(r,e){if(r==null)return{};var t=ka(Aw(r),function(s){return[s]});return e=En(e),sC(r,t,function(s,a){return e(s,a[0])})}function oC(r,e,t,s,a){return a(r,function(l,c,f){t=s?(s=!1,l):e(t,l,c,f)}),t}function Mt(r,e,t){var s=Te(r)?cw:oC,a=arguments.length<3;return s(r,En(e),t,a,Lr)}function Ma(r,e){var t=Te(r)?Uc:hg;return t(r,rC(En(e)))}function aC(r,e){var t;return Lr(r,function(s,a,l){return t=e(s,a,l),!t}),!!t}function pg(r,e,t){var s=Te(r)?ag:aC;return s(r,En(e))}var lC=1/0,uC=pi&&1/zc(new pi([,-0]))[1]==lC?function(r){return new pi(r)}:Xe,cC=200;function fC(r,e,t){var s=-1,a=Wm,l=r.length,c=!0,f=[],h=f;if(l>=cC){var m=uC(r);if(m)return zc(m);c=!1,a=Bc,h=new gi}else h=f;e:for(;++s<l;){var g=r[s],y=g;if(g=g!==0?g:0,c&&y===y){for(var S=h.length;S--;)if(h[S]===y)continue e;f.push(g)}else a(h,y,t)||(h!==f&&h.push(y),f.push(g))}return f}function Gc(r){return r&&r.length?fC(r):[]}function uc(r){console&&console.error&&console.error(`Error: ${r}`)}function mg(r){console&&console.warn&&console.warn(`Warning: ${r}`)}function gg(r){const e=new Date().getTime(),t=r();return{time:new Date().getTime()-e,value:t}}function vg(r){function e(){}e.prototype=r;const t=new e;function s(){return typeof t.bar}return s(),s(),r}function dC(r){return hC(r)?r.LABEL:r.name}function hC(r){return xt(r.LABEL)&&r.LABEL!==""}class Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,t=>{t.accept(e)})}}class bt extends Tn{constructor(e){super([]),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class yi extends Tn{constructor(e){super(e.definition),this.orgText="",Lt(this,ln(e,t=>t!==void 0))}}class wt extends Tn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Lt(this,ln(e,t=>t!==void 0))}}class Tt extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class xn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class wn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class Qe extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class un extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,t=>t!==void 0))}}class cn extends Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Lt(this,ln(e,t=>t!==void 0))}}class Fe{constructor(e){this.idx=1,Lt(this,ln(e,t=>t!==void 0))}accept(e){e.visit(this)}}function pC(r){return ee(r,ea)}function ea(r){function e(t){return ee(t,ea)}if(r instanceof bt){const t={type:"NonTerminal",name:r.nonTerminalName,idx:r.idx};return xt(r.label)&&(t.label=r.label),t}else{if(r instanceof wt)return{type:"Alternative",definition:e(r.definition)};if(r instanceof Tt)return{type:"Option",idx:r.idx,definition:e(r.definition)};if(r instanceof xn)return{type:"RepetitionMandatory",idx:r.idx,definition:e(r.definition)};if(r instanceof wn)return{type:"RepetitionMandatoryWithSeparator",idx:r.idx,separator:ea(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof un)return{type:"RepetitionWithSeparator",idx:r.idx,separator:ea(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof Qe)return{type:"Repetition",idx:r.idx,definition:e(r.definition)};if(r instanceof cn)return{type:"Alternation",idx:r.idx,definition:e(r.definition)};if(r instanceof Fe){const t={type:"Terminal",name:r.terminalType.name,label:dC(r.terminalType),idx:r.idx};xt(r.label)&&(t.terminalLabel=r.label);const s=r.terminalType.PATTERN;return r.terminalType.PATTERN&&(t.pattern=Pn(s)?s.source:s),t}else{if(r instanceof yi)return{type:"Rule",name:r.name,orgText:r.orgText,definition:e(r.definition)};throw Error("non exhaustive match")}}}class Si{visit(e){const t=e;switch(t.constructor){case bt:return this.visitNonTerminal(t);case wt:return this.visitAlternative(t);case Tt:return this.visitOption(t);case xn:return this.visitRepetitionMandatory(t);case wn:return this.visitRepetitionMandatoryWithSeparator(t);case un:return this.visitRepetitionWithSeparator(t);case Qe:return this.visitRepetition(t);case cn:return this.visitAlternation(t);case Fe:return this.visitTerminal(t);case yi:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function mC(r){return r instanceof wt||r instanceof Tt||r instanceof Qe||r instanceof xn||r instanceof wn||r instanceof un||r instanceof Fe||r instanceof yi}function ha(r,e=[]){return r instanceof Tt||r instanceof Qe||r instanceof un?!0:r instanceof cn?pg(r.definition,s=>ha(s,e)):r instanceof bt&&pt(e,r)?!1:r instanceof Tn?(r instanceof bt&&e.push(r),sn(r.definition,s=>ha(s,e))):!1}function gC(r){return r instanceof cn}function gn(r){if(r instanceof bt)return"SUBRULE";if(r instanceof Tt)return"OPTION";if(r instanceof cn)return"OR";if(r instanceof xn)return"AT_LEAST_ONE";if(r instanceof wn)return"AT_LEAST_ONE_SEP";if(r instanceof un)return"MANY_SEP";if(r instanceof Qe)return"MANY";if(r instanceof Fe)return"CONSUME";throw Error("non exhaustive match")}class ba{walk(e,t=[]){ae(e.definition,(s,a)=>{const l=it(e.definition,a+1);if(s instanceof bt)this.walkProdRef(s,l,t);else if(s instanceof Fe)this.walkTerminal(s,l,t);else if(s instanceof wt)this.walkFlat(s,l,t);else if(s instanceof Tt)this.walkOption(s,l,t);else if(s instanceof xn)this.walkAtLeastOne(s,l,t);else if(s instanceof wn)this.walkAtLeastOneSep(s,l,t);else if(s instanceof un)this.walkManySep(s,l,t);else if(s instanceof Qe)this.walkMany(s,l,t);else if(s instanceof cn)this.walkOr(s,l,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,s){}walkProdRef(e,t,s){}walkFlat(e,t,s){const a=t.concat(s);this.walk(e,a)}walkOption(e,t,s){const a=t.concat(s);this.walk(e,a)}walkAtLeastOne(e,t,s){const a=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,a)}walkAtLeastOneSep(e,t,s){const a=Xp(e,t,s);this.walk(e,a)}walkMany(e,t,s){const a=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,a)}walkManySep(e,t,s){const a=Xp(e,t,s);this.walk(e,a)}walkOr(e,t,s){const a=t.concat(s);ae(e.definition,l=>{const c=new wt({definition:[l]});this.walk(c,a)})}}function Xp(r,e,t){return[new Tt({definition:[new Fe({terminalType:r.separator})].concat(r.definition)})].concat(e,t)}function _s(r){if(r instanceof bt)return _s(r.referencedRule);if(r instanceof Fe)return SC(r);if(mC(r))return vC(r);if(gC(r))return yC(r);throw Error("non exhaustive match")}function vC(r){let e=[];const t=r.definition;let s=0,a=t.length>s,l,c=!0;for(;a&&c;)l=t[s],c=ha(l),e=e.concat(_s(l)),s=s+1,a=t.length>s;return Gc(e)}function yC(r){const e=ee(r.definition,t=>_s(t));return Gc(rn(e))}function SC(r){return[r.terminalType]}const yg="_~IN~_";class EC extends ba{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,s){}walkProdRef(e,t,s){const a=xC(e.referencedRule,e.idx)+this.topProd.name,l=t.concat(s),c=new wt({definition:l}),f=_s(c);this.follows[a]=f}}function TC(r){const e={};return ae(r,t=>{const s=new EC(t).startWalking();Lt(e,s)}),e}function xC(r,e){return r.name+e+yg}function le(r){return r.charCodeAt(0)}function Qu(r,e){Array.isArray(r)?r.forEach(function(t){e.push(t)}):e.push(r)}function ls(r,e){if(r[e]===!0)throw"duplicate flag "+e;r[e],r[e]=!0}function si(r){if(r===void 0)throw Error("Internal Error - Should never get here!");return!0}function wC(){throw Error("Internal Error - Should never get here!")}function qp(r){return r.type==="Character"}const pa=[];for(let r=le("0");r<=le("9");r++)pa.push(r);const ma=[le("_")].concat(pa);for(let r=le("a");r<=le("z");r++)ma.push(r);for(let r=le("A");r<=le("Z");r++)ma.push(r);const Qp=[le(" "),le("\f"),le(`
`),le("\r"),le("	"),le("\v"),le("	"),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le("\u2028"),le("\u2029"),le(""),le(""),le(""),le("\uFEFF")],kC=/[0-9a-fA-F]/,Yo=/[0-9]/,AC=/[1-9]/;class CC{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ls(s,"global");break;case"i":ls(s,"ignoreCase");break;case"m":ls(s,"multiLine");break;case"u":ls(s,"unicode");break;case"y":ls(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":t="Lookbehind";break;case"!":t="NegativeLookbehind"}break}}si(t);const s=this.disjunction();return this.consumeChar(")"),{type:t,value:s,loc:this.loc(e)}}return wC()}quantifier(e=!1){let t;const s=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const a=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:a,atMost:a};break;case",":let l;this.isDigit()?(l=this.integerIncludingZero(),t={atLeast:a,atMost:l}):t={atLeast:a,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;si(t);break}if(!(e===!0&&t===void 0)&&si(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(s),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),si(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[le(`
`),le("\r"),le("\u2028"),le("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=pa;break;case"D":e=pa,t=!0;break;case"s":e=Qp;break;case"S":e=Qp,t=!0;break;case"w":e=ma;break;case"W":e=ma,t=!0;break}if(si(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=le("\f");break;case"n":e=le(`
`);break;case"r":e=le("\r");break;case"t":e=le("	");break;case"v":e=le("\v");break}if(si(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:le("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:le(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:le(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,qp(s)&&this.isRangeDash()){this.consumeChar("-");const a=this.classAtom();if(a.type,qp(a)){if(a.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:a.value})}else Qu(s.value,e),e.push(le("-")),Qu(a.value,e)}else Qu(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:le("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const t=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:t};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(AC.test(e)===!1)throw Error("Expecting a positive integer");for(;Yo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Yo.test(e)===!1)throw Error("Expecting an integer");for(;Yo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:le(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Yo.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let a=0;a<e;a++){const l=this.popChar();if(kC.test(l)===!1)throw Error("Expecting a HexDecimal digits");t+=l}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Kc{visitChildren(e){for(const t in e){const s=e[t];e.hasOwnProperty(t)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(a=>{this.visit(a)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let ta={};const RC=new CC;function ja(r){const e=r.toString();if(ta.hasOwnProperty(e))return ta[e];{const t=RC.pattern(e);return ta[e]=t,t}}function NC(){ta={}}const Sg="Complement Sets are not supported for first char optimization",ga=`Unable to use "first char" lexer optimizations:
`;function OC(r,e=!1){try{const t=ja(r);return cc(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Sg)e&&mg(`${ga}	Unable to optimize: < ${r.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),uc(`${ga}
	Failed parsing: < ${r.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function cc(r,e,t){switch(r.type){case"Disjunction":for(let a=0;a<r.value.length;a++)cc(r.value[a],e,t);break;case"Alternative":const s=r.value;for(let a=0;a<s.length;a++){const l=s[a];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const c=l;switch(c.type){case"Character":Xo(c.value,e,t);break;case"Set":if(c.complement===!0)throw Error(Sg);ae(c.value,h=>{if(typeof h=="number")Xo(h,e,t);else{const m=h;if(t===!0)for(let g=m.from;g<=m.to;g++)Xo(g,e,t);else{for(let g=m.from;g<=m.to&&g<ps;g++)Xo(g,e,t);if(m.to>=ps){const g=m.from>=ps?m.from:ps,y=m.to,S=ar(g),x=ar(y);for(let A=S;A<=x;A++)e[A]=A}}}});break;case"Group":cc(c.value,e,t);break;default:throw Error("Non Exhaustive Match")}const f=c.quantifier!==void 0&&c.quantifier.atLeast===0;if(c.type==="Group"&&fc(c)===!1||c.type!=="Group"&&f===!1)break}break;default:throw Error("non exhaustive match!")}return qe(e)}function Xo(r,e,t){const s=ar(r);e[s]=s,t===!0&&IC(r,e)}function IC(r,e){const t=String.fromCharCode(r),s=t.toUpperCase();if(s!==t){const a=ar(s.charCodeAt(0));e[a]=a}else{const a=t.toLowerCase();if(a!==t){const l=ar(a.charCodeAt(0));e[l]=l}}}function Zp(r,e){return vi(r.value,t=>{if(typeof t=="number")return pt(e,t);{const s=t;return vi(e,a=>s.from<=a&&a<=s.to)!==void 0}})}function fc(r){const e=r.quantifier;return e&&e.atLeast===0?!0:r.value?Te(r.value)?sn(r.value,fc):fc(r.value):!1}class _C extends Kc{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){pt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Zp(e,this.targetCharCodes)===void 0&&(this.found=!0):Zp(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Hc(r,e){if(e instanceof RegExp){const t=ja(e),s=new _C(r);return s.visit(t),s.found}else return vi(e,t=>pt(r,t.charCodeAt(0)))!==void 0}const Or="PATTERN",hs="defaultMode",qo="modes";let Eg=typeof new RegExp("(?:)").sticky=="boolean";function PC(r,e){e=Wc(e,{useSticky:Eg,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,P)=>P()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{n1()});let s;t("Reject Lexer.NA",()=>{s=Ma(r,_=>_[Or]===dt.NA)});let a=!1,l;t("Transform Patterns",()=>{a=!1,l=ee(s,_=>{const P=_[Or];if(Pn(P)){const M=P.source;return M.length===1&&M!=="^"&&M!=="$"&&M!=="."&&!P.ignoreCase?M:M.length===2&&M[0]==="\\"&&!pt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],M[1])?M[1]:e.useSticky?em(P):Jp(P)}else{if(bn(P))return a=!0,{exec:P};if(typeof P=="object")return a=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const M=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),z=new RegExp(M);return e.useSticky?em(z):Jp(z)}}else throw Error("non exhaustive match")}})});let c,f,h,m,g;t("misc mapping",()=>{c=ee(s,_=>_.tokenTypeIdx),f=ee(s,_=>{const P=_.GROUP;if(P!==dt.SKIPPED){if(xt(P))return P;if(Ln(P))return!1;throw Error("non exhaustive match")}}),h=ee(s,_=>{const P=_.LONGER_ALT;if(P)return Te(P)?ee(P,z=>Hp(s,z)):[Hp(s,P)]}),m=ee(s,_=>_.PUSH_MODE),g=ee(s,_=>se(_,"POP_MODE"))});let y;t("Line Terminator Handling",()=>{const _=wg(e.lineTerminatorCharacters);y=ee(s,P=>!1),e.positionTracking!=="onlyOffset"&&(y=ee(s,P=>se(P,"LINE_BREAKS")?!!P.LINE_BREAKS:xg(P,_)===!1&&Hc(_,P.PATTERN)))});let S,x,A,R;t("Misc Mapping #2",()=>{S=ee(s,Tg),x=ee(l,JC),A=Mt(s,(_,P)=>{const M=P.GROUP;return xt(M)&&M!==dt.SKIPPED&&(_[M]=[]),_},{}),R=ee(l,(_,P)=>({pattern:l[P],longerAlt:h[P],canLineTerminator:y[P],isCustom:S[P],short:x[P],group:f[P],push:m[P],pop:g[P],tokenTypeIdx:c[P],tokenType:s[P]}))});let j=!0,b=[];return e.safeMode||t("First Char Optimization",()=>{b=Mt(s,(_,P,M)=>{if(typeof P.PATTERN=="string"){const z=P.PATTERN.charCodeAt(0),L=ar(z);Zu(_,L,R[M])}else if(Te(P.START_CHARS_HINT)){let z;ae(P.START_CHARS_HINT,L=>{const D=typeof L=="string"?L.charCodeAt(0):L,G=ar(D);z!==G&&(z=G,Zu(_,G,R[M]))})}else if(Pn(P.PATTERN))if(P.PATTERN.unicode)j=!1,e.ensureOptimizations&&uc(`${ga}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const z=OC(P.PATTERN,e.ensureOptimizations);Ne(z)&&(j=!1),ae(z,L=>{Zu(_,L,R[M])})}else e.ensureOptimizations&&uc(`${ga}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),j=!1;return _},[])}),{emptyGroups:A,patternIdxToConfig:R,charCodeToPatternIdxToConfig:b,hasCustom:a,canBeOptimized:j}}function LC(r,e){let t=[];const s=bC(r);t=t.concat(s.errors);const a=jC(s.valid),l=a.valid;return t=t.concat(a.errors),t=t.concat(MC(l)),t=t.concat(WC(l)),t=t.concat(GC(l,e)),t=t.concat(KC(l)),t}function MC(r){let e=[];const t=Xt(r,s=>Pn(s[Or]));return e=e.concat($C(t)),e=e.concat(BC(t)),e=e.concat(zC(t)),e=e.concat(VC(t)),e=e.concat(UC(t)),e}function bC(r){const e=Xt(r,a=>!se(a,Or)),t=ee(e,a=>({message:"Token Type: ->"+a.name+"<- missing static 'PATTERN' property",type:ze.MISSING_PATTERN,tokenTypes:[a]})),s=La(r,e);return{errors:t,valid:s}}function jC(r){const e=Xt(r,a=>{const l=a[Or];return!Pn(l)&&!bn(l)&&!se(l,"exec")&&!xt(l)}),t=ee(e,a=>({message:"Token Type: ->"+a.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ze.INVALID_PATTERN,tokenTypes:[a]})),s=La(r,e);return{errors:t,valid:s}}const FC=/[^\\][$]/;function $C(r){class e extends Kc{constructor(){super(...arguments),this.found=!1}visitEndAnchor(l){this.found=!0}}const t=Xt(r,a=>{const l=a.PATTERN;try{const c=ja(l),f=new e;return f.visit(c),f.found}catch{return FC.test(l.source)}});return ee(t,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.EOI_ANCHOR_FOUND,tokenTypes:[a]}))}function UC(r){const e=Xt(r,s=>s.PATTERN.test(""));return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:ze.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const DC=/[^\\[][\^]|^\^/;function BC(r){class e extends Kc{constructor(){super(...arguments),this.found=!1}visitStartAnchor(l){this.found=!0}}const t=Xt(r,a=>{const l=a.PATTERN;try{const c=ja(l),f=new e;return f.visit(c),f.found}catch{return DC.test(l.source)}});return ee(t,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.SOI_ANCHOR_FOUND,tokenTypes:[a]}))}function zC(r){const e=Xt(r,s=>{const a=s[Or];return a instanceof RegExp&&(a.multiline||a.global)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ze.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function VC(r){const e=[];let t=ee(r,l=>Mt(r,(c,f)=>(l.PATTERN.source===f.PATTERN.source&&!pt(e,f)&&f.PATTERN!==dt.NA&&(e.push(f),c.push(f)),c),[]));t=Is(t);const s=Xt(t,l=>l.length>1);return ee(s,l=>{const c=ee(l,h=>h.name);return{message:`The same RegExp pattern ->${an(l).PATTERN}<-has been used in all of the following Token Types: ${c.join(", ")} <-`,type:ze.DUPLICATE_PATTERNS_FOUND,tokenTypes:l}})}function WC(r){const e=Xt(r,s=>{if(!se(s,"GROUP"))return!1;const a=s.GROUP;return a!==dt.SKIPPED&&a!==dt.NA&&!xt(a)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ze.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function GC(r,e){const t=Xt(r,a=>a.PUSH_MODE!==void 0&&!pt(e,a.PUSH_MODE));return ee(t,a=>({message:`Token Type: ->${a.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${a.PUSH_MODE}<-which does not exist`,type:ze.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[a]}))}function KC(r){const e=[],t=Mt(r,(s,a,l)=>{const c=a.PATTERN;return c===dt.NA||(xt(c)?s.push({str:c,idx:l,tokenType:a}):Pn(c)&&YC(c)&&s.push({str:c.source,idx:l,tokenType:a})),s},[]);return ae(r,(s,a)=>{ae(t,({str:l,idx:c,tokenType:f})=>{if(a<c&&HC(l,s.PATTERN)){const h=`Token: ->${f.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:h,type:ze.UNREACHABLE_PATTERN,tokenTypes:[s,f]})}})}),e}function HC(r,e){if(Pn(e)){if(XC(e))return!1;const t=e.exec(r);return t!==null&&t.index===0}else{if(bn(e))return e(r,0,[],{});if(se(e,"exec"))return e.exec(r,0,[],{});if(typeof e=="string")return e===r;throw Error("non exhaustive match")}}function YC(r){return vi([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>r.source.indexOf(t)!==-1)===void 0}function XC(r){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(r.source)}function Jp(r){const e=r.ignoreCase?"i":"";return new RegExp(`^(?:${r.source})`,e)}function em(r){const e=r.ignoreCase?"iy":"y";return new RegExp(`${r.source}`,e)}function qC(r,e,t){const s=[];return se(r,hs)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+hs+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),se(r,qo)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+qo+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),se(r,qo)&&se(r,hs)&&!se(r.modes,r.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${hs}: <${r.defaultMode}>which does not exist
`,type:ze.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),se(r,qo)&&ae(r.modes,(a,l)=>{ae(a,(c,f)=>{if(Ln(c))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${l}> at index: <${f}>
`,type:ze.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(se(c,"LONGER_ALT")){const h=Te(c.LONGER_ALT)?c.LONGER_ALT:[c.LONGER_ALT];ae(h,m=>{!Ln(m)&&!pt(a,m)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${m.name}> on token <${c.name}> outside of mode <${l}>
`,type:ze.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function QC(r,e,t){const s=[];let a=!1;const l=Is(rn(qe(r.modes))),c=Ma(l,h=>h[Or]===dt.NA),f=wg(t);return e&&ae(c,h=>{const m=xg(h,f);if(m!==!1){const y={message:t1(h,m),type:m.issue,tokenType:h};s.push(y)}else se(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(a=!0):Hc(f,h.PATTERN)&&(a=!0)}),e&&!a&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:ze.NO_LINE_BREAKS_FLAGS}),s}function ZC(r){const e={},t=Yt(r);return ae(t,s=>{const a=r[s];if(Te(a))e[s]=[];else throw Error("non exhaustive match")}),e}function Tg(r){const e=r.PATTERN;if(Pn(e))return!1;if(bn(e))return!0;if(se(e,"exec"))return!0;if(xt(e))return!1;throw Error("non exhaustive match")}function JC(r){return xt(r)&&r.length===1?r.charCodeAt(0):!1}const e1={test:function(r){const e=r.length;for(let t=this.lastIndex;t<e;t++){const s=r.charCodeAt(t);if(s===10)return this.lastIndex=t+1,!0;if(s===13)return r.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function xg(r,e){if(se(r,"LINE_BREAKS"))return!1;if(Pn(r.PATTERN)){try{Hc(e,r.PATTERN)}catch(t){return{issue:ze.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(xt(r.PATTERN))return!1;if(Tg(r))return{issue:ze.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function t1(r,e){if(e.issue===ze.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${r.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===ze.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${r.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function wg(r){return ee(r,t=>xt(t)?t.charCodeAt(0):t)}function Zu(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}const ps=256;let na=[];function ar(r){return r<ps?r:na[r]}function n1(){if(Ne(na)){na=new Array(65536);for(let r=0;r<65536;r++)na[r]=r>255?255+~~(r/255):r}}function Ps(r,e){const t=r.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function va(r,e){return r.tokenTypeIdx===e.tokenTypeIdx}let tm=1;const kg={};function Ls(r){const e=r1(r);i1(e),o1(e),s1(e),ae(e,t=>{t.isParent=t.categoryMatches.length>0})}function r1(r){let e=st(r),t=r,s=!0;for(;s;){t=Is(rn(ee(t,l=>l.CATEGORIES)));const a=La(t,e);e=e.concat(a),Ne(a)?s=!1:t=a}return e}function i1(r){ae(r,e=>{Cg(e)||(kg[tm]=e,e.tokenTypeIdx=tm++),nm(e)&&!Te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),nm(e)||(e.CATEGORIES=[]),a1(e)||(e.categoryMatches=[]),l1(e)||(e.categoryMatchesMap={})})}function s1(r){ae(r,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(t,s)=>{e.categoryMatches.push(kg[s].tokenTypeIdx)})})}function o1(r){ae(r,e=>{Ag([],e)})}function Ag(r,e){ae(r,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),ae(e.CATEGORIES,t=>{const s=r.concat(e);pt(s,t)||Ag(s,t)})}function Cg(r){return se(r,"tokenTypeIdx")}function nm(r){return se(r,"CATEGORIES")}function a1(r){return se(r,"categoryMatches")}function l1(r){return se(r,"categoryMatchesMap")}function u1(r){return se(r,"tokenTypeIdx")}const c1={buildUnableToPopLexerModeMessage(r){return`Unable to pop Lexer Mode after encountering Token ->${r.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(r,e,t,s,a,l){return`unexpected character: ->${r.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var ze;(function(r){r[r.MISSING_PATTERN=0]="MISSING_PATTERN",r[r.INVALID_PATTERN=1]="INVALID_PATTERN",r[r.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",r[r.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",r[r.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",r[r.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",r[r.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",r[r.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",r[r.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",r[r.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",r[r.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",r[r.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",r[r.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",r[r.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",r[r.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",r[r.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",r[r.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",r[r.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(ze||(ze={}));const ms={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:c1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(ms);class dt{constructor(e,t=ms){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(a,l)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${a}>`);const{time:f,value:h}=gg(l),m=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&m(`${c}<-- <${a}> time: ${f}ms`),this.traceInitIndent--,h}else return l()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Lt({},ms,t);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let a,l=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===ms.lineTerminatorsPattern)this.config.lineTerminatorsPattern=e1;else if(this.config.lineTerminatorCharacters===ms.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Te(e)?a={modes:{defaultMode:st(e)},defaultMode:hs}:(l=!1,a=st(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(qC(a,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(QC(a,this.trackStartLines,this.config.lineTerminatorCharacters))})),a.modes=a.modes?a.modes:{},ae(a.modes,(f,h)=>{a.modes[h]=Ma(f,m=>Ln(m))});const c=Yt(a.modes);if(ae(a.modes,(f,h)=>{this.TRACE_INIT(`Mode: <${h}> processing`,()=>{if(this.modes.push(h),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(LC(f,c))}),Ne(this.lexerDefinitionErrors)){Ls(f);let m;this.TRACE_INIT("analyzeTokenTypes",()=>{m=PC(f,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[h]=m.patternIdxToConfig,this.charCodeToPatternIdxToConfig[h]=m.charCodeToPatternIdxToConfig,this.emptyGroups=Lt({},this.emptyGroups,m.emptyGroups),this.hasCustom=m.hasCustom||this.hasCustom,this.canModeBeOptimized[h]=m.canBeOptimized}})}),this.defaultMode=a.defaultMode,!Ne(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const h=ee(this.lexerDefinitionErrors,m=>m.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+h)}ae(this.lexerDefinitionWarning,f=>{mg(f.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Eg?(this.chopInput=mi,this.match=this.matchWithTest):(this.updateLastIndex=Xe,this.match=this.matchWithExec),l&&(this.handleModes=Xe),this.trackStartLines===!1&&(this.computeNewColumn=mi),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Xe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const f=Mt(this.canModeBeOptimized,(h,m,g)=>(m===!1&&h.push(g),h),[]);if(t.ensureOptimizations&&!Ne(f))throw Error(`Lexer Modes: < ${f.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{NC()}),this.TRACE_INIT("toFastProperties",()=>{vg(this)})})}tokenize(e,t=this.defaultMode){if(!Ne(this.lexerDefinitionErrors)){const a=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+a)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let s,a,l,c,f,h,m,g,y,S,x,A,R,j,b;const _=e,P=_.length;let M=0,z=0;const L=this.hasCustom?0:Math.floor(e.length/10),D=new Array(L),G=[];let ke=this.trackStartLines?1:void 0,ce=this.trackStartLines?1:void 0;const Ge=ZC(this.emptyGroups),tt=this.trackStartLines,$e=this.config.lineTerminatorsPattern;let Ue=0,de=[],ve=[];const we=[],W=[];Object.freeze(W);let J;function K(){return de}function k(oe){const he=ar(oe),ye=ve[he];return ye===void 0?W:ye}const F=oe=>{if(we.length===1&&oe.tokenType.PUSH_MODE===void 0){const he=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);G.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:he})}else{we.pop();const he=Nr(we);de=this.patternIdxToConfig[he],ve=this.charCodeToPatternIdxToConfig[he],Ue=de.length;const ye=this.canModeBeOptimized[he]&&this.config.safeMode===!1;ve&&ye?J=k:J=K}};function fe(oe){we.push(oe),ve=this.charCodeToPatternIdxToConfig[oe],de=this.patternIdxToConfig[oe],Ue=de.length,Ue=de.length;const he=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;ve&&he?J=k:J=K}fe.call(this,t);let te;const Se=this.config.recoveryEnabled;for(;M<P;){h=null;const oe=_.charCodeAt(M),he=J(oe),ye=he.length;for(s=0;s<ye;s++){te=he[s];const me=te.pattern;m=null;const Le=te.short;if(Le!==!1?oe===Le&&(h=me):te.isCustom===!0?(b=me.exec(_,M,D,Ge),b!==null?(h=b[0],b.payload!==void 0&&(m=b.payload)):h=null):(this.updateLastIndex(me,M),h=this.match(me,e,M)),h!==null){if(f=te.longerAlt,f!==void 0){const kt=f.length;for(l=0;l<kt;l++){const jt=de[f[l]],Ft=jt.pattern;if(g=null,jt.isCustom===!0?(b=Ft.exec(_,M,D,Ge),b!==null?(c=b[0],b.payload!==void 0&&(g=b.payload)):c=null):(this.updateLastIndex(Ft,M),c=this.match(Ft,e,M)),c&&c.length>h.length){h=c,m=g,te=jt;break}}}break}}if(h!==null){if(y=h.length,S=te.group,S!==void 0&&(x=te.tokenTypeIdx,A=this.createTokenInstance(h,M,x,te.tokenType,ke,ce,y),this.handlePayload(A,m),S===!1?z=this.addToken(D,z,A):Ge[S].push(A)),e=this.chopInput(e,y),M=M+y,ce=this.computeNewColumn(ce,y),tt===!0&&te.canLineTerminator===!0){let me=0,Le,kt;$e.lastIndex=0;do Le=$e.test(h),Le===!0&&(kt=$e.lastIndex-1,me++);while(Le===!0);me!==0&&(ke=ke+me,ce=y-kt,this.updateTokenEndLineColumnLocation(A,S,kt,me,ke,ce,y))}this.handleModes(te,F,fe,A)}else{const me=M,Le=ke,kt=ce;let jt=Se===!1;for(;jt===!1&&M<P;)for(e=this.chopInput(e,1),M++,a=0;a<Ue;a++){const Ft=de[a],cr=Ft.pattern,Ei=Ft.short;if(Ei!==!1?_.charCodeAt(M)===Ei&&(jt=!0):Ft.isCustom===!0?jt=cr.exec(_,M,D,Ge)!==null:(this.updateLastIndex(cr,M),jt=cr.exec(e)!==null),jt===!0)break}if(R=M-me,ce=this.computeNewColumn(ce,R),j=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,me,R,Le,kt,Nr(we)),G.push({offset:me,line:Le,column:kt,length:R,message:j}),Se===!1)break}}return this.hasCustom||(D.length=z),{tokens:D,groups:Ge,errors:G}}handleModes(e,t,s,a){if(e.pop===!0){const l=e.push;t(a),l!==void 0&&s.call(this,l)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,s,a,l,c,f){let h,m;t!==void 0&&(h=s===f-1,m=h?-1:0,a===1&&h===!0||(e.endLine=l+m,e.endColumn=c-1+-m))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,s,a){return{image:e,startOffset:t,tokenTypeIdx:s,tokenType:a}}createStartOnlyToken(e,t,s,a,l,c){return{image:e,startOffset:t,startLine:l,startColumn:c,tokenTypeIdx:s,tokenType:a}}createFullToken(e,t,s,a,l,c,f){return{image:e,startOffset:t,endOffset:t+f-1,startLine:l,endLine:l,startColumn:c,endColumn:c+f-1,tokenTypeIdx:s,tokenType:a}}addTokenUsingPush(e,t,s){return e.push(s),t}addTokenUsingMemberAccess(e,t,s){return e[t]=s,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,s){return e.test(t)===!0?t.substring(s,e.lastIndex):null}matchWithExec(e,t){const s=e.exec(t);return s!==null?s[0]:null}}dt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";dt.NA=/NOT_APPLICABLE/;function ys(r){return Rg(r)?r.LABEL:r.name}function Rg(r){return xt(r.LABEL)&&r.LABEL!==""}const f1="parent",rm="categories",im="label",sm="group",om="push_mode",am="pop_mode",lm="longer_alt",um="line_breaks",cm="start_chars_hint";function pe(r){return d1(r)}function d1(r){const e=r.pattern,t={};if(t.name=r.name,Ln(e)||(t.PATTERN=e),se(r,f1))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return se(r,rm)&&(t.CATEGORIES=r[rm]),Ls([t]),se(r,im)&&(t.LABEL=r[im]),se(r,sm)&&(t.GROUP=r[sm]),se(r,am)&&(t.POP_MODE=r[am]),se(r,om)&&(t.PUSH_MODE=r[om]),se(r,lm)&&(t.LONGER_ALT=r[lm]),se(r,um)&&(t.LINE_BREAKS=r[um]),se(r,cm)&&(t.START_CHARS_HINT=r[cm]),t}const Ir=pe({name:"EOF",pattern:dt.NA});Ls([Ir]);function Yc(r,e,t,s,a,l,c,f){return{image:e,startOffset:t,endOffset:s,startLine:a,endLine:l,startColumn:c,endColumn:f,tokenTypeIdx:r.tokenTypeIdx,tokenType:r}}function h1(r,e){return Ps(r,e)}const Ng={buildMismatchTokenMessage({expected:r,actual:e,previous:t,ruleName:s}){return`Expecting ${Rg(r)?`--> ${ys(r)} <--`:`token of type --> ${r.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:r,ruleName:e}){return"Redundant input, expecting EOF but found: "+r.image},buildNoViableAltMessage({expectedPathsPerAlt:r,actual:e,previous:t,customUserDescription:s,ruleName:a}){const l="Expecting: ",f=`
but found: '`+an(e).image+"'";if(s)return l+s+f;{const h=Mt(r,(S,x)=>S.concat(x),[]),m=ee(h,S=>`[${ee(S,x=>ys(x)).join(", ")}]`),y=`one of these possible Token sequences:
${ee(m,(S,x)=>`  ${x+1}. ${S}`).join(`
`)}`;return l+y+f}},buildEarlyExitMessage({expectedIterationPaths:r,actual:e,customUserDescription:t,ruleName:s}){const a="Expecting: ",c=`
but found: '`+an(e).image+"'";if(t)return a+t+c;{const h=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(r,m=>`[${ee(m,g=>ys(g)).join(",")}]`).join(" ,")}>`;return a+h+c}}};Object.freeze(Ng);const p1={buildRuleNotFoundError(r,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+r.name+"<-"}},kr={buildDuplicateFoundError(r,e){function t(g){return g instanceof Fe?g.terminalType.name:g instanceof bt?g.nonTerminalName:""}const s=r.name,a=an(e),l=a.idx,c=gn(a),f=t(a),h=l>0;let m=`->${c}${h?l:""}<- ${f?`with argument: ->${f}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return m=m.replace(/[ \t]+/g," "),m=m.replace(/\s\s+/g,`
`),m},buildNamespaceConflictError(r){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${r.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(r){const e=ee(r.prefixPath,a=>ys(a)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;return`Ambiguous alternatives: <${r.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(r){const e=ee(r.prefixPath,a=>ys(a)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;let s=`Ambiguous Alternatives Detected: <${r.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(r){let e=gn(r.repetition);return r.repetition.idx!==0&&(e+=r.repetition.idx),`The repetition <${e}> within Rule <${r.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(r){return"deprecated"},buildEmptyAlternationError(r){return`Ambiguous empty alternative: <${r.emptyChoiceIdx+1}> in <OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(r){return`An Alternation cannot have more than 256 alternatives:
<OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
 has ${r.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(r){const e=r.topLevelRule.name,t=ee(r.leftRecursionPath,l=>l.name),s=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(r){return"deprecated"},buildDuplicateRuleNameError(r){let e;return r.topLevelRule instanceof yi?e=r.topLevelRule.name:e=r.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${r.grammarName}<-`}};function m1(r,e){const t=new g1(r,e);return t.resolveRefs(),t.errors}class g1 extends Si{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ae(qe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class v1 extends ba{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=st(this.path.ruleStack).reverse(),this.occurrenceStack=st(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const a=t.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,a)}}updateExpectedNext(){Ne(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class y1 extends v1{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const a=t.concat(s),l=new wt({definition:a});this.possibleTokTypes=_s(l),this.found=!0}}}class Fa extends ba{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class S1 extends Fa{walkMany(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkMany(e,t,s)}}class fm extends Fa{walkManySep(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkManySep(e,t,s)}}class E1 extends Fa{walkAtLeastOne(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOne(e,t,s)}}class dm extends Fa{walkAtLeastOneSep(e,t,s){if(e.idx===this.occurrence){const a=an(t.concat(s));this.result.isEndOfRule=a===void 0,a instanceof Fe&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOneSep(e,t,s)}}function dc(r,e,t=[]){t=st(t);let s=[],a=0;function l(f){return f.concat(it(r,a+1))}function c(f){const h=dc(l(f),e,t);return s.concat(h)}for(;t.length<e&&a<r.length;){const f=r[a];if(f instanceof wt)return c(f.definition);if(f instanceof bt)return c(f.definition);if(f instanceof Tt)s=c(f.definition);else if(f instanceof xn){const h=f.definition.concat([new Qe({definition:f.definition})]);return c(h)}else if(f instanceof wn){const h=[new wt({definition:f.definition}),new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})];return c(h)}else if(f instanceof un){const h=f.definition.concat([new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})]);s=c(h)}else if(f instanceof Qe){const h=f.definition.concat([new Qe({definition:f.definition})]);s=c(h)}else{if(f instanceof cn)return ae(f.definition,h=>{Ne(h.definition)===!1&&(s=c(h.definition))}),s;if(f instanceof Fe)t.push(f.terminalType);else throw Error("non exhaustive match")}a++}return s.push({partialPath:t,suffixDef:it(r,a)}),s}function Og(r,e,t,s){const a="EXIT_NONE_TERMINAL",l=[a],c="EXIT_ALTERNATIVE";let f=!1;const h=e.length,m=h-s-1,g=[],y=[];for(y.push({idx:-1,def:r,ruleStack:[],occurrenceStack:[]});!Ne(y);){const S=y.pop();if(S===c){f&&Nr(y).idx<=m&&y.pop();continue}const x=S.def,A=S.idx,R=S.ruleStack,j=S.occurrenceStack;if(Ne(x))continue;const b=x[0];if(b===a){const _={idx:A,def:it(x),ruleStack:ks(R),occurrenceStack:ks(j)};y.push(_)}else if(b instanceof Fe)if(A<h-1){const _=A+1,P=e[_];if(t(P,b.terminalType)){const M={idx:_,def:it(x),ruleStack:R,occurrenceStack:j};y.push(M)}}else if(A===h-1)g.push({nextTokenType:b.terminalType,nextTokenOccurrence:b.idx,ruleStack:R,occurrenceStack:j}),f=!0;else throw Error("non exhaustive match");else if(b instanceof bt){const _=st(R);_.push(b.nonTerminalName);const P=st(j);P.push(b.idx);const M={idx:A,def:b.definition.concat(l,it(x)),ruleStack:_,occurrenceStack:P};y.push(M)}else if(b instanceof Tt){const _={idx:A,def:it(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P={idx:A,def:b.definition.concat(it(x)),ruleStack:R,occurrenceStack:j};y.push(P)}else if(b instanceof xn){const _=new Qe({definition:b.definition,idx:b.idx}),P=b.definition.concat([_],it(x)),M={idx:A,def:P,ruleStack:R,occurrenceStack:j};y.push(M)}else if(b instanceof wn){const _=new Fe({terminalType:b.separator}),P=new Qe({definition:[_].concat(b.definition),idx:b.idx}),M=b.definition.concat([P],it(x)),z={idx:A,def:M,ruleStack:R,occurrenceStack:j};y.push(z)}else if(b instanceof un){const _={idx:A,def:it(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Fe({terminalType:b.separator}),M=new Qe({definition:[P].concat(b.definition),idx:b.idx}),z=b.definition.concat([M],it(x)),L={idx:A,def:z,ruleStack:R,occurrenceStack:j};y.push(L)}else if(b instanceof Qe){const _={idx:A,def:it(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Qe({definition:b.definition,idx:b.idx}),M=b.definition.concat([P],it(x)),z={idx:A,def:M,ruleStack:R,occurrenceStack:j};y.push(z)}else if(b instanceof cn)for(let _=b.definition.length-1;_>=0;_--){const P=b.definition[_],M={idx:A,def:P.definition.concat(it(x)),ruleStack:R,occurrenceStack:j};y.push(M),y.push(c)}else if(b instanceof wt)y.push({idx:A,def:b.definition.concat(it(x)),ruleStack:R,occurrenceStack:j});else if(b instanceof yi)y.push(T1(b,A,R,j));else throw Error("non exhaustive match")}return g}function T1(r,e,t,s){const a=st(t);a.push(r.name);const l=st(s);return l.push(1),{idx:e,def:r.definition,ruleStack:a,occurrenceStack:l}}var Be;(function(r){r[r.OPTION=0]="OPTION",r[r.REPETITION=1]="REPETITION",r[r.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",r[r.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",r[r.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",r[r.ALTERNATION=5]="ALTERNATION"})(Be||(Be={}));function Ig(r){if(r instanceof Tt||r==="Option")return Be.OPTION;if(r instanceof Qe||r==="Repetition")return Be.REPETITION;if(r instanceof xn||r==="RepetitionMandatory")return Be.REPETITION_MANDATORY;if(r instanceof wn||r==="RepetitionMandatoryWithSeparator")return Be.REPETITION_MANDATORY_WITH_SEPARATOR;if(r instanceof un||r==="RepetitionWithSeparator")return Be.REPETITION_WITH_SEPARATOR;if(r instanceof cn||r==="Alternation")return Be.ALTERNATION;throw Error("non exhaustive match")}function x1(r,e,t,s,a,l){const c=Xc(r,e,t),f=Lg(c)?va:Ps;return l(c,s,f,a)}function w1(r,e,t,s,a,l){const c=qc(r,e,a,t),f=Lg(c)?va:Ps;return l(c[0],f,s)}function k1(r,e,t,s){const a=r.length,l=sn(r,c=>sn(c,f=>f.length===1));if(e)return function(c){const f=ee(c,h=>h.GATE);for(let h=0;h<a;h++){const m=r[h],g=m.length,y=f[h];if(!(y!==void 0&&y.call(this)===!1))e:for(let S=0;S<g;S++){const x=m[S],A=x.length;for(let R=0;R<A;R++){const j=this.LA(R+1);if(t(j,x[R])===!1)continue e}return h}}};if(l&&!s){const c=ee(r,h=>rn(h)),f=Mt(c,(h,m,g)=>(ae(m,y=>{se(h,y.tokenTypeIdx)||(h[y.tokenTypeIdx]=g),ae(y.categoryMatches,S=>{se(h,S)||(h[S]=g)})}),h),{});return function(){const h=this.LA(1);return f[h.tokenTypeIdx]}}else return function(){for(let c=0;c<a;c++){const f=r[c],h=f.length;e:for(let m=0;m<h;m++){const g=f[m],y=g.length;for(let S=0;S<y;S++){const x=this.LA(S+1);if(t(x,g[S])===!1)continue e}return c}}}}function A1(r,e,t){const s=sn(r,l=>l.length===1),a=r.length;if(s&&!t){const l=rn(r);if(l.length===1&&Ne(l[0].categoryMatches)){const f=l[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===f}}else{const c=Mt(l,(f,h,m)=>(f[h.tokenTypeIdx]=!0,ae(h.categoryMatches,g=>{f[g]=!0}),f),[]);return function(){const f=this.LA(1);return c[f.tokenTypeIdx]===!0}}}else return function(){e:for(let l=0;l<a;l++){const c=r[l],f=c.length;for(let h=0;h<f;h++){const m=this.LA(h+1);if(e(m,c[h])===!1)continue e}return!0}return!1}}class C1 extends ba{constructor(e,t,s){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,s,a){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=s.concat(a),!0):!1}walkOption(e,t,s){this.checkIsTarget(e,Be.OPTION,t,s)||super.walkOption(e,t,s)}walkAtLeastOne(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY,t,s)||super.walkOption(e,t,s)}walkAtLeastOneSep(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}walkMany(e,t,s){this.checkIsTarget(e,Be.REPETITION,t,s)||super.walkOption(e,t,s)}walkManySep(e,t,s){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}}class _g extends Si{constructor(e,t,s){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=s,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Be.OPTION)}visitRepetition(e){this.checkIsTarget(e,Be.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Be.ALTERNATION)}}function hm(r){const e=new Array(r);for(let t=0;t<r;t++)e[t]=[];return e}function Ju(r){let e=[""];for(let t=0;t<r.length;t++){const s=r[t],a=[];for(let l=0;l<e.length;l++){const c=e[l];a.push(c+"_"+s.tokenTypeIdx);for(let f=0;f<s.categoryMatches.length;f++){const h="_"+s.categoryMatches[f];a.push(c+h)}}e=a}return e}function R1(r,e,t){for(let s=0;s<r.length;s++){if(s===t)continue;const a=r[s];for(let l=0;l<e.length;l++){const c=e[l];if(a[c]===!0)return!1}}return!0}function Pg(r,e){const t=ee(r,c=>dc([c],1)),s=hm(t.length),a=ee(t,c=>{const f={};return ae(c,h=>{const m=Ju(h.partialPath);ae(m,g=>{f[g]=!0})}),f});let l=t;for(let c=1;c<=e;c++){const f=l;l=hm(f.length);for(let h=0;h<f.length;h++){const m=f[h];for(let g=0;g<m.length;g++){const y=m[g].partialPath,S=m[g].suffixDef,x=Ju(y);if(R1(a,x,h)||Ne(S)||y.length===e){const R=s[h];if(hc(R,y)===!1){R.push(y);for(let j=0;j<x.length;j++){const b=x[j];a[h][b]=!0}}}else{const R=dc(S,c+1,y);l[h]=l[h].concat(R),ae(R,j=>{const b=Ju(j.partialPath);ae(b,_=>{a[h][_]=!0})})}}}}return s}function Xc(r,e,t,s){const a=new _g(r,Be.ALTERNATION,s);return e.accept(a),Pg(a.result,t)}function qc(r,e,t,s){const a=new _g(r,t);e.accept(a);const l=a.result,f=new C1(e,r,t).startWalking(),h=new wt({definition:l}),m=new wt({definition:f});return Pg([h,m],s)}function hc(r,e){e:for(let t=0;t<r.length;t++){const s=r[t];if(s.length===e.length){for(let a=0;a<s.length;a++){const l=e[a],c=s[a];if((l===c||c.categoryMatchesMap[l.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function N1(r,e){return r.length<e.length&&sn(r,(t,s)=>{const a=e[s];return t===a||a.categoryMatchesMap[t.tokenTypeIdx]})}function Lg(r){return sn(r,e=>sn(e,t=>sn(t,s=>Ne(s.categoryMatches))))}function O1(r){const e=r.lookaheadStrategy.validate({rules:r.rules,tokenTypes:r.tokenTypes,grammarName:r.grammarName});return ee(e,t=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},t))}function I1(r,e,t,s){const a=Gt(r,h=>_1(h,t)),l=V1(r,e,t),c=Gt(r,h=>U1(h,t)),f=Gt(r,h=>M1(h,r,s,t));return a.concat(l,c,f)}function _1(r,e){const t=new L1;r.accept(t);const s=t.allProductions,a=VA(s,P1),l=ln(a,f=>f.length>1);return ee(qe(l),f=>{const h=an(f),m=e.buildDuplicateFoundError(r,f),g=gn(h),y={message:m,type:ht.DUPLICATE_PRODUCTIONS,ruleName:r.name,dslName:g,occurrence:h.idx},S=Mg(h);return S&&(y.parameter=S),y})}function P1(r){return`${gn(r)}_#_${r.idx}_#_${Mg(r)}`}function Mg(r){return r instanceof Fe?r.terminalType.name:r instanceof bt?r.nonTerminalName:""}class L1 extends Si{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function M1(r,e,t,s){const a=[];if(Mt(e,(c,f)=>f.name===r.name?c+1:c,0)>1){const c=s.buildDuplicateRuleNameError({topLevelRule:r,grammarName:t});a.push({message:c,type:ht.DUPLICATE_RULE_NAME,ruleName:r.name})}return a}function b1(r,e,t){const s=[];let a;return pt(e,r)||(a=`Invalid rule override, rule: ->${r}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,s.push({message:a,type:ht.INVALID_RULE_OVERRIDE,ruleName:r})),s}function bg(r,e,t,s=[]){const a=[],l=ra(e.definition);if(Ne(l))return[];{const c=r.name;pt(l,r)&&a.push({message:t.buildLeftRecursionError({topLevelRule:r,leftRecursionPath:s}),type:ht.LEFT_RECURSION,ruleName:c});const h=La(l,s.concat([r])),m=Gt(h,g=>{const y=st(s);return y.push(g),bg(r,g,t,y)});return a.concat(m)}}function ra(r){let e=[];if(Ne(r))return e;const t=an(r);if(t instanceof bt)e.push(t.referencedRule);else if(t instanceof wt||t instanceof Tt||t instanceof xn||t instanceof wn||t instanceof un||t instanceof Qe)e=e.concat(ra(t.definition));else if(t instanceof cn)e=rn(ee(t.definition,l=>ra(l.definition)));else if(!(t instanceof Fe))throw Error("non exhaustive match");const s=ha(t),a=r.length>1;if(s&&a){const l=it(r);return e.concat(ra(l))}else return e}class Qc extends Si{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function j1(r,e){const t=new Qc;r.accept(t);const s=t.alternations;return Gt(s,l=>{const c=ks(l.definition);return Gt(c,(f,h)=>{const m=Og([f],[],Ps,1);return Ne(m)?[{message:e.buildEmptyAlternationError({topLevelRule:r,alternation:l,emptyChoiceIdx:h}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:r.name,occurrence:l.idx,alternative:h+1}]:[]})})}function F1(r,e,t){const s=new Qc;r.accept(s);let a=s.alternations;return a=Ma(a,c=>c.ignoreAmbiguities===!0),Gt(a,c=>{const f=c.idx,h=c.maxLookahead||e,m=Xc(f,r,h,c),g=B1(m,c,r,t),y=z1(m,c,r,t);return g.concat(y)})}class $1 extends Si{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function U1(r,e){const t=new Qc;r.accept(t);const s=t.alternations;return Gt(s,l=>l.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:r,alternation:l}),type:ht.TOO_MANY_ALTS,ruleName:r.name,occurrence:l.idx}]:[])}function D1(r,e,t){const s=[];return ae(r,a=>{const l=new $1;a.accept(l);const c=l.allProductions;ae(c,f=>{const h=Ig(f),m=f.maxLookahead||e,g=f.idx,S=qc(g,a,h,m)[0];if(Ne(rn(S))){const x=t.buildEmptyRepetitionError({topLevelRule:a,repetition:f});s.push({message:x,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:a.name})}})}),s}function B1(r,e,t,s){const a=[],l=Mt(r,(f,h,m)=>(e.definition[m].ignoreAmbiguities===!0||ae(h,g=>{const y=[m];ae(r,(S,x)=>{m!==x&&hc(S,g)&&e.definition[x].ignoreAmbiguities!==!0&&y.push(x)}),y.length>1&&!hc(a,g)&&(a.push(g),f.push({alts:y,path:g}))}),f),[]);return ee(l,f=>{const h=ee(f.alts,g=>g+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:ht.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:f.alts}})}function z1(r,e,t,s){const a=Mt(r,(c,f,h)=>{const m=ee(f,g=>({idx:h,path:g}));return c.concat(m)},[]);return Is(Gt(a,c=>{if(e.definition[c.idx].ignoreAmbiguities===!0)return[];const h=c.idx,m=c.path,g=Xt(a,S=>e.definition[S.idx].ignoreAmbiguities!==!0&&S.idx<h&&N1(S.path,m));return ee(g,S=>{const x=[S.idx+1,h+1],A=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:x,prefixPath:S.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:A,alternatives:x}})}))}function V1(r,e,t){const s=[],a=ee(e,l=>l.name);return ae(r,l=>{const c=l.name;if(pt(a,c)){const f=t.buildNamespaceConflictError(l);s.push({message:f,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:c})}}),s}function W1(r){const e=Wc(r,{errMsgProvider:p1}),t={};return ae(r.rules,s=>{t[s.name]=s}),m1(t,e.errMsgProvider)}function G1(r){return r=Wc(r,{errMsgProvider:kr}),I1(r.rules,r.tokenTypes,r.errMsgProvider,r.grammarName)}const jg="MismatchedTokenException",Fg="NoViableAltException",$g="EarlyExitException",Ug="NotAllInputParsedException",Dg=[jg,Fg,$g,Ug];Object.freeze(Dg);function ya(r){return pt(Dg,r.name)}class $a extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Bg extends $a{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=jg}}class K1 extends $a{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Fg}}class H1 extends $a{constructor(e,t){super(e,t),this.name=Ug}}class Y1 extends $a{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=$g}}const ec={},zg="InRuleRecoveryException";class X1 extends Error{constructor(e){super(e),this.name=zg}}class q1{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=se(e,"recoveryEnabled")?e.recoveryEnabled:Mn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Q1)}getTokenToInsert(e){const t=Yc(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,s,a){const l=this.findReSyncTokenType(),c=this.exportLexerState(),f=[];let h=!1;const m=this.LA(1);let g=this.LA(1);const y=()=>{const S=this.LA(0),x=this.errorMessageProvider.buildMismatchTokenMessage({expected:a,actual:m,previous:S,ruleName:this.getCurrRuleFullName()}),A=new Bg(x,m,this.LA(0));A.resyncedTokens=ks(f),this.SAVE_ERROR(A)};for(;!h;)if(this.tokenMatcher(g,a)){y();return}else if(s.call(this)){y(),e.apply(this,t);return}else this.tokenMatcher(g,l)?h=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,f));this.importLexerState(c)}shouldInRepetitionRecoveryBeTried(e,t,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const s=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new X1("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ne(t))return!1;const s=this.LA(1);return vi(t,l=>this.tokenMatcher(s,l))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(t);return pt(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),s=2;for(;;){const a=vi(e,l=>h1(t,l));if(a!==void 0)return a;t=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return ec;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return ee(e,(s,a)=>a===0?ec:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:t[a],inRule:this.shortRuleNameToFullName(e[a-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return rn(e)}getFollowSetFromFollowKey(e){if(e===ec)return[Ir];const t=e.ruleName+e.idxInCallingRule+yg+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Ir)||t.push(e),t}reSyncTo(e){const t=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,t);return ks(t)}attemptInRepetitionRecovery(e,t,s,a,l,c,f){}getCurrentGrammarPath(e,t){const s=this.getHumanReadableRuleStack(),a=st(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:a,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Q1(r,e,t,s,a,l,c){const f=this.getKeyForAutomaticLookahead(s,a);let h=this.firstAfterRepMap[f];if(h===void 0){const S=this.getCurrRuleFullName(),x=this.getGAstProductions()[S];h=new l(x,a).startWalking(),this.firstAfterRepMap[f]=h}let m=h.token,g=h.occurrence;const y=h.isEndOfRule;this.RULE_STACK.length===1&&y&&m===void 0&&(m=Ir,g=1),!(m===void 0||g===void 0)&&this.shouldInRepetitionRecoveryBeTried(m,g,c)&&this.tryInRepetitionRecovery(r,e,t,m)}const Z1=4,ur=8,Vg=1<<ur,Wg=2<<ur,pc=3<<ur,mc=4<<ur,gc=5<<ur,ia=6<<ur;function tc(r,e,t){return t|e|r}class J1{constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:Mn.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(Ne(t)){const s=this.validateEmptyOrAlternatives(e.rules),a=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),l=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...s,...a,...l]}return t}validateNoLeftRecursion(e){return Gt(e,t=>bg(t,t,kr))}validateEmptyOrAlternatives(e){return Gt(e,t=>j1(t,kr))}validateAmbiguousAlternationAlternatives(e,t){return Gt(e,s=>F1(s,t,kr))}validateSomeNonEmptyLookaheadPath(e,t){return D1(e,t,kr)}buildLookaheadForAlternation(e){return x1(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,k1)}buildLookaheadForOptional(e){return w1(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ig(e.prodType),A1)}}class eR{initLooksAhead(e){this.dynamicTokensEnabled=se(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Mn.dynamicTokensEnabled,this.maxLookahead=se(e,"maxLookahead")?e.maxLookahead:Mn.maxLookahead,this.lookaheadStrategy=se(e,"lookaheadStrategy")?e.lookaheadStrategy:new J1({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:s,repetition:a,option:l,repetitionMandatory:c,repetitionMandatoryWithSeparator:f,repetitionWithSeparator:h}=nR(t);ae(s,m=>{const g=m.idx===0?"":m.idx;this.TRACE_INIT(`${gn(m)}${g}`,()=>{const y=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:m.idx,rule:t,maxLookahead:m.maxLookahead||this.maxLookahead,hasPredicates:m.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),S=tc(this.fullRuleNameToShort[t.name],Vg,m.idx);this.setLaFuncCache(S,y)})}),ae(a,m=>{this.computeLookaheadFunc(t,m.idx,pc,"Repetition",m.maxLookahead,gn(m))}),ae(l,m=>{this.computeLookaheadFunc(t,m.idx,Wg,"Option",m.maxLookahead,gn(m))}),ae(c,m=>{this.computeLookaheadFunc(t,m.idx,mc,"RepetitionMandatory",m.maxLookahead,gn(m))}),ae(f,m=>{this.computeLookaheadFunc(t,m.idx,ia,"RepetitionMandatoryWithSeparator",m.maxLookahead,gn(m))}),ae(h,m=>{this.computeLookaheadFunc(t,m.idx,gc,"RepetitionWithSeparator",m.maxLookahead,gn(m))})})})}computeLookaheadFunc(e,t,s,a,l,c){this.TRACE_INIT(`${c}${t===0?"":t}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:l||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:a}),h=tc(this.fullRuleNameToShort[e.name],s,t);this.setLaFuncCache(h,f)})}getKeyForAutomaticLookahead(e,t){const s=this.getLastExplicitRuleShortName();return tc(s,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class tR extends Si{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Qo=new tR;function nR(r){Qo.reset(),r.accept(Qo);const e=Qo.dslMethods;return Qo.reset(),e}function pm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.endOffset=e.endOffset):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset)}function mm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.startColumn=e.startColumn,r.startLine=e.startLine,r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine)}function rR(r,e,t){r.children[t]===void 0?r.children[t]=[e]:r.children[t].push(e)}function iR(r,e,t){r.children[e]===void 0?r.children[e]=[t]:r.children[e].push(t)}const sR="name";function Gg(r,e){Object.defineProperty(r,sR,{enumerable:!1,configurable:!0,writable:!1,value:e})}function oR(r,e){const t=Yt(r),s=t.length;for(let a=0;a<s;a++){const l=t[a],c=r[l],f=c.length;for(let h=0;h<f;h++){const m=c[h];m.tokenTypeIdx===void 0&&this[m.name](m.children,e)}}}function aR(r,e){const t=function(){};Gg(t,r+"BaseSemantics");const s={visit:function(a,l){if(Te(a)&&(a=a[0]),!Ln(a))return this[a.name](a.children,l)},validateVisitor:function(){const a=uR(this,e);if(!Ne(a)){const l=ee(a,c=>c.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${l.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=s,t.prototype.constructor=t,t._RULE_NAMES=e,t}function lR(r,e,t){const s=function(){};Gg(s,r+"BaseSemanticsWithDefaults");const a=Object.create(t.prototype);return ae(e,l=>{a[l]=oR}),s.prototype=a,s.prototype.constructor=s,s}var vc;(function(r){r[r.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",r[r.MISSING_METHOD=1]="MISSING_METHOD"})(vc||(vc={}));function uR(r,e){return cR(r,e)}function cR(r,e){const t=Xt(e,a=>bn(r[a])===!1),s=ee(t,a=>({msg:`Missing visitor method: <${a}> on ${r.constructor.name} CST Visitor.`,type:vc.MISSING_METHOD,methodName:a}));return Is(s)}class fR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=se(e,"nodeLocationTracking")?e.nodeLocationTracking:Mn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Xe,this.cstFinallyStateUpdate=Xe,this.cstPostTerminal=Xe,this.cstPostNonTerminal=Xe,this.cstPostRule=Xe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=mm,this.setNodeLocationFromNode=mm,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=pm,this.setNodeLocationFromNode=pm,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=Xe,this.setInitialNodeLocation=Xe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?(s.endOffset=t.endOffset,s.endLine=t.endLine,s.endColumn=t.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?s.endOffset=t.endOffset:s.startOffset=NaN}cstPostTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];rR(s,t,e),this.setNodeLocationFromToken(s.location,t)}cstPostNonTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];iR(s,t,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(Ln(this.baseCstVisitorConstructor)){const e=aR(this.className,Yt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ln(this.baseCstVisitorWithDefaultsConstructor)){const e=lR(this.className,Yt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class dR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Ea}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?Ea:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class hR{ACTION(e){return e.call(this)}consume(e,t,s){return this.consumeInternal(t,e,s)}subrule(e,t,s){return this.subruleInternal(t,e,s)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,s=Ta){if(pt(this.definedRulesNames,e)){const c={message:kr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(c)}this.definedRulesNames.push(e);const a=this.defineRule(e,t,s);return this[e]=a,a}OVERRIDE_RULE(e,t,s=Ta){const a=b1(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(a);const l=this.defineRule(e,t,s);return this[e]=l,l}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,t),!0}catch(a){if(ya(a))return!1;throw a}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return pC(qe(this.gastProductionsCache))}}class pR{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=va,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},se(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Te(e)){if(Ne(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Te(e))this.tokensMap=Mt(e,(l,c)=>(l[c.name]=c,l),{});else if(se(e,"modes")&&sn(rn(qe(e.modes)),u1)){const l=rn(qe(e.modes)),c=Gc(l);this.tokensMap=Mt(c,(f,h)=>(f[h.name]=h,f),{})}else if(Ht(e))this.tokensMap=st(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ir;const s=se(e,"modes")?rn(qe(e.modes)):qe(e),a=sn(s,l=>Ne(l.categoryMatches));this.tokenMatcher=a?va:Ps,Ls(qe(this.tokensMap))}defineRule(e,t,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const a=se(s,"resyncEnabled")?s.resyncEnabled:Ta.resyncEnabled,l=se(s,"recoveryValueFunc")?s.recoveryValueFunc:Ta.recoveryValueFunc,c=this.ruleShortNameIdx<<Z1+ur;this.ruleShortNameIdx++,this.shortRuleNameToFull[c]=e,this.fullRuleNameToShort[e]=c;let f;return this.outputCst===!0?f=function(...g){try{this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g);const y=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(y),y}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}}:f=function(...g){try{return this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g)}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}},Object.assign(f,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,s){const a=this.RULE_STACK.length===1,l=t&&!this.isBackTracking()&&this.recoveryEnabled;if(ya(e)){const c=e;if(l){const f=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(f))if(c.resyncedTokens=this.reSyncTo(f),this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];return h.recoveredNode=!0,h}else return s(e);else{if(this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];h.recoveredNode=!0,c.partialCstResult=h}throw c}}else{if(a)return this.moveToTerminatedState(),s(e);throw c}}else throw e}optionInternal(e,t){const s=this.getKeyForAutomaticLookahead(Wg,t);return this.optionInternalLogic(e,t,s)}optionInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof e!="function"){l=e.DEF;const c=e.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=e;if(a.call(this)===!0)return l.call(this)}atLeastOneInternal(e,t){const s=this.getKeyForAutomaticLookahead(mc,e);return this.atLeastOneInternalLogic(e,t,s)}atLeastOneInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const c=t.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=t;if(a.call(this)===!0){let c=this.doSingleRepetition(l);for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],a,mc,e,E1)}atLeastOneSepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(ia,e);this.atLeastOneSepFirstInternalLogic(e,t,s)}atLeastOneSepFirstInternalLogic(e,t,s){const a=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,dm],f,ia,e,dm)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const s=this.getKeyForAutomaticLookahead(pc,e);return this.manyInternalLogic(e,t,s)}manyInternalLogic(e,t,s){let a=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const f=t.GATE;if(f!==void 0){const h=a;a=()=>f.call(this)&&h.call(this)}}else l=t;let c=!0;for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],a,pc,e,S1,c)}manySepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(gc,e);this.manySepFirstInternalLogic(e,t,s)}manySepFirstInternalLogic(e,t,s){const a=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,fm],f,gc,e,fm)}}repetitionSepSecondInternal(e,t,s,a,l){for(;s();)this.CONSUME(t),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,s,a,l],s,ia,e,l)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const s=this.getKeyForAutomaticLookahead(Vg,t),a=Te(e)?e:e.DEF,c=this.getLaFuncFromCache(s).call(this,a);if(c!==void 0)return a[c].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new H1(t,e))}}subruleInternal(e,t,s){let a;try{const l=s!==void 0?s.ARGS:void 0;return this.subruleIdx=t,a=e.apply(this,l),this.cstPostNonTerminal(a,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),a}catch(l){throw this.subruleInternalError(l,s,e.ruleName)}}subruleInternalError(e,t,s){throw ya(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,t,s){let a;try{const l=this.LA(1);this.tokenMatcher(l,e)===!0?(this.consumeToken(),a=l):this.consumeInternalError(e,l,s)}catch(l){a=this.consumeInternalRecovery(e,t,l)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,a),a}consumeInternalError(e,t,s){let a;const l=this.LA(0);throw s!==void 0&&s.ERR_MSG?a=s.ERR_MSG:a=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:l,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Bg(a,t,l))}consumeInternalRecovery(e,t,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const a=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,a)}catch(l){throw l.name===zg?s:l}}else throw s}saveRecogState(){const e=this.errors,t=st(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Ir)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class mR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=se(e,"errorMessageProvider")?e.errorMessageProvider:Mn.errorMessageProvider}SAVE_ERROR(e){if(ya(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:st(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return st(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,s){const a=this.getCurrRuleFullName(),l=this.getGAstProductions()[a],f=qc(e,l,t,this.maxLookahead)[0],h=[];for(let g=1;g<=this.maxLookahead;g++)h.push(this.LA(g));const m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:h,previous:this.LA(0),customUserDescription:s,ruleName:a});throw this.SAVE_ERROR(new Y1(m,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const s=this.getCurrRuleFullName(),a=this.getGAstProductions()[s],l=Xc(e,a,this.maxLookahead),c=[];for(let m=1;m<=this.maxLookahead;m++)c.push(this.LA(m));const f=this.LA(0),h=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:l,actual:c,previous:f,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new K1(h,this.LA(1),f))}}class gR{initContentAssist(){}computeContentAssist(e,t){const s=this.gastProductionsCache[e];if(Ln(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Og([s],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=an(e.ruleStack),a=this.getGAstProductions()[t];return new y1(a,e).startWalking()}}const Ua={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ua);const gm=!0,vm=Math.pow(2,ur)-1,Kg=pe({name:"RECORDING_PHASE_TOKEN",pattern:dt.NA});Ls([Kg]);const Hg=Yc(Kg,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Hg);const vR={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class yR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(s,a){return this.consumeInternalRecord(s,e,a)},this[`SUBRULE${t}`]=function(s,a){return this.subruleInternalRecord(s,e,a)},this[`OPTION${t}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${t}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${t}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${t}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${t}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${t}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,t,s){return this.consumeInternalRecord(t,e,s)},this.subrule=function(e,t,s){return this.subruleInternalRecord(t,e,s)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const s=t>0?t:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return Ea}topLevelRuleRecord(e,t){try{const s=new yi({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),t.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,t){return us.call(this,Tt,e,t)}atLeastOneInternalRecord(e,t){us.call(this,xn,t,e)}atLeastOneSepFirstInternalRecord(e,t){us.call(this,wn,t,e,gm)}manyInternalRecord(e,t){us.call(this,Qe,t,e)}manySepFirstInternalRecord(e,t){us.call(this,un,t,e,gm)}orInternalRecord(e,t){return SR.call(this,e,t)}subruleInternalRecord(e,t,s){if(Sa(t),!e||se(e,"ruleName")===!1){const f=new Error(`<SUBRULE${ym(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw f.KNOWN_RECORDER_ERROR=!0,f}const a=Nr(this.recordingProdStack),l=e.ruleName,c=new bt({idx:t,nonTerminalName:l,label:s?.LABEL,referencedRule:void 0});return a.definition.push(c),this.outputCst?vR:Ua}consumeInternalRecord(e,t,s){if(Sa(t),!Cg(e)){const c=new Error(`<CONSUME${ym(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const a=Nr(this.recordingProdStack),l=new Fe({idx:t,terminalType:e,label:s?.LABEL});return a.definition.push(l),Hg}}function us(r,e,t,s=!1){Sa(t);const a=Nr(this.recordingProdStack),l=bn(e)?e:e.DEF,c=new r({definition:[],idx:t});return s&&(c.separator=e.SEP),se(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(c),l.call(this),a.definition.push(c),this.recordingProdStack.pop(),Ua}function SR(r,e){Sa(e);const t=Nr(this.recordingProdStack),s=Te(r)===!1,a=s===!1?r:r.DEF,l=new cn({definition:[],idx:e,ignoreAmbiguities:s&&r.IGNORE_AMBIGUITIES===!0});se(r,"MAX_LOOKAHEAD")&&(l.maxLookahead=r.MAX_LOOKAHEAD);const c=pg(a,f=>bn(f.GATE));return l.hasPredicates=c,t.definition.push(l),ae(a,f=>{const h=new wt({definition:[]});l.definition.push(h),se(f,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=f.IGNORE_AMBIGUITIES:se(f,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),f.ALT.call(this),this.recordingProdStack.pop()}),Ua}function ym(r){return r===0?"":`${r}`}function Sa(r){if(r<0||r>vm){const e=new Error(`Invalid DSL Method idx value: <${r}>
	Idx value must be a none negative value smaller than ${vm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class ER{initPerformanceTracer(e){if(se(e,"traceInitPerf")){const t=e.traceInitPerf,s=typeof t=="number";this.traceInitMaxIdent=s?t:1/0,this.traceInitPerf=s?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=Mn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:a,value:l}=gg(t),c=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${e}> time: ${a}ms`),this.traceInitIndent--,l}else return t()}}function TR(r,e){e.forEach(t=>{const s=t.prototype;Object.getOwnPropertyNames(s).forEach(a=>{if(a==="constructor")return;const l=Object.getOwnPropertyDescriptor(s,a);l&&(l.get||l.set)?Object.defineProperty(r.prototype,a,l):r.prototype[a]=t.prototype[a]})})}const Ea=Yc(Ir,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Ea);const Mn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Ng,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ta=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ht;(function(r){r[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",r[r.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));class Ms{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{vg(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,a=>{const c=this[a].originalGrammarAction;let f;this.TRACE_INIT(`${a} Rule`,()=>{f=this.topLevelRuleRecord(a,c)}),this.gastProductionsCache[a]=f})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=W1({rules:qe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ne(s)&&this.skipValidations===!1){const a=G1({rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),errMsgProvider:kr,grammarName:t}),l=O1({lookaheadStrategy:this.lookaheadStrategy,rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(a,l)}}),Ne(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const a=TC(qe(this.gastProductionsCache));this.resyncFollows=a}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var a,l;(l=(a=this.lookaheadStrategy).initialize)===null||l===void 0||l.call(a,{rules:qe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(qe(this.gastProductionsCache))})),!Ms.DEFER_DEFINITION_ERRORS_HANDLING&&!Ne(this.definitionErrors))throw e=ee(this.definitionErrors,a=>a.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(t),s.initLexerAdapter(),s.initLooksAhead(t),s.initRecognizerEngine(e,t),s.initRecoverable(t),s.initTreeBuilder(t),s.initContentAssist(),s.initGastRecorder(t),s.initPerformanceTracer(t),se(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=se(t,"skipValidations")?t.skipValidations:Mn.skipValidations}}Ms.DEFER_DEFINITION_ERRORS_HANDLING=!1;TR(Ms,[q1,eR,fR,dR,pR,hR,mR,gR,yR,ER]);class xR extends Ms{constructor(e,t=Mn){const s=st(t);s.outputCst=!0,super(e,s)}}const wR=pe({name:"WhiteSpace",pattern:/[ \t\r\n]+/,group:dt.SKIPPED}),kR=pe({name:"LineComment",pattern:/#[^\n\r]*/,group:dt.SKIPPED}),yc=pe({name:"TextBlock",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),Yg=pe({name:"PathReference",pattern:/@[a-zA-Z_][a-zA-Z0-9_-]*\/[a-zA-Z0-9_/-]*(?:@\d+\.\d+\.\d+)?/}),Xg=pe({name:"RelativePath",pattern:/\.\/[a-zA-Z0-9_/-]+|\.\.\/[a-zA-Z0-9_/-]+/}),je=pe({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),qg=pe({name:"Meta",pattern:/meta/,longer_alt:je}),Qg=pe({name:"Inherit",pattern:/inherit/,longer_alt:je}),Zg=pe({name:"Use",pattern:/use/,longer_alt:je}),Jg=pe({name:"As",pattern:/as/,longer_alt:je}),ev=pe({name:"Extend",pattern:/extend/,longer_alt:je}),tv=pe({name:"True",pattern:/true/,longer_alt:je}),nv=pe({name:"False",pattern:/false/,longer_alt:je}),rv=pe({name:"Null",pattern:/null/,longer_alt:je}),iv=pe({name:"Range",pattern:/range/,longer_alt:je}),sv=pe({name:"Enum",pattern:/enum/,longer_alt:je}),Sc=pe({name:"StringType",pattern:/string/,longer_alt:je}),Ec=pe({name:"NumberType",pattern:/number/,longer_alt:je}),Tc=pe({name:"BooleanType",pattern:/boolean/,longer_alt:je}),ov=pe({name:"TemplateOpen",pattern:/\{\{/}),av=pe({name:"TemplateClose",pattern:/\}\}/}),oi=pe({name:"At",pattern:/@/}),ai=pe({name:"LBrace",pattern:/\{/}),li=pe({name:"RBrace",pattern:/\}/}),lv=pe({name:"LBracket",pattern:/\[/}),uv=pe({name:"RBracket",pattern:/\]/}),sa=pe({name:"LParen",pattern:/\(/}),oa=pe({name:"RParen",pattern:/\)/}),aa=pe({name:"Colon",pattern:/:/}),ui=pe({name:"Comma",pattern:/,/}),xc=pe({name:"Equals",pattern:/=/}),wc=pe({name:"Question",pattern:/\?/}),cv=pe({name:"DotDot",pattern:/\.\./}),fv=pe({name:"Dot",pattern:/\./}),dv=pe({name:"Dash",pattern:/-(?!\d)/}),ci=pe({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),la=pe({name:"NumberLiteral",pattern:/-?\d+(?:\.\d+)?/}),hv=[wR,kR,yc,Yg,Xg,ov,av,cv,qg,Qg,Zg,Jg,ev,tv,nv,rv,iv,sv,Sc,Ec,Tc,oi,ai,li,lv,uv,sa,oa,aa,ui,xc,wc,fv,dv,ci,la,je],AR=new dt(hv,{ensureOptimizations:!0,positionTracking:"full"});class CR extends xR{constructor(){super(hv,{recoveryEnabled:!0,maxLookahead:3,nodeLocationTracking:"full"}),this.performSelfAnalysis()}program=this.RULE("program",()=>{this.OPTION(()=>this.SUBRULE(this.metaBlock)),this.OPTION2(()=>this.SUBRULE(this.inheritDecl)),this.MANY(()=>this.SUBRULE(this.useDecl)),this.MANY2(()=>this.OR([{ALT:()=>this.SUBRULE(this.extendBlock)},{ALT:()=>this.SUBRULE(this.block)}]))});metaBlock=this.RULE("metaBlock",()=>{this.CONSUME(oi),this.CONSUME(qg),this.CONSUME(ai),this.MANY(()=>this.SUBRULE(this.field)),this.CONSUME(li)});inheritDecl=this.RULE("inheritDecl",()=>{this.CONSUME(oi),this.CONSUME(Qg),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList))});useDecl=this.RULE("useDecl",()=>{this.CONSUME(oi),this.CONSUME(Zg),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList)),this.OPTION2(()=>{this.CONSUME(Jg),this.CONSUME(je)})});block=this.RULE("block",()=>{this.CONSUME(oi),this.CONSUME(je),this.CONSUME(ai),this.SUBRULE(this.blockContent),this.CONSUME(li)});extendBlock=this.RULE("extendBlock",()=>{this.CONSUME(oi),this.CONSUME(ev),this.SUBRULE(this.dotPath),this.CONSUME(ai),this.SUBRULE(this.blockContent),this.CONSUME(li)});blockContent=this.RULE("blockContent",()=>{this.MANY(()=>this.OR([{ALT:()=>this.CONSUME(yc)},{ALT:()=>this.SUBRULE(this.restrictionItem)},{ALT:()=>this.SUBRULE(this.field)}]))});restrictionItem=this.RULE("restrictionItem",()=>{this.CONSUME(dv),this.CONSUME(ci)});field=this.RULE("field",()=>{this.OR([{ALT:()=>this.CONSUME(je)},{ALT:()=>this.CONSUME(ci)},{ALT:()=>this.CONSUME(Sc)},{ALT:()=>this.CONSUME(Ec)},{ALT:()=>this.CONSUME(Tc)}]),this.OPTION(()=>this.CONSUME(wc)),this.CONSUME(aa),this.SUBRULE(this.value),this.OPTION2(()=>{this.CONSUME(xc),this.SUBRULE2(this.value)})});value=this.RULE("value",()=>{this.OR([{ALT:()=>this.CONSUME(ci)},{ALT:()=>this.CONSUME(la)},{ALT:()=>this.CONSUME(tv)},{ALT:()=>this.CONSUME(nv)},{ALT:()=>this.CONSUME(rv)},{ALT:()=>this.CONSUME(yc)},{ALT:()=>this.SUBRULE(this.array)},{ALT:()=>this.SUBRULE(this.paramDefList),GATE:()=>this.isParamDefListAhead()},{ALT:()=>this.SUBRULE(this.object)},{ALT:()=>this.SUBRULE(this.typeExpr)},{ALT:()=>this.SUBRULE(this.templateExpr)},{ALT:()=>this.CONSUME(je)}])});isParamDefListAhead(){const e=this.LA(1);if(!e||e.tokenType?.name!=="LBrace")return!1;const t=this.LA(2);if(!t||t.tokenType?.name!=="Identifier")return!1;const s=this.LA(3);if(!s)return!1;if(s.tokenType?.name==="Colon"){const a=this.LA(4);return a?["StringType","NumberType","BooleanType","Enum"].includes(a.tokenType?.name??""):!1}if(s.tokenType?.name==="Question"){const a=this.LA(4);if(!a||a.tokenType?.name!=="Colon")return!1;const l=this.LA(5);return l?["StringType","NumberType","BooleanType","Enum"].includes(l.tokenType?.name??""):!1}return!1}array=this.RULE("array",()=>{this.CONSUME(lv),this.OPTION(()=>{this.SUBRULE(this.value),this.MANY(()=>{this.CONSUME(ui),this.OPTION2(()=>this.SUBRULE2(this.value))})}),this.CONSUME(uv)});object=this.RULE("object",()=>{this.CONSUME(ai),this.MANY(()=>{this.SUBRULE(this.field),this.OPTION(()=>this.CONSUME(ui))}),this.CONSUME(li)});typeExpr=this.RULE("typeExpr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.rangeType)},{ALT:()=>this.SUBRULE(this.enumType)}])});rangeType=this.RULE("rangeType",()=>{this.CONSUME(iv),this.CONSUME(sa),this.CONSUME(la),this.CONSUME(cv),this.CONSUME2(la),this.CONSUME(oa)});enumType=this.RULE("enumType",()=>{this.CONSUME(sv),this.CONSUME(sa),this.CONSUME(ci),this.MANY(()=>{this.CONSUME(ui),this.CONSUME2(ci)}),this.CONSUME(oa)});pathRef=this.RULE("pathRef",()=>{this.OR([{ALT:()=>this.CONSUME(Yg)},{ALT:()=>this.CONSUME(Xg)}])});dotPath=this.RULE("dotPath",()=>{this.CONSUME(je),this.MANY(()=>{this.CONSUME(fv),this.CONSUME2(je)})});paramCallList=this.RULE("paramCallList",()=>{this.CONSUME(sa),this.OPTION(()=>{this.SUBRULE(this.paramArg),this.MANY(()=>{this.CONSUME(ui),this.SUBRULE2(this.paramArg)})}),this.CONSUME(oa)});paramArg=this.RULE("paramArg",()=>{this.CONSUME(je),this.CONSUME(aa),this.SUBRULE(this.value)});paramDefList=this.RULE("paramDefList",()=>{this.CONSUME(ai),this.MANY(()=>{this.SUBRULE(this.paramDef),this.OPTION(()=>this.CONSUME(ui))}),this.CONSUME(li)});paramDef=this.RULE("paramDef",()=>{this.CONSUME(je),this.OPTION(()=>this.CONSUME(wc)),this.CONSUME(aa),this.SUBRULE(this.paramType),this.OPTION2(()=>{this.CONSUME(xc),this.SUBRULE(this.value)})});paramType=this.RULE("paramType",()=>{this.OR([{ALT:()=>this.CONSUME(Sc)},{ALT:()=>this.CONSUME(Ec)},{ALT:()=>this.CONSUME(Tc)},{ALT:()=>this.SUBRULE(this.enumType)}])});templateExpr=this.RULE("templateExpr",()=>{this.CONSUME(ov),this.CONSUME(je),this.CONSUME(av)})}const ua=new CR;var RR={};const NR=ua.getBaseCstVisitorConstructor(),Sm=r=>RR[r];class OR extends NR{filename="<unknown>";interpolateEnv=!1;envProvider=Sm;constructor(){super(),this.validateVisitor()}setFilename(e){this.filename=e}setInterpolateEnv(e){this.interpolateEnv=e}setEnvProvider(e){this.envProvider=e}resetEnvProvider(){this.envProvider=Sm}loc(e){return{file:this.filename,line:e.startLine,column:e.startColumn,offset:e.startOffset}}program(e,t="<unknown>"){this.filename=t;const s={type:"Program",uses:[],blocks:[],extends:[],loc:{file:this.filename,line:1,column:1}};return e.metaBlock&&(s.meta=this.visit(e.metaBlock[0])),e.inheritDecl&&(s.inherit=this.visit(e.inheritDecl[0])),e.useDecl&&(s.uses=e.useDecl.map(a=>this.visit(a))),e.block&&(s.blocks=e.block.map(a=>this.visit(a))),e.extendBlock&&(s.extends=e.extendBlock.map(a=>this.visit(a))),s}metaBlock(e){const t={};let s;if(e.field)for(const l of e.field){const{name:c,value:f,isParamsDef:h,paramsDefs:m}=this.visit(l);h&&m?s=m:t[c]=f}const a={type:"MetaBlock",fields:t,loc:this.loc(e.At[0])};return s&&(a.params=s),a}inheritDecl(e){const t={type:"InheritDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),t}useDecl(e){const t={type:"UseDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),e.Identifier&&(t.alias=e.Identifier[0].image),t}block(e){const t=e.Identifier[0].image,s=this.visit(e.blockContent[0]);return{type:"Block",name:t,content:s,loc:this.loc(e.At[0])}}extendBlock(e){const t=this.visit(e.dotPath[0]),s=this.visit(e.blockContent[0]);return{type:"ExtendBlock",targetPath:t,content:s,loc:this.loc(e.At[0])}}blockContent(e){const t=e.TextBlock?.length>0,s=e.field?.length>0;if(e.restrictionItem?.length>0)return this.buildRestrictionContent(e);const l=t?this.buildTextContent(e.TextBlock[0]):void 0,c=s?this.buildProperties(e.field):{};return this.resolveBlockContent(l,c,t,s)}buildRestrictionContent(e){const t=[];for(const s of e.restrictionItem)t.push(this.visit(s));return{type:"ObjectContent",properties:{items:t},loc:{file:this.filename,line:1,column:1}}}buildTextContent(e){let s=e.image.slice(3,-3).trim();return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),{type:"TextContent",value:s,loc:this.loc(e)}}buildProperties(e){const t={};for(const s of e){const{name:a,value:l}=this.visit(s);t[a]=l}return t}resolveBlockContent(e,t,s,a){return s&&!a?e:!s&&a?{type:"ObjectContent",properties:t,loc:{file:this.filename,line:1,column:1}}:s&&a?{type:"MixedContent",text:e,properties:t,loc:{file:this.filename,line:1,column:1}}:{type:"ObjectContent",properties:{},loc:{file:this.filename,line:1,column:1}}}restrictionItem(e){const t=e.StringLiteral[0];return this.parseStringLiteral(t.image)}field(e){let t;if(e.Identifier)t=e.Identifier[0].image;else if(e.StringLiteral)t=this.parseStringLiteral(e.StringLiteral[0].image);else if(e.StringType)t="string";else if(e.NumberType)t="number";else if(e.BooleanType)t="boolean";else throw new Error("Unknown field key type");const s=e.Question?!0:void 0,a=e.value,l=this.visit(a[0]),c=a.length>1?this.visit(a[1]):void 0;return t==="params"&&Array.isArray(l)&&l.length>0&&l[0]?.type==="ParamDefinition"?{name:t,value:{},isParamsDef:!0,paramsDefs:l}:{name:t,value:l,optional:s,defaultValue:c}}value(e){if(e.StringLiteral)return this.parseStringLiteral(e.StringLiteral[0].image);if(e.NumberLiteral)return parseFloat(e.NumberLiteral[0].image);if(e.True)return!0;if(e.False)return!1;if(e.Null)return null;if(e.TextBlock){const t=e.TextBlock[0];let a=t.image.slice(3,-3).trim();return this.interpolateEnv&&(a=this.interpolateEnvVars(a)),{type:"TextContent",value:a,loc:this.loc(t)}}if(e.array)return this.visit(e.array[0]);if(e.paramDefList)return this.visit(e.paramDefList[0]);if(e.object)return this.visit(e.object[0]);if(e.typeExpr)return this.visit(e.typeExpr[0]);if(e.templateExpr)return this.visit(e.templateExpr[0]);if(e.Identifier)return e.Identifier[0].image;throw new Error("Unknown value type")}array(e){return e.value?e.value.map(t=>this.visit(t)):[]}object(e){const t={};if(e.field)for(const s of e.field){const{name:a,value:l}=this.visit(s);t[a]=l}return t}typeExpr(e){return e.rangeType?this.visit(e.rangeType[0]):this.visit(e.enumType[0])}rangeType(e){const[t,s]=e.NumberLiteral,a=parseFloat(t.image),l=parseFloat(s.image);return{type:"TypeExpression",kind:"range",constraints:{min:a,max:l},loc:this.loc(e.Range[0])}}enumType(e){return{type:"TypeExpression",kind:"enum",constraints:{options:e.StringLiteral.map(s=>this.parseStringLiteral(s.image))},loc:this.loc(e.Enum[0])}}pathRef(e){return e.PathReference?this.parsePathReference(e.PathReference[0]):this.parseRelativePath(e.RelativePath[0])}dotPath(e){return e.Identifier.map(t=>t.image).join(".")}paramCallList(e){return e.paramArg?e.paramArg.map(t=>this.visit(t)):[]}paramArg(e){return{type:"ParamArgument",name:e.Identifier[0].image,value:this.visit(e.value[0]),loc:this.loc(e.Identifier[0])}}paramDefList(e){return e.paramDef?e.paramDef.map(t=>this.visit(t)):[]}paramDef(e){const t=e.Identifier[0].image,s=e.Question!==void 0,a=this.visit(e.paramType[0]),l=e.value?this.visit(e.value[0]):void 0;return{type:"ParamDefinition",name:t,paramType:a,optional:s||l!==void 0,defaultValue:l,loc:this.loc(e.Identifier[0])}}paramType(e){if(e.StringType)return{kind:"string"};if(e.NumberType)return{kind:"number"};if(e.BooleanType)return{kind:"boolean"};if(e.enumType)return{kind:"enum",options:this.visit(e.enumType[0]).constraints?.options??[]};throw new Error("Unknown param type")}templateExpr(e){return{type:"TemplateExpression",name:e.Identifier[0].image,loc:this.loc(e.TemplateOpen[0])}}parseStringLiteral(e){let s=e.slice(1,-1).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),s}interpolateEnvVars(e){const t=/\$\{([A-Za-z_]\w*)(?::-([^}]*))?\}/g;return e.replace(t,(s,a,l)=>{const c=this.envProvider(a);return c!==void 0?c:l!==void 0?l:(console.warn(`Warning: Environment variable '${a}' is not set, using empty string`),"")})}parsePathReference(e){const t=e.image,s=t.slice(1);let a,l=s;const c=s.match(/@(\d+\.\d+\.\d+)$/);c&&(a=c[1],l=s.slice(0,-c[0].length));const f=l.split("/"),h=f[0];return{type:"PathReference",raw:t,namespace:h,segments:f.slice(1),version:a,isRelative:!1,loc:this.loc(e)}}parseRelativePath(e){const t=e.image,s=t.split("/").filter(a=>a!=="."&&a!=="..");return{type:"PathReference",raw:t,segments:s,isRelative:!0,loc:this.loc(e)}}}const Zo=new OR,pv={name:"xml",description:"XML-style tags for section structure",section:{start:"<{{name}}>",end:"</{{name}}>",nameTransform:"kebab-case",indent:"  "},subsection:{start:"  <{{name}}>",end:"  </{{name}}>",nameTransform:"kebab-case",indent:"  "},listStyle:"dash",codeBlockDelimiter:"```"},IR={name:"markdown",description:"Markdown headers for section structure",section:{start:"## {{name}}",end:"",nameTransform:"none",indent:""},subsection:{start:"### {{name}}",end:"",nameTransform:"none",indent:""},listStyle:"dash",codeBlockDelimiter:"```"},Zc={xml:pv,markdown:IR};function _R(r){return r in Zc}const mv={proseWrap:"preserve",tabWidth:2,printWidth:80};var Da=(r=>(r.PARSE_ERROR="PS1000",r.UNEXPECTED_TOKEN="PS1001",r.UNTERMINATED_STRING="PS1002",r.INVALID_PATH="PS1003",r.RESOLVE_ERROR="PS2000",r.FILE_NOT_FOUND="PS2001",r.CIRCULAR_DEPENDENCY="PS2002",r.INVALID_INHERIT="PS2003",r.GIT_CLONE_ERROR="PS2004",r.GIT_AUTH_ERROR="PS2005",r.GIT_REF_NOT_FOUND="PS2006",r.MISSING_PARAM="PS2010",r.UNKNOWN_PARAM="PS2011",r.PARAM_TYPE_MISMATCH="PS2012",r.UNDEFINED_VARIABLE="PS2013",r.VALIDATION_ERROR="PS3000",r.REQUIRED_FIELD="PS3001",r.INVALID_VALUE="PS3002",r.BLOCKED_PATTERN="PS3003",r.MISSING_GUARD="PS3004",r))(Da||{});class gv extends Error{code;location;cause;constructor(e,t,s){super(e),this.name="PSError",this.code=t,this.location=s?.location,this.cause=s?.cause,Error.captureStackTrace?.(this,this.constructor)}format(){let e=`${this.name} [${this.code}]: ${this.message}`;return this.location&&(e+=`
  at ${this.location.file}:${this.location.line}:${this.location.column}`),e}toJSON(){return{name:this.name,code:this.code,message:this.message,location:this.location}}}class nc extends gv{constructor(e,t,s=Da.PARSE_ERROR){super(e,s,{location:t}),this.name="ParseError"}}class fi extends gv{constructor(e,t,s=Da.RESOLVE_ERROR){super(e,s,{location:t}),this.name="ResolveError"}}class rc extends fi{chain;constructor(e){super(`Circular dependency detected: ${e.join("  ")}`,void 0,Da.CIRCULAR_DEPENDENCY),this.name="CircularDependencyError",this.chain=e}}const PR={arrayStrategy:"unique",textStrategy:"concat",textSeparator:`

`};function rr(r,e,t={}){const s={...PR,...t},a={...r};for(const l of Object.keys(e)){const c=e[l];c!==void 0&&(a[l]=LR(r[l],c,s))}return a}function LR(r,e,t){return e===null?null:Array.isArray(e)?MR(Array.isArray(r)?r:[],e,t.arrayStrategy):Ss(e)?jR(Ss(r)?r:void 0,e,t):Em(e)&&Em(r)?rr(r,e,t):e}function MR(r,e,t){switch(t){case"replace":return[...e];case"concat":return[...r,...e];case"unique":return bR([...r,...e])}}function bR(r){const e=new Set,t=[];for(const s of r){const a=typeof s=="object"?JSON.stringify(s):String(s);e.has(a)||(e.add(a),t.push(s))}return t}function jR(r,e,t){if(!r)return e;switch(t.textStrategy){case"replace":return e;case"concat":return{...e,value:`${r.value}${t.textSeparator}${e.value}`};case"prepend":return{...e,value:`${e.value}${t.textSeparator}${r.value}`}}}function Ss(r){return typeof r=="object"&&r!==null&&"type"in r&&r.type==="TextContent"}function Em(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.getPrototypeOf(r)===Object.prototype}function Ot(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(Ot);const e={};for(const[t,s]of Object.entries(r))e[t]=Ot(s);return e}var ic,Tm;function FR(){if(Tm)return ic;Tm=1;function r(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function e(a,l){for(var c="",f=0,h=-1,m=0,g,y=0;y<=a.length;++y){if(y<a.length)g=a.charCodeAt(y);else{if(g===47)break;g=47}if(g===47){if(!(h===y-1||m===1))if(h!==y-1&&m===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var S=c.lastIndexOf("/");if(S!==c.length-1){S===-1?(c="",f=0):(c=c.slice(0,S),f=c.length-1-c.lastIndexOf("/")),h=y,m=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=y,m=0;continue}}l&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+a.slice(h+1,y):c=a.slice(h+1,y),f=y-h-1;h=y,m=0}else g===46&&m!==-1?++m:m=-1}return c}function t(a,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+a+f:f}var s={resolve:function(){for(var l="",c=!1,f,h=arguments.length-1;h>=-1&&!c;h--){var m;h>=0?m=arguments[h]:(f===void 0&&(f=process.cwd()),m=f),r(m),m.length!==0&&(l=m+"/"+l,c=m.charCodeAt(0)===47)}return l=e(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(l){if(r(l),l.length===0)return".";var c=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return l=e(l,!c),l.length===0&&!c&&(l="."),l.length>0&&f&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var f=arguments[c];r(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":s.normalize(l)},relative:function(l,c){if(r(l),r(c),l===c||(l=s.resolve(l),c=s.resolve(c),l===c))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var h=l.length,m=h-f,g=1;g<c.length&&c.charCodeAt(g)===47;++g);for(var y=c.length,S=y-g,x=m<S?m:S,A=-1,R=0;R<=x;++R){if(R===x){if(S>x){if(c.charCodeAt(g+R)===47)return c.slice(g+R+1);if(R===0)return c.slice(g+R)}else m>x&&(l.charCodeAt(f+R)===47?A=R:R===0&&(A=0));break}var j=l.charCodeAt(f+R),b=c.charCodeAt(g+R);if(j!==b)break;j===47&&(A=R)}var _="";for(R=f+A+1;R<=h;++R)(R===h||l.charCodeAt(R)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(g+A):(g+=A,c.charCodeAt(g)===47&&++g,c.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var c=l.charCodeAt(0),f=c===47,h=-1,m=!0,g=l.length-1;g>=1;--g)if(c=l.charCodeAt(g),c===47){if(!m){h=g;break}}else m=!1;return h===-1?f?"/":".":f&&h===1?"//":l.slice(0,h)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');r(l);var f=0,h=-1,m=!0,g;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var y=c.length-1,S=-1;for(g=l.length-1;g>=0;--g){var x=l.charCodeAt(g);if(x===47){if(!m){f=g+1;break}}else S===-1&&(m=!1,S=g+1),y>=0&&(x===c.charCodeAt(y)?--y===-1&&(h=g):(y=-1,h=S))}return f===h?h=S:h===-1&&(h=l.length),l.slice(f,h)}else{for(g=l.length-1;g>=0;--g)if(l.charCodeAt(g)===47){if(!m){f=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":l.slice(f,h)}},extname:function(l){r(l);for(var c=-1,f=0,h=-1,m=!0,g=0,y=l.length-1;y>=0;--y){var S=l.charCodeAt(y);if(S===47){if(!m){f=y+1;break}continue}h===-1&&(m=!1,h=y+1),S===46?c===-1?c=y:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===f+1?"":l.slice(c,h)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return t("/",l)},parse:function(l){r(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var f=l.charCodeAt(0),h=f===47,m;h?(c.root="/",m=1):m=0;for(var g=-1,y=0,S=-1,x=!0,A=l.length-1,R=0;A>=m;--A){if(f=l.charCodeAt(A),f===47){if(!x){y=A+1;break}continue}S===-1&&(x=!1,S=A+1),f===46?g===-1?g=A:R!==1&&(R=1):g!==-1&&(R=-1)}return g===-1||S===-1||R===0||R===1&&g===S-1&&g===y+1?S!==-1&&(y===0&&h?c.base=c.name=l.slice(1,S):c.base=c.name=l.slice(y,S)):(y===0&&h?(c.name=l.slice(1,g),c.base=l.slice(1,S)):(c.name=l.slice(y,g),c.base=l.slice(y,S)),c.ext=l.slice(g,S)),y>0?c.dir=l.slice(0,y-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,ic=s,ic}FR();const Jc={verbose:()=>{},debug:()=>{}};function $R(r,e={}){const{filename:t="<unknown>",tolerant:s=!1,recovery:a=!1,interpolateEnv:l=!1,envProvider:c}=e,f=s||a,h=[],m=AR.tokenize(r);for(const y of m.errors)h.push(new nc(`Lexer: ${y.message}`,{file:t,line:y.line,column:y.column}));if(h.length>0&&!f)return{ast:null,errors:h};ua.input=m.tokens;const g=ua.program();for(const y of ua.errors)h.push(new nc(y.message,{file:t,line:y.token.startLine,column:y.token.startColumn}));if(h.length>0&&!f)return{ast:null,errors:h};try{return Zo.setInterpolateEnv(l),c?Zo.setEnvProvider(c):Zo.resetEnvProvider(),{ast:Zo.visit(g,t),errors:h}}catch(y){return h.push(new nc(`AST transformation: ${y.message}`,{file:t,line:1,column:1})),{ast:null,errors:h}}}const cs="__import__";class UR{fs;cache;resolving;cacheEnabled;logger;envVars;constructor(e){this.fs=e.fs,this.cache=new Map,this.resolving=new Set,this.cacheEnabled=e.cache!==!1,this.logger=e.logger??Jc,this.envVars=e.envVars}async resolve(e){const t=this.normalizePath(e);if(this.resolving.has(t))throw this.logger.debug(`Circular dependency detected: ${t}`),new rc([...this.resolving,t]);if(this.cacheEnabled&&this.cache.has(t))return this.logger.debug(`Cache hit: ${t}`),this.cache.get(t);this.resolving.add(t),this.logger.verbose(`Parsing ${t}`);try{const s=await this.doResolve(t);return this.cacheEnabled&&(this.logger.debug(`Cache store: ${t}`),this.cache.set(t,s)),s}finally{this.resolving.delete(t)}}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith(".prs")||(t=`${t}.prs`),t}resolveRef(e,t){if(e.isRelative){const s=this.dirname(t);return this.normalizePath(this.joinPath(s,e.raw))}if(e.raw.startsWith("@")){const s=e.raw.match(/^@([a-zA-Z_][a-zA-Z0-9_-]*)\/(.+?)(?:@[\d.]+)?$/);if(s&&s[1]&&s[2]){const a=s[1],l=s[2],c=l.endsWith(".prs")?l:`${l}.prs`;return`@${a}/${c}`}}return this.normalizePath(e.raw)}dirname(e){const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}joinPath(...e){const t=[];for(const s of e){if(!s)continue;const a=s.split("/");for(const l of a)l===".."?t.pop():l!=="."&&l!==""&&t.push(l)}return t.join("/")}async doResolve(e){const t=[e],s=[],a=this.loadAndParse(e,t,s);if(!a.ast)return{ast:null,sources:t,errors:s};let l=a.ast;return l=await this.resolveInherit(l,e,t,s),l=await this.resolveImports(l,e,t,s),l.extends.length>0&&this.logger.debug(`Applying ${l.extends.length} extension(s)`),l=this.applyExtends(l),this.logger.debug(`Resolved ${t.length} source file(s)`),{ast:l,sources:[...new Set(t)],errors:s}}loadAndParse(e,t,s){let a;try{a=this.fs.read(e)}catch{return s.push(new fi(`File not found: ${e}`)),{ast:null}}const l={filename:e};this.envVars&&Object.keys(this.envVars).length>0&&(l.interpolateEnv=!0,l.envProvider=f=>this.envVars?.[f]);const c=$R(a,l);if(!c.ast){for(const f of c.errors)s.push(new fi(f.message,f.location));return{ast:null}}for(const f of c.errors)s.push(new fi(f.message,f.location));return{ast:c.ast}}async resolveInherit(e,t,s,a){if(!e.inherit)return e;const l=this.resolveRef(e.inherit.path,t);this.logger.verbose(`Resolving inherit: ${e.inherit.path.raw}`),this.logger.verbose(`   ${l}`);try{const c=await this.resolve(l);if(s.push(...c.sources),a.push(...c.errors),c.ast)return this.logger.debug("Merging with parent AST"),this.resolveInheritance(c.ast,e)}catch(c){if(c instanceof rc)throw c;a.push(new fi(`Failed to resolve parent: ${c.message}`))}return e}async resolveImports(e,t,s,a){let l=e;for(const c of e.uses){const f=this.resolveRef(c.path,t);this.logger.verbose(`Resolving import: ${c.path.raw}`),this.logger.verbose(`   ${f}`);try{const h=await this.resolve(f);s.push(...h.sources),a.push(...h.errors),h.ast&&(this.logger.debug(`Merging import${c.alias?` as "${c.alias}"`:""}`),l=this.resolveUses(l,c,h.ast))}catch(h){if(h instanceof rc)throw h;a.push(new fi(`Failed to resolve import: ${h.message}`))}}return l}clearCache(){this.cache.clear()}resolveInheritance(e,t){return{...t,meta:e.meta&&t.meta?{...t.meta,fields:rr(e.meta.fields,t.meta.fields)}:t.meta??e.meta,blocks:this.mergeBlocks(e.blocks,t.blocks),inherit:void 0,uses:t.uses,extends:t.extends}}mergeBlocks(e,t){const s=new Map(t.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=s.get(c.name);f?(a.push(this.mergeBlock(c,f)),l.add(c.name)):a.push(Ot(c))}for(const c of t)l.has(c.name)||a.push(Ot(c));return a}mergeBlock(e,t){return{...t,content:this.mergeBlockContent(e.content,t.content)}}mergeBlockContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return this.mergeTextContent(e,t);case"ObjectContent":return this.mergeObjectContent(e,t);case"ArrayContent":return this.mergeArrayContent(e,t);case"MixedContent":return this.mergeMixedContent(e,t)}return e.type==="MixedContent"&&t.type==="TextContent"?{...e,text:e.text?this.mergeTextContent(e.text,t):Ot(t)}:e.type==="TextContent"&&t.type==="MixedContent"?{...t,text:t.text?this.mergeTextContent(e,t.text):Ot(e)}:e.type==="MixedContent"&&t.type==="ObjectContent"?{...e,properties:rr(e.properties,t.properties)}:e.type==="ObjectContent"&&t.type==="MixedContent"?{...t,properties:rr(e.properties,t.properties)}:Ot(t)}mergeTextContent(e,t){const s=e.value.trim(),a=t.value.trim();return s===a?{...t,value:a}:a.includes(s)?{...t,value:a}:s.includes(a)?{...t,value:s}:{...t,value:`${s}

${a}`}}mergeObjectContent(e,t){return{...t,properties:this.mergeProperties(e.properties,t.properties)}}mergeProperties(e,t){const s={...e};for(const[a,l]of Object.entries(t)){const c=s[a];c===void 0?s[a]=this.deepCloneValue(l):Array.isArray(l)&&Array.isArray(c)?s[a]=this.uniqueConcat(c,l):Ss(l)&&Ss(c)?s[a]=this.deepCloneValue(l):this.isPlainObject(l)&&this.isPlainObject(c)?s[a]=this.mergeProperties(c,l):s[a]=this.deepCloneValue(l)}return s}mergeArrayContent(e,t){return{...t,elements:this.uniqueConcat(e.elements,t.elements)}}mergeMixedContent(e,t){return{...t,text:e.text&&t.text?this.mergeTextContent(e.text,t.text):t.text??e.text,properties:this.mergeProperties(e.properties,t.properties)}}resolveUses(e,t,s){const a=this.mergeBlocksForImport(e.blocks,s.blocks),l=[];if(t.alias){const c=t.alias,h={type:"Block",name:`${cs}${c}`,content:{type:"ObjectContent",properties:{__source:t.path.raw,__blocks:s.blocks.map(m=>m.name)},loc:t.loc},loc:t.loc};l.push(h);for(const m of s.blocks)l.push({...m,name:`${cs}${c}.${m.name}`})}return{...e,blocks:[...a,...l]}}mergeBlocksForImport(e,t){const s=new Map(e.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=t.find(h=>h.name===c.name);f?(a.push(this.mergeBlock(f,c)),l.add(c.name)):a.push(Ot(c))}for(const c of t)!l.has(c.name)&&!s.has(c.name)&&a.push(Ot(c));return a}applyExtends(e){let t=[...e.blocks];for(const s of e.extends)t=this.applyExtend(t,s);return t=t.filter(s=>!s.name.startsWith(cs)),{...e,blocks:t,extends:[]}}applyExtend(e,t){const s=t.targetPath.split("."),a=s[0];let l=a,c=s.slice(1);e.find(y=>y.name===`${cs}${a}`)&&s.length>1&&(l=`${cs}${a}.${s[1]}`,c=s.slice(2));const h=e.findIndex(y=>y.name===l);if(h===-1)return e;const m=e[h];if(!m)return e;const g=this.mergeExtension(m,c,t);return[...e.slice(0,h),g,...e.slice(h+1)]}mergeExtension(e,t,s){return t.length===0?{...e,content:this.mergeExtendContent(e.content,s.content)}:{...e,content:this.mergeAtPath(e.content,t,s.content)}}mergeAtPath(e,t,s){if(t.length===0)return this.mergeExtendContent(e,s);const a=t[0];if(!a)return this.mergeExtendContent(e,s);const l=t.slice(1);if(e.type==="ObjectContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}if(e.type==="MixedContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}return e}mergeAtPathValue(e,t,s){if(t.length===0)return this.mergeExtendValue(e,s);if(typeof e!="object"||e===null||Array.isArray(e))return this.buildPathValue(t,s);const a=t[0];if(!a)return this.mergeExtendValue(e,s);const l=t.slice(1),c=e,f=c[a];return l.length===0?{...c,[a]:this.mergeExtendValue(f,s)}:f&&typeof f=="object"&&!Array.isArray(f)?{...c,[a]:this.mergeAtPathValue(f,l,s)}:{...c,[a]:this.buildPathValue(l,s)}}buildPathValue(e,t){if(e.length===0)return this.extractValue(t);const s={};let a=s;for(let c=0;c<e.length-1;c++){const f=e[c];if(f){const h={};a[f]=h,a=h}}const l=e[e.length-1];return l&&(a[l]=this.extractValue(t)),s}extractValue(e){switch(e.type){case"TextContent":return e.value;case"ObjectContent":return Ot(e.properties);case"ArrayContent":return Ot(e.elements);case"MixedContent":return Ot(e.properties)}}mergeExtendValue(e,t){return e===void 0?this.extractValue(t):Array.isArray(e)&&t.type==="ArrayContent"?this.uniqueConcat(e,t.elements):typeof e=="object"&&e!==null&&!Array.isArray(e)&&t.type==="ObjectContent"?rr(e,t.properties):Ss(e)&&t.type==="TextContent"?{...t,value:`${e.value}

${t.value}`}:this.extractValue(t)}mergeExtendContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return{...t,value:`${e.value}

${t.value}`};case"ObjectContent":return{...t,properties:rr(e.properties,t.properties)};case"ArrayContent":return{...t,elements:this.uniqueConcat(e.elements,t.elements)};case"MixedContent":{const s=e,a=s.text&&t.text?{...t.text,value:`${s.text.value}

${t.text.value}`}:t.text??s.text;return{...t,text:a,properties:rr(s.properties,t.properties)}}}if(e.type==="ObjectContent"&&t.type==="TextContent")return{type:"MixedContent",text:t,properties:e.properties,loc:t.loc};if(e.type==="TextContent"&&t.type==="ObjectContent")return{type:"MixedContent",text:e,properties:t.properties,loc:t.loc};if(e.type==="MixedContent"&&t.type==="TextContent"){const s=e;return{...s,text:s.text?{...t,value:`${s.text.value}

${t.value}`}:t}}if(e.type==="MixedContent"&&t.type==="ObjectContent"){const s=e;return{...s,properties:rr(s.properties,t.properties)}}return Ot(t)}uniqueConcat(e,t){const s=new Set,a=[];for(const l of[...e,...t]){const c=typeof l=="object"&&l!==null?JSON.stringify(l):String(l);s.has(c)||(s.add(c),a.push(this.deepCloneValue(l)))}return a}isPlainObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}deepCloneValue(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>this.deepCloneValue(s));const t={};for(const[s,a]of Object.entries(e))t[s]=this.deepCloneValue(a);return t}}class kc{convention;prettierOptions;constructor(e="xml"){let t,s;if(typeof e=="object"&&("convention"in e||"prettier"in e)){const a=e;t=a.convention??"xml",s=a.prettier}else t=e;if(typeof t=="string")if(_R(t))this.convention=Zc[t];else throw new Error(`Unknown convention: ${t}. Use a built-in convention ('xml', 'markdown') or provide a custom OutputConvention.`);else this.convention=t;this.prettierOptions={...mv,...s}}getPrettierOptions(){return this.prettierOptions}getConvention(){return this.convention}renderSection(e,t,s=1){const a=s===1?this.convention.section:this.convention.subsection??this.convention.section,l=this.transformName(e,a.nameTransform),c=this.applyTemplate(a.start,{name:l,level:s}),f=a.end?this.applyTemplate(a.end,{name:l,level:s}):"";let h=t.trim();if(!h)return f?`${c}
${f}`:c;this.convention.name==="markdown"&&(h=this.escapeMarkdownSpecialChars(h));const m=this.indentContent(h,a,s);return f?`${c}
${m}
${f}`:this.convention.name==="markdown"?`${c}

${m}`:`${c}
${m}`}renderList(e){const t=this.getListMarker();return e.map(s=>`${t} ${s}`).join(`
`)}renderCodeBlock(e,t=""){const s=this.convention.codeBlockDelimiter??"```";return`${s}${t}
${e}
${s}`}wrapRoot(e){return this.convention.rootWrapper?`${this.convention.rootWrapper.start}
${e}
${this.convention.rootWrapper.end}`:e}getSectionSeparator(){return this.convention.name==="markdown",`

`}getListMarker(){switch(this.convention.listStyle){case"asterisk":return"*";case"bullet":return"";case"numbered":return"1.";default:return"-"}}transformName(e,t){switch(t){case"kebab-case":return this.toKebabCase(e);case"camelCase":return this.toCamelCase(e);case"PascalCase":return this.toPascalCase(e);default:return e}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}toCamelCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toLowerCase())}toPascalCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toUpperCase())}applyTemplate(e,t){let s=e;s=s.replace(/\{\{name\}\}/g,t.name),s=s.replace(/\{\{level\}\}/g,String(t.level));const l=/\{\{#repeat\s+(\w+)\}\}(.+?)\{\{\/repeat\}\}/.exec(s);if(l){const c=l[1],f=l[2],h=c==="level"?t.level:1,m=f.repeat(h);s=s.replace(l[0],m)}return s}escapeMarkdownSpecialChars(e){return e.split(`
`).map(t=>{let s=t.replace(/__/g,"\\_\\_");return s=this.escapeGlobAsteriskOutsideBackticks(s),s}).join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}indentContent(e,t,s){if(!(t.indent??""))return e;if(this.convention.name==="xml"){const c=" ".repeat(this.prettierOptions.tabWidth).repeat(s);return e.split(`
`).map(f=>f.trim()?`${c}${f}`:f).join(`
`)}return e}}new kc(pv),new kc(Zc.markdown);const DR=["git","config","documentation","diagrams"],xm={typescript:"TypeScript",naming:"Naming Conventions",errors:"Error Handling",testing:"Testing",security:"Security",performance:"Performance",accessibility:"Accessibility",documentation:"Documentation"};function BR(r){return r in xm?xm[r]:r.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function zR(r){return r==="errors"?"error-handling":r}class VR{options;constructor(e={}){this.options={supportLegacyFormat:e.supportLegacyFormat??!0,supportObjectFormat:e.supportObjectFormat??!0}}extract(e){const t=this.getProps(e),s=new Map,a=this.extractGit(t),l=this.extractConfig(t),c=this.extractDocumentation(t),f=this.extractDiagrams(t);let h=!1;if(this.options.supportLegacyFormat){const m=t.code;if(m&&typeof m=="object"&&!Array.isArray(m)){const g=m;if("style"in g||"patterns"in g){const y=[];this.addArrayItems(y,g.style),this.addArrayItems(y,g.patterns),y.length>0&&(s.set("code",{key:"code",sectionName:"code",title:"Code Style",items:y,rawValue:m}),h=!0)}}}for(const[m,g]of Object.entries(t)){if(this.isNonCodeKey(m)||m==="code"&&h)continue;const y=this.extractEntry(m,g);y&&y.items.length>0&&s.set(m,y)}return{codeStandards:s,git:a,config:l,documentation:c,diagrams:f}}extractFromProgram(e){const t=e.blocks.find(s=>s.name==="standards"&&!s.name.startsWith("__"));return t?this.extract(t.content):null}extractEntry(e,t){const s=[];if(Array.isArray(t))for(const a of t){const l=this.valueToString(a);l&&s.push(l)}else this.options.supportObjectFormat&&t&&typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length===0?null:{key:e,sectionName:zR(e),title:BR(e),items:s,rawValue:t}}extractFromObject(e,t){for(const[s,a]of Object.entries(e)){if(a==null||a===!1)continue;if(a===!0){t.push(s);continue}const l=this.valueToString(a);l&&t.push(`${s}: ${l}`)}}extractGit(e){const t=e.git;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,a={};return s.format&&(a.format=this.valueToString(s.format)),Array.isArray(s.types)&&(a.types=s.types.map(l=>this.valueToString(l)).filter(Boolean)),s.example&&(a.example=this.valueToString(s.example)),Object.keys(a).length>0?a:void 0}extractConfig(e){const t=e.config;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,a={};for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);f&&(a[l]=f)}return Object.keys(a).length>0?a:void 0}extractDocumentation(e){const t=e.documentation;if(!t)return;const s=[];if(Array.isArray(t))for(const a of t){const l=this.valueToString(a);l&&s.push(l)}else typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length>0?{items:s,rawValue:t}:void 0}extractDiagrams(e){const t=e.diagrams;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t;let a,l;if(s.format?a=this.valueToString(s.format):s.tool&&(a=this.valueToString(s.tool)),Array.isArray(s.types)&&(l=s.types.map(c=>this.valueToString(c)).filter(Boolean)),a||l&&l.length>0)return{format:a,types:l,rawValue:t}}isNonCodeKey(e){return DR.includes(e)}addArrayItems(e,t){if(Array.isArray(t))for(const s of t){const a=this.valueToString(s);a&&e.push(a)}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}valueToString(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(t=>this.valueToString(t)).join(", ");if(typeof e=="object"&&"type"in e){if(e.type==="TextContent"&&typeof e.value=="string")return e.value.trim();if(e.type==="TypeExpression"&&"kind"in e){const t=e.kind,s="params"in e&&Array.isArray(e.params)?e.params:[];return s.length>0?`${t}(${s.map(a=>this.valueToString(a)).join(", ")})`:t}}if(typeof e=="object"){const t=Object.entries(e);if(t.length>0)return t.map(([s,a])=>`${s}: ${this.valueToString(a)}`).join(", ")}return""}}class Ba{standardsExtractor=new VR;createRenderer(e){const t=e?.convention??this.defaultConvention;return new kc({convention:t,prettier:e?.prettier})}getPrettierOptions(e){return{...mv,...e?.prettier}}getOutputPath(e){return e?.outputPath??this.outputPath}findBlock(e,t){return e.blocks.find(s=>s.name===t&&!s.name.startsWith("__"))}extractText(e){switch(e.type){case"TextContent":return e.value.trim();case"MixedContent":return e.text?.value.trim()??"";default:return""}}getProp(e,t){switch(e.type){case"ObjectContent":return e.properties[t];case"MixedContent":return e.properties[t];default:return}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}formatStandardsList(e){return Array.isArray(e)?e.map(t=>this.valueToString(t)).filter(t=>t.length>0):[]}formatArray(e){return e.map(String).join(", ")}truncate(e,t){return e.length>t?e.substring(0,t-3)+"...":e}getMetaField(e,t){const s=e.meta?.fields?.[t];if(typeof s=="string")return s;if(typeof s=="number")return String(s)}getArrayElements(e){return e.type==="ArrayContent"?e.elements:[]}valueToString(e){return e===null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(t=>this.valueToString(t)).join(", "):typeof e=="object"&&"type"in e&&e.type==="TextContent"&&typeof e.value=="string"?e.value.trim():""}extractSectionWithCodeBlock(e,t){const s=e.indexOf(t);if(s===-1)return null;const a=s+t.length,l=e.indexOf("```",a);if(l===-1)return null;const c=e.indexOf("```",l+3);if(c===-1)return null;const f=c+3;return e.substring(s,f)}normalizeMarkdownForPrettier(e){const t=e.split(`
`);let s=1/0,a=!1;for(const h of t){const m=h.trimEnd();if(m.trimStart().startsWith("```")){if(a=!a,m.length>0){const x=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,x)}continue}if(a||m.length===0)continue;const y=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,y)}s===1/0&&(s=0);const l=[];let c=!1,f=[];a=!1;for(const h of t){const m=h.trimEnd(),g=s>0?m.slice(s):m,y=m.trimStart().startsWith("```"),S=y&&!a;if(y&&(a=!a),a||g.startsWith("```")){if(S){const j=l.length>0?l[l.length-1]??"":"";j.trim()&&!j.startsWith("#")&&l.push("")}l.push(g);continue}let x=g;x=x.replace(/__([^_]+)__/g,"\\_\\_$1\\_\\_"),x=this.escapeGlobAsteriskOutsideBackticks(x);const A=l.length>0?l[l.length-1]:"",R=A?.trimStart().startsWith("#");if(R&&x.trim()&&l.push(""),x.trimStart().startsWith("|")&&x.trimEnd().endsWith("|"))c=!0,f.push(x.trim());else{c&&f.length>0&&(l.push(...this.formatMarkdownTable(f)),f=[],c=!1);const j=x.trimStart().startsWith("- "),b=/^\d+\.\s/.test(x.trimStart()),_=A?.trimStart()??"",P=_.startsWith("- ")||/^\d+\.\s/.test(_),M=A?.trimEnd().endsWith(":")??!1;((j||b)&&A&&!P&&!R||(j||b)&&M)&&l.push(""),l.push(x)}}return f.length>0&&l.push(...this.formatMarkdownTable(f)),l.join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}stripAllIndent(e){const t=e.split(`
`),s=[];let a=!1;for(const l of t){const c=l.trimEnd();if(c.trimStart().startsWith("```")){if(!a){const S=s.length>0?s[s.length-1]??"":"";S&&S.trim()&&s.push("")}a=!a,s.push(c.trimStart());continue}if(a){s.push(c);continue}let f=c.trimStart();f=f.replace(/__/g,"\\_\\_"),f=this.escapeGlobAsteriskOutsideBackticks(f);const h=s.length>0?s[s.length-1]??"":"",m=f.startsWith("- ")||/^\d+\.\s/.test(f),g=h.startsWith("- ")||/^\d+\.\s/.test(h),y=h.trimEnd().endsWith(":");(m&&h&&!g||m&&y)&&s.push(""),s.push(f)}return s.join(`
`)}formatMarkdownTable(e){if(e.length===0)return[];const t=e.map(l=>l.split("|").slice(1,-1).map(c=>c.trim())),s=t[0]?.length??0,a=new Array(s).fill(0);for(const l of t)for(let c=0;c<l.length;c++){const f=l[c]??"",h=f.match(/^-+$/)?3:f.length;a[c]=Math.max(a[c]??0,h)}return t.map(l=>"| "+l.map((f,h)=>{const m=a[h]??0;return f.match(/^-+$/)?"-".repeat(m):f.padEnd(m)}).join(" | ")+" |")}dedent(e){const t=e.split(`
`);if(t.length<=1)return e.trim();const s=t.slice(1).filter(l=>l.trim().length>0).reduce((l,c)=>{const h=c.match(/^(\s*)/)?.[1]?.length??0;return Math.min(l,h)},1/0);return s===0||s===1/0?e.trim():[(t[0]??"").trim(),...t.slice(1).map(l=>l.trim().length>0?l.slice(s):"")].join(`
`).trim()}}class Cr{static factories=new Map;static register(e,t){if(this.factories.has(e))throw new Error(`Formatter '${e}' is already registered`);this.factories.set(e,t)}static get(e){return this.factories.get(e)?.()}static getAll(){return Array.from(this.factories.values()).map(e=>e())}static list(){return Array.from(this.factories.keys())}static has(e){return this.factories.has(e)}static unregister(e){return this.factories.delete(e)}static clear(){this.factories.clear()}}const WR={simple:{name:"simple",description:"Single file output (.github/copilot-instructions.md)",outputPath:".github/copilot-instructions.md"},multifile:{name:"multifile",description:"Main + path-specific instructions (.github/instructions/) + prompts",outputPath:".github/copilot-instructions.md"},full:{name:"full",description:"Multifile + skills (.github/skills/) + agents (.github/agents/) + AGENTS.md",outputPath:".github/copilot-instructions.md"}},wm={Read:"read",NotebookRead:"read",Edit:"edit",MultiEdit:"edit",Write:"edit",NotebookEdit:"edit",Grep:"search",Glob:"search",Bash:"execute",WebFetch:"web",WebSearch:"web",Task:"agent",TodoWrite:"todo",TodoRead:"todo"},GR={sonnet:"Claude Sonnet 4.5",opus:"Claude Opus 4.5",haiku:"Claude Haiku 4.5","sonnet-4":"Claude Sonnet 4","sonnet-4.5":"Claude Sonnet 4.5","opus-4":"Claude Opus 4","opus-4.5":"Claude Opus 4.5","haiku-4":"Claude Haiku 4","haiku-4.5":"Claude Haiku 4.5","gpt-4o":"GPT-4o","gpt-4.1":"GPT-4.1","gpt-5":"GPT-5","gpt-5-mini":"GPT-5 mini",inherit:"",auto:"Auto"};class KR extends Ba{name="github";outputPath=".github/copilot-instructions.md";description="GitHub Copilot instructions (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return WR}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),a=[];return s.getConvention().name==="markdown"&&a.push(this.header(e)),this.addCommonSections(e,s,a),{path:this.getOutputPath(t),content:a.join(`

`)+`
`}}formatMultifile(e,t){const s=this.createRenderer(t),a=[],l=this.extractInstructions(e);for(const h of l)a.push(this.generateInstructionFile(h));const c=this.extractPrompts(e);for(const h of c)a.push(this.generatePromptFile(h));const f=[];return s.getConvention().name==="markdown"&&f.push(this.header(e)),this.addCommonSections(e,s,f),{path:this.getOutputPath(t),content:f.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}formatFull(e,t){const s=this.createRenderer(t),a=[],l=this.extractInstructions(e);for(const y of l)a.push(this.generateInstructionFile(y));const c=this.extractPrompts(e);for(const y of c)a.push(this.generatePromptFile(y));const f=this.extractSkills(e);for(const y of f)a.push(this.generateSkillFile(y));const h=this.extractCustomAgents(e);for(const y of h)a.push(this.generateCustomAgentFile(y));const m=this.generateAgentsFile(e);m&&a.push(m);const g=[];return s.getConvention().name==="markdown"&&g.push(this.header(e)),this.addCommonSections(e,s,g),{path:this.getOutputPath(t),content:g.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}extractInstructions(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],a=this.getProps(t.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"typescript",applyTo:c,description:"TypeScript-specific coding rules",content:this.getTypeScriptInstructionContent(e)}),f.length>0&&s.push({name:"testing",applyTo:f,description:"Testing-specific rules and patterns",content:this.getTestingInstructionContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.applyTo,g=h.excludeAgent,y=h.description,S=h.content;m&&Array.isArray(m)&&s.push({name:c,applyTo:m.map(x=>this.valueToString(x)),excludeAgent:g?this.valueToString(g):void 0,description:y?this.valueToString(y):`${c} rules`,content:S?this.valueToString(S):""})}return s}generateInstructionFile(e){const t=[];t.push("---"),t.push("applyTo:");for(const s of e.applyTo)t.push(`  - "${s}"`);if(e.excludeAgent&&t.push(`excludeAgent: "${e.excludeAgent}"`),t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.github/instructions/${e.name}.instructions.md`,content:t.join(`
`)}}getTypeScriptInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Use strict TypeScript, avoid `any` types"),f.useUnknown&&a.push(`- Use \`unknown\` ${this.valueToString(f.useUnknown)}`),f.exports&&a.push(`- ${this.capitalize(this.valueToString(f.exports))}`),f.returnTypes&&a.push(`- Explicit return types ${this.valueToString(f.returnTypes)}`)}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: \`${this.valueToString(f.files)}\``),f.classes&&a.push(`- Classes/Interfaces: \`${this.valueToString(f.classes)}\``),f.functions&&a.push(`- Functions/Variables: \`${this.valueToString(f.functions)}\``)}return a.join(`
`)}getTestingInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.filePattern&&a.push(`- Test files: \`${this.valueToString(c.filePattern)}\``),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage for libraries`),c.fixtures&&a.push(`- Use fixtures ${this.valueToString(c.fixtures)}`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractPrompts(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;(f.prompt===!0||f.type==="prompt")&&s.push({name:l,description:f.description?this.valueToString(f.description):l,mode:f.mode==="agent"?"agent":void 0,tools:f.tools&&Array.isArray(f.tools)?f.tools.map(h=>this.valueToString(h)):void 0,content:f.content?this.valueToString(f.content):""})}return s}generatePromptFile(e){const t=[];t.push("---");const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.mode==="agent"&&(t.push("mode: agent"),e.tools&&e.tools.length>0)){const c=e.tools.map(f=>wm[f]??f.toLowerCase()).filter((f,h,m)=>m.indexOf(f)===h).map(f=>`'${f}'`).join(", ");t.push(`tools: [${c}]`)}if(t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/prompts/${e.name.replace(/^\/+/,"")}.prompt.md`,content:t.join(`
`)+`
`}}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,disableModelInvocation:f.disableModelInvocation===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.disableModelInvocation&&t.push("disable-model-invocation: true"),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/skills/${e.name.replace(/^\/+/,"")}/SKILL.md`,content:t.join(`
`)+`
`}}generateAgentsFile(e){const t=this.findBlock(e,"identity");if(!t)return null;const s=[];s.push("# Agent Instructions"),s.push("");const a=this.extractText(t.content);a&&(s.push("## Identity"),s.push(""),s.push(this.stripAllIndent(a)),s.push(""));const l=this.findBlock(e,"context");if(l){const f=this.extractText(l.content);f&&(s.push("## Context"),s.push(""),s.push(this.stripAllIndent(f)),s.push(""))}const c=this.findBlock(e,"restrictions");if(c){const f=this.extractRestrictionItems(c.content);if(f.length>0){s.push("## Restrictions"),s.push("");for(const h of f)s.push(`- ${h}`)}}return{path:"AGENTS.md",content:s.join(`
`)+`
`}}extractRestrictionItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractCustomAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=f.description?this.valueToString(f.description):"";if(!h)continue;s.push({name:l,description:h,tools:this.parseToolsArray(f.tools),model:f.model?this.valueToString(f.model):void 0,content:f.content?this.valueToString(f.content):""})}return s}parseToolsArray(e){if(!e||!Array.isArray(e))return;const t=e.map(a=>this.valueToString(a)).filter(a=>a.length>0).map(a=>wm[a]??a.toLowerCase()),s=[...new Set(t)];return s.length>0?s:void 0}mapModelName(e){if(!e)return;const t=GR[e.toLowerCase()];if(t!=="")return t??e}generateCustomAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0){const l=e.tools.map(c=>`'${c}'`).join(", ");t.push(`tools: [${l}]`)}const s=this.mapModelName(e.model);if(s&&t.push(`model: ${s}`),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/agents/${e.name.replace(/^\/+/,"")}.md`,content:t.join(`
`)+`
`}}addCommonSections(e,t,s){const a=this.project(e,t);a&&s.push(a);const l=this.techStack(e,t);l&&s.push(l);const c=this.architecture(e,t);c&&s.push(c);const f=this.codeStandards(e,t);f&&s.push(f);const h=this.shortcutsSection(e,t);h&&s.push(h);const m=this.commands(e,t);m&&s.push(m);const g=this.gitCommits(e,t);g&&s.push(g);const y=this.configFiles(e,t);y&&s.push(y);const S=this.documentation(e,t);S&&s.push(S);const x=this.postWork(e,t);x&&s.push(x);const A=this.restrictions(e,t);A&&s.push(A);const R=this.diagrams(e,t);R&&s.push(R);const j=this.knowledge(e,t);j&&s.push(j)}header(e){return"# GitHub Copilot Instructions"}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return t.renderSection("project",this.stripAllIndent(a))}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Language:** ${this.formatTechItem(g)}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,S=g.packageManager;y&&S&&l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(S)} workspaces`)}if(l.length===0)return null;const m=t.renderList(l);return t.renderSection("tech-stack",m)}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture","").trim();return t.renderSection("architecture",this.stripAllIndent(c))}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(t.renderSection(c.sectionName,t.renderList(c.items),2));return l.length===0?null:t.renderSection("code-standards",l.join(`

`))}shortcutsSection(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content),l=[];for(const[c,f]of Object.entries(a))if(f&&typeof f=="object"&&!Array.isArray(f)){const h=f;if(h.prompt===!0||h.type==="prompt")continue;const m=h.description||h.content||c;l.push(`${c}: ${this.valueToString(m).split(`
`)[0]}`)}else l.push(`${c}: ${this.valueToString(f).split(`
`)[0]}`);return l.length===0?null:t.renderSection("shortcuts",t.renderList(l))}commands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return t.renderSection("commands",this.stripAllIndent(c))}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:t.renderSection("git-commits",t.renderList(f))}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(t.renderSection("eslint",`ESLint: ${g}`,2))}const m=c.viteRoot;if(m){const g=this.valueToString(m);f.push(t.renderSection("vite-vitest",`Vite root: ${g}`,2))}return f.length===0?null:t.renderSection("configuration-files",f.join(`

`))}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:t.renderSection("documentation-verification",t.renderList(f))}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return t.renderSection("post-work-verification",`${c}
${this.stripAllIndent(f)}`)}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;let a=[];if(s.content.type==="ArrayContent")a=s.content.elements.map(l=>this.formatRestriction(this.valueToString(l)));else if(s.content.type==="TextContent")a=s.content.value.trim().split(`
`).filter(l=>l.trim()).map(l=>this.formatRestriction(l.trim()));else if(s.content.type==="ObjectContent"){const l=this.getProp(s.content,"items");Array.isArray(l)&&(a=l.map(c=>this.formatRestriction(this.valueToString(c))))}return a.length===0?null:t.renderSection("donts",t.renderList(a))}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Always use **${this.valueToString(h)}** syntax for diagrams in documentation`);const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:t.renderSection("diagrams",t.renderList(f))}knowledge(e,t){return null}formatTechItem(e){return e.map(String).join(", ")}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}const HR={simple:{name:"simple",description:"Single file output (CLAUDE.md)",outputPath:"CLAUDE.md"},multifile:{name:"multifile",description:"Main + modular rules (.claude/rules/*.md)",outputPath:"CLAUDE.md"},full:{name:"full",description:"Multifile + skills (.claude/skills/) + agents (.claude/agents/) + local memory",outputPath:"CLAUDE.md"}};class YR extends Ba{name="claude";outputPath="CLAUDE.md";description="Claude Code instructions (concise Markdown)";defaultConvention="markdown";static getSupportedVersions(){return HR}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),a=[];return s.getConvention().name==="markdown"&&a.push(`# CLAUDE.md
`),this.addCommonSections(e,s,a),{path:this.getOutputPath(t),content:a.join(`
`)}}formatMultifile(e,t){const s=this.createRenderer(t),a=[],l=this.extractRules(e);for(const f of l)a.push(this.generateRuleFile(f));const c=[];return s.getConvention().name==="markdown"&&c.push(`# CLAUDE.md
`),this.addCommonSections(e,s,c),{path:this.getOutputPath(t),content:c.join(`
`),additionalFiles:a.length>0?a:void 0}}formatFull(e,t){const s=this.createRenderer(t),a=[],l=this.extractRules(e);for(const g of l)a.push(this.generateRuleFile(g));const c=this.extractSkills(e);for(const g of c)a.push(this.generateSkillFile(g));const f=this.extractAgents(e);for(const g of f)a.push(this.generateAgentFile(g));const h=this.generateLocalFile(e);h&&a.push(h);const m=[];return s.getConvention().name==="markdown"&&m.push(`# CLAUDE.md
`),this.addCommonSections(e,s,m),{path:this.getOutputPath(t),content:m.join(`
`),additionalFiles:a.length>0?a:void 0}}extractRules(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],a=this.getProps(t.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"code-style",paths:c,description:"TypeScript code style rules",content:this.getCodeStyleRuleContent(e)}),f.length>0&&s.push({name:"testing",paths:f,description:"Testing rules and patterns",content:this.getTestingRuleContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.paths??h.applyTo,g=h.description,y=h.content;m&&Array.isArray(m)&&s.push({name:c,paths:m.map(S=>this.valueToString(S)),description:g?this.valueToString(g):`${c} rules`,content:y?this.valueToString(y):""})}return s}generateRuleFile(e){const t=[];t.push("---"),t.push(`description: "${e.description}"`),t.push("paths:");for(const s of e.paths)t.push(`  - "${s}"`);if(t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.claude/rules/${e.name}.md`,content:t.join(`
`)}}getCodeStyleRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Strict TypeScript, no `any` types"),f.exports&&a.push("- Named exports only")}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: ${this.valueToString(f.files)}`)}return a.join(`
`)}getTestingRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.framework&&a.push(`- Use ${this.valueToString(c.framework)} for testing`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage`),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,context:f.context==="fork"||f.context==="inherit"?f.context:void 0,agent:f.agent?this.valueToString(f.agent):void 0,allowedTools:f.allowedTools&&Array.isArray(f.allowedTools)?f.allowedTools.map(h=>this.valueToString(h)):void 0,userInvocable:f.userInvocable===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.context&&t.push(`context: ${e.context}`),e.agent&&t.push(`agent: ${e.agent}`),e.allowedTools&&e.allowedTools.length>0){t.push("allowed-tools:");for(const a of e.allowedTools)t.push(`  - ${a}`)}if(e.userInvocable&&t.push("user-invocable: true"),t.push("---"),t.push(""),e.content){const a=this.dedent(e.content),l=this.normalizeMarkdownForPrettier(a);t.push(l)}return{path:`.claude/skills/${e.name}/SKILL.md`,content:t.join(`
`)+`
`}}extractAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],a=this.getProps(t.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=this.parseAgentConfig(l,f);h&&s.push(h)}return s}parseAgentConfig(e,t){const s=t.description?this.valueToString(t.description):"";return s?{name:e,description:s,tools:this.parseStringArray(t.tools),disallowedTools:this.parseStringArray(t.disallowedTools),model:this.parseAgentModel(t.model),permissionMode:this.parsePermissionMode(t.permissionMode),skills:this.parseStringArray(t.skills),content:t.content?this.valueToString(t.content):""}:null}parseStringArray(e){if(!e||!Array.isArray(e))return;const t=e.map(s=>this.valueToString(s)).filter(s=>s.length>0);return t.length>0?t:void 0}parseAgentModel(e){if(!e)return;const t=this.valueToString(e);return["sonnet","opus","haiku","inherit"].includes(t)?t:void 0}parsePermissionMode(e){if(!e)return;const t=this.valueToString(e);return["default","acceptEdits","dontAsk","bypassPermissions","plan"].includes(t)?t:void 0}generateAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0&&t.push(`tools: ${e.tools.join(", ")}`),e.disallowedTools&&e.disallowedTools.length>0&&t.push(`disallowedTools: ${e.disallowedTools.join(", ")}`),e.model&&t.push(`model: ${e.model}`),e.permissionMode&&t.push(`permissionMode: ${e.permissionMode}`),e.skills&&e.skills.length>0){t.push("skills:");for(const s of e.skills)t.push(`  - ${s}`)}if(t.push("---"),t.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);t.push(a)}return{path:`.claude/agents/${e.name}.md`,content:t.join(`
`)+`
`}}generateLocalFile(e){const t=this.findBlock(e,"local");if(!t)return null;const s=this.extractText(t.content);if(!s)return null;const a=[];return a.push("# CLAUDE.local.md"),a.push(""),a.push("> Private instructions (not committed to git)"),a.push(""),a.push(s),{path:"CLAUDE.local.md",content:a.join(`
`)}}addCommonSections(e,t,s){this.addSection(s,this.project(e,t)),this.addSection(s,this.techStack(e,t)),this.addSection(s,this.architecture(e,t)),this.addSection(s,this.codeStandards(e,t)),this.addSection(s,this.gitCommits(e,t)),this.addSection(s,this.configFiles(e,t)),this.addSection(s,this.commands(e,t)),this.addSection(s,this.postWork(e,t)),this.addSection(s,this.documentation(e,t)),this.addSection(s,this.diagrams(e,t)),this.addSection(s,this.donts(e,t))}addSection(e,t){t&&e.push(t)}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const l=this.extractText(s.content).split(/\n{2,}/).map(f=>f.split(`
`).map(h=>h.trim()).filter(h=>h).join(`
`)).filter(f=>f).join(`

`),c=this.normalizeMarkdownForPrettier(l);return t.renderSection("Project",c)+`
`}techStack(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractTechStackFromContext(s);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}const a=this.findBlock(e,"standards");if(a){const l=this.extractTechStackFromStandards(a);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}return null}extractTechStackFromContext(e){if(!e)return[];const t=this.getProps(e.content),s=[],a=t.languages;a&&s.push(...(Array.isArray(a)?a:[a]).map(String));const l=t.runtime;l&&s.push(this.valueToString(l));const c=t.monorepo;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&f.packageManager&&s.push(`${this.valueToString(f.tool)} + ${this.valueToString(f.packageManager)}`)}return s}extractTechStackFromStandards(e){if(!e)return[];const t=this.getProp(e.content,"code");if(!t||typeof t!="object"||Array.isArray(t))return[];const s=t,a=[];for(const l of["languages","frameworks","testing"]){const c=s[l];c&&a.push(...(Array.isArray(c)?c:[c]).map(String))}return a}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Architecture",f.trim())+`
`}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const f of a.codeStandards.values())l.push(...f.items);if(l.length===0)return null;const c=t.renderList(l);return t.renderSection("Code Style",c)+`
`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"git");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Format: ${this.valueToString(l.format)}`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),l.example&&c.push(`Example: \`${this.valueToString(l.example)}\``),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Git Commits",f)+`
`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"config");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.eslint&&c.push(`ESLint: ${this.valueToString(l.eslint)}`),l.viteRoot&&c.push(`Vite root: ${this.valueToString(l.viteRoot)}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Config Files",f)+`
`}commands(e,t){const s=this.findBlock(e,"shortcuts"),a=this.findBlock(e,"knowledge"),l=[];if(s){const f=this.getProps(s.content);for(const[h,m]of Object.entries(f)){const g=this.valueToString(m).split(`
`)[0]??"";l.push(`${h.padEnd(10)} - ${g}`.trimEnd())}}if(l.length===0)return null;let c=t.renderCodeBlock(l.join(`
`));if(a){const f=this.extractText(a.content),h=this.extractSectionWithCodeBlock(f,"## Development Commands");if(h){const m=h.replace("## Development Commands",""),g=this.normalizeMarkdownForPrettier(m);c+=`

`+g.trim()}}return t.renderSection("Commands",c)+`
`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c=l.replace("## Post-Work Verification",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Post-Work Verification",f.trim())+`
`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"documentation");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.verifyBefore&&c.push("Review docs before changes"),l.verifyAfter&&c.push("Update docs after changes"),l.codeExamples&&c.push("Keep code examples accurate"),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Documentation",f)+`
`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"diagrams");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Use ${this.valueToString(l.format)} for diagrams`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Diagrams",f)+`
`}donts(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractDontsItems(s.content);if(a.length===0)return null;const l=t.renderList(a);return t.renderSection("Don'ts",l)+`
`}extractDontsItems(e){const t=s=>s.replace(/^Never\s+/i,"Don't ");if(e.type==="ArrayContent")return e.elements.map(s=>t(this.valueToString(s)));if(e.type==="TextContent")return e.value.trim().split(`
`).map(s=>s.trim().replace(/^-\s*/,"")).filter(s=>s.length>0).map(t);if(e.type==="ObjectContent"){const s=this.getProp(e,"items");if(Array.isArray(s))return s.map(a=>t(this.valueToString(a)))}return[]}}const fs={modern:{name:"modern",description:"MDC format with YAML frontmatter (.cursor/rules/project.mdc) + slash commands (.cursor/commands/)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},frontmatter:{name:"frontmatter",description:"Alias for modern format (MDC with YAML frontmatter + slash commands)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},multifile:{name:"multifile",description:"Multiple MDC files with glob-based targeting + slash commands",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},legacy:{name:"legacy",description:"Plain text format (.cursorrules) - DEPRECATED",outputPath:".cursorrules",cursorVersion:"< 0.45",deprecated:!0,deprecatedSince:"2024-12"}};class XR extends Ba{name="cursor";outputPath=fs.modern.outputPath;description="Cursor rules (MDC with frontmatter)";defaultConvention="markdown";static getSupportedVersions(){return fs}format(e,t){const s=t?.convention??this.defaultConvention;if(s!=="markdown"){const l=typeof s=="string"?s:"custom";throw new Error(`Cursor formatter does not support '${l}' convention. Only 'markdown' convention is supported for Cursor targets.`)}const a=this.resolveVersion(t?.version);return a==="legacy"?this.formatLegacy(e,t):a==="multifile"?this.formatMultifile(e,t):this.formatModern(e,t)}resolveVersion(e){return e==="legacy"?"legacy":e==="multifile"?"multifile":"modern"}formatModern(e,t){const s=[],a=this.frontmatter(e);s.push(a),this.addCommonSections(e,s);const l=this.generateCommandFiles(e);return{path:t?.outputPath??fs.modern.outputPath,content:s.join(`

`)+`
`,additionalFiles:l.length>0?l:void 0}}formatLegacy(e,t){const s=[];return this.addCommonSections(e,s),{path:t?.outputPath??fs.legacy.outputPath,content:s.join(`

`)+`
`}}formatMultifile(e,t){const s=[],a=this.extractGlobs(e);for(const b of a){const _=this.generateGlobFile(e,b);_&&s.push(_)}const l=this.generateShortcutsFile(e);l&&s.push(l);const c=this.generateCommandFiles(e);s.push(...c);const f=[];f.push(this.frontmatter(e)),f.push(this.intro(e));const h=this.techStack(e);h&&f.push(h);const m=this.architecture(e);m&&f.push(m);const g=this.codeStyle(e);g&&f.push(g);const y=this.gitCommits(e);y&&f.push(y);const S=this.configFiles(e);S&&f.push(S);const x=this.postWork(e);x&&f.push(x);const A=this.documentation(e);A&&f.push(A);const R=this.diagrams(e);R&&f.push(R);const j=this.never(e);return j&&f.push(j),{path:t?.outputPath??fs.modern.outputPath,content:f.join(`

`)+`
`,additionalFiles:s.length>0?s:void 0}}extractGlobs(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],l=this.getProps(t.content).globs;if(Array.isArray(l)){const c=l.filter(m=>typeof m=="string"&&(m.includes(".ts")||m.includes(".tsx"))),f=l.filter(m=>typeof m=="string"&&(m.includes("test")||m.includes("spec")||m.includes("__tests__"))),h=l.filter(m=>typeof m=="string"&&!c.includes(m)&&!f.includes(m));c.length>0&&s.push({name:"typescript",patterns:c,description:"TypeScript-specific rules"}),f.length>0&&s.push({name:"testing",patterns:f,description:"Testing-specific rules"}),h.length>0&&s.push({name:"files",patterns:h,description:"File-specific rules"})}return s}generateGlobFile(e,t){const s=[],a=["---",`description: "${t.description}"`,"globs:",...t.patterns.map(l=>`  - "${l}"`),"---"];if(s.push(a.join(`
`)),t.name==="typescript"){const l=this.codeStyle(e);l&&s.push(l)}return t.name==="testing"&&(s.push("## Testing Guidelines"),s.push("Follow project testing conventions and patterns.")),s.length<=1?null:{path:`.cursor/rules/${t.name}.mdc`,content:s.join(`

`)+`
`}}generateShortcutsFile(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const a=[];a.push(["---",'description: "Project shortcuts and commands"',"alwaysApply: false","---"].join(`
`));const l=["## Commands"];for(const[c,f]of Object.entries(s)){const h=this.valueToString(f);if(typeof f=="object"&&!Array.isArray(f)){const m=f;l.push(`
### ${c}`),m.description&&l.push(this.valueToString(m.description)),Array.isArray(m.steps)&&(l.push(`
**Steps:**`),m.steps.forEach((g,y)=>{l.push(`${y+1}. ${this.valueToString(g)}`)}))}else l.push(`- **${c}**: ${h.split(`
`)[0]}`)}return a.push(l.join(`
`)),{path:".cursor/rules/shortcuts.mdc",content:a.join(`

`)+`
`}}generateCommandFiles(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=this.getProps(t.content),a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);if(f.includes(`
`)){const h=l.replace(/^\//,"");a.push({path:`.cursor/commands/${h}.md`,content:f.trim()})}}return a}addCommonSections(e,t){const s=this.intro(e);s&&t.push(s);const a=this.techStack(e);a&&t.push(a);const l=this.architecture(e);l&&t.push(l);const c=this.codeStyle(e);c&&t.push(c);const f=this.gitCommits(e);f&&t.push(f);const h=this.configFiles(e);h&&t.push(h);const m=this.commands(e);m&&t.push(m);const g=this.devCommands(e);g&&t.push(g);const y=this.postWork(e);y&&t.push(y);const S=this.documentation(e);S&&t.push(S);const x=this.diagrams(e);x&&t.push(x);const A=this.never(e);A&&t.push(A)}intro(e){const t=this.findBlock(e,"identity");if(t){const l=this.dedent(this.extractText(t.content));if(l.toLowerCase().startsWith("you are"))return l}const s=this.extractProjectInfo(e),a=s.org?` at ${s.org}`:"";return`You are working on ${s.text}${a}.`}frontmatter(e){return["---",`description: "${this.extractProjectDescription(e)}"`,"alwaysApply: true","---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"name");if(t)return`Project rules for ${t}`;const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"project");if(a&&typeof a=="string"){const c=/working on\s+(\w+)/i.exec(a);if(c)return`Project rules for ${c[1]}`}}return"Project-specific rules"}extractProjectInfo(e){const t=this.getMetaField(e,"org")??null,s=this.findBlock(e,"context");if(s){const l=this.getProp(s.content,"project");if(l&&typeof l=="string")return{text:l.trim(),org:t}}const a=this.findBlock(e,"identity");if(a){const c=this.extractText(a.content).split(`
`)[0]?.trim();if(c)return{text:c,org:t}}return{text:"the project",org:t}}techStack(e){const t=this.extractTechStackItems(e);return t.length>0?`Tech stack: ${t.join(", ")}`:null}extractTechStackItems(e){const t=[],s=this.findBlock(e,"context");return s&&this.extractTechFromContext(s.content,t),t.length===0&&this.extractTechFromStandards(e,t),t}extractTechFromContext(e,t){const s=this.getProp(e,"tech-stack");s&&t.push(...this.extractListItems(s));const a=this.getProp(e,"languages");a&&this.collectValueItems(t,a);const l=this.getProp(e,"runtime");l&&t.push(this.valueToString(l));const c=this.getProp(e,"monorepo");if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&t.push(`${this.valueToString(f.tool)}`),f.packageManager&&t.push(`${this.valueToString(f.packageManager)} workspaces`)}}extractTechFromStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return;const a=this.getProp(s.content,"code");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=a;this.collectValueItems(t,l.languages),this.collectValueItems(t,l.frameworks),this.collectValueItems(t,l.testing)}}architecture(e){const t=this.findBlock(e,"context");if(!t)return null;const s=this.getProp(t.content,"architecture");if(s){const l=typeof s=="string"?s:this.valueToString(s);if(l.trim())return`Architecture:
${l.trim()}`}const a=this.extractText(t.content);return a?.includes("Architecture")?a.trim():null}codeStyle(e){const t=this.extractCodeStyleItems(e);return t.length===0?null:`Code style:
${t.map(s=>"- "+s).join(`
`)}`}extractCodeStyleItems(e){const t=this.findBlock(e,"standards");if(!t)return[];const s=this.standardsExtractor.extract(t.content),a=[];for(const l of s.codeStandards.values())a.push(...l.items);return a}gitCommits(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"git");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"git-commits");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}return null}extractGitItems(e){const t=[];for(const[s,a]of Object.entries(e))if(s==="types"&&Array.isArray(a)){const l=a.map(c=>this.valueToString(c)).join(", ");t.push(`types: ${l}`)}else typeof a=="string"?t.push(`${s}: ${a}`):typeof a=="number"&&t.push(`${s}: ${a}`);return t}configFiles(e){const t=this.extractConfigItems(e);return t.length===0?null:`Config:
${t.map(s=>"- "+s).join(`
`)}`}extractConfigItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"config"),l=this.extractConfigFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"configuration-files");return this.extractConfigFromObjectWithList(a)}return[]}extractConfigFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,a]of Object.entries(e))typeof a=="string"&&t.push(`${s}: ${a}`);return t}extractConfigFromObjectWithList(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,a]of Object.entries(e)){const l=this.extractListItems(a);l.length>0&&t.push(`${s}: ${l.join("; ")}`)}return t}commands(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c).split(`
`)[0]??"";a.push(`${l} - ${f}`)}return a.length>0?`Commands:
${a.join(`
`)}`:null}devCommands(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),a=this.extractSectionWithCodeBlock(s,"## Development Commands");return a?`Development Commands:
${a.replace("## Development Commands","").trim()}`:null}postWork(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),a=this.extractSectionWithCodeBlock(s,"## Post-Work Verification");return a?`Post-Work Verification:
${a.replace("## Post-Work Verification","").trim()}`:null}documentation(e){const t=this.extractDocItems(e);return t.length===0?null:`Documentation:
${t.map(s=>"- "+s).join(`
`)}`}extractDocItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"documentation"),l=this.extractStringValuesFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"documentation-verification");if(a)return this.extractListItems(a)}return[]}extractStringValuesFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const s of Object.values(e))typeof s=="string"&&t.push(s);return t}diagrams(e){const t=this.extractDiagramItems(e);return t.length===0?null:`Diagrams:
${t.map(s=>"- "+s).join(`
`)}`}extractDiagramItems(e){const t=this.findBlock(e,"standards");if(t){const a=this.getProp(t.content,"diagrams"),l=this.parseDiagramObject(a,"format");if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"diagrams");return this.parseDiagramObject(a,"tool")}return[]}parseDiagramObject(e,t){if(!e||typeof e!="object"||Array.isArray(e))return[];const s=e,a=[];return s[t]&&a.push(`Use ${this.valueToString(s[t])}`),s.types&&Array.isArray(s.types)&&a.push(`Types: ${s.types.map(l=>this.valueToString(l)).join(", ")}`),a}never(e){const t=this.findBlock(e,"restrictions");if(!t)return null;const s=this.extractNeverItems(t.content);return s.length===0?null:`Never:
${s.map(a=>"- "+a).join(`
`)}`}extractNeverItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractListItems(e){if(Array.isArray(e))return e.map(t=>this.valueToString(t));if(typeof e=="object"&&e!==null){const t=e,s=[];for(const[a,l]of Object.entries(t))s.push(`${a}: ${this.valueToString(l)}`);return s}return typeof e=="string"?e.split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0):[this.valueToString(e)]}collectValueItems(e,t){if(!t)return;const s=Array.isArray(t)?t:[t];for(const a of s)e.push(this.valueToString(a))}}const qR={simple:{name:"simple",description:"Plain Markdown without frontmatter",outputPath:".agent/rules/project.md"},frontmatter:{name:"frontmatter",description:"Markdown with YAML frontmatter for activation",outputPath:".agent/rules/project.md"}},km=12e3;class QR extends Ba{name="antigravity";outputPath=".agent/rules/project.md";description="Google Antigravity rules (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return qR}format(e,t){const s=this.resolveVersion(t?.version),a=this.createRenderer(t),l=[];if(s==="frontmatter"){const z=this.determineActivationType(e);l.push(this.generateFrontmatter(e,z))}l.push(this.header(e));const c=this.identity(e,a);c&&l.push(c);const f=this.techStack(e,a);f&&l.push(f);const h=this.architecture(e,a);h&&l.push(h);const m=this.codeStandards(e,a);m&&l.push(m);const g=this.gitCommits(e,a);g&&l.push(g);const y=this.configFiles(e,a);y&&l.push(y);const S=this.commands(e,a);S&&l.push(S);const x=this.devCommands(e,a);x&&l.push(x);const A=this.postWork(e,a);A&&l.push(A);const R=this.documentation(e,a);R&&l.push(R);const j=this.diagrams(e,a);j&&l.push(j);const b=this.restrictions(e,a);b&&l.push(b);const _=l.join(`

`)+`
`;this.validateContentLength(_);const P={path:this.getOutputPath(t),content:_},M=this.workflows(e);return M&&M.length>0?{path:P.path,content:P.content,additionalFiles:M}:P}resolveVersion(e){return e==="frontmatter"?"frontmatter":"simple"}determineActivationType(e){const t=this.findBlock(e,"guards");if(t){const s=this.getProps(t.content);if(s.globs||s.glob||s.files)return"glob"}return"always"}generateFrontmatter(e,t){const s=this.getMetaField(e,"name")??"Project Rules",a=this.extractProjectDescription(e);return["---",`title: "${s}"`,`activation: "${t}"`,`description: "${a}"`,"---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"description");if(t)return t;const s=this.findBlock(e,"identity");if(s){const a=this.extractText(s.content);if(a){const l=a.split(".")[0];return l&&l.length<=100?l:a.slice(0,100)+"..."}}return"Auto-generated project rules"}validateContentLength(e){e.length>km&&console.warn(`Warning: Content exceeds Antigravity's ${km.toLocaleString()} character limit (${e.length.toLocaleString()} chars). Consider splitting into multiple rules.`)}workflows(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content),a=[];for(const[l,c]of Object.entries(s))if(this.isWorkflow(c)){const f=this.generateWorkflow(l,c);f&&a.push(f)}return a.length>0?a:null}isWorkflow(e){if(typeof e!="object"||e===null||Array.isArray(e))return!1;const t=e;return"steps"in t||"workflow"in t}generateWorkflow(e,t){if(typeof t!="object"||t===null||Array.isArray(t))return null;const s=t,a=s.steps??s.workflow,l=s.description??s.desc??"",c=e.replace(/^\//,"").replace(/\s+/g,"-").toLowerCase(),f=["---",`title: "${this.formatWorkflowTitle(e)}"`,`description: "${this.valueToString(l)}"`,"---","","## Steps",""];return Array.isArray(a)?a.forEach((h,m)=>{f.push(`${m+1}. ${this.valueToString(h)}`)}):typeof a=="string"&&a.split(`
`).map(m=>m.trim()).filter(m=>m.length>0).forEach((m,g)=>{const y=m.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"");f.push(`${g+1}. ${y}`)}),{path:`.agent/workflows/${c}.md`,content:f.join(`
`)}}formatWorkflowTitle(e){return e.replace(/^\//,"").split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}header(e){return"# Project Rules"}identity(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return a?`## Project Identity

${this.stripAllIndent(a)}`:null}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Languages:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,S=g.packageManager;y&&S?l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(S)} workspaces`):y&&l.push(`**Monorepo:** ${this.valueToString(y)}`)}const m=a.frameworks;if(m){const g=Array.isArray(m)?m:[m];l.push(`**Frameworks:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}return l.length===0?null:`## Tech Stack

${l.join(`
`)}`}architecture(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractText(s.content),c=this.extractSectionWithCodeBlock(l,"## Architecture");if(c){const m=c.replace("## Architecture","").trim();return`## Architecture

${this.stripAllIndent(m)}`}const h=this.getProps(s.content).architecture;if(h){const m=typeof h=="string"?h:this.valueToString(h);if(m.trim())return`## Architecture

${this.stripAllIndent(m.trim())}`}}const a=this.findBlock(e,"architecture");if(a){const l=this.extractText(a.content);if(l)return`## Architecture

${this.stripAllIndent(l)}`}return null}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(`### ${c.title}

${c.items.map(f=>"- "+f).join(`
`)}`);return l.length===0?null:`## Code Standards

${l.join(`

`)}`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:`## Git Commits

${f.map(S=>"- "+S).join(`
`)}`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(`### ESLint

- ESLint: ${g}`)}const m=c.viteRoot;if(m){const g=this.valueToString(m).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`### Vite/Vitest

- Vite root: ${g}`)}return f.length===0?null:`## Configuration Files

${f.join(`

`)}`}commands(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content);if(Object.keys(a).length===0)return null;const l=[];for(const[c,f]of Object.entries(a)){if(this.isWorkflow(f))continue;const h=this.valueToString(f);h?l.push(`- **${c}**: ${h}`):l.push(`- **${c}**:`)}return l.length===0?null:`## Commands

${l.join(`
`)}`}devCommands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return`## Development Commands

${this.stripAllIndent(c)}`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return`## Post-Work Verification

${c}
${this.stripAllIndent(f)}`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:`## Documentation

${f.map(h=>"- "+h).join(`
`)}`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;if(h){const g=this.valueToString(h).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`Always use **${g}** syntax for diagrams in documentation`)}const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:`## Diagrams

${f.map(g=>"- "+g).join(`
`)}`}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractRestrictionsItems(s.content);return a.length===0?null:`## Don'ts

${a.map(l=>"- "+l).join(`
`)}`}extractRestrictionsItems(e){return e.type==="ArrayContent"?e.elements.map(t=>this.formatRestriction(this.valueToString(t))):e.type==="TextContent"?e.value.trim().split(`
`).filter(t=>t.trim()).map(t=>this.formatRestriction(t.trim())):[]}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}}Cr.register("github",()=>new KR);Cr.register("claude",()=>new YR);Cr.register("cursor",()=>new XR);Cr.register("antigravity",()=>new QR);const ZR={id:"PS001",name:"required-meta-id",description:"@meta.id is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e){r.report({message:"@meta block is required",location:r.ast.loc,suggestion:"Add a @meta block with id and version fields"});return}e.fields?.id||r.report({message:'@meta block must include "id" field',location:e.loc??r.ast.loc,suggestion:'Add id: "your-project-id" to @meta'})}},JR={id:"PS002",name:"required-meta-syntax",description:"@meta.syntax is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;e&&(e.fields?.syntax||r.report({message:'@meta block must include "syntax" field',location:e.loc??r.ast.loc,suggestion:'Add syntax: "1.0.0" to @meta'}))}};function eN(r){if(!r)return!1;const t=r.split(/[-+]/)[0];if(!t)return!1;const s=t.split(".");if(s.length!==3)return!1;for(const a of s)if(!/^\d+$/.test(a)||a.length>1&&a.startsWith("0"))return!1;return!0}const tN={id:"PS003",name:"valid-semver",description:"Syntax version must be valid semantic version",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e?.fields?.syntax)return;const t=e.fields.syntax;if(typeof t!="string"){r.report({message:"@meta.syntax must be a string",location:e.loc??r.ast.loc,suggestion:'Use a string value like syntax: "1.0.0"'});return}eN(t)||r.report({message:`Invalid semantic version: "${t}"`,location:e.loc??r.ast.loc,suggestion:'Use semantic versioning format: MAJOR.MINOR.PATCH (e.g., "1.0.0", "2.1.0-beta.1")'})}},nN={id:"PS004",name:"required-guards",description:"Required guards must be present",defaultSeverity:"error",validate:r=>{const e=r.config.requiredGuards;if(!e||e.length===0)return;const t=r.ast.blocks.find(a=>a.name==="guards");if(!t){r.report({message:`Missing @guards block. Required guards: ${e.join(", ")}`,location:r.ast.loc,suggestion:"Add a @guards block with the required guard references"});return}const s=rN(t.content);for(const a of e)s.includes(a)||r.report({message:`Missing required guard: "${a}"`,location:t.loc??r.ast.loc,suggestion:`Add @use ${a} to include the required guard`})}};function rN(r){const e=[];if(r.type==="ArrayContent"&&Array.isArray(r.elements))for(const t of r.elements)typeof t=="string"&&e.push(t);else if(r.type==="ObjectContent"&&r.properties)for(const t of Object.keys(r.properties))e.push(t);return e}function iN(r,e){for(const t of r.blocks)Am(t.content,t.loc,e);for(const t of r.extends)Am(t.content,t.loc,e)}function sN(r,e){for(const t of r.blocks)e(t);for(const t of r.extends)e(t)}function oN(r,e){for(const t of r.uses)e(t)}function Am(r,e,t){switch(r.type){case"TextContent":t(r.value,r.loc??e);break;case"ObjectContent":Ac(r.properties,r.loc??e,t);break;case"ArrayContent":vv(r.elements,r.loc??e,t);break;case"MixedContent":r.text&&t(r.text.value,r.text.loc??e),Ac(r.properties,r.loc??e,t);break}}function Ac(r,e,t){for(const s of Object.values(r))yv(s,e,t)}function vv(r,e,t){for(const s of r)yv(s,e,t)}function yv(r,e,t){if(typeof r=="string")t(r,e);else if(Array.isArray(r))vv(r,e,t);else if(r!==null&&typeof r=="object")if("type"in r){const s=r;s.type==="TextContent"&&typeof s.value=="string"&&t(s.value,s.loc??e)}else Ac(r,e,t)}function aN(r){switch(r.type){case"TextContent":return r.value.trim().length>0;case"ObjectContent":return Object.keys(r.properties).length>0;case"ArrayContent":return r.elements.length>0;case"MixedContent":return(r.text?.value?.trim().length??0)>0||Object.keys(r.properties).length>0}}const lN=[/ignore\s+(all\s+)?previous\s+instructions/i,/pretend\s+(you\s+)?(are|to\s+be)/i,/jailbreak/i,/bypass\s+(your\s+)?(rules|restrictions)/i,/disregard\s+(all\s+)?(prior|previous)/i,/forget\s+(all\s+)?(prior|previous|your)/i,/act\s+as\s+if\s+you\s+(have\s+)?no\s+restrictions/i],uN={id:"PS005",name:"blocked-patterns",description:"Content must not contain blocked patterns (prompt injection prevention)",defaultSeverity:"error",validate:r=>{const e=[...lN,...(r.config.blockedPatterns??[]).map(t=>typeof t=="string"?new RegExp(t,"i"):t)];iN(r.ast,(t,s)=>{for(const a of e)a.test(t)&&r.report({message:`Blocked pattern detected: ${a.source}`,location:s,suggestion:"Remove or rephrase the flagged content"})})}},Cm={namespace:/^@[a-z][a-z0-9-]*\/[a-z0-9-/]+(@\d+\.\d+\.\d+)?$/i,relative:/^\.\.?\/[a-z0-9-/.]+$/i};function Rm(r){return Cm.namespace.test(r)||Cm.relative.test(r)}const cN={id:"PS006",name:"valid-path",description:"Path references must be valid",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;Rm(e.raw)||r.report({message:`Invalid path reference: "${e.raw}"`,location:r.ast.inherit.loc??r.ast.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})}oN(r.ast,e=>{Rm(e.path.raw)||r.report({message:`Invalid path reference: "${e.path.raw}"`,location:e.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})})}},fN={id:"PS007",name:"deprecated",description:"Warns about deprecated features",defaultSeverity:"warning",validate:r=>{const e={};for(const s of r.ast.blocks)s.name in e&&r.report({message:`Block "@${s.name}" is deprecated`,location:s.loc,suggestion:e[s.name]});const t={};if(r.ast.meta)for(const s of Object.keys(r.ast.meta.fields??{}))s in t&&r.report({message:`Meta field "${s}" is deprecated`,location:r.ast.meta.loc??r.ast.loc,suggestion:t[s]})}},dN={id:"PS008",name:"empty-block",description:"Blocks should have content",defaultSeverity:"warning",validate:r=>{sN(r.ast,e=>{if(!aN(e.content)){const t="name"in e?e.name:e.targetPath;r.report({message:`Block "${t}" has no content`,location:e.loc,suggestion:"Add content to the block or remove it if not needed"})}})}};function hN(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function Sv(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template";if(e.type==="TypeExpression")return"type"}return"object"}function pN(r,e){const t=Sv(r);switch(e.kind){case"string":return t==="string";case"number":return t==="number";case"boolean":return t==="boolean";case"enum":return t==="string"&&e.options.includes(r)}}const mN={id:"PS009",name:"valid-params",description:"Validate parameter definitions in @meta",defaultSeverity:"error",validate:r=>{const e=r.ast.meta?.params;if(!e||e.length===0)return;const t=new Set;for(const s of e)t.has(s.name)&&r.report({message:`Duplicate parameter definition: '${s.name}'`,location:s.loc,suggestion:"Remove the duplicate parameter definition"}),t.add(s.name);for(const s of e)if(s.defaultValue!==void 0&&!pN(s.defaultValue,s.paramType)){const a=hN(s.paramType),l=Sv(s.defaultValue);r.report({message:`Default value for '${s.name}' has wrong type: expected ${a}, got ${l}`,location:s.loc,suggestion:`Change the default value to a ${a}`})}for(const s of e)s.optional&&s.defaultValue===void 0&&r.report({message:`Optional parameter '${s.name}' has no default value`,location:s.loc,suggestion:"Consider adding a default value or marking as required"})}},gN=[ZR,JR,tN,nN,uN,cN,fN,dN,mN];class vN{rules;config;disabledRules;logger;constructor(e={}){if(this.config=e,this.rules=[...gN],this.disabledRules=new Set(e.disableRules??[]),this.logger=e.logger??Jc,e.customRules)for(const t of e.customRules)this.rules.push(t);this.logger.debug(`Validator initialized with ${this.rules.length} rules`)}validate(e){const t=[],s=this.rules.filter(f=>!this.disabledRules.has(f.name)&&!this.disabledRules.has(f.id));this.logger.verbose(`Running ${s.length} validation rules`);for(const f of this.rules){if(this.disabledRules.has(f.name)||this.disabledRules.has(f.id)){this.logger.debug(`Skipping disabled rule: ${f.name}`);continue}const m=this.config.rules?.[f.name]??f.defaultSeverity;if(m==="off"){this.logger.debug(`Skipping off rule: ${f.name}`);continue}this.logger.debug(`Running rule: ${f.name} (${m})`);const g={ast:e,config:this.config,report:y=>{t.push({ruleId:f.id,ruleName:f.name,severity:m,...y})}};f.validate(g)}const a=t.filter(f=>f.severity==="error"),l=t.filter(f=>f.severity==="warning"),c=t.filter(f=>f.severity==="info");return(a.length>0||l.length>0)&&this.logger.verbose(`Validation: ${a.length} error(s), ${l.length} warning(s)`),{valid:a.length===0,errors:a,warnings:l,infos:c,all:t}}addRule(e){this.rules.push(e)}removeRule(e){const t=this.rules.findIndex(s=>s.name===e||s.id===e);return t!==-1?(this.rules.splice(t,1),!0):!1}getConfig(){return{...this.config}}getRules(){return[...this.rules]}}class yN{resolver;validator;loadedFormatters;logger;customConventions;prettierOptions;constructor(e){this.logger=e.logger??Jc,this.customConventions=e.customConventions,this.prettierOptions=e.prettier,this.resolver=new UR({fs:e.fs,cache:e.cache,logger:this.logger,envVars:e.envVars}),this.validator=new vN({...e.validator,logger:this.logger});const t=e.formatters??Cr.list();this.loadedFormatters=this.loadFormatters(t),this.logger.debug(`BrowserCompiler initialized with ${this.loadedFormatters.length} formatters`)}async compile(e){this.logger.verbose(`Entry: ${e}`),this.logger.verbose(`Targets: ${this.loadedFormatters.map(y=>y.formatter.name).join(", ")}`);const t=Date.now(),s={resolveTime:0,validateTime:0,formatTime:0,totalTime:0};this.logger.verbose("=== Stage 1: Resolve ===");const a=Date.now();let l;try{l=await this.resolver.resolve(e)}catch(y){return s.resolveTime=Date.now()-a,s.totalTime=Date.now()-t,this.logger.verbose(`Resolve failed (${s.resolveTime}ms)`),{success:!1,outputs:new Map,errors:[this.toCompileError(y)],warnings:[],stats:s}}if(s.resolveTime=Date.now()-a,this.logger.verbose(`Resolve completed (${s.resolveTime}ms)`),l.errors.length>0||!l.ast)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:l.errors.map(y=>this.toCompileError(y)),warnings:[],stats:s};this.logger.verbose("=== Stage 2: Validate ===");const c=Date.now(),f=this.validator.validate(l.ast);if(s.validateTime=Date.now()-c,this.logger.verbose(`Validate completed (${s.validateTime}ms)`),!f.valid)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:f.errors.map(y=>this.validationToCompileError(y)),warnings:f.warnings,stats:s};this.logger.verbose("=== Stage 3: Format ===");const h=Date.now(),m=new Map,g=[];for(const{formatter:y,config:S}of this.loadedFormatters){const x=Date.now();this.logger.verbose(`Formatting for ${y.name}`);try{const A=this.getFormatOptionsForTarget(y.name,S);this.logger.debug(`  Convention: ${A.convention??"default"}`);const R=y.format(l.ast,A),j=Date.now()-x;if(this.logger.verbose(`   ${R.path} (${j}ms)`),m.set(R.path,R),R.additionalFiles)for(const b of R.additionalFiles)this.logger.verbose(`   ${b.path} (additional)`),m.set(b.path,b)}catch(A){g.push({name:"FormatterError",code:"PS4000",message:`Formatter '${y.name}' failed: ${A.message}`})}}return s.formatTime=Date.now()-h,s.totalTime=Date.now()-t,this.logger.verbose(`Format completed (${s.formatTime}ms)`),g.length>0?{success:!1,outputs:m,errors:g,warnings:f.warnings,stats:s}:{success:!0,outputs:m,errors:[],warnings:f.warnings,stats:s}}getFormatters(){return this.loadedFormatters.map(e=>e.formatter)}clearCache(){this.resolver.clearCache()}getFormatOptionsForTarget(e,t){const s={outputPath:t?.output,version:t?.version,prettier:this.prettierOptions},a=t?.convention;return a&&this.customConventions?.[a]?s.convention=this.customConventions[a]:a&&(s.convention=a),s}loadFormatters(e){return e.map(t=>{if(typeof t=="string")return{formatter:this.loadFormatterByName(t)};if(typeof t=="function")return{formatter:new t};if("name"in t&&typeof t.name=="string"&&!("format"in t)){const s=t;return{formatter:this.loadFormatterByName(s.name),config:s.config}}return{formatter:t}})}loadFormatterByName(e){const t=Cr.get(e);if(t)return t;throw new Error(`Unknown formatter: '${e}'. Available formatters: ${Cr.list().join(", ")}`)}toCompileError(e){const t=e;return{name:e.name,code:t.code??"PS0000",message:e.message,location:t.location?{file:t.location.file,line:t.location.line,column:t.location.column}:void 0}}validationToCompileError(e){return{name:"ValidationError",code:e.ruleId,message:e.message,location:e.location?{file:e.location.file,line:e.location.line,column:e.location.column}:void 0}}}const SN=`@meta {
  id: "@core/base"
  syntax: "1.0.0"
  description: "Universal AI assistant foundation"
  tags: [core, foundation]
}

@identity {
  """
  You are a helpful, accurate, and thoughtful AI assistant.

  Core principles:
  - Accuracy over speed - verify before responding
  - Clarity over complexity - explain simply first
  - Safety first - never compromise security
  - Respect boundaries - acknowledge limitations
  """
}

@standards {
  communication: ["Professional tone", "Clear format", "Citations when applicable"]
  reasoning: ["Show work", "Acknowledge uncertainty"]
}

@restrictions {
  - "Never generate harmful, illegal, or unethical content"
  - "Never pretend to have capabilities you don't have"
  - "Always clarify when unsure rather than guessing"
}
`,EN=`@meta {
  id: "@core/quality"
  syntax: "1.0.0"
  description: "Code quality standards mixin - use with @use"
  tags: [core, quality, mixin]
  mixin: true
}

@identity {
  """
  You prioritize code quality and maintainability in all outputs.

  Quality principles:
  - Write code for humans first, machines second
  - Favor readability over cleverness
  - Keep functions small and focused
  - Make dependencies explicit
  """
}

@standards {
  code: ["Descriptive naming", "Single responsibility functions", "Consistent formatting"]
  architecture: ["Loose coupling", "High cohesion", "Explicit dependencies"]
  testing: ["Meaningful coverage", "Isolated tests", "Descriptive naming"]
}

@restrictions {
  - "Never sacrifice readability for micro-optimizations"
  - "Never leave dead code or commented-out blocks"
  - "Never use magic numbers without named constants"
  - "Never ignore compiler/linter warnings without justification"
}

@knowledge {
  """
  ## SOLID Principles
  - **S**ingle Responsibility: One reason to change
  - **O**pen/Closed: Open for extension, closed for modification
  - **L**iskov Substitution: Subtypes must be substitutable
  - **I**nterface Segregation: Many specific interfaces over one general
  - **D**ependency Inversion: Depend on abstractions
  """
}

@shortcuts {
  "/quality": "Review code for quality improvements"
  "/refactor": "Suggest refactoring opportunities"
}
`,TN=`@meta {
  id: "@core/security"
  syntax: "1.0.0"
  description: "Security best practices mixin - use with @use"
  tags: [core, security, mixin]
  mixin: true
}

@identity {
  """
  You prioritize security in all interactions and code generation.

  Security mindset:
  - Assume all input is potentially malicious
  - Apply defense in depth principles
  - Follow the principle of least privilege
  - Keep security considerations visible
  """
}

@standards {
  code: ["Input validation required", "Output encoding required", "Check authorization"]
  secrets: ["Never hardcoded", "Never logged", "Prevent exposure"]
  dependencies: ["Audit regularly", "Pin versions", "Use trusted sources only"]
}

@restrictions {
  - "Never generate code with known vulnerabilities"
  - "Never expose secrets, credentials, or API keys"
  - "Never disable security features without explicit user consent"
  - "Never trust user input without validation"
  - "Never use deprecated or insecure cryptographic functions"
}

@knowledge {
  """
  ## OWASP Top 10 Awareness
  - Injection (SQL, NoSQL, OS, LDAP)
  - Broken Authentication
  - Sensitive Data Exposure
  - XML External Entities (XXE)
  - Broken Access Control
  - Security Misconfiguration
  - Cross-Site Scripting (XSS)
  - Insecure Deserialization
  - Using Components with Known Vulnerabilities
  - Insufficient Logging & Monitoring
  """
}

@shortcuts {
  "/security-review": "Review code for security vulnerabilities"
  "/threat-model": "Analyze potential security threats"
}
`,xN={"@core/base.prs":SN,"@core/quality.prs":EN,"@core/security.prs":TN};function wN(){return{...xN}}async function kN(r,e,t={}){const s=new Rc(r);if(t.bundledRegistry!==!1){const l=wN();for(const[c,f]of Object.entries(l))s.exists(c)||s.write(c,f)}return new yN({fs:s,formatters:t.formatters,validator:t.validator,customConventions:t.customConventions,prettier:t.prettier,envVars:t.envVars}).compile(e)}const AN=300;function CN(){const r=ie(V0),e=ie(h=>h.activeFile),t=ie(h=>h.config),s=ie(h=>h.setCompiling),a=ie(h=>h.setCompileResult),l=Z.useRef(null),c=Z.useRef(""),f=Z.useCallback(async()=>{const h=JSON.stringify({files:r,config:t});if(h===c.current)return;c.current=h;const m=Object.entries(t.targets).filter(([,g])=>g.enabled).map(([g,y])=>({name:g,config:y.version||y.convention?{...y.version&&{version:y.version},...y.convention&&{convention:y.convention}}:void 0}));if(m.length===0){a({success:!0,outputs:new Map,errors:[],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}});return}s(!0);try{const g=await kN(r,e,{bundledRegistry:!0,formatters:m,prettier:{tabWidth:t.formatting.tabWidth,proseWrap:t.formatting.proseWrap,printWidth:t.formatting.printWidth},envVars:t.envVars});a(g)}catch(g){console.error("Compilation error:",g),a({success:!1,outputs:new Map,errors:[{name:"CompileError",code:"PS0000",message:g instanceof Error?g.message:String(g)}],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}})}finally{s(!1)}},[r,e,t,s,a]);return Z.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{f()},AN),()=>{l.current&&clearTimeout(l.current)}),[f]),Z.useEffect(()=>{f()},[t]),{compile:f}}function RN(){CN();const r=ie(e=>e.showExamples);return C.jsxs("div",{className:"h-screen flex flex-col bg-ps-bg",children:[C.jsx(oS,{}),C.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[C.jsxs("div",{className:"w-1/2 flex flex-col border-r border-ps-border",children:[C.jsx(aS,{}),C.jsx("div",{className:"flex-1",children:C.jsx(xE,{})})]}),C.jsx("div",{className:"w-1/2 flex flex-col",children:C.jsx(AE,{})})]}),r&&C.jsx(NE,{}),C.jsx(LE,{}),C.jsx(bE,{})]})}const Ev=document.getElementById("root");if(!Ev)throw new Error("Root element not found");C0.createRoot(Ev).render(C.jsx(Z.StrictMode,{children:C.jsx(RN,{})}))});export default NN();
