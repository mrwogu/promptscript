var f0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var SN=f0((_t,Pt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Ec(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _u={exports:{}},rs={},Pu={exports:{}},me={};var Bh;function d0(){if(Bh)return me;Bh=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function j(k,F,fe){this.props=k,this.context=F,this.refs=R,this.updater=fe||x}j.prototype.isReactComponent={},j.prototype.setState=function(k,F){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,F,"setState")},j.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function b(){}b.prototype=j.prototype;function _(k,F,fe){this.props=k,this.context=F,this.refs=R,this.updater=fe||x}var P=_.prototype=new b;P.constructor=_,A(P,j.prototype),P.isPureReactComponent=!0;var M=Array.isArray,z=Object.prototype.hasOwnProperty,L={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function G(k,F,fe){var te,ye={},oe=null,he=null;if(F!=null)for(te in F.ref!==void 0&&(he=F.ref),F.key!==void 0&&(oe=""+F.key),F)z.call(F,te)&&!D.hasOwnProperty(te)&&(ye[te]=F[te]);var ve=arguments.length-2;if(ve===1)ye.children=fe;else if(1<ve){for(var pe=Array(ve),Le=0;Le<ve;Le++)pe[Le]=arguments[Le+2];ye.children=pe}if(k&&k.defaultProps)for(te in ve=k.defaultProps,ve)ye[te]===void 0&&(ye[te]=ve[te]);return{$$typeof:r,type:k,key:oe,ref:he,props:ye,_owner:L.current}}function ke(k,F){return{$$typeof:r,type:k.type,key:F,ref:k.ref,props:k.props,_owner:k._owner}}function ce(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function We(k){var F={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(fe){return F[fe]})}var et=/\/+/g;function Fe(k,F){return typeof k=="object"&&k!==null&&k.key!=null?We(""+k.key):F.toString(36)}function $e(k,F,fe,te,ye){var oe=typeof k;(oe==="undefined"||oe==="boolean")&&(k=null);var he=!1;if(k===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(k.$$typeof){case r:case e:he=!0}}if(he)return he=k,ye=ye(he),k=te===""?"."+Fe(he,0):te,M(ye)?(fe="",k!=null&&(fe=k.replace(et,"$&/")+"/"),$e(ye,F,fe,"",function(Le){return Le})):ye!=null&&(ce(ye)&&(ye=ke(ye,fe+(!ye.key||he&&he.key===ye.key?"":(""+ye.key).replace(et,"$&/")+"/")+k)),F.push(ye)),1;if(he=0,te=te===""?".":te+":",M(k))for(var ve=0;ve<k.length;ve++){oe=k[ve];var pe=te+Fe(oe,ve);he+=$e(oe,F,fe,pe,ye)}else if(pe=S(k),typeof pe=="function")for(k=pe.call(k),ve=0;!(oe=k.next()).done;)oe=oe.value,pe=te+Fe(oe,ve++),he+=$e(oe,F,fe,pe,ye);else if(oe==="object")throw F=String(k),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return he}function de(k,F,fe){if(k==null)return k;var te=[],ye=0;return $e(k,te,"","",function(oe){return F.call(fe,oe,ye++)}),te}function ge(k){if(k._status===-1){var F=k._result;F=F(),F.then(function(fe){(k._status===0||k._status===-1)&&(k._status=1,k._result=fe)},function(fe){(k._status===0||k._status===-1)&&(k._status=2,k._result=fe)}),k._status===-1&&(k._status=0,k._result=F)}if(k._status===1)return k._result.default;throw k._result}var we={current:null},W={transition:null},J={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function K(){throw Error("act(...) is not supported in production builds of React.")}return me.Children={map:de,forEach:function(k,F,fe){de(k,function(){F.apply(this,arguments)},fe)},count:function(k){var F=0;return de(k,function(){F++}),F},toArray:function(k){return de(k,function(F){return F})||[]},only:function(k){if(!ce(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},me.Component=j,me.Fragment=n,me.Profiler=a,me.PureComponent=_,me.StrictMode=s,me.Suspense=h,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,me.act=K,me.cloneElement=function(k,F,fe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var te=A({},k.props),ye=k.key,oe=k.ref,he=k._owner;if(F!=null){if(F.ref!==void 0&&(oe=F.ref,he=L.current),F.key!==void 0&&(ye=""+F.key),k.type&&k.type.defaultProps)var ve=k.type.defaultProps;for(pe in F)z.call(F,pe)&&!D.hasOwnProperty(pe)&&(te[pe]=F[pe]===void 0&&ve!==void 0?ve[pe]:F[pe])}var pe=arguments.length-2;if(pe===1)te.children=fe;else if(1<pe){ve=Array(pe);for(var Le=0;Le<pe;Le++)ve[Le]=arguments[Le+2];te.children=ve}return{$$typeof:r,type:k.type,key:ye,ref:oe,props:te,_owner:he}},me.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},me.createElement=G,me.createFactory=function(k){var F=G.bind(null,k);return F.type=k,F},me.createRef=function(){return{current:null}},me.forwardRef=function(k){return{$$typeof:f,render:k}},me.isValidElement=ce,me.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:ge}},me.memo=function(k,F){return{$$typeof:m,type:k,compare:F===void 0?null:F}},me.startTransition=function(k){var F=W.transition;W.transition={};try{k()}finally{W.transition=F}},me.unstable_act=K,me.useCallback=function(k,F){return we.current.useCallback(k,F)},me.useContext=function(k){return we.current.useContext(k)},me.useDebugValue=function(){},me.useDeferredValue=function(k){return we.current.useDeferredValue(k)},me.useEffect=function(k,F){return we.current.useEffect(k,F)},me.useId=function(){return we.current.useId()},me.useImperativeHandle=function(k,F,fe){return we.current.useImperativeHandle(k,F,fe)},me.useInsertionEffect=function(k,F){return we.current.useInsertionEffect(k,F)},me.useLayoutEffect=function(k,F){return we.current.useLayoutEffect(k,F)},me.useMemo=function(k,F){return we.current.useMemo(k,F)},me.useReducer=function(k,F,fe){return we.current.useReducer(k,F,fe)},me.useRef=function(k){return we.current.useRef(k)},me.useState=function(k){return we.current.useState(k)},me.useSyncExternalStore=function(k,F,fe){return we.current.useSyncExternalStore(k,F,fe)},me.useTransition=function(){return we.current.useTransition()},me.version="18.3.1",me}var zh;function ks(){return zh||(zh=1,Pu.exports=d0()),Pu.exports}var Vh;function h0(){if(Vh)return rs;Vh=1;var r=ks(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var g,y={},S=null,x=null;m!==void 0&&(S=""+m),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(x=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(f&&f.defaultProps)for(g in h=f.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:f,key:S,ref:x,props:y,_owner:a.current}}return rs.Fragment=n,rs.jsx=c,rs.jsxs=c,rs}var Wh;function p0(){return Wh||(Wh=1,_u.exports=h0()),_u.exports}var C=p0(),Z=ks();const Ar=Ec(Z);var Vo={},Lu={exports:{}},Et={},Mu={exports:{}},bu={};var Gh;function m0(){return Gh||(Gh=1,(function(r){function e(W,J){var K=W.length;W.push(J);e:for(;0<K;){var k=K-1>>>1,F=W[k];if(0<a(F,J))W[k]=J,W[K]=F,K=k;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var J=W[0],K=W.pop();if(K!==J){W[0]=K;e:for(var k=0,F=W.length,fe=F>>>1;k<fe;){var te=2*(k+1)-1,ye=W[te],oe=te+1,he=W[oe];if(0>a(ye,K))oe<F&&0>a(he,ye)?(W[k]=he,W[oe]=K,k=oe):(W[k]=ye,W[te]=K,k=te);else if(oe<F&&0>a(he,K))W[k]=he,W[oe]=K,k=oe;else break e}}return J}function a(W,J){var K=W.sortIndex-J.sortIndex;return K!==0?K:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,S=3,x=!1,A=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var J=n(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=W)s(m),J.sortIndex=J.expirationTime,e(h,J);else break;J=n(m)}}function M(W){if(R=!1,P(W),!A)if(n(h)!==null)A=!0,ge(z);else{var J=n(m);J!==null&&we(M,J.startTime-W)}}function z(W,J){A=!1,R&&(R=!1,b(G),G=-1),x=!0;var K=S;try{for(P(J),y=n(h);y!==null&&(!(y.expirationTime>J)||W&&!We());){var k=y.callback;if(typeof k=="function"){y.callback=null,S=y.priorityLevel;var F=k(y.expirationTime<=J);J=r.unstable_now(),typeof F=="function"?y.callback=F:y===n(h)&&s(h),P(J)}else s(h);y=n(h)}if(y!==null)var fe=!0;else{var te=n(m);te!==null&&we(M,te.startTime-J),fe=!1}return fe}finally{y=null,S=K,x=!1}}var L=!1,D=null,G=-1,ke=5,ce=-1;function We(){return!(r.unstable_now()-ce<ke)}function et(){if(D!==null){var W=r.unstable_now();ce=W;var J=!0;try{J=D(!0,W)}finally{J?Fe():(L=!1,D=null)}}else L=!1}var Fe;if(typeof _=="function")Fe=function(){_(et)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,de=$e.port2;$e.port1.onmessage=et,Fe=function(){de.postMessage(null)}}else Fe=function(){j(et,0)};function ge(W){D=W,L||(L=!0,Fe())}function we(W,J){G=j(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,ge(z))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return n(h)},r.unstable_next=function(W){switch(S){case 1:case 2:case 3:var J=3;break;default:J=S}var K=S;S=J;try{return W()}finally{S=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=S;S=W;try{return J()}finally{S=K}},r.unstable_scheduleCallback=function(W,J,K){var k=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?k+K:k):K=k,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=K+F,W={id:g++,callback:J,priorityLevel:W,startTime:K,expirationTime:F,sortIndex:-1},K>k?(W.sortIndex=K,e(m,W),n(h)===null&&W===n(m)&&(R?(b(G),G=-1):R=!0,we(M,K-k))):(W.sortIndex=F,e(h,W),A||x||(A=!0,ge(z))),W},r.unstable_shouldYield=We,r.unstable_wrapCallback=function(W){var J=S;return function(){var K=S;S=J;try{return W.apply(this,arguments)}finally{S=K}}}})(bu)),bu}var Kh;function g0(){return Kh||(Kh=1,Mu.exports=m0()),Mu.exports}var Hh;function v0(){if(Hh)return Et;Hh=1;var r=ks(),e=g0();function n(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(a[t]=i,t=0;t<i.length;t++)s.add(i[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function S(t){return h.call(y,t)?!0:h.call(g,t)?!1:m.test(t)?y[t]=!0:(g[t]=!0,!1)}function x(t,i,o,u){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A(t,i,o,u){if(i===null||typeof i>"u"||x(t,i,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function R(t,i,o,u,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new R(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];j[i]=new R(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new R(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new R(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new R(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new R(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new R(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new R(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new R(t,5,!1,t.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(b,_);j[i]=new R(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(b,_);j[i]=new R(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(b,_);j[i]=new R(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new R(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new R(t,1,!1,t.toLowerCase(),null,!0,!0)});function P(t,i,o,u){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,o,d,u)&&(o=null),u||d===null?S(i)&&(o===null?t.removeAttribute(i):t.setAttribute(i,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(i=d.attributeName,u=d.attributeNamespace,o===null?t.removeAttribute(i):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,u?t.setAttributeNS(u,i,o):t.setAttribute(i,o))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),L=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),We=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,k;function F(t){if(k===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||""}return`
`+k+t}var fe=!1;function te(t,i){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var u=O}Reflect.construct(t,[],i)}else{try{i.call()}catch(O){u=O}t.call(i.prototype)}else{try{throw Error()}catch(O){u=O}t()}}catch(O){if(O&&u&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),p=u.stack.split(`
`),v=d.length-1,E=p.length-1;1<=v&&0<=E&&d[v]!==p[E];)E--;for(;1<=v&&0<=E;v--,E--)if(d[v]!==p[E]){if(v!==1||E!==1)do if(v--,E--,0>E||d[v]!==p[E]){var T=`
`+d[v].replace(" at new "," at ");return t.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",t.displayName)),T}while(1<=v&&0<=E);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?F(t):""}function ye(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=te(t.type,!1),t;case 11:return t=te(t.type.render,!1),t;case 1:return t=te(t.type,!0),t;default:return""}}function oe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case L:return"Portal";case ke:return"Profiler";case G:return"StrictMode";case Fe:return"Suspense";case $e:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case We:return(t.displayName||"Context")+".Consumer";case ce:return(t._context.displayName||"Context")+".Provider";case et:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case de:return i=t.displayName||null,i!==null?i:oe(t.type)||"Memo";case ge:i=t._payload,t=t._init;try{return oe(t(i))}catch{}}return null}function he(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ve(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pe(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Le(t){var i=pe(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function kt(t){t._valueTracker||(t._valueTracker=Le(t))}function jt(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return t&&(u=pe(t)?t.checked?"true":"false":t.value),t=u,t!==o?(i.setValue(t),!0):!1}function Ft(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cr(t,i){var o=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function vi(t,i){var o=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;o=ve(i.value!=null?i.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Yc(t,i){i=i.checked,i!=null&&P(t,"checked",i,!1)}function Ua(t,i){Yc(t,i);var o=ve(i.value),u=i.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Da(t,i.type,o):i.hasOwnProperty("defaultValue")&&Da(t,i.type,ve(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Xc(t,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,o||i===t.value||(t.value=i),t.defaultValue=i}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Da(t,i,o){(i!=="number"||Ft(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var yi=Array.isArray;function Mr(t,i,o,u){if(t=t.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=i.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&u&&(t[o].defaultSelected=!0)}else{for(o=""+ve(o),i=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Ba(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qc(t,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(n(92));if(yi(o)){if(1<o.length)throw Error(n(93));o=o[0]}i=o}i==null&&(i=""),o=i}t._wrapperState={initialValue:ve(o)}}function Qc(t,i){var o=ve(i.value),u=ve(i.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),i.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Zc(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Jc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function za(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Jc(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ms,ef=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,u,d){MSApp.execUnsafeLocalFunction(function(){return t(i,o,u,d)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ms.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Si(t,i){if(i){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=i;return}}t.textContent=i}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mv=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(t){mv.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ei[i]=Ei[t]})});function tf(t,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||Ei.hasOwnProperty(t)&&Ei[t]?(""+i).trim():i+"px"}function nf(t,i){t=t.style;for(var o in i)if(i.hasOwnProperty(o)){var u=o.indexOf("--")===0,d=tf(o,i[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,d):t[o]=d}}var gv=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Va(t,i){if(i){if(gv[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Wa(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function Ka(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ha=null,br=null,jr=null;function rf(t){if(t=zi(t)){if(typeof Ha!="function")throw Error(n(280));var i=t.stateNode;i&&(i=ro(i),Ha(t.stateNode,t.type,i))}}function sf(t){br?jr?jr.push(t):jr=[t]:br=t}function of(){if(br){var t=br,i=jr;if(jr=br=null,rf(t),i)for(t=0;t<i.length;t++)rf(i[t])}}function af(t,i){return t(i)}function lf(){}var Ya=!1;function uf(t,i,o){if(Ya)return t(i,o);Ya=!0;try{return af(t,i,o)}finally{Ya=!1,(br!==null||jr!==null)&&(lf(),of())}}function Ti(t,i){var o=t.stateNode;if(o===null)return null;var u=ro(o);if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,i,typeof o));return o}var Xa=!1;if(f)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Xa=!1}function vv(t,i,o,u,d,p,v,E,T){var O=Array.prototype.slice.call(arguments,3);try{i.apply(o,O)}catch(U){this.onError(U)}}var wi=!1,bs=null,js=!1,qa=null,yv={onError:function(t){wi=!0,bs=t}};function Sv(t,i,o,u,d,p,v,E,T){wi=!1,bs=null,vv.apply(yv,arguments)}function Ev(t,i,o,u,d,p,v,E,T){if(Sv.apply(this,arguments),wi){if(wi){var O=bs;wi=!1,bs=null}else throw Error(n(198));js||(js=!0,qa=O)}}function fr(t){var i=t,o=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(o=i.return),t=i.return;while(t)}return i.tag===3?o:null}function cf(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function ff(t){if(fr(t)!==t)throw Error(n(188))}function Tv(t){var i=t.alternate;if(!i){if(i=fr(t),i===null)throw Error(n(188));return i!==t?null:t}for(var o=t,u=i;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return ff(d),t;if(p===u)return ff(d),i;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,E=d.child;E;){if(E===o){v=!0,o=d,u=p;break}if(E===u){v=!0,u=d,o=p;break}E=E.sibling}if(!v){for(E=p.child;E;){if(E===o){v=!0,o=p,u=d;break}if(E===u){v=!0,u=p,o=d;break}E=E.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:i}function df(t){return t=Tv(t),t!==null?hf(t):null}function hf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=hf(t);if(i!==null)return i;t=t.sibling}return null}var pf=e.unstable_scheduleCallback,mf=e.unstable_cancelCallback,xv=e.unstable_shouldYield,wv=e.unstable_requestPaint,ze=e.unstable_now,kv=e.unstable_getCurrentPriorityLevel,Qa=e.unstable_ImmediatePriority,gf=e.unstable_UserBlockingPriority,Fs=e.unstable_NormalPriority,Av=e.unstable_LowPriority,vf=e.unstable_IdlePriority,$s=null,fn=null;function Cv(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot($s,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Iv,Rv=Math.log,Nv=Math.LN2;function Iv(t){return t>>>=0,t===0?32:31-(Rv(t)/Nv|0)|0}var Us=64,Ds=4194304;function ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bs(t,i){var o=t.pendingLanes;if(o===0)return 0;var u=0,d=t.suspendedLanes,p=t.pingedLanes,v=o&268435455;if(v!==0){var E=v&~d;E!==0?u=ki(E):(p&=v,p!==0&&(u=ki(p)))}else v=o&~d,v!==0?u=ki(v):p!==0&&(u=ki(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=o&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)o=31-qt(i),d=1<<o,u|=t[o],i&=~d;return u}function Ov(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _v(t,i){for(var o=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-qt(p),E=1<<v,T=d[v];T===-1?((E&o)===0||(E&u)!==0)&&(d[v]=Ov(E,i)):T<=i&&(t.expiredLanes|=E),p&=~E}}function Za(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yf(){var t=Us;return Us<<=1,(Us&4194240)===0&&(Us=64),t}function Ja(t){for(var i=[],o=0;31>o;o++)i.push(t);return i}function Ai(t,i,o){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-qt(i),t[i]=o}function Pv(t,i){var o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-qt(o),p=1<<d;i[d]=0,u[d]=-1,t[d]=-1,o&=~p}}function el(t,i){var o=t.entangledLanes|=i;for(t=t.entanglements;o;){var u=31-qt(o),d=1<<u;d&i|t[u]&i&&(t[u]|=i),o&=~d}}var Ae=0;function Sf(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ef,tl,Tf,xf,wf,nl=!1,zs=[],$n=null,Un=null,Dn=null,Ci=new Map,Ri=new Map,Bn=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kf(t,i){switch(t){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Ci.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(i.pointerId)}}function Ni(t,i,o,u,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=zi(i),i!==null&&tl(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function Mv(t,i,o,u,d){switch(i){case"focusin":return $n=Ni($n,t,i,o,u,d),!0;case"dragenter":return Un=Ni(Un,t,i,o,u,d),!0;case"mouseover":return Dn=Ni(Dn,t,i,o,u,d),!0;case"pointerover":var p=d.pointerId;return Ci.set(p,Ni(Ci.get(p)||null,t,i,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Ri.set(p,Ni(Ri.get(p)||null,t,i,o,u,d)),!0}return!1}function Af(t){var i=dr(t.target);if(i!==null){var o=fr(i);if(o!==null){if(i=o.tag,i===13){if(i=cf(o),i!==null){t.blockedOn=i,wf(t.priority,function(){Tf(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vs(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var o=il(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);Ga=u,o.target.dispatchEvent(u),Ga=null}else return i=zi(o),i!==null&&tl(i),t.blockedOn=o,!1;i.shift()}return!0}function Cf(t,i,o){Vs(t)&&o.delete(i)}function bv(){nl=!1,$n!==null&&Vs($n)&&($n=null),Un!==null&&Vs(Un)&&(Un=null),Dn!==null&&Vs(Dn)&&(Dn=null),Ci.forEach(Cf),Ri.forEach(Cf)}function Ii(t,i){t.blockedOn===i&&(t.blockedOn=null,nl||(nl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bv)))}function Oi(t){function i(d){return Ii(d,t)}if(0<zs.length){Ii(zs[0],t);for(var o=1;o<zs.length;o++){var u=zs[o];u.blockedOn===t&&(u.blockedOn=null)}}for($n!==null&&Ii($n,t),Un!==null&&Ii(Un,t),Dn!==null&&Ii(Dn,t),Ci.forEach(i),Ri.forEach(i),o=0;o<Bn.length;o++)u=Bn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Bn.length&&(o=Bn[0],o.blockedOn===null);)Af(o),o.blockedOn===null&&Bn.shift()}var Fr=M.ReactCurrentBatchConfig,Ws=!0;function jv(t,i,o,u){var d=Ae,p=Fr.transition;Fr.transition=null;try{Ae=1,rl(t,i,o,u)}finally{Ae=d,Fr.transition=p}}function Fv(t,i,o,u){var d=Ae,p=Fr.transition;Fr.transition=null;try{Ae=4,rl(t,i,o,u)}finally{Ae=d,Fr.transition=p}}function rl(t,i,o,u){if(Ws){var d=il(t,i,o,u);if(d===null)Tl(t,i,u,Gs,o),kf(t,u);else if(Mv(d,t,i,o,u))u.stopPropagation();else if(kf(t,u),i&4&&-1<Lv.indexOf(t)){for(;d!==null;){var p=zi(d);if(p!==null&&Ef(p),p=il(t,i,o,u),p===null&&Tl(t,i,u,Gs,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Tl(t,i,u,null,o)}}var Gs=null;function il(t,i,o,u){if(Gs=null,t=Ka(u),t=dr(t),t!==null)if(i=fr(t),i===null)t=null;else if(o=i.tag,o===13){if(t=cf(i),t!==null)return t;t=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Gs=t,null}function Rf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kv()){case Qa:return 1;case gf:return 4;case Fs:case Av:return 16;case vf:return 536870912;default:return 16}default:return 16}}var zn=null,sl=null,Ks=null;function Nf(){if(Ks)return Ks;var t,i=sl,o=i.length,u,d="value"in zn?zn.value:zn.textContent,p=d.length;for(t=0;t<o&&i[t]===d[t];t++);var v=o-t;for(u=1;u<=v&&i[o-u]===d[p-u];u++);return Ks=d.slice(t,1<u?1-u:void 0)}function Hs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function If(){return!1}function At(t){function i(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(o=t[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ys:If,this.isPropagationStopped=If,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),i}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=At($r),_i=K({},$r,{view:0,detail:0}),$v=At(_i),al,ll,Pi,Xs=K({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(al=t.screenX-Pi.screenX,ll=t.screenY-Pi.screenY):ll=al=0,Pi=t),al)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),Of=At(Xs),Uv=K({},Xs,{dataTransfer:0}),Dv=At(Uv),Bv=K({},_i,{relatedTarget:0}),ul=At(Bv),zv=K({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Vv=At(zv),Wv=K({},$r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gv=At(Wv),Kv=K({},$r,{data:0}),_f=At(Kv),Hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Xv[t])?!!i[t]:!1}function cl(){return qv}var Qv=K({},_i,{key:function(t){if(t.key){var i=Hv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(t){return t.type==="keypress"?Hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zv=At(Qv),Jv=K({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pf=At(Jv),ey=K({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),ty=At(ey),ny=K({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),ry=At(ny),iy=K({},Xs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sy=At(iy),oy=[9,13,27,32],fl=f&&"CompositionEvent"in window,Li=null;f&&"documentMode"in document&&(Li=document.documentMode);var ay=f&&"TextEvent"in window&&!Li,Lf=f&&(!fl||Li&&8<Li&&11>=Li),Mf=" ",bf=!1;function jf(t,i){switch(t){case"keyup":return oy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ff(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function ly(t,i){switch(t){case"compositionend":return Ff(i);case"keypress":return i.which!==32?null:(bf=!0,Mf);case"textInput":return t=i.data,t===Mf&&bf?null:t;default:return null}}function uy(t,i){if(Ur)return t==="compositionend"||!fl&&jf(t,i)?(t=Nf(),Ks=sl=zn=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lf&&i.locale!=="ko"?null:i.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $f(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!cy[t.type]:i==="textarea"}function Uf(t,i,o,u){sf(u),i=eo(i,"onChange"),0<i.length&&(o=new ol("onChange","change",null,o,u),t.push({event:o,listeners:i}))}var Mi=null,bi=null;function fy(t){rd(t,0)}function qs(t){var i=Wr(t);if(jt(i))return t}function dy(t,i){if(t==="change")return i}var Df=!1;if(f){var dl;if(f){var hl="oninput"in document;if(!hl){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),hl=typeof Bf.oninput=="function"}dl=hl}else dl=!1;Df=dl&&(!document.documentMode||9<document.documentMode)}function zf(){Mi&&(Mi.detachEvent("onpropertychange",Vf),bi=Mi=null)}function Vf(t){if(t.propertyName==="value"&&qs(bi)){var i=[];Uf(i,bi,t,Ka(t)),uf(fy,i)}}function hy(t,i,o){t==="focusin"?(zf(),Mi=i,bi=o,Mi.attachEvent("onpropertychange",Vf)):t==="focusout"&&zf()}function py(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qs(bi)}function my(t,i){if(t==="click")return qs(i)}function gy(t,i){if(t==="input"||t==="change")return qs(i)}function vy(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Qt=typeof Object.is=="function"?Object.is:vy;function ji(t,i){if(Qt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var o=Object.keys(t),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!h.call(i,d)||!Qt(t[d],i[d]))return!1}return!0}function Wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gf(t,i){var o=Wf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=i&&u>=i)return{node:o,offset:i-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wf(o)}}function Kf(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Kf(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Hf(){for(var t=window,i=Ft();i instanceof t.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)t=i.contentWindow;else break;i=Ft(t.document)}return i}function pl(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function yy(t){var i=Hf(),o=t.focusedElem,u=t.selectionRange;if(i!==o&&o&&o.ownerDocument&&Kf(o.ownerDocument.documentElement,o)){if(u!==null&&pl(o)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(t,o.value.length);else if(t=(i=o.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!t.extend&&p>u&&(d=u,u=p,p=d),d=Gf(o,p);var v=Gf(o,u);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),p>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=o;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)t=i[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sy=f&&"documentMode"in document&&11>=document.documentMode,Dr=null,ml=null,Fi=null,gl=!1;function Yf(t,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gl||Dr==null||Dr!==Ft(u)||(u=Dr,"selectionStart"in u&&pl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fi&&ji(Fi,u)||(Fi=u,u=eo(ml,"onSelect"),0<u.length&&(i=new ol("onSelect","select",null,i,o),t.push({event:i,listeners:u}),i.target=Dr)))}function Qs(t,i){var o={};return o[t.toLowerCase()]=i.toLowerCase(),o["Webkit"+t]="webkit"+i,o["Moz"+t]="moz"+i,o}var Br={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},vl={},Xf={};f&&(Xf=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Zs(t){if(vl[t])return vl[t];if(!Br[t])return t;var i=Br[t],o;for(o in i)if(i.hasOwnProperty(o)&&o in Xf)return vl[t]=i[o];return t}var qf=Zs("animationend"),Qf=Zs("animationiteration"),Zf=Zs("animationstart"),Jf=Zs("transitionend"),ed=new Map,td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(t,i){ed.set(t,i),l(i,[t])}for(var yl=0;yl<td.length;yl++){var Sl=td[yl],Ey=Sl.toLowerCase(),Ty=Sl[0].toUpperCase()+Sl.slice(1);Vn(Ey,"on"+Ty)}Vn(qf,"onAnimationEnd"),Vn(Qf,"onAnimationIteration"),Vn(Zf,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(Jf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xy=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function nd(t,i,o){var u=t.type||"unknown-event";t.currentTarget=o,Ev(u,i,void 0,t),t.currentTarget=null}function rd(t,i){i=(i&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var E=u[v],T=E.instance,O=E.currentTarget;if(E=E.listener,T!==p&&d.isPropagationStopped())break e;nd(d,E,O),p=T}else for(v=0;v<u.length;v++){if(E=u[v],T=E.instance,O=E.currentTarget,E=E.listener,T!==p&&d.isPropagationStopped())break e;nd(d,E,O),p=T}}}if(js)throw t=qa,js=!1,qa=null,t}function Ie(t,i){var o=i[Rl];o===void 0&&(o=i[Rl]=new Set);var u=t+"__bubble";o.has(u)||(id(i,t,2,!1),o.add(u))}function El(t,i,o){var u=0;i&&(u|=4),id(o,t,u,i)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[Js]){t[Js]=!0,s.forEach(function(o){o!=="selectionchange"&&(xy.has(o)||El(o,!1,t),El(o,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Js]||(i[Js]=!0,El("selectionchange",!1,i))}}function id(t,i,o,u){switch(Rf(i)){case 1:var d=jv;break;case 4:d=Fv;break;default:d=rl}o=d.bind(null,i,o,t),d=void 0,!Xa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(i,o,{capture:!0,passive:d}):t.addEventListener(i,o,!0):d!==void 0?t.addEventListener(i,o,{passive:d}):t.addEventListener(i,o,!1)}function Tl(t,i,o,u,d){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var E=u.stateNode.containerInfo;if(E===d||E.nodeType===8&&E.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===d||T.nodeType===8&&T.parentNode===d))return;v=v.return}for(;E!==null;){if(v=dr(E),v===null)return;if(T=v.tag,T===5||T===6){u=p=v;continue e}E=E.parentNode}}u=u.return}uf(function(){var O=p,U=Ka(o),B=[];e:{var $=ed.get(t);if($!==void 0){var H=ol,X=t;switch(t){case"keypress":if(Hs(o)===0)break e;case"keydown":case"keyup":H=Zv;break;case"focusin":X="focus",H=ul;break;case"focusout":X="blur",H=ul;break;case"beforeblur":case"afterblur":H=ul;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Dv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=ty;break;case qf:case Qf:case Zf:H=Vv;break;case Jf:H=ry;break;case"scroll":H=$v;break;case"wheel":H=sy;break;case"copy":case"cut":case"paste":H=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Pf}var q=(i&4)!==0,Ve=!q&&t==="scroll",N=q?$!==null?$+"Capture":null:$;q=[];for(var w=O,I;w!==null;){I=w;var V=I.stateNode;if(I.tag===5&&V!==null&&(I=V,N!==null&&(V=Ti(w,N),V!=null&&q.push(Di(w,V,I)))),Ve)break;w=w.return}0<q.length&&($=new H($,X,null,o,U),B.push({event:$,listeners:q}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",$&&o!==Ga&&(X=o.relatedTarget||o.fromElement)&&(dr(X)||X[kn]))break e;if((H||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,H?(X=o.relatedTarget||o.toElement,H=O,X=X?dr(X):null,X!==null&&(Ve=fr(X),X!==Ve||X.tag!==5&&X.tag!==6)&&(X=null)):(H=null,X=O),H!==X)){if(q=Of,V="onMouseLeave",N="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(q=Pf,V="onPointerLeave",N="onPointerEnter",w="pointer"),Ve=H==null?$:Wr(H),I=X==null?$:Wr(X),$=new q(V,w+"leave",H,o,U),$.target=Ve,$.relatedTarget=I,V=null,dr(U)===O&&(q=new q(N,w+"enter",X,o,U),q.target=I,q.relatedTarget=Ve,V=q),Ve=V,H&&X)t:{for(q=H,N=X,w=0,I=q;I;I=zr(I))w++;for(I=0,V=N;V;V=zr(V))I++;for(;0<w-I;)q=zr(q),w--;for(;0<I-w;)N=zr(N),I--;for(;w--;){if(q===N||N!==null&&q===N.alternate)break t;q=zr(q),N=zr(N)}q=null}else q=null;H!==null&&sd(B,$,H,q,!1),X!==null&&Ve!==null&&sd(B,Ve,X,q,!0)}}e:{if($=O?Wr(O):window,H=$.nodeName&&$.nodeName.toLowerCase(),H==="select"||H==="input"&&$.type==="file")var Q=dy;else if($f($))if(Df)Q=gy;else{Q=py;var ne=hy}else(H=$.nodeName)&&H.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=my);if(Q&&(Q=Q(t,O))){Uf(B,Q,o,U);break e}ne&&ne(t,$,O),t==="focusout"&&(ne=$._wrapperState)&&ne.controlled&&$.type==="number"&&Da($,"number",$.value)}switch(ne=O?Wr(O):window,t){case"focusin":($f(ne)||ne.contentEditable==="true")&&(Dr=ne,ml=O,Fi=null);break;case"focusout":Fi=ml=Dr=null;break;case"mousedown":gl=!0;break;case"contextmenu":case"mouseup":case"dragend":gl=!1,Yf(B,o,U);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":Yf(B,o,U)}var re;if(fl)e:{switch(t){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Ur?jf(t,o)&&(ue="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ue="onCompositionStart");ue&&(Lf&&o.locale!=="ko"&&(Ur||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Ur&&(re=Nf()):(zn=U,sl="value"in zn?zn.value:zn.textContent,Ur=!0)),ne=eo(O,ue),0<ne.length&&(ue=new _f(ue,t,null,o,U),B.push({event:ue,listeners:ne}),re?ue.data=re:(re=Ff(o),re!==null&&(ue.data=re)))),(re=ay?ly(t,o):uy(t,o))&&(O=eo(O,"onBeforeInput"),0<O.length&&(U=new _f("onBeforeInput","beforeinput",null,o,U),B.push({event:U,listeners:O}),U.data=re))}rd(B,i)})}function Di(t,i,o){return{instance:t,listener:i,currentTarget:o}}function eo(t,i){for(var o=i+"Capture",u=[];t!==null;){var d=t,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ti(t,o),p!=null&&u.unshift(Di(t,p,d)),p=Ti(t,i),p!=null&&u.push(Di(t,p,d))),t=t.return}return u}function zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sd(t,i,o,u,d){for(var p=i._reactName,v=[];o!==null&&o!==u;){var E=o,T=E.alternate,O=E.stateNode;if(T!==null&&T===u)break;E.tag===5&&O!==null&&(E=O,d?(T=Ti(o,p),T!=null&&v.unshift(Di(o,T,E))):d||(T=Ti(o,p),T!=null&&v.push(Di(o,T,E)))),o=o.return}v.length!==0&&t.push({event:i,listeners:v})}var wy=/\r\n?/g,ky=/\u0000|\uFFFD/g;function od(t){return(typeof t=="string"?t:""+t).replace(wy,`
`).replace(ky,"")}function to(t,i,o){if(i=od(i),od(t)!==i&&o)throw Error(n(425))}function no(){}var xl=null,wl=null;function kl(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Al=typeof setTimeout=="function"?setTimeout:void 0,Ay=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,Cy=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(t){return ad.resolve(null).then(t).catch(Ry)}:Al;function Ry(t){setTimeout(function(){throw t})}function Cl(t,i){var o=i,u=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(u===0){t.removeChild(d),Oi(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=d}while(o);Oi(i)}function Wn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function ld(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return t;i--}else o==="/$"&&i++}t=t.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),dn="__reactFiber$"+Vr,Bi="__reactProps$"+Vr,kn="__reactContainer$"+Vr,Rl="__reactEvents$"+Vr,Ny="__reactListeners$"+Vr,Iy="__reactHandles$"+Vr;function dr(t){var i=t[dn];if(i)return i;for(var o=t.parentNode;o;){if(i=o[kn]||o[dn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(t=ld(t);t!==null;){if(o=t[dn])return o;t=ld(t)}return i}t=o,o=t.parentNode}return null}function zi(t){return t=t[dn]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ro(t){return t[Bi]||null}var Nl=[],Gr=-1;function Gn(t){return{current:t}}function Oe(t){0>Gr||(t.current=Nl[Gr],Nl[Gr]=null,Gr--)}function Ce(t,i){Gr++,Nl[Gr]=t.current,t.current=i}var Kn={},ot=Gn(Kn),mt=Gn(!1),hr=Kn;function Kr(t,i){var o=t.type.contextTypes;if(!o)return Kn;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=i[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function gt(t){return t=t.childContextTypes,t!=null}function io(){Oe(mt),Oe(ot)}function ud(t,i,o){if(ot.current!==Kn)throw Error(n(168));Ce(ot,i),Ce(mt,o)}function cd(t,i,o){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(n(108,he(t)||"Unknown",d));return K({},o,u)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kn,hr=ot.current,Ce(ot,t),Ce(mt,mt.current),!0}function fd(t,i,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=cd(t,i,hr),u.__reactInternalMemoizedMergedChildContext=t,Oe(mt),Oe(ot),Ce(ot,t)):Oe(mt),Ce(mt,o)}var An=null,oo=!1,Il=!1;function dd(t){An===null?An=[t]:An.push(t)}function Oy(t){oo=!0,dd(t)}function Hn(){if(!Il&&An!==null){Il=!0;var t=0,i=Ae;try{var o=An;for(Ae=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}An=null,oo=!1}catch(d){throw An!==null&&(An=An.slice(t+1)),pf(Qa,Hn),d}finally{Ae=i,Il=!1}}return null}var Hr=[],Yr=0,ao=null,lo=0,$t=[],Ut=0,pr=null,Cn=1,Rn="";function mr(t,i){Hr[Yr++]=lo,Hr[Yr++]=ao,ao=t,lo=i}function hd(t,i,o){$t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=pr,pr=t;var u=Cn;t=Rn;var d=32-qt(u)-1;u&=~(1<<d),o+=1;var p=32-qt(i)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Cn=1<<32-qt(i)+d|o<<d|u,Rn=p+t}else Cn=1<<p|o<<d|u,Rn=t}function Ol(t){t.return!==null&&(mr(t,1),hd(t,1,0))}function _l(t){for(;t===ao;)ao=Hr[--Yr],Hr[Yr]=null,lo=Hr[--Yr],Hr[Yr]=null;for(;t===pr;)pr=$t[--Ut],$t[Ut]=null,Rn=$t[--Ut],$t[Ut]=null,Cn=$t[--Ut],$t[Ut]=null}var Ct=null,Rt=null,Pe=!1,Zt=null;function pd(t,i){var o=Vt(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=t,i=t.deletions,i===null?(t.deletions=[o],t.flags|=16):i.push(o)}function md(t,i){switch(t.tag){case 5:var o=t.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Ct=t,Rt=Wn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Ct=t,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=pr!==null?{id:Cn,overflow:Rn}:null,t.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Vt(18,null,null,0),o.stateNode=i,o.return=t,t.child=o,Ct=t,Rt=null,!0):!1;default:return!1}}function Pl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ll(t){if(Pe){var i=Rt;if(i){var o=i;if(!md(t,i)){if(Pl(t))throw Error(n(418));i=Wn(o.nextSibling);var u=Ct;i&&md(t,i)?pd(u,o):(t.flags=t.flags&-4097|2,Pe=!1,Ct=t)}}else{if(Pl(t))throw Error(n(418));t.flags=t.flags&-4097|2,Pe=!1,Ct=t}}}function gd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function uo(t){if(t!==Ct)return!1;if(!Pe)return gd(t),Pe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!kl(t.type,t.memoizedProps)),i&&(i=Rt)){if(Pl(t))throw vd(),Error(n(418));for(;i;)pd(t,i),i=Wn(i.nextSibling)}if(gd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(i===0){Rt=Wn(t.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}t=t.nextSibling}Rt=null}}else Rt=Ct?Wn(t.stateNode.nextSibling):null;return!0}function vd(){for(var t=Rt;t;)t=Wn(t.nextSibling)}function Xr(){Rt=Ct=null,Pe=!1}function Ml(t){Zt===null?Zt=[t]:Zt.push(t)}var _y=M.ReactCurrentBatchConfig;function Vi(t,i,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var d=u,p=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var E=d.refs;v===null?delete E[p]:E[p]=v},i._stringRef=p,i)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function co(t,i){throw t=Object.prototype.toString.call(i),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function yd(t){var i=t._init;return i(t._payload)}function Sd(t){function i(N,w){if(t){var I=N.deletions;I===null?(N.deletions=[w],N.flags|=16):I.push(w)}}function o(N,w){if(!t)return null;for(;w!==null;)i(N,w),w=w.sibling;return null}function u(N,w){for(N=new Map;w!==null;)w.key!==null?N.set(w.key,w):N.set(w.index,w),w=w.sibling;return N}function d(N,w){return N=tr(N,w),N.index=0,N.sibling=null,N}function p(N,w,I){return N.index=I,t?(I=N.alternate,I!==null?(I=I.index,I<w?(N.flags|=2,w):I):(N.flags|=2,w)):(N.flags|=1048576,w)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function E(N,w,I,V){return w===null||w.tag!==6?(w=Au(I,N.mode,V),w.return=N,w):(w=d(w,I),w.return=N,w)}function T(N,w,I,V){var Q=I.type;return Q===D?U(N,w,I.props.children,V,I.key):w!==null&&(w.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ge&&yd(Q)===w.type)?(V=d(w,I.props),V.ref=Vi(N,w,I),V.return=N,V):(V=bo(I.type,I.key,I.props,null,N.mode,V),V.ref=Vi(N,w,I),V.return=N,V)}function O(N,w,I,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Cu(I,N.mode,V),w.return=N,w):(w=d(w,I.children||[]),w.return=N,w)}function U(N,w,I,V,Q){return w===null||w.tag!==7?(w=wr(I,N.mode,V,Q),w.return=N,w):(w=d(w,I),w.return=N,w)}function B(N,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Au(""+w,N.mode,I),w.return=N,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case z:return I=bo(w.type,w.key,w.props,null,N.mode,I),I.ref=Vi(N,null,w),I.return=N,I;case L:return w=Cu(w,N.mode,I),w.return=N,w;case ge:var V=w._init;return B(N,V(w._payload),I)}if(yi(w)||J(w))return w=wr(w,N.mode,I,null),w.return=N,w;co(N,w)}return null}function $(N,w,I,V){var Q=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Q!==null?null:E(N,w,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case z:return I.key===Q?T(N,w,I,V):null;case L:return I.key===Q?O(N,w,I,V):null;case ge:return Q=I._init,$(N,w,Q(I._payload),V)}if(yi(I)||J(I))return Q!==null?null:U(N,w,I,V,null);co(N,I)}return null}function H(N,w,I,V,Q){if(typeof V=="string"&&V!==""||typeof V=="number")return N=N.get(I)||null,E(w,N,""+V,Q);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return N=N.get(V.key===null?I:V.key)||null,T(w,N,V,Q);case L:return N=N.get(V.key===null?I:V.key)||null,O(w,N,V,Q);case ge:var ne=V._init;return H(N,w,I,ne(V._payload),Q)}if(yi(V)||J(V))return N=N.get(I)||null,U(w,N,V,Q,null);co(w,V)}return null}function X(N,w,I,V){for(var Q=null,ne=null,re=w,ue=w=0,Je=null;re!==null&&ue<I.length;ue++){re.index>ue?(Je=re,re=null):Je=re.sibling;var xe=$(N,re,I[ue],V);if(xe===null){re===null&&(re=Je);break}t&&re&&xe.alternate===null&&i(N,re),w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe,re=Je}if(ue===I.length)return o(N,re),Pe&&mr(N,ue),Q;if(re===null){for(;ue<I.length;ue++)re=B(N,I[ue],V),re!==null&&(w=p(re,w,ue),ne===null?Q=re:ne.sibling=re,ne=re);return Pe&&mr(N,ue),Q}for(re=u(N,re);ue<I.length;ue++)Je=H(re,N,ue,I[ue],V),Je!==null&&(t&&Je.alternate!==null&&re.delete(Je.key===null?ue:Je.key),w=p(Je,w,ue),ne===null?Q=Je:ne.sibling=Je,ne=Je);return t&&re.forEach(function(nr){return i(N,nr)}),Pe&&mr(N,ue),Q}function q(N,w,I,V){var Q=J(I);if(typeof Q!="function")throw Error(n(150));if(I=Q.call(I),I==null)throw Error(n(151));for(var ne=Q=null,re=w,ue=w=0,Je=null,xe=I.next();re!==null&&!xe.done;ue++,xe=I.next()){re.index>ue?(Je=re,re=null):Je=re.sibling;var nr=$(N,re,xe.value,V);if(nr===null){re===null&&(re=Je);break}t&&re&&nr.alternate===null&&i(N,re),w=p(nr,w,ue),ne===null?Q=nr:ne.sibling=nr,ne=nr,re=Je}if(xe.done)return o(N,re),Pe&&mr(N,ue),Q;if(re===null){for(;!xe.done;ue++,xe=I.next())xe=B(N,xe.value,V),xe!==null&&(w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe);return Pe&&mr(N,ue),Q}for(re=u(N,re);!xe.done;ue++,xe=I.next())xe=H(re,N,ue,xe.value,V),xe!==null&&(t&&xe.alternate!==null&&re.delete(xe.key===null?ue:xe.key),w=p(xe,w,ue),ne===null?Q=xe:ne.sibling=xe,ne=xe);return t&&re.forEach(function(c0){return i(N,c0)}),Pe&&mr(N,ue),Q}function Ve(N,w,I,V){if(typeof I=="object"&&I!==null&&I.type===D&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case z:e:{for(var Q=I.key,ne=w;ne!==null;){if(ne.key===Q){if(Q=I.type,Q===D){if(ne.tag===7){o(N,ne.sibling),w=d(ne,I.props.children),w.return=N,N=w;break e}}else if(ne.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ge&&yd(Q)===ne.type){o(N,ne.sibling),w=d(ne,I.props),w.ref=Vi(N,ne,I),w.return=N,N=w;break e}o(N,ne);break}else i(N,ne);ne=ne.sibling}I.type===D?(w=wr(I.props.children,N.mode,V,I.key),w.return=N,N=w):(V=bo(I.type,I.key,I.props,null,N.mode,V),V.ref=Vi(N,w,I),V.return=N,N=V)}return v(N);case L:e:{for(ne=I.key;w!==null;){if(w.key===ne)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){o(N,w.sibling),w=d(w,I.children||[]),w.return=N,N=w;break e}else{o(N,w);break}else i(N,w);w=w.sibling}w=Cu(I,N.mode,V),w.return=N,N=w}return v(N);case ge:return ne=I._init,Ve(N,w,ne(I._payload),V)}if(yi(I))return X(N,w,I,V);if(J(I))return q(N,w,I,V);co(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(o(N,w.sibling),w=d(w,I),w.return=N,N=w):(o(N,w),w=Au(I,N.mode,V),w.return=N,N=w),v(N)):o(N,w)}return Ve}var qr=Sd(!0),Ed=Sd(!1),fo=Gn(null),ho=null,Qr=null,bl=null;function jl(){bl=Qr=ho=null}function Fl(t){var i=fo.current;Oe(fo),t._currentValue=i}function $l(t,i,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===o)break;t=t.return}}function Zr(t,i){ho=t,bl=Qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(vt=!0),t.firstContext=null)}function Dt(t){var i=t._currentValue;if(bl!==t)if(t={context:t,memoizedValue:i,next:null},Qr===null){if(ho===null)throw Error(n(308));Qr=t,ho.dependencies={lanes:0,firstContext:t}}else Qr=Qr.next=t;return i}var gr=null;function Ul(t){gr===null?gr=[t]:gr.push(t)}function Td(t,i,o,u){var d=i.interleaved;return d===null?(o.next=o,Ul(i)):(o.next=d.next,d.next=o),i.interleaved=o,Nn(t,u)}function Nn(t,i){t.lanes|=i;var o=t.alternate;for(o!==null&&(o.lanes|=i),o=t,t=t.return;t!==null;)t.childLanes|=i,o=t.alternate,o!==null&&(o.childLanes|=i),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Yn=!1;function Dl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Xn(t,i,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ee&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,Nn(t,o)}return d=u.interleaved,d===null?(i.next=i,Ul(u)):(i.next=d.next,d.next=i),u.interleaved=i,Nn(t,o)}function po(t,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,o|=u,i.lanes=o,el(t,o)}}function wd(t,i){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=i:p=p.next=i}else d=p=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=i:t.next=i,o.lastBaseUpdate=i}function mo(t,i,o,u){var d=t.updateQueue;Yn=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var T=E,O=T.next;T.next=null,v===null?p=O:v.next=O,v=T;var U=t.alternate;U!==null&&(U=U.updateQueue,E=U.lastBaseUpdate,E!==v&&(E===null?U.firstBaseUpdate=O:E.next=O,U.lastBaseUpdate=T))}if(p!==null){var B=d.baseState;v=0,U=O=T=null,E=p;do{var $=E.lane,H=E.eventTime;if((u&$)===$){U!==null&&(U=U.next={eventTime:H,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var X=t,q=E;switch($=i,H=o,q.tag){case 1:if(X=q.payload,typeof X=="function"){B=X.call(H,B,$);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=q.payload,$=typeof X=="function"?X.call(H,B,$):X,$==null)break e;B=K({},B,$);break e;case 2:Yn=!0}}E.callback!==null&&E.lane!==0&&(t.flags|=64,$=d.effects,$===null?d.effects=[E]:$.push(E))}else H={eventTime:H,lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},U===null?(O=U=H,T=B):U=U.next=H,v|=$;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;$=E,E=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(T=B),d.baseState=T,d.firstBaseUpdate=O,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);Sr|=v,t.lanes=v,t.memoizedState=B}}function kd(t,i,o){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],d=u.callback;if(d!==null){if(u.callback=null,u=o,typeof d!="function")throw Error(n(191,d));d.call(u)}}}var Wi={},hn=Gn(Wi),Gi=Gn(Wi),Ki=Gn(Wi);function vr(t){if(t===Wi)throw Error(n(174));return t}function Bl(t,i){switch(Ce(Ki,i),Ce(Gi,t),Ce(hn,Wi),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:za(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=za(i,t)}Oe(hn),Ce(hn,i)}function Jr(){Oe(hn),Oe(Gi),Oe(Ki)}function Ad(t){vr(Ki.current);var i=vr(hn.current),o=za(i,t.type);i!==o&&(Ce(Gi,t),Ce(hn,o))}function zl(t){Gi.current===t&&(Oe(hn),Oe(Gi))}var Me=Gn(0);function go(t){for(var i=t;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vl=[];function Wl(){for(var t=0;t<Vl.length;t++)Vl[t]._workInProgressVersionPrimary=null;Vl.length=0}var vo=M.ReactCurrentDispatcher,Gl=M.ReactCurrentBatchConfig,yr=0,be=null,Ke=null,Qe=null,yo=!1,Hi=!1,Yi=0,Py=0;function at(){throw Error(n(321))}function Kl(t,i){if(i===null)return!1;for(var o=0;o<i.length&&o<t.length;o++)if(!Qt(t[o],i[o]))return!1;return!0}function Hl(t,i,o,u,d,p){if(yr=p,be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,vo.current=t===null||t.memoizedState===null?jy:Fy,t=o(u,d),Hi){p=0;do{if(Hi=!1,Yi=0,25<=p)throw Error(n(301));p+=1,Qe=Ke=null,i.updateQueue=null,vo.current=$y,t=o(u,d)}while(Hi)}if(vo.current=To,i=Ke!==null&&Ke.next!==null,yr=0,Qe=Ke=be=null,yo=!1,i)throw Error(n(300));return t}function Yl(){var t=Yi!==0;return Yi=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Bt(){if(Ke===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var i=Qe===null?be.memoizedState:Qe.next;if(i!==null)Qe=i,Ke=t;else{if(t===null)throw Error(n(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Xi(t,i){return typeof i=="function"?i(t):i}function Xl(t){var i=Bt(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=Ke,d=u.baseQueue,p=o.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}u.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,u=u.baseState;var E=v=null,T=null,O=p;do{var U=O.lane;if((yr&U)===U)T!==null&&(T=T.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:t(u,O.action);else{var B={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};T===null?(E=T=B,v=u):T=T.next=B,be.lanes|=U,Sr|=U}O=O.next}while(O!==null&&O!==p);T===null?v=u:T.next=E,Qt(u,i.memoizedState)||(vt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=T,o.lastRenderedState=u}if(t=o.interleaved,t!==null){d=t;do p=d.lane,be.lanes|=p,Sr|=p,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function ql(t){var i=Bt(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,d=o.pending,p=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=t(p,v.action),v=v.next;while(v!==d);Qt(p,i.memoizedState)||(vt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Cd(){}function Rd(t,i){var o=be,u=Bt(),d=i(),p=!Qt(u.memoizedState,d);if(p&&(u.memoizedState=d,vt=!0),u=u.queue,Ql(Od.bind(null,o,u,t),[t]),u.getSnapshot!==i||p||Qe!==null&&Qe.memoizedState.tag&1){if(o.flags|=2048,qi(9,Id.bind(null,o,u,d,i),void 0,null),Ze===null)throw Error(n(349));(yr&30)!==0||Nd(o,i,d)}return d}function Nd(t,i,o){t.flags|=16384,t={getSnapshot:i,value:o},i=be.updateQueue,i===null?(i={lastEffect:null,stores:null},be.updateQueue=i,i.stores=[t]):(o=i.stores,o===null?i.stores=[t]:o.push(t))}function Id(t,i,o,u){i.value=o,i.getSnapshot=u,_d(i)&&Pd(t)}function Od(t,i,o){return o(function(){_d(i)&&Pd(t)})}function _d(t){var i=t.getSnapshot;t=t.value;try{var o=i();return!Qt(t,o)}catch{return!0}}function Pd(t){var i=Nn(t,1);i!==null&&nn(i,t,1,-1)}function Ld(t){var i=pn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},i.queue=t,t=t.dispatch=by.bind(null,be,t),[i.memoizedState,t]}function qi(t,i,o,u){return t={tag:t,create:i,destroy:o,deps:u,next:null},i=be.updateQueue,i===null?(i={lastEffect:null,stores:null},be.updateQueue=i,i.lastEffect=t.next=t):(o=i.lastEffect,o===null?i.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,i.lastEffect=t)),t}function Md(){return Bt().memoizedState}function So(t,i,o,u){var d=pn();be.flags|=t,d.memoizedState=qi(1|i,o,void 0,u===void 0?null:u)}function Eo(t,i,o,u){var d=Bt();u=u===void 0?null:u;var p=void 0;if(Ke!==null){var v=Ke.memoizedState;if(p=v.destroy,u!==null&&Kl(u,v.deps)){d.memoizedState=qi(i,o,p,u);return}}be.flags|=t,d.memoizedState=qi(1|i,o,p,u)}function bd(t,i){return So(8390656,8,t,i)}function Ql(t,i){return Eo(2048,8,t,i)}function jd(t,i){return Eo(4,2,t,i)}function Fd(t,i){return Eo(4,4,t,i)}function $d(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ud(t,i,o){return o=o!=null?o.concat([t]):null,Eo(4,4,$d.bind(null,i,t),o)}function Zl(){}function Dd(t,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Kl(i,u[1])?u[0]:(o.memoizedState=[t,i],t)}function Bd(t,i){var o=Bt();i=i===void 0?null:i;var u=o.memoizedState;return u!==null&&i!==null&&Kl(i,u[1])?u[0]:(t=t(),o.memoizedState=[t,i],t)}function zd(t,i,o){return(yr&21)===0?(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=o):(Qt(o,i)||(o=yf(),be.lanes|=o,Sr|=o,t.baseState=!0),i)}function Ly(t,i){var o=Ae;Ae=o!==0&&4>o?o:4,t(!0);var u=Gl.transition;Gl.transition={};try{t(!1),i()}finally{Ae=o,Gl.transition=u}}function Vd(){return Bt().memoizedState}function My(t,i,o){var u=Jn(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Wd(t))Gd(i,o);else if(o=Td(t,i,o,u),o!==null){var d=ft();nn(o,t,u,d),Kd(o,i,u)}}function by(t,i,o){var u=Jn(t),d={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wd(t))Gd(i,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,E=p(v,o);if(d.hasEagerState=!0,d.eagerState=E,Qt(E,v)){var T=i.interleaved;T===null?(d.next=d,Ul(i)):(d.next=T.next,T.next=d),i.interleaved=d;return}}catch{}o=Td(t,i,d,u),o!==null&&(d=ft(),nn(o,t,u,d),Kd(o,i,u))}}function Wd(t){var i=t.alternate;return t===be||i!==null&&i===be}function Gd(t,i){Hi=yo=!0;var o=t.pending;o===null?i.next=i:(i.next=o.next,o.next=i),t.pending=i}function Kd(t,i,o){if((o&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,o|=u,i.lanes=o,el(t,o)}}var To={readContext:Dt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},jy={readContext:Dt,useCallback:function(t,i){return pn().memoizedState=[t,i===void 0?null:i],t},useContext:Dt,useEffect:bd,useImperativeHandle:function(t,i,o){return o=o!=null?o.concat([t]):null,So(4194308,4,$d.bind(null,i,t),o)},useLayoutEffect:function(t,i){return So(4194308,4,t,i)},useInsertionEffect:function(t,i){return So(4,2,t,i)},useMemo:function(t,i){var o=pn();return i=i===void 0?null:i,t=t(),o.memoizedState=[t,i],t},useReducer:function(t,i,o){var u=pn();return i=o!==void 0?o(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=My.bind(null,be,t),[u.memoizedState,t]},useRef:function(t){var i=pn();return t={current:t},i.memoizedState=t},useState:Ld,useDebugValue:Zl,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=Ld(!1),i=t[0];return t=Ly.bind(null,t[1]),pn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,o){var u=be,d=pn();if(Pe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=i(),Ze===null)throw Error(n(349));(yr&30)!==0||Nd(u,i,o)}d.memoizedState=o;var p={value:o,getSnapshot:i};return d.queue=p,bd(Od.bind(null,u,p,t),[t]),u.flags|=2048,qi(9,Id.bind(null,u,p,o,i),void 0,null),o},useId:function(){var t=pn(),i=Ze.identifierPrefix;if(Pe){var o=Rn,u=Cn;o=(u&~(1<<32-qt(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=Yi++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Py++,i=":"+i+"r"+o.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Fy={readContext:Dt,useCallback:Dd,useContext:Dt,useEffect:Ql,useImperativeHandle:Ud,useInsertionEffect:jd,useLayoutEffect:Fd,useMemo:Bd,useReducer:Xl,useRef:Md,useState:function(){return Xl(Xi)},useDebugValue:Zl,useDeferredValue:function(t){var i=Bt();return zd(i,Ke.memoizedState,t)},useTransition:function(){var t=Xl(Xi)[0],i=Bt().memoizedState;return[t,i]},useMutableSource:Cd,useSyncExternalStore:Rd,useId:Vd,unstable_isNewReconciler:!1},$y={readContext:Dt,useCallback:Dd,useContext:Dt,useEffect:Ql,useImperativeHandle:Ud,useInsertionEffect:jd,useLayoutEffect:Fd,useMemo:Bd,useReducer:ql,useRef:Md,useState:function(){return ql(Xi)},useDebugValue:Zl,useDeferredValue:function(t){var i=Bt();return Ke===null?i.memoizedState=t:zd(i,Ke.memoizedState,t)},useTransition:function(){var t=ql(Xi)[0],i=Bt().memoizedState;return[t,i]},useMutableSource:Cd,useSyncExternalStore:Rd,useId:Vd,unstable_isNewReconciler:!1};function Jt(t,i){if(t&&t.defaultProps){i=K({},i),t=t.defaultProps;for(var o in t)i[o]===void 0&&(i[o]=t[o]);return i}return i}function Jl(t,i,o,u){i=t.memoizedState,o=o(u,i),o=o==null?i:K({},i,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var xo={isMounted:function(t){return(t=t._reactInternals)?fr(t)===t:!1},enqueueSetState:function(t,i,o){t=t._reactInternals;var u=ft(),d=Jn(t),p=In(u,d);p.payload=i,o!=null&&(p.callback=o),i=Xn(t,p,d),i!==null&&(nn(i,t,d,u),po(i,t,d))},enqueueReplaceState:function(t,i,o){t=t._reactInternals;var u=ft(),d=Jn(t),p=In(u,d);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Xn(t,p,d),i!==null&&(nn(i,t,d,u),po(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var o=ft(),u=Jn(t),d=In(o,u);d.tag=2,i!=null&&(d.callback=i),i=Xn(t,d,u),i!==null&&(nn(i,t,u,o),po(i,t,u))}};function Hd(t,i,o,u,d,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!ji(o,u)||!ji(d,p):!0}function Yd(t,i,o){var u=!1,d=Kn,p=i.contextType;return typeof p=="object"&&p!==null?p=Dt(p):(d=gt(i)?hr:ot.current,u=i.contextTypes,p=(u=u!=null)?Kr(t,d):Kn),i=new i(o,p),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=xo,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=p),i}function Xd(t,i,o,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==t&&xo.enqueueReplaceState(i,i.state,null)}function eu(t,i,o,u){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},Dl(t);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dt(p):(p=gt(i)?hr:ot.current,d.context=Kr(t,p)),d.state=t.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Jl(t,i,p,o),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&xo.enqueueReplaceState(d,d.state,null),mo(t,o,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function ei(t,i){try{var o="",u=i;do o+=ye(u),u=u.return;while(u);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:i,stack:d,digest:null}}function tu(t,i,o){return{value:t,source:null,stack:o??null,digest:i??null}}function nu(t,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var Uy=typeof WeakMap=="function"?WeakMap:Map;function qd(t,i,o){o=In(-1,o),o.tag=3,o.payload={element:null};var u=i.value;return o.callback=function(){Io||(Io=!0,vu=u),nu(t,i)},o}function Qd(t,i,o){o=In(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;o.payload=function(){return u(d)},o.callback=function(){nu(t,i)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){nu(t,i),typeof u!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),o}function Zd(t,i,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Uy;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(d.add(o),t=Jy.bind(null,t,i,o),i.then(t,t))}function Jd(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function eh(t,i,o,u,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=In(-1,1),i.tag=2,Xn(o,i,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var Dy=M.ReactCurrentOwner,vt=!1;function ct(t,i,o,u){i.child=t===null?Ed(i,null,o,u):qr(i,t.child,o,u)}function th(t,i,o,u,d){o=o.render;var p=i.ref;return Zr(i,d),u=Hl(t,i,o,u,p,d),o=Yl(),t!==null&&!vt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,On(t,i,d)):(Pe&&o&&Ol(i),i.flags|=1,ct(t,i,u,d),i.child)}function nh(t,i,o,u,d){if(t===null){var p=o.type;return typeof p=="function"&&!ku(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=p,rh(t,i,p,u,d)):(t=bo(o.type,null,u,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,(t.lanes&d)===0){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:ji,o(v,u)&&t.ref===i.ref)return On(t,i,d)}return i.flags|=1,t=tr(p,u),t.ref=i.ref,t.return=i,i.child=t}function rh(t,i,o,u,d){if(t!==null){var p=t.memoizedProps;if(ji(p,u)&&t.ref===i.ref)if(vt=!1,i.pendingProps=u=p,(t.lanes&d)!==0)(t.flags&131072)!==0&&(vt=!0);else return i.lanes=t.lanes,On(t,i,d)}return ru(t,i,o,u,d)}function ih(t,i,o){var u=i.pendingProps,d=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ni,Nt),Nt|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Ce(ni,Nt),Nt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Ce(ni,Nt),Nt|=u}else p!==null?(u=p.baseLanes|o,i.memoizedState=null):u=o,Ce(ni,Nt),Nt|=u;return ct(t,i,d,o),i.child}function sh(t,i){var o=i.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function ru(t,i,o,u,d){var p=gt(o)?hr:ot.current;return p=Kr(i,p),Zr(i,d),o=Hl(t,i,o,u,p,d),u=Yl(),t!==null&&!vt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,On(t,i,d)):(Pe&&u&&Ol(i),i.flags|=1,ct(t,i,o,d),i.child)}function oh(t,i,o,u,d){if(gt(o)){var p=!0;so(i)}else p=!1;if(Zr(i,d),i.stateNode===null)ko(t,i),Yd(i,o,u),eu(i,o,u,d),u=!0;else if(t===null){var v=i.stateNode,E=i.memoizedProps;v.props=E;var T=v.context,O=o.contextType;typeof O=="object"&&O!==null?O=Dt(O):(O=gt(o)?hr:ot.current,O=Kr(i,O));var U=o.getDerivedStateFromProps,B=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";B||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==u||T!==O)&&Xd(i,v,u,O),Yn=!1;var $=i.memoizedState;v.state=$,mo(i,u,v,d),T=i.memoizedState,E!==u||$!==T||mt.current||Yn?(typeof U=="function"&&(Jl(i,o,U,u),T=i.memoizedState),(E=Yn||Hd(i,o,E,u,$,T,O))?(B||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=T),v.props=u,v.state=T,v.context=O,u=E):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,xd(t,i),E=i.memoizedProps,O=i.type===i.elementType?E:Jt(i.type,E),v.props=O,B=i.pendingProps,$=v.context,T=o.contextType,typeof T=="object"&&T!==null?T=Dt(T):(T=gt(o)?hr:ot.current,T=Kr(i,T));var H=o.getDerivedStateFromProps;(U=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==B||$!==T)&&Xd(i,v,u,T),Yn=!1,$=i.memoizedState,v.state=$,mo(i,u,v,d);var X=i.memoizedState;E!==B||$!==X||mt.current||Yn?(typeof H=="function"&&(Jl(i,o,H,u),X=i.memoizedState),(O=Yn||Hd(i,o,O,u,$,X,T)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,T)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),v.props=u,v.state=X,v.context=T,u=O):(typeof v.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),u=!1)}return iu(t,i,o,u,p,d)}function iu(t,i,o,u,d,p){sh(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&fd(i,o,!1),On(t,i,p);u=i.stateNode,Dy.current=i;var E=v&&typeof o.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=qr(i,t.child,null,p),i.child=qr(i,null,E,p)):ct(t,i,E,p),i.memoizedState=u.state,d&&fd(i,o,!0),i.child}function ah(t){var i=t.stateNode;i.pendingContext?ud(t,i.pendingContext,i.pendingContext!==i.context):i.context&&ud(t,i.context,!1),Bl(t,i.containerInfo)}function lh(t,i,o,u,d){return Xr(),Ml(d),i.flags|=256,ct(t,i,o,u),i.child}var su={dehydrated:null,treeContext:null,retryLane:0};function ou(t){return{baseLanes:t,cachePool:null,transitions:null}}function uh(t,i,o){var u=i.pendingProps,d=Me.current,p=!1,v=(i.flags&128)!==0,E;if((E=v)||(E=t!==null&&t.memoizedState===null?!1:(d&2)!==0),E?(p=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Ce(Me,d&1),t===null)return Ll(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=jo(v,u,0,null),t=wr(t,u,o,null),p.return=i,t.return=i,p.sibling=t,i.child=p,i.child.memoizedState=ou(o),i.memoizedState=su,t):au(i,v));if(d=t.memoizedState,d!==null&&(E=d.dehydrated,E!==null))return By(t,i,v,u,E,d,o);if(p){p=u.fallback,v=i.mode,d=t.child,E=d.sibling;var T={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=T,i.deletions=null):(u=tr(d,T),u.subtreeFlags=d.subtreeFlags&14680064),E!==null?p=tr(E,p):(p=wr(p,v,o,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=t.child.memoizedState,v=v===null?ou(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~o,i.memoizedState=su,u}return p=t.child,t=p.sibling,u=tr(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=o),u.return=i,u.sibling=null,t!==null&&(o=i.deletions,o===null?(i.deletions=[t],i.flags|=16):o.push(t)),i.child=u,i.memoizedState=null,u}function au(t,i){return i=jo({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function wo(t,i,o,u){return u!==null&&Ml(u),qr(i,t.child,null,o),t=au(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function By(t,i,o,u,d,p,v){if(o)return i.flags&256?(i.flags&=-257,u=tu(Error(n(422))),wo(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=jo({mode:"visible",children:u.children},d,0,null),p=wr(p,d,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&qr(i,t.child,null,v),i.child.memoizedState=ou(v),i.memoizedState=su,p);if((i.mode&1)===0)return wo(t,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var E=u.dgst;return u=E,p=Error(n(419)),u=tu(p,u,void 0),wo(t,i,v,u)}if(E=(v&t.childLanes)!==0,vt||E){if(u=Ze,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Nn(t,d),nn(u,t,d,-1))}return wu(),u=tu(Error(n(421))),wo(t,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=e0.bind(null,t),d._reactRetry=i,null):(t=p.treeContext,Rt=Wn(d.nextSibling),Ct=i,Pe=!0,Zt=null,t!==null&&($t[Ut++]=Cn,$t[Ut++]=Rn,$t[Ut++]=pr,Cn=t.id,Rn=t.overflow,pr=i),i=au(i,u.children),i.flags|=4096,i)}function ch(t,i,o){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),$l(t.return,i,o)}function lu(t,i,o,u,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=d)}function fh(t,i,o){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ct(t,i,u.children,o),u=Me.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ch(t,o,i);else if(t.tag===19)ch(t,o,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ce(Me,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(o=i.child,d=null;o!==null;)t=o.alternate,t!==null&&go(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),lu(i,!1,d,o,p);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&go(t)===null){i.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}lu(i,!0,o,null,p);break;case"together":lu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ko(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function On(t,i,o){if(t!==null&&(i.dependencies=t.dependencies),Sr|=i.lanes,(o&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(n(153));if(i.child!==null){for(t=i.child,o=tr(t,t.pendingProps),i.child=o,o.return=i;t.sibling!==null;)t=t.sibling,o=o.sibling=tr(t,t.pendingProps),o.return=i;o.sibling=null}return i.child}function zy(t,i,o){switch(i.tag){case 3:ah(i),Xr();break;case 5:Ad(i);break;case 1:gt(i.type)&&so(i);break;case 4:Bl(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(fo,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(Me,Me.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?uh(t,i,o):(Ce(Me,Me.current&1),t=On(t,i,o),t!==null?t.sibling:null);Ce(Me,Me.current&1);break;case 19:if(u=(o&i.childLanes)!==0,(t.flags&128)!==0){if(u)return fh(t,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Me,Me.current),u)break;return null;case 22:case 23:return i.lanes=0,ih(t,i,o)}return On(t,i,o)}var dh,uu,hh,ph;dh=function(t,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},uu=function(){},hh=function(t,i,o,u){var d=t.memoizedProps;if(d!==u){t=i.stateNode,vr(hn.current);var p=null;switch(o){case"input":d=cr(t,d),u=cr(t,u),p=[];break;case"select":d=K({},d,{value:void 0}),u=K({},u,{value:void 0}),p=[];break;case"textarea":d=Ba(t,d),u=Ba(t,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=no)}Va(o,u);var v;o=null;for(O in d)if(!u.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var E=d[O];for(v in E)E.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?p||(p=[]):(p=p||[]).push(O,null));for(O in u){var T=u[O];if(E=d?.[O],u.hasOwnProperty(O)&&T!==E&&(T!=null||E!=null))if(O==="style")if(E){for(v in E)!E.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in T)T.hasOwnProperty(v)&&E[v]!==T[v]&&(o||(o={}),o[v]=T[v])}else o||(p||(p=[]),p.push(O,o)),o=T;else O==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,E=E?E.__html:void 0,T!=null&&E!==T&&(p=p||[]).push(O,T)):O==="children"?typeof T!="string"&&typeof T!="number"||(p=p||[]).push(O,""+T):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(a.hasOwnProperty(O)?(T!=null&&O==="onScroll"&&Ie("scroll",t),p||E===T||(p=[])):(p=p||[]).push(O,T))}o&&(p=p||[]).push("style",o);var O=p;(i.updateQueue=O)&&(i.flags|=4)}},ph=function(t,i,o,u){o!==u&&(i.flags|=4)};function Qi(t,i){if(!Pe)switch(t.tailMode){case"hidden":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(i)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=o,i}function Vy(t,i,o){var u=i.pendingProps;switch(_l(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return gt(i.type)&&io(),lt(i),null;case 3:return u=i.stateNode,Jr(),Oe(mt),Oe(ot),Wl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(uo(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zt!==null&&(Eu(Zt),Zt=null))),uu(t,i),lt(i),null;case 5:zl(i);var d=vr(Ki.current);if(o=i.type,t!==null&&i.stateNode!=null)hh(t,i,o,u,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(n(166));return lt(i),null}if(t=vr(hn.current),uo(i)){u=i.stateNode,o=i.type;var p=i.memoizedProps;switch(u[dn]=i,u[Bi]=p,t=(i.mode&1)!==0,o){case"dialog":Ie("cancel",u),Ie("close",u);break;case"iframe":case"object":case"embed":Ie("load",u);break;case"video":case"audio":for(d=0;d<$i.length;d++)Ie($i[d],u);break;case"source":Ie("error",u);break;case"img":case"image":case"link":Ie("error",u),Ie("load",u);break;case"details":Ie("toggle",u);break;case"input":vi(u,p),Ie("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ie("invalid",u);break;case"textarea":qc(u,p),Ie("invalid",u)}Va(o,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var E=p[v];v==="children"?typeof E=="string"?u.textContent!==E&&(p.suppressHydrationWarning!==!0&&to(u.textContent,E,t),d=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&to(u.textContent,E,t),d=["children",""+E]):a.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&Ie("scroll",u)}switch(o){case"input":kt(u),Xc(u,p,!0);break;case"textarea":kt(u),Zc(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=no)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jc(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(o,{is:u.is}):(t=v.createElement(o),o==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,o),t[dn]=i,t[Bi]=u,dh(t,i,!1,!1),i.stateNode=t;e:{switch(v=Wa(o,u),o){case"dialog":Ie("cancel",t),Ie("close",t),d=u;break;case"iframe":case"object":case"embed":Ie("load",t),d=u;break;case"video":case"audio":for(d=0;d<$i.length;d++)Ie($i[d],t);d=u;break;case"source":Ie("error",t),d=u;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),d=u;break;case"details":Ie("toggle",t),d=u;break;case"input":vi(t,u),d=cr(t,u),Ie("invalid",t);break;case"option":d=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=K({},u,{value:void 0}),Ie("invalid",t);break;case"textarea":qc(t,u),d=Ba(t,u),Ie("invalid",t);break;default:d=u}Va(o,d),E=d;for(p in E)if(E.hasOwnProperty(p)){var T=E[p];p==="style"?nf(t,T):p==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&ef(t,T)):p==="children"?typeof T=="string"?(o!=="textarea"||T!=="")&&Si(t,T):typeof T=="number"&&Si(t,""+T):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?T!=null&&p==="onScroll"&&Ie("scroll",t):T!=null&&P(t,p,T,v))}switch(o){case"input":kt(t),Xc(t,u,!1);break;case"textarea":kt(t),Zc(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ve(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Mr(t,!!u.multiple,p,!1):u.defaultValue!=null&&Mr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=no)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(t&&i.stateNode!=null)ph(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(o=vr(Ki.current),vr(hn.current),uo(i)){if(u=i.stateNode,o=i.memoizedProps,u[dn]=i,(p=u.nodeValue!==o)&&(t=Ct,t!==null))switch(t.tag){case 3:to(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&to(u.nodeValue,o,(t.mode&1)!==0)}p&&(i.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[dn]=i,i.stateNode=u}return lt(i),null;case 13:if(Oe(Me),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)vd(),Xr(),i.flags|=98560,p=!1;else if(p=uo(i),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[dn]=i}else Xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else Zt!==null&&(Eu(Zt),Zt=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Me.current&1)!==0?He===0&&(He=3):wu())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return Jr(),uu(t,i),t===null&&Ui(i.stateNode.containerInfo),lt(i),null;case 10:return Fl(i.type._context),lt(i),null;case 17:return gt(i.type)&&io(),lt(i),null;case 19:if(Oe(Me),p=i.memoizedState,p===null)return lt(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)Qi(p,!1);else{if(He!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=go(t),v!==null){for(i.flags|=128,Qi(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=o,o=i.child;o!==null;)p=o,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Ce(Me,Me.current&1|2),i.child}t=t.sibling}p.tail!==null&&ze()>ri&&(i.flags|=128,u=!0,Qi(p,!1),i.lanes=4194304)}else{if(!u)if(t=go(v),t!==null){if(i.flags|=128,u=!0,o=t.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),Qi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Pe)return lt(i),null}else 2*ze()-p.renderingStartTime>ri&&o!==1073741824&&(i.flags|=128,u=!0,Qi(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(o=p.last,o!==null?o.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=ze(),i.sibling=null,o=Me.current,Ce(Me,u?o&1|2:o&1),i):(lt(i),null);case 22:case 23:return xu(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Nt&1073741824)!==0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function Wy(t,i){switch(_l(i),i.tag){case 1:return gt(i.type)&&io(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Jr(),Oe(mt),Oe(ot),Wl(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return zl(i),null;case 13:if(Oe(Me),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Xr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Oe(Me),null;case 4:return Jr(),null;case 10:return Fl(i.type._context),null;case 22:case 23:return xu(),null;case 24:return null;default:return null}}var Ao=!1,ut=!1,Gy=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ti(t,i){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ue(t,i,u)}else o.current=null}function cu(t,i,o){try{o()}catch(u){Ue(t,i,u)}}var mh=!1;function Ky(t,i){if(xl=Ws,t=Hf(),pl(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,E=-1,T=-1,O=0,U=0,B=t,$=null;t:for(;;){for(var H;B!==o||d!==0&&B.nodeType!==3||(E=v+d),B!==p||u!==0&&B.nodeType!==3||(T=v+u),B.nodeType===3&&(v+=B.nodeValue.length),(H=B.firstChild)!==null;)$=B,B=H;for(;;){if(B===t)break t;if($===o&&++O===d&&(E=v),$===p&&++U===u&&(T=v),(H=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=H}o=E===-1||T===-1?null:{start:E,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(wl={focusedElem:t,selectionRange:o},Ws=!1,Y=i;Y!==null;)if(i=Y,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Y=t;else for(;Y!==null;){i=Y;try{var X=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var q=X.memoizedProps,Ve=X.memoizedState,N=i.stateNode,w=N.getSnapshotBeforeUpdate(i.elementType===i.type?q:Jt(i.type,q),Ve);N.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(V){Ue(i,i.return,V)}if(t=i.sibling,t!==null){t.return=i.return,Y=t;break}Y=i.return}return X=mh,mh=!1,X}function Zi(t,i,o){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var p=d.destroy;d.destroy=void 0,p!==void 0&&cu(i,o,p)}d=d.next}while(d!==u)}}function Co(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==i)}}function fu(t){var i=t.ref;if(i!==null){var o=t.stateNode;t.tag,t=o,typeof i=="function"?i(t):i.current=t}}function gh(t){var i=t.alternate;i!==null&&(t.alternate=null,gh(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[dn],delete i[Bi],delete i[Rl],delete i[Ny],delete i[Iy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vh(t){return t.tag===5||t.tag===3||t.tag===4}function yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function du(t,i,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(t,i):o.insertBefore(t,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(t,o)):(i=o,i.appendChild(t)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=no));else if(u!==4&&(t=t.child,t!==null))for(du(t,i,o),t=t.sibling;t!==null;)du(t,i,o),t=t.sibling}function hu(t,i,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?o.insertBefore(t,i):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(hu(t,i,o),t=t.sibling;t!==null;)hu(t,i,o),t=t.sibling}var tt=null,en=!1;function qn(t,i,o){for(o=o.child;o!==null;)Sh(t,i,o),o=o.sibling}function Sh(t,i,o){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount($s,o)}catch{}switch(o.tag){case 5:ut||ti(o,i);case 6:var u=tt,d=en;tt=null,qn(t,i,o),tt=u,en=d,tt!==null&&(en?(t=tt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):tt.removeChild(o.stateNode));break;case 18:tt!==null&&(en?(t=tt,o=o.stateNode,t.nodeType===8?Cl(t.parentNode,o):t.nodeType===1&&Cl(t,o),Oi(t)):Cl(tt,o.stateNode));break;case 4:u=tt,d=en,tt=o.stateNode.containerInfo,en=!0,qn(t,i,o),tt=u,en=d;break;case 0:case 11:case 14:case 15:if(!ut&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&cu(o,i,v),d=d.next}while(d!==u)}qn(t,i,o);break;case 1:if(!ut&&(ti(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(E){Ue(o,i,E)}qn(t,i,o);break;case 21:qn(t,i,o);break;case 22:o.mode&1?(ut=(u=ut)||o.memoizedState!==null,qn(t,i,o),ut=u):qn(t,i,o);break;default:qn(t,i,o)}}function Eh(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Gy),i.forEach(function(u){var d=t0.bind(null,t,u);o.has(u)||(o.add(u),u.then(d,d))})}}function tn(t,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];try{var p=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 5:tt=E.stateNode,en=!1;break e;case 3:tt=E.stateNode.containerInfo,en=!0;break e;case 4:tt=E.stateNode.containerInfo,en=!0;break e}E=E.return}if(tt===null)throw Error(n(160));Sh(p,v,d),tt=null,en=!1;var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(O){Ue(d,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Th(i,t),i=i.sibling}function Th(t,i){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(i,t),mn(t),u&4){try{Zi(3,t,t.return),Co(3,t)}catch(q){Ue(t,t.return,q)}try{Zi(5,t,t.return)}catch(q){Ue(t,t.return,q)}}break;case 1:tn(i,t),mn(t),u&512&&o!==null&&ti(o,o.return);break;case 5:if(tn(i,t),mn(t),u&512&&o!==null&&ti(o,o.return),t.flags&32){var d=t.stateNode;try{Si(d,"")}catch(q){Ue(t,t.return,q)}}if(u&4&&(d=t.stateNode,d!=null)){var p=t.memoizedProps,v=o!==null?o.memoizedProps:p,E=t.type,T=t.updateQueue;if(t.updateQueue=null,T!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&Yc(d,p),Wa(E,v);var O=Wa(E,p);for(v=0;v<T.length;v+=2){var U=T[v],B=T[v+1];U==="style"?nf(d,B):U==="dangerouslySetInnerHTML"?ef(d,B):U==="children"?Si(d,B):P(d,U,B,O)}switch(E){case"input":Ua(d,p);break;case"textarea":Qc(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var H=p.value;H!=null?Mr(d,!!p.multiple,H,!1):$!==!!p.multiple&&(p.defaultValue!=null?Mr(d,!!p.multiple,p.defaultValue,!0):Mr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Bi]=p}catch(q){Ue(t,t.return,q)}}break;case 6:if(tn(i,t),mn(t),u&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,p=t.memoizedProps;try{d.nodeValue=p}catch(q){Ue(t,t.return,q)}}break;case 3:if(tn(i,t),mn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Oi(i.containerInfo)}catch(q){Ue(t,t.return,q)}break;case 4:tn(i,t),mn(t);break;case 13:tn(i,t),mn(t),d=t.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(gu=ze())),u&4&&Eh(t);break;case 22:if(U=o!==null&&o.memoizedState!==null,t.mode&1?(ut=(O=ut)||U,tn(i,t),ut=O):tn(i,t),mn(t),u&8192){if(O=t.memoizedState!==null,(t.stateNode.isHidden=O)&&!U&&(t.mode&1)!==0)for(Y=t,U=t.child;U!==null;){for(B=Y=U;Y!==null;){switch($=Y,H=$.child,$.tag){case 0:case 11:case 14:case 15:Zi(4,$,$.return);break;case 1:ti($,$.return);var X=$.stateNode;if(typeof X.componentWillUnmount=="function"){u=$,o=$.return;try{i=u,X.props=i.memoizedProps,X.state=i.memoizedState,X.componentWillUnmount()}catch(q){Ue(u,o,q)}}break;case 5:ti($,$.return);break;case 22:if($.memoizedState!==null){kh(B);continue}}H!==null?(H.return=$,Y=H):kh(B)}U=U.sibling}e:for(U=null,B=t;;){if(B.tag===5){if(U===null){U=B;try{d=B.stateNode,O?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=B.stateNode,T=B.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,E.style.display=tf("display",v))}catch(q){Ue(t,t.return,q)}}}else if(B.tag===6){if(U===null)try{B.stateNode.nodeValue=O?"":B.memoizedProps}catch(q){Ue(t,t.return,q)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===t)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===t)break e;for(;B.sibling===null;){if(B.return===null||B.return===t)break e;U===B&&(U=null),B=B.return}U===B&&(U=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:tn(i,t),mn(t),u&4&&Eh(t);break;case 21:break;default:tn(i,t),mn(t)}}function mn(t){var i=t.flags;if(i&2){try{e:{for(var o=t.return;o!==null;){if(vh(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Si(d,""),u.flags&=-33);var p=yh(t);hu(t,p,d);break;case 3:case 4:var v=u.stateNode.containerInfo,E=yh(t);du(t,E,v);break;default:throw Error(n(161))}}catch(T){Ue(t,t.return,T)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Hy(t,i,o){Y=t,xh(t)}function xh(t,i,o){for(var u=(t.mode&1)!==0;Y!==null;){var d=Y,p=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Ao;if(!v){var E=d.alternate,T=E!==null&&E.memoizedState!==null||ut;E=Ao;var O=ut;if(Ao=v,(ut=T)&&!O)for(Y=d;Y!==null;)v=Y,T=v.child,v.tag===22&&v.memoizedState!==null?Ah(d):T!==null?(T.return=v,Y=T):Ah(d);for(;p!==null;)Y=p,xh(p),p=p.sibling;Y=d,Ao=E,ut=O}wh(t)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Y=p):wh(t)}}function wh(t){for(;Y!==null;){var i=Y;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ut||Co(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(o===null)u.componentDidMount();else{var d=i.elementType===i.type?o.memoizedProps:Jt(i.type,o.memoizedProps);u.componentDidUpdate(d,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&kd(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}kd(i,v,o)}break;case 5:var E=i.stateNode;if(o===null&&i.flags&4){o=E;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&o.focus();break;case"img":T.src&&(o.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var B=U.dehydrated;B!==null&&Oi(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ut||i.flags&512&&fu(i)}catch($){Ue(i,i.return,$)}}if(i===t){Y=null;break}if(o=i.sibling,o!==null){o.return=i.return,Y=o;break}Y=i.return}}function kh(t){for(;Y!==null;){var i=Y;if(i===t){Y=null;break}var o=i.sibling;if(o!==null){o.return=i.return,Y=o;break}Y=i.return}}function Ah(t){for(;Y!==null;){var i=Y;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{Co(4,i)}catch(T){Ue(i,o,T)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(T){Ue(i,d,T)}}var p=i.return;try{fu(i)}catch(T){Ue(i,p,T)}break;case 5:var v=i.return;try{fu(i)}catch(T){Ue(i,v,T)}}}catch(T){Ue(i,i.return,T)}if(i===t){Y=null;break}var E=i.sibling;if(E!==null){E.return=i.return,Y=E;break}Y=i.return}}var Yy=Math.ceil,Ro=M.ReactCurrentDispatcher,pu=M.ReactCurrentOwner,zt=M.ReactCurrentBatchConfig,Ee=0,Ze=null,Ge=null,nt=0,Nt=0,ni=Gn(0),He=0,Ji=null,Sr=0,No=0,mu=0,es=null,yt=null,gu=0,ri=1/0,_n=null,Io=!1,vu=null,Qn=null,Oo=!1,Zn=null,_o=0,ts=0,yu=null,Po=-1,Lo=0;function ft(){return(Ee&6)!==0?ze():Po!==-1?Po:Po=ze()}function Jn(t){return(t.mode&1)===0?1:(Ee&2)!==0&&nt!==0?nt&-nt:_y.transition!==null?(Lo===0&&(Lo=yf()),Lo):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:Rf(t.type)),t)}function nn(t,i,o,u){if(50<ts)throw ts=0,yu=null,Error(n(185));Ai(t,o,u),((Ee&2)===0||t!==Ze)&&(t===Ze&&((Ee&2)===0&&(No|=o),He===4&&er(t,nt)),St(t,u),o===1&&Ee===0&&(i.mode&1)===0&&(ri=ze()+500,oo&&Hn()))}function St(t,i){var o=t.callbackNode;_v(t,i);var u=Bs(t,t===Ze?nt:0);if(u===0)o!==null&&mf(o),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(o!=null&&mf(o),i===1)t.tag===0?Oy(Rh.bind(null,t)):dd(Rh.bind(null,t)),Cy(function(){(Ee&6)===0&&Hn()}),o=null;else{switch(Sf(u)){case 1:o=Qa;break;case 4:o=gf;break;case 16:o=Fs;break;case 536870912:o=vf;break;default:o=Fs}o=bh(o,Ch.bind(null,t))}t.callbackPriority=i,t.callbackNode=o}}function Ch(t,i){if(Po=-1,Lo=0,(Ee&6)!==0)throw Error(n(327));var o=t.callbackNode;if(ii()&&t.callbackNode!==o)return null;var u=Bs(t,t===Ze?nt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=Mo(t,u);else{i=u;var d=Ee;Ee|=2;var p=Ih();(Ze!==t||nt!==i)&&(_n=null,ri=ze()+500,Tr(t,i));do try{Qy();break}catch(E){Nh(t,E)}while(!0);jl(),Ro.current=p,Ee=d,Ge!==null?i=0:(Ze=null,nt=0,i=He)}if(i!==0){if(i===2&&(d=Za(t),d!==0&&(u=d,i=Su(t,d))),i===1)throw o=Ji,Tr(t,0),er(t,u),St(t,ze()),o;if(i===6)er(t,u);else{if(d=t.current.alternate,(u&30)===0&&!Xy(d)&&(i=Mo(t,u),i===2&&(p=Za(t),p!==0&&(u=p,i=Su(t,p))),i===1))throw o=Ji,Tr(t,0),er(t,u),St(t,ze()),o;switch(t.finishedWork=d,t.finishedLanes=u,i){case 0:case 1:throw Error(n(345));case 2:xr(t,yt,_n);break;case 3:if(er(t,u),(u&130023424)===u&&(i=gu+500-ze(),10<i)){if(Bs(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){ft(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=Al(xr.bind(null,t,yt,_n),i);break}xr(t,yt,_n);break;case 4:if(er(t,u),(u&4194240)===u)break;for(i=t.eventTimes,d=-1;0<u;){var v=31-qt(u);p=1<<v,v=i[v],v>d&&(d=v),u&=~p}if(u=d,u=ze()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Yy(u/1960))-u,10<u){t.timeoutHandle=Al(xr.bind(null,t,yt,_n),u);break}xr(t,yt,_n);break;case 5:xr(t,yt,_n);break;default:throw Error(n(329))}}}return St(t,ze()),t.callbackNode===o?Ch.bind(null,t):null}function Su(t,i){var o=es;return t.current.memoizedState.isDehydrated&&(Tr(t,i).flags|=256),t=Mo(t,i),t!==2&&(i=yt,yt=o,i!==null&&Eu(i)),t}function Eu(t){yt===null?yt=t:yt.push.apply(yt,t)}function Xy(t){for(var i=t;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Qt(p(),d))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function er(t,i){for(i&=~mu,i&=~No,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var o=31-qt(i),u=1<<o;t[o]=-1,i&=~u}}function Rh(t){if((Ee&6)!==0)throw Error(n(327));ii();var i=Bs(t,0);if((i&1)===0)return St(t,ze()),null;var o=Mo(t,i);if(t.tag!==0&&o===2){var u=Za(t);u!==0&&(i=u,o=Su(t,u))}if(o===1)throw o=Ji,Tr(t,0),er(t,i),St(t,ze()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,xr(t,yt,_n),St(t,ze()),null}function Tu(t,i){var o=Ee;Ee|=1;try{return t(i)}finally{Ee=o,Ee===0&&(ri=ze()+500,oo&&Hn())}}function Er(t){Zn!==null&&Zn.tag===0&&(Ee&6)===0&&ii();var i=Ee;Ee|=1;var o=zt.transition,u=Ae;try{if(zt.transition=null,Ae=1,t)return t()}finally{Ae=u,zt.transition=o,Ee=i,(Ee&6)===0&&Hn()}}function xu(){Nt=ni.current,Oe(ni)}function Tr(t,i){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Ay(o)),Ge!==null)for(o=Ge.return;o!==null;){var u=o;switch(_l(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&io();break;case 3:Jr(),Oe(mt),Oe(ot),Wl();break;case 5:zl(u);break;case 4:Jr();break;case 13:Oe(Me);break;case 19:Oe(Me);break;case 10:Fl(u.type._context);break;case 22:case 23:xu()}o=o.return}if(Ze=t,Ge=t=tr(t.current,null),nt=Nt=i,He=0,Ji=null,mu=No=Sr=0,yt=es=null,gr!==null){for(i=0;i<gr.length;i++)if(o=gr[i],u=o.interleaved,u!==null){o.interleaved=null;var d=u.next,p=o.pending;if(p!==null){var v=p.next;p.next=d,u.next=v}o.pending=u}gr=null}return t}function Nh(t,i){do{var o=Ge;try{if(jl(),vo.current=To,yo){for(var u=be.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}yo=!1}if(yr=0,Qe=Ke=be=null,Hi=!1,Yi=0,pu.current=null,o===null||o.return===null){He=1,Ji=i,Ge=null;break}e:{var p=t,v=o.return,E=o,T=i;if(i=nt,E.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var O=T,U=E,B=U.tag;if((U.mode&1)===0&&(B===0||B===11||B===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var H=Jd(v);if(H!==null){H.flags&=-257,eh(H,v,E,p,i),H.mode&1&&Zd(p,O,i),i=H,T=O;var X=i.updateQueue;if(X===null){var q=new Set;q.add(T),i.updateQueue=q}else X.add(T);break e}else{if((i&1)===0){Zd(p,O,i),wu();break e}T=Error(n(426))}}else if(Pe&&E.mode&1){var Ve=Jd(v);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),eh(Ve,v,E,p,i),Ml(ei(T,E));break e}}p=T=ei(T,E),He!==4&&(He=2),es===null?es=[p]:es.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var N=qd(p,T,i);wd(p,N);break e;case 1:E=T;var w=p.type,I=p.stateNode;if((p.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Qn===null||!Qn.has(I)))){p.flags|=65536,i&=-i,p.lanes|=i;var V=Qd(p,E,i);wd(p,V);break e}}p=p.return}while(p!==null)}_h(o)}catch(Q){i=Q,Ge===o&&o!==null&&(Ge=o=o.return);continue}break}while(!0)}function Ih(){var t=Ro.current;return Ro.current=To,t===null?To:t}function wu(){(He===0||He===3||He===2)&&(He=4),Ze===null||(Sr&268435455)===0&&(No&268435455)===0||er(Ze,nt)}function Mo(t,i){var o=Ee;Ee|=2;var u=Ih();(Ze!==t||nt!==i)&&(_n=null,Tr(t,i));do try{qy();break}catch(d){Nh(t,d)}while(!0);if(jl(),Ee=o,Ro.current=u,Ge!==null)throw Error(n(261));return Ze=null,nt=0,He}function qy(){for(;Ge!==null;)Oh(Ge)}function Qy(){for(;Ge!==null&&!xv();)Oh(Ge)}function Oh(t){var i=Mh(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,i===null?_h(t):Ge=i,pu.current=null}function _h(t){var i=t;do{var o=i.alternate;if(t=i.return,(i.flags&32768)===0){if(o=Vy(o,i,Nt),o!==null){Ge=o;return}}else{if(o=Wy(o,i),o!==null){o.flags&=32767,Ge=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ge=null;return}}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=t}while(i!==null);He===0&&(He=5)}function xr(t,i,o){var u=Ae,d=zt.transition;try{zt.transition=null,Ae=1,Zy(t,i,o,u)}finally{zt.transition=d,Ae=u}return null}function Zy(t,i,o,u){do ii();while(Zn!==null);if((Ee&6)!==0)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Pv(t,p),t===Ze&&(Ge=Ze=null,nt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Oo||(Oo=!0,bh(Fs,function(){return ii(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=zt.transition,zt.transition=null;var v=Ae;Ae=1;var E=Ee;Ee|=4,pu.current=null,Ky(t,o),Th(o,t),yy(wl),Ws=!!xl,wl=xl=null,t.current=o,Hy(o),wv(),Ee=E,Ae=v,zt.transition=p}else t.current=o;if(Oo&&(Oo=!1,Zn=t,_o=d),p=t.pendingLanes,p===0&&(Qn=null),Cv(o.stateNode),St(t,ze()),i!==null)for(u=t.onRecoverableError,o=0;o<i.length;o++)d=i[o],u(d.value,{componentStack:d.stack,digest:d.digest});if(Io)throw Io=!1,t=vu,vu=null,t;return(_o&1)!==0&&t.tag!==0&&ii(),p=t.pendingLanes,(p&1)!==0?t===yu?ts++:(ts=0,yu=t):ts=0,Hn(),null}function ii(){if(Zn!==null){var t=Sf(_o),i=zt.transition,o=Ae;try{if(zt.transition=null,Ae=16>t?16:t,Zn===null)var u=!1;else{if(t=Zn,Zn=null,_o=0,(Ee&6)!==0)throw Error(n(331));var d=Ee;for(Ee|=4,Y=t.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var E=p.deletions;if(E!==null){for(var T=0;T<E.length;T++){var O=E[T];for(Y=O;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:Zi(8,U,p)}var B=U.child;if(B!==null)B.return=U,Y=B;else for(;Y!==null;){U=Y;var $=U.sibling,H=U.return;if(gh(U),U===O){Y=null;break}if($!==null){$.return=H,Y=$;break}Y=H}}}var X=p.alternate;if(X!==null){var q=X.child;if(q!==null){X.child=null;do{var Ve=q.sibling;q.sibling=null,q=Ve}while(q!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Zi(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,Y=N;break e}Y=p.return}}var w=t.current;for(Y=w;Y!==null;){v=Y;var I=v.child;if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,Y=I;else e:for(v=w;Y!==null;){if(E=Y,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Co(9,E)}}catch(Q){Ue(E,E.return,Q)}if(E===v){Y=null;break e}var V=E.sibling;if(V!==null){V.return=E.return,Y=V;break e}Y=E.return}}if(Ee=d,Hn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot($s,t)}catch{}u=!0}return u}finally{Ae=o,zt.transition=i}}return!1}function Ph(t,i,o){i=ei(o,i),i=qd(t,i,1),t=Xn(t,i,1),i=ft(),t!==null&&(Ai(t,1,i),St(t,i))}function Ue(t,i,o){if(t.tag===3)Ph(t,t,o);else for(;i!==null;){if(i.tag===3){Ph(i,t,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qn===null||!Qn.has(u))){t=ei(o,t),t=Qd(i,t,1),i=Xn(i,t,1),t=ft(),i!==null&&(Ai(i,1,t),St(i,t));break}}i=i.return}}function Jy(t,i,o){var u=t.pingCache;u!==null&&u.delete(i),i=ft(),t.pingedLanes|=t.suspendedLanes&o,Ze===t&&(nt&o)===o&&(He===4||He===3&&(nt&130023424)===nt&&500>ze()-gu?Tr(t,0):mu|=o),St(t,i)}function Lh(t,i){i===0&&((t.mode&1)===0?i=1:(i=Ds,Ds<<=1,(Ds&130023424)===0&&(Ds=4194304)));var o=ft();t=Nn(t,i),t!==null&&(Ai(t,i,o),St(t,o))}function e0(t){var i=t.memoizedState,o=0;i!==null&&(o=i.retryLane),Lh(t,o)}function t0(t,i){var o=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(i),Lh(t,o)}var Mh;Mh=function(t,i,o){if(t!==null)if(t.memoizedProps!==i.pendingProps||mt.current)vt=!0;else{if((t.lanes&o)===0&&(i.flags&128)===0)return vt=!1,zy(t,i,o);vt=(t.flags&131072)!==0}else vt=!1,Pe&&(i.flags&1048576)!==0&&hd(i,lo,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;ko(t,i),t=i.pendingProps;var d=Kr(i,ot.current);Zr(i,o),d=Hl(null,i,u,t,d,o);var p=Yl();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,gt(u)?(p=!0,so(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Dl(i),d.updater=xo,i.stateNode=d,d._reactInternals=i,eu(i,u,t,o),i=iu(null,i,u,!0,p,o)):(i.tag=0,Pe&&p&&Ol(i),ct(null,i,d,o),i=i.child),i;case 16:u=i.elementType;e:{switch(ko(t,i),t=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=r0(u),t=Jt(u,t),d){case 0:i=ru(null,i,u,t,o);break e;case 1:i=oh(null,i,u,t,o);break e;case 11:i=th(null,i,u,t,o);break e;case 14:i=nh(null,i,u,Jt(u.type,t),o);break e}throw Error(n(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),ru(t,i,u,d,o);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),oh(t,i,u,d,o);case 3:e:{if(ah(i),t===null)throw Error(n(387));u=i.pendingProps,p=i.memoizedState,d=p.element,xd(t,i),mo(i,u,null,o);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ei(Error(n(423)),i),i=lh(t,i,u,o,d);break e}else if(u!==d){d=ei(Error(n(424)),i),i=lh(t,i,u,o,d);break e}else for(Rt=Wn(i.stateNode.containerInfo.firstChild),Ct=i,Pe=!0,Zt=null,o=Ed(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Xr(),u===d){i=On(t,i,o);break e}ct(t,i,u,o)}i=i.child}return i;case 5:return Ad(i),t===null&&Ll(i),u=i.type,d=i.pendingProps,p=t!==null?t.memoizedProps:null,v=d.children,kl(u,d)?v=null:p!==null&&kl(u,p)&&(i.flags|=32),sh(t,i),ct(t,i,v,o),i.child;case 6:return t===null&&Ll(i),null;case 13:return uh(t,i,o);case 4:return Bl(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=qr(i,null,u,o):ct(t,i,u,o),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),th(t,i,u,d,o);case 7:return ct(t,i,i.pendingProps,o),i.child;case 8:return ct(t,i,i.pendingProps.children,o),i.child;case 12:return ct(t,i,i.pendingProps.children,o),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ce(fo,u._currentValue),u._currentValue=v,p!==null)if(Qt(p.value,v)){if(p.children===d.children&&!mt.current){i=On(t,i,o);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var E=p.dependencies;if(E!==null){v=p.child;for(var T=E.firstContext;T!==null;){if(T.context===u){if(p.tag===1){T=In(-1,o&-o),T.tag=2;var O=p.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?T.next=T:(T.next=U.next,U.next=T),O.pending=T}}p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),$l(p.return,o,i),E.lanes|=o;break}T=T.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(n(341));v.lanes|=o,E=v.alternate,E!==null&&(E.lanes|=o),$l(v,o,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}ct(t,i,d.children,o),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,Zr(i,o),d=Dt(d),u=u(d),i.flags|=1,ct(t,i,u,o),i.child;case 14:return u=i.type,d=Jt(u,i.pendingProps),d=Jt(u.type,d),nh(t,i,u,d,o);case 15:return rh(t,i,i.type,i.pendingProps,o);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:Jt(u,d),ko(t,i),i.tag=1,gt(u)?(t=!0,so(i)):t=!1,Zr(i,o),Yd(i,u,d),eu(i,u,d,o),iu(null,i,u,!0,t,o);case 19:return fh(t,i,o);case 22:return ih(t,i,o)}throw Error(n(156,i.tag))};function bh(t,i){return pf(t,i)}function n0(t,i,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,i,o,u){return new n0(t,i,o,u)}function ku(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r0(t){if(typeof t=="function")return ku(t)?1:0;if(t!=null){if(t=t.$$typeof,t===et)return 11;if(t===de)return 14}return 2}function tr(t,i){var o=t.alternate;return o===null?(o=Vt(t.tag,i,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=i,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,i=t.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function bo(t,i,o,u,d,p){var v=2;if(u=t,typeof t=="function")ku(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case D:return wr(o.children,d,p,i);case G:v=8,d|=8;break;case ke:return t=Vt(12,o,i,d|2),t.elementType=ke,t.lanes=p,t;case Fe:return t=Vt(13,o,i,d),t.elementType=Fe,t.lanes=p,t;case $e:return t=Vt(19,o,i,d),t.elementType=$e,t.lanes=p,t;case we:return jo(o,d,p,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:v=10;break e;case We:v=9;break e;case et:v=11;break e;case de:v=14;break e;case ge:v=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return i=Vt(v,o,i,d),i.elementType=t,i.type=u,i.lanes=p,i}function wr(t,i,o,u){return t=Vt(7,t,u,i),t.lanes=o,t}function jo(t,i,o,u){return t=Vt(22,t,u,i),t.elementType=we,t.lanes=o,t.stateNode={isHidden:!1},t}function Au(t,i,o){return t=Vt(6,t,null,i),t.lanes=o,t}function Cu(t,i,o){return i=Vt(4,t.children!==null?t.children:[],t.key,i),i.lanes=o,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function i0(t,i,o,u,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ja(0),this.expirationTimes=Ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ru(t,i,o,u,d,p,v,E,T){return t=new i0(t,i,o,E,T),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Vt(3,null,null,i),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dl(p),t}function s0(t,i,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:t,containerInfo:i,implementation:o}}function jh(t){if(!t)return Kn;t=t._reactInternals;e:{if(fr(t)!==t||t.tag!==1)throw Error(n(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(gt(o))return cd(t,o,i)}return i}function Fh(t,i,o,u,d,p,v,E,T){return t=Ru(o,u,!0,t,d,p,v,E,T),t.context=jh(null),o=t.current,u=ft(),d=Jn(o),p=In(u,d),p.callback=i??null,Xn(o,p,d),t.current.lanes=d,Ai(t,d,u),St(t,u),t}function Fo(t,i,o,u){var d=i.current,p=ft(),v=Jn(d);return o=jh(o),i.context===null?i.context=o:i.pendingContext=o,i=In(p,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=Xn(d,i,v),t!==null&&(nn(t,d,v,p),po(t,d,v)),v}function $o(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function $h(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<i?o:i}}function Nu(t,i){$h(t,i),(t=t.alternate)&&$h(t,i)}function o0(){return null}var Uh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iu(t){this._internalRoot=t}Uo.prototype.render=Iu.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(n(409));Fo(t,i,null,null)},Uo.prototype.unmount=Iu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Er(function(){Fo(null,t,null,null)}),i[kn]=null}};function Uo(t){this._internalRoot=t}Uo.prototype.unstable_scheduleHydration=function(t){if(t){var i=xf();t={blockedOn:null,target:t,priority:i};for(var o=0;o<Bn.length&&i!==0&&i<Bn[o].priority;o++);Bn.splice(o,0,t),o===0&&Af(t)}};function Ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Do(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dh(){}function a0(t,i,o,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var O=$o(v);p.call(O)}}var v=Fh(i,u,t,0,null,!1,!1,"",Dh);return t._reactRootContainer=v,t[kn]=v.current,Ui(t.nodeType===8?t.parentNode:t),Er(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof u=="function"){var E=u;u=function(){var O=$o(T);E.call(O)}}var T=Ru(t,0,!1,null,null,!1,!1,"",Dh);return t._reactRootContainer=T,t[kn]=T.current,Ui(t.nodeType===8?t.parentNode:t),Er(function(){Fo(i,T,o,u)}),T}function Bo(t,i,o,u,d){var p=o._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var E=d;d=function(){var T=$o(v);E.call(T)}}Fo(i,v,t,d)}else v=a0(o,i,t,d,u);return $o(v)}Ef=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var o=ki(i.pendingLanes);o!==0&&(el(i,o|1),St(i,ze()),(Ee&6)===0&&(ri=ze()+500,Hn()))}break;case 13:Er(function(){var u=Nn(t,1);if(u!==null){var d=ft();nn(u,t,1,d)}}),Nu(t,1)}},tl=function(t){if(t.tag===13){var i=Nn(t,134217728);if(i!==null){var o=ft();nn(i,t,134217728,o)}Nu(t,134217728)}},Tf=function(t){if(t.tag===13){var i=Jn(t),o=Nn(t,i);if(o!==null){var u=ft();nn(o,t,i,u)}Nu(t,i)}},xf=function(){return Ae},wf=function(t,i){var o=Ae;try{return Ae=t,i()}finally{Ae=o}},Ha=function(t,i,o){switch(i){case"input":if(Ua(t,o),i=o.name,o.type==="radio"&&i!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==t&&u.form===t.form){var d=ro(u);if(!d)throw Error(n(90));jt(u),Ua(u,d)}}}break;case"textarea":Qc(t,o);break;case"select":i=o.value,i!=null&&Mr(t,!!o.multiple,i,!1)}},af=Tu,lf=Er;var l0={usingClientEntryPoint:!1,Events:[zi,Wr,ro,sf,of,Tu]},ns={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u0={bundleType:ns.bundleType,version:ns.version,rendererPackageName:ns.rendererPackageName,rendererConfig:ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=df(t),t===null?null:t.stateNode},findFiberByHostInstance:ns.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{$s=zo.inject(u0),fn=zo}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0,Et.createPortal=function(t,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(i))throw Error(n(200));return s0(t,i,null,o)},Et.createRoot=function(t,i){if(!Ou(t))throw Error(n(299));var o=!1,u="",d=Uh;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Ru(t,1,!1,null,null,o,!1,u,d),t[kn]=i.current,Ui(t.nodeType===8?t.parentNode:t),new Iu(i)},Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=df(i),t=t===null?null:t.stateNode,t},Et.flushSync=function(t){return Er(t)},Et.hydrate=function(t,i,o){if(!Do(i))throw Error(n(200));return Bo(null,t,i,!0,o)},Et.hydrateRoot=function(t,i,o){if(!Ou(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,d=!1,p="",v=Uh;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),i=Fh(i,null,t,1,o??null,d,!1,p,v),t[kn]=i.current,Ui(t),u)for(t=0;t<u.length;t++)o=u[t],d=o._getVersion,d=d(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,d]:i.mutableSourceEagerHydrationData.push(o,d);return new Uo(i)},Et.render=function(t,i,o){if(!Do(i))throw Error(n(200));return Bo(null,t,i,!1,o)},Et.unmountComponentAtNode=function(t){if(!Do(t))throw Error(n(40));return t._reactRootContainer?(Er(function(){Bo(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1},Et.unstable_batchedUpdates=Tu,Et.unstable_renderSubtreeIntoContainer=function(t,i,o,u){if(!Do(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Bo(t,i,o,!1,u)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var Yh;function y0(){if(Yh)return Lu.exports;Yh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lu.exports=v0(),Lu.exports}var Xh;function S0(){if(Xh)return Vo;Xh=1;var r=y0();return Vo.createRoot=r.createRoot,Vo.hydrateRoot=r.hydrateRoot,Vo}var E0=S0();const T0={},qh=r=>{let e;const n=new Set,s=(g,y)=>{const S=typeof g=="function"?g(e):g;if(!Object.is(S,e)){const x=e;e=y??(typeof S!="object"||S===null)?S:Object.assign({},e,S),n.forEach(A=>A(e,x))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>m,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(T0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=e=r(s,a,h);return h},x0=r=>r?qh(r):qh;var ju={exports:{}},Fu={},$u={exports:{}},Uu={};var Qh;function w0(){if(Qh)return Uu;Qh=1;var r=ks();function e(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var n=typeof Object.is=="function"?Object.is:e,s=r.useState,a=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function f(y,S){var x=S(),A=s({inst:{value:x,getSnapshot:S}}),R=A[0].inst,j=A[1];return l(function(){R.value=x,R.getSnapshot=S,h(R)&&j({inst:R})},[y,x,S]),a(function(){return h(R)&&j({inst:R}),y(function(){h(R)&&j({inst:R})})},[y]),c(x),x}function h(y){var S=y.getSnapshot;y=y.value;try{var x=S();return!n(y,x)}catch{return!0}}function m(y,S){return S()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return Uu.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Uu}var Zh;function k0(){return Zh||(Zh=1,$u.exports=w0()),$u.exports}var Jh;function A0(){if(Jh)return Fu;Jh=1;var r=ks(),e=k0();function n(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=r.useRef,c=r.useEffect,f=r.useMemo,h=r.useDebugValue;return Fu.useSyncExternalStoreWithSelector=function(m,g,y,S,x){var A=l(null);if(A.current===null){var R={hasValue:!1,value:null};A.current=R}else R=A.current;A=f(function(){function b(L){if(!_){if(_=!0,P=L,L=S(L),x!==void 0&&R.hasValue){var D=R.value;if(x(D,L))return M=D}return M=L}if(D=M,s(P,L))return D;var G=S(L);return x!==void 0&&x(D,G)?(P=L,D):(P=L,M=G)}var _=!1,P,M,z=y===void 0?null:y;return[function(){return b(g())},z===null?void 0:function(){return b(z())}]},[g,y,S,x]);var j=a(m,A[0],A[1]);return c(function(){R.hasValue=!0,R.value=j},[j]),h(j),j},Fu}var ep;function C0(){return ep||(ep=1,ju.exports=A0()),ju.exports}var R0=C0();const N0=Ec(R0),xm={},{useDebugValue:I0}=Ar,{useSyncExternalStoreWithSelector:O0}=N0;let tp=!1;const _0=r=>r;function P0(r,e=_0,n){(xm?"production":void 0)!=="production"&&n&&!tp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tp=!0);const s=O0(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,n);return I0(s),s}const np=r=>{(xm?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?x0(r):r,n=(s,a)=>P0(e,s,a);return Object.assign(n,e),n},L0=r=>r?np(r):np,M0=`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills and commands.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation for current file"
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest", "Testing Library"]
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "refactor", "test"]
  }
}

@restrictions {
  - "Always explain your reasoning before making changes"
  - "Ask for clarification when requirements are unclear"
  - "Never skip writing tests for new functionality"
}
`,b0={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}},ie=L0(r=>({files:[{path:"project.prs",content:M0}],activeFile:"project.prs",isCompiling:!1,compileResult:null,lastCompileTime:null,config:b0,activeFormatter:"github",showErrors:!1,showExamples:!1,showConfig:!1,showEnvVars:!1,setActiveFile:e=>r({activeFile:e}),updateFile:(e,n)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,content:n}:a)})),addFile:(e,n)=>r(s=>({files:[...s.files,{path:e,content:n}],activeFile:e})),deleteFile:e=>r(n=>{const s=n.files.filter(l=>l.path!==e),a=n.activeFile===e?s[0]?.path??"project.prs":n.activeFile;return{files:s,activeFile:a}}),renameFile:(e,n)=>r(s=>({files:s.files.map(a=>a.path===e?{...a,path:n}:a),activeFile:s.activeFile===e?n:s.activeFile})),setFiles:e=>r({files:e,activeFile:e[0]?.path??"project.prs"}),setCompiling:e=>r({isCompiling:e}),setCompileResult:e=>r({compileResult:e,lastCompileTime:Date.now(),showErrors:e!==null&&!e.success}),setTargetEnabled:(e,n)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],enabled:n}}}})),setTargetVersion:(e,n)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],version:n}}}})),setTargetConvention:(e,n)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],convention:n}}}})),setFormatting:e=>r(n=>({config:{...n.config,formatting:{...n.config.formatting,...e}}})),setConfig:e=>r({config:e}),setEnvVar:(e,n)=>r(s=>({config:{...s.config,envVars:{...s.config.envVars,[e]:n}}})),deleteEnvVar:e=>r(n=>{const{[e]:s,...a}=n.config.envVars;return{config:{...n.config,envVars:a}}}),setEnvVars:e=>r(n=>({config:{...n.config,envVars:e}})),setActiveFormatter:e=>r({activeFormatter:e}),setShowErrors:e=>r({showErrors:e}),setShowExamples:e=>r({showExamples:e}),setShowConfig:e=>r({showConfig:e}),setShowEnvVars:e=>r({showEnvVars:e})})),j0=r=>r.files.find(e=>e.path===r.activeFile)?.content??"",F0=r=>{const e={};for(const n of r.files)e[n.path]=n.content;return e},$0=(r,e)=>{if(!r.compileResult?.outputs)return[];const n=r.compileResult.outputs,s=[],l={claude:[/CLAUDE\.md$/,/\.claude\/rules\/.*\.md$/,/\.claude\/skills\/.*\.md$/,/\.claude\/memories\/.*\.md$/],github:[/\.github\/copilot-instructions\.md$/,/copilot-instructions\.md$/,/\.github\/instructions\/.*\.instructions\.md$/,/\.github\/prompts\/.*\.prompt\.md$/,/\.github\/skills\/.*\/SKILL\.md$/,/\.github\/agents\/.*\.md$/,/^AGENTS\.md$/],cursor:[/\.cursor\/rules\/.*\.mdc$/,/\.cursorrules$/],antigravity:[/\.agent\/rules\/.*\.md$/,/\.agent\/workflows\/.*\.md$/]}[e];for(const[h,m]of n)l.some(g=>g.test(h))&&s.push(m);const f={claude:"CLAUDE.md",github:"copilot-instructions.md",cursor:"instructions.mdc",antigravity:"project.md"}[e];return s.sort((h,m)=>{const g=h.path.endsWith(f),y=m.path.endsWith(f);return g&&!y?-1:!g&&y?1:h.path.localeCompare(m.path)}),s},U0=r=>Object.entries(r.config.targets).filter(([,e])=>e.enabled).map(([e])=>e);var Du={exports:{}},rp;function D0(){return rp||(rp=1,(function(r){var e=(function(){var n=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={};function c(h,m){if(!l[h]){l[h]={};for(var g=0;g<h.length;g++)l[h][h.charAt(g)]=g}return l[h][m]}var f={compressToBase64:function(h){if(h==null)return"";var m=f._compress(h,6,function(g){return s.charAt(g)});switch(m.length%4){default:case 0:return m;case 1:return m+"===";case 2:return m+"==";case 3:return m+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:f._decompress(h.length,32,function(m){return c(s,h.charAt(m))})},compressToUTF16:function(h){return h==null?"":f._compress(h,15,function(m){return n(m+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:f._decompress(h.length,16384,function(m){return h.charCodeAt(m)-32})},compressToUint8Array:function(h){for(var m=f.compress(h),g=new Uint8Array(m.length*2),y=0,S=m.length;y<S;y++){var x=m.charCodeAt(y);g[y*2]=x>>>8,g[y*2+1]=x%256}return g},decompressFromUint8Array:function(h){if(h==null)return f.decompress(h);for(var m=new Array(h.length/2),g=0,y=m.length;g<y;g++)m[g]=h[g*2]*256+h[g*2+1];var S=[];return m.forEach(function(x){S.push(n(x))}),f.decompress(S.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":f._compress(h,6,function(m){return a.charAt(m)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),f._decompress(h.length,32,function(m){return c(a,h.charAt(m))}))},compress:function(h){return f._compress(h,16,function(m){return n(m)})},_compress:function(h,m,g){if(h==null)return"";var y,S,x={},A={},R="",j="",b="",_=2,P=3,M=2,z=[],L=0,D=0,G;for(G=0;G<h.length;G+=1)if(R=h.charAt(G),Object.prototype.hasOwnProperty.call(x,R)||(x[R]=P++,A[R]=!0),j=b+R,Object.prototype.hasOwnProperty.call(x,j))b=j;else{if(Object.prototype.hasOwnProperty.call(A,b)){if(b.charCodeAt(0)<256){for(y=0;y<M;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(S=b.charCodeAt(0),y=0;y<8;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}else{for(S=1,y=0;y<M;y++)L=L<<1|S,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=0;for(S=b.charCodeAt(0),y=0;y<16;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}_--,_==0&&(_=Math.pow(2,M),M++),delete A[b]}else for(S=x[b],y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;_--,_==0&&(_=Math.pow(2,M),M++),x[j]=P++,b=String(R)}if(b!==""){if(Object.prototype.hasOwnProperty.call(A,b)){if(b.charCodeAt(0)<256){for(y=0;y<M;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(S=b.charCodeAt(0),y=0;y<8;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}else{for(S=1,y=0;y<M;y++)L=L<<1|S,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=0;for(S=b.charCodeAt(0),y=0;y<16;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1}_--,_==0&&(_=Math.pow(2,M),M++),delete A[b]}else for(S=x[b],y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;_--,_==0&&(_=Math.pow(2,M),M++)}for(S=2,y=0;y<M;y++)L=L<<1|S&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,S=S>>1;for(;;)if(L=L<<1,D==m-1){z.push(g(L));break}else D++;return z.join("")},decompress:function(h){return h==null?"":h==""?null:f._decompress(h.length,32768,function(m){return h.charCodeAt(m)})},_decompress:function(h,m,g){var y=[],S=4,x=4,A=3,R="",j=[],b,_,P,M,z,L,D,G={val:g(0),position:m,index:1};for(b=0;b<3;b+=1)y[b]=b;for(P=0,z=Math.pow(2,2),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;switch(P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;D=n(P);break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;D=n(P);break;case 2:return""}for(y[3]=D,_=D,j.push(D);;){if(G.index>h)return"";for(P=0,z=Math.pow(2,A),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;switch(D=P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;y[x++]=n(P),D=x-1,S--;break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)M=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(M>0?1:0)*L,L<<=1;y[x++]=n(P),D=x-1,S--;break;case 2:return j.join("")}if(S==0&&(S=Math.pow(2,A),A++),y[D])R=y[D];else if(D===x)R=_+_.charAt(0);else return null;j.push(R),y[x++]=_+R.charAt(0),S--,_=R,S==0&&(S=Math.pow(2,A),A++)}}};return f})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Du)),Du.exports}var B0=D0();const wm=Ec(B0),z0="1",ir={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}};function V0(r){const e={},n={};for(const[a,l]of Object.entries(r.targets)){const c=ir.targets[a],f={};l.enabled!==c.enabled&&(f.enabled=l.enabled),l.version!==c.version&&(f.version=l.version),l.convention!==c.convention&&(f.convention=l.convention),Object.keys(f).length>0&&(n[a]=f)}Object.keys(n).length>0&&(e.targets=n);const s={};return r.formatting.tabWidth!==ir.formatting.tabWidth&&(s.tabWidth=r.formatting.tabWidth),r.formatting.proseWrap!==ir.formatting.proseWrap&&(s.proseWrap=r.formatting.proseWrap),r.formatting.printWidth!==ir.formatting.printWidth&&(s.printWidth=r.formatting.printWidth),Object.keys(s).length>0&&(e.formatting=s),r.envVars&&Object.keys(r.envVars).length>0&&(e.envVars=r.envVars),Object.keys(e).length>0?e:void 0}function W0(r){if(!r)return{...ir};const e={targets:{...ir.targets},formatting:{...ir.formatting},envVars:{...ir.envVars}};if(r.targets)for(const[n,s]of Object.entries(r.targets))e.targets[n]={...e.targets[n],...s};return r.formatting&&(e.formatting={...e.formatting,...r.formatting}),r.envVars&&(e.envVars={...r.envVars}),e}function km(r,e,n,s){const a={files:r.map(f=>({path:f.path,content:f.content})),entry:r[0]?.path,formatter:e,config:s?V0(s):void 0,version:z0},l=JSON.stringify(a);return wm.compressToEncodedURIComponent(l)}function G0(r){try{const e=wm.decompressFromEncodedURIComponent(r);if(!e)return null;const n=JSON.parse(e);if(!n.files||!Array.isArray(n.files))return null;for(const s of n.files)if(typeof s.path!="string"||typeof s.content!="string")return null;return n}catch{return null}}function K0(r,e,n,s){const a=km(r,e,n,s),l=new URL(window.location.href);return l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.toString()}function H0(){const r=new URL(window.location.href),e=r.searchParams.get("s");if(!e)return null;const n=G0(e);if(!n)return null;const s=r.searchParams.get("f");return s&&(n.formatter=s),n}function Y0(){return new URL(window.location.href).searchParams.get("e")}function X0(r,e,n,s){const a=km(r,e,n,s),l=new URL(window.location.href);l.searchParams.set("s",a),e&&l.searchParams.set("f",e),l.searchParams.delete("e"),window.history.replaceState(null,"",l.toString())}async function q0(r,e,n,s){try{const a=K0(r,e,n,s);return await navigator.clipboard.writeText(a),!0}catch{return!1}}function Q0(){const r=ie(m=>m.files),e=ie(m=>m.activeFormatter),n=ie(m=>m.config),s=ie(m=>m.setFiles),a=ie(m=>m.setActiveFormatter),l=ie(m=>m.setConfig),c=Z.useRef(!1),f=Z.useRef(null);return Z.useEffect(()=>{if(c.current||(c.current=!0,Y0()))return;const g=H0();g&&(s(g.files),g.formatter&&a(g.formatter),g.config&&l(W0(g.config)))},[s,a,l]),Z.useEffect(()=>{if(c.current)return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{X0(r,e,void 0,n)},1e3),()=>{f.current&&clearTimeout(f.current)}},[r,e,n]),{handleShare:Z.useCallback(async()=>await q0(r,e,void 0,n),[r,e,n])}}const Z0="1.0.0-alpha.9",J0="https://github.com/mrwogu/promptscript";function eS(){const r=ie(R=>R.isCompiling),e=ie(R=>R.compileResult),n=ie(R=>R.showExamples),s=ie(R=>R.setShowExamples),a=ie(R=>R.showConfig),l=ie(R=>R.setShowConfig),c=ie(R=>R.showEnvVars),f=ie(R=>R.setShowEnvVars),h=Object.keys(ie(R=>R.config.envVars)).length,{handleShare:m}=Q0(),[g,y]=Z.useState(!1),S=e&&!e.success,x=e?.stats,A=async()=>{await m()&&(y(!0),setTimeout(()=>y(!1),2e3))};return C.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-ps-surface border-b border-ps-border",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx("span",{className:"text-ps-primary",children:"PRS"}),C.jsx("span",{children:"PromptScript Playground"})]}),C.jsxs("span",{className:"text-xs text-gray-500",children:["v",Z0]})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"flex items-center gap-2 text-sm",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),C.jsx("span",{className:"text-gray-400",children:"Compiling..."})]}):S?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),C.jsxs("span",{className:"text-red-400",children:[e.errors.length," error",e.errors.length!==1?"s":""]})]}):e?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),C.jsxs("span",{className:"text-green-400",children:["Compiled in ",x?.totalTime,"ms"]})]}):null}),C.jsxs("button",{onClick:()=>l(!a),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${a?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Configuration",children:[C.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Config"]}),C.jsxs("button",{onClick:()=>f(!c),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${c?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Environment Variables",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Env",h>0&&C.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-indigo-500 rounded-full",children:h})]}),C.jsx("button",{onClick:()=>s(!n),className:`px-3 py-1 text-sm rounded ${n?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,children:"Examples"}),C.jsx("button",{onClick:A,className:"px-3 py-1 text-sm bg-ps-primary hover:bg-ps-secondary rounded text-white relative",children:g?"Copied!":"Share"}),C.jsx("a",{href:J0,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z",clipRule:"evenodd"})})})]})]})}function tS(){const r=ie(x=>x.files),e=ie(x=>x.activeFile),n=ie(x=>x.setActiveFile),s=ie(x=>x.addFile),a=ie(x=>x.deleteFile),l=ie(x=>x.renameFile),[c,f]=Z.useState(null),[h,m]=Z.useState(""),g=()=>{const x="new-file";let A=`${x}.prs`,R=1;for(;r.some(j=>j.path===A);)A=`${x}-${R}.prs`,R++;s(A,`@meta {
  id: "`+A.replace(".prs","")+`"
  syntax: "1.0.0"
}
`)},y=x=>{f(x),m(x)},S=x=>{if(h&&h!==x){const A=h.endsWith(".prs")?h:`${h}.prs`;r.some(R=>R.path===A)||l(x,A)}f(null)};return C.jsxs("div",{className:"flex items-center bg-ps-bg border-b border-ps-border overflow-x-auto",children:[r.map(x=>C.jsx("div",{className:`group flex items-center px-3 py-2 text-sm cursor-pointer border-r border-ps-border ${e===x.path?"bg-ps-surface text-white":"text-gray-400 hover:bg-ps-surface/50"}`,onClick:()=>n(x.path),onDoubleClick:()=>y(x.path),children:c===x.path?C.jsx("input",{type:"text",value:h,onChange:A=>m(A.target.value),onBlur:()=>S(x.path),onKeyDown:A=>{A.key==="Enter"&&S(x.path),A.key==="Escape"&&f(null)},className:"bg-transparent border-b border-ps-primary outline-none w-24",autoFocus:!0,onClick:A=>A.stopPropagation()}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"truncate max-w-[120px]",children:x.path}),r.length>1&&C.jsx("button",{onClick:A=>{A.stopPropagation(),a(x.path)},className:"ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-red-400",children:""})]})},x.path)),C.jsx("button",{onClick:g,className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-ps-surface/50",title:"Add new file",children:"+"})]})}function ip(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,s=Array(e);n<e;n++)s[n]=r[n];return s}function nS(r){if(Array.isArray(r))return r}function rS(r,e,n){return(e=cS(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function iS(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var s,a,l,c,f=[],h=!0,m=!1;try{if(l=(n=n.call(r)).next,e!==0)for(;!(h=(s=l.call(n)).done)&&(f.push(s.value),f.length!==e);h=!0);}catch(g){m=!0,a=g}finally{try{if(!h&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(m)throw a}}return f}}function sS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sp(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,s)}return n}function op(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sp(Object(n),!0).forEach(function(s){rS(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):sp(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function oS(r,e){if(r==null)return{};var n,s,a=aS(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)n=l[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(r,n)&&(a[n]=r[n])}return a}function aS(r,e){if(r==null)return{};var n={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;n[s]=r[s]}return n}function lS(r,e){return nS(r)||iS(r,e)||fS(r,e)||sS()}function uS(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cS(r){var e=uS(r,"string");return typeof e=="symbol"?e:e+""}function fS(r,e){if(r){if(typeof r=="string")return ip(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ip(r,e):void 0}}function dS(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ap(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,s)}return n}function lp(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ap(Object(n),!0).forEach(function(s){dS(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function hS(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(a,l){return l(a)},s)}}function us(r){return function e(){for(var n=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(n,[].concat(a,f))}}}function aa(r){return{}.toString.call(r).includes("Object")}function pS(r){return!Object.keys(r).length}function Ss(r){return typeof r=="function"}function mS(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function gS(r,e){return aa(e)||sr("changeType"),Object.keys(e).some(function(n){return!mS(r,n)})&&sr("changeField"),e}function vS(r){Ss(r)||sr("selectorType")}function yS(r){Ss(r)||aa(r)||sr("handlerType"),aa(r)&&Object.values(r).some(function(e){return!Ss(e)})&&sr("handlersType")}function SS(r){r||sr("initialIsRequired"),aa(r)||sr("initialType"),pS(r)&&sr("initialContent")}function ES(r,e){throw new Error(r[e]||r.default)}var TS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},sr=us(ES)(TS),Wo={changes:gS,selector:vS,handler:yS,initial:SS};function xS(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wo.initial(r),Wo.handler(e);var n={current:r},s=us(AS)(n,e),a=us(kS)(n),l=us(Wo.changes)(r),c=us(wS)(n);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Wo.selector(m),m(n.current)}function h(m){hS(s,a,l,c)(m)}return[f,h]}function wS(r,e){return Ss(e)?e(r.current):e}function kS(r,e){return r.current=lp(lp({},r.current),e),e}function AS(r,e,n){return Ss(e)?e(r.current):Object.keys(n).forEach(function(s){var a;return(a=e[s])===null||a===void 0?void 0:a.call(e,r.current[s])}),n}var CS={create:xS},RS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function NS(r){return function e(){for(var n=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(n,[].concat(a,f))}}}function IS(r){return{}.toString.call(r).includes("Object")}function OS(r){return r||up("configIsRequired"),IS(r)||up("configType"),r.urls?(_S(),{paths:{vs:r.urls.monacoBase}}):r}function _S(){console.warn(Am.deprecation)}function PS(r,e){throw new Error(r[e]||r.default)}var Am={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},up=NS(PS)(Am),LS={config:OS},MS=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(a){return n.reduceRight(function(l,c){return c(l)},a)}};function Cm(r,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&r[n]&&Object.assign(e[n],Cm(r[n],e[n]))}),op(op({},r),e)}var bS={type:"cancelation",msg:"operation is manually canceled"};function Bu(r){var e=!1,n=new Promise(function(s,a){r.then(function(l){return e?a(bS):s(l)}),r.catch(a)});return n.cancel=function(){return e=!0},n}var jS=["monaco"],FS=CS.create({config:RS,isInitialized:!1,resolve:null,reject:null,monaco:null}),Rm=lS(FS,2),As=Rm[0],Sa=Rm[1];function $S(r){var e=LS.config(r),n=e.monaco,s=oS(e,jS);Sa(function(a){return{config:Cm(a.config,s),monaco:n}})}function US(){var r=As(function(e){var n=e.monaco,s=e.isInitialized,a=e.resolve;return{monaco:n,isInitialized:s,resolve:a}});if(!r.isInitialized){if(Sa({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Bu(zu);if(window.monaco&&window.monaco.editor)return Nm(window.monaco),r.resolve(window.monaco),Bu(zu);MS(DS,zS)(VS)}return Bu(zu)}function DS(r){return document.body.appendChild(r)}function BS(r){var e=document.createElement("script");return r&&(e.src=r),e}function zS(r){var e=As(function(s){var a=s.config,l=s.reject;return{config:a,reject:l}}),n=BS("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return r()},n.onerror=e.reject,n}function VS(){var r=As(function(n){var s=n.config,a=n.resolve,l=n.reject;return{config:s,resolve:a,reject:l}}),e=window.require;e.config(r.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;Nm(s),r.resolve(s)},function(n){r.reject(n)})}function Nm(r){As().monaco||Sa({monaco:r})}function WS(){return As(function(r){var e=r.monaco;return e})}var zu=new Promise(function(r,e){return Sa({resolve:r,reject:e})}),Im={config:$S,init:US,__getMonacoInstance:WS},GS={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Vu=GS,KS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},HS=KS;function YS({children:r}){return Ar.createElement("div",{style:HS.container},r)}var XS=YS,qS=XS;function QS({width:r,height:e,isEditorReady:n,loading:s,_ref:a,className:l,wrapperProps:c}){return Ar.createElement("section",{style:{...Vu.wrapper,width:r,height:e},...c},!n&&Ar.createElement(qS,null,s),Ar.createElement("div",{ref:a,style:{...Vu.fullWidth,...!n&&Vu.hide},className:l}))}var ZS=QS,Om=Z.memo(ZS);function JS(r){Z.useEffect(r,[])}var _m=JS;function eE(r,e,n=!0){let s=Z.useRef(!0);Z.useEffect(s.current||!n?()=>{s.current=!1}:r,e)}var Ot=eE;function ms(){}function ui(r,e,n,s){return tE(r,s)||nE(r,e,n,s)}function tE(r,e){return r.editor.getModel(Pm(r,e))}function nE(r,e,n,s){return r.editor.createModel(e,n,s?Pm(r,s):void 0)}function Pm(r,e){return r.Uri.parse(e)}function rE({original:r,modified:e,language:n,originalLanguage:s,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:m="light",loading:g="Loading...",options:y={},height:S="100%",width:x="100%",className:A,wrapperProps:R={},beforeMount:j=ms,onMount:b=ms}){let[_,P]=Z.useState(!1),[M,z]=Z.useState(!0),L=Z.useRef(null),D=Z.useRef(null),G=Z.useRef(null),ke=Z.useRef(b),ce=Z.useRef(j),We=Z.useRef(!1);_m(()=>{let de=Im.init();return de.then(ge=>(D.current=ge)&&z(!1)).catch(ge=>ge?.type!=="cancelation"&&console.error("Monaco initialization: error:",ge)),()=>L.current?$e():de.cancel()}),Ot(()=>{if(L.current&&D.current){let de=L.current.getOriginalEditor(),ge=ui(D.current,r||"",s||n||"text",l||"");ge!==de.getModel()&&de.setModel(ge)}},[l],_),Ot(()=>{if(L.current&&D.current){let de=L.current.getModifiedEditor(),ge=ui(D.current,e||"",a||n||"text",c||"");ge!==de.getModel()&&de.setModel(ge)}},[c],_),Ot(()=>{let de=L.current.getModifiedEditor();de.getOption(D.current.editor.EditorOption.readOnly)?de.setValue(e||""):e!==de.getValue()&&(de.executeEdits("",[{range:de.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),de.pushUndoStop())},[e],_),Ot(()=>{L.current?.getModel()?.original.setValue(r||"")},[r],_),Ot(()=>{let{original:de,modified:ge}=L.current.getModel();D.current.editor.setModelLanguage(de,s||n||"text"),D.current.editor.setModelLanguage(ge,a||n||"text")},[n,s,a],_),Ot(()=>{D.current?.editor.setTheme(m)},[m],_),Ot(()=>{L.current?.updateOptions(y)},[y],_);let et=Z.useCallback(()=>{if(!D.current)return;ce.current(D.current);let de=ui(D.current,r||"",s||n||"text",l||""),ge=ui(D.current,e||"",a||n||"text",c||"");L.current?.setModel({original:de,modified:ge})},[n,e,a,r,s,l,c]),Fe=Z.useCallback(()=>{!We.current&&G.current&&(L.current=D.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...y}),et(),D.current?.editor.setTheme(m),P(!0),We.current=!0)},[y,m,et]);Z.useEffect(()=>{_&&ke.current(L.current,D.current)},[_]),Z.useEffect(()=>{!M&&!_&&Fe()},[M,_,Fe]);function $e(){let de=L.current?.getModel();f||de?.original?.dispose(),h||de?.modified?.dispose(),L.current?.dispose()}return Ar.createElement(Om,{width:x,height:S,isEditorReady:_,loading:g,_ref:G,className:A,wrapperProps:R})}var iE=rE;Z.memo(iE);function sE(r){let e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}var oE=sE,Go=new Map;function aE({defaultValue:r,defaultLanguage:e,defaultPath:n,value:s,language:a,path:l,theme:c="light",line:f,loading:h="Loading...",options:m={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:S=!1,width:x="100%",height:A="100%",className:R,wrapperProps:j={},beforeMount:b=ms,onMount:_=ms,onChange:P,onValidate:M=ms}){let[z,L]=Z.useState(!1),[D,G]=Z.useState(!0),ke=Z.useRef(null),ce=Z.useRef(null),We=Z.useRef(null),et=Z.useRef(_),Fe=Z.useRef(b),$e=Z.useRef(),de=Z.useRef(s),ge=oE(l),we=Z.useRef(!1),W=Z.useRef(!1);_m(()=>{let k=Im.init();return k.then(F=>(ke.current=F)&&G(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>ce.current?K():k.cancel()}),Ot(()=>{let k=ui(ke.current,r||s||"",e||a||"",l||n||"");k!==ce.current?.getModel()&&(y&&Go.set(ge,ce.current?.saveViewState()),ce.current?.setModel(k),y&&ce.current?.restoreViewState(Go.get(l)))},[l],z),Ot(()=>{ce.current?.updateOptions(m)},[m],z),Ot(()=>{!ce.current||s===void 0||(ce.current.getOption(ke.current.editor.EditorOption.readOnly)?ce.current.setValue(s):s!==ce.current.getValue()&&(W.current=!0,ce.current.executeEdits("",[{range:ce.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),ce.current.pushUndoStop(),W.current=!1))},[s],z),Ot(()=>{let k=ce.current?.getModel();k&&a&&ke.current?.editor.setModelLanguage(k,a)},[a],z),Ot(()=>{f!==void 0&&ce.current?.revealLine(f)},[f],z),Ot(()=>{ke.current?.editor.setTheme(c)},[c],z);let J=Z.useCallback(()=>{if(!(!We.current||!ke.current)&&!we.current){Fe.current(ke.current);let k=l||n,F=ui(ke.current,s||r||"",e||a||"",k||"");ce.current=ke.current?.editor.create(We.current,{model:F,automaticLayout:!0,...m},g),y&&ce.current.restoreViewState(Go.get(k)),ke.current.editor.setTheme(c),f!==void 0&&ce.current.revealLine(f),L(!0),we.current=!0}},[r,e,n,s,a,l,m,g,y,c,f]);Z.useEffect(()=>{z&&et.current(ce.current,ke.current)},[z]),Z.useEffect(()=>{!D&&!z&&J()},[D,z,J]),de.current=s,Z.useEffect(()=>{z&&P&&($e.current?.dispose(),$e.current=ce.current?.onDidChangeModelContent(k=>{W.current||P(ce.current.getValue(),k)}))},[z,P]),Z.useEffect(()=>{if(z){let k=ke.current.editor.onDidChangeMarkers(F=>{let fe=ce.current.getModel()?.uri;if(fe&&F.find(te=>te.path===fe.path)){let te=ke.current.editor.getModelMarkers({resource:fe});M?.(te)}});return()=>{k?.dispose()}}return()=>{}},[z,M]);function K(){$e.current?.dispose(),S?y&&Go.set(l,ce.current.saveViewState()):ce.current.getModel()?.dispose(),ce.current.dispose()}return Ar.createElement(Om,{width:x,height:A,isEditorReady:z,loading:h,_ref:We,className:R,wrapperProps:j})}var lE=aE,uE=Z.memo(lE),cE=uE;const ci="promptscript",fE={defaultToken:"",tokenPostfix:".prs",keywords:["true","false","null"],directives:["@meta","@inherit","@extend","@use","@identity","@context","@standards","@restrictions","@guardrails","@shortcuts","@tools","@skills","@knowledge","@examples","@output","@behavior","@memory"],operators:[":"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/#.*$/,"comment"],[/@\w+/,{cases:{"@directives":"keyword.directive","@default":"keyword.directive"}}],[/[a-zA-Z_][\w-]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/:/,"delimiter"],[/,/,"delimiter"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/"""/,"string","@multilineString"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],whitespace:[[/[ \t\r\n]+/,"white"],[/#.*$/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],multilineString:[[/[^"]+/,"string"],[/"""/,"string","@pop"],[/"/,"string"]]}},dE={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],folding:{markers:{start:/^\s*@\w+\s*\{/,end:/^\s*\}/}}},hE=[{token:"keyword.directive",foreground:"818cf8",fontStyle:"bold"},{token:"keyword",foreground:"93c5fd"},{token:"string",foreground:"a3e635"},{token:"string.escape",foreground:"facc15"},{token:"comment",foreground:"6b7280",fontStyle:"italic"},{token:"number",foreground:"f472b6"},{token:"identifier",foreground:"f8fafc"},{token:"delimiter",foreground:"94a3b8"}];function pE(r){r.languages.getLanguages().some(n=>n.id===ci)||(r.languages.register({id:ci,extensions:[".prs"],aliases:["PromptScript","prs"],mimetypes:["text/x-promptscript"]}),r.languages.setMonarchTokensProvider(ci,fE),r.languages.setLanguageConfiguration(ci,dE),r.editor.defineTheme("prs-dark",{base:"vs-dark",inherit:!0,rules:hE,colors:{"editor.background":"#0f172a","editor.foreground":"#f8fafc","editor.lineHighlightBackground":"#1e293b","editorCursor.foreground":"#6366f1","editor.selectionBackground":"#334155","editorLineNumber.foreground":"#475569","editorLineNumber.activeForeground":"#94a3b8"}}))}function mE(r){return{provideCompletionItems:(e,n)=>{const s=e.getWordUntilPosition(n),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};return{suggestions:[{label:"@meta",kind:r.languages.CompletionItemKind.Keyword,insertText:`@meta {
  id: "$1"
  syntax: "1.0.0"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define metadata for the PromptScript file",range:a},{label:"@inherit",kind:r.languages.CompletionItemKind.Keyword,insertText:"@inherit $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Inherit from another PromptScript file",range:a},{label:"@use",kind:r.languages.CompletionItemKind.Keyword,insertText:"@use $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Import and merge directives from another file",range:a},{label:"@identity",kind:r.languages.CompletionItemKind.Keyword,insertText:`@identity {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define the AI identity/persona",range:a},{label:"@context",kind:r.languages.CompletionItemKind.Keyword,insertText:`@context {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide contextual information",range:a},{label:"@standards",kind:r.languages.CompletionItemKind.Keyword,insertText:`@standards {
  $1: [$2]
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define coding standards and guidelines",range:a},{label:"@restrictions",kind:r.languages.CompletionItemKind.Keyword,insertText:`@restrictions {
  - "$1"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define things the AI should NOT do",range:a},{label:"@shortcuts",kind:r.languages.CompletionItemKind.Keyword,insertText:`@shortcuts {
  "/$1": "$2"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define custom command shortcuts",range:a},{label:"@tools",kind:r.languages.CompletionItemKind.Keyword,insertText:`@tools {
  $1: {
    description: "$2"
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define available tools",range:a},{label:"@examples",kind:r.languages.CompletionItemKind.Keyword,insertText:`@examples {
  $1: {
    input: """
    $2
    """
    output: """
    $3
    """
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide example interactions",range:a}]}}}}function gE(){const r=ie(c=>c.activeFile),e=ie(j0),n=ie(c=>c.updateFile),s=Z.useRef(null),a=c=>{pE(c),c.languages.registerCompletionItemProvider(ci,mE(c)),s.current=c},l=c=>{c.focus()};return C.jsx("div",{className:"h-full",children:C.jsx(cE,{height:"100%",language:ci,theme:"prs-dark",value:e,onChange:c=>{c!==void 0&&n(r,c)},beforeMount:a,onMount:l,options:{fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",renderLineHighlight:"line",tabSize:2,wordWrap:"on",automaticLayout:!0,padding:{top:12},suggestOnTriggerCharacters:!0,quickSuggestions:{other:!0,strings:!1,comments:!1}}})})}const vE=[{name:"github",label:"GitHub",icon:""},{name:"claude",label:"Claude",icon:""},{name:"cursor",label:"Cursor",icon:""},{name:"antigravity",label:"Antigravity",icon:""}];function yE(r){const e=new Map,n=r.map(a=>{const l=a.split("/");return l[l.length-1]??a}),s=new Map;for(const a of n)s.set(a,(s.get(a)??0)+1);for(const[a,l]of r.entries()){const c=n[a]??l;if((s.get(c)??0)>1){const f=l.split("/");if(f.length>=2){const h=f[f.length-2]??"";e.set(l,`${h}/${c}`)}else e.set(l,c)}else e.set(l,c)}return e}function SE(){const r=ie(g=>g.activeFormatter),e=ie(g=>g.setActiveFormatter),n=ie(g=>g.compileResult),s=ie(g=>g.isCompiling),a=ie(U0),l=ie(g=>$0(g,r)),[c,f]=Z.useState(0);Z.useEffect(()=>{f(0)},[r,l.length]),Z.useEffect(()=>{!a.includes(r)&&a.length>0&&e(a[0])},[r,a,e]);const h=Z.useMemo(()=>yE(l.map(g=>g.path)),[l]),m=l[c];return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg",children:vE.map(g=>{const y=a.includes(g.name),S=r===g.name;return C.jsxs("button",{onClick:()=>y&&e(g.name),disabled:!y,className:`px-4 py-2 text-sm flex items-center gap-2 ${y?S?"tab-active text-white":"tab-inactive text-gray-400":"opacity-30 cursor-not-allowed text-gray-500"}`,title:y?void 0:`${g.label} is disabled in config`,children:[C.jsx("span",{children:g.icon}),C.jsx("span",{children:g.label})]},g.name)})}),C.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-ps-surface",children:s?C.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-4 h-4 border-2 border-ps-primary border-t-transparent rounded-full animate-spin"}),C.jsx("span",{children:"Compiling..."})]})}):n&&!n.success?C.jsxs("div",{className:"p-4 overflow-auto",children:[C.jsx("div",{className:"text-red-400 font-medium mb-2",children:"Compilation Failed"}),C.jsx("ul",{className:"space-y-2",children:n.errors.map((g,y)=>C.jsx("li",{className:"text-sm",children:C.jsxs("div",{className:"text-red-300",children:[g.location?.file&&C.jsxs("span",{className:"text-gray-400",children:[g.location.file,":",g.location.line,":",g.location.column," "]}),C.jsxs("span",{className:"text-yellow-400",children:["[",g.code,"]"]})," ",g.message]})},y))})]}):l.length>0?C.jsxs(C.Fragment,{children:[l.length>1&&C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg overflow-x-auto",children:l.map((g,y)=>C.jsx("button",{onClick:()=>f(y),className:`px-3 py-1.5 text-xs font-mono whitespace-nowrap ${y===c?"bg-ps-surface text-white border-b-2 border-ps-primary":"text-gray-400 hover:text-gray-300 hover:bg-ps-surface/50"}`,title:g.path,children:h.get(g.path)||g.path},g.path))}),m&&C.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.path}),C.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.content)},className:"text-xs text-gray-400 hover:text-white px-2 py-1 rounded bg-ps-bg",children:"Copy"})]}),C.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap text-gray-300 bg-ps-bg p-4 rounded overflow-auto",children:m.content})]})]}):C.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No output available"})})]})}const Wu=[{id:"hello-world",name:"Hello World",description:"The simplest possible configuration",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "hello-world"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  """
}
`}]},{id:"minimal",name:"Minimal Setup",description:"Basic identity with multiline description",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "minimal-project"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  You provide clear and concise answers.
  You ask for clarification when needed.
  """
}
`}]},{id:"with-context",name:"With Context",description:"Adding project context and environment info",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "context-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a coding assistant for web development.
  You write modern, accessible code.
  """
}

@context {
  """
  This is a React frontend project using TypeScript.
  We use Tailwind CSS for styling.
  The project follows component-driven development.
  """
}
`}]},{id:"with-env-vars",name:"Environment Variables",description:"Using ${VAR} and ${VAR:-default} for dynamic configuration",complexity:"intermediate",envVars:{PROJECT_NAME:"My Awesome Project",API_VERSION:"v2",TEAM_NAME:"Platform Team"},files:[{path:"project.prs",content:`@meta {
  id: "env-vars-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an assistant for \${PROJECT_NAME}.
  You help the \${TEAM_NAME} build great software.
  """
}

@context {
  """
  Project: \${PROJECT_NAME}
  API Version: \${API_VERSION}
  Team: \${TEAM_NAME}
  Environment: \${ENVIRONMENT:-development}
  Debug Mode: \${DEBUG:-false}
  """

  # Object properties also support env vars
  project: "\${PROJECT_NAME}"
  apiVersion: "\${API_VERSION}"
  logLevel: "\${LOG_LEVEL:-info}"
}

@standards {
  # Env vars work in nested structures too
  api: {
    version: "\${API_VERSION}"
    baseUrl: "\${API_BASE_URL:-https://api.example.com}"
  }
}

@restrictions {
  - "Follow \${TEAM_NAME} coding guidelines"
  - "Use \${API_VERSION} API endpoints"
  - "Log level must be \${LOG_LEVEL:-info} or higher"
}
`}]},{id:"with-standards",name:"With Standards",description:"Configuration with coding standards and restrictions",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "coding-assistant"
  syntax: "1.0.0"
  tags: [development, typescript]
}

@identity {
  """
  You are an expert software developer.
  You write clean, maintainable, and well-tested code.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  testing: "Vitest"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
  documentation: ["JSDoc comments", "README updates"]
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor"]
  }
}

@restrictions {
  - "Never write untested code"
  - "Always handle errors properly"
  - "Don't use 'any' type in TypeScript"
  - "Don't commit secrets or credentials"
}
`}]},{id:"with-inheritance",name:"With Inheritance",description:"Using @inherit to extend shared base configs",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "frontend-project"
  syntax: "1.0.0"
}

# Inherit from promptscript-registry (github.com/mrwogu/promptscript-registry)
@inherit @core/base
@use @core/quality
@use @core/security

@context {
  """
  This is a React frontend project.
  We use TypeScript and Tailwind CSS.
  State management with Zustand.
  """
}

@standards {
  frameworks: ["React 18", "TypeScript 5", "Tailwind CSS"]
  testing: ["Vitest", "Playwright"]
}

@restrictions {
  - "Use functional components with hooks"
  - "No class components"
  - "Keep components under 200 lines"
}
`}]},{id:"multi-file",name:"Multi-File Project",description:"Local inheritance with shared base configuration",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "team-project"
  syntax: "1.0.0"
}

# Inherit from local base file
@inherit ./base

@context {
  languages: ["TypeScript", "React"]
  runtime: "Node.js 20+"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
}

@restrictions {
  - "Use Zustand for state management"
  - "Keep bundle size under 200KB"
}
`},{path:"base.prs",content:`@meta {
  id: "team-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful team assistant.
  You follow our established conventions.
  You prioritize code quality and maintainability.
  """
}

@standards {
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test"]
  }
  documentation: ["README", "JSDoc", "CHANGELOG"]
}

@restrictions {
  - "Don't commit without tests"
  - "Don't push directly to main"
  - "Always request code review"
}
`}]},{id:"with-skills",name:"With Skills & Shortcuts",description:"Custom skills and shortcuts for automation",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation"
}

@restrictions {
  - "Always explain your reasoning"
  - "Ask for clarification when unsure"
  - "Never skip writing tests"
}
`}]},{id:"with-guards",name:"With Guards",description:"File-pattern guards for context-specific rules",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "guards-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an expert full-stack developer.
  You understand different contexts require different rules.
  """
}

@context {
  languages: ["TypeScript"]
  runtime: "Node.js 20+"
}

@guards {
  # Apply TypeScript rules to all TS files
  globs: ["**/*.ts", "**/*.tsx"]

  # Testing-specific rules
  testing: {
    applyTo: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
    description: "Testing rules"
    content: """
    - Use describe/it blocks for organization
    - Follow AAA pattern (Arrange, Act, Assert)
    - Mock external dependencies
    - Test edge cases and error conditions
    """
  }

  # Component-specific rules
  components: {
    applyTo: ["**/components/**/*.tsx"]
    description: "React component rules"
    content: """
    - Use functional components with hooks
    - Keep components focused and small
    - Extract logic into custom hooks
    - Use TypeScript for props interfaces
    """
  }
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest"]
  }
}
`}]},{id:"with-agents",name:"With Agents",description:"Custom AI agents with specific roles",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "agents-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development team coordinator.
  You can delegate tasks to specialized agents.
  """
}

@agents {
  coder: {
    description: "Expert code writer"
    model: "sonnet"
    tools: ["Read", "Edit", "Write", "Bash"]
    content: """
    You are an expert code writer.
    You write clean, efficient, and well-documented code.
    You follow established patterns in the codebase.
    """
  }
  reviewer: {
    description: "Code review specialist"
    model: "sonnet"
    tools: ["Read", "Grep", "Glob"]
    content: """
    You are a code review specialist.
    You identify bugs, security issues, and improvements.
    You provide constructive feedback.
    """
  }
  tester: {
    description: "Test writing specialist"
    model: "haiku"
    tools: ["Read", "Write", "Bash"]
    content: """
    You are a test writing specialist.
    You write comprehensive unit and integration tests.
    You ensure good coverage of edge cases.
    """
  }
}

@skills {
  implement: {
    description: "Implement a feature using the coder agent"
    content: "Delegate implementation to the coder agent"
  }
  review: {
    description: "Review code using the reviewer agent"
    content: "Delegate review to the reviewer agent"
  }
}

@shortcuts {
  "/implement": "Start implementing a feature"
  "/review": "Review recent changes"
  "/test": "Write tests for current code"
}
`}]},{id:"enterprise",name:"Enterprise Setup",description:"Full enterprise configuration with all features",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "enterprise-project"
  syntax: "1.0.0"
  tags: [enterprise, typescript, react]
}

# Inherit from local file + registry (github.com/mrwogu/promptscript-registry)
@inherit ./org-base
@use @core/security

@context {
  """
  Enterprise React application with strict security requirements.
  Follows organizational coding standards and compliance rules.
  """

  languages: ["TypeScript"]
  runtime: "Node.js 20 LTS"
  frameworks: ["React 18", "Next.js 14"]
  infrastructure: ["AWS", "Docker", "Kubernetes"]
}

@skills {
  "security-review": {
    description: "Review code for security vulnerabilities"
    content: """
    Perform security review:
    1. Check for OWASP Top 10 vulnerabilities
    2. Verify input validation and sanitization
    3. Check authentication and authorization
    4. Review data exposure and logging
    5. Verify secure communication
    """
  }
  deploy: {
    description: "Prepare deployment checklist"
    content: """
    Deployment preparation:
    1. Run full test suite
    2. Check for security vulnerabilities
    3. Verify environment variables
    4. Update changelog
    5. Create release notes
    """
  }
}

@guards {
  api: {
    applyTo: ["**/api/**", "**/routes/**"]
    description: "API security rules"
    content: """
    - Validate all input parameters
    - Use parameterized queries
    - Implement rate limiting
    - Log security events
    """
  }
  auth: {
    applyTo: ["**/auth/**", "**/middleware/**"]
    description: "Authentication rules"
    content: """
    - Never log credentials
    - Use secure session management
    - Implement proper CORS
    - Use HTTPS only
    """
  }
}

@shortcuts {
  "/security": "Run security review"
  "/deploy": "Prepare deployment"
  "/audit": "Run compliance audit"
}

@restrictions {
  - "All API endpoints must have authentication"
  - "No secrets in code - use environment variables"
  - "All user input must be validated"
  - "PII must be encrypted at rest"
  - "Changes require security team approval"
}
`},{path:"org-base.prs",content:`@meta {
  id: "org-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are an enterprise development assistant.
  You follow strict organizational standards.
  Security and compliance are top priorities.
  """
}

@standards {
  code: {
    languages: ["TypeScript"]
    strictMode: true
    exports: "named only"
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test", "security"]
    requireIssueReference: true
  }
  documentation: {
    required: ["README", "API docs", "CHANGELOG", "SECURITY.md"]
  }
  testing: {
    minimumCoverage: 80
    requiredTypes: ["unit", "integration", "e2e"]
  }
}

@restrictions {
  - "No direct database queries - use ORM"
  - "All functions must have return type annotations"
  - "No console.log in production code"
  - "Dependencies must be approved"
  - "No force push to protected branches"
}
`}]}],EE={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-purple-500/20 text-purple-400"},TE={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function xE(){const r=ie(h=>h.setFiles),e=ie(h=>h.setShowExamples),n=ie(h=>h.setEnvVars),s=h=>{r(h.files),n(h.envVars??{}),e(!1)},a=Wu.filter(h=>h.complexity==="beginner"),l=Wu.filter(h=>h.complexity==="intermediate"),c=Wu.filter(h=>h.complexity==="advanced"),f=h=>C.jsxs("button",{onClick:()=>s(h),className:"text-left p-4 bg-ps-bg rounded-lg hover:bg-ps-border transition-colors",children:[C.jsxs("div",{className:"flex items-start justify-between gap-2",children:[C.jsx("h3",{className:"font-medium text-white",children:h.name}),C.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${EE[h.complexity]}`,children:TE[h.complexity]})]}),C.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h.description}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[C.jsxs("span",{className:"text-xs text-gray-500",children:[h.files.length," file",h.files.length!==1?"s":""]}),h.files.some(m=>m.content.includes("@inherit"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-ps-primary/20 text-ps-primary rounded",children:"inheritance"}),h.files.some(m=>m.content.includes("@use"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded",children:"imports"}),h.files.some(m=>m.content.includes("@skills"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-500/20 text-orange-400 rounded",children:"skills"}),h.files.some(m=>m.content.includes("@guards"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded",children:"guards"}),h.files.some(m=>m.content.includes("@agents"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded",children:"agents"}),h.envVars&&Object.keys(h.envVars).length>0&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded",children:"env vars"})]})]},h.id);return C.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-ps-surface rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold",children:"Example Gallery"}),C.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white",children:""})]}),C.jsxs("div",{className:"p-4 overflow-y-auto max-h-[70vh] space-y-6",children:[C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-green-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Getting Started"]}),C.jsx("div",{className:"grid gap-3",children:a.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Intermediate"]}),C.jsx("div",{className:"grid gap-3",children:l.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Advanced"]}),C.jsx("div",{className:"grid gap-3",children:c.map(f)})]})]}),C.jsx("div",{className:"p-4 border-t border-ps-border text-center text-sm text-gray-500",children:"Click an example to load it into the editor"})]})})}const wE={github:{label:"GitHub Copilot",versions:["simple","multifile","full"],supportsXml:!0},claude:{label:"Claude Code",versions:["simple","multifile","full"],supportsXml:!0},cursor:{label:"Cursor",versions:["standard","legacy"],supportsXml:!1},antigravity:{label:"Antigravity",versions:["simple","frontmatter"],supportsXml:!0}},kE=[{value:"markdown",label:"Markdown"},{value:"xml",label:"XML"}],AE=["always","never","preserve"],CE=[2,4];function RE(){const r=ie(f=>f.config),e=ie(f=>f.setTargetEnabled),n=ie(f=>f.setTargetVersion),s=ie(f=>f.setTargetConvention),a=ie(f=>f.setFormatting),l=ie(f=>f.showConfig),c=ie(f=>f.setShowConfig);return l?C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configuration"}),C.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-6",children:[C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Targets"}),C.jsx("div",{className:"space-y-3",children:Object.entries(wE).map(([f,h])=>{const m=r.targets[f];return C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("label",{className:"flex items-center gap-2 min-w-[140px]",children:[C.jsx("input",{type:"checkbox",checked:m.enabled,onChange:g=>e(f,g.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"}),C.jsx("span",{className:"text-sm text-gray-200",children:h.label})]}),C.jsx("select",{value:m.version??h.versions[0],onChange:g=>n(f,g.target.value),disabled:!m.enabled,className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:h.versions.map(g=>C.jsx("option",{value:g,children:g},g))}),C.jsx("select",{value:m.convention??"markdown",onChange:g=>s(f,g.target.value==="markdown"?void 0:g.target.value),disabled:!m.enabled||!h.supportsXml,title:h.supportsXml?void 0:`${h.label} only supports markdown`,className:"w-24 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:kE.map(g=>C.jsx("option",{value:g.value,disabled:g.value==="xml"&&!h.supportsXml,children:g.label},g.value))})]},f)})})]}),C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Formatting"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Tab Width"}),C.jsx("div",{className:"flex gap-2",children:CE.map(f=>C.jsx("button",{onClick:()=>a({tabWidth:f}),className:`px-3 py-1 text-sm rounded ${r.formatting.tabWidth===f?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Prose Wrap"}),C.jsx("select",{value:r.formatting.proseWrap,onChange:f=>a({proseWrap:f.target.value}),className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500",children:AE.map(f=>C.jsx("option",{value:f,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Print Width"}),C.jsx("input",{type:"number",min:40,max:200,value:r.formatting.printWidth,onChange:f=>a({printWidth:parseInt(f.target.value,10)||80}),className:"w-20 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500"})]})]})]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})}):null}const NE=/^[A-Za-z_][A-Za-z0-9_]*$/;function IE(){const r=ie(A=>A.config),e=ie(A=>A.setEnvVar),n=ie(A=>A.deleteEnvVar),s=ie(A=>A.showEnvVars),a=ie(A=>A.setShowEnvVars),[l,c]=Z.useState(""),[f,h]=Z.useState(""),[m,g]=Z.useState(null);if(!s)return null;const y=Object.entries(r.envVars),S=()=>{const A=l.trim(),R=f.trim();if(!A){g("Variable name is required");return}if(!NE.test(A)){g("Invalid name: must start with letter or underscore");return}if(r.envVars[A]!==void 0){g("Variable already exists");return}e(A,R),c(""),h(""),g(null)},x=A=>{A.key==="Enter"&&S()};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Environment Variables"}),C.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-4",children:[y.length>0&&C.jsx("div",{className:"space-y-2",children:y.map(([A,R])=>C.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded px-3 py-2",children:[C.jsx("span",{className:"font-mono text-sm text-blue-400 min-w-[120px]",children:A}),C.jsx("span",{className:"text-gray-400",children:"="}),C.jsx("span",{className:"font-mono text-sm text-gray-200 flex-1 truncate",children:R}),C.jsx("button",{onClick:()=>n(A),className:"text-gray-500 hover:text-red-400 p-1",title:"Delete variable",children:C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},A))}),y.length===0&&C.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No environment variables defined"}),C.jsxs("div",{className:"border-t border-ps-border pt-4",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",value:l,onChange:A=>{c(A.target.value),g(null)},onKeyDown:x,placeholder:"NAME",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("input",{type:"text",value:f,onChange:A=>h(A.target.value),onKeyDown:x,placeholder:"value",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("button",{onClick:S,className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Add"})]}),m&&C.jsx("p",{className:"text-red-400 text-xs mt-2",children:m})]}),C.jsxs("p",{className:"text-gray-500 text-xs",children:["These are simulated variables for testing. Use"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR}"]})," or"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR:-default}"]})," in your PRS files.",C.jsx("br",{}),C.jsx("strong",{children:"Note:"})," Do not use real secrets."]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})})}class Tc{files;constructor(e){if(this.files=new Map,e)if(e instanceof Map)for(const[n,s]of e)this.files.set(this.normalizePath(n),s);else for(const[n,s]of Object.entries(e))this.files.set(this.normalizePath(n),s)}normalizePath(e){let n=e.replace(/\\/g,"/");return n.startsWith("/")&&(n=n.slice(1)),n.endsWith("/")&&(n=n.slice(0,-1)),n}exists(e){return this.files.has(this.normalizePath(e))}read(e){const n=this.normalizePath(e),s=this.files.get(n);if(s===void 0)throw new Error(`File not found: ${e}`);return s}write(e,n){this.files.set(this.normalizePath(e),n)}delete(e){return this.files.delete(this.normalizePath(e))}list(){return Array.from(this.files.keys())}glob(e){const n=this.normalizePath(e),s=this.patternToRegex(n);return Array.from(this.files.keys()).filter(a=>s.test(a))}patternToRegex(e){let n=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");return n=n.replace(/\*\*/g,"\0DOUBLESTAR\0"),n=n.replace(/\*/g,"[^/]*"),n=n.replace(/\0DOUBLESTAR\0/g,".*"),n=n.replace(/\?/g,"[^/]"),new RegExp(`^${n}$`)}clear(){this.files.clear()}get size(){return this.files.size}toMap(){return new Map(this.files)}toObject(){const e={};for(const[n,s]of this.files)e[n]=s;return e}clone(){return new Tc(this.files)}merge(e){for(const[n,s]of e.files)this.files.set(n,s)}}var Lm=typeof global=="object"&&global&&global.Object===Object&&global,OE=typeof self=="object"&&self&&self.Object===Object&&self,yn=Lm||OE||Function("return this")(),Kt=yn.Symbol,Mm=Object.prototype,_E=Mm.hasOwnProperty,PE=Mm.toString,is=Kt?Kt.toStringTag:void 0;function LE(r){var e=_E.call(r,is),n=r[is];try{r[is]=void 0;var s=!0}catch{}var a=PE.call(r);return s&&(e?r[is]=n:delete r[is]),a}var ME=Object.prototype,bE=ME.toString;function jE(r){return bE.call(r)}var FE="[object Null]",$E="[object Undefined]",cp=Kt?Kt.toStringTag:void 0;function lr(r){return r==null?r===void 0?$E:FE:cp&&cp in Object(r)?LE(r):jE(r)}function on(r){return r!=null&&typeof r=="object"}var UE="[object Symbol]";function Ea(r){return typeof r=="symbol"||on(r)&&lr(r)==UE}function Ta(r,e){for(var n=-1,s=r==null?0:r.length,a=Array(s);++n<s;)a[n]=e(r[n],n,r);return a}var Te=Array.isArray,fp=Kt?Kt.prototype:void 0,dp=fp?fp.toString:void 0;function bm(r){if(typeof r=="string")return r;if(Te(r))return Ta(r,bm)+"";if(Ea(r))return dp?dp.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var DE=/\s/;function BE(r){for(var e=r.length;e--&&DE.test(r.charAt(e)););return e}var zE=/^\s+/;function VE(r){return r&&r.slice(0,BE(r)+1).replace(zE,"")}function Ht(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var hp=NaN,WE=/^[-+]0x[0-9a-f]+$/i,GE=/^0b[01]+$/i,KE=/^0o[0-7]+$/i,HE=parseInt;function YE(r){if(typeof r=="number")return r;if(Ea(r))return hp;if(Ht(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ht(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=VE(r);var n=GE.test(r);return n||KE.test(r)?HE(r.slice(2),n?2:8):WE.test(r)?hp:+r}var pp=1/0,XE=17976931348623157e292;function qE(r){if(!r)return r===0?r:0;if(r=YE(r),r===pp||r===-pp){var e=r<0?-1:1;return e*XE}return r===r?r:0}function xa(r){var e=qE(r),n=e%1;return e===e?n?e-n:e:0}function di(r){return r}var QE="[object AsyncFunction]",ZE="[object Function]",JE="[object GeneratorFunction]",eT="[object Proxy]";function bn(r){if(!Ht(r))return!1;var e=lr(r);return e==ZE||e==JE||e==QE||e==eT}var Gu=yn["__core-js_shared__"],mp=(function(){var r=/[^.]+$/.exec(Gu&&Gu.keys&&Gu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function tT(r){return!!mp&&mp in r}var nT=Function.prototype,rT=nT.toString;function _r(r){if(r!=null){try{return rT.call(r)}catch{}try{return r+""}catch{}}return""}var iT=/[\\^$.*+?()[\]{}|]/g,sT=/^\[object .+?Constructor\]$/,oT=Function.prototype,aT=Object.prototype,lT=oT.toString,uT=aT.hasOwnProperty,cT=RegExp("^"+lT.call(uT).replace(iT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fT(r){if(!Ht(r)||tT(r))return!1;var e=bn(r)?cT:sT;return e.test(_r(r))}function dT(r,e){return r?.[e]}function Pr(r,e){var n=dT(r,e);return fT(n)?n:void 0}var nc=Pr(yn,"WeakMap"),gp=Object.create,hT=(function(){function r(){}return function(e){if(!Ht(e))return{};if(gp)return gp(e);r.prototype=e;var n=new r;return r.prototype=void 0,n}})();function pT(r,e,n){switch(n.length){case 0:return r.call(e);case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2])}return r.apply(e,n)}function Ye(){}function mT(r,e){var n=-1,s=r.length;for(e||(e=Array(s));++n<s;)e[n]=r[n];return e}var gT=800,vT=16,yT=Date.now;function ST(r){var e=0,n=0;return function(){var s=yT(),a=vT-(s-n);if(n=s,a>0){if(++e>=gT)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function ET(r){return function(){return r}}var la=(function(){try{var r=Pr(Object,"defineProperty");return r({},"",{}),r}catch{}})(),TT=la?function(r,e){return la(r,"toString",{configurable:!0,enumerable:!1,value:ET(e),writable:!0})}:di,xT=ST(TT);function jm(r,e){for(var n=-1,s=r==null?0:r.length;++n<s&&e(r[n],n,r)!==!1;);return r}function Fm(r,e,n,s){for(var a=r.length,l=n+-1;++l<a;)if(e(r[l],l,r))return l;return-1}function wT(r){return r!==r}function kT(r,e,n){for(var s=n-1,a=r.length;++s<a;)if(r[s]===e)return s;return-1}function xc(r,e,n){return e===e?kT(r,e,n):Fm(r,wT,n)}function $m(r,e){var n=r==null?0:r.length;return!!n&&xc(r,e,0)>-1}var AT=9007199254740991,CT=/^(?:0|[1-9]\d*)$/;function wa(r,e){var n=typeof r;return e=e??AT,!!e&&(n=="number"||n!="symbol"&&CT.test(r))&&r>-1&&r%1==0&&r<e}function wc(r,e,n){e=="__proto__"&&la?la(r,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[e]=n}function Cs(r,e){return r===e||r!==r&&e!==e}var RT=Object.prototype,NT=RT.hasOwnProperty;function ka(r,e,n){var s=r[e];(!(NT.call(r,e)&&Cs(s,n))||n===void 0&&!(e in r))&&wc(r,e,n)}function kc(r,e,n,s){var a=!n;n||(n={});for(var l=-1,c=e.length;++l<c;){var f=e[l],h=void 0;h===void 0&&(h=r[f]),a?wc(n,f,h):ka(n,f,h)}return n}var vp=Math.max;function IT(r,e,n){return e=vp(e===void 0?r.length-1:e,0),function(){for(var s=arguments,a=-1,l=vp(s.length-e,0),c=Array(l);++a<l;)c[a]=s[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=s[a];return f[e]=n(c),pT(r,this,f)}}function Ac(r,e){return xT(IT(r,e,di),r+"")}var OT=9007199254740991;function Cc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=OT}function Sn(r){return r!=null&&Cc(r.length)&&!bn(r)}function Um(r,e,n){if(!Ht(n))return!1;var s=typeof e;return(s=="number"?Sn(n)&&wa(e,n.length):s=="string"&&e in n)?Cs(n[e],r):!1}function _T(r){return Ac(function(e,n){var s=-1,a=n.length,l=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,c&&Um(n[0],n[1],c)&&(l=a<3?void 0:l,a=1),e=Object(e);++s<a;){var f=n[s];f&&r(e,f,s,l)}return e})}var PT=Object.prototype;function Rs(r){var e=r&&r.constructor,n=typeof e=="function"&&e.prototype||PT;return r===n}function LT(r,e){for(var n=-1,s=Array(r);++n<r;)s[n]=e(n);return s}var MT="[object Arguments]";function yp(r){return on(r)&&lr(r)==MT}var Dm=Object.prototype,bT=Dm.hasOwnProperty,jT=Dm.propertyIsEnumerable,Aa=yp((function(){return arguments})())?yp:function(r){return on(r)&&bT.call(r,"callee")&&!jT.call(r,"callee")};function FT(){return!1}var Bm=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Sp=Bm&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,$T=Sp&&Sp.exports===Bm,Ep=$T?yn.Buffer:void 0,UT=Ep?Ep.isBuffer:void 0,Es=UT||FT,DT="[object Arguments]",BT="[object Array]",zT="[object Boolean]",VT="[object Date]",WT="[object Error]",GT="[object Function]",KT="[object Map]",HT="[object Number]",YT="[object Object]",XT="[object RegExp]",qT="[object Set]",QT="[object String]",ZT="[object WeakMap]",JT="[object ArrayBuffer]",ex="[object DataView]",tx="[object Float32Array]",nx="[object Float64Array]",rx="[object Int8Array]",ix="[object Int16Array]",sx="[object Int32Array]",ox="[object Uint8Array]",ax="[object Uint8ClampedArray]",lx="[object Uint16Array]",ux="[object Uint32Array]",_e={};_e[tx]=_e[nx]=_e[rx]=_e[ix]=_e[sx]=_e[ox]=_e[ax]=_e[lx]=_e[ux]=!0;_e[DT]=_e[BT]=_e[JT]=_e[zT]=_e[ex]=_e[VT]=_e[WT]=_e[GT]=_e[KT]=_e[HT]=_e[YT]=_e[XT]=_e[qT]=_e[QT]=_e[ZT]=!1;function cx(r){return on(r)&&Cc(r.length)&&!!_e[lr(r)]}function Ca(r){return function(e){return r(e)}}var zm=typeof _t=="object"&&_t&&!_t.nodeType&&_t,gs=zm&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,fx=gs&&gs.exports===zm,Ku=fx&&Lm.process,or=(function(){try{var r=gs&&gs.require&&gs.require("util").types;return r||Ku&&Ku.binding&&Ku.binding("util")}catch{}})(),Tp=or&&or.isTypedArray,Rc=Tp?Ca(Tp):cx,dx=Object.prototype,hx=dx.hasOwnProperty;function Vm(r,e){var n=Te(r),s=!n&&Aa(r),a=!n&&!s&&Es(r),l=!n&&!s&&!a&&Rc(r),c=n||s||a||l,f=c?LT(r.length,String):[],h=f.length;for(var m in r)(e||hx.call(r,m))&&!(c&&(m=="length"||a&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||wa(m,h)))&&f.push(m);return f}function Wm(r,e){return function(n){return r(e(n))}}var px=Wm(Object.keys,Object),mx=Object.prototype,gx=mx.hasOwnProperty;function Gm(r){if(!Rs(r))return px(r);var e=[];for(var n in Object(r))gx.call(r,n)&&n!="constructor"&&e.push(n);return e}function Yt(r){return Sn(r)?Vm(r):Gm(r)}var vx=Object.prototype,yx=vx.hasOwnProperty,Lt=_T(function(r,e){if(Rs(e)||Sn(e)){kc(e,Yt(e),r);return}for(var n in e)yx.call(e,n)&&ka(r,n,e[n])});function Sx(r){var e=[];if(r!=null)for(var n in Object(r))e.push(n);return e}var Ex=Object.prototype,Tx=Ex.hasOwnProperty;function xx(r){if(!Ht(r))return Sx(r);var e=Rs(r),n=[];for(var s in r)s=="constructor"&&(e||!Tx.call(r,s))||n.push(s);return n}function Km(r){return Sn(r)?Vm(r,!0):xx(r)}var wx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kx=/^\w*$/;function Nc(r,e){if(Te(r))return!1;var n=typeof r;return n=="number"||n=="symbol"||n=="boolean"||r==null||Ea(r)?!0:kx.test(r)||!wx.test(r)||e!=null&&r in Object(e)}var Ts=Pr(Object,"create");function Ax(){this.__data__=Ts?Ts(null):{},this.size=0}function Cx(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Rx="__lodash_hash_undefined__",Nx=Object.prototype,Ix=Nx.hasOwnProperty;function Ox(r){var e=this.__data__;if(Ts){var n=e[r];return n===Rx?void 0:n}return Ix.call(e,r)?e[r]:void 0}var _x=Object.prototype,Px=_x.hasOwnProperty;function Lx(r){var e=this.__data__;return Ts?e[r]!==void 0:Px.call(e,r)}var Mx="__lodash_hash_undefined__";function bx(r,e){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=Ts&&e===void 0?Mx:e,this}function Rr(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var s=r[e];this.set(s[0],s[1])}}Rr.prototype.clear=Ax;Rr.prototype.delete=Cx;Rr.prototype.get=Ox;Rr.prototype.has=Lx;Rr.prototype.set=bx;function jx(){this.__data__=[],this.size=0}function Ra(r,e){for(var n=r.length;n--;)if(Cs(r[n][0],e))return n;return-1}var Fx=Array.prototype,$x=Fx.splice;function Ux(r){var e=this.__data__,n=Ra(e,r);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():$x.call(e,n,1),--this.size,!0}function Dx(r){var e=this.__data__,n=Ra(e,r);return n<0?void 0:e[n][1]}function Bx(r){return Ra(this.__data__,r)>-1}function zx(r,e){var n=this.__data__,s=Ra(n,r);return s<0?(++this.size,n.push([r,e])):n[s][1]=e,this}function jn(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var s=r[e];this.set(s[0],s[1])}}jn.prototype.clear=jx;jn.prototype.delete=Ux;jn.prototype.get=Dx;jn.prototype.has=Bx;jn.prototype.set=zx;var xs=Pr(yn,"Map");function Vx(){this.size=0,this.__data__={hash:new Rr,map:new(xs||jn),string:new Rr}}function Wx(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Na(r,e){var n=r.__data__;return Wx(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Gx(r){var e=Na(this,r).delete(r);return this.size-=e?1:0,e}function Kx(r){return Na(this,r).get(r)}function Hx(r){return Na(this,r).has(r)}function Yx(r,e){var n=Na(this,r),s=n.size;return n.set(r,e),this.size+=n.size==s?0:1,this}function Fn(r){var e=-1,n=r==null?0:r.length;for(this.clear();++e<n;){var s=r[e];this.set(s[0],s[1])}}Fn.prototype.clear=Vx;Fn.prototype.delete=Gx;Fn.prototype.get=Kx;Fn.prototype.has=Hx;Fn.prototype.set=Yx;var Xx="Expected a function";function Ic(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Xx);var n=function(){var s=arguments,a=e?e.apply(this,s):s[0],l=n.cache;if(l.has(a))return l.get(a);var c=r.apply(this,s);return n.cache=l.set(a,c)||l,c};return n.cache=new(Ic.Cache||Fn),n}Ic.Cache=Fn;var qx=500;function Qx(r){var e=Ic(r,function(s){return n.size===qx&&n.clear(),s}),n=e.cache;return e}var Zx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jx=/\\(\\)?/g,ew=Qx(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(Zx,function(n,s,a,l){e.push(a?l.replace(Jx,"$1"):s||n)}),e});function tw(r){return r==null?"":bm(r)}function Ia(r,e){return Te(r)?r:Nc(r,e)?[r]:ew(tw(r))}function Ns(r){if(typeof r=="string"||Ea(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Oc(r,e){e=Ia(e,r);for(var n=0,s=e.length;r!=null&&n<s;)r=r[Ns(e[n++])];return n&&n==s?r:void 0}function nw(r,e,n){var s=r==null?void 0:Oc(r,e);return s===void 0?n:s}function _c(r,e){for(var n=-1,s=e.length,a=r.length;++n<s;)r[a+n]=e[n];return r}var xp=Kt?Kt.isConcatSpreadable:void 0;function rw(r){return Te(r)||Aa(r)||!!(xp&&r&&r[xp])}function Pc(r,e,n,s,a){var l=-1,c=r.length;for(n||(n=rw),a||(a=[]);++l<c;){var f=r[l];n(f)?_c(a,f):s||(a[a.length]=f)}return a}function rn(r){var e=r==null?0:r.length;return e?Pc(r):[]}var Hm=Wm(Object.getPrototypeOf,Object);function Ym(r,e,n){var s=-1,a=r.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var l=Array(a);++s<a;)l[s]=r[s+e];return l}function iw(r,e,n,s){var a=-1,l=r==null?0:r.length;for(s&&l&&(n=r[++a]);++a<l;)n=e(n,r[a],a,r);return n}function sw(){this.__data__=new jn,this.size=0}function ow(r){var e=this.__data__,n=e.delete(r);return this.size=e.size,n}function aw(r){return this.__data__.get(r)}function lw(r){return this.__data__.has(r)}var uw=200;function cw(r,e){var n=this.__data__;if(n instanceof jn){var s=n.__data__;if(!xs||s.length<uw-1)return s.push([r,e]),this.size=++n.size,this;n=this.__data__=new Fn(s)}return n.set(r,e),this.size=n.size,this}function vn(r){var e=this.__data__=new jn(r);this.size=e.size}vn.prototype.clear=sw;vn.prototype.delete=ow;vn.prototype.get=aw;vn.prototype.has=lw;vn.prototype.set=cw;function fw(r,e){return r&&kc(e,Yt(e),r)}var Xm=typeof _t=="object"&&_t&&!_t.nodeType&&_t,wp=Xm&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,dw=wp&&wp.exports===Xm,kp=dw?yn.Buffer:void 0,Ap=kp?kp.allocUnsafe:void 0;function hw(r,e){var n=r.length,s=Ap?Ap(n):new r.constructor(n);return r.copy(s),s}function Lc(r,e){for(var n=-1,s=r==null?0:r.length,a=0,l=[];++n<s;){var c=r[n];e(c,n,r)&&(l[a++]=c)}return l}function qm(){return[]}var pw=Object.prototype,mw=pw.propertyIsEnumerable,Cp=Object.getOwnPropertySymbols,Mc=Cp?function(r){return r==null?[]:(r=Object(r),Lc(Cp(r),function(e){return mw.call(r,e)}))}:qm;function gw(r,e){return kc(r,Mc(r),e)}var vw=Object.getOwnPropertySymbols,yw=vw?function(r){for(var e=[];r;)_c(e,Mc(r)),r=Hm(r);return e}:qm;function Qm(r,e,n){var s=e(r);return Te(r)?s:_c(s,n(r))}function rc(r){return Qm(r,Yt,Mc)}function Sw(r){return Qm(r,Km,yw)}var ic=Pr(yn,"DataView"),sc=Pr(yn,"Promise"),fi=Pr(yn,"Set"),Rp="[object Map]",Ew="[object Object]",Np="[object Promise]",Ip="[object Set]",Op="[object WeakMap]",_p="[object DataView]",Tw=_r(ic),xw=_r(xs),ww=_r(sc),kw=_r(fi),Aw=_r(nc),Wt=lr;(ic&&Wt(new ic(new ArrayBuffer(1)))!=_p||xs&&Wt(new xs)!=Rp||sc&&Wt(sc.resolve())!=Np||fi&&Wt(new fi)!=Ip||nc&&Wt(new nc)!=Op)&&(Wt=function(r){var e=lr(r),n=e==Ew?r.constructor:void 0,s=n?_r(n):"";if(s)switch(s){case Tw:return _p;case xw:return Rp;case ww:return Np;case kw:return Ip;case Aw:return Op}return e});var Cw=Object.prototype,Rw=Cw.hasOwnProperty;function Nw(r){var e=r.length,n=new r.constructor(e);return e&&typeof r[0]=="string"&&Rw.call(r,"index")&&(n.index=r.index,n.input=r.input),n}var ua=yn.Uint8Array;function Iw(r){var e=new r.constructor(r.byteLength);return new ua(e).set(new ua(r)),e}function Ow(r,e){var n=r.buffer;return new r.constructor(n,r.byteOffset,r.byteLength)}var _w=/\w*$/;function Pw(r){var e=new r.constructor(r.source,_w.exec(r));return e.lastIndex=r.lastIndex,e}var Pp=Kt?Kt.prototype:void 0,Lp=Pp?Pp.valueOf:void 0;function Lw(r){return Lp?Object(Lp.call(r)):{}}function Mw(r,e){var n=r.buffer;return new r.constructor(n,r.byteOffset,r.length)}var bw="[object Boolean]",jw="[object Date]",Fw="[object Map]",$w="[object Number]",Uw="[object RegExp]",Dw="[object Set]",Bw="[object String]",zw="[object Symbol]",Vw="[object ArrayBuffer]",Ww="[object DataView]",Gw="[object Float32Array]",Kw="[object Float64Array]",Hw="[object Int8Array]",Yw="[object Int16Array]",Xw="[object Int32Array]",qw="[object Uint8Array]",Qw="[object Uint8ClampedArray]",Zw="[object Uint16Array]",Jw="[object Uint32Array]";function ek(r,e,n){var s=r.constructor;switch(e){case Vw:return Iw(r);case bw:case jw:return new s(+r);case Ww:return Ow(r);case Gw:case Kw:case Hw:case Yw:case Xw:case qw:case Qw:case Zw:case Jw:return Mw(r);case Fw:return new s;case $w:case Bw:return new s(r);case Uw:return Pw(r);case Dw:return new s;case zw:return Lw(r)}}function tk(r){return typeof r.constructor=="function"&&!Rs(r)?hT(Hm(r)):{}}var nk="[object Map]";function rk(r){return on(r)&&Wt(r)==nk}var Mp=or&&or.isMap,ik=Mp?Ca(Mp):rk,sk="[object Set]";function ok(r){return on(r)&&Wt(r)==sk}var bp=or&&or.isSet,ak=bp?Ca(bp):ok,Zm="[object Arguments]",lk="[object Array]",uk="[object Boolean]",ck="[object Date]",fk="[object Error]",Jm="[object Function]",dk="[object GeneratorFunction]",hk="[object Map]",pk="[object Number]",eg="[object Object]",mk="[object RegExp]",gk="[object Set]",vk="[object String]",yk="[object Symbol]",Sk="[object WeakMap]",Ek="[object ArrayBuffer]",Tk="[object DataView]",xk="[object Float32Array]",wk="[object Float64Array]",kk="[object Int8Array]",Ak="[object Int16Array]",Ck="[object Int32Array]",Rk="[object Uint8Array]",Nk="[object Uint8ClampedArray]",Ik="[object Uint16Array]",Ok="[object Uint32Array]",Re={};Re[Zm]=Re[lk]=Re[Ek]=Re[Tk]=Re[uk]=Re[ck]=Re[xk]=Re[wk]=Re[kk]=Re[Ak]=Re[Ck]=Re[hk]=Re[pk]=Re[eg]=Re[mk]=Re[gk]=Re[vk]=Re[yk]=Re[Rk]=Re[Nk]=Re[Ik]=Re[Ok]=!0;Re[fk]=Re[Jm]=Re[Sk]=!1;function Zo(r,e,n,s,a,l){var c;if(c!==void 0)return c;if(!Ht(r))return r;var f=Te(r);if(f)return c=Nw(r),mT(r,c);var h=Wt(r),m=h==Jm||h==dk;if(Es(r))return hw(r);if(h==eg||h==Zm||m&&!a)return c=m?{}:tk(r),gw(r,fw(c,r));if(!Re[h])return a?r:{};c=ek(r,h),l||(l=new vn);var g=l.get(r);if(g)return g;l.set(r,c),ak(r)?r.forEach(function(x){c.add(Zo(x,e,n,x,r,l))}):ik(r)&&r.forEach(function(x,A){c.set(A,Zo(x,e,n,A,r,l))});var y=rc,S=f?void 0:y(r);return jm(S||r,function(x,A){S&&(A=x,x=r[A]),ka(c,A,Zo(x,e,n,A,r,l))}),c}var _k=4;function st(r){return Zo(r,_k)}function Is(r){for(var e=-1,n=r==null?0:r.length,s=0,a=[];++e<n;){var l=r[e];l&&(a[s++]=l)}return a}var Pk="__lodash_hash_undefined__";function Lk(r){return this.__data__.set(r,Pk),this}function Mk(r){return this.__data__.has(r)}function hi(r){var e=-1,n=r==null?0:r.length;for(this.__data__=new Fn;++e<n;)this.add(r[e])}hi.prototype.add=hi.prototype.push=Lk;hi.prototype.has=Mk;function tg(r,e){for(var n=-1,s=r==null?0:r.length;++n<s;)if(e(r[n],n,r))return!0;return!1}function bc(r,e){return r.has(e)}var bk=1,jk=2;function ng(r,e,n,s,a,l){var c=n&bk,f=r.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var m=l.get(r),g=l.get(e);if(m&&g)return m==e&&g==r;var y=-1,S=!0,x=n&jk?new hi:void 0;for(l.set(r,e),l.set(e,r);++y<f;){var A=r[y],R=e[y];if(s)var j=c?s(R,A,y,e,r,l):s(A,R,y,r,e,l);if(j!==void 0){if(j)continue;S=!1;break}if(x){if(!tg(e,function(b,_){if(!bc(x,_)&&(A===b||a(A,b,n,s,l)))return x.push(_)})){S=!1;break}}else if(!(A===R||a(A,R,n,s,l))){S=!1;break}}return l.delete(r),l.delete(e),S}function Fk(r){var e=-1,n=Array(r.size);return r.forEach(function(s,a){n[++e]=[a,s]}),n}function jc(r){var e=-1,n=Array(r.size);return r.forEach(function(s){n[++e]=s}),n}var $k=1,Uk=2,Dk="[object Boolean]",Bk="[object Date]",zk="[object Error]",Vk="[object Map]",Wk="[object Number]",Gk="[object RegExp]",Kk="[object Set]",Hk="[object String]",Yk="[object Symbol]",Xk="[object ArrayBuffer]",qk="[object DataView]",jp=Kt?Kt.prototype:void 0,Hu=jp?jp.valueOf:void 0;function Qk(r,e,n,s,a,l,c){switch(n){case qk:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case Xk:return!(r.byteLength!=e.byteLength||!l(new ua(r),new ua(e)));case Dk:case Bk:case Wk:return Cs(+r,+e);case zk:return r.name==e.name&&r.message==e.message;case Gk:case Hk:return r==e+"";case Vk:var f=Fk;case Kk:var h=s&$k;if(f||(f=jc),r.size!=e.size&&!h)return!1;var m=c.get(r);if(m)return m==e;s|=Uk,c.set(r,e);var g=ng(f(r),f(e),s,a,l,c);return c.delete(r),g;case Yk:if(Hu)return Hu.call(r)==Hu.call(e)}return!1}var Zk=1,Jk=Object.prototype,eA=Jk.hasOwnProperty;function tA(r,e,n,s,a,l){var c=n&Zk,f=rc(r),h=f.length,m=rc(e),g=m.length;if(h!=g&&!c)return!1;for(var y=h;y--;){var S=f[y];if(!(c?S in e:eA.call(e,S)))return!1}var x=l.get(r),A=l.get(e);if(x&&A)return x==e&&A==r;var R=!0;l.set(r,e),l.set(e,r);for(var j=c;++y<h;){S=f[y];var b=r[S],_=e[S];if(s)var P=c?s(_,b,S,e,r,l):s(b,_,S,r,e,l);if(!(P===void 0?b===_||a(b,_,n,s,l):P)){R=!1;break}j||(j=S=="constructor")}if(R&&!j){var M=r.constructor,z=e.constructor;M!=z&&"constructor"in r&&"constructor"in e&&!(typeof M=="function"&&M instanceof M&&typeof z=="function"&&z instanceof z)&&(R=!1)}return l.delete(r),l.delete(e),R}var nA=1,Fp="[object Arguments]",$p="[object Array]",Ko="[object Object]",rA=Object.prototype,Up=rA.hasOwnProperty;function iA(r,e,n,s,a,l){var c=Te(r),f=Te(e),h=c?$p:Wt(r),m=f?$p:Wt(e);h=h==Fp?Ko:h,m=m==Fp?Ko:m;var g=h==Ko,y=m==Ko,S=h==m;if(S&&Es(r)){if(!Es(e))return!1;c=!0,g=!1}if(S&&!g)return l||(l=new vn),c||Rc(r)?ng(r,e,n,s,a,l):Qk(r,e,h,n,s,a,l);if(!(n&nA)){var x=g&&Up.call(r,"__wrapped__"),A=y&&Up.call(e,"__wrapped__");if(x||A){var R=x?r.value():r,j=A?e.value():e;return l||(l=new vn),a(R,j,n,s,l)}}return S?(l||(l=new vn),tA(r,e,n,s,a,l)):!1}function Fc(r,e,n,s,a){return r===e?!0:r==null||e==null||!on(r)&&!on(e)?r!==r&&e!==e:iA(r,e,n,s,Fc,a)}var sA=1,oA=2;function aA(r,e,n,s){var a=n.length,l=a;if(r==null)return!l;for(r=Object(r);a--;){var c=n[a];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++a<l;){c=n[a];var f=c[0],h=r[f],m=c[1];if(c[2]){if(h===void 0&&!(f in r))return!1}else{var g=new vn,y;if(!(y===void 0?Fc(m,h,sA|oA,s,g):y))return!1}}return!0}function rg(r){return r===r&&!Ht(r)}function lA(r){for(var e=Yt(r),n=e.length;n--;){var s=e[n],a=r[s];e[n]=[s,a,rg(a)]}return e}function ig(r,e){return function(n){return n==null?!1:n[r]===e&&(e!==void 0||r in Object(n))}}function uA(r){var e=lA(r);return e.length==1&&e[0][2]?ig(e[0][0],e[0][1]):function(n){return n===r||aA(n,r,e)}}function cA(r,e){return r!=null&&e in Object(r)}function sg(r,e,n){e=Ia(e,r);for(var s=-1,a=e.length,l=!1;++s<a;){var c=Ns(e[s]);if(!(l=r!=null&&n(r,c)))break;r=r[c]}return l||++s!=a?l:(a=r==null?0:r.length,!!a&&Cc(a)&&wa(c,a)&&(Te(r)||Aa(r)))}function fA(r,e){return r!=null&&sg(r,e,cA)}var dA=1,hA=2;function pA(r,e){return Nc(r)&&rg(e)?ig(Ns(r),e):function(n){var s=nw(n,r);return s===void 0&&s===e?fA(n,r):Fc(e,s,dA|hA)}}function mA(r){return function(e){return e?.[r]}}function gA(r){return function(e){return Oc(e,r)}}function vA(r){return Nc(r)?mA(Ns(r)):gA(r)}function En(r){return typeof r=="function"?r:r==null?di:typeof r=="object"?Te(r)?pA(r[0],r[1]):uA(r):vA(r)}function yA(r,e,n,s){for(var a=-1,l=r==null?0:r.length;++a<l;){var c=r[a];e(s,c,n(c),r)}return s}function SA(r){return function(e,n,s){for(var a=-1,l=Object(e),c=s(e),f=c.length;f--;){var h=c[++a];if(n(l[h],h,l)===!1)break}return e}}var EA=SA();function TA(r,e){return r&&EA(r,e,Yt)}function xA(r,e){return function(n,s){if(n==null)return n;if(!Sn(n))return r(n,s);for(var a=n.length,l=-1,c=Object(n);++l<a&&s(c[l],l,c)!==!1;);return n}}var Lr=xA(TA);function wA(r,e,n,s){return Lr(r,function(a,l,c){e(s,a,n(a),c)}),s}function kA(r,e){return function(n,s){var a=Te(n)?yA:wA,l=e?e():{};return a(n,r,En(s),l)}}var og=Object.prototype,AA=og.hasOwnProperty,$c=Ac(function(r,e){r=Object(r);var n=-1,s=e.length,a=s>2?e[2]:void 0;for(a&&Um(e[0],e[1],a)&&(s=1);++n<s;)for(var l=e[n],c=Km(l),f=-1,h=c.length;++f<h;){var m=c[f],g=r[m];(g===void 0||Cs(g,og[m])&&!AA.call(r,m))&&(r[m]=l[m])}return r});function Dp(r){return on(r)&&Sn(r)}var CA=200;function RA(r,e,n,s){var a=-1,l=$m,c=!0,f=r.length,h=[],m=e.length;if(!f)return h;e.length>=CA&&(l=bc,c=!1,e=new hi(e));e:for(;++a<f;){var g=r[a],y=g;if(g=g!==0?g:0,c&&y===y){for(var S=m;S--;)if(e[S]===y)continue e;h.push(g)}else l(e,y,s)||h.push(g)}return h}var Oa=Ac(function(r,e){return Dp(r)?RA(r,Pc(e,1,Dp,!0)):[]});function Nr(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function rt(r,e,n){var s=r==null?0:r.length;return s?(e=e===void 0?1:xa(e),Ym(r,e<0?0:e,s)):[]}function ws(r,e,n){var s=r==null?0:r.length;return s?(e=e===void 0?1:xa(e),e=s-e,Ym(r,0,e<0?0:e)):[]}function NA(r){return typeof r=="function"?r:di}function ae(r,e){var n=Te(r)?jm:Lr;return n(r,NA(e))}function IA(r,e){for(var n=-1,s=r==null?0:r.length;++n<s;)if(!e(r[n],n,r))return!1;return!0}function OA(r,e){var n=!0;return Lr(r,function(s,a,l){return n=!!e(s,a,l),n}),n}function sn(r,e,n){var s=Te(r)?IA:OA;return s(r,En(e))}function ag(r,e){var n=[];return Lr(r,function(s,a,l){e(s,a,l)&&n.push(s)}),n}function Xt(r,e){var n=Te(r)?Lc:ag;return n(r,En(e))}function _A(r){return function(e,n,s){var a=Object(e);if(!Sn(e)){var l=En(n);e=Yt(e),n=function(f){return l(a[f],f,a)}}var c=r(e,n,s);return c>-1?a[l?e[c]:c]:void 0}}var PA=Math.max;function LA(r,e,n){var s=r==null?0:r.length;if(!s)return-1;var a=n==null?0:xa(n);return a<0&&(a=PA(s+a,0)),Fm(r,En(e),a)}var pi=_A(LA);function an(r){return r&&r.length?r[0]:void 0}function MA(r,e){var n=-1,s=Sn(r)?Array(r.length):[];return Lr(r,function(a,l,c){s[++n]=e(a,l,c)}),s}function ee(r,e){var n=Te(r)?Ta:MA;return n(r,En(e))}function Gt(r,e){return Pc(ee(r,e))}var bA=Object.prototype,jA=bA.hasOwnProperty,FA=kA(function(r,e,n){jA.call(r,n)?r[n].push(e):wc(r,n,[e])}),$A=Object.prototype,UA=$A.hasOwnProperty;function DA(r,e){return r!=null&&UA.call(r,e)}function se(r,e){return r!=null&&sg(r,e,DA)}var BA="[object String]";function xt(r){return typeof r=="string"||!Te(r)&&on(r)&&lr(r)==BA}function zA(r,e){return Ta(e,function(n){return r[n]})}function Xe(r){return r==null?[]:zA(r,Yt(r))}var VA=Math.max;function pt(r,e,n,s){r=Sn(r)?r:Xe(r),n=n?xa(n):0;var a=r.length;return n<0&&(n=VA(a+n,0)),xt(r)?n<=a&&r.indexOf(e,n)>-1:!!a&&xc(r,e,n)>-1}function Bp(r,e,n){var s=r==null?0:r.length;if(!s)return-1;var a=0;return xc(r,e,a)}var WA="[object Map]",GA="[object Set]",KA=Object.prototype,HA=KA.hasOwnProperty;function Ne(r){if(r==null)return!0;if(Sn(r)&&(Te(r)||typeof r=="string"||typeof r.splice=="function"||Es(r)||Rc(r)||Aa(r)))return!r.length;var e=Wt(r);if(e==WA||e==GA)return!r.size;if(Rs(r))return!Gm(r).length;for(var n in r)if(HA.call(r,n))return!1;return!0}var YA="[object RegExp]";function XA(r){return on(r)&&lr(r)==YA}var zp=or&&or.isRegExp,Pn=zp?Ca(zp):XA;function Ln(r){return r===void 0}var qA="Expected a function";function QA(r){if(typeof r!="function")throw new TypeError(qA);return function(){var e=arguments;switch(e.length){case 0:return!r.call(this);case 1:return!r.call(this,e[0]);case 2:return!r.call(this,e[0],e[1]);case 3:return!r.call(this,e[0],e[1],e[2])}return!r.apply(this,e)}}function ZA(r,e,n,s){if(!Ht(r))return r;e=Ia(e,r);for(var a=-1,l=e.length,c=l-1,f=r;f!=null&&++a<l;){var h=Ns(e[a]),m=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return r;if(a!=c){var g=f[h];m=void 0,m===void 0&&(m=Ht(g)?g:wa(e[a+1])?[]:{})}ka(f,h,m),f=f[h]}return r}function JA(r,e,n){for(var s=-1,a=e.length,l={};++s<a;){var c=e[s],f=Oc(r,c);n(f,c)&&ZA(l,Ia(c,r),f)}return l}function ln(r,e){if(r==null)return{};var n=Ta(Sw(r),function(s){return[s]});return e=En(e),JA(r,n,function(s,a){return e(s,a[0])})}function eC(r,e,n,s,a){return a(r,function(l,c,f){n=s?(s=!1,l):e(n,l,c,f)}),n}function Mt(r,e,n){var s=Te(r)?iw:eC,a=arguments.length<3;return s(r,En(e),n,a,Lr)}function _a(r,e){var n=Te(r)?Lc:ag;return n(r,QA(En(e)))}function tC(r,e){var n;return Lr(r,function(s,a,l){return n=e(s,a,l),!n}),!!n}function lg(r,e,n){var s=Te(r)?tg:tC;return s(r,En(e))}var nC=1/0,rC=fi&&1/jc(new fi([,-0]))[1]==nC?function(r){return new fi(r)}:Ye,iC=200;function sC(r,e,n){var s=-1,a=$m,l=r.length,c=!0,f=[],h=f;if(l>=iC){var m=rC(r);if(m)return jc(m);c=!1,a=bc,h=new hi}else h=f;e:for(;++s<l;){var g=r[s],y=g;if(g=g!==0?g:0,c&&y===y){for(var S=h.length;S--;)if(h[S]===y)continue e;f.push(g)}else a(h,y,n)||(h!==f&&h.push(y),f.push(g))}return f}function Uc(r){return r&&r.length?sC(r):[]}function oc(r){console&&console.error&&console.error(`Error: ${r}`)}function ug(r){console&&console.warn&&console.warn(`Warning: ${r}`)}function cg(r){const e=new Date().getTime(),n=r();return{time:new Date().getTime()-e,value:n}}function fg(r){function e(){}e.prototype=r;const n=new e;function s(){return typeof n.bar}return s(),s(),r}function oC(r){return aC(r)?r.LABEL:r.name}function aC(r){return xt(r.LABEL)&&r.LABEL!==""}class Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,n=>{n.accept(e)})}}class bt extends Tn{constructor(e){super([]),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class mi extends Tn{constructor(e){super(e.definition),this.orgText="",Lt(this,ln(e,n=>n!==void 0))}}class wt extends Tn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Lt(this,ln(e,n=>n!==void 0))}}class Tt extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}}class xn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}}class wn extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}}class qe extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}}class un extends Tn{constructor(e){super(e.definition),this.idx=1,Lt(this,ln(e,n=>n!==void 0))}}class cn extends Tn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Lt(this,ln(e,n=>n!==void 0))}}class je{constructor(e){this.idx=1,Lt(this,ln(e,n=>n!==void 0))}accept(e){e.visit(this)}}function lC(r){return ee(r,Jo)}function Jo(r){function e(n){return ee(n,Jo)}if(r instanceof bt){const n={type:"NonTerminal",name:r.nonTerminalName,idx:r.idx};return xt(r.label)&&(n.label=r.label),n}else{if(r instanceof wt)return{type:"Alternative",definition:e(r.definition)};if(r instanceof Tt)return{type:"Option",idx:r.idx,definition:e(r.definition)};if(r instanceof xn)return{type:"RepetitionMandatory",idx:r.idx,definition:e(r.definition)};if(r instanceof wn)return{type:"RepetitionMandatoryWithSeparator",idx:r.idx,separator:Jo(new je({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof un)return{type:"RepetitionWithSeparator",idx:r.idx,separator:Jo(new je({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof qe)return{type:"Repetition",idx:r.idx,definition:e(r.definition)};if(r instanceof cn)return{type:"Alternation",idx:r.idx,definition:e(r.definition)};if(r instanceof je){const n={type:"Terminal",name:r.terminalType.name,label:oC(r.terminalType),idx:r.idx};xt(r.label)&&(n.terminalLabel=r.label);const s=r.terminalType.PATTERN;return r.terminalType.PATTERN&&(n.pattern=Pn(s)?s.source:s),n}else{if(r instanceof mi)return{type:"Rule",name:r.name,orgText:r.orgText,definition:e(r.definition)};throw Error("non exhaustive match")}}}class gi{visit(e){const n=e;switch(n.constructor){case bt:return this.visitNonTerminal(n);case wt:return this.visitAlternative(n);case Tt:return this.visitOption(n);case xn:return this.visitRepetitionMandatory(n);case wn:return this.visitRepetitionMandatoryWithSeparator(n);case un:return this.visitRepetitionWithSeparator(n);case qe:return this.visitRepetition(n);case cn:return this.visitAlternation(n);case je:return this.visitTerminal(n);case mi:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function uC(r){return r instanceof wt||r instanceof Tt||r instanceof qe||r instanceof xn||r instanceof wn||r instanceof un||r instanceof je||r instanceof mi}function ca(r,e=[]){return r instanceof Tt||r instanceof qe||r instanceof un?!0:r instanceof cn?lg(r.definition,s=>ca(s,e)):r instanceof bt&&pt(e,r)?!1:r instanceof Tn?(r instanceof bt&&e.push(r),sn(r.definition,s=>ca(s,e))):!1}function cC(r){return r instanceof cn}function gn(r){if(r instanceof bt)return"SUBRULE";if(r instanceof Tt)return"OPTION";if(r instanceof cn)return"OR";if(r instanceof xn)return"AT_LEAST_ONE";if(r instanceof wn)return"AT_LEAST_ONE_SEP";if(r instanceof un)return"MANY_SEP";if(r instanceof qe)return"MANY";if(r instanceof je)return"CONSUME";throw Error("non exhaustive match")}class Pa{walk(e,n=[]){ae(e.definition,(s,a)=>{const l=rt(e.definition,a+1);if(s instanceof bt)this.walkProdRef(s,l,n);else if(s instanceof je)this.walkTerminal(s,l,n);else if(s instanceof wt)this.walkFlat(s,l,n);else if(s instanceof Tt)this.walkOption(s,l,n);else if(s instanceof xn)this.walkAtLeastOne(s,l,n);else if(s instanceof wn)this.walkAtLeastOneSep(s,l,n);else if(s instanceof un)this.walkManySep(s,l,n);else if(s instanceof qe)this.walkMany(s,l,n);else if(s instanceof cn)this.walkOr(s,l,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,s){}walkProdRef(e,n,s){}walkFlat(e,n,s){const a=n.concat(s);this.walk(e,a)}walkOption(e,n,s){const a=n.concat(s);this.walk(e,a)}walkAtLeastOne(e,n,s){const a=[new Tt({definition:e.definition})].concat(n,s);this.walk(e,a)}walkAtLeastOneSep(e,n,s){const a=Vp(e,n,s);this.walk(e,a)}walkMany(e,n,s){const a=[new Tt({definition:e.definition})].concat(n,s);this.walk(e,a)}walkManySep(e,n,s){const a=Vp(e,n,s);this.walk(e,a)}walkOr(e,n,s){const a=n.concat(s);ae(e.definition,l=>{const c=new wt({definition:[l]});this.walk(c,a)})}}function Vp(r,e,n){return[new Tt({definition:[new je({terminalType:r.separator})].concat(r.definition)})].concat(e,n)}function Os(r){if(r instanceof bt)return Os(r.referencedRule);if(r instanceof je)return hC(r);if(uC(r))return fC(r);if(cC(r))return dC(r);throw Error("non exhaustive match")}function fC(r){let e=[];const n=r.definition;let s=0,a=n.length>s,l,c=!0;for(;a&&c;)l=n[s],c=ca(l),e=e.concat(Os(l)),s=s+1,a=n.length>s;return Uc(e)}function dC(r){const e=ee(r.definition,n=>Os(n));return Uc(rn(e))}function hC(r){return[r.terminalType]}const dg="_~IN~_";class pC extends Pa{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,s){}walkProdRef(e,n,s){const a=gC(e.referencedRule,e.idx)+this.topProd.name,l=n.concat(s),c=new wt({definition:l}),f=Os(c);this.follows[a]=f}}function mC(r){const e={};return ae(r,n=>{const s=new pC(n).startWalking();Lt(e,s)}),e}function gC(r,e){return r.name+e+dg}function le(r){return r.charCodeAt(0)}function Yu(r,e){Array.isArray(r)?r.forEach(function(n){e.push(n)}):e.push(r)}function ss(r,e){if(r[e]===!0)throw"duplicate flag "+e;r[e],r[e]=!0}function si(r){if(r===void 0)throw Error("Internal Error - Should never get here!");return!0}function vC(){throw Error("Internal Error - Should never get here!")}function Wp(r){return r.type==="Character"}const fa=[];for(let r=le("0");r<=le("9");r++)fa.push(r);const da=[le("_")].concat(fa);for(let r=le("a");r<=le("z");r++)da.push(r);for(let r=le("A");r<=le("Z");r++)da.push(r);const Gp=[le(" "),le("\f"),le(`
`),le("\r"),le("	"),le("\v"),le("	"),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le("\u2028"),le("\u2029"),le(""),le(""),le(""),le("\uFEFF")],yC=/[0-9a-fA-F]/,Ho=/[0-9]/,SC=/[1-9]/;class EC{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ss(s,"global");break;case"i":ss(s,"ignoreCase");break;case"m":ss(s,"multiLine");break;case"u":ss(s,"unicode");break;case"y":ss(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":n="Lookbehind";break;case"!":n="NegativeLookbehind"}break}}si(n);const s=this.disjunction();return this.consumeChar(")"),{type:n,value:s,loc:this.loc(e)}}return vC()}quantifier(e=!1){let n;const s=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const a=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:a,atMost:a};break;case",":let l;this.isDigit()?(l=this.integerIncludingZero(),n={atLeast:a,atMost:l}):n={atLeast:a,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;si(n);break}if(!(e===!0&&n===void 0)&&si(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(s),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),si(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[le(`
`),le("\r"),le("\u2028"),le("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=fa;break;case"D":e=fa,n=!0;break;case"s":e=Gp;break;case"S":e=Gp,n=!0;break;case"w":e=da;break;case"W":e=da,n=!0;break}if(si(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=le("\f");break;case"n":e=le(`
`);break;case"r":e=le("\r");break;case"t":e=le("	");break;case"v":e=le("\v");break}if(si(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:le("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:le(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:le(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,Wp(s)&&this.isRangeDash()){this.consumeChar("-");const a=this.classAtom();if(a.type,Wp(a)){if(a.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:a.value})}else Yu(s.value,e),e.push(le("-")),Yu(a.value,e)}else Yu(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:le("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const n=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:n};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(SC.test(e)===!1)throw Error("Expecting a positive integer");for(;Ho.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Ho.test(e)===!1)throw Error("Expecting an integer");for(;Ho.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:le(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Ho.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let a=0;a<e;a++){const l=this.popChar();if(yC.test(l)===!1)throw Error("Expecting a HexDecimal digits");n+=l}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Dc{visitChildren(e){for(const n in e){const s=e[n];e.hasOwnProperty(n)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(a=>{this.visit(a)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let ea={};const TC=new EC;function La(r){const e=r.toString();if(ea.hasOwnProperty(e))return ea[e];{const n=TC.pattern(e);return ea[e]=n,n}}function xC(){ea={}}const hg="Complement Sets are not supported for first char optimization",ha=`Unable to use "first char" lexer optimizations:
`;function wC(r,e=!1){try{const n=La(r);return ac(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===hg)e&&ug(`${ha}	Unable to optimize: < ${r.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),oc(`${ha}
	Failed parsing: < ${r.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function ac(r,e,n){switch(r.type){case"Disjunction":for(let a=0;a<r.value.length;a++)ac(r.value[a],e,n);break;case"Alternative":const s=r.value;for(let a=0;a<s.length;a++){const l=s[a];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const c=l;switch(c.type){case"Character":Yo(c.value,e,n);break;case"Set":if(c.complement===!0)throw Error(hg);ae(c.value,h=>{if(typeof h=="number")Yo(h,e,n);else{const m=h;if(n===!0)for(let g=m.from;g<=m.to;g++)Yo(g,e,n);else{for(let g=m.from;g<=m.to&&g<fs;g++)Yo(g,e,n);if(m.to>=fs){const g=m.from>=fs?m.from:fs,y=m.to,S=ar(g),x=ar(y);for(let A=S;A<=x;A++)e[A]=A}}}});break;case"Group":ac(c.value,e,n);break;default:throw Error("Non Exhaustive Match")}const f=c.quantifier!==void 0&&c.quantifier.atLeast===0;if(c.type==="Group"&&lc(c)===!1||c.type!=="Group"&&f===!1)break}break;default:throw Error("non exhaustive match!")}return Xe(e)}function Yo(r,e,n){const s=ar(r);e[s]=s,n===!0&&kC(r,e)}function kC(r,e){const n=String.fromCharCode(r),s=n.toUpperCase();if(s!==n){const a=ar(s.charCodeAt(0));e[a]=a}else{const a=n.toLowerCase();if(a!==n){const l=ar(a.charCodeAt(0));e[l]=l}}}function Kp(r,e){return pi(r.value,n=>{if(typeof n=="number")return pt(e,n);{const s=n;return pi(e,a=>s.from<=a&&a<=s.to)!==void 0}})}function lc(r){const e=r.quantifier;return e&&e.atLeast===0?!0:r.value?Te(r.value)?sn(r.value,lc):lc(r.value):!1}class AC extends Dc{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){pt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Kp(e,this.targetCharCodes)===void 0&&(this.found=!0):Kp(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Bc(r,e){if(e instanceof RegExp){const n=La(e),s=new AC(r);return s.visit(n),s.found}else return pi(e,n=>pt(r,n.charCodeAt(0)))!==void 0}const Ir="PATTERN",cs="defaultMode",Xo="modes";let pg=typeof new RegExp("(?:)").sticky=="boolean";function CC(r,e){e=$c(e,{useSticky:pg,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,P)=>P()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{qC()});let s;n("Reject Lexer.NA",()=>{s=_a(r,_=>_[Ir]===dt.NA)});let a=!1,l;n("Transform Patterns",()=>{a=!1,l=ee(s,_=>{const P=_[Ir];if(Pn(P)){const M=P.source;return M.length===1&&M!=="^"&&M!=="$"&&M!=="."&&!P.ignoreCase?M:M.length===2&&M[0]==="\\"&&!pt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],M[1])?M[1]:e.useSticky?Yp(P):Hp(P)}else{if(bn(P))return a=!0,{exec:P};if(typeof P=="object")return a=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const M=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),z=new RegExp(M);return e.useSticky?Yp(z):Hp(z)}}else throw Error("non exhaustive match")}})});let c,f,h,m,g;n("misc mapping",()=>{c=ee(s,_=>_.tokenTypeIdx),f=ee(s,_=>{const P=_.GROUP;if(P!==dt.SKIPPED){if(xt(P))return P;if(Ln(P))return!1;throw Error("non exhaustive match")}}),h=ee(s,_=>{const P=_.LONGER_ALT;if(P)return Te(P)?ee(P,z=>Bp(s,z)):[Bp(s,P)]}),m=ee(s,_=>_.PUSH_MODE),g=ee(s,_=>se(_,"POP_MODE"))});let y;n("Line Terminator Handling",()=>{const _=vg(e.lineTerminatorCharacters);y=ee(s,P=>!1),e.positionTracking!=="onlyOffset"&&(y=ee(s,P=>se(P,"LINE_BREAKS")?!!P.LINE_BREAKS:gg(P,_)===!1&&Bc(_,P.PATTERN)))});let S,x,A,R;n("Misc Mapping #2",()=>{S=ee(s,mg),x=ee(l,HC),A=Mt(s,(_,P)=>{const M=P.GROUP;return xt(M)&&M!==dt.SKIPPED&&(_[M]=[]),_},{}),R=ee(l,(_,P)=>({pattern:l[P],longerAlt:h[P],canLineTerminator:y[P],isCustom:S[P],short:x[P],group:f[P],push:m[P],pop:g[P],tokenTypeIdx:c[P],tokenType:s[P]}))});let j=!0,b=[];return e.safeMode||n("First Char Optimization",()=>{b=Mt(s,(_,P,M)=>{if(typeof P.PATTERN=="string"){const z=P.PATTERN.charCodeAt(0),L=ar(z);Xu(_,L,R[M])}else if(Te(P.START_CHARS_HINT)){let z;ae(P.START_CHARS_HINT,L=>{const D=typeof L=="string"?L.charCodeAt(0):L,G=ar(D);z!==G&&(z=G,Xu(_,G,R[M]))})}else if(Pn(P.PATTERN))if(P.PATTERN.unicode)j=!1,e.ensureOptimizations&&oc(`${ha}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const z=wC(P.PATTERN,e.ensureOptimizations);Ne(z)&&(j=!1),ae(z,L=>{Xu(_,L,R[M])})}else e.ensureOptimizations&&oc(`${ha}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),j=!1;return _},[])}),{emptyGroups:A,patternIdxToConfig:R,charCodeToPatternIdxToConfig:b,hasCustom:a,canBeOptimized:j}}function RC(r,e){let n=[];const s=IC(r);n=n.concat(s.errors);const a=OC(s.valid),l=a.valid;return n=n.concat(a.errors),n=n.concat(NC(l)),n=n.concat($C(l)),n=n.concat(UC(l,e)),n=n.concat(DC(l)),n}function NC(r){let e=[];const n=Xt(r,s=>Pn(s[Ir]));return e=e.concat(PC(n)),e=e.concat(bC(n)),e=e.concat(jC(n)),e=e.concat(FC(n)),e=e.concat(LC(n)),e}function IC(r){const e=Xt(r,a=>!se(a,Ir)),n=ee(e,a=>({message:"Token Type: ->"+a.name+"<- missing static 'PATTERN' property",type:Be.MISSING_PATTERN,tokenTypes:[a]})),s=Oa(r,e);return{errors:n,valid:s}}function OC(r){const e=Xt(r,a=>{const l=a[Ir];return!Pn(l)&&!bn(l)&&!se(l,"exec")&&!xt(l)}),n=ee(e,a=>({message:"Token Type: ->"+a.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Be.INVALID_PATTERN,tokenTypes:[a]})),s=Oa(r,e);return{errors:n,valid:s}}const _C=/[^\\][$]/;function PC(r){class e extends Dc{constructor(){super(...arguments),this.found=!1}visitEndAnchor(l){this.found=!0}}const n=Xt(r,a=>{const l=a.PATTERN;try{const c=La(l),f=new e;return f.visit(c),f.found}catch{return _C.test(l.source)}});return ee(n,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Be.EOI_ANCHOR_FOUND,tokenTypes:[a]}))}function LC(r){const e=Xt(r,s=>s.PATTERN.test(""));return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:Be.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const MC=/[^\\[][\^]|^\^/;function bC(r){class e extends Dc{constructor(){super(...arguments),this.found=!1}visitStartAnchor(l){this.found=!0}}const n=Xt(r,a=>{const l=a.PATTERN;try{const c=La(l),f=new e;return f.visit(c),f.found}catch{return MC.test(l.source)}});return ee(n,a=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Be.SOI_ANCHOR_FOUND,tokenTypes:[a]}))}function jC(r){const e=Xt(r,s=>{const a=s[Ir];return a instanceof RegExp&&(a.multiline||a.global)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Be.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function FC(r){const e=[];let n=ee(r,l=>Mt(r,(c,f)=>(l.PATTERN.source===f.PATTERN.source&&!pt(e,f)&&f.PATTERN!==dt.NA&&(e.push(f),c.push(f)),c),[]));n=Is(n);const s=Xt(n,l=>l.length>1);return ee(s,l=>{const c=ee(l,h=>h.name);return{message:`The same RegExp pattern ->${an(l).PATTERN}<-has been used in all of the following Token Types: ${c.join(", ")} <-`,type:Be.DUPLICATE_PATTERNS_FOUND,tokenTypes:l}})}function $C(r){const e=Xt(r,s=>{if(!se(s,"GROUP"))return!1;const a=s.GROUP;return a!==dt.SKIPPED&&a!==dt.NA&&!xt(a)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Be.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function UC(r,e){const n=Xt(r,a=>a.PUSH_MODE!==void 0&&!pt(e,a.PUSH_MODE));return ee(n,a=>({message:`Token Type: ->${a.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${a.PUSH_MODE}<-which does not exist`,type:Be.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[a]}))}function DC(r){const e=[],n=Mt(r,(s,a,l)=>{const c=a.PATTERN;return c===dt.NA||(xt(c)?s.push({str:c,idx:l,tokenType:a}):Pn(c)&&zC(c)&&s.push({str:c.source,idx:l,tokenType:a})),s},[]);return ae(r,(s,a)=>{ae(n,({str:l,idx:c,tokenType:f})=>{if(a<c&&BC(l,s.PATTERN)){const h=`Token: ->${f.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:h,type:Be.UNREACHABLE_PATTERN,tokenTypes:[s,f]})}})}),e}function BC(r,e){if(Pn(e)){if(VC(e))return!1;const n=e.exec(r);return n!==null&&n.index===0}else{if(bn(e))return e(r,0,[],{});if(se(e,"exec"))return e.exec(r,0,[],{});if(typeof e=="string")return e===r;throw Error("non exhaustive match")}}function zC(r){return pi([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>r.source.indexOf(n)!==-1)===void 0}function VC(r){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(r.source)}function Hp(r){const e=r.ignoreCase?"i":"";return new RegExp(`^(?:${r.source})`,e)}function Yp(r){const e=r.ignoreCase?"iy":"y";return new RegExp(`${r.source}`,e)}function WC(r,e,n){const s=[];return se(r,cs)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+cs+`> property in its definition
`,type:Be.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),se(r,Xo)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+Xo+`> property in its definition
`,type:Be.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),se(r,Xo)&&se(r,cs)&&!se(r.modes,r.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${cs}: <${r.defaultMode}>which does not exist
`,type:Be.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),se(r,Xo)&&ae(r.modes,(a,l)=>{ae(a,(c,f)=>{if(Ln(c))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${l}> at index: <${f}>
`,type:Be.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(se(c,"LONGER_ALT")){const h=Te(c.LONGER_ALT)?c.LONGER_ALT:[c.LONGER_ALT];ae(h,m=>{!Ln(m)&&!pt(a,m)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${m.name}> on token <${c.name}> outside of mode <${l}>
`,type:Be.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function GC(r,e,n){const s=[];let a=!1;const l=Is(rn(Xe(r.modes))),c=_a(l,h=>h[Ir]===dt.NA),f=vg(n);return e&&ae(c,h=>{const m=gg(h,f);if(m!==!1){const y={message:XC(h,m),type:m.issue,tokenType:h};s.push(y)}else se(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(a=!0):Bc(f,h.PATTERN)&&(a=!0)}),e&&!a&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Be.NO_LINE_BREAKS_FLAGS}),s}function KC(r){const e={},n=Yt(r);return ae(n,s=>{const a=r[s];if(Te(a))e[s]=[];else throw Error("non exhaustive match")}),e}function mg(r){const e=r.PATTERN;if(Pn(e))return!1;if(bn(e))return!0;if(se(e,"exec"))return!0;if(xt(e))return!1;throw Error("non exhaustive match")}function HC(r){return xt(r)&&r.length===1?r.charCodeAt(0):!1}const YC={test:function(r){const e=r.length;for(let n=this.lastIndex;n<e;n++){const s=r.charCodeAt(n);if(s===10)return this.lastIndex=n+1,!0;if(s===13)return r.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function gg(r,e){if(se(r,"LINE_BREAKS"))return!1;if(Pn(r.PATTERN)){try{Bc(e,r.PATTERN)}catch(n){return{issue:Be.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(xt(r.PATTERN))return!1;if(mg(r))return{issue:Be.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function XC(r,e){if(e.issue===Be.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${r.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Be.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${r.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function vg(r){return ee(r,n=>xt(n)?n.charCodeAt(0):n)}function Xu(r,e,n){r[e]===void 0?r[e]=[n]:r[e].push(n)}const fs=256;let ta=[];function ar(r){return r<fs?r:ta[r]}function qC(){if(Ne(ta)){ta=new Array(65536);for(let r=0;r<65536;r++)ta[r]=r>255?255+~~(r/255):r}}function _s(r,e){const n=r.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function pa(r,e){return r.tokenTypeIdx===e.tokenTypeIdx}let Xp=1;const yg={};function Ps(r){const e=QC(r);ZC(e),e1(e),JC(e),ae(e,n=>{n.isParent=n.categoryMatches.length>0})}function QC(r){let e=st(r),n=r,s=!0;for(;s;){n=Is(rn(ee(n,l=>l.CATEGORIES)));const a=Oa(n,e);e=e.concat(a),Ne(a)?s=!1:n=a}return e}function ZC(r){ae(r,e=>{Eg(e)||(yg[Xp]=e,e.tokenTypeIdx=Xp++),qp(e)&&!Te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),qp(e)||(e.CATEGORIES=[]),t1(e)||(e.categoryMatches=[]),n1(e)||(e.categoryMatchesMap={})})}function JC(r){ae(r,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(n,s)=>{e.categoryMatches.push(yg[s].tokenTypeIdx)})})}function e1(r){ae(r,e=>{Sg([],e)})}function Sg(r,e){ae(r,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),ae(e.CATEGORIES,n=>{const s=r.concat(e);pt(s,n)||Sg(s,n)})}function Eg(r){return se(r,"tokenTypeIdx")}function qp(r){return se(r,"CATEGORIES")}function t1(r){return se(r,"categoryMatches")}function n1(r){return se(r,"categoryMatchesMap")}function r1(r){return se(r,"tokenTypeIdx")}const i1={buildUnableToPopLexerModeMessage(r){return`Unable to pop Lexer Mode after encountering Token ->${r.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(r,e,n,s,a,l){return`unexpected character: ->${r.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var Be;(function(r){r[r.MISSING_PATTERN=0]="MISSING_PATTERN",r[r.INVALID_PATTERN=1]="INVALID_PATTERN",r[r.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",r[r.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",r[r.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",r[r.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",r[r.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",r[r.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",r[r.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",r[r.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",r[r.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",r[r.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",r[r.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",r[r.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",r[r.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",r[r.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",r[r.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",r[r.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Be||(Be={}));const ds={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:i1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(ds);class dt{constructor(e,n=ds){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(a,l)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${a}>`);const{time:f,value:h}=cg(l),m=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&m(`${c}<-- <${a}> time: ${f}ms`),this.traceInitIndent--,h}else return l()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Lt({},ds,n);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let a,l=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===ds.lineTerminatorsPattern)this.config.lineTerminatorsPattern=YC;else if(this.config.lineTerminatorCharacters===ds.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Te(e)?a={modes:{defaultMode:st(e)},defaultMode:cs}:(l=!1,a=st(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(WC(a,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(GC(a,this.trackStartLines,this.config.lineTerminatorCharacters))})),a.modes=a.modes?a.modes:{},ae(a.modes,(f,h)=>{a.modes[h]=_a(f,m=>Ln(m))});const c=Yt(a.modes);if(ae(a.modes,(f,h)=>{this.TRACE_INIT(`Mode: <${h}> processing`,()=>{if(this.modes.push(h),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(RC(f,c))}),Ne(this.lexerDefinitionErrors)){Ps(f);let m;this.TRACE_INIT("analyzeTokenTypes",()=>{m=CC(f,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[h]=m.patternIdxToConfig,this.charCodeToPatternIdxToConfig[h]=m.charCodeToPatternIdxToConfig,this.emptyGroups=Lt({},this.emptyGroups,m.emptyGroups),this.hasCustom=m.hasCustom||this.hasCustom,this.canModeBeOptimized[h]=m.canBeOptimized}})}),this.defaultMode=a.defaultMode,!Ne(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const h=ee(this.lexerDefinitionErrors,m=>m.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+h)}ae(this.lexerDefinitionWarning,f=>{ug(f.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(pg?(this.chopInput=di,this.match=this.matchWithTest):(this.updateLastIndex=Ye,this.match=this.matchWithExec),l&&(this.handleModes=Ye),this.trackStartLines===!1&&(this.computeNewColumn=di),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Ye),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const f=Mt(this.canModeBeOptimized,(h,m,g)=>(m===!1&&h.push(g),h),[]);if(n.ensureOptimizations&&!Ne(f))throw Error(`Lexer Modes: < ${f.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{xC()}),this.TRACE_INIT("toFastProperties",()=>{fg(this)})})}tokenize(e,n=this.defaultMode){if(!Ne(this.lexerDefinitionErrors)){const a=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+a)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let s,a,l,c,f,h,m,g,y,S,x,A,R,j,b;const _=e,P=_.length;let M=0,z=0;const L=this.hasCustom?0:Math.floor(e.length/10),D=new Array(L),G=[];let ke=this.trackStartLines?1:void 0,ce=this.trackStartLines?1:void 0;const We=KC(this.emptyGroups),et=this.trackStartLines,Fe=this.config.lineTerminatorsPattern;let $e=0,de=[],ge=[];const we=[],W=[];Object.freeze(W);let J;function K(){return de}function k(oe){const he=ar(oe),ve=ge[he];return ve===void 0?W:ve}const F=oe=>{if(we.length===1&&oe.tokenType.PUSH_MODE===void 0){const he=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);G.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:he})}else{we.pop();const he=Nr(we);de=this.patternIdxToConfig[he],ge=this.charCodeToPatternIdxToConfig[he],$e=de.length;const ve=this.canModeBeOptimized[he]&&this.config.safeMode===!1;ge&&ve?J=k:J=K}};function fe(oe){we.push(oe),ge=this.charCodeToPatternIdxToConfig[oe],de=this.patternIdxToConfig[oe],$e=de.length,$e=de.length;const he=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;ge&&he?J=k:J=K}fe.call(this,n);let te;const ye=this.config.recoveryEnabled;for(;M<P;){h=null;const oe=_.charCodeAt(M),he=J(oe),ve=he.length;for(s=0;s<ve;s++){te=he[s];const pe=te.pattern;m=null;const Le=te.short;if(Le!==!1?oe===Le&&(h=pe):te.isCustom===!0?(b=pe.exec(_,M,D,We),b!==null?(h=b[0],b.payload!==void 0&&(m=b.payload)):h=null):(this.updateLastIndex(pe,M),h=this.match(pe,e,M)),h!==null){if(f=te.longerAlt,f!==void 0){const kt=f.length;for(l=0;l<kt;l++){const jt=de[f[l]],Ft=jt.pattern;if(g=null,jt.isCustom===!0?(b=Ft.exec(_,M,D,We),b!==null?(c=b[0],b.payload!==void 0&&(g=b.payload)):c=null):(this.updateLastIndex(Ft,M),c=this.match(Ft,e,M)),c&&c.length>h.length){h=c,m=g,te=jt;break}}}break}}if(h!==null){if(y=h.length,S=te.group,S!==void 0&&(x=te.tokenTypeIdx,A=this.createTokenInstance(h,M,x,te.tokenType,ke,ce,y),this.handlePayload(A,m),S===!1?z=this.addToken(D,z,A):We[S].push(A)),e=this.chopInput(e,y),M=M+y,ce=this.computeNewColumn(ce,y),et===!0&&te.canLineTerminator===!0){let pe=0,Le,kt;Fe.lastIndex=0;do Le=Fe.test(h),Le===!0&&(kt=Fe.lastIndex-1,pe++);while(Le===!0);pe!==0&&(ke=ke+pe,ce=y-kt,this.updateTokenEndLineColumnLocation(A,S,kt,pe,ke,ce,y))}this.handleModes(te,F,fe,A)}else{const pe=M,Le=ke,kt=ce;let jt=ye===!1;for(;jt===!1&&M<P;)for(e=this.chopInput(e,1),M++,a=0;a<$e;a++){const Ft=de[a],cr=Ft.pattern,vi=Ft.short;if(vi!==!1?_.charCodeAt(M)===vi&&(jt=!0):Ft.isCustom===!0?jt=cr.exec(_,M,D,We)!==null:(this.updateLastIndex(cr,M),jt=cr.exec(e)!==null),jt===!0)break}if(R=M-pe,ce=this.computeNewColumn(ce,R),j=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,pe,R,Le,kt,Nr(we)),G.push({offset:pe,line:Le,column:kt,length:R,message:j}),ye===!1)break}}return this.hasCustom||(D.length=z),{tokens:D,groups:We,errors:G}}handleModes(e,n,s,a){if(e.pop===!0){const l=e.push;n(a),l!==void 0&&s.call(this,l)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,s,a,l,c,f){let h,m;n!==void 0&&(h=s===f-1,m=h?-1:0,a===1&&h===!0||(e.endLine=l+m,e.endColumn=c-1+-m))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,s,a){return{image:e,startOffset:n,tokenTypeIdx:s,tokenType:a}}createStartOnlyToken(e,n,s,a,l,c){return{image:e,startOffset:n,startLine:l,startColumn:c,tokenTypeIdx:s,tokenType:a}}createFullToken(e,n,s,a,l,c,f){return{image:e,startOffset:n,endOffset:n+f-1,startLine:l,endLine:l,startColumn:c,endColumn:c+f-1,tokenTypeIdx:s,tokenType:a}}addTokenUsingPush(e,n,s){return e.push(s),n}addTokenUsingMemberAccess(e,n,s){return e[n]=s,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,s){return e.test(n)===!0?n.substring(s,e.lastIndex):null}matchWithExec(e,n){const s=e.exec(n);return s!==null?s[0]:null}}dt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";dt.NA=/NOT_APPLICABLE/;function vs(r){return Tg(r)?r.LABEL:r.name}function Tg(r){return xt(r.LABEL)&&r.LABEL!==""}const s1="parent",Qp="categories",Zp="label",Jp="group",em="push_mode",tm="pop_mode",nm="longer_alt",rm="line_breaks",im="start_chars_hint";function Se(r){return o1(r)}function o1(r){const e=r.pattern,n={};if(n.name=r.name,Ln(e)||(n.PATTERN=e),se(r,s1))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return se(r,Qp)&&(n.CATEGORIES=r[Qp]),Ps([n]),se(r,Zp)&&(n.LABEL=r[Zp]),se(r,Jp)&&(n.GROUP=r[Jp]),se(r,tm)&&(n.POP_MODE=r[tm]),se(r,em)&&(n.PUSH_MODE=r[em]),se(r,nm)&&(n.LONGER_ALT=r[nm]),se(r,rm)&&(n.LINE_BREAKS=r[rm]),se(r,im)&&(n.START_CHARS_HINT=r[im]),n}const Or=Se({name:"EOF",pattern:dt.NA});Ps([Or]);function zc(r,e,n,s,a,l,c,f){return{image:e,startOffset:n,endOffset:s,startLine:a,endLine:l,startColumn:c,endColumn:f,tokenTypeIdx:r.tokenTypeIdx,tokenType:r}}function a1(r,e){return _s(r,e)}const xg={buildMismatchTokenMessage({expected:r,actual:e,previous:n,ruleName:s}){return`Expecting ${Tg(r)?`--> ${vs(r)} <--`:`token of type --> ${r.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:r,ruleName:e}){return"Redundant input, expecting EOF but found: "+r.image},buildNoViableAltMessage({expectedPathsPerAlt:r,actual:e,previous:n,customUserDescription:s,ruleName:a}){const l="Expecting: ",f=`
but found: '`+an(e).image+"'";if(s)return l+s+f;{const h=Mt(r,(S,x)=>S.concat(x),[]),m=ee(h,S=>`[${ee(S,x=>vs(x)).join(", ")}]`),y=`one of these possible Token sequences:
${ee(m,(S,x)=>`  ${x+1}. ${S}`).join(`
`)}`;return l+y+f}},buildEarlyExitMessage({expectedIterationPaths:r,actual:e,customUserDescription:n,ruleName:s}){const a="Expecting: ",c=`
but found: '`+an(e).image+"'";if(n)return a+n+c;{const h=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(r,m=>`[${ee(m,g=>vs(g)).join(",")}]`).join(" ,")}>`;return a+h+c}}};Object.freeze(xg);const l1={buildRuleNotFoundError(r,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+r.name+"<-"}},kr={buildDuplicateFoundError(r,e){function n(g){return g instanceof je?g.terminalType.name:g instanceof bt?g.nonTerminalName:""}const s=r.name,a=an(e),l=a.idx,c=gn(a),f=n(a),h=l>0;let m=`->${c}${h?l:""}<- ${f?`with argument: ->${f}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return m=m.replace(/[ \t]+/g," "),m=m.replace(/\s\s+/g,`
`),m},buildNamespaceConflictError(r){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${r.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(r){const e=ee(r.prefixPath,a=>vs(a)).join(", "),n=r.alternation.idx===0?"":r.alternation.idx;return`Ambiguous alternatives: <${r.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(r){const e=ee(r.prefixPath,a=>vs(a)).join(", "),n=r.alternation.idx===0?"":r.alternation.idx;let s=`Ambiguous Alternatives Detected: <${r.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(r){let e=gn(r.repetition);return r.repetition.idx!==0&&(e+=r.repetition.idx),`The repetition <${e}> within Rule <${r.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(r){return"deprecated"},buildEmptyAlternationError(r){return`Ambiguous empty alternative: <${r.emptyChoiceIdx+1}> in <OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(r){return`An Alternation cannot have more than 256 alternatives:
<OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
 has ${r.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(r){const e=r.topLevelRule.name,n=ee(r.leftRecursionPath,l=>l.name),s=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(r){return"deprecated"},buildDuplicateRuleNameError(r){let e;return r.topLevelRule instanceof mi?e=r.topLevelRule.name:e=r.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${r.grammarName}<-`}};function u1(r,e){const n=new c1(r,e);return n.resolveRefs(),n.errors}class c1 extends gi{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){ae(Xe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class f1 extends Pa{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=st(this.path.ruleStack).reverse(),this.occurrenceStack=st(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const a=n.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,a)}}updateExpectedNext(){Ne(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class d1 extends f1{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const a=n.concat(s),l=new wt({definition:a});this.possibleTokTypes=Os(l),this.found=!0}}}class Ma extends Pa{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class h1 extends Ma{walkMany(e,n,s){if(e.idx===this.occurrence){const a=an(n.concat(s));this.result.isEndOfRule=a===void 0,a instanceof je&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkMany(e,n,s)}}class sm extends Ma{walkManySep(e,n,s){if(e.idx===this.occurrence){const a=an(n.concat(s));this.result.isEndOfRule=a===void 0,a instanceof je&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkManySep(e,n,s)}}class p1 extends Ma{walkAtLeastOne(e,n,s){if(e.idx===this.occurrence){const a=an(n.concat(s));this.result.isEndOfRule=a===void 0,a instanceof je&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOne(e,n,s)}}class om extends Ma{walkAtLeastOneSep(e,n,s){if(e.idx===this.occurrence){const a=an(n.concat(s));this.result.isEndOfRule=a===void 0,a instanceof je&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else super.walkAtLeastOneSep(e,n,s)}}function uc(r,e,n=[]){n=st(n);let s=[],a=0;function l(f){return f.concat(rt(r,a+1))}function c(f){const h=uc(l(f),e,n);return s.concat(h)}for(;n.length<e&&a<r.length;){const f=r[a];if(f instanceof wt)return c(f.definition);if(f instanceof bt)return c(f.definition);if(f instanceof Tt)s=c(f.definition);else if(f instanceof xn){const h=f.definition.concat([new qe({definition:f.definition})]);return c(h)}else if(f instanceof wn){const h=[new wt({definition:f.definition}),new qe({definition:[new je({terminalType:f.separator})].concat(f.definition)})];return c(h)}else if(f instanceof un){const h=f.definition.concat([new qe({definition:[new je({terminalType:f.separator})].concat(f.definition)})]);s=c(h)}else if(f instanceof qe){const h=f.definition.concat([new qe({definition:f.definition})]);s=c(h)}else{if(f instanceof cn)return ae(f.definition,h=>{Ne(h.definition)===!1&&(s=c(h.definition))}),s;if(f instanceof je)n.push(f.terminalType);else throw Error("non exhaustive match")}a++}return s.push({partialPath:n,suffixDef:rt(r,a)}),s}function wg(r,e,n,s){const a="EXIT_NONE_TERMINAL",l=[a],c="EXIT_ALTERNATIVE";let f=!1;const h=e.length,m=h-s-1,g=[],y=[];for(y.push({idx:-1,def:r,ruleStack:[],occurrenceStack:[]});!Ne(y);){const S=y.pop();if(S===c){f&&Nr(y).idx<=m&&y.pop();continue}const x=S.def,A=S.idx,R=S.ruleStack,j=S.occurrenceStack;if(Ne(x))continue;const b=x[0];if(b===a){const _={idx:A,def:rt(x),ruleStack:ws(R),occurrenceStack:ws(j)};y.push(_)}else if(b instanceof je)if(A<h-1){const _=A+1,P=e[_];if(n(P,b.terminalType)){const M={idx:_,def:rt(x),ruleStack:R,occurrenceStack:j};y.push(M)}}else if(A===h-1)g.push({nextTokenType:b.terminalType,nextTokenOccurrence:b.idx,ruleStack:R,occurrenceStack:j}),f=!0;else throw Error("non exhaustive match");else if(b instanceof bt){const _=st(R);_.push(b.nonTerminalName);const P=st(j);P.push(b.idx);const M={idx:A,def:b.definition.concat(l,rt(x)),ruleStack:_,occurrenceStack:P};y.push(M)}else if(b instanceof Tt){const _={idx:A,def:rt(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P={idx:A,def:b.definition.concat(rt(x)),ruleStack:R,occurrenceStack:j};y.push(P)}else if(b instanceof xn){const _=new qe({definition:b.definition,idx:b.idx}),P=b.definition.concat([_],rt(x)),M={idx:A,def:P,ruleStack:R,occurrenceStack:j};y.push(M)}else if(b instanceof wn){const _=new je({terminalType:b.separator}),P=new qe({definition:[_].concat(b.definition),idx:b.idx}),M=b.definition.concat([P],rt(x)),z={idx:A,def:M,ruleStack:R,occurrenceStack:j};y.push(z)}else if(b instanceof un){const _={idx:A,def:rt(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new je({terminalType:b.separator}),M=new qe({definition:[P].concat(b.definition),idx:b.idx}),z=b.definition.concat([M],rt(x)),L={idx:A,def:z,ruleStack:R,occurrenceStack:j};y.push(L)}else if(b instanceof qe){const _={idx:A,def:rt(x),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new qe({definition:b.definition,idx:b.idx}),M=b.definition.concat([P],rt(x)),z={idx:A,def:M,ruleStack:R,occurrenceStack:j};y.push(z)}else if(b instanceof cn)for(let _=b.definition.length-1;_>=0;_--){const P=b.definition[_],M={idx:A,def:P.definition.concat(rt(x)),ruleStack:R,occurrenceStack:j};y.push(M),y.push(c)}else if(b instanceof wt)y.push({idx:A,def:b.definition.concat(rt(x)),ruleStack:R,occurrenceStack:j});else if(b instanceof mi)y.push(m1(b,A,R,j));else throw Error("non exhaustive match")}return g}function m1(r,e,n,s){const a=st(n);a.push(r.name);const l=st(s);return l.push(1),{idx:e,def:r.definition,ruleStack:a,occurrenceStack:l}}var De;(function(r){r[r.OPTION=0]="OPTION",r[r.REPETITION=1]="REPETITION",r[r.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",r[r.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",r[r.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",r[r.ALTERNATION=5]="ALTERNATION"})(De||(De={}));function kg(r){if(r instanceof Tt||r==="Option")return De.OPTION;if(r instanceof qe||r==="Repetition")return De.REPETITION;if(r instanceof xn||r==="RepetitionMandatory")return De.REPETITION_MANDATORY;if(r instanceof wn||r==="RepetitionMandatoryWithSeparator")return De.REPETITION_MANDATORY_WITH_SEPARATOR;if(r instanceof un||r==="RepetitionWithSeparator")return De.REPETITION_WITH_SEPARATOR;if(r instanceof cn||r==="Alternation")return De.ALTERNATION;throw Error("non exhaustive match")}function g1(r,e,n,s,a,l){const c=Vc(r,e,n),f=Rg(c)?pa:_s;return l(c,s,f,a)}function v1(r,e,n,s,a,l){const c=Wc(r,e,a,n),f=Rg(c)?pa:_s;return l(c[0],f,s)}function y1(r,e,n,s){const a=r.length,l=sn(r,c=>sn(c,f=>f.length===1));if(e)return function(c){const f=ee(c,h=>h.GATE);for(let h=0;h<a;h++){const m=r[h],g=m.length,y=f[h];if(!(y!==void 0&&y.call(this)===!1))e:for(let S=0;S<g;S++){const x=m[S],A=x.length;for(let R=0;R<A;R++){const j=this.LA(R+1);if(n(j,x[R])===!1)continue e}return h}}};if(l&&!s){const c=ee(r,h=>rn(h)),f=Mt(c,(h,m,g)=>(ae(m,y=>{se(h,y.tokenTypeIdx)||(h[y.tokenTypeIdx]=g),ae(y.categoryMatches,S=>{se(h,S)||(h[S]=g)})}),h),{});return function(){const h=this.LA(1);return f[h.tokenTypeIdx]}}else return function(){for(let c=0;c<a;c++){const f=r[c],h=f.length;e:for(let m=0;m<h;m++){const g=f[m],y=g.length;for(let S=0;S<y;S++){const x=this.LA(S+1);if(n(x,g[S])===!1)continue e}return c}}}}function S1(r,e,n){const s=sn(r,l=>l.length===1),a=r.length;if(s&&!n){const l=rn(r);if(l.length===1&&Ne(l[0].categoryMatches)){const f=l[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===f}}else{const c=Mt(l,(f,h,m)=>(f[h.tokenTypeIdx]=!0,ae(h.categoryMatches,g=>{f[g]=!0}),f),[]);return function(){const f=this.LA(1);return c[f.tokenTypeIdx]===!0}}}else return function(){e:for(let l=0;l<a;l++){const c=r[l],f=c.length;for(let h=0;h<f;h++){const m=this.LA(h+1);if(e(m,c[h])===!1)continue e}return!0}return!1}}class E1 extends Pa{constructor(e,n,s){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,s,a){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=s.concat(a),!0):!1}walkOption(e,n,s){this.checkIsTarget(e,De.OPTION,n,s)||super.walkOption(e,n,s)}walkAtLeastOne(e,n,s){this.checkIsTarget(e,De.REPETITION_MANDATORY,n,s)||super.walkOption(e,n,s)}walkAtLeastOneSep(e,n,s){this.checkIsTarget(e,De.REPETITION_MANDATORY_WITH_SEPARATOR,n,s)||super.walkOption(e,n,s)}walkMany(e,n,s){this.checkIsTarget(e,De.REPETITION,n,s)||super.walkOption(e,n,s)}walkManySep(e,n,s){this.checkIsTarget(e,De.REPETITION_WITH_SEPARATOR,n,s)||super.walkOption(e,n,s)}}class Ag extends gi{constructor(e,n,s){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=s,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,De.OPTION)}visitRepetition(e){this.checkIsTarget(e,De.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,De.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,De.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,De.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,De.ALTERNATION)}}function am(r){const e=new Array(r);for(let n=0;n<r;n++)e[n]=[];return e}function qu(r){let e=[""];for(let n=0;n<r.length;n++){const s=r[n],a=[];for(let l=0;l<e.length;l++){const c=e[l];a.push(c+"_"+s.tokenTypeIdx);for(let f=0;f<s.categoryMatches.length;f++){const h="_"+s.categoryMatches[f];a.push(c+h)}}e=a}return e}function T1(r,e,n){for(let s=0;s<r.length;s++){if(s===n)continue;const a=r[s];for(let l=0;l<e.length;l++){const c=e[l];if(a[c]===!0)return!1}}return!0}function Cg(r,e){const n=ee(r,c=>uc([c],1)),s=am(n.length),a=ee(n,c=>{const f={};return ae(c,h=>{const m=qu(h.partialPath);ae(m,g=>{f[g]=!0})}),f});let l=n;for(let c=1;c<=e;c++){const f=l;l=am(f.length);for(let h=0;h<f.length;h++){const m=f[h];for(let g=0;g<m.length;g++){const y=m[g].partialPath,S=m[g].suffixDef,x=qu(y);if(T1(a,x,h)||Ne(S)||y.length===e){const R=s[h];if(cc(R,y)===!1){R.push(y);for(let j=0;j<x.length;j++){const b=x[j];a[h][b]=!0}}}else{const R=uc(S,c+1,y);l[h]=l[h].concat(R),ae(R,j=>{const b=qu(j.partialPath);ae(b,_=>{a[h][_]=!0})})}}}}return s}function Vc(r,e,n,s){const a=new Ag(r,De.ALTERNATION,s);return e.accept(a),Cg(a.result,n)}function Wc(r,e,n,s){const a=new Ag(r,n);e.accept(a);const l=a.result,f=new E1(e,r,n).startWalking(),h=new wt({definition:l}),m=new wt({definition:f});return Cg([h,m],s)}function cc(r,e){e:for(let n=0;n<r.length;n++){const s=r[n];if(s.length===e.length){for(let a=0;a<s.length;a++){const l=e[a],c=s[a];if((l===c||c.categoryMatchesMap[l.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function x1(r,e){return r.length<e.length&&sn(r,(n,s)=>{const a=e[s];return n===a||a.categoryMatchesMap[n.tokenTypeIdx]})}function Rg(r){return sn(r,e=>sn(e,n=>sn(n,s=>Ne(s.categoryMatches))))}function w1(r){const e=r.lookaheadStrategy.validate({rules:r.rules,tokenTypes:r.tokenTypes,grammarName:r.grammarName});return ee(e,n=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},n))}function k1(r,e,n,s){const a=Gt(r,h=>A1(h,n)),l=F1(r,e,n),c=Gt(r,h=>L1(h,n)),f=Gt(r,h=>N1(h,r,s,n));return a.concat(l,c,f)}function A1(r,e){const n=new R1;r.accept(n);const s=n.allProductions,a=FA(s,C1),l=ln(a,f=>f.length>1);return ee(Xe(l),f=>{const h=an(f),m=e.buildDuplicateFoundError(r,f),g=gn(h),y={message:m,type:ht.DUPLICATE_PRODUCTIONS,ruleName:r.name,dslName:g,occurrence:h.idx},S=Ng(h);return S&&(y.parameter=S),y})}function C1(r){return`${gn(r)}_#_${r.idx}_#_${Ng(r)}`}function Ng(r){return r instanceof je?r.terminalType.name:r instanceof bt?r.nonTerminalName:""}class R1 extends gi{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function N1(r,e,n,s){const a=[];if(Mt(e,(c,f)=>f.name===r.name?c+1:c,0)>1){const c=s.buildDuplicateRuleNameError({topLevelRule:r,grammarName:n});a.push({message:c,type:ht.DUPLICATE_RULE_NAME,ruleName:r.name})}return a}function I1(r,e,n){const s=[];let a;return pt(e,r)||(a=`Invalid rule override, rule: ->${r}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,s.push({message:a,type:ht.INVALID_RULE_OVERRIDE,ruleName:r})),s}function Ig(r,e,n,s=[]){const a=[],l=na(e.definition);if(Ne(l))return[];{const c=r.name;pt(l,r)&&a.push({message:n.buildLeftRecursionError({topLevelRule:r,leftRecursionPath:s}),type:ht.LEFT_RECURSION,ruleName:c});const h=Oa(l,s.concat([r])),m=Gt(h,g=>{const y=st(s);return y.push(g),Ig(r,g,n,y)});return a.concat(m)}}function na(r){let e=[];if(Ne(r))return e;const n=an(r);if(n instanceof bt)e.push(n.referencedRule);else if(n instanceof wt||n instanceof Tt||n instanceof xn||n instanceof wn||n instanceof un||n instanceof qe)e=e.concat(na(n.definition));else if(n instanceof cn)e=rn(ee(n.definition,l=>na(l.definition)));else if(!(n instanceof je))throw Error("non exhaustive match");const s=ca(n),a=r.length>1;if(s&&a){const l=rt(r);return e.concat(na(l))}else return e}class Gc extends gi{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function O1(r,e){const n=new Gc;r.accept(n);const s=n.alternations;return Gt(s,l=>{const c=ws(l.definition);return Gt(c,(f,h)=>{const m=wg([f],[],_s,1);return Ne(m)?[{message:e.buildEmptyAlternationError({topLevelRule:r,alternation:l,emptyChoiceIdx:h}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:r.name,occurrence:l.idx,alternative:h+1}]:[]})})}function _1(r,e,n){const s=new Gc;r.accept(s);let a=s.alternations;return a=_a(a,c=>c.ignoreAmbiguities===!0),Gt(a,c=>{const f=c.idx,h=c.maxLookahead||e,m=Vc(f,r,h,c),g=b1(m,c,r,n),y=j1(m,c,r,n);return g.concat(y)})}class P1 extends gi{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function L1(r,e){const n=new Gc;r.accept(n);const s=n.alternations;return Gt(s,l=>l.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:r,alternation:l}),type:ht.TOO_MANY_ALTS,ruleName:r.name,occurrence:l.idx}]:[])}function M1(r,e,n){const s=[];return ae(r,a=>{const l=new P1;a.accept(l);const c=l.allProductions;ae(c,f=>{const h=kg(f),m=f.maxLookahead||e,g=f.idx,S=Wc(g,a,h,m)[0];if(Ne(rn(S))){const x=n.buildEmptyRepetitionError({topLevelRule:a,repetition:f});s.push({message:x,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:a.name})}})}),s}function b1(r,e,n,s){const a=[],l=Mt(r,(f,h,m)=>(e.definition[m].ignoreAmbiguities===!0||ae(h,g=>{const y=[m];ae(r,(S,x)=>{m!==x&&cc(S,g)&&e.definition[x].ignoreAmbiguities!==!0&&y.push(x)}),y.length>1&&!cc(a,g)&&(a.push(g),f.push({alts:y,path:g}))}),f),[]);return ee(l,f=>{const h=ee(f.alts,g=>g+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:ht.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:f.alts}})}function j1(r,e,n,s){const a=Mt(r,(c,f,h)=>{const m=ee(f,g=>({idx:h,path:g}));return c.concat(m)},[]);return Is(Gt(a,c=>{if(e.definition[c.idx].ignoreAmbiguities===!0)return[];const h=c.idx,m=c.path,g=Xt(a,S=>e.definition[S.idx].ignoreAmbiguities!==!0&&S.idx<h&&x1(S.path,m));return ee(g,S=>{const x=[S.idx+1,h+1],A=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:x,prefixPath:S.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:A,alternatives:x}})}))}function F1(r,e,n){const s=[],a=ee(e,l=>l.name);return ae(r,l=>{const c=l.name;if(pt(a,c)){const f=n.buildNamespaceConflictError(l);s.push({message:f,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:c})}}),s}function $1(r){const e=$c(r,{errMsgProvider:l1}),n={};return ae(r.rules,s=>{n[s.name]=s}),u1(n,e.errMsgProvider)}function U1(r){return r=$c(r,{errMsgProvider:kr}),k1(r.rules,r.tokenTypes,r.errMsgProvider,r.grammarName)}const Og="MismatchedTokenException",_g="NoViableAltException",Pg="EarlyExitException",Lg="NotAllInputParsedException",Mg=[Og,_g,Pg,Lg];Object.freeze(Mg);function ma(r){return pt(Mg,r.name)}class ba extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class bg extends ba{constructor(e,n,s){super(e,n),this.previousToken=s,this.name=Og}}class D1 extends ba{constructor(e,n,s){super(e,n),this.previousToken=s,this.name=_g}}class B1 extends ba{constructor(e,n){super(e,n),this.name=Lg}}class z1 extends ba{constructor(e,n,s){super(e,n),this.previousToken=s,this.name=Pg}}const Qu={},jg="InRuleRecoveryException";class V1 extends Error{constructor(e){super(e),this.name=jg}}class W1{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=se(e,"recoveryEnabled")?e.recoveryEnabled:Mn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=G1)}getTokenToInsert(e){const n=zc(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,s,a){const l=this.findReSyncTokenType(),c=this.exportLexerState(),f=[];let h=!1;const m=this.LA(1);let g=this.LA(1);const y=()=>{const S=this.LA(0),x=this.errorMessageProvider.buildMismatchTokenMessage({expected:a,actual:m,previous:S,ruleName:this.getCurrRuleFullName()}),A=new bg(x,m,this.LA(0));A.resyncedTokens=ws(f),this.SAVE_ERROR(A)};for(;!h;)if(this.tokenMatcher(g,a)){y();return}else if(s.call(this)){y(),e.apply(this,n);return}else this.tokenMatcher(g,l)?h=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,f));this.importLexerState(c)}shouldInRepetitionRecoveryBeTried(e,n,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const s=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new V1("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ne(n))return!1;const s=this.LA(1);return pi(n,l=>this.tokenMatcher(s,l))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(n);return pt(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),s=2;for(;;){const a=pi(e,l=>a1(n,l));if(a!==void 0)return a;n=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Qu;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return ee(e,(s,a)=>a===0?Qu:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:n[a],inRule:this.shortRuleNameToFullName(e[a-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return rn(e)}getFollowSetFromFollowKey(e){if(e===Qu)return[Or];const n=e.ruleName+e.idxInCallingRule+dg+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Or)||n.push(e),n}reSyncTo(e){const n=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,n);return ws(n)}attemptInRepetitionRecovery(e,n,s,a,l,c,f){}getCurrentGrammarPath(e,n){const s=this.getHumanReadableRuleStack(),a=st(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:a,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function G1(r,e,n,s,a,l,c){const f=this.getKeyForAutomaticLookahead(s,a);let h=this.firstAfterRepMap[f];if(h===void 0){const S=this.getCurrRuleFullName(),x=this.getGAstProductions()[S];h=new l(x,a).startWalking(),this.firstAfterRepMap[f]=h}let m=h.token,g=h.occurrence;const y=h.isEndOfRule;this.RULE_STACK.length===1&&y&&m===void 0&&(m=Or,g=1),!(m===void 0||g===void 0)&&this.shouldInRepetitionRecoveryBeTried(m,g,c)&&this.tryInRepetitionRecovery(r,e,n,m)}const K1=4,ur=8,Fg=1<<ur,$g=2<<ur,fc=3<<ur,dc=4<<ur,hc=5<<ur,ra=6<<ur;function Zu(r,e,n){return n|e|r}class H1{constructor(e){var n;this.maxLookahead=(n=e?.maxLookahead)!==null&&n!==void 0?n:Mn.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(Ne(n)){const s=this.validateEmptyOrAlternatives(e.rules),a=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),l=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...s,...a,...l]}return n}validateNoLeftRecursion(e){return Gt(e,n=>Ig(n,n,kr))}validateEmptyOrAlternatives(e){return Gt(e,n=>O1(n,kr))}validateAmbiguousAlternationAlternatives(e,n){return Gt(e,s=>_1(s,n,kr))}validateSomeNonEmptyLookaheadPath(e,n){return M1(e,n,kr)}buildLookaheadForAlternation(e){return g1(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,y1)}buildLookaheadForOptional(e){return v1(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,kg(e.prodType),S1)}}class Y1{initLooksAhead(e){this.dynamicTokensEnabled=se(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Mn.dynamicTokensEnabled,this.maxLookahead=se(e,"maxLookahead")?e.maxLookahead:Mn.maxLookahead,this.lookaheadStrategy=se(e,"lookaheadStrategy")?e.lookaheadStrategy:new H1({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:s,repetition:a,option:l,repetitionMandatory:c,repetitionMandatoryWithSeparator:f,repetitionWithSeparator:h}=q1(n);ae(s,m=>{const g=m.idx===0?"":m.idx;this.TRACE_INIT(`${gn(m)}${g}`,()=>{const y=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:m.idx,rule:n,maxLookahead:m.maxLookahead||this.maxLookahead,hasPredicates:m.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),S=Zu(this.fullRuleNameToShort[n.name],Fg,m.idx);this.setLaFuncCache(S,y)})}),ae(a,m=>{this.computeLookaheadFunc(n,m.idx,fc,"Repetition",m.maxLookahead,gn(m))}),ae(l,m=>{this.computeLookaheadFunc(n,m.idx,$g,"Option",m.maxLookahead,gn(m))}),ae(c,m=>{this.computeLookaheadFunc(n,m.idx,dc,"RepetitionMandatory",m.maxLookahead,gn(m))}),ae(f,m=>{this.computeLookaheadFunc(n,m.idx,ra,"RepetitionMandatoryWithSeparator",m.maxLookahead,gn(m))}),ae(h,m=>{this.computeLookaheadFunc(n,m.idx,hc,"RepetitionWithSeparator",m.maxLookahead,gn(m))})})})}computeLookaheadFunc(e,n,s,a,l,c){this.TRACE_INIT(`${c}${n===0?"":n}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:l||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:a}),h=Zu(this.fullRuleNameToShort[e.name],s,n);this.setLaFuncCache(h,f)})}getKeyForAutomaticLookahead(e,n){const s=this.getLastExplicitRuleShortName();return Zu(s,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class X1 extends gi{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const qo=new X1;function q1(r){qo.reset(),r.accept(qo);const e=qo.dslMethods;return qo.reset(),e}function lm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.endOffset=e.endOffset):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset)}function um(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.startColumn=e.startColumn,r.startLine=e.startLine,r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine)}function Q1(r,e,n){r.children[n]===void 0?r.children[n]=[e]:r.children[n].push(e)}function Z1(r,e,n){r.children[e]===void 0?r.children[e]=[n]:r.children[e].push(n)}const J1="name";function Ug(r,e){Object.defineProperty(r,J1,{enumerable:!1,configurable:!0,writable:!1,value:e})}function eR(r,e){const n=Yt(r),s=n.length;for(let a=0;a<s;a++){const l=n[a],c=r[l],f=c.length;for(let h=0;h<f;h++){const m=c[h];m.tokenTypeIdx===void 0&&this[m.name](m.children,e)}}}function tR(r,e){const n=function(){};Ug(n,r+"BaseSemantics");const s={visit:function(a,l){if(Te(a)&&(a=a[0]),!Ln(a))return this[a.name](a.children,l)},validateVisitor:function(){const a=rR(this,e);if(!Ne(a)){const l=ee(a,c=>c.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${l.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=s,n.prototype.constructor=n,n._RULE_NAMES=e,n}function nR(r,e,n){const s=function(){};Ug(s,r+"BaseSemanticsWithDefaults");const a=Object.create(n.prototype);return ae(e,l=>{a[l]=eR}),s.prototype=a,s.prototype.constructor=s,s}var pc;(function(r){r[r.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",r[r.MISSING_METHOD=1]="MISSING_METHOD"})(pc||(pc={}));function rR(r,e){return iR(r,e)}function iR(r,e){const n=Xt(e,a=>bn(r[a])===!1),s=ee(n,a=>({msg:`Missing visitor method: <${a}> on ${r.constructor.name} CST Visitor.`,type:pc.MISSING_METHOD,methodName:a}));return Is(s)}class sR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=se(e,"nodeLocationTracking")?e.nodeLocationTracking:Mn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Ye,this.cstFinallyStateUpdate=Ye,this.cstPostTerminal=Ye,this.cstPostNonTerminal=Ye,this.cstPostRule=Ye;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=um,this.setNodeLocationFromNode=um,this.cstPostRule=Ye,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Ye,this.setNodeLocationFromNode=Ye,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=lm,this.setNodeLocationFromNode=lm,this.cstPostRule=Ye,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Ye,this.setNodeLocationFromNode=Ye,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Ye,this.setNodeLocationFromNode=Ye,this.cstPostRule=Ye,this.setInitialNodeLocation=Ye;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),s=e.location;s.startOffset<=n.startOffset?(s.endOffset=n.endOffset,s.endLine=n.endLine,s.endColumn=n.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),s=e.location;s.startOffset<=n.startOffset?s.endOffset=n.endOffset:s.startOffset=NaN}cstPostTerminal(e,n){const s=this.CST_STACK[this.CST_STACK.length-1];Q1(s,n,e),this.setNodeLocationFromToken(s.location,n)}cstPostNonTerminal(e,n){const s=this.CST_STACK[this.CST_STACK.length-1];Z1(s,n,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(Ln(this.baseCstVisitorConstructor)){const e=tR(this.className,Yt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ln(this.baseCstVisitorWithDefaultsConstructor)){const e=nR(this.className,Yt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class oR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):va}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?va:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class aR{ACTION(e){return e.call(this)}consume(e,n,s){return this.consumeInternal(n,e,s)}subrule(e,n,s){return this.subruleInternal(n,e,s)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,s=ya){if(pt(this.definedRulesNames,e)){const c={message:kr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(c)}this.definedRulesNames.push(e);const a=this.defineRule(e,n,s);return this[e]=a,a}OVERRIDE_RULE(e,n,s=ya){const a=I1(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(a);const l=this.defineRule(e,n,s);return this[e]=l,l}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,n),!0}catch(a){if(ma(a))return!1;throw a}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return lC(Xe(this.gastProductionsCache))}}class lR{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=pa,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},se(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Te(e)){if(Ne(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Te(e))this.tokensMap=Mt(e,(l,c)=>(l[c.name]=c,l),{});else if(se(e,"modes")&&sn(rn(Xe(e.modes)),r1)){const l=rn(Xe(e.modes)),c=Uc(l);this.tokensMap=Mt(c,(f,h)=>(f[h.name]=h,f),{})}else if(Ht(e))this.tokensMap=st(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Or;const s=se(e,"modes")?rn(Xe(e.modes)):Xe(e),a=sn(s,l=>Ne(l.categoryMatches));this.tokenMatcher=a?pa:_s,Ps(Xe(this.tokensMap))}defineRule(e,n,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const a=se(s,"resyncEnabled")?s.resyncEnabled:ya.resyncEnabled,l=se(s,"recoveryValueFunc")?s.recoveryValueFunc:ya.recoveryValueFunc,c=this.ruleShortNameIdx<<K1+ur;this.ruleShortNameIdx++,this.shortRuleNameToFull[c]=e,this.fullRuleNameToShort[e]=c;let f;return this.outputCst===!0?f=function(...g){try{this.ruleInvocationStateUpdate(c,e,this.subruleIdx),n.apply(this,g);const y=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(y),y}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}}:f=function(...g){try{return this.ruleInvocationStateUpdate(c,e,this.subruleIdx),n.apply(this,g)}catch(y){return this.invokeRuleCatch(y,a,l)}finally{this.ruleFinallyStateUpdate()}},Object.assign(f,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,s){const a=this.RULE_STACK.length===1,l=n&&!this.isBackTracking()&&this.recoveryEnabled;if(ma(e)){const c=e;if(l){const f=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(f))if(c.resyncedTokens=this.reSyncTo(f),this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];return h.recoveredNode=!0,h}else return s(e);else{if(this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];h.recoveredNode=!0,c.partialCstResult=h}throw c}}else{if(a)return this.moveToTerminatedState(),s(e);throw c}}else throw e}optionInternal(e,n){const s=this.getKeyForAutomaticLookahead($g,n);return this.optionInternalLogic(e,n,s)}optionInternalLogic(e,n,s){let a=this.getLaFuncFromCache(s),l;if(typeof e!="function"){l=e.DEF;const c=e.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=e;if(a.call(this)===!0)return l.call(this)}atLeastOneInternal(e,n){const s=this.getKeyForAutomaticLookahead(dc,e);return this.atLeastOneInternalLogic(e,n,s)}atLeastOneInternalLogic(e,n,s){let a=this.getLaFuncFromCache(s),l;if(typeof n!="function"){l=n.DEF;const c=n.GATE;if(c!==void 0){const f=a;a=()=>c.call(this)&&f.call(this)}}else l=n;if(a.call(this)===!0){let c=this.doSingleRepetition(l);for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l)}else throw this.raiseEarlyExitException(e,De.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],a,dc,e,p1)}atLeastOneSepFirstInternal(e,n){const s=this.getKeyForAutomaticLookahead(ra,e);this.atLeastOneSepFirstInternalLogic(e,n,s)}atLeastOneSepFirstInternalLogic(e,n,s){const a=n.DEF,l=n.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,om],f,ra,e,om)}else throw this.raiseEarlyExitException(e,De.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const s=this.getKeyForAutomaticLookahead(fc,e);return this.manyInternalLogic(e,n,s)}manyInternalLogic(e,n,s){let a=this.getLaFuncFromCache(s),l;if(typeof n!="function"){l=n.DEF;const f=n.GATE;if(f!==void 0){const h=a;a=()=>f.call(this)&&h.call(this)}}else l=n;let c=!0;for(;a.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],a,fc,e,h1,c)}manySepFirstInternal(e,n){const s=this.getKeyForAutomaticLookahead(hc,e);this.manySepFirstInternalLogic(e,n,s)}manySepFirstInternalLogic(e,n,s){const a=n.DEF,l=n.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){a.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,a,sm],f,hc,e,sm)}}repetitionSepSecondInternal(e,n,s,a,l){for(;s();)this.CONSUME(n),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,s,a,l],s,ra,e,l)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const s=this.getKeyForAutomaticLookahead(Fg,n),a=Te(e)?e:e.DEF,c=this.getLaFuncFromCache(s).call(this,a);if(c!==void 0)return a[c].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new B1(n,e))}}subruleInternal(e,n,s){let a;try{const l=s!==void 0?s.ARGS:void 0;return this.subruleIdx=n,a=e.apply(this,l),this.cstPostNonTerminal(a,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),a}catch(l){throw this.subruleInternalError(l,s,e.ruleName)}}subruleInternalError(e,n,s){throw ma(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,n,s){let a;try{const l=this.LA(1);this.tokenMatcher(l,e)===!0?(this.consumeToken(),a=l):this.consumeInternalError(e,l,s)}catch(l){a=this.consumeInternalRecovery(e,n,l)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,a),a}consumeInternalError(e,n,s){let a;const l=this.LA(0);throw s!==void 0&&s.ERR_MSG?a=s.ERR_MSG:a=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:l,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new bg(a,n,l))}consumeInternalRecovery(e,n,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const a=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,a)}catch(l){throw l.name===jg?s:l}}else throw s}saveRecogState(){const e=this.errors,n=st(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Or)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class uR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=se(e,"errorMessageProvider")?e.errorMessageProvider:Mn.errorMessageProvider}SAVE_ERROR(e){if(ma(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:st(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return st(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,s){const a=this.getCurrRuleFullName(),l=this.getGAstProductions()[a],f=Wc(e,l,n,this.maxLookahead)[0],h=[];for(let g=1;g<=this.maxLookahead;g++)h.push(this.LA(g));const m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:h,previous:this.LA(0),customUserDescription:s,ruleName:a});throw this.SAVE_ERROR(new z1(m,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const s=this.getCurrRuleFullName(),a=this.getGAstProductions()[s],l=Vc(e,a,this.maxLookahead),c=[];for(let m=1;m<=this.maxLookahead;m++)c.push(this.LA(m));const f=this.LA(0),h=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:l,actual:c,previous:f,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new D1(h,this.LA(1),f))}}class cR{initContentAssist(){}computeContentAssist(e,n){const s=this.gastProductionsCache[e];if(Ln(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return wg([s],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=an(e.ruleStack),a=this.getGAstProductions()[n];return new d1(a,e).startWalking()}}const ja={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(ja);const cm=!0,fm=Math.pow(2,ur)-1,Dg=Se({name:"RECORDING_PHASE_TOKEN",pattern:dt.NA});Ps([Dg]);const Bg=zc(Dg,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Bg);const fR={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class dR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(s,a){return this.consumeInternalRecord(s,e,a)},this[`SUBRULE${n}`]=function(s,a){return this.subruleInternalRecord(s,e,a)},this[`OPTION${n}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${n}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${n}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${n}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${n}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${n}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,n,s){return this.consumeInternalRecord(n,e,s)},this.subrule=function(e,n,s){return this.subruleInternalRecord(n,e,s)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const s=n>0?n:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return va}topLevelRuleRecord(e,n){try{const s=new mi({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),n.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,n){return os.call(this,Tt,e,n)}atLeastOneInternalRecord(e,n){os.call(this,xn,n,e)}atLeastOneSepFirstInternalRecord(e,n){os.call(this,wn,n,e,cm)}manyInternalRecord(e,n){os.call(this,qe,n,e)}manySepFirstInternalRecord(e,n){os.call(this,un,n,e,cm)}orInternalRecord(e,n){return hR.call(this,e,n)}subruleInternalRecord(e,n,s){if(ga(n),!e||se(e,"ruleName")===!1){const f=new Error(`<SUBRULE${dm(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw f.KNOWN_RECORDER_ERROR=!0,f}const a=Nr(this.recordingProdStack),l=e.ruleName,c=new bt({idx:n,nonTerminalName:l,label:s?.LABEL,referencedRule:void 0});return a.definition.push(c),this.outputCst?fR:ja}consumeInternalRecord(e,n,s){if(ga(n),!Eg(e)){const c=new Error(`<CONSUME${dm(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const a=Nr(this.recordingProdStack),l=new je({idx:n,terminalType:e,label:s?.LABEL});return a.definition.push(l),Bg}}function os(r,e,n,s=!1){ga(n);const a=Nr(this.recordingProdStack),l=bn(e)?e:e.DEF,c=new r({definition:[],idx:n});return s&&(c.separator=e.SEP),se(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(c),l.call(this),a.definition.push(c),this.recordingProdStack.pop(),ja}function hR(r,e){ga(e);const n=Nr(this.recordingProdStack),s=Te(r)===!1,a=s===!1?r:r.DEF,l=new cn({definition:[],idx:e,ignoreAmbiguities:s&&r.IGNORE_AMBIGUITIES===!0});se(r,"MAX_LOOKAHEAD")&&(l.maxLookahead=r.MAX_LOOKAHEAD);const c=lg(a,f=>bn(f.GATE));return l.hasPredicates=c,n.definition.push(l),ae(a,f=>{const h=new wt({definition:[]});l.definition.push(h),se(f,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=f.IGNORE_AMBIGUITIES:se(f,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),f.ALT.call(this),this.recordingProdStack.pop()}),ja}function dm(r){return r===0?"":`${r}`}function ga(r){if(r<0||r>fm){const e=new Error(`Invalid DSL Method idx value: <${r}>
	Idx value must be a none negative value smaller than ${fm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class pR{initPerformanceTracer(e){if(se(e,"traceInitPerf")){const n=e.traceInitPerf,s=typeof n=="number";this.traceInitMaxIdent=s?n:1/0,this.traceInitPerf=s?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=Mn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:a,value:l}=cg(n),c=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${e}> time: ${a}ms`),this.traceInitIndent--,l}else return n()}}function mR(r,e){e.forEach(n=>{const s=n.prototype;Object.getOwnPropertyNames(s).forEach(a=>{if(a==="constructor")return;const l=Object.getOwnPropertyDescriptor(s,a);l&&(l.get||l.set)?Object.defineProperty(r.prototype,a,l):r.prototype[a]=n.prototype[a]})})}const va=zc(Or,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(va);const Mn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:xg,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),ya=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ht;(function(r){r[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",r[r.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));class Ls{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{fg(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,a=>{const c=this[a].originalGrammarAction;let f;this.TRACE_INIT(`${a} Rule`,()=>{f=this.topLevelRuleRecord(a,c)}),this.gastProductionsCache[a]=f})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=$1({rules:Xe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ne(s)&&this.skipValidations===!1){const a=U1({rules:Xe(this.gastProductionsCache),tokenTypes:Xe(this.tokensMap),errMsgProvider:kr,grammarName:n}),l=w1({lookaheadStrategy:this.lookaheadStrategy,rules:Xe(this.gastProductionsCache),tokenTypes:Xe(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(a,l)}}),Ne(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const a=mC(Xe(this.gastProductionsCache));this.resyncFollows=a}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var a,l;(l=(a=this.lookaheadStrategy).initialize)===null||l===void 0||l.call(a,{rules:Xe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Xe(this.gastProductionsCache))})),!Ls.DEFER_DEFINITION_ERRORS_HANDLING&&!Ne(this.definitionErrors))throw e=ee(this.definitionErrors,a=>a.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(n),s.initLexerAdapter(),s.initLooksAhead(n),s.initRecognizerEngine(e,n),s.initRecoverable(n),s.initTreeBuilder(n),s.initContentAssist(),s.initGastRecorder(n),s.initPerformanceTracer(n),se(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=se(n,"skipValidations")?n.skipValidations:Mn.skipValidations}}Ls.DEFER_DEFINITION_ERRORS_HANDLING=!1;mR(Ls,[W1,Y1,sR,oR,lR,aR,uR,cR,dR,pR]);class gR extends Ls{constructor(e,n=Mn){const s=st(n);s.outputCst=!0,super(e,s)}}const vR=Se({name:"WhiteSpace",pattern:/[ \t\r\n]+/,group:dt.SKIPPED}),yR=Se({name:"LineComment",pattern:/#[^\n\r]*/,group:dt.SKIPPED}),mc=Se({name:"TextBlock",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),zg=Se({name:"PathReference",pattern:/@[a-zA-Z_][a-zA-Z0-9_-]*\/[a-zA-Z0-9_/-]*(?:@\d+\.\d+\.\d+)?/}),Vg=Se({name:"RelativePath",pattern:/\.\/[a-zA-Z0-9_/-]+|\.\.\/[a-zA-Z0-9_/-]+/}),it=Se({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),Wg=Se({name:"Meta",pattern:/meta/,longer_alt:it}),Gg=Se({name:"Inherit",pattern:/inherit/,longer_alt:it}),Kg=Se({name:"Use",pattern:/use/,longer_alt:it}),Hg=Se({name:"As",pattern:/as/,longer_alt:it}),Yg=Se({name:"Extend",pattern:/extend/,longer_alt:it}),Xg=Se({name:"True",pattern:/true/,longer_alt:it}),qg=Se({name:"False",pattern:/false/,longer_alt:it}),Qg=Se({name:"Null",pattern:/null/,longer_alt:it}),Zg=Se({name:"Range",pattern:/range/,longer_alt:it}),Jg=Se({name:"Enum",pattern:/enum/,longer_alt:it}),oi=Se({name:"At",pattern:/@/}),hs=Se({name:"LBrace",pattern:/\{/}),ps=Se({name:"RBrace",pattern:/\}/}),ev=Se({name:"LBracket",pattern:/\[/}),tv=Se({name:"RBracket",pattern:/\]/}),gc=Se({name:"LParen",pattern:/\(/}),vc=Se({name:"RParen",pattern:/\)/}),nv=Se({name:"Colon",pattern:/:/}),ia=Se({name:"Comma",pattern:/,/}),rv=Se({name:"Equals",pattern:/=/}),iv=Se({name:"Question",pattern:/\?/}),sv=Se({name:"DotDot",pattern:/\.\./}),ov=Se({name:"Dot",pattern:/\./}),av=Se({name:"Dash",pattern:/-(?!\d)/}),ai=Se({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),sa=Se({name:"NumberLiteral",pattern:/-?\d+(?:\.\d+)?/}),lv=[vR,yR,mc,zg,Vg,sv,Wg,Gg,Kg,Hg,Yg,Xg,qg,Qg,Zg,Jg,oi,hs,ps,ev,tv,gc,vc,nv,ia,rv,iv,ov,av,ai,sa,it],SR=new dt(lv,{ensureOptimizations:!0,positionTracking:"full"});class ER extends gR{constructor(){super(lv,{recoveryEnabled:!0,maxLookahead:3,nodeLocationTracking:"full"}),this.performSelfAnalysis()}program=this.RULE("program",()=>{this.OPTION(()=>this.SUBRULE(this.metaBlock)),this.OPTION2(()=>this.SUBRULE(this.inheritDecl)),this.MANY(()=>this.SUBRULE(this.useDecl)),this.MANY2(()=>this.OR([{ALT:()=>this.SUBRULE(this.extendBlock)},{ALT:()=>this.SUBRULE(this.block)}]))});metaBlock=this.RULE("metaBlock",()=>{this.CONSUME(oi),this.CONSUME(Wg),this.CONSUME(hs),this.MANY(()=>this.SUBRULE(this.field)),this.CONSUME(ps)});inheritDecl=this.RULE("inheritDecl",()=>{this.CONSUME(oi),this.CONSUME(Gg),this.SUBRULE(this.pathRef)});useDecl=this.RULE("useDecl",()=>{this.CONSUME(oi),this.CONSUME(Kg),this.SUBRULE(this.pathRef),this.OPTION(()=>{this.CONSUME(Hg),this.CONSUME(it)})});block=this.RULE("block",()=>{this.CONSUME(oi),this.CONSUME(it),this.CONSUME(hs),this.SUBRULE(this.blockContent),this.CONSUME(ps)});extendBlock=this.RULE("extendBlock",()=>{this.CONSUME(oi),this.CONSUME(Yg),this.SUBRULE(this.dotPath),this.CONSUME(hs),this.SUBRULE(this.blockContent),this.CONSUME(ps)});blockContent=this.RULE("blockContent",()=>{this.MANY(()=>this.OR([{ALT:()=>this.CONSUME(mc)},{ALT:()=>this.SUBRULE(this.restrictionItem)},{ALT:()=>this.SUBRULE(this.field)}]))});restrictionItem=this.RULE("restrictionItem",()=>{this.CONSUME(av),this.CONSUME(ai)});field=this.RULE("field",()=>{this.OR([{ALT:()=>this.CONSUME(it)},{ALT:()=>this.CONSUME(ai)}]),this.OPTION(()=>this.CONSUME(iv)),this.CONSUME(nv),this.SUBRULE(this.value),this.OPTION2(()=>{this.CONSUME(rv),this.SUBRULE2(this.value)})});value=this.RULE("value",()=>{this.OR([{ALT:()=>this.CONSUME(ai)},{ALT:()=>this.CONSUME(sa)},{ALT:()=>this.CONSUME(Xg)},{ALT:()=>this.CONSUME(qg)},{ALT:()=>this.CONSUME(Qg)},{ALT:()=>this.CONSUME(mc)},{ALT:()=>this.SUBRULE(this.array)},{ALT:()=>this.SUBRULE(this.object)},{ALT:()=>this.SUBRULE(this.typeExpr)},{ALT:()=>this.CONSUME(it)}])});array=this.RULE("array",()=>{this.CONSUME(ev),this.OPTION(()=>{this.SUBRULE(this.value),this.MANY(()=>{this.CONSUME(ia),this.OPTION2(()=>this.SUBRULE2(this.value))})}),this.CONSUME(tv)});object=this.RULE("object",()=>{this.CONSUME(hs),this.MANY(()=>{this.SUBRULE(this.field),this.OPTION(()=>this.CONSUME(ia))}),this.CONSUME(ps)});typeExpr=this.RULE("typeExpr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.rangeType)},{ALT:()=>this.SUBRULE(this.enumType)}])});rangeType=this.RULE("rangeType",()=>{this.CONSUME(Zg),this.CONSUME(gc),this.CONSUME(sa),this.CONSUME(sv),this.CONSUME2(sa),this.CONSUME(vc)});enumType=this.RULE("enumType",()=>{this.CONSUME(Jg),this.CONSUME(gc),this.CONSUME(ai),this.MANY(()=>{this.CONSUME(ia),this.CONSUME2(ai)}),this.CONSUME(vc)});pathRef=this.RULE("pathRef",()=>{this.OR([{ALT:()=>this.CONSUME(zg)},{ALT:()=>this.CONSUME(Vg)}])});dotPath=this.RULE("dotPath",()=>{this.CONSUME(it),this.MANY(()=>{this.CONSUME(ov),this.CONSUME2(it)})})}const oa=new ER;var TR={};const xR=oa.getBaseCstVisitorConstructor(),hm=r=>TR[r];class wR extends xR{filename="<unknown>";interpolateEnv=!1;envProvider=hm;constructor(){super(),this.validateVisitor()}setFilename(e){this.filename=e}setInterpolateEnv(e){this.interpolateEnv=e}setEnvProvider(e){this.envProvider=e}resetEnvProvider(){this.envProvider=hm}loc(e){return{file:this.filename,line:e.startLine,column:e.startColumn,offset:e.startOffset}}program(e,n="<unknown>"){this.filename=n;const s={type:"Program",uses:[],blocks:[],extends:[],loc:{file:this.filename,line:1,column:1}};return e.metaBlock&&(s.meta=this.visit(e.metaBlock[0])),e.inheritDecl&&(s.inherit=this.visit(e.inheritDecl[0])),e.useDecl&&(s.uses=e.useDecl.map(a=>this.visit(a))),e.block&&(s.blocks=e.block.map(a=>this.visit(a))),e.extendBlock&&(s.extends=e.extendBlock.map(a=>this.visit(a))),s}metaBlock(e){const n={};if(e.field)for(const s of e.field){const{name:a,value:l}=this.visit(s);n[a]=l}return{type:"MetaBlock",fields:n,loc:this.loc(e.At[0])}}inheritDecl(e){return{type:"InheritDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])}}useDecl(e){const n={type:"UseDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.Identifier&&(n.alias=e.Identifier[0].image),n}block(e){const n=e.Identifier[0].image,s=this.visit(e.blockContent[0]);return{type:"Block",name:n,content:s,loc:this.loc(e.At[0])}}extendBlock(e){const n=this.visit(e.dotPath[0]),s=this.visit(e.blockContent[0]);return{type:"ExtendBlock",targetPath:n,content:s,loc:this.loc(e.At[0])}}blockContent(e){const n=e.TextBlock?.length>0,s=e.field?.length>0;if(e.restrictionItem?.length>0)return this.buildRestrictionContent(e);const l=n?this.buildTextContent(e.TextBlock[0]):void 0,c=s?this.buildProperties(e.field):{};return this.resolveBlockContent(l,c,n,s)}buildRestrictionContent(e){const n=[];for(const s of e.restrictionItem)n.push(this.visit(s));return{type:"ObjectContent",properties:{items:n},loc:{file:this.filename,line:1,column:1}}}buildTextContent(e){let s=e.image.slice(3,-3).trim();return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),{type:"TextContent",value:s,loc:this.loc(e)}}buildProperties(e){const n={};for(const s of e){const{name:a,value:l}=this.visit(s);n[a]=l}return n}resolveBlockContent(e,n,s,a){return s&&!a?e:!s&&a?{type:"ObjectContent",properties:n,loc:{file:this.filename,line:1,column:1}}:s&&a?{type:"MixedContent",text:e,properties:n,loc:{file:this.filename,line:1,column:1}}:{type:"ObjectContent",properties:{},loc:{file:this.filename,line:1,column:1}}}restrictionItem(e){const n=e.StringLiteral[0];return this.parseStringLiteral(n.image)}field(e){let n;e.Identifier?n=e.Identifier[0].image:n=this.parseStringLiteral(e.StringLiteral[0].image);const s=e.Question?!0:void 0,a=e.value,l=this.visit(a[0]),c=a.length>1?this.visit(a[1]):void 0;return{name:n,value:l,optional:s,defaultValue:c}}value(e){if(e.StringLiteral)return this.parseStringLiteral(e.StringLiteral[0].image);if(e.NumberLiteral)return parseFloat(e.NumberLiteral[0].image);if(e.True)return!0;if(e.False)return!1;if(e.Null)return null;if(e.TextBlock){const n=e.TextBlock[0];let a=n.image.slice(3,-3).trim();return this.interpolateEnv&&(a=this.interpolateEnvVars(a)),{type:"TextContent",value:a,loc:this.loc(n)}}if(e.array)return this.visit(e.array[0]);if(e.object)return this.visit(e.object[0]);if(e.typeExpr)return this.visit(e.typeExpr[0]);if(e.Identifier)return e.Identifier[0].image;throw new Error("Unknown value type")}array(e){return e.value?e.value.map(n=>this.visit(n)):[]}object(e){const n={};if(e.field)for(const s of e.field){const{name:a,value:l}=this.visit(s);n[a]=l}return n}typeExpr(e){return e.rangeType?this.visit(e.rangeType[0]):this.visit(e.enumType[0])}rangeType(e){const[n,s]=e.NumberLiteral,a=parseFloat(n.image),l=parseFloat(s.image);return{type:"TypeExpression",kind:"range",constraints:{min:a,max:l},loc:this.loc(e.Range[0])}}enumType(e){return{type:"TypeExpression",kind:"enum",constraints:{options:e.StringLiteral.map(s=>this.parseStringLiteral(s.image))},loc:this.loc(e.Enum[0])}}pathRef(e){return e.PathReference?this.parsePathReference(e.PathReference[0]):this.parseRelativePath(e.RelativePath[0])}dotPath(e){return e.Identifier.map(n=>n.image).join(".")}parseStringLiteral(e){let s=e.slice(1,-1).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),s}interpolateEnvVars(e){const n=/\$\{([A-Za-z_]\w*)(?::-([^}]*))?\}/g;return e.replace(n,(s,a,l)=>{const c=this.envProvider(a);return c!==void 0?c:l!==void 0?l:(console.warn(`Warning: Environment variable '${a}' is not set, using empty string`),"")})}parsePathReference(e){const n=e.image,s=n.slice(1);let a,l=s;const c=s.match(/@(\d+\.\d+\.\d+)$/);c&&(a=c[1],l=s.slice(0,-c[0].length));const f=l.split("/"),h=f[0];return{type:"PathReference",raw:n,namespace:h,segments:f.slice(1),version:a,isRelative:!1,loc:this.loc(e)}}parseRelativePath(e){const n=e.image,s=n.split("/").filter(a=>a!=="."&&a!=="..");return{type:"PathReference",raw:n,segments:s,isRelative:!0,loc:this.loc(e)}}}const Qo=new wR,uv={name:"xml",description:"XML-style tags for section structure",section:{start:"<{{name}}>",end:"</{{name}}>",nameTransform:"kebab-case",indent:"  "},subsection:{start:"  <{{name}}>",end:"  </{{name}}>",nameTransform:"kebab-case",indent:"  "},listStyle:"dash",codeBlockDelimiter:"```"},kR={name:"markdown",description:"Markdown headers for section structure",section:{start:"## {{name}}",end:"",nameTransform:"none",indent:""},subsection:{start:"### {{name}}",end:"",nameTransform:"none",indent:""},listStyle:"dash",codeBlockDelimiter:"```"},Kc={xml:uv,markdown:kR};function AR(r){return r in Kc}const cv={proseWrap:"preserve",tabWidth:2,printWidth:80};var Fa=(r=>(r.PARSE_ERROR="PS1000",r.UNEXPECTED_TOKEN="PS1001",r.UNTERMINATED_STRING="PS1002",r.INVALID_PATH="PS1003",r.RESOLVE_ERROR="PS2000",r.FILE_NOT_FOUND="PS2001",r.CIRCULAR_DEPENDENCY="PS2002",r.INVALID_INHERIT="PS2003",r.GIT_CLONE_ERROR="PS2004",r.GIT_AUTH_ERROR="PS2005",r.GIT_REF_NOT_FOUND="PS2006",r.VALIDATION_ERROR="PS3000",r.REQUIRED_FIELD="PS3001",r.INVALID_VALUE="PS3002",r.BLOCKED_PATTERN="PS3003",r.MISSING_GUARD="PS3004",r))(Fa||{});class fv extends Error{code;location;cause;constructor(e,n,s){super(e),this.name="PSError",this.code=n,this.location=s?.location,this.cause=s?.cause,Error.captureStackTrace?.(this,this.constructor)}format(){let e=`${this.name} [${this.code}]: ${this.message}`;return this.location&&(e+=`
  at ${this.location.file}:${this.location.line}:${this.location.column}`),e}toJSON(){return{name:this.name,code:this.code,message:this.message,location:this.location}}}class Ju extends fv{constructor(e,n,s=Fa.PARSE_ERROR){super(e,s,{location:n}),this.name="ParseError"}}class li extends fv{constructor(e,n,s=Fa.RESOLVE_ERROR){super(e,s,{location:n}),this.name="ResolveError"}}class ec extends li{chain;constructor(e){super(`Circular dependency detected: ${e.join("  ")}`,void 0,Fa.CIRCULAR_DEPENDENCY),this.name="CircularDependencyError",this.chain=e}}const CR={arrayStrategy:"unique",textStrategy:"concat",textSeparator:`

`};function rr(r,e,n={}){const s={...CR,...n},a={...r};for(const l of Object.keys(e)){const c=e[l];c!==void 0&&(a[l]=RR(r[l],c,s))}return a}function RR(r,e,n){return e===null?null:Array.isArray(e)?NR(Array.isArray(r)?r:[],e,n.arrayStrategy):ys(e)?OR(ys(r)?r:void 0,e,n):pm(e)&&pm(r)?rr(r,e,n):e}function NR(r,e,n){switch(n){case"replace":return[...e];case"concat":return[...r,...e];case"unique":return IR([...r,...e])}}function IR(r){const e=new Set,n=[];for(const s of r){const a=typeof s=="object"?JSON.stringify(s):String(s);e.has(a)||(e.add(a),n.push(s))}return n}function OR(r,e,n){if(!r)return e;switch(n.textStrategy){case"replace":return e;case"concat":return{...e,value:`${r.value}${n.textSeparator}${e.value}`};case"prepend":return{...e,value:`${e.value}${n.textSeparator}${r.value}`}}}function ys(r){return typeof r=="object"&&r!==null&&"type"in r&&r.type==="TextContent"}function pm(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.getPrototypeOf(r)===Object.prototype}function It(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(It);const e={};for(const[n,s]of Object.entries(r))e[n]=It(s);return e}var tc,mm;function _R(){if(mm)return tc;mm=1;function r(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function e(a,l){for(var c="",f=0,h=-1,m=0,g,y=0;y<=a.length;++y){if(y<a.length)g=a.charCodeAt(y);else{if(g===47)break;g=47}if(g===47){if(!(h===y-1||m===1))if(h!==y-1&&m===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var S=c.lastIndexOf("/");if(S!==c.length-1){S===-1?(c="",f=0):(c=c.slice(0,S),f=c.length-1-c.lastIndexOf("/")),h=y,m=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=y,m=0;continue}}l&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+a.slice(h+1,y):c=a.slice(h+1,y),f=y-h-1;h=y,m=0}else g===46&&m!==-1?++m:m=-1}return c}function n(a,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+a+f:f}var s={resolve:function(){for(var l="",c=!1,f,h=arguments.length-1;h>=-1&&!c;h--){var m;h>=0?m=arguments[h]:(f===void 0&&(f=process.cwd()),m=f),r(m),m.length!==0&&(l=m+"/"+l,c=m.charCodeAt(0)===47)}return l=e(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(l){if(r(l),l.length===0)return".";var c=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return l=e(l,!c),l.length===0&&!c&&(l="."),l.length>0&&f&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var f=arguments[c];r(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":s.normalize(l)},relative:function(l,c){if(r(l),r(c),l===c||(l=s.resolve(l),c=s.resolve(c),l===c))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var h=l.length,m=h-f,g=1;g<c.length&&c.charCodeAt(g)===47;++g);for(var y=c.length,S=y-g,x=m<S?m:S,A=-1,R=0;R<=x;++R){if(R===x){if(S>x){if(c.charCodeAt(g+R)===47)return c.slice(g+R+1);if(R===0)return c.slice(g+R)}else m>x&&(l.charCodeAt(f+R)===47?A=R:R===0&&(A=0));break}var j=l.charCodeAt(f+R),b=c.charCodeAt(g+R);if(j!==b)break;j===47&&(A=R)}var _="";for(R=f+A+1;R<=h;++R)(R===h||l.charCodeAt(R)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(g+A):(g+=A,c.charCodeAt(g)===47&&++g,c.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var c=l.charCodeAt(0),f=c===47,h=-1,m=!0,g=l.length-1;g>=1;--g)if(c=l.charCodeAt(g),c===47){if(!m){h=g;break}}else m=!1;return h===-1?f?"/":".":f&&h===1?"//":l.slice(0,h)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');r(l);var f=0,h=-1,m=!0,g;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var y=c.length-1,S=-1;for(g=l.length-1;g>=0;--g){var x=l.charCodeAt(g);if(x===47){if(!m){f=g+1;break}}else S===-1&&(m=!1,S=g+1),y>=0&&(x===c.charCodeAt(y)?--y===-1&&(h=g):(y=-1,h=S))}return f===h?h=S:h===-1&&(h=l.length),l.slice(f,h)}else{for(g=l.length-1;g>=0;--g)if(l.charCodeAt(g)===47){if(!m){f=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":l.slice(f,h)}},extname:function(l){r(l);for(var c=-1,f=0,h=-1,m=!0,g=0,y=l.length-1;y>=0;--y){var S=l.charCodeAt(y);if(S===47){if(!m){f=y+1;break}continue}h===-1&&(m=!1,h=y+1),S===46?c===-1?c=y:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===f+1?"":l.slice(c,h)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return n("/",l)},parse:function(l){r(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var f=l.charCodeAt(0),h=f===47,m;h?(c.root="/",m=1):m=0;for(var g=-1,y=0,S=-1,x=!0,A=l.length-1,R=0;A>=m;--A){if(f=l.charCodeAt(A),f===47){if(!x){y=A+1;break}continue}S===-1&&(x=!1,S=A+1),f===46?g===-1?g=A:R!==1&&(R=1):g!==-1&&(R=-1)}return g===-1||S===-1||R===0||R===1&&g===S-1&&g===y+1?S!==-1&&(y===0&&h?c.base=c.name=l.slice(1,S):c.base=c.name=l.slice(y,S)):(y===0&&h?(c.name=l.slice(1,g),c.base=l.slice(1,S)):(c.name=l.slice(y,g),c.base=l.slice(y,S)),c.ext=l.slice(g,S)),y>0?c.dir=l.slice(0,y-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,tc=s,tc}_R();const Hc={verbose:()=>{},debug:()=>{}};function PR(r,e={}){const{filename:n="<unknown>",tolerant:s=!1,recovery:a=!1,interpolateEnv:l=!1,envProvider:c}=e,f=s||a,h=[],m=SR.tokenize(r);for(const y of m.errors)h.push(new Ju(`Lexer: ${y.message}`,{file:n,line:y.line,column:y.column}));if(h.length>0&&!f)return{ast:null,errors:h};oa.input=m.tokens;const g=oa.program();for(const y of oa.errors)h.push(new Ju(y.message,{file:n,line:y.token.startLine,column:y.token.startColumn}));if(h.length>0&&!f)return{ast:null,errors:h};try{return Qo.setInterpolateEnv(l),c?Qo.setEnvProvider(c):Qo.resetEnvProvider(),{ast:Qo.visit(g,n),errors:h}}catch(y){return h.push(new Ju(`AST transformation: ${y.message}`,{file:n,line:1,column:1})),{ast:null,errors:h}}}const as="__import__";class LR{fs;cache;resolving;cacheEnabled;logger;envVars;constructor(e){this.fs=e.fs,this.cache=new Map,this.resolving=new Set,this.cacheEnabled=e.cache!==!1,this.logger=e.logger??Hc,this.envVars=e.envVars}async resolve(e){const n=this.normalizePath(e);if(this.resolving.has(n))throw this.logger.debug(`Circular dependency detected: ${n}`),new ec([...this.resolving,n]);if(this.cacheEnabled&&this.cache.has(n))return this.logger.debug(`Cache hit: ${n}`),this.cache.get(n);this.resolving.add(n),this.logger.verbose(`Parsing ${n}`);try{const s=await this.doResolve(n);return this.cacheEnabled&&(this.logger.debug(`Cache store: ${n}`),this.cache.set(n,s)),s}finally{this.resolving.delete(n)}}normalizePath(e){let n=e.replace(/\\/g,"/");return n.startsWith("/")&&(n=n.slice(1)),n.endsWith(".prs")||(n=`${n}.prs`),n}resolveRef(e,n){if(e.isRelative){const s=this.dirname(n);return this.normalizePath(this.joinPath(s,e.raw))}if(e.raw.startsWith("@")){const s=e.raw.match(/^@([a-zA-Z_][a-zA-Z0-9_-]*)\/(.+?)(?:@[\d.]+)?$/);if(s&&s[1]&&s[2]){const a=s[1],l=s[2],c=l.endsWith(".prs")?l:`${l}.prs`;return`@${a}/${c}`}}return this.normalizePath(e.raw)}dirname(e){const n=e.lastIndexOf("/");return n===-1?"":e.slice(0,n)}joinPath(...e){const n=[];for(const s of e){if(!s)continue;const a=s.split("/");for(const l of a)l===".."?n.pop():l!=="."&&l!==""&&n.push(l)}return n.join("/")}async doResolve(e){const n=[e],s=[],a=this.loadAndParse(e,n,s);if(!a.ast)return{ast:null,sources:n,errors:s};let l=a.ast;return l=await this.resolveInherit(l,e,n,s),l=await this.resolveImports(l,e,n,s),l.extends.length>0&&this.logger.debug(`Applying ${l.extends.length} extension(s)`),l=this.applyExtends(l),this.logger.debug(`Resolved ${n.length} source file(s)`),{ast:l,sources:[...new Set(n)],errors:s}}loadAndParse(e,n,s){let a;try{a=this.fs.read(e)}catch{return s.push(new li(`File not found: ${e}`)),{ast:null}}const l={filename:e};this.envVars&&Object.keys(this.envVars).length>0&&(l.interpolateEnv=!0,l.envProvider=f=>this.envVars?.[f]);const c=PR(a,l);if(!c.ast){for(const f of c.errors)s.push(new li(f.message,f.location));return{ast:null}}for(const f of c.errors)s.push(new li(f.message,f.location));return{ast:c.ast}}async resolveInherit(e,n,s,a){if(!e.inherit)return e;const l=this.resolveRef(e.inherit.path,n);this.logger.verbose(`Resolving inherit: ${e.inherit.path.raw}`),this.logger.verbose(`   ${l}`);try{const c=await this.resolve(l);if(s.push(...c.sources),a.push(...c.errors),c.ast)return this.logger.debug("Merging with parent AST"),this.resolveInheritance(c.ast,e)}catch(c){if(c instanceof ec)throw c;a.push(new li(`Failed to resolve parent: ${c.message}`))}return e}async resolveImports(e,n,s,a){let l=e;for(const c of e.uses){const f=this.resolveRef(c.path,n);this.logger.verbose(`Resolving import: ${c.path.raw}`),this.logger.verbose(`   ${f}`);try{const h=await this.resolve(f);s.push(...h.sources),a.push(...h.errors),h.ast&&(this.logger.debug(`Merging import${c.alias?` as "${c.alias}"`:""}`),l=this.resolveUses(l,c,h.ast))}catch(h){if(h instanceof ec)throw h;a.push(new li(`Failed to resolve import: ${h.message}`))}}return l}clearCache(){this.cache.clear()}resolveInheritance(e,n){return{...n,meta:e.meta&&n.meta?{...n.meta,fields:rr(e.meta.fields,n.meta.fields)}:n.meta??e.meta,blocks:this.mergeBlocks(e.blocks,n.blocks),inherit:void 0,uses:n.uses,extends:n.extends}}mergeBlocks(e,n){const s=new Map(n.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=s.get(c.name);f?(a.push(this.mergeBlock(c,f)),l.add(c.name)):a.push(It(c))}for(const c of n)l.has(c.name)||a.push(It(c));return a}mergeBlock(e,n){return{...n,content:this.mergeBlockContent(e.content,n.content)}}mergeBlockContent(e,n){if(e.type===n.type)switch(n.type){case"TextContent":return this.mergeTextContent(e,n);case"ObjectContent":return this.mergeObjectContent(e,n);case"ArrayContent":return this.mergeArrayContent(e,n);case"MixedContent":return this.mergeMixedContent(e,n)}return e.type==="MixedContent"&&n.type==="TextContent"?{...e,text:e.text?this.mergeTextContent(e.text,n):It(n)}:e.type==="TextContent"&&n.type==="MixedContent"?{...n,text:n.text?this.mergeTextContent(e,n.text):It(e)}:e.type==="MixedContent"&&n.type==="ObjectContent"?{...e,properties:rr(e.properties,n.properties)}:e.type==="ObjectContent"&&n.type==="MixedContent"?{...n,properties:rr(e.properties,n.properties)}:It(n)}mergeTextContent(e,n){const s=e.value.trim(),a=n.value.trim();return s===a?{...n,value:a}:a.includes(s)?{...n,value:a}:s.includes(a)?{...n,value:s}:{...n,value:`${s}

${a}`}}mergeObjectContent(e,n){return{...n,properties:this.mergeProperties(e.properties,n.properties)}}mergeProperties(e,n){const s={...e};for(const[a,l]of Object.entries(n)){const c=s[a];c===void 0?s[a]=this.deepCloneValue(l):Array.isArray(l)&&Array.isArray(c)?s[a]=this.uniqueConcat(c,l):ys(l)&&ys(c)?s[a]=this.deepCloneValue(l):this.isPlainObject(l)&&this.isPlainObject(c)?s[a]=this.mergeProperties(c,l):s[a]=this.deepCloneValue(l)}return s}mergeArrayContent(e,n){return{...n,elements:this.uniqueConcat(e.elements,n.elements)}}mergeMixedContent(e,n){return{...n,text:e.text&&n.text?this.mergeTextContent(e.text,n.text):n.text??e.text,properties:this.mergeProperties(e.properties,n.properties)}}resolveUses(e,n,s){const a=this.mergeBlocksForImport(e.blocks,s.blocks),l=[];if(n.alias){const c=n.alias,h={type:"Block",name:`${as}${c}`,content:{type:"ObjectContent",properties:{__source:n.path.raw,__blocks:s.blocks.map(m=>m.name)},loc:n.loc},loc:n.loc};l.push(h);for(const m of s.blocks)l.push({...m,name:`${as}${c}.${m.name}`})}return{...e,blocks:[...a,...l]}}mergeBlocksForImport(e,n){const s=new Map(e.map(c=>[c.name,c])),a=[],l=new Set;for(const c of e){const f=n.find(h=>h.name===c.name);f?(a.push(this.mergeBlock(f,c)),l.add(c.name)):a.push(It(c))}for(const c of n)!l.has(c.name)&&!s.has(c.name)&&a.push(It(c));return a}applyExtends(e){let n=[...e.blocks];for(const s of e.extends)n=this.applyExtend(n,s);return n=n.filter(s=>!s.name.startsWith(as)),{...e,blocks:n,extends:[]}}applyExtend(e,n){const s=n.targetPath.split("."),a=s[0];let l=a,c=s.slice(1);e.find(y=>y.name===`${as}${a}`)&&s.length>1&&(l=`${as}${a}.${s[1]}`,c=s.slice(2));const h=e.findIndex(y=>y.name===l);if(h===-1)return e;const m=e[h];if(!m)return e;const g=this.mergeExtension(m,c,n);return[...e.slice(0,h),g,...e.slice(h+1)]}mergeExtension(e,n,s){return n.length===0?{...e,content:this.mergeExtendContent(e.content,s.content)}:{...e,content:this.mergeAtPath(e.content,n,s.content)}}mergeAtPath(e,n,s){if(n.length===0)return this.mergeExtendContent(e,s);const a=n[0];if(!a)return this.mergeExtendContent(e,s);const l=n.slice(1);if(e.type==="ObjectContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}if(e.type==="MixedContent"){const c=e.properties[a];return l.length===0?{...e,properties:{...e.properties,[a]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[a]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[a]:this.buildPathValue(l,s)}}}return e}mergeAtPathValue(e,n,s){if(n.length===0)return this.mergeExtendValue(e,s);if(typeof e!="object"||e===null||Array.isArray(e))return this.buildPathValue(n,s);const a=n[0];if(!a)return this.mergeExtendValue(e,s);const l=n.slice(1),c=e,f=c[a];return l.length===0?{...c,[a]:this.mergeExtendValue(f,s)}:f&&typeof f=="object"&&!Array.isArray(f)?{...c,[a]:this.mergeAtPathValue(f,l,s)}:{...c,[a]:this.buildPathValue(l,s)}}buildPathValue(e,n){if(e.length===0)return this.extractValue(n);const s={};let a=s;for(let c=0;c<e.length-1;c++){const f=e[c];if(f){const h={};a[f]=h,a=h}}const l=e[e.length-1];return l&&(a[l]=this.extractValue(n)),s}extractValue(e){switch(e.type){case"TextContent":return e.value;case"ObjectContent":return It(e.properties);case"ArrayContent":return It(e.elements);case"MixedContent":return It(e.properties)}}mergeExtendValue(e,n){return e===void 0?this.extractValue(n):Array.isArray(e)&&n.type==="ArrayContent"?this.uniqueConcat(e,n.elements):typeof e=="object"&&e!==null&&!Array.isArray(e)&&n.type==="ObjectContent"?rr(e,n.properties):ys(e)&&n.type==="TextContent"?{...n,value:`${e.value}

${n.value}`}:this.extractValue(n)}mergeExtendContent(e,n){if(e.type===n.type)switch(n.type){case"TextContent":return{...n,value:`${e.value}

${n.value}`};case"ObjectContent":return{...n,properties:rr(e.properties,n.properties)};case"ArrayContent":return{...n,elements:this.uniqueConcat(e.elements,n.elements)};case"MixedContent":{const s=e,a=s.text&&n.text?{...n.text,value:`${s.text.value}

${n.text.value}`}:n.text??s.text;return{...n,text:a,properties:rr(s.properties,n.properties)}}}if(e.type==="ObjectContent"&&n.type==="TextContent")return{type:"MixedContent",text:n,properties:e.properties,loc:n.loc};if(e.type==="TextContent"&&n.type==="ObjectContent")return{type:"MixedContent",text:e,properties:n.properties,loc:n.loc};if(e.type==="MixedContent"&&n.type==="TextContent"){const s=e;return{...s,text:s.text?{...n,value:`${s.text.value}

${n.value}`}:n}}if(e.type==="MixedContent"&&n.type==="ObjectContent"){const s=e;return{...s,properties:rr(s.properties,n.properties)}}return It(n)}uniqueConcat(e,n){const s=new Set,a=[];for(const l of[...e,...n]){const c=typeof l=="object"&&l!==null?JSON.stringify(l):String(l);s.has(c)||(s.add(c),a.push(this.deepCloneValue(l)))}return a}isPlainObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}deepCloneValue(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>this.deepCloneValue(s));const n={};for(const[s,a]of Object.entries(e))n[s]=this.deepCloneValue(a);return n}}class yc{convention;prettierOptions;constructor(e="xml"){let n,s;if(typeof e=="object"&&("convention"in e||"prettier"in e)){const a=e;n=a.convention??"xml",s=a.prettier}else n=e;if(typeof n=="string")if(AR(n))this.convention=Kc[n];else throw new Error(`Unknown convention: ${n}. Use a built-in convention ('xml', 'markdown') or provide a custom OutputConvention.`);else this.convention=n;this.prettierOptions={...cv,...s}}getPrettierOptions(){return this.prettierOptions}getConvention(){return this.convention}renderSection(e,n,s=1){const a=s===1?this.convention.section:this.convention.subsection??this.convention.section,l=this.transformName(e,a.nameTransform),c=this.applyTemplate(a.start,{name:l,level:s}),f=a.end?this.applyTemplate(a.end,{name:l,level:s}):"";let h=n.trim();if(!h)return f?`${c}
${f}`:c;this.convention.name==="markdown"&&(h=this.escapeMarkdownSpecialChars(h));const m=this.indentContent(h,a,s);return f?`${c}
${m}
${f}`:this.convention.name==="markdown"?`${c}

${m}`:`${c}
${m}`}renderList(e){const n=this.getListMarker();return e.map(s=>`${n} ${s}`).join(`
`)}renderCodeBlock(e,n=""){const s=this.convention.codeBlockDelimiter??"```";return`${s}${n}
${e}
${s}`}wrapRoot(e){return this.convention.rootWrapper?`${this.convention.rootWrapper.start}
${e}
${this.convention.rootWrapper.end}`:e}getSectionSeparator(){return this.convention.name==="markdown",`

`}getListMarker(){switch(this.convention.listStyle){case"asterisk":return"*";case"bullet":return"";case"numbered":return"1.";default:return"-"}}transformName(e,n){switch(n){case"kebab-case":return this.toKebabCase(e);case"camelCase":return this.toCamelCase(e);case"PascalCase":return this.toPascalCase(e);default:return e}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}toCamelCase(e){return e.replace(/[-_\s]+(.)?/g,(n,s)=>s?s.toUpperCase():"").replace(/^(.)/,n=>n.toLowerCase())}toPascalCase(e){return e.replace(/[-_\s]+(.)?/g,(n,s)=>s?s.toUpperCase():"").replace(/^(.)/,n=>n.toUpperCase())}applyTemplate(e,n){let s=e;s=s.replace(/\{\{name\}\}/g,n.name),s=s.replace(/\{\{level\}\}/g,String(n.level));const l=/\{\{#repeat\s+(\w+)\}\}(.+?)\{\{\/repeat\}\}/.exec(s);if(l){const c=l[1],f=l[2],h=c==="level"?n.level:1,m=f.repeat(h);s=s.replace(l[0],m)}return s}escapeMarkdownSpecialChars(e){return e.split(`
`).map(n=>{let s=n.replace(/__/g,"\\_\\_");return s=this.escapeGlobAsteriskOutsideBackticks(s),s}).join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}indentContent(e,n,s){if(!(n.indent??""))return e;if(this.convention.name==="xml"){const c=" ".repeat(this.prettierOptions.tabWidth).repeat(s);return e.split(`
`).map(f=>f.trim()?`${c}${f}`:f).join(`
`)}return e}}new yc(uv),new yc(Kc.markdown);const MR=["git","config","documentation","diagrams"],gm={typescript:"TypeScript",naming:"Naming Conventions",errors:"Error Handling",testing:"Testing",security:"Security",performance:"Performance",accessibility:"Accessibility",documentation:"Documentation"};function bR(r){return r in gm?gm[r]:r.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function jR(r){return r==="errors"?"error-handling":r}class FR{options;constructor(e={}){this.options={supportLegacyFormat:e.supportLegacyFormat??!0,supportObjectFormat:e.supportObjectFormat??!0}}extract(e){const n=this.getProps(e),s=new Map,a=this.extractGit(n),l=this.extractConfig(n),c=this.extractDocumentation(n),f=this.extractDiagrams(n);let h=!1;if(this.options.supportLegacyFormat){const m=n.code;if(m&&typeof m=="object"&&!Array.isArray(m)){const g=m;if("style"in g||"patterns"in g){const y=[];this.addArrayItems(y,g.style),this.addArrayItems(y,g.patterns),y.length>0&&(s.set("code",{key:"code",sectionName:"code",title:"Code Style",items:y,rawValue:m}),h=!0)}}}for(const[m,g]of Object.entries(n)){if(this.isNonCodeKey(m)||m==="code"&&h)continue;const y=this.extractEntry(m,g);y&&y.items.length>0&&s.set(m,y)}return{codeStandards:s,git:a,config:l,documentation:c,diagrams:f}}extractFromProgram(e){const n=e.blocks.find(s=>s.name==="standards"&&!s.name.startsWith("__"));return n?this.extract(n.content):null}extractEntry(e,n){const s=[];if(Array.isArray(n))for(const a of n){const l=this.valueToString(a);l&&s.push(l)}else this.options.supportObjectFormat&&n&&typeof n=="object"?this.extractFromObject(n,s):typeof n=="string"&&n.trim()&&s.push(n.trim());return s.length===0?null:{key:e,sectionName:jR(e),title:bR(e),items:s,rawValue:n}}extractFromObject(e,n){for(const[s,a]of Object.entries(e)){if(a==null||a===!1)continue;if(a===!0){n.push(s);continue}const l=this.valueToString(a);l&&n.push(`${s}: ${l}`)}}extractGit(e){const n=e.git;if(!n||typeof n!="object"||Array.isArray(n))return;const s=n,a={};return s.format&&(a.format=this.valueToString(s.format)),Array.isArray(s.types)&&(a.types=s.types.map(l=>this.valueToString(l)).filter(Boolean)),s.example&&(a.example=this.valueToString(s.example)),Object.keys(a).length>0?a:void 0}extractConfig(e){const n=e.config;if(!n||typeof n!="object"||Array.isArray(n))return;const s=n,a={};for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);f&&(a[l]=f)}return Object.keys(a).length>0?a:void 0}extractDocumentation(e){const n=e.documentation;if(!n)return;const s=[];if(Array.isArray(n))for(const a of n){const l=this.valueToString(a);l&&s.push(l)}else typeof n=="object"?this.extractFromObject(n,s):typeof n=="string"&&n.trim()&&s.push(n.trim());return s.length>0?{items:s,rawValue:n}:void 0}extractDiagrams(e){const n=e.diagrams;if(!n||typeof n!="object"||Array.isArray(n))return;const s=n;let a,l;if(s.format?a=this.valueToString(s.format):s.tool&&(a=this.valueToString(s.tool)),Array.isArray(s.types)&&(l=s.types.map(c=>this.valueToString(c)).filter(Boolean)),a||l&&l.length>0)return{format:a,types:l,rawValue:n}}isNonCodeKey(e){return MR.includes(e)}addArrayItems(e,n){if(Array.isArray(n))for(const s of n){const a=this.valueToString(s);a&&e.push(a)}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}valueToString(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(n=>this.valueToString(n)).join(", ");if(typeof e=="object"&&"type"in e){if(e.type==="TextContent"&&typeof e.value=="string")return e.value.trim();if(e.type==="TypeExpression"&&"kind"in e){const n=e.kind,s="params"in e&&Array.isArray(e.params)?e.params:[];return s.length>0?`${n}(${s.map(a=>this.valueToString(a)).join(", ")})`:n}}if(typeof e=="object"){const n=Object.entries(e);if(n.length>0)return n.map(([s,a])=>`${s}: ${this.valueToString(a)}`).join(", ")}return""}}class $a{standardsExtractor=new FR;createRenderer(e){const n=e?.convention??this.defaultConvention;return new yc({convention:n,prettier:e?.prettier})}getPrettierOptions(e){return{...cv,...e?.prettier}}getOutputPath(e){return e?.outputPath??this.outputPath}findBlock(e,n){return e.blocks.find(s=>s.name===n&&!s.name.startsWith("__"))}extractText(e){switch(e.type){case"TextContent":return e.value.trim();case"MixedContent":return e.text?.value.trim()??"";default:return""}}getProp(e,n){switch(e.type){case"ObjectContent":return e.properties[n];case"MixedContent":return e.properties[n];default:return}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}formatStandardsList(e){return Array.isArray(e)?e.map(n=>this.valueToString(n)).filter(n=>n.length>0):[]}formatArray(e){return e.map(String).join(", ")}truncate(e,n){return e.length>n?e.substring(0,n-3)+"...":e}getMetaField(e,n){const s=e.meta?.fields?.[n];if(typeof s=="string")return s;if(typeof s=="number")return String(s)}getArrayElements(e){return e.type==="ArrayContent"?e.elements:[]}valueToString(e){return e===null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(n=>this.valueToString(n)).join(", "):typeof e=="object"&&"type"in e&&e.type==="TextContent"&&typeof e.value=="string"?e.value.trim():""}extractSectionWithCodeBlock(e,n){const s=e.indexOf(n);if(s===-1)return null;const a=s+n.length,l=e.indexOf("```",a);if(l===-1)return null;const c=e.indexOf("```",l+3);if(c===-1)return null;const f=c+3;return e.substring(s,f)}normalizeMarkdownForPrettier(e){const n=e.split(`
`);let s=1/0,a=!1;for(const h of n){const m=h.trimEnd();if(m.trimStart().startsWith("```")){if(a=!a,m.length>0){const x=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,x)}continue}if(a||m.length===0)continue;const y=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,y)}s===1/0&&(s=0);const l=[];let c=!1,f=[];a=!1;for(const h of n){const m=h.trimEnd(),g=s>0?m.slice(s):m,y=m.trimStart().startsWith("```"),S=y&&!a;if(y&&(a=!a),a||g.startsWith("```")){if(S){const j=l.length>0?l[l.length-1]??"":"";j.trim()&&!j.startsWith("#")&&l.push("")}l.push(g);continue}let x=g;x=x.replace(/__([^_]+)__/g,"\\_\\_$1\\_\\_"),x=this.escapeGlobAsteriskOutsideBackticks(x);const A=l.length>0?l[l.length-1]:"",R=A?.trimStart().startsWith("#");if(R&&x.trim()&&l.push(""),x.trimStart().startsWith("|")&&x.trimEnd().endsWith("|"))c=!0,f.push(x.trim());else{c&&f.length>0&&(l.push(...this.formatMarkdownTable(f)),f=[],c=!1);const j=x.trimStart().startsWith("- "),b=/^\d+\.\s/.test(x.trimStart()),_=A?.trimStart()??"",P=_.startsWith("- ")||/^\d+\.\s/.test(_),M=A?.trimEnd().endsWith(":")??!1;((j||b)&&A&&!P&&!R||(j||b)&&M)&&l.push(""),l.push(x)}}return f.length>0&&l.push(...this.formatMarkdownTable(f)),l.join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,a)=>a%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}stripAllIndent(e){const n=e.split(`
`),s=[];let a=!1;for(const l of n){const c=l.trimEnd();if(c.trimStart().startsWith("```")){if(!a){const S=s.length>0?s[s.length-1]??"":"";S&&S.trim()&&s.push("")}a=!a,s.push(c.trimStart());continue}if(a){s.push(c);continue}let f=c.trimStart();f=f.replace(/__/g,"\\_\\_"),f=this.escapeGlobAsteriskOutsideBackticks(f);const h=s.length>0?s[s.length-1]??"":"",m=f.startsWith("- ")||/^\d+\.\s/.test(f),g=h.startsWith("- ")||/^\d+\.\s/.test(h),y=h.trimEnd().endsWith(":");(m&&h&&!g||m&&y)&&s.push(""),s.push(f)}return s.join(`
`)}formatMarkdownTable(e){if(e.length===0)return[];const n=e.map(l=>l.split("|").slice(1,-1).map(c=>c.trim())),s=n[0]?.length??0,a=new Array(s).fill(0);for(const l of n)for(let c=0;c<l.length;c++){const f=l[c]??"",h=f.match(/^-+$/)?3:f.length;a[c]=Math.max(a[c]??0,h)}return n.map(l=>"| "+l.map((f,h)=>{const m=a[h]??0;return f.match(/^-+$/)?"-".repeat(m):f.padEnd(m)}).join(" | ")+" |")}dedent(e){const n=e.split(`
`);if(n.length<=1)return e.trim();const s=n.slice(1).filter(l=>l.trim().length>0).reduce((l,c)=>{const h=c.match(/^(\s*)/)?.[1]?.length??0;return Math.min(l,h)},1/0);return s===0||s===1/0?e.trim():[(n[0]??"").trim(),...n.slice(1).map(l=>l.trim().length>0?l.slice(s):"")].join(`
`).trim()}}class Cr{static factories=new Map;static register(e,n){if(this.factories.has(e))throw new Error(`Formatter '${e}' is already registered`);this.factories.set(e,n)}static get(e){return this.factories.get(e)?.()}static getAll(){return Array.from(this.factories.values()).map(e=>e())}static list(){return Array.from(this.factories.keys())}static has(e){return this.factories.has(e)}static unregister(e){return this.factories.delete(e)}static clear(){this.factories.clear()}}const $R={simple:{name:"simple",description:"Single file output (.github/copilot-instructions.md)",outputPath:".github/copilot-instructions.md"},multifile:{name:"multifile",description:"Main + path-specific instructions (.github/instructions/) + prompts",outputPath:".github/copilot-instructions.md"},full:{name:"full",description:"Multifile + skills (.github/skills/) + agents (.github/agents/) + AGENTS.md",outputPath:".github/copilot-instructions.md"}},vm={Read:"read",NotebookRead:"read",Edit:"edit",MultiEdit:"edit",Write:"edit",NotebookEdit:"edit",Grep:"search",Glob:"search",Bash:"execute",WebFetch:"web",WebSearch:"web",Task:"agent",TodoWrite:"todo",TodoRead:"todo"},UR={sonnet:"Claude Sonnet 4.5",opus:"Claude Opus 4.5",haiku:"Claude Haiku 4.5","sonnet-4":"Claude Sonnet 4","sonnet-4.5":"Claude Sonnet 4.5","opus-4":"Claude Opus 4","opus-4.5":"Claude Opus 4.5","haiku-4":"Claude Haiku 4","haiku-4.5":"Claude Haiku 4.5","gpt-4o":"GPT-4o","gpt-4.1":"GPT-4.1","gpt-5":"GPT-5","gpt-5-mini":"GPT-5 mini",inherit:"",auto:"Auto"};class DR extends $a{name="github";outputPath=".github/copilot-instructions.md";description="GitHub Copilot instructions (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return $R}format(e,n){const s=this.resolveVersion(n?.version);return s==="full"?this.formatFull(e,n):s==="multifile"?this.formatMultifile(e,n):this.formatSimple(e,n)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,n){const s=this.createRenderer(n),a=[];return s.getConvention().name==="markdown"&&a.push(this.header(e)),this.addCommonSections(e,s,a),{path:this.getOutputPath(n),content:a.join(`

`)+`
`}}formatMultifile(e,n){const s=this.createRenderer(n),a=[],l=this.extractInstructions(e);for(const h of l)a.push(this.generateInstructionFile(h));const c=this.extractPrompts(e);for(const h of c)a.push(this.generatePromptFile(h));const f=[];return s.getConvention().name==="markdown"&&f.push(this.header(e)),this.addCommonSections(e,s,f),{path:this.getOutputPath(n),content:f.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}formatFull(e,n){const s=this.createRenderer(n),a=[],l=this.extractInstructions(e);for(const y of l)a.push(this.generateInstructionFile(y));const c=this.extractPrompts(e);for(const y of c)a.push(this.generatePromptFile(y));const f=this.extractSkills(e);for(const y of f)a.push(this.generateSkillFile(y));const h=this.extractCustomAgents(e);for(const y of h)a.push(this.generateCustomAgentFile(y));const m=this.generateAgentsFile(e);m&&a.push(m);const g=[];return s.getConvention().name==="markdown"&&g.push(this.header(e)),this.addCommonSections(e,s,g),{path:this.getOutputPath(n),content:g.join(`

`)+`
`,additionalFiles:a.length>0?a:void 0}}extractInstructions(e){const n=this.findBlock(e,"guards");if(!n)return[];const s=[],a=this.getProps(n.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"typescript",applyTo:c,description:"TypeScript-specific coding rules",content:this.getTypeScriptInstructionContent(e)}),f.length>0&&s.push({name:"testing",applyTo:f,description:"Testing-specific rules and patterns",content:this.getTestingInstructionContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.applyTo,g=h.excludeAgent,y=h.description,S=h.content;m&&Array.isArray(m)&&s.push({name:c,applyTo:m.map(x=>this.valueToString(x)),excludeAgent:g?this.valueToString(g):void 0,description:y?this.valueToString(y):`${c} rules`,content:S?this.valueToString(S):""})}return s}generateInstructionFile(e){const n=[];n.push("---"),n.push("applyTo:");for(const s of e.applyTo)n.push(`  - "${s}"`);if(e.excludeAgent&&n.push(`excludeAgent: "${e.excludeAgent}"`),n.push("---"),n.push(""),n.push(`# ${e.description}`),n.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);n.push(a)}return{path:`.github/instructions/${e.name}.instructions.md`,content:n.join(`
`)}}getTypeScriptInstructionContent(e){const n=this.findBlock(e,"standards");if(!n)return"";const s=this.getProps(n.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Use strict TypeScript, avoid `any` types"),f.useUnknown&&a.push(`- Use \`unknown\` ${this.valueToString(f.useUnknown)}`),f.exports&&a.push(`- ${this.capitalize(this.valueToString(f.exports))}`),f.returnTypes&&a.push(`- Explicit return types ${this.valueToString(f.returnTypes)}`)}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: \`${this.valueToString(f.files)}\``),f.classes&&a.push(`- Classes/Interfaces: \`${this.valueToString(f.classes)}\``),f.functions&&a.push(`- Functions/Variables: \`${this.valueToString(f.functions)}\``)}return a.join(`
`)}getTestingInstructionContent(e){const n=this.findBlock(e,"standards");if(!n)return"";const s=this.getProps(n.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.filePattern&&a.push(`- Test files: \`${this.valueToString(c.filePattern)}\``),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage for libraries`),c.fixtures&&a.push(`- Use fixtures ${this.valueToString(c.fixtures)}`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractPrompts(e){const n=this.findBlock(e,"shortcuts");if(!n)return[];const s=[],a=this.getProps(n.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;(f.prompt===!0||f.type==="prompt")&&s.push({name:l,description:f.description?this.valueToString(f.description):l,mode:f.mode==="agent"?"agent":void 0,tools:f.tools&&Array.isArray(f.tools)?f.tools.map(h=>this.valueToString(h)):void 0,content:f.content?this.valueToString(f.content):""})}return s}generatePromptFile(e){const n=[];n.push("---");const s=e.description.includes("'")?'"':"'";if(n.push(`description: ${s}${e.description}${s}`),e.mode==="agent"&&(n.push("mode: agent"),e.tools&&e.tools.length>0)){const c=e.tools.map(f=>vm[f]??f.toLowerCase()).filter((f,h,m)=>m.indexOf(f)===h).map(f=>`'${f}'`).join(", ");n.push(`tools: [${c}]`)}if(n.push("---"),n.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);n.push(c)}return{path:`.github/prompts/${e.name.replace(/^\/+/,"")}.prompt.md`,content:n.join(`
`)+`
`}}extractSkills(e){const n=this.findBlock(e,"skills");if(!n)return[];const s=[],a=this.getProps(n.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,disableModelInvocation:f.disableModelInvocation===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const n=[];n.push("---"),n.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(n.push(`description: ${s}${e.description}${s}`),e.disableModelInvocation&&n.push("disable-model-invocation: true"),n.push("---"),n.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);n.push(c)}return{path:`.github/skills/${e.name.replace(/^\/+/,"")}/SKILL.md`,content:n.join(`
`)+`
`}}generateAgentsFile(e){const n=this.findBlock(e,"identity");if(!n)return null;const s=[];s.push("# Agent Instructions"),s.push("");const a=this.extractText(n.content);a&&(s.push("## Identity"),s.push(""),s.push(this.stripAllIndent(a)),s.push(""));const l=this.findBlock(e,"context");if(l){const f=this.extractText(l.content);f&&(s.push("## Context"),s.push(""),s.push(this.stripAllIndent(f)),s.push(""))}const c=this.findBlock(e,"restrictions");if(c){const f=this.extractRestrictionItems(c.content);if(f.length>0){s.push("## Restrictions"),s.push("");for(const h of f)s.push(`- ${h}`)}}return{path:"AGENTS.md",content:s.join(`
`)+`
`}}extractRestrictionItems(e){if(e.type==="ArrayContent")return e.elements.map(n=>this.valueToString(n));if(e.type==="TextContent")return e.value.trim().split(`
`).map(n=>n.trim().replace(/^-\s*/,"")).filter(n=>n.length>0);if(e.type==="ObjectContent"){const n=this.getProp(e,"items");if(Array.isArray(n))return n.map(s=>this.valueToString(s))}return[]}extractCustomAgents(e){const n=this.findBlock(e,"agents");if(!n)return[];const s=[],a=this.getProps(n.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=f.description?this.valueToString(f.description):"";if(!h)continue;s.push({name:l,description:h,tools:this.parseToolsArray(f.tools),model:f.model?this.valueToString(f.model):void 0,content:f.content?this.valueToString(f.content):""})}return s}parseToolsArray(e){if(!e||!Array.isArray(e))return;const n=e.map(a=>this.valueToString(a)).filter(a=>a.length>0).map(a=>vm[a]??a.toLowerCase()),s=[...new Set(n)];return s.length>0?s:void 0}mapModelName(e){if(!e)return;const n=UR[e.toLowerCase()];if(n!=="")return n??e}generateCustomAgentFile(e){const n=[];if(n.push("---"),n.push(`name: ${e.name}`),n.push(`description: ${e.description}`),e.tools&&e.tools.length>0){const l=e.tools.map(c=>`'${c}'`).join(", ");n.push(`tools: [${l}]`)}const s=this.mapModelName(e.model);if(s&&n.push(`model: ${s}`),n.push("---"),n.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);n.push(c)}return{path:`.github/agents/${e.name.replace(/^\/+/,"")}.md`,content:n.join(`
`)+`
`}}addCommonSections(e,n,s){const a=this.project(e,n);a&&s.push(a);const l=this.techStack(e,n);l&&s.push(l);const c=this.architecture(e,n);c&&s.push(c);const f=this.codeStandards(e,n);f&&s.push(f);const h=this.shortcutsSection(e,n);h&&s.push(h);const m=this.commands(e,n);m&&s.push(m);const g=this.gitCommits(e,n);g&&s.push(g);const y=this.configFiles(e,n);y&&s.push(y);const S=this.documentation(e,n);S&&s.push(S);const x=this.postWork(e,n);x&&s.push(x);const A=this.restrictions(e,n);A&&s.push(A);const R=this.diagrams(e,n);R&&s.push(R);const j=this.knowledge(e,n);j&&s.push(j)}header(e){return"# GitHub Copilot Instructions"}project(e,n){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return n.renderSection("project",this.stripAllIndent(a))}techStack(e,n){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Language:** ${this.formatTechItem(g)}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,S=g.packageManager;y&&S&&l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(S)} workspaces`)}if(l.length===0)return null;const m=n.renderList(l);return n.renderSection("tech-stack",m)}architecture(e,n){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture","").trim();return n.renderSection("architecture",this.stripAllIndent(c))}codeStandards(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(n.renderSection(c.sectionName,n.renderList(c.items),2));return l.length===0?null:n.renderSection("code-standards",l.join(`

`))}shortcutsSection(e,n){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content),l=[];for(const[c,f]of Object.entries(a))if(f&&typeof f=="object"&&!Array.isArray(f)){const h=f;if(h.prompt===!0||h.type==="prompt")continue;const m=h.description||h.content||c;l.push(`${c}: ${this.valueToString(m).split(`
`)[0]}`)}else l.push(`${c}: ${this.valueToString(f).split(`
`)[0]}`);return l.length===0?null:n.renderSection("shortcuts",n.renderList(l))}commands(e,n){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return n.renderSection("commands",this.stripAllIndent(c))}gitCommits(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:n.renderSection("git-commits",n.renderList(f))}configFiles(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(n.renderSection("eslint",`ESLint: ${g}`,2))}const m=c.viteRoot;if(m){const g=this.valueToString(m);f.push(n.renderSection("vite-vitest",`Vite root: ${g}`,2))}return f.length===0?null:n.renderSection("configuration-files",f.join(`

`))}documentation(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:n.renderSection("documentation-verification",n.renderList(f))}postWork(e,n){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return n.renderSection("post-work-verification",`${c}
${this.stripAllIndent(f)}`)}restrictions(e,n){const s=this.findBlock(e,"restrictions");if(!s)return null;let a=[];if(s.content.type==="ArrayContent")a=s.content.elements.map(l=>this.formatRestriction(this.valueToString(l)));else if(s.content.type==="TextContent")a=s.content.value.trim().split(`
`).filter(l=>l.trim()).map(l=>this.formatRestriction(l.trim()));else if(s.content.type==="ObjectContent"){const l=this.getProp(s.content,"items");Array.isArray(l)&&(a=l.map(c=>this.formatRestriction(this.valueToString(c))))}return a.length===0?null:n.renderSection("donts",n.renderList(a))}diagrams(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Always use **${this.valueToString(h)}** syntax for diagrams in documentation`);const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:n.renderSection("diagrams",n.renderList(f))}knowledge(e,n){return null}formatTechItem(e){return e.map(String).join(", ")}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}const BR={simple:{name:"simple",description:"Single file output (CLAUDE.md)",outputPath:"CLAUDE.md"},multifile:{name:"multifile",description:"Main + modular rules (.claude/rules/*.md)",outputPath:"CLAUDE.md"},full:{name:"full",description:"Multifile + skills (.claude/skills/) + agents (.claude/agents/) + local memory",outputPath:"CLAUDE.md"}};class zR extends $a{name="claude";outputPath="CLAUDE.md";description="Claude Code instructions (concise Markdown)";defaultConvention="markdown";static getSupportedVersions(){return BR}format(e,n){const s=this.resolveVersion(n?.version);return s==="full"?this.formatFull(e,n):s==="multifile"?this.formatMultifile(e,n):this.formatSimple(e,n)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,n){const s=this.createRenderer(n),a=[];return s.getConvention().name==="markdown"&&a.push(`# CLAUDE.md
`),this.addCommonSections(e,s,a),{path:this.getOutputPath(n),content:a.join(`
`)}}formatMultifile(e,n){const s=this.createRenderer(n),a=[],l=this.extractRules(e);for(const f of l)a.push(this.generateRuleFile(f));const c=[];return s.getConvention().name==="markdown"&&c.push(`# CLAUDE.md
`),this.addCommonSections(e,s,c),{path:this.getOutputPath(n),content:c.join(`
`),additionalFiles:a.length>0?a:void 0}}formatFull(e,n){const s=this.createRenderer(n),a=[],l=this.extractRules(e);for(const g of l)a.push(this.generateRuleFile(g));const c=this.extractSkills(e);for(const g of c)a.push(this.generateSkillFile(g));const f=this.extractAgents(e);for(const g of f)a.push(this.generateAgentFile(g));const h=this.generateLocalFile(e);h&&a.push(h);const m=[];return s.getConvention().name==="markdown"&&m.push(`# CLAUDE.md
`),this.addCommonSections(e,s,m),{path:this.getOutputPath(n),content:m.join(`
`),additionalFiles:a.length>0?a:void 0}}extractRules(e){const n=this.findBlock(e,"guards");if(!n)return[];const s=[],a=this.getProps(n.content),l=a.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"code-style",paths:c,description:"TypeScript code style rules",content:this.getCodeStyleRuleContent(e)}),f.length>0&&s.push({name:"testing",paths:f,description:"Testing rules and patterns",content:this.getTestingRuleContent(e)})}for(const[c,f]of Object.entries(a))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.paths??h.applyTo,g=h.description,y=h.content;m&&Array.isArray(m)&&s.push({name:c,paths:m.map(S=>this.valueToString(S)),description:g?this.valueToString(g):`${c} rules`,content:y?this.valueToString(y):""})}return s}generateRuleFile(e){const n=[];n.push("---"),n.push(`description: "${e.description}"`),n.push("paths:");for(const s of e.paths)n.push(`  - "${s}"`);if(n.push("---"),n.push(""),n.push(`# ${e.description}`),n.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);n.push(a)}return{path:`.claude/rules/${e.name}.md`,content:n.join(`
`)}}getCodeStyleRuleContent(e){const n=this.findBlock(e,"standards");if(!n)return"";const s=this.getProps(n.content),a=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&a.push("- Strict TypeScript, no `any` types"),f.exports&&a.push("- Named exports only")}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&a.push(`- Files: ${this.valueToString(f.files)}`)}return a.join(`
`)}getTestingRuleContent(e){const n=this.findBlock(e,"standards");if(!n)return"";const s=this.getProps(n.content),a=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.framework&&a.push(`- Use ${this.valueToString(c.framework)} for testing`),c.coverage&&a.push(`- Target >${this.valueToString(c.coverage)}% coverage`),c.pattern&&a.push(`- Follow ${this.valueToString(c.pattern)} pattern`)}return a.length>0?a.join(`
`):"Follow project testing conventions."}extractSkills(e){const n=this.findBlock(e,"skills");if(!n)return[];const s=[],a=this.getProps(n.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,context:f.context==="fork"||f.context==="inherit"?f.context:void 0,agent:f.agent?this.valueToString(f.agent):void 0,allowedTools:f.allowedTools&&Array.isArray(f.allowedTools)?f.allowedTools.map(h=>this.valueToString(h)):void 0,userInvocable:f.userInvocable===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const n=[];n.push("---"),n.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(n.push(`description: ${s}${e.description}${s}`),e.context&&n.push(`context: ${e.context}`),e.agent&&n.push(`agent: ${e.agent}`),e.allowedTools&&e.allowedTools.length>0){n.push("allowed-tools:");for(const a of e.allowedTools)n.push(`  - ${a}`)}if(e.userInvocable&&n.push("user-invocable: true"),n.push("---"),n.push(""),e.content){const a=this.dedent(e.content),l=this.normalizeMarkdownForPrettier(a);n.push(l)}return{path:`.claude/skills/${e.name}/SKILL.md`,content:n.join(`
`)+`
`}}extractAgents(e){const n=this.findBlock(e,"agents");if(!n)return[];const s=[],a=this.getProps(n.content);for(const[l,c]of Object.entries(a))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=this.parseAgentConfig(l,f);h&&s.push(h)}return s}parseAgentConfig(e,n){const s=n.description?this.valueToString(n.description):"";return s?{name:e,description:s,tools:this.parseStringArray(n.tools),disallowedTools:this.parseStringArray(n.disallowedTools),model:this.parseAgentModel(n.model),permissionMode:this.parsePermissionMode(n.permissionMode),skills:this.parseStringArray(n.skills),content:n.content?this.valueToString(n.content):""}:null}parseStringArray(e){if(!e||!Array.isArray(e))return;const n=e.map(s=>this.valueToString(s)).filter(s=>s.length>0);return n.length>0?n:void 0}parseAgentModel(e){if(!e)return;const n=this.valueToString(e);return["sonnet","opus","haiku","inherit"].includes(n)?n:void 0}parsePermissionMode(e){if(!e)return;const n=this.valueToString(e);return["default","acceptEdits","dontAsk","bypassPermissions","plan"].includes(n)?n:void 0}generateAgentFile(e){const n=[];if(n.push("---"),n.push(`name: ${e.name}`),n.push(`description: ${e.description}`),e.tools&&e.tools.length>0&&n.push(`tools: ${e.tools.join(", ")}`),e.disallowedTools&&e.disallowedTools.length>0&&n.push(`disallowedTools: ${e.disallowedTools.join(", ")}`),e.model&&n.push(`model: ${e.model}`),e.permissionMode&&n.push(`permissionMode: ${e.permissionMode}`),e.skills&&e.skills.length>0){n.push("skills:");for(const s of e.skills)n.push(`  - ${s}`)}if(n.push("---"),n.push(""),e.content){const s=this.dedent(e.content),a=this.normalizeMarkdownForPrettier(s);n.push(a)}return{path:`.claude/agents/${e.name}.md`,content:n.join(`
`)+`
`}}generateLocalFile(e){const n=this.findBlock(e,"local");if(!n)return null;const s=this.extractText(n.content);if(!s)return null;const a=[];return a.push("# CLAUDE.local.md"),a.push(""),a.push("> Private instructions (not committed to git)"),a.push(""),a.push(s),{path:"CLAUDE.local.md",content:a.join(`
`)}}addCommonSections(e,n,s){this.addSection(s,this.project(e,n)),this.addSection(s,this.techStack(e,n)),this.addSection(s,this.architecture(e,n)),this.addSection(s,this.codeStandards(e,n)),this.addSection(s,this.gitCommits(e,n)),this.addSection(s,this.configFiles(e,n)),this.addSection(s,this.commands(e,n)),this.addSection(s,this.postWork(e,n)),this.addSection(s,this.documentation(e,n)),this.addSection(s,this.diagrams(e,n)),this.addSection(s,this.donts(e,n))}addSection(e,n){n&&e.push(n)}project(e,n){const s=this.findBlock(e,"identity");if(!s)return null;const l=this.extractText(s.content).split(/\n{2,}/).map(f=>f.split(`
`).map(h=>h.trim()).filter(h=>h).join(`
`)).filter(f=>f).join(`

`),c=this.normalizeMarkdownForPrettier(l);return n.renderSection("Project",c)+`
`}techStack(e,n){const s=this.findBlock(e,"context");if(s){const l=this.extractTechStackFromContext(s);if(l.length>0)return n.renderSection("Tech Stack",l.join(", "))+`
`}const a=this.findBlock(e,"standards");if(a){const l=this.extractTechStackFromStandards(a);if(l.length>0)return n.renderSection("Tech Stack",l.join(", "))+`
`}return null}extractTechStackFromContext(e){if(!e)return[];const n=this.getProps(e.content),s=[],a=n.languages;a&&s.push(...(Array.isArray(a)?a:[a]).map(String));const l=n.runtime;l&&s.push(this.valueToString(l));const c=n.monorepo;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&f.packageManager&&s.push(`${this.valueToString(f.tool)} + ${this.valueToString(f.packageManager)}`)}return s}extractTechStackFromStandards(e){if(!e)return[];const n=this.getProp(e.content,"code");if(!n||typeof n!="object"||Array.isArray(n))return[];const s=n,a=[];for(const l of["languages","frameworks","testing"]){const c=s[l];c&&a.push(...(Array.isArray(c)?c:[c]).map(String))}return a}architecture(e,n){const s=this.findBlock(e,"context");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Architecture");if(!l)return null;const c=l.replace("## Architecture",""),f=this.normalizeMarkdownForPrettier(c);return n.renderSection("Architecture",f.trim())+`
`}codeStandards(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const f of a.codeStandards.values())l.push(...f.items);if(l.length===0)return null;const c=n.renderList(l);return n.renderSection("Code Style",c)+`
`}gitCommits(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"git");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Format: ${this.valueToString(l.format)}`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),l.example&&c.push(`Example: \`${this.valueToString(l.example)}\``),c.length===0)return null;const f=n.renderList(c);return n.renderSection("Git Commits",f)+`
`}configFiles(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"config");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.eslint&&c.push(`ESLint: ${this.valueToString(l.eslint)}`),l.viteRoot&&c.push(`Vite root: ${this.valueToString(l.viteRoot)}`),c.length===0)return null;const f=n.renderList(c);return n.renderSection("Config Files",f)+`
`}commands(e,n){const s=this.findBlock(e,"shortcuts"),a=this.findBlock(e,"knowledge"),l=[];if(s){const f=this.getProps(s.content);for(const[h,m]of Object.entries(f)){const g=this.valueToString(m).split(`
`)[0]??"";l.push(`${h.padEnd(10)} - ${g}`.trimEnd())}}if(l.length===0)return null;let c=n.renderCodeBlock(l.join(`
`));if(a){const f=this.extractText(a.content),h=this.extractSectionWithCodeBlock(f,"## Development Commands");if(h){const m=h.replace("## Development Commands",""),g=this.normalizeMarkdownForPrettier(m);c+=`

`+g.trim()}}return n.renderSection("Commands",c)+`
`}postWork(e,n){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c=l.replace("## Post-Work Verification",""),f=this.normalizeMarkdownForPrettier(c);return n.renderSection("Post-Work Verification",f.trim())+`
`}documentation(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"documentation");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.verifyBefore&&c.push("Review docs before changes"),l.verifyAfter&&c.push("Update docs after changes"),l.codeExamples&&c.push("Keep code examples accurate"),c.length===0)return null;const f=n.renderList(c);return n.renderSection("Documentation",f)+`
`}diagrams(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.getProp(s.content,"diagrams");if(!a||typeof a!="object"||Array.isArray(a))return null;const l=a,c=[];if(l.format&&c.push(`Use ${this.valueToString(l.format)} for diagrams`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),c.length===0)return null;const f=n.renderList(c);return n.renderSection("Diagrams",f)+`
`}donts(e,n){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractDontsItems(s.content);if(a.length===0)return null;const l=n.renderList(a);return n.renderSection("Don'ts",l)+`
`}extractDontsItems(e){const n=s=>s.replace(/^Never\s+/i,"Don't ");if(e.type==="ArrayContent")return e.elements.map(s=>n(this.valueToString(s)));if(e.type==="TextContent")return e.value.trim().split(`
`).map(s=>s.trim().replace(/^-\s*/,"")).filter(s=>s.length>0).map(n);if(e.type==="ObjectContent"){const s=this.getProp(e,"items");if(Array.isArray(s))return s.map(a=>n(this.valueToString(a)))}return[]}}const ls={modern:{name:"modern",description:"MDC format with YAML frontmatter (.cursor/rules/project.mdc) + slash commands (.cursor/commands/)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},frontmatter:{name:"frontmatter",description:"Alias for modern format (MDC with YAML frontmatter + slash commands)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},multifile:{name:"multifile",description:"Multiple MDC files with glob-based targeting + slash commands",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},legacy:{name:"legacy",description:"Plain text format (.cursorrules) - DEPRECATED",outputPath:".cursorrules",cursorVersion:"< 0.45",deprecated:!0,deprecatedSince:"2024-12"}};class VR extends $a{name="cursor";outputPath=ls.modern.outputPath;description="Cursor rules (MDC with frontmatter)";defaultConvention="markdown";static getSupportedVersions(){return ls}format(e,n){const s=n?.convention??this.defaultConvention;if(s!=="markdown"){const l=typeof s=="string"?s:"custom";throw new Error(`Cursor formatter does not support '${l}' convention. Only 'markdown' convention is supported for Cursor targets.`)}const a=this.resolveVersion(n?.version);return a==="legacy"?this.formatLegacy(e,n):a==="multifile"?this.formatMultifile(e,n):this.formatModern(e,n)}resolveVersion(e){return e==="legacy"?"legacy":e==="multifile"?"multifile":"modern"}formatModern(e,n){const s=[],a=this.frontmatter(e);s.push(a),this.addCommonSections(e,s);const l=this.generateCommandFiles(e);return{path:n?.outputPath??ls.modern.outputPath,content:s.join(`

`)+`
`,additionalFiles:l.length>0?l:void 0}}formatLegacy(e,n){const s=[];return this.addCommonSections(e,s),{path:n?.outputPath??ls.legacy.outputPath,content:s.join(`

`)+`
`}}formatMultifile(e,n){const s=[],a=this.extractGlobs(e);for(const b of a){const _=this.generateGlobFile(e,b);_&&s.push(_)}const l=this.generateShortcutsFile(e);l&&s.push(l);const c=this.generateCommandFiles(e);s.push(...c);const f=[];f.push(this.frontmatter(e)),f.push(this.intro(e));const h=this.techStack(e);h&&f.push(h);const m=this.architecture(e);m&&f.push(m);const g=this.codeStyle(e);g&&f.push(g);const y=this.gitCommits(e);y&&f.push(y);const S=this.configFiles(e);S&&f.push(S);const x=this.postWork(e);x&&f.push(x);const A=this.documentation(e);A&&f.push(A);const R=this.diagrams(e);R&&f.push(R);const j=this.never(e);return j&&f.push(j),{path:n?.outputPath??ls.modern.outputPath,content:f.join(`

`)+`
`,additionalFiles:s.length>0?s:void 0}}extractGlobs(e){const n=this.findBlock(e,"guards");if(!n)return[];const s=[],l=this.getProps(n.content).globs;if(Array.isArray(l)){const c=l.filter(m=>typeof m=="string"&&(m.includes(".ts")||m.includes(".tsx"))),f=l.filter(m=>typeof m=="string"&&(m.includes("test")||m.includes("spec")||m.includes("__tests__"))),h=l.filter(m=>typeof m=="string"&&!c.includes(m)&&!f.includes(m));c.length>0&&s.push({name:"typescript",patterns:c,description:"TypeScript-specific rules"}),f.length>0&&s.push({name:"testing",patterns:f,description:"Testing-specific rules"}),h.length>0&&s.push({name:"files",patterns:h,description:"File-specific rules"})}return s}generateGlobFile(e,n){const s=[],a=["---",`description: "${n.description}"`,"globs:",...n.patterns.map(l=>`  - "${l}"`),"---"];if(s.push(a.join(`
`)),n.name==="typescript"){const l=this.codeStyle(e);l&&s.push(l)}return n.name==="testing"&&(s.push("## Testing Guidelines"),s.push("Follow project testing conventions and patterns.")),s.length<=1?null:{path:`.cursor/rules/${n.name}.mdc`,content:s.join(`

`)+`
`}}generateShortcutsFile(e){const n=this.findBlock(e,"shortcuts");if(!n)return null;const s=this.getProps(n.content);if(Object.keys(s).length===0)return null;const a=[];a.push(["---",'description: "Project shortcuts and commands"',"alwaysApply: false","---"].join(`
`));const l=["## Commands"];for(const[c,f]of Object.entries(s)){const h=this.valueToString(f);if(typeof f=="object"&&!Array.isArray(f)){const m=f;l.push(`
### ${c}`),m.description&&l.push(this.valueToString(m.description)),Array.isArray(m.steps)&&(l.push(`
**Steps:**`),m.steps.forEach((g,y)=>{l.push(`${y+1}. ${this.valueToString(g)}`)}))}else l.push(`- **${c}**: ${h.split(`
`)[0]}`)}return a.push(l.join(`
`)),{path:".cursor/rules/shortcuts.mdc",content:a.join(`

`)+`
`}}generateCommandFiles(e){const n=this.findBlock(e,"shortcuts");if(!n)return[];const s=this.getProps(n.content),a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);if(f.includes(`
`)){const h=l.replace(/^\//,"");a.push({path:`.cursor/commands/${h}.md`,content:f.trim()})}}return a}addCommonSections(e,n){const s=this.intro(e);s&&n.push(s);const a=this.techStack(e);a&&n.push(a);const l=this.architecture(e);l&&n.push(l);const c=this.codeStyle(e);c&&n.push(c);const f=this.gitCommits(e);f&&n.push(f);const h=this.configFiles(e);h&&n.push(h);const m=this.commands(e);m&&n.push(m);const g=this.devCommands(e);g&&n.push(g);const y=this.postWork(e);y&&n.push(y);const S=this.documentation(e);S&&n.push(S);const x=this.diagrams(e);x&&n.push(x);const A=this.never(e);A&&n.push(A)}intro(e){const n=this.findBlock(e,"identity");if(n){const l=this.dedent(this.extractText(n.content));if(l.toLowerCase().startsWith("you are"))return l}const s=this.extractProjectInfo(e),a=s.org?` at ${s.org}`:"";return`You are working on ${s.text}${a}.`}frontmatter(e){return["---",`description: "${this.extractProjectDescription(e)}"`,"alwaysApply: true","---"].join(`
`)}extractProjectDescription(e){const n=this.getMetaField(e,"name");if(n)return`Project rules for ${n}`;const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"project");if(a&&typeof a=="string"){const c=/working on\s+(\w+)/i.exec(a);if(c)return`Project rules for ${c[1]}`}}return"Project-specific rules"}extractProjectInfo(e){const n=this.getMetaField(e,"org")??null,s=this.findBlock(e,"context");if(s){const l=this.getProp(s.content,"project");if(l&&typeof l=="string")return{text:l.trim(),org:n}}const a=this.findBlock(e,"identity");if(a){const c=this.extractText(a.content).split(`
`)[0]?.trim();if(c)return{text:c,org:n}}return{text:"the project",org:n}}techStack(e){const n=this.extractTechStackItems(e);return n.length>0?`Tech stack: ${n.join(", ")}`:null}extractTechStackItems(e){const n=[],s=this.findBlock(e,"context");return s&&this.extractTechFromContext(s.content,n),n.length===0&&this.extractTechFromStandards(e,n),n}extractTechFromContext(e,n){const s=this.getProp(e,"tech-stack");s&&n.push(...this.extractListItems(s));const a=this.getProp(e,"languages");a&&this.collectValueItems(n,a);const l=this.getProp(e,"runtime");l&&n.push(this.valueToString(l));const c=this.getProp(e,"monorepo");if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&n.push(`${this.valueToString(f.tool)}`),f.packageManager&&n.push(`${this.valueToString(f.packageManager)} workspaces`)}}extractTechFromStandards(e,n){const s=this.findBlock(e,"standards");if(!s)return;const a=this.getProp(s.content,"code");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=a;this.collectValueItems(n,l.languages),this.collectValueItems(n,l.frameworks),this.collectValueItems(n,l.testing)}}architecture(e){const n=this.findBlock(e,"context");if(!n)return null;const s=this.getProp(n.content,"architecture");if(s){const l=typeof s=="string"?s:this.valueToString(s);if(l.trim())return`Architecture:
${l.trim()}`}const a=this.extractText(n.content);return a?.includes("Architecture")?a.trim():null}codeStyle(e){const n=this.extractCodeStyleItems(e);return n.length===0?null:`Code style:
${n.map(s=>"- "+s).join(`
`)}`}extractCodeStyleItems(e){const n=this.findBlock(e,"standards");if(!n)return[];const s=this.standardsExtractor.extract(n.content),a=[];for(const l of s.codeStandards.values())a.push(...l.items);return a}gitCommits(e){const n=this.findBlock(e,"standards");if(n){const a=this.getProp(n.content,"git");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"git-commits");if(a&&typeof a=="object"&&!Array.isArray(a)){const l=this.extractGitItems(a);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}return null}extractGitItems(e){const n=[];for(const[s,a]of Object.entries(e))if(s==="types"&&Array.isArray(a)){const l=a.map(c=>this.valueToString(c)).join(", ");n.push(`types: ${l}`)}else typeof a=="string"?n.push(`${s}: ${a}`):typeof a=="number"&&n.push(`${s}: ${a}`);return n}configFiles(e){const n=this.extractConfigItems(e);return n.length===0?null:`Config:
${n.map(s=>"- "+s).join(`
`)}`}extractConfigItems(e){const n=this.findBlock(e,"standards");if(n){const a=this.getProp(n.content,"config"),l=this.extractConfigFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"configuration-files");return this.extractConfigFromObjectWithList(a)}return[]}extractConfigFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const n=[];for(const[s,a]of Object.entries(e))typeof a=="string"&&n.push(`${s}: ${a}`);return n}extractConfigFromObjectWithList(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const n=[];for(const[s,a]of Object.entries(e)){const l=this.extractListItems(a);l.length>0&&n.push(`${s}: ${l.join("; ")}`)}return n}commands(e){const n=this.findBlock(e,"shortcuts");if(!n)return null;const s=this.getProps(n.content);if(Object.keys(s).length===0)return null;const a=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c).split(`
`)[0]??"";a.push(`${l} - ${f}`)}return a.length>0?`Commands:
${a.join(`
`)}`:null}devCommands(e){const n=this.findBlock(e,"knowledge");if(!n)return null;const s=this.extractText(n.content),a=this.extractSectionWithCodeBlock(s,"## Development Commands");return a?`Development Commands:
${a.replace("## Development Commands","").trim()}`:null}postWork(e){const n=this.findBlock(e,"knowledge");if(!n)return null;const s=this.extractText(n.content),a=this.extractSectionWithCodeBlock(s,"## Post-Work Verification");return a?`Post-Work Verification:
${a.replace("## Post-Work Verification","").trim()}`:null}documentation(e){const n=this.extractDocItems(e);return n.length===0?null:`Documentation:
${n.map(s=>"- "+s).join(`
`)}`}extractDocItems(e){const n=this.findBlock(e,"standards");if(n){const a=this.getProp(n.content,"documentation"),l=this.extractStringValuesFromObject(a);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"documentation-verification");if(a)return this.extractListItems(a)}return[]}extractStringValuesFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const n=[];for(const s of Object.values(e))typeof s=="string"&&n.push(s);return n}diagrams(e){const n=this.extractDiagramItems(e);return n.length===0?null:`Diagrams:
${n.map(s=>"- "+s).join(`
`)}`}extractDiagramItems(e){const n=this.findBlock(e,"standards");if(n){const a=this.getProp(n.content,"diagrams"),l=this.parseDiagramObject(a,"format");if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const a=this.getProp(s.content,"diagrams");return this.parseDiagramObject(a,"tool")}return[]}parseDiagramObject(e,n){if(!e||typeof e!="object"||Array.isArray(e))return[];const s=e,a=[];return s[n]&&a.push(`Use ${this.valueToString(s[n])}`),s.types&&Array.isArray(s.types)&&a.push(`Types: ${s.types.map(l=>this.valueToString(l)).join(", ")}`),a}never(e){const n=this.findBlock(e,"restrictions");if(!n)return null;const s=this.extractNeverItems(n.content);return s.length===0?null:`Never:
${s.map(a=>"- "+a).join(`
`)}`}extractNeverItems(e){if(e.type==="ArrayContent")return e.elements.map(n=>this.valueToString(n));if(e.type==="TextContent")return e.value.trim().split(`
`).map(n=>n.trim().replace(/^-\s*/,"")).filter(n=>n.length>0);if(e.type==="ObjectContent"){const n=this.getProp(e,"items");if(Array.isArray(n))return n.map(s=>this.valueToString(s))}return[]}extractListItems(e){if(Array.isArray(e))return e.map(n=>this.valueToString(n));if(typeof e=="object"&&e!==null){const n=e,s=[];for(const[a,l]of Object.entries(n))s.push(`${a}: ${this.valueToString(l)}`);return s}return typeof e=="string"?e.split(`
`).map(n=>n.trim().replace(/^-\s*/,"")).filter(n=>n.length>0):[this.valueToString(e)]}collectValueItems(e,n){if(!n)return;const s=Array.isArray(n)?n:[n];for(const a of s)e.push(this.valueToString(a))}}const WR={simple:{name:"simple",description:"Plain Markdown without frontmatter",outputPath:".agent/rules/project.md"},frontmatter:{name:"frontmatter",description:"Markdown with YAML frontmatter for activation",outputPath:".agent/rules/project.md"}},ym=12e3;class GR extends $a{name="antigravity";outputPath=".agent/rules/project.md";description="Google Antigravity rules (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return WR}format(e,n){const s=this.resolveVersion(n?.version),a=this.createRenderer(n),l=[];if(s==="frontmatter"){const z=this.determineActivationType(e);l.push(this.generateFrontmatter(e,z))}l.push(this.header(e));const c=this.identity(e,a);c&&l.push(c);const f=this.techStack(e,a);f&&l.push(f);const h=this.architecture(e,a);h&&l.push(h);const m=this.codeStandards(e,a);m&&l.push(m);const g=this.gitCommits(e,a);g&&l.push(g);const y=this.configFiles(e,a);y&&l.push(y);const S=this.commands(e,a);S&&l.push(S);const x=this.devCommands(e,a);x&&l.push(x);const A=this.postWork(e,a);A&&l.push(A);const R=this.documentation(e,a);R&&l.push(R);const j=this.diagrams(e,a);j&&l.push(j);const b=this.restrictions(e,a);b&&l.push(b);const _=l.join(`

`)+`
`;this.validateContentLength(_);const P={path:this.getOutputPath(n),content:_},M=this.workflows(e);return M&&M.length>0?{path:P.path,content:P.content,additionalFiles:M}:P}resolveVersion(e){return e==="frontmatter"?"frontmatter":"simple"}determineActivationType(e){const n=this.findBlock(e,"guards");if(n){const s=this.getProps(n.content);if(s.globs||s.glob||s.files)return"glob"}return"always"}generateFrontmatter(e,n){const s=this.getMetaField(e,"name")??"Project Rules",a=this.extractProjectDescription(e);return["---",`title: "${s}"`,`activation: "${n}"`,`description: "${a}"`,"---"].join(`
`)}extractProjectDescription(e){const n=this.getMetaField(e,"description");if(n)return n;const s=this.findBlock(e,"identity");if(s){const a=this.extractText(s.content);if(a){const l=a.split(".")[0];return l&&l.length<=100?l:a.slice(0,100)+"..."}}return"Auto-generated project rules"}validateContentLength(e){e.length>ym&&console.warn(`Warning: Content exceeds Antigravity's ${ym.toLocaleString()} character limit (${e.length.toLocaleString()} chars). Consider splitting into multiple rules.`)}workflows(e){const n=this.findBlock(e,"shortcuts");if(!n)return null;const s=this.getProps(n.content),a=[];for(const[l,c]of Object.entries(s))if(this.isWorkflow(c)){const f=this.generateWorkflow(l,c);f&&a.push(f)}return a.length>0?a:null}isWorkflow(e){if(typeof e!="object"||e===null||Array.isArray(e))return!1;const n=e;return"steps"in n||"workflow"in n}generateWorkflow(e,n){if(typeof n!="object"||n===null||Array.isArray(n))return null;const s=n,a=s.steps??s.workflow,l=s.description??s.desc??"",c=e.replace(/^\//,"").replace(/\s+/g,"-").toLowerCase(),f=["---",`title: "${this.formatWorkflowTitle(e)}"`,`description: "${this.valueToString(l)}"`,"---","","## Steps",""];return Array.isArray(a)?a.forEach((h,m)=>{f.push(`${m+1}. ${this.valueToString(h)}`)}):typeof a=="string"&&a.split(`
`).map(m=>m.trim()).filter(m=>m.length>0).forEach((m,g)=>{const y=m.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"");f.push(`${g+1}. ${y}`)}),{path:`.agent/workflows/${c}.md`,content:f.join(`
`)}}formatWorkflowTitle(e){return e.replace(/^\//,"").split(/[-_]/).map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}header(e){return"# Project Rules"}identity(e,n){const s=this.findBlock(e,"identity");if(!s)return null;const a=this.extractText(s.content);return a?`## Project Identity

${this.stripAllIndent(a)}`:null}techStack(e,n){const s=this.findBlock(e,"context");if(!s)return null;const a=this.getProps(s.content),l=[],c=a.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Languages:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}const f=a.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=a.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,S=g.packageManager;y&&S?l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(S)} workspaces`):y&&l.push(`**Monorepo:** ${this.valueToString(y)}`)}const m=a.frameworks;if(m){const g=Array.isArray(m)?m:[m];l.push(`**Frameworks:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}return l.length===0?null:`## Tech Stack

${l.join(`
`)}`}architecture(e,n){const s=this.findBlock(e,"context");if(s){const l=this.extractText(s.content),c=this.extractSectionWithCodeBlock(l,"## Architecture");if(c){const m=c.replace("## Architecture","").trim();return`## Architecture

${this.stripAllIndent(m)}`}const h=this.getProps(s.content).architecture;if(h){const m=typeof h=="string"?h:this.valueToString(h);if(m.trim())return`## Architecture

${this.stripAllIndent(m.trim())}`}}const a=this.findBlock(e,"architecture");if(a){const l=this.extractText(a.content);if(l)return`## Architecture

${this.stripAllIndent(l)}`}return null}codeStandards(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const a=this.standardsExtractor.extract(s.content),l=[];for(const c of a.codeStandards.values())c.items.length>0&&l.push(`### ${c.title}

${c.items.map(f=>"- "+f).join(`
`)}`);return l.length===0?null:`## Code Standards

${l.join(`

`)}`}gitCommits(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:`## Git Commits

${f.map(S=>"- "+S).join(`
`)}`}configFiles(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(`### ESLint

- ESLint: ${g}`)}const m=c.viteRoot;if(m){const g=this.valueToString(m).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`### Vite/Vitest

- Vite root: ${g}`)}return f.length===0?null:`## Configuration Files

${f.join(`

`)}`}commands(e,n){const s=this.findBlock(e,"shortcuts");if(!s)return null;const a=this.getProps(s.content);if(Object.keys(a).length===0)return null;const l=[];for(const[c,f]of Object.entries(a)){if(this.isWorkflow(f))continue;const h=this.valueToString(f);h?l.push(`- **${c}**: ${h}`):l.push(`- **${c}**:`)}return l.length===0?null:`## Commands

${l.join(`
`)}`}devCommands(e,n){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return`## Development Commands

${this.stripAllIndent(c)}`}postWork(e,n){const s=this.findBlock(e,"knowledge");if(!s)return null;const a=this.extractText(s.content),l=this.extractSectionWithCodeBlock(a,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return`## Post-Work Verification

${c}
${this.stripAllIndent(f)}`}documentation(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:`## Documentation

${f.map(h=>"- "+h).join(`
`)}`}diagrams(e,n){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;if(h){const g=this.valueToString(h).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`Always use **${g}** syntax for diagrams in documentation`)}const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:`## Diagrams

${f.map(g=>"- "+g).join(`
`)}`}restrictions(e,n){const s=this.findBlock(e,"restrictions");if(!s)return null;const a=this.extractRestrictionsItems(s.content);return a.length===0?null:`## Don'ts

${a.map(l=>"- "+l).join(`
`)}`}extractRestrictionsItems(e){return e.type==="ArrayContent"?e.elements.map(n=>this.formatRestriction(this.valueToString(n))):e.type==="TextContent"?e.value.trim().split(`
`).filter(n=>n.trim()).map(n=>this.formatRestriction(n.trim())):[]}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}}Cr.register("github",()=>new DR);Cr.register("claude",()=>new zR);Cr.register("cursor",()=>new VR);Cr.register("antigravity",()=>new GR);const KR={id:"PS001",name:"required-meta-id",description:"@meta.id is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e){r.report({message:"@meta block is required",location:r.ast.loc,suggestion:"Add a @meta block with id and version fields"});return}e.fields?.id||r.report({message:'@meta block must include "id" field',location:e.loc??r.ast.loc,suggestion:'Add id: "your-project-id" to @meta'})}},HR={id:"PS002",name:"required-meta-syntax",description:"@meta.syntax is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;e&&(e.fields?.syntax||r.report({message:'@meta block must include "syntax" field',location:e.loc??r.ast.loc,suggestion:'Add syntax: "1.0.0" to @meta'}))}};function YR(r){if(!r)return!1;const n=r.split(/[-+]/)[0];if(!n)return!1;const s=n.split(".");if(s.length!==3)return!1;for(const a of s)if(!/^\d+$/.test(a)||a.length>1&&a.startsWith("0"))return!1;return!0}const XR={id:"PS003",name:"valid-semver",description:"Syntax version must be valid semantic version",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e?.fields?.syntax)return;const n=e.fields.syntax;if(typeof n!="string"){r.report({message:"@meta.syntax must be a string",location:e.loc??r.ast.loc,suggestion:'Use a string value like syntax: "1.0.0"'});return}YR(n)||r.report({message:`Invalid semantic version: "${n}"`,location:e.loc??r.ast.loc,suggestion:'Use semantic versioning format: MAJOR.MINOR.PATCH (e.g., "1.0.0", "2.1.0-beta.1")'})}},qR={id:"PS004",name:"required-guards",description:"Required guards must be present",defaultSeverity:"error",validate:r=>{const e=r.config.requiredGuards;if(!e||e.length===0)return;const n=r.ast.blocks.find(a=>a.name==="guards");if(!n){r.report({message:`Missing @guards block. Required guards: ${e.join(", ")}`,location:r.ast.loc,suggestion:"Add a @guards block with the required guard references"});return}const s=QR(n.content);for(const a of e)s.includes(a)||r.report({message:`Missing required guard: "${a}"`,location:n.loc??r.ast.loc,suggestion:`Add @use ${a} to include the required guard`})}};function QR(r){const e=[];if(r.type==="ArrayContent"&&Array.isArray(r.elements))for(const n of r.elements)typeof n=="string"&&e.push(n);else if(r.type==="ObjectContent"&&r.properties)for(const n of Object.keys(r.properties))e.push(n);return e}function ZR(r,e){for(const n of r.blocks)Sm(n.content,n.loc,e);for(const n of r.extends)Sm(n.content,n.loc,e)}function JR(r,e){for(const n of r.blocks)e(n);for(const n of r.extends)e(n)}function eN(r,e){for(const n of r.uses)e(n)}function Sm(r,e,n){switch(r.type){case"TextContent":n(r.value,r.loc??e);break;case"ObjectContent":Sc(r.properties,r.loc??e,n);break;case"ArrayContent":dv(r.elements,r.loc??e,n);break;case"MixedContent":r.text&&n(r.text.value,r.text.loc??e),Sc(r.properties,r.loc??e,n);break}}function Sc(r,e,n){for(const s of Object.values(r))hv(s,e,n)}function dv(r,e,n){for(const s of r)hv(s,e,n)}function hv(r,e,n){if(typeof r=="string")n(r,e);else if(Array.isArray(r))dv(r,e,n);else if(r!==null&&typeof r=="object")if("type"in r){const s=r;s.type==="TextContent"&&typeof s.value=="string"&&n(s.value,s.loc??e)}else Sc(r,e,n)}function tN(r){switch(r.type){case"TextContent":return r.value.trim().length>0;case"ObjectContent":return Object.keys(r.properties).length>0;case"ArrayContent":return r.elements.length>0;case"MixedContent":return(r.text?.value?.trim().length??0)>0||Object.keys(r.properties).length>0}}const nN=[/ignore\s+(all\s+)?previous\s+instructions/i,/pretend\s+(you\s+)?(are|to\s+be)/i,/jailbreak/i,/bypass\s+(your\s+)?(rules|restrictions)/i,/disregard\s+(all\s+)?(prior|previous)/i,/forget\s+(all\s+)?(prior|previous|your)/i,/act\s+as\s+if\s+you\s+(have\s+)?no\s+restrictions/i],rN={id:"PS005",name:"blocked-patterns",description:"Content must not contain blocked patterns (prompt injection prevention)",defaultSeverity:"error",validate:r=>{const e=[...nN,...(r.config.blockedPatterns??[]).map(n=>typeof n=="string"?new RegExp(n,"i"):n)];ZR(r.ast,(n,s)=>{for(const a of e)a.test(n)&&r.report({message:`Blocked pattern detected: ${a.source}`,location:s,suggestion:"Remove or rephrase the flagged content"})})}},Em={namespace:/^@[a-z][a-z0-9-]*\/[a-z0-9-/]+(@\d+\.\d+\.\d+)?$/i,relative:/^\.\.?\/[a-z0-9-/.]+$/i};function Tm(r){return Em.namespace.test(r)||Em.relative.test(r)}const iN={id:"PS006",name:"valid-path",description:"Path references must be valid",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;Tm(e.raw)||r.report({message:`Invalid path reference: "${e.raw}"`,location:r.ast.inherit.loc??r.ast.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})}eN(r.ast,e=>{Tm(e.path.raw)||r.report({message:`Invalid path reference: "${e.path.raw}"`,location:e.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})})}},sN={id:"PS007",name:"deprecated",description:"Warns about deprecated features",defaultSeverity:"warning",validate:r=>{const e={};for(const s of r.ast.blocks)s.name in e&&r.report({message:`Block "@${s.name}" is deprecated`,location:s.loc,suggestion:e[s.name]});const n={};if(r.ast.meta)for(const s of Object.keys(r.ast.meta.fields??{}))s in n&&r.report({message:`Meta field "${s}" is deprecated`,location:r.ast.meta.loc??r.ast.loc,suggestion:n[s]})}},oN={id:"PS008",name:"empty-block",description:"Blocks should have content",defaultSeverity:"warning",validate:r=>{JR(r.ast,e=>{if(!tN(e.content)){const n="name"in e?e.name:e.targetPath;r.report({message:`Block "${n}" has no content`,location:e.loc,suggestion:"Add content to the block or remove it if not needed"})}})}},aN=[KR,HR,XR,qR,rN,iN,sN,oN];class lN{rules;config;disabledRules;logger;constructor(e={}){if(this.config=e,this.rules=[...aN],this.disabledRules=new Set(e.disableRules??[]),this.logger=e.logger??Hc,e.customRules)for(const n of e.customRules)this.rules.push(n);this.logger.debug(`Validator initialized with ${this.rules.length} rules`)}validate(e){const n=[],s=this.rules.filter(f=>!this.disabledRules.has(f.name)&&!this.disabledRules.has(f.id));this.logger.verbose(`Running ${s.length} validation rules`);for(const f of this.rules){if(this.disabledRules.has(f.name)||this.disabledRules.has(f.id)){this.logger.debug(`Skipping disabled rule: ${f.name}`);continue}const m=this.config.rules?.[f.name]??f.defaultSeverity;if(m==="off"){this.logger.debug(`Skipping off rule: ${f.name}`);continue}this.logger.debug(`Running rule: ${f.name} (${m})`);const g={ast:e,config:this.config,report:y=>{n.push({ruleId:f.id,ruleName:f.name,severity:m,...y})}};f.validate(g)}const a=n.filter(f=>f.severity==="error"),l=n.filter(f=>f.severity==="warning"),c=n.filter(f=>f.severity==="info");return(a.length>0||l.length>0)&&this.logger.verbose(`Validation: ${a.length} error(s), ${l.length} warning(s)`),{valid:a.length===0,errors:a,warnings:l,infos:c,all:n}}addRule(e){this.rules.push(e)}removeRule(e){const n=this.rules.findIndex(s=>s.name===e||s.id===e);return n!==-1?(this.rules.splice(n,1),!0):!1}getConfig(){return{...this.config}}getRules(){return[...this.rules]}}class uN{resolver;validator;loadedFormatters;logger;customConventions;prettierOptions;constructor(e){this.logger=e.logger??Hc,this.customConventions=e.customConventions,this.prettierOptions=e.prettier,this.resolver=new LR({fs:e.fs,cache:e.cache,logger:this.logger,envVars:e.envVars}),this.validator=new lN({...e.validator,logger:this.logger});const n=e.formatters??Cr.list();this.loadedFormatters=this.loadFormatters(n),this.logger.debug(`BrowserCompiler initialized with ${this.loadedFormatters.length} formatters`)}async compile(e){this.logger.verbose(`Entry: ${e}`),this.logger.verbose(`Targets: ${this.loadedFormatters.map(y=>y.formatter.name).join(", ")}`);const n=Date.now(),s={resolveTime:0,validateTime:0,formatTime:0,totalTime:0};this.logger.verbose("=== Stage 1: Resolve ===");const a=Date.now();let l;try{l=await this.resolver.resolve(e)}catch(y){return s.resolveTime=Date.now()-a,s.totalTime=Date.now()-n,this.logger.verbose(`Resolve failed (${s.resolveTime}ms)`),{success:!1,outputs:new Map,errors:[this.toCompileError(y)],warnings:[],stats:s}}if(s.resolveTime=Date.now()-a,this.logger.verbose(`Resolve completed (${s.resolveTime}ms)`),l.errors.length>0||!l.ast)return s.totalTime=Date.now()-n,{success:!1,outputs:new Map,errors:l.errors.map(y=>this.toCompileError(y)),warnings:[],stats:s};this.logger.verbose("=== Stage 2: Validate ===");const c=Date.now(),f=this.validator.validate(l.ast);if(s.validateTime=Date.now()-c,this.logger.verbose(`Validate completed (${s.validateTime}ms)`),!f.valid)return s.totalTime=Date.now()-n,{success:!1,outputs:new Map,errors:f.errors.map(y=>this.validationToCompileError(y)),warnings:f.warnings,stats:s};this.logger.verbose("=== Stage 3: Format ===");const h=Date.now(),m=new Map,g=[];for(const{formatter:y,config:S}of this.loadedFormatters){const x=Date.now();this.logger.verbose(`Formatting for ${y.name}`);try{const A=this.getFormatOptionsForTarget(y.name,S);this.logger.debug(`  Convention: ${A.convention??"default"}`);const R=y.format(l.ast,A),j=Date.now()-x;if(this.logger.verbose(`   ${R.path} (${j}ms)`),m.set(R.path,R),R.additionalFiles)for(const b of R.additionalFiles)this.logger.verbose(`   ${b.path} (additional)`),m.set(b.path,b)}catch(A){g.push({name:"FormatterError",code:"PS4000",message:`Formatter '${y.name}' failed: ${A.message}`})}}return s.formatTime=Date.now()-h,s.totalTime=Date.now()-n,this.logger.verbose(`Format completed (${s.formatTime}ms)`),g.length>0?{success:!1,outputs:m,errors:g,warnings:f.warnings,stats:s}:{success:!0,outputs:m,errors:[],warnings:f.warnings,stats:s}}getFormatters(){return this.loadedFormatters.map(e=>e.formatter)}clearCache(){this.resolver.clearCache()}getFormatOptionsForTarget(e,n){const s={outputPath:n?.output,version:n?.version,prettier:this.prettierOptions},a=n?.convention;return a&&this.customConventions?.[a]?s.convention=this.customConventions[a]:a&&(s.convention=a),s}loadFormatters(e){return e.map(n=>{if(typeof n=="string")return{formatter:this.loadFormatterByName(n)};if(typeof n=="function")return{formatter:new n};if("name"in n&&typeof n.name=="string"&&!("format"in n)){const s=n;return{formatter:this.loadFormatterByName(s.name),config:s.config}}return{formatter:n}})}loadFormatterByName(e){const n=Cr.get(e);if(n)return n;throw new Error(`Unknown formatter: '${e}'. Available formatters: ${Cr.list().join(", ")}`)}toCompileError(e){const n=e;return{name:e.name,code:n.code??"PS0000",message:e.message,location:n.location?{file:n.location.file,line:n.location.line,column:n.location.column}:void 0}}validationToCompileError(e){return{name:"ValidationError",code:e.ruleId,message:e.message,location:e.location?{file:e.location.file,line:e.location.line,column:e.location.column}:void 0}}}const cN=`@meta {
  id: "@core/base"
  syntax: "1.0.0"
  description: "Universal AI assistant foundation"
  tags: [core, foundation]
}

@identity {
  """
  You are a helpful, accurate, and thoughtful AI assistant.

  Core principles:
  - Accuracy over speed - verify before responding
  - Clarity over complexity - explain simply first
  - Safety first - never compromise security
  - Respect boundaries - acknowledge limitations
  """
}

@standards {
  communication: ["Professional tone", "Clear format", "Citations when applicable"]
  reasoning: ["Show work", "Acknowledge uncertainty"]
}

@restrictions {
  - "Never generate harmful, illegal, or unethical content"
  - "Never pretend to have capabilities you don't have"
  - "Always clarify when unsure rather than guessing"
}
`,fN=`@meta {
  id: "@core/quality"
  syntax: "1.0.0"
  description: "Code quality standards mixin - use with @use"
  tags: [core, quality, mixin]
  mixin: true
}

@identity {
  """
  You prioritize code quality and maintainability in all outputs.

  Quality principles:
  - Write code for humans first, machines second
  - Favor readability over cleverness
  - Keep functions small and focused
  - Make dependencies explicit
  """
}

@standards {
  code: ["Descriptive naming", "Single responsibility functions", "Consistent formatting"]
  architecture: ["Loose coupling", "High cohesion", "Explicit dependencies"]
  testing: ["Meaningful coverage", "Isolated tests", "Descriptive naming"]
}

@restrictions {
  - "Never sacrifice readability for micro-optimizations"
  - "Never leave dead code or commented-out blocks"
  - "Never use magic numbers without named constants"
  - "Never ignore compiler/linter warnings without justification"
}

@knowledge {
  """
  ## SOLID Principles
  - **S**ingle Responsibility: One reason to change
  - **O**pen/Closed: Open for extension, closed for modification
  - **L**iskov Substitution: Subtypes must be substitutable
  - **I**nterface Segregation: Many specific interfaces over one general
  - **D**ependency Inversion: Depend on abstractions
  """
}

@shortcuts {
  "/quality": "Review code for quality improvements"
  "/refactor": "Suggest refactoring opportunities"
}
`,dN=`@meta {
  id: "@core/security"
  syntax: "1.0.0"
  description: "Security best practices mixin - use with @use"
  tags: [core, security, mixin]
  mixin: true
}

@identity {
  """
  You prioritize security in all interactions and code generation.

  Security mindset:
  - Assume all input is potentially malicious
  - Apply defense in depth principles
  - Follow the principle of least privilege
  - Keep security considerations visible
  """
}

@standards {
  code: ["Input validation required", "Output encoding required", "Check authorization"]
  secrets: ["Never hardcoded", "Never logged", "Prevent exposure"]
  dependencies: ["Audit regularly", "Pin versions", "Use trusted sources only"]
}

@restrictions {
  - "Never generate code with known vulnerabilities"
  - "Never expose secrets, credentials, or API keys"
  - "Never disable security features without explicit user consent"
  - "Never trust user input without validation"
  - "Never use deprecated or insecure cryptographic functions"
}

@knowledge {
  """
  ## OWASP Top 10 Awareness
  - Injection (SQL, NoSQL, OS, LDAP)
  - Broken Authentication
  - Sensitive Data Exposure
  - XML External Entities (XXE)
  - Broken Access Control
  - Security Misconfiguration
  - Cross-Site Scripting (XSS)
  - Insecure Deserialization
  - Using Components with Known Vulnerabilities
  - Insufficient Logging & Monitoring
  """
}

@shortcuts {
  "/security-review": "Review code for security vulnerabilities"
  "/threat-model": "Analyze potential security threats"
}
`,hN={"@core/base.prs":cN,"@core/quality.prs":fN,"@core/security.prs":dN};function pN(){return{...hN}}async function mN(r,e,n={}){const s=new Tc(r);if(n.bundledRegistry!==!1){const l=pN();for(const[c,f]of Object.entries(l))s.exists(c)||s.write(c,f)}return new uN({fs:s,formatters:n.formatters,validator:n.validator,customConventions:n.customConventions,prettier:n.prettier,envVars:n.envVars}).compile(e)}const gN=300;function vN(){const r=ie(F0),e=ie(h=>h.activeFile),n=ie(h=>h.config),s=ie(h=>h.setCompiling),a=ie(h=>h.setCompileResult),l=Z.useRef(null),c=Z.useRef(""),f=Z.useCallback(async()=>{const h=JSON.stringify({files:r,config:n});if(h===c.current)return;c.current=h;const m=Object.entries(n.targets).filter(([,g])=>g.enabled).map(([g,y])=>({name:g,config:y.version||y.convention?{...y.version&&{version:y.version},...y.convention&&{convention:y.convention}}:void 0}));if(m.length===0){a({success:!0,outputs:new Map,errors:[],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}});return}s(!0);try{const g=await mN(r,e,{bundledRegistry:!0,formatters:m,prettier:{tabWidth:n.formatting.tabWidth,proseWrap:n.formatting.proseWrap,printWidth:n.formatting.printWidth},envVars:n.envVars});a(g)}catch(g){console.error("Compilation error:",g),a({success:!1,outputs:new Map,errors:[{name:"CompileError",code:"PS0000",message:g instanceof Error?g.message:String(g)}],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}})}finally{s(!1)}},[r,e,n,s,a]);return Z.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{f()},gN),()=>{l.current&&clearTimeout(l.current)}),[f]),Z.useEffect(()=>{f()},[n]),{compile:f}}function yN(){vN();const r=ie(e=>e.showExamples);return C.jsxs("div",{className:"h-screen flex flex-col bg-ps-bg",children:[C.jsx(eS,{}),C.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[C.jsxs("div",{className:"w-1/2 flex flex-col border-r border-ps-border",children:[C.jsx(tS,{}),C.jsx("div",{className:"flex-1",children:C.jsx(gE,{})})]}),C.jsx("div",{className:"w-1/2 flex flex-col",children:C.jsx(SE,{})})]}),r&&C.jsx(xE,{}),C.jsx(RE,{}),C.jsx(IE,{})]})}const pv=document.getElementById("root");if(!pv)throw new Error("Root element not found");E0.createRoot(pv).render(C.jsx(Z.StrictMode,{children:C.jsx(yN,{})}))});export default SN();
