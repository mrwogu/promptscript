var Q0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var wO=Q0((_t,Pt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function jc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Uu={exports:{}},us={},Du={exports:{}},ge={};var rp;function Z0(){if(rp)return ge;rp=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=y&&x[y]||x["@@iterator"],typeof x=="function"?x:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,R={};function j(x,F,fe){this.props=x,this.context=F,this.refs=R,this.updater=fe||T}j.prototype.isReactComponent={},j.prototype.setState=function(x,F){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,F,"setState")},j.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function M(){}M.prototype=j.prototype;function _(x,F,fe){this.props=x,this.context=F,this.refs=R,this.updater=fe||T}var P=_.prototype=new M;P.constructor=_,w(P,j.prototype),P.isPureReactComponent=!0;var b=Array.isArray,z=Object.prototype.hasOwnProperty,L={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function G(x,F,fe){var te,Ee={},oe=null,he=null;if(F!=null)for(te in F.ref!==void 0&&(he=F.ref),F.key!==void 0&&(oe=""+F.key),F)z.call(F,te)&&!D.hasOwnProperty(te)&&(Ee[te]=F[te]);var ve=arguments.length-2;if(ve===1)Ee.children=fe;else if(1<ve){for(var me=Array(ve),Le=0;Le<ve;Le++)me[Le]=arguments[Le+2];Ee.children=me}if(x&&x.defaultProps)for(te in ve=x.defaultProps,ve)Ee[te]===void 0&&(Ee[te]=ve[te]);return{$$typeof:r,type:x,key:oe,ref:he,props:Ee,_owner:L.current}}function xe(x,F){return{$$typeof:r,type:x.type,key:F,ref:x.ref,props:x.props,_owner:x._owner}}function ce(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function Ge(x){var F={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(fe){return F[fe]})}var tt=/\/+/g;function $e(x,F){return typeof x=="object"&&x!==null&&x.key!=null?Ge(""+x.key):F.toString(36)}function Ue(x,F,fe,te,Ee){var oe=typeof x;(oe==="undefined"||oe==="boolean")&&(x=null);var he=!1;if(x===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(x.$$typeof){case r:case e:he=!0}}if(he)return he=x,Ee=Ee(he),x=te===""?"."+$e(he,0):te,b(Ee)?(fe="",x!=null&&(fe=x.replace(tt,"$&/")+"/"),Ue(Ee,F,fe,"",function(Le){return Le})):Ee!=null&&(ce(Ee)&&(Ee=xe(Ee,fe+(!Ee.key||he&&he.key===Ee.key?"":(""+Ee.key).replace(tt,"$&/")+"/")+x)),F.push(Ee)),1;if(he=0,te=te===""?".":te+":",b(x))for(var ve=0;ve<x.length;ve++){oe=x[ve];var me=te+$e(oe,ve);he+=Ue(oe,F,fe,me,Ee)}else if(me=E(x),typeof me=="function")for(x=me.call(x),ve=0;!(oe=x.next()).done;)oe=oe.value,me=te+$e(oe,ve++),he+=Ue(oe,F,fe,me,Ee);else if(oe==="object")throw F=String(x),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return he}function de(x,F,fe){if(x==null)return x;var te=[],Ee=0;return Ue(x,te,"","",function(oe){return F.call(fe,oe,Ee++)}),te}function ye(x){if(x._status===-1){var F=x._result;F=F(),F.then(function(fe){(x._status===0||x._status===-1)&&(x._status=1,x._result=fe)},function(fe){(x._status===0||x._status===-1)&&(x._status=2,x._result=fe)}),x._status===-1&&(x._status=0,x._result=F)}if(x._status===1)return x._result.default;throw x._result}var Ae={current:null},W={transition:null},J={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function H(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:de,forEach:function(x,F,fe){de(x,function(){F.apply(this,arguments)},fe)},count:function(x){var F=0;return de(x,function(){F++}),F},toArray:function(x){return de(x,function(F){return F})||[]},only:function(x){if(!ce(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},ge.Component=j,ge.Fragment=t,ge.Profiler=o,ge.PureComponent=_,ge.StrictMode=s,ge.Suspense=h,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ge.act=H,ge.cloneElement=function(x,F,fe){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var te=w({},x.props),Ee=x.key,oe=x.ref,he=x._owner;if(F!=null){if(F.ref!==void 0&&(oe=F.ref,he=L.current),F.key!==void 0&&(Ee=""+F.key),x.type&&x.type.defaultProps)var ve=x.type.defaultProps;for(me in F)z.call(F,me)&&!D.hasOwnProperty(me)&&(te[me]=F[me]===void 0&&ve!==void 0?ve[me]:F[me])}var me=arguments.length-2;if(me===1)te.children=fe;else if(1<me){ve=Array(me);for(var Le=0;Le<me;Le++)ve[Le]=arguments[Le+2];te.children=ve}return{$$typeof:r,type:x.type,key:Ee,ref:oe,props:te,_owner:he}},ge.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:l,_context:x},x.Consumer=x},ge.createElement=G,ge.createFactory=function(x){var F=G.bind(null,x);return F.type=x,F},ge.createRef=function(){return{current:null}},ge.forwardRef=function(x){return{$$typeof:f,render:x}},ge.isValidElement=ce,ge.lazy=function(x){return{$$typeof:g,_payload:{_status:-1,_result:x},_init:ye}},ge.memo=function(x,F){return{$$typeof:m,type:x,compare:F===void 0?null:F}},ge.startTransition=function(x){var F=W.transition;W.transition={};try{x()}finally{W.transition=F}},ge.unstable_act=H,ge.useCallback=function(x,F){return Ae.current.useCallback(x,F)},ge.useContext=function(x){return Ae.current.useContext(x)},ge.useDebugValue=function(){},ge.useDeferredValue=function(x){return Ae.current.useDeferredValue(x)},ge.useEffect=function(x,F){return Ae.current.useEffect(x,F)},ge.useId=function(){return Ae.current.useId()},ge.useImperativeHandle=function(x,F,fe){return Ae.current.useImperativeHandle(x,F,fe)},ge.useInsertionEffect=function(x,F){return Ae.current.useInsertionEffect(x,F)},ge.useLayoutEffect=function(x,F){return Ae.current.useLayoutEffect(x,F)},ge.useMemo=function(x,F){return Ae.current.useMemo(x,F)},ge.useReducer=function(x,F,fe){return Ae.current.useReducer(x,F,fe)},ge.useRef=function(x){return Ae.current.useRef(x)},ge.useState=function(x){return Ae.current.useState(x)},ge.useSyncExternalStore=function(x,F,fe){return Ae.current.useSyncExternalStore(x,F,fe)},ge.useTransition=function(){return Ae.current.useTransition()},ge.version="18.3.1",ge}var ip;function Ns(){return ip||(ip=1,Du.exports=Z0()),Du.exports}var sp;function J0(){if(sp)return us;sp=1;var r=Ns(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var g,y={},E=null,T=null;m!==void 0&&(E=""+m),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(T=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(f&&f.defaultProps)for(g in h=f.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:f,key:E,ref:T,props:y,_owner:o.current}}return us.Fragment=t,us.jsx=c,us.jsxs=c,us}var op;function eE(){return op||(op=1,Uu.exports=J0()),Uu.exports}var C=eE(),Z=Ns();const Nr=jc(Z);var Yo={},Bu={exports:{}},St={},zu={exports:{}},Vu={};var ap;function tE(){return ap||(ap=1,(function(r){function e(W,J){var H=W.length;W.push(J);e:for(;0<H;){var x=H-1>>>1,F=W[x];if(0<o(F,J))W[x]=J,W[H]=F,H=x;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var J=W[0],H=W.pop();if(H!==J){W[0]=H;e:for(var x=0,F=W.length,fe=F>>>1;x<fe;){var te=2*(x+1)-1,Ee=W[te],oe=te+1,he=W[oe];if(0>o(Ee,H))oe<F&&0>o(he,Ee)?(W[x]=he,W[oe]=H,x=oe):(W[x]=Ee,W[te]=H,x=te);else if(oe<F&&0>o(he,H))W[x]=he,W[oe]=H,x=oe;else break e}}return J}function o(W,J){var H=W.sortIndex-J.sortIndex;return H!==0?H:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,E=3,T=!1,w=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var J=t(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=W)s(m),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(m)}}function b(W){if(R=!1,P(W),!w)if(t(h)!==null)w=!0,ye(z);else{var J=t(m);J!==null&&Ae(b,J.startTime-W)}}function z(W,J){w=!1,R&&(R=!1,M(G),G=-1),T=!0;var H=E;try{for(P(J),y=t(h);y!==null&&(!(y.expirationTime>J)||W&&!Ge());){var x=y.callback;if(typeof x=="function"){y.callback=null,E=y.priorityLevel;var F=x(y.expirationTime<=J);J=r.unstable_now(),typeof F=="function"?y.callback=F:y===t(h)&&s(h),P(J)}else s(h);y=t(h)}if(y!==null)var fe=!0;else{var te=t(m);te!==null&&Ae(b,te.startTime-J),fe=!1}return fe}finally{y=null,E=H,T=!1}}var L=!1,D=null,G=-1,xe=5,ce=-1;function Ge(){return!(r.unstable_now()-ce<xe)}function tt(){if(D!==null){var W=r.unstable_now();ce=W;var J=!0;try{J=D(!0,W)}finally{J?$e():(L=!1,D=null)}}else L=!1}var $e;if(typeof _=="function")$e=function(){_(tt)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,de=Ue.port2;Ue.port1.onmessage=tt,$e=function(){de.postMessage(null)}}else $e=function(){j(tt,0)};function ye(W){D=W,L||(L=!0,$e())}function Ae(W,J){G=j(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){w||T||(w=!0,ye(z))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(W){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var H=E;E=J;try{return W()}finally{E=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=E;E=W;try{return J()}finally{E=H}},r.unstable_scheduleCallback=function(W,J,H){var x=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?x+H:x):H=x,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=H+F,W={id:g++,callback:J,priorityLevel:W,startTime:H,expirationTime:F,sortIndex:-1},H>x?(W.sortIndex=H,e(m,W),t(h)===null&&W===t(m)&&(R?(M(G),G=-1):R=!0,Ae(b,H-x))):(W.sortIndex=F,e(h,W),w||T||(w=!0,ye(z))),W},r.unstable_shouldYield=Ge,r.unstable_wrapCallback=function(W){var J=E;return function(){var H=E;E=J;try{return W.apply(this,arguments)}finally{E=H}}}})(Vu)),Vu}var lp;function nE(){return lp||(lp=1,zu.exports=tE()),zu.exports}var up;function rE(){if(up)return St;up=1;var r=Ns(),e=nE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function E(n){return h.call(y,n)?!0:h.call(g,n)?!1:m.test(n)?y[n]=!0:(g[n]=!0,!1)}function T(n,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w(n,i,a,u){if(i===null||typeof i>"u"||T(n,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function R(n,i,a,u,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new R(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new R(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new R(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new R(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new R(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new R(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new R(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new R(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new R(n,5,!1,n.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function _(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(M,_);j[i]=new R(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new R(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,a,u){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,a,d,u)&&(a=null),u||d===null?E(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,u=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,u?n.setAttributeNS(u,i,a):n.setAttribute(i,a))))}var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),L=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var H=Object.assign,x;function F(n){if(x===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);x=i&&i[1]||""}return`
`+x+n}var fe=!1;function te(n,i){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var u=O}Reflect.construct(n,[],i)}else{try{i.call()}catch(O){u=O}n.call(i.prototype)}else{try{throw Error()}catch(O){u=O}n()}}catch(O){if(O&&u&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),p=u.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var k=`
`+d[v].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=v&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?F(n):""}function Ee(n){switch(n.tag){case 5:return F(n.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case L:return"Portal";case xe:return"Profiler";case G:return"StrictMode";case $e:return"Suspense";case Ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case ce:return(n._context.displayName||"Context")+".Provider";case tt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return i=n.displayName||null,i!==null?i:oe(n.type)||"Memo";case ye:i=n._payload,n=n._init;try{return oe(n(i))}catch{}}return null}function he(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ve(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function me(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Le(n){var i=me(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function xt(n){n._valueTracker||(n._valueTracker=Le(n))}function jt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=me(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function Ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hr(n,i){var a=i.checked;return H({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ai(n,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=ve(i.value!=null?i.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ff(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function Ka(n,i){ff(n,i);var a=ve(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ya(n,i.type,a):i.hasOwnProperty("defaultValue")&&Ya(n,i.type,ve(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function df(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ya(n,i,a){(i!=="number"||Ft(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var xi=Array.isArray;function Fr(n,i,a,u){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+ve(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Xa(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hf(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(xi(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:ve(a)}}function pf(n,i){var a=ve(i.value),u=ve(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function mf(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function gf(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?gf(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Us,yf=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,u,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,u,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Us.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function wi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tv=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(n){tv.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ci[i]=Ci[n]})});function vf(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ci.hasOwnProperty(n)&&Ci[n]?(""+i).trim():i+"px"}function Ef(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,d=vf(a,i[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,d):n[a]=d}}var nv=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qa(n,i){if(i){if(nv[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Za(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function el(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tl=null,$r=null,Ur=null;function Sf(n){if(n=Yi(n)){if(typeof tl!="function")throw Error(t(280));var i=n.stateNode;i&&(i=lo(i),tl(n.stateNode,n.type,i))}}function Tf(n){$r?Ur?Ur.push(n):Ur=[n]:$r=n}function kf(){if($r){var n=$r,i=Ur;if(Ur=$r=null,Sf(n),i)for(n=0;n<i.length;n++)Sf(i[n])}}function Af(n,i){return n(i)}function xf(){}var nl=!1;function wf(n,i,a){if(nl)return n(i,a);nl=!0;try{return Af(n,i,a)}finally{nl=!1,($r!==null||Ur!==null)&&(xf(),kf())}}function Ri(n,i){var a=n.stateNode;if(a===null)return null;var u=lo(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var rl=!1;if(f)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{rl=!1}function rv(n,i,a,u,d,p,v,S,k){var O=Array.prototype.slice.call(arguments,3);try{i.apply(a,O)}catch(U){this.onError(U)}}var Ii=!1,Ds=null,Bs=!1,il=null,iv={onError:function(n){Ii=!0,Ds=n}};function sv(n,i,a,u,d,p,v,S,k){Ii=!1,Ds=null,rv.apply(iv,arguments)}function ov(n,i,a,u,d,p,v,S,k){if(sv.apply(this,arguments),Ii){if(Ii){var O=Ds;Ii=!1,Ds=null}else throw Error(t(198));Bs||(Bs=!0,il=O)}}function pr(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Cf(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Rf(n){if(pr(n)!==n)throw Error(t(188))}function av(n){var i=n.alternate;if(!i){if(i=pr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,u=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Rf(d),n;if(p===u)return Rf(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==u.return)a=d,u=p;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,u=p;break}if(S===u){v=!0,u=d,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,u=d;break}if(S===u){v=!0,u=p,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==u)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Nf(n){return n=av(n),n!==null?If(n):null}function If(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=If(n);if(i!==null)return i;n=n.sibling}return null}var Of=e.unstable_scheduleCallback,_f=e.unstable_cancelCallback,lv=e.unstable_shouldYield,uv=e.unstable_requestPaint,Ve=e.unstable_now,cv=e.unstable_getCurrentPriorityLevel,sl=e.unstable_ImmediatePriority,Pf=e.unstable_UserBlockingPriority,zs=e.unstable_NormalPriority,fv=e.unstable_LowPriority,Lf=e.unstable_IdlePriority,Vs=null,dn=null;function dv(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Vs,n,void 0,(n.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:mv,hv=Math.log,pv=Math.LN2;function mv(n){return n>>>=0,n===0?32:31-(hv(n)/pv|0)|0}var Ws=64,Gs=4194304;function Oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hs(n,i){var a=n.pendingLanes;if(a===0)return 0;var u=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?u=Oi(S):(p&=v,p!==0&&(u=Oi(p)))}else v=a&~d,v!==0?u=Oi(v):p!==0&&(u=Oi(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)a=31-Qt(i),d=1<<a,u|=n[a],i&=~d;return u}function gv(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yv(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-Qt(p),S=1<<v,k=d[v];k===-1?((S&a)===0||(S&u)!==0)&&(d[v]=gv(S,i)):k<=i&&(n.expiredLanes|=S),p&=~S}}function ol(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bf(){var n=Ws;return Ws<<=1,(Ws&4194240)===0&&(Ws=64),n}function al(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function _i(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Qt(i),n[i]=a}function vv(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Qt(a),p=1<<d;i[d]=0,u[d]=-1,n[d]=-1,a&=~p}}function ll(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Qt(a),d=1<<u;d&i|n[u]&i&&(n[u]|=i),a&=~d}}var we=0;function Mf(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var jf,ul,Ff,$f,Uf,cl=!1,Ks=[],Un=null,Dn=null,Bn=null,Pi=new Map,Li=new Map,zn=[],Ev="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Df(n,i){switch(n){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(i.pointerId)}}function bi(n,i,a,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Yi(i),i!==null&&ul(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Sv(n,i,a,u,d){switch(i){case"focusin":return Un=bi(Un,n,i,a,u,d),!0;case"dragenter":return Dn=bi(Dn,n,i,a,u,d),!0;case"mouseover":return Bn=bi(Bn,n,i,a,u,d),!0;case"pointerover":var p=d.pointerId;return Pi.set(p,bi(Pi.get(p)||null,n,i,a,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Li.set(p,bi(Li.get(p)||null,n,i,a,u,d)),!0}return!1}function Bf(n){var i=mr(n.target);if(i!==null){var a=pr(i);if(a!==null){if(i=a.tag,i===13){if(i=Cf(a),i!==null){n.blockedOn=i,Uf(n.priority,function(){Ff(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ys(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=dl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Ja=u,a.target.dispatchEvent(u),Ja=null}else return i=Yi(a),i!==null&&ul(i),n.blockedOn=a,!1;i.shift()}return!0}function zf(n,i,a){Ys(n)&&a.delete(i)}function Tv(){cl=!1,Un!==null&&Ys(Un)&&(Un=null),Dn!==null&&Ys(Dn)&&(Dn=null),Bn!==null&&Ys(Bn)&&(Bn=null),Pi.forEach(zf),Li.forEach(zf)}function Mi(n,i){n.blockedOn===i&&(n.blockedOn=null,cl||(cl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tv)))}function ji(n){function i(d){return Mi(d,n)}if(0<Ks.length){Mi(Ks[0],n);for(var a=1;a<Ks.length;a++){var u=Ks[a];u.blockedOn===n&&(u.blockedOn=null)}}for(Un!==null&&Mi(Un,n),Dn!==null&&Mi(Dn,n),Bn!==null&&Mi(Bn,n),Pi.forEach(i),Li.forEach(i),a=0;a<zn.length;a++)u=zn[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<zn.length&&(a=zn[0],a.blockedOn===null);)Bf(a),a.blockedOn===null&&zn.shift()}var Dr=b.ReactCurrentBatchConfig,Xs=!0;function kv(n,i,a,u){var d=we,p=Dr.transition;Dr.transition=null;try{we=1,fl(n,i,a,u)}finally{we=d,Dr.transition=p}}function Av(n,i,a,u){var d=we,p=Dr.transition;Dr.transition=null;try{we=4,fl(n,i,a,u)}finally{we=d,Dr.transition=p}}function fl(n,i,a,u){if(Xs){var d=dl(n,i,a,u);if(d===null)Il(n,i,u,qs,a),Df(n,u);else if(Sv(d,n,i,a,u))u.stopPropagation();else if(Df(n,u),i&4&&-1<Ev.indexOf(n)){for(;d!==null;){var p=Yi(d);if(p!==null&&jf(p),p=dl(n,i,a,u),p===null&&Il(n,i,u,qs,a),p===d)break;d=p}d!==null&&u.stopPropagation()}else Il(n,i,u,null,a)}}var qs=null;function dl(n,i,a,u){if(qs=null,n=el(u),n=mr(n),n!==null)if(i=pr(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Cf(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return qs=n,null}function Vf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cv()){case sl:return 1;case Pf:return 4;case zs:case fv:return 16;case Lf:return 536870912;default:return 16}default:return 16}}var Vn=null,hl=null,Qs=null;function Wf(){if(Qs)return Qs;var n,i=hl,a=i.length,u,d="value"in Vn?Vn.value:Vn.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(u=1;u<=v&&i[a-u]===d[p-u];u++);return Qs=d.slice(n,1<u?1-u:void 0)}function Zs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Js(){return!0}function Gf(){return!1}function wt(n){function i(a,u,d,p,v){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Js:Gf,this.isPropagationStopped=Gf,this}return H(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),i}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=wt(Br),Fi=H({},Br,{view:0,detail:0}),xv=wt(Fi),ml,gl,$i,eo=H({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$i&&($i&&n.type==="mousemove"?(ml=n.screenX-$i.screenX,gl=n.screenY-$i.screenY):gl=ml=0,$i=n),ml)},movementY:function(n){return"movementY"in n?n.movementY:gl}}),Hf=wt(eo),wv=H({},eo,{dataTransfer:0}),Cv=wt(wv),Rv=H({},Fi,{relatedTarget:0}),yl=wt(Rv),Nv=H({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=wt(Nv),Ov=H({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_v=wt(Ov),Pv=H({},Br,{data:0}),Kf=wt(Pv),Lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Mv[n])?!!i[n]:!1}function vl(){return jv}var Fv=H({},Fi,{key:function(n){if(n.key){var i=Lv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?Zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$v=wt(Fv),Uv=H({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=wt(Uv),Dv=H({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),Bv=wt(Dv),zv=H({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vv=wt(zv),Wv=H({},eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gv=wt(Wv),Hv=[9,13,27,32],El=f&&"CompositionEvent"in window,Ui=null;f&&"documentMode"in document&&(Ui=document.documentMode);var Kv=f&&"TextEvent"in window&&!Ui,Xf=f&&(!El||Ui&&8<Ui&&11>=Ui),qf=" ",Qf=!1;function Zf(n,i){switch(n){case"keyup":return Hv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zr=!1;function Yv(n,i){switch(n){case"compositionend":return Jf(i);case"keypress":return i.which!==32?null:(Qf=!0,qf);case"textInput":return n=i.data,n===qf&&Qf?null:n;default:return null}}function Xv(n,i){if(zr)return n==="compositionend"||!El&&Zf(n,i)?(n=Wf(),Qs=hl=Vn=null,zr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Xf&&i.locale!=="ko"?null:i.data;default:return null}}var qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!qv[n.type]:i==="textarea"}function td(n,i,a,u){Tf(u),i=so(i,"onChange"),0<i.length&&(a=new pl("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var Di=null,Bi=null;function Qv(n){Ed(n,0)}function to(n){var i=Kr(n);if(jt(i))return n}function Zv(n,i){if(n==="change")return i}var nd=!1;if(f){var Sl;if(f){var Tl="oninput"in document;if(!Tl){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),Tl=typeof rd.oninput=="function"}Sl=Tl}else Sl=!1;nd=Sl&&(!document.documentMode||9<document.documentMode)}function id(){Di&&(Di.detachEvent("onpropertychange",sd),Bi=Di=null)}function sd(n){if(n.propertyName==="value"&&to(Bi)){var i=[];td(i,Bi,n,el(n)),wf(Qv,i)}}function Jv(n,i,a){n==="focusin"?(id(),Di=i,Bi=a,Di.attachEvent("onpropertychange",sd)):n==="focusout"&&id()}function e0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return to(Bi)}function t0(n,i){if(n==="click")return to(i)}function n0(n,i){if(n==="input"||n==="change")return to(i)}function r0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Zt=typeof Object.is=="function"?Object.is:r0;function zi(n,i){if(Zt(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!h.call(i,d)||!Zt(n[d],i[d]))return!1}return!0}function od(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ad(n,i){var a=od(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=od(a)}}function ld(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ld(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ud(){for(var n=window,i=Ft();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ft(n.document)}return i}function kl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function i0(n){var i=ud(),a=n.focusedElem,u=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&ld(a.ownerDocument.documentElement,a)){if(u!==null&&kl(a)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!n.extend&&p>u&&(d=u,u=p,p=d),d=ad(a,p);var v=ad(a,u);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>u?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s0=f&&"documentMode"in document&&11>=document.documentMode,Vr=null,Al=null,Vi=null,xl=!1;function cd(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xl||Vr==null||Vr!==Ft(u)||(u=Vr,"selectionStart"in u&&kl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vi&&zi(Vi,u)||(Vi=u,u=so(Al,"onSelect"),0<u.length&&(i=new pl("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Vr)))}function no(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Wr={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionend:no("Transition","TransitionEnd")},wl={},fd={};f&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function ro(n){if(wl[n])return wl[n];if(!Wr[n])return n;var i=Wr[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in fd)return wl[n]=i[a];return n}var dd=ro("animationend"),hd=ro("animationiteration"),pd=ro("animationstart"),md=ro("transitionend"),gd=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(n,i){gd.set(n,i),l(i,[n])}for(var Cl=0;Cl<yd.length;Cl++){var Rl=yd[Cl],o0=Rl.toLowerCase(),a0=Rl[0].toUpperCase()+Rl.slice(1);Wn(o0,"on"+a0)}Wn(dd,"onAnimationEnd"),Wn(hd,"onAnimationIteration"),Wn(pd,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(md,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function vd(n,i,a){var u=n.type||"unknown-event";n.currentTarget=a,ov(u,i,void 0,n),n.currentTarget=null}function Ed(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var S=u[v],k=S.instance,O=S.currentTarget;if(S=S.listener,k!==p&&d.isPropagationStopped())break e;vd(d,S,O),p=k}else for(v=0;v<u.length;v++){if(S=u[v],k=S.instance,O=S.currentTarget,S=S.listener,k!==p&&d.isPropagationStopped())break e;vd(d,S,O),p=k}}}if(Bs)throw n=il,Bs=!1,il=null,n}function Ie(n,i){var a=i[Ml];a===void 0&&(a=i[Ml]=new Set);var u=n+"__bubble";a.has(u)||(Sd(i,n,2,!1),a.add(u))}function Nl(n,i,a){var u=0;i&&(u|=4),Sd(a,n,u,i)}var io="_reactListening"+Math.random().toString(36).slice(2);function Gi(n){if(!n[io]){n[io]=!0,s.forEach(function(a){a!=="selectionchange"&&(l0.has(a)||Nl(a,!1,n),Nl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[io]||(i[io]=!0,Nl("selectionchange",!1,i))}}function Sd(n,i,a,u){switch(Vf(i)){case 1:var d=kv;break;case 4:d=Av;break;default:d=fl}a=d.bind(null,i,a,n),d=void 0,!rl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Il(n,i,a,u,d){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;v=v.return}for(;S!==null;){if(v=mr(S),v===null)return;if(k=v.tag,k===5||k===6){u=p=v;continue e}S=S.parentNode}}u=u.return}wf(function(){var O=p,U=el(a),B=[];e:{var $=gd.get(n);if($!==void 0){var K=pl,X=n;switch(n){case"keypress":if(Zs(a)===0)break e;case"keydown":case"keyup":K=$v;break;case"focusin":X="focus",K=yl;break;case"focusout":X="blur",K=yl;break;case"beforeblur":case"afterblur":K=yl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Bv;break;case dd:case hd:case pd:K=Iv;break;case md:K=Vv;break;case"scroll":K=xv;break;case"wheel":K=Gv;break;case"copy":case"cut":case"paste":K=_v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Yf}var q=(i&4)!==0,We=!q&&n==="scroll",N=q?$!==null?$+"Capture":null:$;q=[];for(var A=O,I;A!==null;){I=A;var V=I.stateNode;if(I.tag===5&&V!==null&&(I=V,N!==null&&(V=Ri(A,N),V!=null&&q.push(Hi(A,V,I)))),We)break;A=A.return}0<q.length&&($=new K($,X,null,a,U),B.push({event:$,listeners:q}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",$&&a!==Ja&&(X=a.relatedTarget||a.fromElement)&&(mr(X)||X[wn]))break e;if((K||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,K?(X=a.relatedTarget||a.toElement,K=O,X=X?mr(X):null,X!==null&&(We=pr(X),X!==We||X.tag!==5&&X.tag!==6)&&(X=null)):(K=null,X=O),K!==X)){if(q=Hf,V="onMouseLeave",N="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(q=Yf,V="onPointerLeave",N="onPointerEnter",A="pointer"),We=K==null?$:Kr(K),I=X==null?$:Kr(X),$=new q(V,A+"leave",K,a,U),$.target=We,$.relatedTarget=I,V=null,mr(U)===O&&(q=new q(N,A+"enter",X,a,U),q.target=I,q.relatedTarget=We,V=q),We=V,K&&X)t:{for(q=K,N=X,A=0,I=q;I;I=Gr(I))A++;for(I=0,V=N;V;V=Gr(V))I++;for(;0<A-I;)q=Gr(q),A--;for(;0<I-A;)N=Gr(N),I--;for(;A--;){if(q===N||N!==null&&q===N.alternate)break t;q=Gr(q),N=Gr(N)}q=null}else q=null;K!==null&&Td(B,$,K,q,!1),X!==null&&We!==null&&Td(B,We,X,q,!0)}}e:{if($=O?Kr(O):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var Q=Zv;else if(ed($))if(nd)Q=n0;else{Q=e0;var ne=Jv}else(K=$.nodeName)&&K.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Q=t0);if(Q&&(Q=Q(n,O))){td(B,Q,a,U);break e}ne&&ne(n,$,O),n==="focusout"&&(ne=$._wrapperState)&&ne.controlled&&$.type==="number"&&Ya($,"number",$.value)}switch(ne=O?Kr(O):window,n){case"focusin":(ed(ne)||ne.contentEditable==="true")&&(Vr=ne,Al=O,Vi=null);break;case"focusout":Vi=Al=Vr=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,cd(B,a,U);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":cd(B,a,U)}var re;if(El)e:{switch(n){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else zr?Zf(n,a)&&(ue="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&(Xf&&a.locale!=="ko"&&(zr||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&zr&&(re=Wf()):(Vn=U,hl="value"in Vn?Vn.value:Vn.textContent,zr=!0)),ne=so(O,ue),0<ne.length&&(ue=new Kf(ue,n,null,a,U),B.push({event:ue,listeners:ne}),re?ue.data=re:(re=Jf(a),re!==null&&(ue.data=re)))),(re=Kv?Yv(n,a):Xv(n,a))&&(O=so(O,"onBeforeInput"),0<O.length&&(U=new Kf("onBeforeInput","beforeinput",null,a,U),B.push({event:U,listeners:O}),U.data=re))}Ed(B,i)})}function Hi(n,i,a){return{instance:n,listener:i,currentTarget:a}}function so(n,i){for(var a=i+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ri(n,a),p!=null&&u.unshift(Hi(n,p,d)),p=Ri(n,i),p!=null&&u.push(Hi(n,p,d))),n=n.return}return u}function Gr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Td(n,i,a,u,d){for(var p=i._reactName,v=[];a!==null&&a!==u;){var S=a,k=S.alternate,O=S.stateNode;if(k!==null&&k===u)break;S.tag===5&&O!==null&&(S=O,d?(k=Ri(a,p),k!=null&&v.unshift(Hi(a,k,S))):d||(k=Ri(a,p),k!=null&&v.push(Hi(a,k,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var u0=/\r\n?/g,c0=/\u0000|\uFFFD/g;function kd(n){return(typeof n=="string"?n:""+n).replace(u0,`
`).replace(c0,"")}function oo(n,i,a){if(i=kd(i),kd(n)!==i&&a)throw Error(t(425))}function ao(){}var Ol=null,_l=null;function Pl(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,f0=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,d0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(n){return Ad.resolve(null).then(n).catch(h0)}:Ll;function h0(n){setTimeout(function(){throw n})}function bl(n,i){var a=i,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(u===0){n.removeChild(d),ji(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=d}while(a);ji(i)}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function xd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),hn="__reactFiber$"+Hr,Ki="__reactProps$"+Hr,wn="__reactContainer$"+Hr,Ml="__reactEvents$"+Hr,p0="__reactListeners$"+Hr,m0="__reactHandles$"+Hr;function mr(n){var i=n[hn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[wn]||a[hn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=xd(n);n!==null;){if(a=n[hn])return a;n=xd(n)}return i}n=a,a=n.parentNode}return null}function Yi(n){return n=n[hn]||n[wn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Kr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function lo(n){return n[Ki]||null}var jl=[],Yr=-1;function Hn(n){return{current:n}}function Oe(n){0>Yr||(n.current=jl[Yr],jl[Yr]=null,Yr--)}function Ce(n,i){Yr++,jl[Yr]=n.current,n.current=i}var Kn={},ot=Hn(Kn),mt=Hn(!1),gr=Kn;function Xr(n,i){var a=n.type.contextTypes;if(!a)return Kn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function gt(n){return n=n.childContextTypes,n!=null}function uo(){Oe(mt),Oe(ot)}function wd(n,i,a){if(ot.current!==Kn)throw Error(t(168));Ce(ot,i),Ce(mt,a)}function Cd(n,i,a){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(t(108,he(n)||"Unknown",d));return H({},a,u)}function co(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kn,gr=ot.current,Ce(ot,n),Ce(mt,mt.current),!0}function Rd(n,i,a){var u=n.stateNode;if(!u)throw Error(t(169));a?(n=Cd(n,i,gr),u.__reactInternalMemoizedMergedChildContext=n,Oe(mt),Oe(ot),Ce(ot,n)):Oe(mt),Ce(mt,a)}var Cn=null,fo=!1,Fl=!1;function Nd(n){Cn===null?Cn=[n]:Cn.push(n)}function g0(n){fo=!0,Nd(n)}function Yn(){if(!Fl&&Cn!==null){Fl=!0;var n=0,i=we;try{var a=Cn;for(we=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}Cn=null,fo=!1}catch(d){throw Cn!==null&&(Cn=Cn.slice(n+1)),Of(sl,Yn),d}finally{we=i,Fl=!1}}return null}var qr=[],Qr=0,ho=null,po=0,$t=[],Ut=0,yr=null,Rn=1,Nn="";function vr(n,i){qr[Qr++]=po,qr[Qr++]=ho,ho=n,po=i}function Id(n,i,a){$t[Ut++]=Rn,$t[Ut++]=Nn,$t[Ut++]=yr,yr=n;var u=Rn;n=Nn;var d=32-Qt(u)-1;u&=~(1<<d),a+=1;var p=32-Qt(i)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Rn=1<<32-Qt(i)+d|a<<d|u,Nn=p+n}else Rn=1<<p|a<<d|u,Nn=n}function $l(n){n.return!==null&&(vr(n,1),Id(n,1,0))}function Ul(n){for(;n===ho;)ho=qr[--Qr],qr[Qr]=null,po=qr[--Qr],qr[Qr]=null;for(;n===yr;)yr=$t[--Ut],$t[Ut]=null,Nn=$t[--Ut],$t[Ut]=null,Rn=$t[--Ut],$t[Ut]=null}var Ct=null,Rt=null,Pe=!1,Jt=null;function Od(n,i){var a=Vt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function _d(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=Gn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ct=n,Rt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=yr!==null?{id:Rn,overflow:Nn}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Vt(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Ct=n,Rt=null,!0):!1;default:return!1}}function Dl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Bl(n){if(Pe){var i=Rt;if(i){var a=i;if(!_d(n,i)){if(Dl(n))throw Error(t(418));i=Gn(a.nextSibling);var u=Ct;i&&_d(n,i)?Od(u,a):(n.flags=n.flags&-4097|2,Pe=!1,Ct=n)}}else{if(Dl(n))throw Error(t(418));n.flags=n.flags&-4097|2,Pe=!1,Ct=n}}}function Pd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ct=n}function mo(n){if(n!==Ct)return!1;if(!Pe)return Pd(n),Pe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Pl(n.type,n.memoizedProps)),i&&(i=Rt)){if(Dl(n))throw Ld(),Error(t(418));for(;i;)Od(n,i),i=Gn(i.nextSibling)}if(Pd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Rt=Gn(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Rt=null}}else Rt=Ct?Gn(n.stateNode.nextSibling):null;return!0}function Ld(){for(var n=Rt;n;)n=Gn(n.nextSibling)}function Zr(){Rt=Ct=null,Pe=!1}function zl(n){Jt===null?Jt=[n]:Jt.push(n)}var y0=b.ReactCurrentBatchConfig;function Xi(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var u=a.stateNode}if(!u)throw Error(t(147,n));var d=u,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function go(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function bd(n){var i=n._init;return i(n._payload)}function Md(n){function i(N,A){if(n){var I=N.deletions;I===null?(N.deletions=[A],N.flags|=16):I.push(A)}}function a(N,A){if(!n)return null;for(;A!==null;)i(N,A),A=A.sibling;return null}function u(N,A){for(N=new Map;A!==null;)A.key!==null?N.set(A.key,A):N.set(A.index,A),A=A.sibling;return N}function d(N,A){return N=nr(N,A),N.index=0,N.sibling=null,N}function p(N,A,I){return N.index=I,n?(I=N.alternate,I!==null?(I=I.index,I<A?(N.flags|=2,A):I):(N.flags|=2,A)):(N.flags|=1048576,A)}function v(N){return n&&N.alternate===null&&(N.flags|=2),N}function S(N,A,I,V){return A===null||A.tag!==6?(A=Lu(I,N.mode,V),A.return=N,A):(A=d(A,I),A.return=N,A)}function k(N,A,I,V){var Q=I.type;return Q===D?U(N,A,I.props.children,V,I.key):A!==null&&(A.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ye&&bd(Q)===A.type)?(V=d(A,I.props),V.ref=Xi(N,A,I),V.return=N,V):(V=Do(I.type,I.key,I.props,null,N.mode,V),V.ref=Xi(N,A,I),V.return=N,V)}function O(N,A,I,V){return A===null||A.tag!==4||A.stateNode.containerInfo!==I.containerInfo||A.stateNode.implementation!==I.implementation?(A=bu(I,N.mode,V),A.return=N,A):(A=d(A,I.children||[]),A.return=N,A)}function U(N,A,I,V,Q){return A===null||A.tag!==7?(A=Cr(I,N.mode,V,Q),A.return=N,A):(A=d(A,I),A.return=N,A)}function B(N,A,I){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Lu(""+A,N.mode,I),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case z:return I=Do(A.type,A.key,A.props,null,N.mode,I),I.ref=Xi(N,null,A),I.return=N,I;case L:return A=bu(A,N.mode,I),A.return=N,A;case ye:var V=A._init;return B(N,V(A._payload),I)}if(xi(A)||J(A))return A=Cr(A,N.mode,I,null),A.return=N,A;go(N,A)}return null}function $(N,A,I,V){var Q=A!==null?A.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Q!==null?null:S(N,A,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case z:return I.key===Q?k(N,A,I,V):null;case L:return I.key===Q?O(N,A,I,V):null;case ye:return Q=I._init,$(N,A,Q(I._payload),V)}if(xi(I)||J(I))return Q!==null?null:U(N,A,I,V,null);go(N,I)}return null}function K(N,A,I,V,Q){if(typeof V=="string"&&V!==""||typeof V=="number")return N=N.get(I)||null,S(A,N,""+V,Q);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return N=N.get(V.key===null?I:V.key)||null,k(A,N,V,Q);case L:return N=N.get(V.key===null?I:V.key)||null,O(A,N,V,Q);case ye:var ne=V._init;return K(N,A,I,ne(V._payload),Q)}if(xi(V)||J(V))return N=N.get(I)||null,U(A,N,V,Q,null);go(A,V)}return null}function X(N,A,I,V){for(var Q=null,ne=null,re=A,ue=A=0,et=null;re!==null&&ue<I.length;ue++){re.index>ue?(et=re,re=null):et=re.sibling;var ke=$(N,re,I[ue],V);if(ke===null){re===null&&(re=et);break}n&&re&&ke.alternate===null&&i(N,re),A=p(ke,A,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke,re=et}if(ue===I.length)return a(N,re),Pe&&vr(N,ue),Q;if(re===null){for(;ue<I.length;ue++)re=B(N,I[ue],V),re!==null&&(A=p(re,A,ue),ne===null?Q=re:ne.sibling=re,ne=re);return Pe&&vr(N,ue),Q}for(re=u(N,re);ue<I.length;ue++)et=K(re,N,ue,I[ue],V),et!==null&&(n&&et.alternate!==null&&re.delete(et.key===null?ue:et.key),A=p(et,A,ue),ne===null?Q=et:ne.sibling=et,ne=et);return n&&re.forEach(function(rr){return i(N,rr)}),Pe&&vr(N,ue),Q}function q(N,A,I,V){var Q=J(I);if(typeof Q!="function")throw Error(t(150));if(I=Q.call(I),I==null)throw Error(t(151));for(var ne=Q=null,re=A,ue=A=0,et=null,ke=I.next();re!==null&&!ke.done;ue++,ke=I.next()){re.index>ue?(et=re,re=null):et=re.sibling;var rr=$(N,re,ke.value,V);if(rr===null){re===null&&(re=et);break}n&&re&&rr.alternate===null&&i(N,re),A=p(rr,A,ue),ne===null?Q=rr:ne.sibling=rr,ne=rr,re=et}if(ke.done)return a(N,re),Pe&&vr(N,ue),Q;if(re===null){for(;!ke.done;ue++,ke=I.next())ke=B(N,ke.value,V),ke!==null&&(A=p(ke,A,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return Pe&&vr(N,ue),Q}for(re=u(N,re);!ke.done;ue++,ke=I.next())ke=K(re,N,ue,ke.value,V),ke!==null&&(n&&ke.alternate!==null&&re.delete(ke.key===null?ue:ke.key),A=p(ke,A,ue),ne===null?Q=ke:ne.sibling=ke,ne=ke);return n&&re.forEach(function(q0){return i(N,q0)}),Pe&&vr(N,ue),Q}function We(N,A,I,V){if(typeof I=="object"&&I!==null&&I.type===D&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case z:e:{for(var Q=I.key,ne=A;ne!==null;){if(ne.key===Q){if(Q=I.type,Q===D){if(ne.tag===7){a(N,ne.sibling),A=d(ne,I.props.children),A.return=N,N=A;break e}}else if(ne.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ye&&bd(Q)===ne.type){a(N,ne.sibling),A=d(ne,I.props),A.ref=Xi(N,ne,I),A.return=N,N=A;break e}a(N,ne);break}else i(N,ne);ne=ne.sibling}I.type===D?(A=Cr(I.props.children,N.mode,V,I.key),A.return=N,N=A):(V=Do(I.type,I.key,I.props,null,N.mode,V),V.ref=Xi(N,A,I),V.return=N,N=V)}return v(N);case L:e:{for(ne=I.key;A!==null;){if(A.key===ne)if(A.tag===4&&A.stateNode.containerInfo===I.containerInfo&&A.stateNode.implementation===I.implementation){a(N,A.sibling),A=d(A,I.children||[]),A.return=N,N=A;break e}else{a(N,A);break}else i(N,A);A=A.sibling}A=bu(I,N.mode,V),A.return=N,N=A}return v(N);case ye:return ne=I._init,We(N,A,ne(I._payload),V)}if(xi(I))return X(N,A,I,V);if(J(I))return q(N,A,I,V);go(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,A!==null&&A.tag===6?(a(N,A.sibling),A=d(A,I),A.return=N,N=A):(a(N,A),A=Lu(I,N.mode,V),A.return=N,N=A),v(N)):a(N,A)}return We}var Jr=Md(!0),jd=Md(!1),yo=Hn(null),vo=null,ei=null,Vl=null;function Wl(){Vl=ei=vo=null}function Gl(n){var i=yo.current;Oe(yo),n._currentValue=i}function Hl(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function ti(n,i){vo=n,Vl=ei=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(yt=!0),n.firstContext=null)}function Dt(n){var i=n._currentValue;if(Vl!==n)if(n={context:n,memoizedValue:i,next:null},ei===null){if(vo===null)throw Error(t(308));ei=n,vo.dependencies={lanes:0,firstContext:n}}else ei=ei.next=n;return i}var Er=null;function Kl(n){Er===null?Er=[n]:Er.push(n)}function Fd(n,i,a,u){var d=i.interleaved;return d===null?(a.next=a,Kl(i)):(a.next=d.next,d.next=a),i.interleaved=a,In(n,u)}function In(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Xn=!1;function Yl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $d(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function On(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function qn(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Se&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,In(n,a)}return d=u.interleaved,d===null?(i.next=i,Kl(u)):(i.next=d.next,d.next=i),u.interleaved=i,In(n,a)}function Eo(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,ll(n,a)}}function Ud(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function So(n,i,a,u){var d=n.updateQueue;Xn=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var k=S,O=k.next;k.next=null,v===null?p=O:v.next=O,v=k;var U=n.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==v&&(S===null?U.firstBaseUpdate=O:S.next=O,U.lastBaseUpdate=k))}if(p!==null){var B=d.baseState;v=0,U=O=k=null,S=p;do{var $=S.lane,K=S.eventTime;if((u&$)===$){U!==null&&(U=U.next={eventTime:K,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var X=n,q=S;switch($=i,K=a,q.tag){case 1:if(X=q.payload,typeof X=="function"){B=X.call(K,B,$);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=q.payload,$=typeof X=="function"?X.call(K,B,$):X,$==null)break e;B=H({},B,$);break e;case 2:Xn=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[S]:$.push(S))}else K={eventTime:K,lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(O=U=K,k=B):U=U.next=K,v|=$;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(k=B),d.baseState=k,d.firstBaseUpdate=O,d.lastBaseUpdate=U,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);kr|=v,n.lanes=v,n.memoizedState=B}}function Dd(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],d=u.callback;if(d!==null){if(u.callback=null,u=a,typeof d!="function")throw Error(t(191,d));d.call(u)}}}var qi={},pn=Hn(qi),Qi=Hn(qi),Zi=Hn(qi);function Sr(n){if(n===qi)throw Error(t(174));return n}function Xl(n,i){switch(Ce(Zi,i),Ce(Qi,n),Ce(pn,qi),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qa(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=qa(i,n)}Oe(pn),Ce(pn,i)}function ni(){Oe(pn),Oe(Qi),Oe(Zi)}function Bd(n){Sr(Zi.current);var i=Sr(pn.current),a=qa(i,n.type);i!==a&&(Ce(Qi,n),Ce(pn,a))}function ql(n){Qi.current===n&&(Oe(pn),Oe(Qi))}var be=Hn(0);function To(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ql=[];function Zl(){for(var n=0;n<Ql.length;n++)Ql[n]._workInProgressVersionPrimary=null;Ql.length=0}var ko=b.ReactCurrentDispatcher,Jl=b.ReactCurrentBatchConfig,Tr=0,Me=null,Ke=null,Ze=null,Ao=!1,Ji=!1,es=0,v0=0;function at(){throw Error(t(321))}function eu(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Zt(n[a],i[a]))return!1;return!0}function tu(n,i,a,u,d,p){if(Tr=p,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ko.current=n===null||n.memoizedState===null?k0:A0,n=a(u,d),Ji){p=0;do{if(Ji=!1,es=0,25<=p)throw Error(t(301));p+=1,Ze=Ke=null,i.updateQueue=null,ko.current=x0,n=a(u,d)}while(Ji)}if(ko.current=Co,i=Ke!==null&&Ke.next!==null,Tr=0,Ze=Ke=Me=null,Ao=!1,i)throw Error(t(300));return n}function nu(){var n=es!==0;return es=0,n}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Bt(){if(Ke===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=Ke.next;var i=Ze===null?Me.memoizedState:Ze.next;if(i!==null)Ze=i,Ke=n;else{if(n===null)throw Error(t(310));Ke=n,n={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Me.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function ts(n,i){return typeof i=="function"?i(n):i}function ru(n){var i=Bt(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=Ke,d=u.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}u.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,u=u.baseState;var S=v=null,k=null,O=p;do{var U=O.lane;if((Tr&U)===U)k!==null&&(k=k.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:n(u,O.action);else{var B={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};k===null?(S=k=B,v=u):k=k.next=B,Me.lanes|=U,kr|=U}O=O.next}while(O!==null&&O!==p);k===null?v=u:k.next=S,Zt(u,i.memoizedState)||(yt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=k,a.lastRenderedState=u}if(n=a.interleaved,n!==null){d=n;do p=d.lane,Me.lanes|=p,kr|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function iu(n){var i=Bt(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Zt(p,i.memoizedState)||(yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,u]}function zd(){}function Vd(n,i){var a=Me,u=Bt(),d=i(),p=!Zt(u.memoizedState,d);if(p&&(u.memoizedState=d,yt=!0),u=u.queue,su(Hd.bind(null,a,u,n),[n]),u.getSnapshot!==i||p||Ze!==null&&Ze.memoizedState.tag&1){if(a.flags|=2048,ns(9,Gd.bind(null,a,u,d,i),void 0,null),Je===null)throw Error(t(349));(Tr&30)!==0||Wd(a,i,d)}return d}function Wd(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Gd(n,i,a,u){i.value=a,i.getSnapshot=u,Kd(i)&&Yd(n)}function Hd(n,i,a){return a(function(){Kd(i)&&Yd(n)})}function Kd(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Zt(n,a)}catch{return!0}}function Yd(n){var i=In(n,1);i!==null&&rn(i,n,1,-1)}function Xd(n){var i=mn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:n},i.queue=n,n=n.dispatch=T0.bind(null,Me,n),[i.memoizedState,n]}function ns(n,i,a,u){return n={tag:n,create:i,destroy:a,deps:u,next:null},i=Me.updateQueue,i===null?(i={lastEffect:null,stores:null},Me.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n)),n}function qd(){return Bt().memoizedState}function xo(n,i,a,u){var d=mn();Me.flags|=n,d.memoizedState=ns(1|i,a,void 0,u===void 0?null:u)}function wo(n,i,a,u){var d=Bt();u=u===void 0?null:u;var p=void 0;if(Ke!==null){var v=Ke.memoizedState;if(p=v.destroy,u!==null&&eu(u,v.deps)){d.memoizedState=ns(i,a,p,u);return}}Me.flags|=n,d.memoizedState=ns(1|i,a,p,u)}function Qd(n,i){return xo(8390656,8,n,i)}function su(n,i){return wo(2048,8,n,i)}function Zd(n,i){return wo(4,2,n,i)}function Jd(n,i){return wo(4,4,n,i)}function eh(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function th(n,i,a){return a=a!=null?a.concat([n]):null,wo(4,4,eh.bind(null,i,n),a)}function ou(){}function nh(n,i){var a=Bt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&eu(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function rh(n,i){var a=Bt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&eu(i,u[1])?u[0]:(n=n(),a.memoizedState=[n,i],n)}function ih(n,i,a){return(Tr&21)===0?(n.baseState&&(n.baseState=!1,yt=!0),n.memoizedState=a):(Zt(a,i)||(a=bf(),Me.lanes|=a,kr|=a,n.baseState=!0),i)}function E0(n,i){var a=we;we=a!==0&&4>a?a:4,n(!0);var u=Jl.transition;Jl.transition={};try{n(!1),i()}finally{we=a,Jl.transition=u}}function sh(){return Bt().memoizedState}function S0(n,i,a){var u=er(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},oh(n))ah(i,a);else if(a=Fd(n,i,a,u),a!==null){var d=ft();rn(a,n,u,d),lh(a,i,u)}}function T0(n,i,a){var u=er(n),d={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(oh(n))ah(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,S=p(v,a);if(d.hasEagerState=!0,d.eagerState=S,Zt(S,v)){var k=i.interleaved;k===null?(d.next=d,Kl(i)):(d.next=k.next,k.next=d),i.interleaved=d;return}}catch{}a=Fd(n,i,d,u),a!==null&&(d=ft(),rn(a,n,u,d),lh(a,i,u))}}function oh(n){var i=n.alternate;return n===Me||i!==null&&i===Me}function ah(n,i){Ji=Ao=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function lh(n,i,a){if((a&4194240)!==0){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,ll(n,a)}}var Co={readContext:Dt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},k0={readContext:Dt,useCallback:function(n,i){return mn().memoizedState=[n,i===void 0?null:i],n},useContext:Dt,useEffect:Qd,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,xo(4194308,4,eh.bind(null,i,n),a)},useLayoutEffect:function(n,i){return xo(4194308,4,n,i)},useInsertionEffect:function(n,i){return xo(4,2,n,i)},useMemo:function(n,i){var a=mn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var u=mn();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=S0.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var i=mn();return n={current:n},i.memoizedState=n},useState:Xd,useDebugValue:ou,useDeferredValue:function(n){return mn().memoizedState=n},useTransition:function(){var n=Xd(!1),i=n[0];return n=E0.bind(null,n[1]),mn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var u=Me,d=mn();if(Pe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Je===null)throw Error(t(349));(Tr&30)!==0||Wd(u,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Qd(Hd.bind(null,u,p,n),[n]),u.flags|=2048,ns(9,Gd.bind(null,u,p,a,i),void 0,null),a},useId:function(){var n=mn(),i=Je.identifierPrefix;if(Pe){var a=Nn,u=Rn;a=(u&~(1<<32-Qt(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=es++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=v0++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},A0={readContext:Dt,useCallback:nh,useContext:Dt,useEffect:su,useImperativeHandle:th,useInsertionEffect:Zd,useLayoutEffect:Jd,useMemo:rh,useReducer:ru,useRef:qd,useState:function(){return ru(ts)},useDebugValue:ou,useDeferredValue:function(n){var i=Bt();return ih(i,Ke.memoizedState,n)},useTransition:function(){var n=ru(ts)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:zd,useSyncExternalStore:Vd,useId:sh,unstable_isNewReconciler:!1},x0={readContext:Dt,useCallback:nh,useContext:Dt,useEffect:su,useImperativeHandle:th,useInsertionEffect:Zd,useLayoutEffect:Jd,useMemo:rh,useReducer:iu,useRef:qd,useState:function(){return iu(ts)},useDebugValue:ou,useDeferredValue:function(n){var i=Bt();return Ke===null?i.memoizedState=n:ih(i,Ke.memoizedState,n)},useTransition:function(){var n=iu(ts)[0],i=Bt().memoizedState;return[n,i]},useMutableSource:zd,useSyncExternalStore:Vd,useId:sh,unstable_isNewReconciler:!1};function en(n,i){if(n&&n.defaultProps){i=H({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function au(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:H({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ro={isMounted:function(n){return(n=n._reactInternals)?pr(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var u=ft(),d=er(n),p=On(u,d);p.payload=i,a!=null&&(p.callback=a),i=qn(n,p,d),i!==null&&(rn(i,n,d,u),Eo(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=ft(),d=er(n),p=On(u,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=qn(n,p,d),i!==null&&(rn(i,n,d,u),Eo(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=ft(),u=er(n),d=On(a,u);d.tag=2,i!=null&&(d.callback=i),i=qn(n,d,u),i!==null&&(rn(i,n,u,a),Eo(i,n,u))}};function uh(n,i,a,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!zi(a,u)||!zi(d,p):!0}function ch(n,i,a){var u=!1,d=Kn,p=i.contextType;return typeof p=="object"&&p!==null?p=Dt(p):(d=gt(i)?gr:ot.current,u=i.contextTypes,p=(u=u!=null)?Xr(n,d):Kn),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ro,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function fh(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Ro.enqueueReplaceState(i,i.state,null)}function lu(n,i,a,u){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Yl(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Dt(p):(p=gt(i)?gr:ot.current,d.context=Xr(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(au(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Ro.enqueueReplaceState(d,d.state,null),So(n,a,d,u),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ri(n,i){try{var a="",u=i;do a+=Ee(u),u=u.return;while(u);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function uu(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function cu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var w0=typeof WeakMap=="function"?WeakMap:Map;function dh(n,i,a){a=On(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){bo||(bo=!0,wu=u),cu(n,i)},a}function hh(n,i,a){a=On(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;a.payload=function(){return u(d)},a.callback=function(){cu(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){cu(n,i),typeof u!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function ph(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new w0;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(a)||(d.add(a),n=U0.bind(null,n,i,a),i.then(n,n))}function mh(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function gh(n,i,a,u,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=On(-1,1),i.tag=2,qn(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var C0=b.ReactCurrentOwner,yt=!1;function ct(n,i,a,u){i.child=n===null?jd(i,null,a,u):Jr(i,n.child,a,u)}function yh(n,i,a,u,d){a=a.render;var p=i.ref;return ti(i,d),u=tu(n,i,a,u,p,d),a=nu(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,_n(n,i,d)):(Pe&&a&&$l(i),i.flags|=1,ct(n,i,u,d),i.child)}function vh(n,i,a,u,d){if(n===null){var p=a.type;return typeof p=="function"&&!Pu(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Eh(n,i,p,u,d)):(n=Do(a.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:zi,a(v,u)&&n.ref===i.ref)return _n(n,i,d)}return i.flags|=1,n=nr(p,u),n.ref=i.ref,n.return=i,i.child=n}function Eh(n,i,a,u,d){if(n!==null){var p=n.memoizedProps;if(zi(p,u)&&n.ref===i.ref)if(yt=!1,i.pendingProps=u=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(yt=!0);else return i.lanes=n.lanes,_n(n,i,d)}return fu(n,i,a,u,d)}function Sh(n,i,a){var u=i.pendingProps,d=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(si,Nt),Nt|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ce(si,Nt),Nt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,Ce(si,Nt),Nt|=u}else p!==null?(u=p.baseLanes|a,i.memoizedState=null):u=a,Ce(si,Nt),Nt|=u;return ct(n,i,d,a),i.child}function Th(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function fu(n,i,a,u,d){var p=gt(a)?gr:ot.current;return p=Xr(i,p),ti(i,d),a=tu(n,i,a,u,p,d),u=nu(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,_n(n,i,d)):(Pe&&u&&$l(i),i.flags|=1,ct(n,i,a,d),i.child)}function kh(n,i,a,u,d){if(gt(a)){var p=!0;co(i)}else p=!1;if(ti(i,d),i.stateNode===null)Io(n,i),ch(i,a,u),lu(i,a,u,d),u=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var k=v.context,O=a.contextType;typeof O=="object"&&O!==null?O=Dt(O):(O=gt(a)?gr:ot.current,O=Xr(i,O));var U=a.getDerivedStateFromProps,B=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";B||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==u||k!==O)&&fh(i,v,u,O),Xn=!1;var $=i.memoizedState;v.state=$,So(i,u,v,d),k=i.memoizedState,S!==u||$!==k||mt.current||Xn?(typeof U=="function"&&(au(i,a,U,u),k=i.memoizedState),(S=Xn||uh(i,a,S,u,$,k,O))?(B||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=k),v.props=u,v.state=k,v.context=O,u=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,$d(n,i),S=i.memoizedProps,O=i.type===i.elementType?S:en(i.type,S),v.props=O,B=i.pendingProps,$=v.context,k=a.contextType,typeof k=="object"&&k!==null?k=Dt(k):(k=gt(a)?gr:ot.current,k=Xr(i,k));var K=a.getDerivedStateFromProps;(U=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==B||$!==k)&&fh(i,v,u,k),Xn=!1,$=i.memoizedState,v.state=$,So(i,u,v,d);var X=i.memoizedState;S!==B||$!==X||mt.current||Xn?(typeof K=="function"&&(au(i,a,K,u),X=i.memoizedState),(O=Xn||uh(i,a,O,u,$,X,k)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,k)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),v.props=u,v.state=X,v.context=k,u=O):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return du(n,i,a,u,p,d)}function du(n,i,a,u,d,p){Th(n,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&Rd(i,a,!1),_n(n,i,p);u=i.stateNode,C0.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&v?(i.child=Jr(i,n.child,null,p),i.child=Jr(i,null,S,p)):ct(n,i,S,p),i.memoizedState=u.state,d&&Rd(i,a,!0),i.child}function Ah(n){var i=n.stateNode;i.pendingContext?wd(n,i.pendingContext,i.pendingContext!==i.context):i.context&&wd(n,i.context,!1),Xl(n,i.containerInfo)}function xh(n,i,a,u,d){return Zr(),zl(d),i.flags|=256,ct(n,i,a,u),i.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(n){return{baseLanes:n,cachePool:null,transitions:null}}function wh(n,i,a){var u=i.pendingProps,d=be.current,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ce(be,d&1),n===null)return Bl(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,n=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Bo(v,u,0,null),n=Cr(n,u,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=pu(a),i.memoizedState=hu,n):mu(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return R0(n,i,v,u,S,d,a);if(p){p=u.fallback,v=i.mode,d=n.child,S=d.sibling;var k={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=k,i.deletions=null):(u=nr(d,k),u.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=nr(S,p):(p=Cr(p,v,a,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=n.child.memoizedState,v=v===null?pu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,i.memoizedState=hu,u}return p=n.child,n=p.sibling,u=nr(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=a),u.return=i,u.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=u,i.memoizedState=null,u}function mu(n,i){return i=Bo({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function No(n,i,a,u){return u!==null&&zl(u),Jr(i,n.child,null,a),n=mu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function R0(n,i,a,u,d,p,v){if(a)return i.flags&256?(i.flags&=-257,u=uu(Error(t(422))),No(n,i,v,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Bo({mode:"visible",children:u.children},d,0,null),p=Cr(p,d,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&Jr(i,n.child,null,v),i.child.memoizedState=pu(v),i.memoizedState=hu,p);if((i.mode&1)===0)return No(n,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var S=u.dgst;return u=S,p=Error(t(419)),u=uu(p,u,void 0),No(n,i,v,u)}if(S=(v&n.childLanes)!==0,yt||S){if(u=Je,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,In(n,d),rn(u,n,d,-1))}return _u(),u=uu(Error(t(421))),No(n,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=D0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,Rt=Gn(d.nextSibling),Ct=i,Pe=!0,Jt=null,n!==null&&($t[Ut++]=Rn,$t[Ut++]=Nn,$t[Ut++]=yr,Rn=n.id,Nn=n.overflow,yr=i),i=mu(i,u.children),i.flags|=4096,i)}function Ch(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Hl(n.return,i,a)}function gu(n,i,a,u,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=d)}function Rh(n,i,a){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(ct(n,i,u.children,a),u=be.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ch(n,a,i);else if(n.tag===19)Ch(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Ce(be,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&To(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),gu(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&To(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}gu(i,!0,a,null,p);break;case"together":gu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Io(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function _n(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),kr|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=nr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=nr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function N0(n,i,a){switch(i.tag){case 3:Ah(i),Zr();break;case 5:Bd(i);break;case 1:gt(i.type)&&co(i);break;case 4:Xl(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(yo,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(be,be.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?wh(n,i,a):(Ce(be,be.current&1),n=_n(n,i,a),n!==null?n.sibling:null);Ce(be,be.current&1);break;case 19:if(u=(a&i.childLanes)!==0,(n.flags&128)!==0){if(u)return Rh(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(be,be.current),u)break;return null;case 22:case 23:return i.lanes=0,Sh(n,i,a)}return _n(n,i,a)}var Nh,yu,Ih,Oh;Nh=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},yu=function(){},Ih=function(n,i,a,u){var d=n.memoizedProps;if(d!==u){n=i.stateNode,Sr(pn.current);var p=null;switch(a){case"input":d=hr(n,d),u=hr(n,u),p=[];break;case"select":d=H({},d,{value:void 0}),u=H({},u,{value:void 0}),p=[];break;case"textarea":d=Xa(n,d),u=Xa(n,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=ao)}Qa(a,u);var v;a=null;for(O in d)if(!u.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var S=d[O];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?p||(p=[]):(p=p||[]).push(O,null));for(O in u){var k=u[O];if(S=d?.[O],u.hasOwnProperty(O)&&k!==S&&(k!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||k&&k.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in k)k.hasOwnProperty(v)&&S[v]!==k[v]&&(a||(a={}),a[v]=k[v])}else a||(p||(p=[]),p.push(O,a)),a=k;else O==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,S=S?S.__html:void 0,k!=null&&S!==k&&(p=p||[]).push(O,k)):O==="children"?typeof k!="string"&&typeof k!="number"||(p=p||[]).push(O,""+k):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(o.hasOwnProperty(O)?(k!=null&&O==="onScroll"&&Ie("scroll",n),p||S===k||(p=[])):(p=p||[]).push(O,k))}a&&(p=p||[]).push("style",a);var O=p;(i.updateQueue=O)&&(i.flags|=4)}},Oh=function(n,i,a,u){a!==u&&(i.flags|=4)};function rs(n,i){if(!Pe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function I0(n,i,a){var u=i.pendingProps;switch(Ul(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return gt(i.type)&&uo(),lt(i),null;case 3:return u=i.stateNode,ni(),Oe(mt),Oe(ot),Zl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(mo(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Jt!==null&&(Nu(Jt),Jt=null))),yu(n,i),lt(i),null;case 5:ql(i);var d=Sr(Zi.current);if(a=i.type,n!==null&&i.stateNode!=null)Ih(n,i,a,u,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(t(166));return lt(i),null}if(n=Sr(pn.current),mo(i)){u=i.stateNode,a=i.type;var p=i.memoizedProps;switch(u[hn]=i,u[Ki]=p,n=(i.mode&1)!==0,a){case"dialog":Ie("cancel",u),Ie("close",u);break;case"iframe":case"object":case"embed":Ie("load",u);break;case"video":case"audio":for(d=0;d<Wi.length;d++)Ie(Wi[d],u);break;case"source":Ie("error",u);break;case"img":case"image":case"link":Ie("error",u),Ie("load",u);break;case"details":Ie("toggle",u);break;case"input":Ai(u,p),Ie("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ie("invalid",u);break;case"textarea":hf(u,p),Ie("invalid",u)}Qa(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?u.textContent!==S&&(p.suppressHydrationWarning!==!0&&oo(u.textContent,S,n),d=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&oo(u.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ie("scroll",u)}switch(a){case"input":xt(u),df(u,p,!0);break;case"textarea":xt(u),mf(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ao)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=gf(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=v.createElement(a,{is:u.is}):(n=v.createElement(a),a==="select"&&(v=n,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):n=v.createElementNS(n,a),n[hn]=i,n[Ki]=u,Nh(n,i,!1,!1),i.stateNode=n;e:{switch(v=Za(a,u),a){case"dialog":Ie("cancel",n),Ie("close",n),d=u;break;case"iframe":case"object":case"embed":Ie("load",n),d=u;break;case"video":case"audio":for(d=0;d<Wi.length;d++)Ie(Wi[d],n);d=u;break;case"source":Ie("error",n),d=u;break;case"img":case"image":case"link":Ie("error",n),Ie("load",n),d=u;break;case"details":Ie("toggle",n),d=u;break;case"input":Ai(n,u),d=hr(n,u),Ie("invalid",n);break;case"option":d=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},d=H({},u,{value:void 0}),Ie("invalid",n);break;case"textarea":hf(n,u),d=Xa(n,u),Ie("invalid",n);break;default:d=u}Qa(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var k=S[p];p==="style"?Ef(n,k):p==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&yf(n,k)):p==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&wi(n,k):typeof k=="number"&&wi(n,""+k):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?k!=null&&p==="onScroll"&&Ie("scroll",n):k!=null&&P(n,p,k,v))}switch(a){case"input":xt(n),df(n,u,!1);break;case"textarea":xt(n),mf(n);break;case"option":u.value!=null&&n.setAttribute("value",""+ve(u.value));break;case"select":n.multiple=!!u.multiple,p=u.value,p!=null?Fr(n,!!u.multiple,p,!1):u.defaultValue!=null&&Fr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ao)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(n&&i.stateNode!=null)Oh(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(t(166));if(a=Sr(Zi.current),Sr(pn.current),mo(i)){if(u=i.stateNode,a=i.memoizedProps,u[hn]=i,(p=u.nodeValue!==a)&&(n=Ct,n!==null))switch(n.tag){case 3:oo(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&oo(u.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[hn]=i,i.stateNode=u}return lt(i),null;case 13:if(Oe(be),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&Rt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ld(),Zr(),i.flags|=98560,p=!1;else if(p=mo(i),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[hn]=i}else Zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else Jt!==null&&(Nu(Jt),Jt=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(be.current&1)!==0?Ye===0&&(Ye=3):_u())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return ni(),yu(n,i),n===null&&Gi(i.stateNode.containerInfo),lt(i),null;case 10:return Gl(i.type._context),lt(i),null;case 17:return gt(i.type)&&uo(),lt(i),null;case 19:if(Oe(be),p=i.memoizedState,p===null)return lt(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)rs(p,!1);else{if(Ye!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=To(n),v!==null){for(i.flags|=128,rs(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)p=a,n=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ce(be,be.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ve()>oi&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304)}else{if(!u)if(n=To(v),n!==null){if(i.flags|=128,u=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),rs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Pe)return lt(i),null}else 2*Ve()-p.renderingStartTime>oi&&a!==1073741824&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(a=p.last,a!==null?a.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ve(),i.sibling=null,a=be.current,Ce(be,u?a&1|2:a&1),i):(lt(i),null);case 22:case 23:return Ou(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Nt&1073741824)!==0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function O0(n,i){switch(Ul(i),i.tag){case 1:return gt(i.type)&&uo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(),Oe(mt),Oe(ot),Zl(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return ql(i),null;case 13:if(Oe(be),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Zr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Oe(be),null;case 4:return ni(),null;case 10:return Gl(i.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var Oo=!1,ut=!1,_0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ii(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){De(n,i,u)}else a.current=null}function vu(n,i,a){try{a()}catch(u){De(n,i,u)}}var _h=!1;function P0(n,i){if(Ol=Xs,n=ud(),kl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,k=-1,O=0,U=0,B=n,$=null;t:for(;;){for(var K;B!==a||d!==0&&B.nodeType!==3||(S=v+d),B!==p||u!==0&&B.nodeType!==3||(k=v+u),B.nodeType===3&&(v+=B.nodeValue.length),(K=B.firstChild)!==null;)$=B,B=K;for(;;){if(B===n)break t;if($===a&&++O===d&&(S=v),$===p&&++U===u&&(k=v),(K=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=K}a=S===-1||k===-1?null:{start:S,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(_l={focusedElem:n,selectionRange:a},Xs=!1,Y=i;Y!==null;)if(i=Y,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Y=n;else for(;Y!==null;){i=Y;try{var X=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var q=X.memoizedProps,We=X.memoizedState,N=i.stateNode,A=N.getSnapshotBeforeUpdate(i.elementType===i.type?q:en(i.type,q),We);N.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(V){De(i,i.return,V)}if(n=i.sibling,n!==null){n.return=i.return,Y=n;break}Y=i.return}return X=_h,_h=!1,X}function is(n,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&vu(i,a,p)}d=d.next}while(d!==u)}}function _o(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function Eu(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function Ph(n){var i=n.alternate;i!==null&&(n.alternate=null,Ph(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[hn],delete i[Ki],delete i[Ml],delete i[p0],delete i[m0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Lh(n){return n.tag===5||n.tag===3||n.tag===4}function bh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Lh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Su(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ao));else if(u!==4&&(n=n.child,n!==null))for(Su(n,i,a),n=n.sibling;n!==null;)Su(n,i,a),n=n.sibling}function Tu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Tu(n,i,a),n=n.sibling;n!==null;)Tu(n,i,a),n=n.sibling}var nt=null,tn=!1;function Qn(n,i,a){for(a=a.child;a!==null;)Mh(n,i,a),a=a.sibling}function Mh(n,i,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Vs,a)}catch{}switch(a.tag){case 5:ut||ii(a,i);case 6:var u=nt,d=tn;nt=null,Qn(n,i,a),nt=u,tn=d,nt!==null&&(tn?(n=nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):nt.removeChild(a.stateNode));break;case 18:nt!==null&&(tn?(n=nt,a=a.stateNode,n.nodeType===8?bl(n.parentNode,a):n.nodeType===1&&bl(n,a),ji(n)):bl(nt,a.stateNode));break;case 4:u=nt,d=tn,nt=a.stateNode.containerInfo,tn=!0,Qn(n,i,a),nt=u,tn=d;break;case 0:case 11:case 14:case 15:if(!ut&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&vu(a,i,v),d=d.next}while(d!==u)}Qn(n,i,a);break;case 1:if(!ut&&(ii(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(S){De(a,i,S)}Qn(n,i,a);break;case 21:Qn(n,i,a);break;case 22:a.mode&1?(ut=(u=ut)||a.memoizedState!==null,Qn(n,i,a),ut=u):Qn(n,i,a);break;default:Qn(n,i,a)}}function jh(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new _0),i.forEach(function(u){var d=B0.bind(null,n,u);a.has(u)||(a.add(u),u.then(d,d))})}}function nn(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];try{var p=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:nt=S.stateNode,tn=!1;break e;case 3:nt=S.stateNode.containerInfo,tn=!0;break e;case 4:nt=S.stateNode.containerInfo,tn=!0;break e}S=S.return}if(nt===null)throw Error(t(160));Mh(p,v,d),nt=null,tn=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(O){De(d,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Fh(i,n),i=i.sibling}function Fh(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(nn(i,n),gn(n),u&4){try{is(3,n,n.return),_o(3,n)}catch(q){De(n,n.return,q)}try{is(5,n,n.return)}catch(q){De(n,n.return,q)}}break;case 1:nn(i,n),gn(n),u&512&&a!==null&&ii(a,a.return);break;case 5:if(nn(i,n),gn(n),u&512&&a!==null&&ii(a,a.return),n.flags&32){var d=n.stateNode;try{wi(d,"")}catch(q){De(n,n.return,q)}}if(u&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,S=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&ff(d,p),Za(S,v);var O=Za(S,p);for(v=0;v<k.length;v+=2){var U=k[v],B=k[v+1];U==="style"?Ef(d,B):U==="dangerouslySetInnerHTML"?yf(d,B):U==="children"?wi(d,B):P(d,U,B,O)}switch(S){case"input":Ka(d,p);break;case"textarea":pf(d,p);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var K=p.value;K!=null?Fr(d,!!p.multiple,K,!1):$!==!!p.multiple&&(p.defaultValue!=null?Fr(d,!!p.multiple,p.defaultValue,!0):Fr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ki]=p}catch(q){De(n,n.return,q)}}break;case 6:if(nn(i,n),gn(n),u&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(q){De(n,n.return,q)}}break;case 3:if(nn(i,n),gn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ji(i.containerInfo)}catch(q){De(n,n.return,q)}break;case 4:nn(i,n),gn(n);break;case 13:nn(i,n),gn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(xu=Ve())),u&4&&jh(n);break;case 22:if(U=a!==null&&a.memoizedState!==null,n.mode&1?(ut=(O=ut)||U,nn(i,n),ut=O):nn(i,n),gn(n),u&8192){if(O=n.memoizedState!==null,(n.stateNode.isHidden=O)&&!U&&(n.mode&1)!==0)for(Y=n,U=n.child;U!==null;){for(B=Y=U;Y!==null;){switch($=Y,K=$.child,$.tag){case 0:case 11:case 14:case 15:is(4,$,$.return);break;case 1:ii($,$.return);var X=$.stateNode;if(typeof X.componentWillUnmount=="function"){u=$,a=$.return;try{i=u,X.props=i.memoizedProps,X.state=i.memoizedState,X.componentWillUnmount()}catch(q){De(u,a,q)}}break;case 5:ii($,$.return);break;case 22:if($.memoizedState!==null){Dh(B);continue}}K!==null?(K.return=$,Y=K):Dh(B)}U=U.sibling}e:for(U=null,B=n;;){if(B.tag===5){if(U===null){U=B;try{d=B.stateNode,O?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=B.stateNode,k=B.memoizedProps.style,v=k!=null&&k.hasOwnProperty("display")?k.display:null,S.style.display=vf("display",v))}catch(q){De(n,n.return,q)}}}else if(B.tag===6){if(U===null)try{B.stateNode.nodeValue=O?"":B.memoizedProps}catch(q){De(n,n.return,q)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===n)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===n)break e;for(;B.sibling===null;){if(B.return===null||B.return===n)break e;U===B&&(U=null),B=B.return}U===B&&(U=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:nn(i,n),gn(n),u&4&&jh(n);break;case 21:break;default:nn(i,n),gn(n)}}function gn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Lh(a)){var u=a;break e}a=a.return}throw Error(t(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(wi(d,""),u.flags&=-33);var p=bh(n);Tu(n,p,d);break;case 3:case 4:var v=u.stateNode.containerInfo,S=bh(n);Su(n,S,v);break;default:throw Error(t(161))}}catch(k){De(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function L0(n,i,a){Y=n,$h(n)}function $h(n,i,a){for(var u=(n.mode&1)!==0;Y!==null;){var d=Y,p=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Oo;if(!v){var S=d.alternate,k=S!==null&&S.memoizedState!==null||ut;S=Oo;var O=ut;if(Oo=v,(ut=k)&&!O)for(Y=d;Y!==null;)v=Y,k=v.child,v.tag===22&&v.memoizedState!==null?Bh(d):k!==null?(k.return=v,Y=k):Bh(d);for(;p!==null;)Y=p,$h(p),p=p.sibling;Y=d,Oo=S,ut=O}Uh(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,Y=p):Uh(n)}}function Uh(n){for(;Y!==null;){var i=Y;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ut||_o(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(a===null)u.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:en(i.type,a.memoizedProps);u.componentDidUpdate(d,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Dd(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Dd(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var B=U.dehydrated;B!==null&&ji(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ut||i.flags&512&&Eu(i)}catch($){De(i,i.return,$)}}if(i===n){Y=null;break}if(a=i.sibling,a!==null){a.return=i.return,Y=a;break}Y=i.return}}function Dh(n){for(;Y!==null;){var i=Y;if(i===n){Y=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Y=a;break}Y=i.return}}function Bh(n){for(;Y!==null;){var i=Y;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{_o(4,i)}catch(k){De(i,a,k)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(k){De(i,d,k)}}var p=i.return;try{Eu(i)}catch(k){De(i,p,k)}break;case 5:var v=i.return;try{Eu(i)}catch(k){De(i,v,k)}}}catch(k){De(i,i.return,k)}if(i===n){Y=null;break}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break}Y=i.return}}var b0=Math.ceil,Po=b.ReactCurrentDispatcher,ku=b.ReactCurrentOwner,zt=b.ReactCurrentBatchConfig,Se=0,Je=null,He=null,rt=0,Nt=0,si=Hn(0),Ye=0,ss=null,kr=0,Lo=0,Au=0,os=null,vt=null,xu=0,oi=1/0,Pn=null,bo=!1,wu=null,Zn=null,Mo=!1,Jn=null,jo=0,as=0,Cu=null,Fo=-1,$o=0;function ft(){return(Se&6)!==0?Ve():Fo!==-1?Fo:Fo=Ve()}function er(n){return(n.mode&1)===0?1:(Se&2)!==0&&rt!==0?rt&-rt:y0.transition!==null?($o===0&&($o=bf()),$o):(n=we,n!==0||(n=window.event,n=n===void 0?16:Vf(n.type)),n)}function rn(n,i,a,u){if(50<as)throw as=0,Cu=null,Error(t(185));_i(n,a,u),((Se&2)===0||n!==Je)&&(n===Je&&((Se&2)===0&&(Lo|=a),Ye===4&&tr(n,rt)),Et(n,u),a===1&&Se===0&&(i.mode&1)===0&&(oi=Ve()+500,fo&&Yn()))}function Et(n,i){var a=n.callbackNode;yv(n,i);var u=Hs(n,n===Je?rt:0);if(u===0)a!==null&&_f(a),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(a!=null&&_f(a),i===1)n.tag===0?g0(Vh.bind(null,n)):Nd(Vh.bind(null,n)),d0(function(){(Se&6)===0&&Yn()}),a=null;else{switch(Mf(u)){case 1:a=sl;break;case 4:a=Pf;break;case 16:a=zs;break;case 536870912:a=Lf;break;default:a=zs}a=Qh(a,zh.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function zh(n,i){if(Fo=-1,$o=0,(Se&6)!==0)throw Error(t(327));var a=n.callbackNode;if(ai()&&n.callbackNode!==a)return null;var u=Hs(n,n===Je?rt:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||i)i=Uo(n,u);else{i=u;var d=Se;Se|=2;var p=Gh();(Je!==n||rt!==i)&&(Pn=null,oi=Ve()+500,xr(n,i));do try{F0();break}catch(S){Wh(n,S)}while(!0);Wl(),Po.current=p,Se=d,He!==null?i=0:(Je=null,rt=0,i=Ye)}if(i!==0){if(i===2&&(d=ol(n),d!==0&&(u=d,i=Ru(n,d))),i===1)throw a=ss,xr(n,0),tr(n,u),Et(n,Ve()),a;if(i===6)tr(n,u);else{if(d=n.current.alternate,(u&30)===0&&!M0(d)&&(i=Uo(n,u),i===2&&(p=ol(n),p!==0&&(u=p,i=Ru(n,p))),i===1))throw a=ss,xr(n,0),tr(n,u),Et(n,Ve()),a;switch(n.finishedWork=d,n.finishedLanes=u,i){case 0:case 1:throw Error(t(345));case 2:wr(n,vt,Pn);break;case 3:if(tr(n,u),(u&130023424)===u&&(i=xu+500-Ve(),10<i)){if(Hs(n,0)!==0)break;if(d=n.suspendedLanes,(d&u)!==u){ft(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ll(wr.bind(null,n,vt,Pn),i);break}wr(n,vt,Pn);break;case 4:if(tr(n,u),(u&4194240)===u)break;for(i=n.eventTimes,d=-1;0<u;){var v=31-Qt(u);p=1<<v,v=i[v],v>d&&(d=v),u&=~p}if(u=d,u=Ve()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*b0(u/1960))-u,10<u){n.timeoutHandle=Ll(wr.bind(null,n,vt,Pn),u);break}wr(n,vt,Pn);break;case 5:wr(n,vt,Pn);break;default:throw Error(t(329))}}}return Et(n,Ve()),n.callbackNode===a?zh.bind(null,n):null}function Ru(n,i){var a=os;return n.current.memoizedState.isDehydrated&&(xr(n,i).flags|=256),n=Uo(n,i),n!==2&&(i=vt,vt=a,i!==null&&Nu(i)),n}function Nu(n){vt===null?vt=n:vt.push.apply(vt,n)}function M0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var d=a[u],p=d.getSnapshot;d=d.value;try{if(!Zt(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function tr(n,i){for(i&=~Au,i&=~Lo,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Qt(i),u=1<<a;n[a]=-1,i&=~u}}function Vh(n){if((Se&6)!==0)throw Error(t(327));ai();var i=Hs(n,0);if((i&1)===0)return Et(n,Ve()),null;var a=Uo(n,i);if(n.tag!==0&&a===2){var u=ol(n);u!==0&&(i=u,a=Ru(n,u))}if(a===1)throw a=ss,xr(n,0),tr(n,i),Et(n,Ve()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,wr(n,vt,Pn),Et(n,Ve()),null}function Iu(n,i){var a=Se;Se|=1;try{return n(i)}finally{Se=a,Se===0&&(oi=Ve()+500,fo&&Yn())}}function Ar(n){Jn!==null&&Jn.tag===0&&(Se&6)===0&&ai();var i=Se;Se|=1;var a=zt.transition,u=we;try{if(zt.transition=null,we=1,n)return n()}finally{we=u,zt.transition=a,Se=i,(Se&6)===0&&Yn()}}function Ou(){Nt=si.current,Oe(si)}function xr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,f0(a)),He!==null)for(a=He.return;a!==null;){var u=a;switch(Ul(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&uo();break;case 3:ni(),Oe(mt),Oe(ot),Zl();break;case 5:ql(u);break;case 4:ni();break;case 13:Oe(be);break;case 19:Oe(be);break;case 10:Gl(u.type._context);break;case 22:case 23:Ou()}a=a.return}if(Je=n,He=n=nr(n.current,null),rt=Nt=i,Ye=0,ss=null,Au=Lo=kr=0,vt=os=null,Er!==null){for(i=0;i<Er.length;i++)if(a=Er[i],u=a.interleaved,u!==null){a.interleaved=null;var d=u.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,u.next=v}a.pending=u}Er=null}return n}function Wh(n,i){do{var a=He;try{if(Wl(),ko.current=Co,Ao){for(var u=Me.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Ao=!1}if(Tr=0,Ze=Ke=Me=null,Ji=!1,es=0,ku.current=null,a===null||a.return===null){Ye=1,ss=i,He=null;break}e:{var p=n,v=a.return,S=a,k=i;if(i=rt,S.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var O=k,U=S,B=U.tag;if((U.mode&1)===0&&(B===0||B===11||B===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var K=mh(v);if(K!==null){K.flags&=-257,gh(K,v,S,p,i),K.mode&1&&ph(p,O,i),i=K,k=O;var X=i.updateQueue;if(X===null){var q=new Set;q.add(k),i.updateQueue=q}else X.add(k);break e}else{if((i&1)===0){ph(p,O,i),_u();break e}k=Error(t(426))}}else if(Pe&&S.mode&1){var We=mh(v);if(We!==null){(We.flags&65536)===0&&(We.flags|=256),gh(We,v,S,p,i),zl(ri(k,S));break e}}p=k=ri(k,S),Ye!==4&&(Ye=2),os===null?os=[p]:os.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var N=dh(p,k,i);Ud(p,N);break e;case 1:S=k;var A=p.type,I=p.stateNode;if((p.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Zn===null||!Zn.has(I)))){p.flags|=65536,i&=-i,p.lanes|=i;var V=hh(p,S,i);Ud(p,V);break e}}p=p.return}while(p!==null)}Kh(a)}catch(Q){i=Q,He===a&&a!==null&&(He=a=a.return);continue}break}while(!0)}function Gh(){var n=Po.current;return Po.current=Co,n===null?Co:n}function _u(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||(kr&268435455)===0&&(Lo&268435455)===0||tr(Je,rt)}function Uo(n,i){var a=Se;Se|=2;var u=Gh();(Je!==n||rt!==i)&&(Pn=null,xr(n,i));do try{j0();break}catch(d){Wh(n,d)}while(!0);if(Wl(),Se=a,Po.current=u,He!==null)throw Error(t(261));return Je=null,rt=0,Ye}function j0(){for(;He!==null;)Hh(He)}function F0(){for(;He!==null&&!lv();)Hh(He)}function Hh(n){var i=qh(n.alternate,n,Nt);n.memoizedProps=n.pendingProps,i===null?Kh(n):He=i,ku.current=null}function Kh(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=I0(a,i,Nt),a!==null){He=a;return}}else{if(a=O0(a,i),a!==null){a.flags&=32767,He=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ye=6,He=null;return}}if(i=i.sibling,i!==null){He=i;return}He=i=n}while(i!==null);Ye===0&&(Ye=5)}function wr(n,i,a){var u=we,d=zt.transition;try{zt.transition=null,we=1,$0(n,i,a,u)}finally{zt.transition=d,we=u}return null}function $0(n,i,a,u){do ai();while(Jn!==null);if((Se&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(vv(n,p),n===Je&&(He=Je=null,rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Mo||(Mo=!0,Qh(zs,function(){return ai(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=zt.transition,zt.transition=null;var v=we;we=1;var S=Se;Se|=4,ku.current=null,P0(n,a),Fh(a,n),i0(_l),Xs=!!Ol,_l=Ol=null,n.current=a,L0(a),uv(),Se=S,we=v,zt.transition=p}else n.current=a;if(Mo&&(Mo=!1,Jn=n,jo=d),p=n.pendingLanes,p===0&&(Zn=null),dv(a.stateNode),Et(n,Ve()),i!==null)for(u=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],u(d.value,{componentStack:d.stack,digest:d.digest});if(bo)throw bo=!1,n=wu,wu=null,n;return(jo&1)!==0&&n.tag!==0&&ai(),p=n.pendingLanes,(p&1)!==0?n===Cu?as++:(as=0,Cu=n):as=0,Yn(),null}function ai(){if(Jn!==null){var n=Mf(jo),i=zt.transition,a=we;try{if(zt.transition=null,we=16>n?16:n,Jn===null)var u=!1;else{if(n=Jn,Jn=null,jo=0,(Se&6)!==0)throw Error(t(331));var d=Se;for(Se|=4,Y=n.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var S=p.deletions;if(S!==null){for(var k=0;k<S.length;k++){var O=S[k];for(Y=O;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:is(8,U,p)}var B=U.child;if(B!==null)B.return=U,Y=B;else for(;Y!==null;){U=Y;var $=U.sibling,K=U.return;if(Ph(U),U===O){Y=null;break}if($!==null){$.return=K,Y=$;break}Y=K}}}var X=p.alternate;if(X!==null){var q=X.child;if(q!==null){X.child=null;do{var We=q.sibling;q.sibling=null,q=We}while(q!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:is(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,Y=N;break e}Y=p.return}}var A=n.current;for(Y=A;Y!==null;){v=Y;var I=v.child;if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,Y=I;else e:for(v=A;Y!==null;){if(S=Y,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:_o(9,S)}}catch(Q){De(S,S.return,Q)}if(S===v){Y=null;break e}var V=S.sibling;if(V!==null){V.return=S.return,Y=V;break e}Y=S.return}}if(Se=d,Yn(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Vs,n)}catch{}u=!0}return u}finally{we=a,zt.transition=i}}return!1}function Yh(n,i,a){i=ri(a,i),i=dh(n,i,1),n=qn(n,i,1),i=ft(),n!==null&&(_i(n,1,i),Et(n,i))}function De(n,i,a){if(n.tag===3)Yh(n,n,a);else for(;i!==null;){if(i.tag===3){Yh(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zn===null||!Zn.has(u))){n=ri(a,n),n=hh(i,n,1),i=qn(i,n,1),n=ft(),i!==null&&(_i(i,1,n),Et(i,n));break}}i=i.return}}function U0(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),i=ft(),n.pingedLanes|=n.suspendedLanes&a,Je===n&&(rt&a)===a&&(Ye===4||Ye===3&&(rt&130023424)===rt&&500>Ve()-xu?xr(n,0):Au|=a),Et(n,i)}function Xh(n,i){i===0&&((n.mode&1)===0?i=1:(i=Gs,Gs<<=1,(Gs&130023424)===0&&(Gs=4194304)));var a=ft();n=In(n,i),n!==null&&(_i(n,i,a),Et(n,a))}function D0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Xh(n,a)}function B0(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(i),Xh(n,a)}var qh;qh=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||mt.current)yt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return yt=!1,N0(n,i,a);yt=(n.flags&131072)!==0}else yt=!1,Pe&&(i.flags&1048576)!==0&&Id(i,po,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Io(n,i),n=i.pendingProps;var d=Xr(i,ot.current);ti(i,a),d=tu(null,i,u,n,d,a);var p=nu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,gt(u)?(p=!0,co(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Yl(i),d.updater=Ro,i.stateNode=d,d._reactInternals=i,lu(i,u,n,a),i=du(null,i,u,!0,p,a)):(i.tag=0,Pe&&p&&$l(i),ct(null,i,d,a),i=i.child),i;case 16:u=i.elementType;e:{switch(Io(n,i),n=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=V0(u),n=en(u,n),d){case 0:i=fu(null,i,u,n,a);break e;case 1:i=kh(null,i,u,n,a);break e;case 11:i=yh(null,i,u,n,a);break e;case 14:i=vh(null,i,u,en(u.type,n),a);break e}throw Error(t(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),fu(n,i,u,d,a);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),kh(n,i,u,d,a);case 3:e:{if(Ah(i),n===null)throw Error(t(387));u=i.pendingProps,p=i.memoizedState,d=p.element,$d(n,i),So(i,u,null,a);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ri(Error(t(423)),i),i=xh(n,i,u,a,d);break e}else if(u!==d){d=ri(Error(t(424)),i),i=xh(n,i,u,a,d);break e}else for(Rt=Gn(i.stateNode.containerInfo.firstChild),Ct=i,Pe=!0,Jt=null,a=jd(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zr(),u===d){i=_n(n,i,a);break e}ct(n,i,u,a)}i=i.child}return i;case 5:return Bd(i),n===null&&Bl(i),u=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,Pl(u,d)?v=null:p!==null&&Pl(u,p)&&(i.flags|=32),Th(n,i),ct(n,i,v,a),i.child;case 6:return n===null&&Bl(i),null;case 13:return wh(n,i,a);case 4:return Xl(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Jr(i,null,u,a):ct(n,i,u,a),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),yh(n,i,u,d,a);case 7:return ct(n,i,i.pendingProps,a),i.child;case 8:return ct(n,i,i.pendingProps.children,a),i.child;case 12:return ct(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ce(yo,u._currentValue),u._currentValue=v,p!==null)if(Zt(p.value,v)){if(p.children===d.children&&!mt.current){i=_n(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var k=S.firstContext;k!==null;){if(k.context===u){if(p.tag===1){k=On(-1,a&-a),k.tag=2;var O=p.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?k.next=k:(k.next=U.next,U.next=k),O.pending=k}}p.lanes|=a,k=p.alternate,k!==null&&(k.lanes|=a),Hl(p.return,a,i),S.lanes|=a;break}k=k.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Hl(v,a,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}ct(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,ti(i,a),d=Dt(d),u=u(d),i.flags|=1,ct(n,i,u,a),i.child;case 14:return u=i.type,d=en(u,i.pendingProps),d=en(u.type,d),vh(n,i,u,d,a);case 15:return Eh(n,i,i.type,i.pendingProps,a);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:en(u,d),Io(n,i),i.tag=1,gt(u)?(n=!0,co(i)):n=!1,ti(i,a),ch(i,u,d),lu(i,u,d,a),du(null,i,u,!0,n,a);case 19:return Rh(n,i,a);case 22:return Sh(n,i,a)}throw Error(t(156,i.tag))};function Qh(n,i){return Of(n,i)}function z0(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(n,i,a,u){return new z0(n,i,a,u)}function Pu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function V0(n){if(typeof n=="function")return Pu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tt)return 11;if(n===de)return 14}return 2}function nr(n,i){var a=n.alternate;return a===null?(a=Vt(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Do(n,i,a,u,d,p){var v=2;if(u=n,typeof n=="function")Pu(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case D:return Cr(a.children,d,p,i);case G:v=8,d|=8;break;case xe:return n=Vt(12,a,i,d|2),n.elementType=xe,n.lanes=p,n;case $e:return n=Vt(13,a,i,d),n.elementType=$e,n.lanes=p,n;case Ue:return n=Vt(19,a,i,d),n.elementType=Ue,n.lanes=p,n;case Ae:return Bo(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:v=10;break e;case Ge:v=9;break e;case tt:v=11;break e;case de:v=14;break e;case ye:v=16,u=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Vt(v,a,i,d),i.elementType=n,i.type=u,i.lanes=p,i}function Cr(n,i,a,u){return n=Vt(7,n,u,i),n.lanes=a,n}function Bo(n,i,a,u){return n=Vt(22,n,u,i),n.elementType=Ae,n.lanes=a,n.stateNode={isHidden:!1},n}function Lu(n,i,a){return n=Vt(6,n,null,i),n.lanes=a,n}function bu(n,i,a){return i=Vt(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function W0(n,i,a,u,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Mu(n,i,a,u,d,p,v,S,k){return n=new W0(n,i,a,S,k),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Vt(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yl(p),n}function G0(n,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:n,containerInfo:i,implementation:a}}function Zh(n){if(!n)return Kn;n=n._reactInternals;e:{if(pr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(gt(a))return Cd(n,a,i)}return i}function Jh(n,i,a,u,d,p,v,S,k){return n=Mu(a,u,!0,n,d,p,v,S,k),n.context=Zh(null),a=n.current,u=ft(),d=er(a),p=On(u,d),p.callback=i??null,qn(a,p,d),n.current.lanes=d,_i(n,d,u),Et(n,u),n}function zo(n,i,a,u){var d=i.current,p=ft(),v=er(d);return a=Zh(a),i.context===null?i.context=a:i.pendingContext=a,i=On(p,v),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=qn(d,i,v),n!==null&&(rn(n,d,v,p),Eo(n,d,v)),v}function Vo(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function ep(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ju(n,i){ep(n,i),(n=n.alternate)&&ep(n,i)}function H0(){return null}var tp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fu(n){this._internalRoot=n}Wo.prototype.render=Fu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));zo(n,i,null,null)},Wo.prototype.unmount=Fu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ar(function(){zo(null,n,null,null)}),i[wn]=null}};function Wo(n){this._internalRoot=n}Wo.prototype.unstable_scheduleHydration=function(n){if(n){var i=$f();n={blockedOn:null,target:n,priority:i};for(var a=0;a<zn.length&&i!==0&&i<zn[a].priority;a++);zn.splice(a,0,n),a===0&&Bf(n)}};function $u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Go(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function np(){}function K0(n,i,a,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var O=Vo(v);p.call(O)}}var v=Jh(i,u,n,0,null,!1,!1,"",np);return n._reactRootContainer=v,n[wn]=v.current,Gi(n.nodeType===8?n.parentNode:n),Ar(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof u=="function"){var S=u;u=function(){var O=Vo(k);S.call(O)}}var k=Mu(n,0,!1,null,null,!1,!1,"",np);return n._reactRootContainer=k,n[wn]=k.current,Gi(n.nodeType===8?n.parentNode:n),Ar(function(){zo(i,k,a,u)}),k}function Ho(n,i,a,u,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var k=Vo(v);S.call(k)}}zo(i,v,n,d)}else v=K0(a,i,n,d,u);return Vo(v)}jf=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Oi(i.pendingLanes);a!==0&&(ll(i,a|1),Et(i,Ve()),(Se&6)===0&&(oi=Ve()+500,Yn()))}break;case 13:Ar(function(){var u=In(n,1);if(u!==null){var d=ft();rn(u,n,1,d)}}),ju(n,1)}},ul=function(n){if(n.tag===13){var i=In(n,134217728);if(i!==null){var a=ft();rn(i,n,134217728,a)}ju(n,134217728)}},Ff=function(n){if(n.tag===13){var i=er(n),a=In(n,i);if(a!==null){var u=ft();rn(a,n,i,u)}ju(n,i)}},$f=function(){return we},Uf=function(n,i){var a=we;try{return we=n,i()}finally{we=a}},tl=function(n,i,a){switch(i){case"input":if(Ka(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var d=lo(u);if(!d)throw Error(t(90));jt(u),Ka(u,d)}}}break;case"textarea":pf(n,a);break;case"select":i=a.value,i!=null&&Fr(n,!!a.multiple,i,!1)}},Af=Iu,xf=Ar;var Y0={usingClientEntryPoint:!1,Events:[Yi,Kr,lo,Tf,kf,Iu]},ls={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X0={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Nf(n),n===null?null:n.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Vs=Ko.inject(X0),dn=Ko}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y0,St.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$u(i))throw Error(t(200));return G0(n,i,null,a)},St.createRoot=function(n,i){if(!$u(n))throw Error(t(299));var a=!1,u="",d=tp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Mu(n,1,!1,null,null,a,!1,u,d),n[wn]=i.current,Gi(n.nodeType===8?n.parentNode:n),new Fu(i)},St.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Nf(i),n=n===null?null:n.stateNode,n},St.flushSync=function(n){return Ar(n)},St.hydrate=function(n,i,a){if(!Go(i))throw Error(t(200));return Ho(null,n,i,!0,a)},St.hydrateRoot=function(n,i,a){if(!$u(n))throw Error(t(405));var u=a!=null&&a.hydratedSources||null,d=!1,p="",v=tp;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Jh(i,null,n,1,a??null,d,!1,p,v),n[wn]=i.current,Gi(n),u)for(n=0;n<u.length;n++)a=u[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Wo(i)},St.render=function(n,i,a){if(!Go(i))throw Error(t(200));return Ho(null,n,i,!1,a)},St.unmountComponentAtNode=function(n){if(!Go(n))throw Error(t(40));return n._reactRootContainer?(Ar(function(){Ho(null,null,n,!1,function(){n._reactRootContainer=null,n[wn]=null})}),!0):!1},St.unstable_batchedUpdates=Iu,St.unstable_renderSubtreeIntoContainer=function(n,i,a,u){if(!Go(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ho(n,i,a,!1,u)},St.version="18.3.1-next-f1338f8080-20240426",St}var cp;function iE(){if(cp)return Bu.exports;cp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bu.exports=rE(),Bu.exports}var fp;function sE(){if(fp)return Yo;fp=1;var r=iE();return Yo.createRoot=r.createRoot,Yo.hydrateRoot=r.hydrateRoot,Yo}var oE=sE();const aE={},dp=r=>{let e;const t=new Set,s=(g,y)=>{const E=typeof g=="function"?g(e):g;if(!Object.is(E,e)){const T=e;e=y??(typeof E!="object"||E===null)?E:Object.assign({},e,E),t.forEach(w=>w(e,T))}},o=()=>e,h={setState:s,getState:o,getInitialState:()=>m,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{(aE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},m=e=r(s,o,h);return h},lE=r=>r?dp(r):dp;var Wu={exports:{}},Gu={},Hu={exports:{}},Ku={};var hp;function uE(){if(hp)return Ku;hp=1;var r=Ns();function e(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var t=typeof Object.is=="function"?Object.is:e,s=r.useState,o=r.useEffect,l=r.useLayoutEffect,c=r.useDebugValue;function f(y,E){var T=E(),w=s({inst:{value:T,getSnapshot:E}}),R=w[0].inst,j=w[1];return l(function(){R.value=T,R.getSnapshot=E,h(R)&&j({inst:R})},[y,T,E]),o(function(){return h(R)&&j({inst:R}),y(function(){h(R)&&j({inst:R})})},[y]),c(T),T}function h(y){var E=y.getSnapshot;y=y.value;try{var T=E();return!t(y,T)}catch{return!0}}function m(y,E){return E()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return Ku.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ku}var pp;function cE(){return pp||(pp=1,Hu.exports=uE()),Hu.exports}var mp;function fE(){if(mp)return Gu;mp=1;var r=Ns(),e=cE();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=r.useRef,c=r.useEffect,f=r.useMemo,h=r.useDebugValue;return Gu.useSyncExternalStoreWithSelector=function(m,g,y,E,T){var w=l(null);if(w.current===null){var R={hasValue:!1,value:null};w.current=R}else R=w.current;w=f(function(){function M(L){if(!_){if(_=!0,P=L,L=E(L),T!==void 0&&R.hasValue){var D=R.value;if(T(D,L))return b=D}return b=L}if(D=b,s(P,L))return D;var G=E(L);return T!==void 0&&T(D,G)?(P=L,D):(P=L,b=G)}var _=!1,P,b,z=y===void 0?null:y;return[function(){return M(g())},z===null?void 0:function(){return M(z())}]},[g,y,E,T]);var j=o(m,w[0],w[1]);return c(function(){R.hasValue=!0,R.value=j},[j]),h(j),j},Gu}var gp;function dE(){return gp||(gp=1,Wu.exports=fE()),Wu.exports}var hE=dE();const pE=jc(hE),ng={},{useDebugValue:mE}=Nr,{useSyncExternalStoreWithSelector:gE}=pE;let yp=!1;const yE=r=>r;function vE(r,e=yE,t){(ng?"production":void 0)!=="production"&&t&&!yp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yp=!0);const s=gE(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return mE(s),s}const vp=r=>{(ng?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?lE(r):r,t=(s,o)=>vE(e,s,o);return Object.assign(t,e),t},EE=r=>r?vp(r):vp,SE=`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills and commands.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation for current file"
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest", "Testing Library"]
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "refactor", "test"]
  }
}

@restrictions {
  - "Always explain your reasoning before making changes"
  - "Ask for clarification when requirements are unclear"
  - "Never skip writing tests for new functionality"
}
`,TE={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}},ie=EE(r=>({files:[{path:"project.prs",content:SE}],activeFile:"project.prs",isCompiling:!1,compileResult:null,lastCompileTime:null,config:TE,activeFormatter:"github",showErrors:!1,showExamples:!1,showConfig:!1,showEnvVars:!1,setActiveFile:e=>r({activeFile:e}),updateFile:(e,t)=>r(s=>({files:s.files.map(o=>o.path===e?{...o,content:t}:o)})),addFile:(e,t)=>r(s=>({files:[...s.files,{path:e,content:t}],activeFile:e})),deleteFile:e=>r(t=>{const s=t.files.filter(l=>l.path!==e),o=t.activeFile===e?s[0]?.path??"project.prs":t.activeFile;return{files:s,activeFile:o}}),renameFile:(e,t)=>r(s=>({files:s.files.map(o=>o.path===e?{...o,path:t}:o),activeFile:s.activeFile===e?t:s.activeFile})),setFiles:e=>r({files:e,activeFile:e[0]?.path??"project.prs"}),setCompiling:e=>r({isCompiling:e}),setCompileResult:e=>r({compileResult:e,lastCompileTime:Date.now(),showErrors:e!==null&&!e.success}),setTargetEnabled:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],enabled:t}}}})),setTargetVersion:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],version:t}}}})),setTargetConvention:(e,t)=>r(s=>({config:{...s.config,targets:{...s.config.targets,[e]:{...s.config.targets[e],convention:t}}}})),setFormatting:e=>r(t=>({config:{...t.config,formatting:{...t.config.formatting,...e}}})),setConfig:e=>r({config:e}),setEnvVar:(e,t)=>r(s=>({config:{...s.config,envVars:{...s.config.envVars,[e]:t}}})),deleteEnvVar:e=>r(t=>{const{[e]:s,...o}=t.config.envVars;return{config:{...t.config,envVars:o}}}),setEnvVars:e=>r(t=>({config:{...t.config,envVars:e}})),setActiveFormatter:e=>r({activeFormatter:e}),setShowErrors:e=>r({showErrors:e}),setShowExamples:e=>r({showExamples:e}),setShowConfig:e=>r({showConfig:e}),setShowEnvVars:e=>r({showEnvVars:e})})),kE=r=>r.files.find(e=>e.path===r.activeFile)?.content??"",AE=r=>{const e={};for(const t of r.files)e[t.path]=t.content;return e},xE=(r,e)=>{if(!r.compileResult?.outputs)return[];const t=r.compileResult.outputs,s=[],l={claude:[/CLAUDE\.md$/,/\.claude\/rules\/.*\.md$/,/\.claude\/skills\/.*\.md$/,/\.claude\/memories\/.*\.md$/],github:[/\.github\/copilot-instructions\.md$/,/copilot-instructions\.md$/,/\.github\/instructions\/.*\.instructions\.md$/,/\.github\/prompts\/.*\.prompt\.md$/,/\.github\/skills\/.*\/SKILL\.md$/,/\.github\/agents\/.*\.md$/,/^AGENTS\.md$/],cursor:[/\.cursor\/rules\/.*\.mdc$/,/\.cursorrules$/],antigravity:[/\.agent\/rules\/.*\.md$/,/\.agent\/workflows\/.*\.md$/]}[e];for(const[h,m]of t)l.some(g=>g.test(h))&&s.push(m);const f={claude:"CLAUDE.md",github:"copilot-instructions.md",cursor:"instructions.mdc",antigravity:"project.md"}[e];return s.sort((h,m)=>{const g=h.path.endsWith(f),y=m.path.endsWith(f);return g&&!y?-1:!g&&y?1:h.path.localeCompare(m.path)}),s},wE=r=>Object.entries(r.config.targets).filter(([,e])=>e.enabled).map(([e])=>e);var Yu={exports:{}},Ep;function CE(){return Ep||(Ep=1,(function(r){var e=(function(){var t=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={};function c(h,m){if(!l[h]){l[h]={};for(var g=0;g<h.length;g++)l[h][h.charAt(g)]=g}return l[h][m]}var f={compressToBase64:function(h){if(h==null)return"";var m=f._compress(h,6,function(g){return s.charAt(g)});switch(m.length%4){default:case 0:return m;case 1:return m+"===";case 2:return m+"==";case 3:return m+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:f._decompress(h.length,32,function(m){return c(s,h.charAt(m))})},compressToUTF16:function(h){return h==null?"":f._compress(h,15,function(m){return t(m+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:f._decompress(h.length,16384,function(m){return h.charCodeAt(m)-32})},compressToUint8Array:function(h){for(var m=f.compress(h),g=new Uint8Array(m.length*2),y=0,E=m.length;y<E;y++){var T=m.charCodeAt(y);g[y*2]=T>>>8,g[y*2+1]=T%256}return g},decompressFromUint8Array:function(h){if(h==null)return f.decompress(h);for(var m=new Array(h.length/2),g=0,y=m.length;g<y;g++)m[g]=h[g*2]*256+h[g*2+1];var E=[];return m.forEach(function(T){E.push(t(T))}),f.decompress(E.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":f._compress(h,6,function(m){return o.charAt(m)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),f._decompress(h.length,32,function(m){return c(o,h.charAt(m))}))},compress:function(h){return f._compress(h,16,function(m){return t(m)})},_compress:function(h,m,g){if(h==null)return"";var y,E,T={},w={},R="",j="",M="",_=2,P=3,b=2,z=[],L=0,D=0,G;for(G=0;G<h.length;G+=1)if(R=h.charAt(G),Object.prototype.hasOwnProperty.call(T,R)||(T[R]=P++,w[R]=!0),j=M+R,Object.prototype.hasOwnProperty.call(T,j))M=j;else{if(Object.prototype.hasOwnProperty.call(w,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete w[M]}else for(E=T[M],y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++),T[j]=P++,M=String(R)}if(M!==""){if(Object.prototype.hasOwnProperty.call(w,M)){if(M.charCodeAt(0)<256){for(y=0;y<b;y++)L=L<<1,D==m-1?(D=0,z.push(g(L)),L=0):D++;for(E=M.charCodeAt(0),y=0;y<8;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}else{for(E=1,y=0;y<b;y++)L=L<<1|E,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=0;for(E=M.charCodeAt(0),y=0;y<16;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1}_--,_==0&&(_=Math.pow(2,b),b++),delete w[M]}else for(E=T[M],y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;_--,_==0&&(_=Math.pow(2,b),b++)}for(E=2,y=0;y<b;y++)L=L<<1|E&1,D==m-1?(D=0,z.push(g(L)),L=0):D++,E=E>>1;for(;;)if(L=L<<1,D==m-1){z.push(g(L));break}else D++;return z.join("")},decompress:function(h){return h==null?"":h==""?null:f._decompress(h.length,32768,function(m){return h.charCodeAt(m)})},_decompress:function(h,m,g){var y=[],E=4,T=4,w=3,R="",j=[],M,_,P,b,z,L,D,G={val:g(0),position:m,index:1};for(M=0;M<3;M+=1)y[M]=M;for(P=0,z=Math.pow(2,2),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;D=t(P);break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;D=t(P);break;case 2:return""}for(y[3]=D,_=D,j.push(D);;){if(G.index>h)return"";for(P=0,z=Math.pow(2,w),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;switch(D=P){case 0:for(P=0,z=Math.pow(2,8),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[T++]=t(P),D=T-1,E--;break;case 1:for(P=0,z=Math.pow(2,16),L=1;L!=z;)b=G.val&G.position,G.position>>=1,G.position==0&&(G.position=m,G.val=g(G.index++)),P|=(b>0?1:0)*L,L<<=1;y[T++]=t(P),D=T-1,E--;break;case 2:return j.join("")}if(E==0&&(E=Math.pow(2,w),w++),y[D])R=y[D];else if(D===T)R=_+_.charAt(0);else return null;j.push(R),y[T++]=_+R.charAt(0),E--,_=R,E==0&&(E=Math.pow(2,w),w++)}}};return f})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Yu)),Yu.exports}var RE=CE();const rg=jc(RE),NE="1",or={targets:{github:{enabled:!0,version:"full"},claude:{enabled:!0,version:"full"},cursor:{enabled:!0,version:"standard"},antigravity:{enabled:!0,version:"frontmatter"}},formatting:{tabWidth:2,proseWrap:"preserve",printWidth:80},envVars:{}};function IE(r){const e={},t={};for(const[o,l]of Object.entries(r.targets)){const c=or.targets[o],f={};l.enabled!==c.enabled&&(f.enabled=l.enabled),l.version!==c.version&&(f.version=l.version),l.convention!==c.convention&&(f.convention=l.convention),Object.keys(f).length>0&&(t[o]=f)}Object.keys(t).length>0&&(e.targets=t);const s={};return r.formatting.tabWidth!==or.formatting.tabWidth&&(s.tabWidth=r.formatting.tabWidth),r.formatting.proseWrap!==or.formatting.proseWrap&&(s.proseWrap=r.formatting.proseWrap),r.formatting.printWidth!==or.formatting.printWidth&&(s.printWidth=r.formatting.printWidth),Object.keys(s).length>0&&(e.formatting=s),r.envVars&&Object.keys(r.envVars).length>0&&(e.envVars=r.envVars),Object.keys(e).length>0?e:void 0}function OE(r){if(!r)return{...or};const e={targets:{...or.targets},formatting:{...or.formatting},envVars:{...or.envVars}};if(r.targets)for(const[t,s]of Object.entries(r.targets))e.targets[t]={...e.targets[t],...s};return r.formatting&&(e.formatting={...e.formatting,...r.formatting}),r.envVars&&(e.envVars={...r.envVars}),e}function ig(r,e,t,s){const o={files:r.map(f=>({path:f.path,content:f.content})),entry:r[0]?.path,formatter:e,config:s?IE(s):void 0,version:NE},l=JSON.stringify(o);return rg.compressToEncodedURIComponent(l)}function _E(r){try{const e=rg.decompressFromEncodedURIComponent(r);if(!e)return null;const t=JSON.parse(e);if(!t.files||!Array.isArray(t.files))return null;for(const s of t.files)if(typeof s.path!="string"||typeof s.content!="string")return null;return t}catch{return null}}function PE(r,e,t,s){const o=ig(r,e,t,s),l=new URL(window.location.href);return l.searchParams.set("s",o),e&&l.searchParams.set("f",e),l.toString()}function LE(){const r=new URL(window.location.href),e=r.searchParams.get("s");if(!e)return null;const t=_E(e);if(!t)return null;const s=r.searchParams.get("f");return s&&(t.formatter=s),t}function bE(){return new URL(window.location.href).searchParams.get("e")}function ME(r,e,t,s){const o=ig(r,e,t,s),l=new URL(window.location.href);l.searchParams.set("s",o),e&&l.searchParams.set("f",e),l.searchParams.delete("e"),window.history.replaceState(null,"",l.toString())}async function jE(r,e,t,s){try{const o=PE(r,e,t,s);return await navigator.clipboard.writeText(o),!0}catch{return!1}}function FE(){const r=ie(m=>m.files),e=ie(m=>m.activeFormatter),t=ie(m=>m.config),s=ie(m=>m.setFiles),o=ie(m=>m.setActiveFormatter),l=ie(m=>m.setConfig),c=Z.useRef(!1),f=Z.useRef(null);return Z.useEffect(()=>{if(c.current||(c.current=!0,bE()))return;const g=LE();g&&(s(g.files),g.formatter&&o(g.formatter),g.config&&l(OE(g.config)))},[s,o,l]),Z.useEffect(()=>{if(c.current)return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{ME(r,e,void 0,t)},1e3),()=>{f.current&&clearTimeout(f.current)}},[r,e,t]),{handleShare:Z.useCallback(async()=>await jE(r,e,void 0,t),[r,e,t])}}const $E="1.0.0-rc.2",UE="https://github.com/mrwogu/promptscript";function DE(){const r=ie(R=>R.isCompiling),e=ie(R=>R.compileResult),t=ie(R=>R.showExamples),s=ie(R=>R.setShowExamples),o=ie(R=>R.showConfig),l=ie(R=>R.setShowConfig),c=ie(R=>R.showEnvVars),f=ie(R=>R.setShowEnvVars),h=Object.keys(ie(R=>R.config.envVars)).length,{handleShare:m}=FE(),[g,y]=Z.useState(!1),E=e&&!e.success,T=e?.stats,w=async()=>{await m()&&(y(!0),setTimeout(()=>y(!1),2e3))};return C.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-ps-surface border-b border-ps-border",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx("span",{className:"text-ps-primary",children:"PRS"}),C.jsx("span",{children:"PromptScript Playground"})]}),C.jsxs("span",{className:"text-xs text-gray-500",children:["v",$E]})]}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"flex items-center gap-2 text-sm",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),C.jsx("span",{className:"text-gray-400",children:"Compiling..."})]}):E?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),C.jsxs("span",{className:"text-red-400",children:[e.errors.length," error",e.errors.length!==1?"s":""]})]}):e?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),C.jsxs("span",{className:"text-green-400",children:["Compiled in ",T?.totalTime,"ms"]})]}):null}),C.jsxs("button",{onClick:()=>l(!o),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${o?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Configuration",children:[C.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Config"]}),C.jsxs("button",{onClick:()=>f(!c),className:`px-3 py-1 text-sm rounded flex items-center gap-1 ${c?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,title:"Environment Variables",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Env",h>0&&C.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-indigo-500 rounded-full",children:h})]}),C.jsx("button",{onClick:()=>s(!t),className:`px-3 py-1 text-sm rounded ${t?"bg-ps-primary text-white":"bg-ps-bg hover:bg-ps-surface text-gray-300"}`,children:"Examples"}),C.jsx("button",{onClick:w,className:"px-3 py-1 text-sm bg-ps-primary hover:bg-ps-secondary rounded text-white relative",children:g?"Copied!":"Share"}),C.jsx("a",{href:UE,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z",clipRule:"evenodd"})})})]})]})}function BE(){const r=ie(T=>T.files),e=ie(T=>T.activeFile),t=ie(T=>T.setActiveFile),s=ie(T=>T.addFile),o=ie(T=>T.deleteFile),l=ie(T=>T.renameFile),[c,f]=Z.useState(null),[h,m]=Z.useState(""),g=()=>{const T="new-file";let w=`${T}.prs`,R=1;for(;r.some(j=>j.path===w);)w=`${T}-${R}.prs`,R++;s(w,`@meta {
  id: "`+w.replace(".prs","")+`"
  syntax: "1.0.0"
}
`)},y=T=>{f(T),m(T)},E=T=>{if(h&&h!==T){const w=h.endsWith(".prs")?h:`${h}.prs`;r.some(R=>R.path===w)||l(T,w)}f(null)};return C.jsxs("div",{className:"flex items-center bg-ps-bg border-b border-ps-border overflow-x-auto",children:[r.map(T=>C.jsx("div",{className:`group flex items-center px-3 py-2 text-sm cursor-pointer border-r border-ps-border ${e===T.path?"bg-ps-surface text-white":"text-gray-400 hover:bg-ps-surface/50"}`,onClick:()=>t(T.path),onDoubleClick:()=>y(T.path),children:c===T.path?C.jsx("input",{type:"text",value:h,onChange:w=>m(w.target.value),onBlur:()=>E(T.path),onKeyDown:w=>{w.key==="Enter"&&E(T.path),w.key==="Escape"&&f(null)},className:"bg-transparent border-b border-ps-primary outline-none w-24",autoFocus:!0,onClick:w=>w.stopPropagation()}):C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"truncate max-w-[120px]",children:T.path}),r.length>1&&C.jsx("button",{onClick:w=>{w.stopPropagation(),o(T.path)},className:"ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-red-400",children:""})]})},T.path)),C.jsx("button",{onClick:g,className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-ps-surface/50",title:"Add new file",children:"+"})]})}function Sp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function zE(r){if(Array.isArray(r))return r}function VE(r,e,t){return(e=qE(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function WE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,o,l,c,f=[],h=!0,m=!1;try{if(l=(t=t.call(r)).next,e!==0)for(;!(h=(s=l.call(t)).done)&&(f.push(s.value),f.length!==e);h=!0);}catch(g){m=!0,o=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(m)throw o}}return f}}function GE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function kp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tp(Object(t),!0).forEach(function(s){VE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tp(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function HE(r,e){if(r==null)return{};var t,s,o=KE(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)t=l[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function KE(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;t[s]=r[s]}return t}function YE(r,e){return zE(r)||WE(r,e)||QE(r,e)||GE()}function XE(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function qE(r){var e=XE(r,"string");return typeof e=="symbol"?e:e+""}function QE(r,e){if(r){if(typeof r=="string")return Sp(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Sp(r,e):void 0}}function ZE(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ap(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function xp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ap(Object(t),!0).forEach(function(s){ZE(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ap(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function JE(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(s){return e.reduceRight(function(o,l){return l(o)},s)}}function ms(r){return function e(){for(var t=this,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return o.length>=r.length?r.apply(this,o):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(o,f))}}}function ma(r){return{}.toString.call(r).includes("Object")}function eS(r){return!Object.keys(r).length}function As(r){return typeof r=="function"}function tS(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function nS(r,e){return ma(e)||ar("changeType"),Object.keys(e).some(function(t){return!tS(r,t)})&&ar("changeField"),e}function rS(r){As(r)||ar("selectorType")}function iS(r){As(r)||ma(r)||ar("handlerType"),ma(r)&&Object.values(r).some(function(e){return!As(e)})&&ar("handlersType")}function sS(r){r||ar("initialIsRequired"),ma(r)||ar("initialType"),eS(r)&&ar("initialContent")}function oS(r,e){throw new Error(r[e]||r.default)}var aS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ar=ms(oS)(aS),Xo={changes:nS,selector:rS,handler:iS,initial:sS};function lS(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xo.initial(r),Xo.handler(e);var t={current:r},s=ms(fS)(t,e),o=ms(cS)(t),l=ms(Xo.changes)(r),c=ms(uS)(t);function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Xo.selector(m),m(t.current)}function h(m){JE(s,o,l,c)(m)}return[f,h]}function uS(r,e){return As(e)?e(r.current):e}function cS(r,e){return r.current=xp(xp({},r.current),e),e}function fS(r,e,t){return As(e)?e(r.current):Object.keys(t).forEach(function(s){var o;return(o=e[s])===null||o===void 0?void 0:o.call(e,r.current[s])}),t}var dS={create:lS},hS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function pS(r){return function e(){for(var t=this,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return o.length>=r.length?r.apply(this,o):function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return e.apply(t,[].concat(o,f))}}}function mS(r){return{}.toString.call(r).includes("Object")}function gS(r){return r||wp("configIsRequired"),mS(r)||wp("configType"),r.urls?(yS(),{paths:{vs:r.urls.monacoBase}}):r}function yS(){console.warn(sg.deprecation)}function vS(r,e){throw new Error(r[e]||r.default)}var sg={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},wp=pS(vS)(sg),ES={config:gS},SS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(o){return t.reduceRight(function(l,c){return c(l)},o)}};function og(r,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&r[t]&&Object.assign(e[t],og(r[t],e[t]))}),kp(kp({},r),e)}var TS={type:"cancelation",msg:"operation is manually canceled"};function Xu(r){var e=!1,t=new Promise(function(s,o){r.then(function(l){return e?o(TS):s(l)}),r.catch(o)});return t.cancel=function(){return e=!0},t}var kS=["monaco"],AS=dS.create({config:hS,isInitialized:!1,resolve:null,reject:null,monaco:null}),ag=YE(AS,2),Is=ag[0],Na=ag[1];function xS(r){var e=ES.config(r),t=e.monaco,s=HE(e,kS);Na(function(o){return{config:og(o.config,s),monaco:t}})}function wS(){var r=Is(function(e){var t=e.monaco,s=e.isInitialized,o=e.resolve;return{monaco:t,isInitialized:s,resolve:o}});if(!r.isInitialized){if(Na({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),Xu(qu);if(window.monaco&&window.monaco.editor)return lg(window.monaco),r.resolve(window.monaco),Xu(qu);SS(CS,NS)(IS)}return Xu(qu)}function CS(r){return document.body.appendChild(r)}function RS(r){var e=document.createElement("script");return r&&(e.src=r),e}function NS(r){var e=Is(function(s){var o=s.config,l=s.reject;return{config:o,reject:l}}),t=RS("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return r()},t.onerror=e.reject,t}function IS(){var r=Is(function(t){var s=t.config,o=t.resolve,l=t.reject;return{config:s,resolve:o,reject:l}}),e=window.require;e.config(r.config),e(["vs/editor/editor.main"],function(t){var s=t.m||t;lg(s),r.resolve(s)},function(t){r.reject(t)})}function lg(r){Is().monaco||Na({monaco:r})}function OS(){return Is(function(r){var e=r.monaco;return e})}var qu=new Promise(function(r,e){return Na({resolve:r,reject:e})}),ug={config:xS,init:wS,__getMonacoInstance:OS},_S={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Qu=_S,PS={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},LS=PS;function bS({children:r}){return Nr.createElement("div",{style:LS.container},r)}var MS=bS,jS=MS;function FS({width:r,height:e,isEditorReady:t,loading:s,_ref:o,className:l,wrapperProps:c}){return Nr.createElement("section",{style:{...Qu.wrapper,width:r,height:e},...c},!t&&Nr.createElement(jS,null,s),Nr.createElement("div",{ref:o,style:{...Qu.fullWidth,...!t&&Qu.hide},className:l}))}var $S=FS,cg=Z.memo($S);function US(r){Z.useEffect(r,[])}var fg=US;function DS(r,e,t=!0){let s=Z.useRef(!0);Z.useEffect(s.current||!t?()=>{s.current=!1}:r,e)}var Ot=DS;function Es(){}function pi(r,e,t,s){return BS(r,s)||zS(r,e,t,s)}function BS(r,e){return r.editor.getModel(dg(r,e))}function zS(r,e,t,s){return r.editor.createModel(e,t,s?dg(r,s):void 0)}function dg(r,e){return r.Uri.parse(e)}function VS({original:r,modified:e,language:t,originalLanguage:s,modifiedLanguage:o,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:f=!1,keepCurrentModifiedModel:h=!1,theme:m="light",loading:g="Loading...",options:y={},height:E="100%",width:T="100%",className:w,wrapperProps:R={},beforeMount:j=Es,onMount:M=Es}){let[_,P]=Z.useState(!1),[b,z]=Z.useState(!0),L=Z.useRef(null),D=Z.useRef(null),G=Z.useRef(null),xe=Z.useRef(M),ce=Z.useRef(j),Ge=Z.useRef(!1);fg(()=>{let de=ug.init();return de.then(ye=>(D.current=ye)&&z(!1)).catch(ye=>ye?.type!=="cancelation"&&console.error("Monaco initialization: error:",ye)),()=>L.current?Ue():de.cancel()}),Ot(()=>{if(L.current&&D.current){let de=L.current.getOriginalEditor(),ye=pi(D.current,r||"",s||t||"text",l||"");ye!==de.getModel()&&de.setModel(ye)}},[l],_),Ot(()=>{if(L.current&&D.current){let de=L.current.getModifiedEditor(),ye=pi(D.current,e||"",o||t||"text",c||"");ye!==de.getModel()&&de.setModel(ye)}},[c],_),Ot(()=>{let de=L.current.getModifiedEditor();de.getOption(D.current.editor.EditorOption.readOnly)?de.setValue(e||""):e!==de.getValue()&&(de.executeEdits("",[{range:de.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),de.pushUndoStop())},[e],_),Ot(()=>{L.current?.getModel()?.original.setValue(r||"")},[r],_),Ot(()=>{let{original:de,modified:ye}=L.current.getModel();D.current.editor.setModelLanguage(de,s||t||"text"),D.current.editor.setModelLanguage(ye,o||t||"text")},[t,s,o],_),Ot(()=>{D.current?.editor.setTheme(m)},[m],_),Ot(()=>{L.current?.updateOptions(y)},[y],_);let tt=Z.useCallback(()=>{if(!D.current)return;ce.current(D.current);let de=pi(D.current,r||"",s||t||"text",l||""),ye=pi(D.current,e||"",o||t||"text",c||"");L.current?.setModel({original:de,modified:ye})},[t,e,o,r,s,l,c]),$e=Z.useCallback(()=>{!Ge.current&&G.current&&(L.current=D.current.editor.createDiffEditor(G.current,{automaticLayout:!0,...y}),tt(),D.current?.editor.setTheme(m),P(!0),Ge.current=!0)},[y,m,tt]);Z.useEffect(()=>{_&&xe.current(L.current,D.current)},[_]),Z.useEffect(()=>{!b&&!_&&$e()},[b,_,$e]);function Ue(){let de=L.current?.getModel();f||de?.original?.dispose(),h||de?.modified?.dispose(),L.current?.dispose()}return Nr.createElement(cg,{width:T,height:E,isEditorReady:_,loading:g,_ref:G,className:w,wrapperProps:R})}var WS=VS;Z.memo(WS);function GS(r){let e=Z.useRef();return Z.useEffect(()=>{e.current=r},[r]),e.current}var HS=GS,qo=new Map;function KS({defaultValue:r,defaultLanguage:e,defaultPath:t,value:s,language:o,path:l,theme:c="light",line:f,loading:h="Loading...",options:m={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:E=!1,width:T="100%",height:w="100%",className:R,wrapperProps:j={},beforeMount:M=Es,onMount:_=Es,onChange:P,onValidate:b=Es}){let[z,L]=Z.useState(!1),[D,G]=Z.useState(!0),xe=Z.useRef(null),ce=Z.useRef(null),Ge=Z.useRef(null),tt=Z.useRef(_),$e=Z.useRef(M),Ue=Z.useRef(),de=Z.useRef(s),ye=HS(l),Ae=Z.useRef(!1),W=Z.useRef(!1);fg(()=>{let x=ug.init();return x.then(F=>(xe.current=F)&&G(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>ce.current?H():x.cancel()}),Ot(()=>{let x=pi(xe.current,r||s||"",e||o||"",l||t||"");x!==ce.current?.getModel()&&(y&&qo.set(ye,ce.current?.saveViewState()),ce.current?.setModel(x),y&&ce.current?.restoreViewState(qo.get(l)))},[l],z),Ot(()=>{ce.current?.updateOptions(m)},[m],z),Ot(()=>{!ce.current||s===void 0||(ce.current.getOption(xe.current.editor.EditorOption.readOnly)?ce.current.setValue(s):s!==ce.current.getValue()&&(W.current=!0,ce.current.executeEdits("",[{range:ce.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),ce.current.pushUndoStop(),W.current=!1))},[s],z),Ot(()=>{let x=ce.current?.getModel();x&&o&&xe.current?.editor.setModelLanguage(x,o)},[o],z),Ot(()=>{f!==void 0&&ce.current?.revealLine(f)},[f],z),Ot(()=>{xe.current?.editor.setTheme(c)},[c],z);let J=Z.useCallback(()=>{if(!(!Ge.current||!xe.current)&&!Ae.current){$e.current(xe.current);let x=l||t,F=pi(xe.current,s||r||"",e||o||"",x||"");ce.current=xe.current?.editor.create(Ge.current,{model:F,automaticLayout:!0,...m},g),y&&ce.current.restoreViewState(qo.get(x)),xe.current.editor.setTheme(c),f!==void 0&&ce.current.revealLine(f),L(!0),Ae.current=!0}},[r,e,t,s,o,l,m,g,y,c,f]);Z.useEffect(()=>{z&&tt.current(ce.current,xe.current)},[z]),Z.useEffect(()=>{!D&&!z&&J()},[D,z,J]),de.current=s,Z.useEffect(()=>{z&&P&&(Ue.current?.dispose(),Ue.current=ce.current?.onDidChangeModelContent(x=>{W.current||P(ce.current.getValue(),x)}))},[z,P]),Z.useEffect(()=>{if(z){let x=xe.current.editor.onDidChangeMarkers(F=>{let fe=ce.current.getModel()?.uri;if(fe&&F.find(te=>te.path===fe.path)){let te=xe.current.editor.getModelMarkers({resource:fe});b?.(te)}});return()=>{x?.dispose()}}return()=>{}},[z,b]);function H(){Ue.current?.dispose(),E?y&&qo.set(l,ce.current.saveViewState()):ce.current.getModel()?.dispose(),ce.current.dispose()}return Nr.createElement(cg,{width:T,height:w,isEditorReady:z,loading:h,_ref:Ge,className:R,wrapperProps:j})}var YS=KS,XS=Z.memo(YS),qS=XS;const mi="promptscript",QS={defaultToken:"",tokenPostfix:".prs",keywords:["true","false","null","string","number","boolean","enum"],directives:["@meta","@inherit","@extend","@use","@identity","@context","@standards","@restrictions","@guardrails","@shortcuts","@tools","@skills","@knowledge","@examples","@output","@behavior","@memory","@guards","@agents","@params","@project"],operators:[":"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/#.*$/,"comment"],[/@\w+/,{cases:{"@directives":"keyword.directive","@default":"keyword.directive"}}],[/[a-zA-Z_][\w-]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/:/,"delimiter"],[/,/,"delimiter"],[/\{\{/,"variable.template","@templateExpression"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/"""/,"string","@multilineString"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],templateExpression:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"],[/#.*$/,"comment"]],string:[[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^\\"$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/\$(?!\{)/,"string"],[/"/,"string","@pop"]],multilineString:[[/\{\{/,"variable.template","@templateExpressionInString"],[/\$\{[A-Z_][A-Z0-9_]*(?::-[^}]*)?\}/,"variable.env"],[/[^"{$]+/,"string"],[/\$(?!\{)/,"string"],[/"""/,"string","@pop"],[/"/,"string"]],templateExpressionInString:[[/[a-zA-Z_][a-zA-Z0-9_]*/,"variable.name"],[/\}\}/,"variable.template","@pop"]]}},ZS={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],folding:{markers:{start:/^\s*@\w+\s*\{/,end:/^\s*\}/}}},JS=[{token:"keyword.directive",foreground:"818cf8",fontStyle:"bold"},{token:"keyword",foreground:"93c5fd"},{token:"string",foreground:"a3e635"},{token:"string.escape",foreground:"facc15"},{token:"comment",foreground:"6b7280",fontStyle:"italic"},{token:"number",foreground:"f472b6"},{token:"identifier",foreground:"f8fafc"},{token:"delimiter",foreground:"94a3b8"},{token:"variable.template",foreground:"f472b6",fontStyle:"bold"},{token:"variable.name",foreground:"fb923c"},{token:"variable.env",foreground:"fbbf24"}];function eT(r){r.languages.getLanguages().some(t=>t.id===mi)||(r.languages.register({id:mi,extensions:[".prs"],aliases:["PromptScript","prs"],mimetypes:["text/x-promptscript"]}),r.languages.setMonarchTokensProvider(mi,QS),r.languages.setLanguageConfiguration(mi,ZS),r.editor.defineTheme("prs-dark",{base:"vs-dark",inherit:!0,rules:JS,colors:{"editor.background":"#0f172a","editor.foreground":"#f8fafc","editor.lineHighlightBackground":"#1e293b","editorCursor.foreground":"#6366f1","editor.selectionBackground":"#334155","editorLineNumber.foreground":"#475569","editorLineNumber.activeForeground":"#94a3b8"}}))}function tT(r){return{provideCompletionItems:(e,t)=>{const s=e.getWordUntilPosition(t),o={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};return{suggestions:[{label:"@meta",kind:r.languages.CompletionItemKind.Keyword,insertText:`@meta {
  id: "$1"
  syntax: "1.0.0"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define metadata for the PromptScript file",range:o},{label:"@inherit",kind:r.languages.CompletionItemKind.Keyword,insertText:"@inherit $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Inherit from another PromptScript file",range:o},{label:"@use",kind:r.languages.CompletionItemKind.Keyword,insertText:"@use $1",insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Import and merge directives from another file",range:o},{label:"@identity",kind:r.languages.CompletionItemKind.Keyword,insertText:`@identity {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define the AI identity/persona",range:o},{label:"@context",kind:r.languages.CompletionItemKind.Keyword,insertText:`@context {
  """
  $1
  """
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide contextual information",range:o},{label:"@standards",kind:r.languages.CompletionItemKind.Keyword,insertText:`@standards {
  $1: [$2]
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define coding standards and guidelines",range:o},{label:"@restrictions",kind:r.languages.CompletionItemKind.Keyword,insertText:`@restrictions {
  - "$1"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define things the AI should NOT do",range:o},{label:"@shortcuts",kind:r.languages.CompletionItemKind.Keyword,insertText:`@shortcuts {
  "/$1": "$2"
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define custom command shortcuts",range:o},{label:"@tools",kind:r.languages.CompletionItemKind.Keyword,insertText:`@tools {
  $1: {
    description: "$2"
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Define available tools",range:o},{label:"@examples",kind:r.languages.CompletionItemKind.Keyword,insertText:`@examples {
  $1: {
    input: """
    $2
    """
    output: """
    $3
    """
  }
}`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Provide example interactions",range:o}]}}}}function nT(){const r=ie(c=>c.activeFile),e=ie(kE),t=ie(c=>c.updateFile),s=Z.useRef(null),o=c=>{eT(c),c.languages.registerCompletionItemProvider(mi,tT(c)),s.current=c},l=c=>{c.focus()};return C.jsx("div",{className:"h-full",children:C.jsx(qS,{height:"100%",language:mi,theme:"prs-dark",value:e,onChange:c=>{c!==void 0&&t(r,c)},beforeMount:o,onMount:l,options:{fontSize:14,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",renderLineHighlight:"line",tabSize:2,wordWrap:"on",automaticLayout:!0,padding:{top:12},suggestOnTriggerCharacters:!0,quickSuggestions:{other:!0,strings:!1,comments:!1}}})})}const rT=[{name:"github",label:"GitHub",icon:""},{name:"claude",label:"Claude",icon:""},{name:"cursor",label:"Cursor",icon:""},{name:"antigravity",label:"Antigravity",icon:""}];function iT(r){const e=new Map,t=r.map(o=>{const l=o.split("/");return l[l.length-1]??o}),s=new Map;for(const o of t)s.set(o,(s.get(o)??0)+1);for(const[o,l]of r.entries()){const c=t[o]??l;if((s.get(c)??0)>1){const f=l.split("/");if(f.length>=2){const h=f[f.length-2]??"";e.set(l,`${h}/${c}`)}else e.set(l,c)}else e.set(l,c)}return e}function sT(){const r=ie(g=>g.activeFormatter),e=ie(g=>g.setActiveFormatter),t=ie(g=>g.compileResult),s=ie(g=>g.isCompiling),o=ie(wE),l=ie(g=>xE(g,r)),[c,f]=Z.useState(0);Z.useEffect(()=>{f(0)},[r,l.length]),Z.useEffect(()=>{!o.includes(r)&&o.length>0&&e(o[0])},[r,o,e]);const h=Z.useMemo(()=>iT(l.map(g=>g.path)),[l]),m=l[c];return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg",children:rT.map(g=>{const y=o.includes(g.name),E=r===g.name;return C.jsxs("button",{onClick:()=>y&&e(g.name),disabled:!y,className:`px-4 py-2 text-sm flex items-center gap-2 ${y?E?"tab-active text-white":"tab-inactive text-gray-400":"opacity-30 cursor-not-allowed text-gray-500"}`,title:y?void 0:`${g.label} is disabled in config`,children:[C.jsx("span",{children:g.icon}),C.jsx("span",{children:g.label})]},g.name)})}),C.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-ps-surface",children:s?C.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-4 h-4 border-2 border-ps-primary border-t-transparent rounded-full animate-spin"}),C.jsx("span",{children:"Compiling..."})]})}):t&&!t.success?C.jsxs("div",{className:"p-4 overflow-auto",children:[C.jsx("div",{className:"text-red-400 font-medium mb-2",children:"Compilation Failed"}),C.jsx("ul",{className:"space-y-2",children:t.errors.map((g,y)=>C.jsx("li",{className:"text-sm",children:C.jsxs("div",{className:"text-red-300",children:[g.location?.file&&C.jsxs("span",{className:"text-gray-400",children:[g.location.file,":",g.location.line,":",g.location.column," "]}),C.jsxs("span",{className:"text-yellow-400",children:["[",g.code,"]"]})," ",g.message]})},y))})]}):l.length>0?C.jsxs(C.Fragment,{children:[l.length>1&&C.jsx("div",{className:"flex border-b border-ps-border bg-ps-bg overflow-x-auto",children:l.map((g,y)=>C.jsx("button",{onClick:()=>f(y),className:`px-3 py-1.5 text-xs font-mono whitespace-nowrap ${y===c?"bg-ps-surface text-white border-b-2 border-ps-primary":"text-gray-400 hover:text-gray-300 hover:bg-ps-surface/50"}`,title:g.path,children:h.get(g.path)||g.path},g.path))}),m&&C.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-xs text-gray-500 font-mono",children:m.path}),C.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.content)},className:"text-xs text-gray-400 hover:text-white px-2 py-1 rounded bg-ps-bg",children:"Copy"})]}),C.jsx("pre",{className:"text-sm font-mono whitespace-pre-wrap text-gray-300 bg-ps-bg p-4 rounded overflow-auto",children:m.content})]})]}):C.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No output available"})})]})}const Zu=[{id:"hello-world",name:"Hello World",description:"The simplest possible configuration",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "hello-world"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  """
}
`}]},{id:"minimal",name:"Minimal Setup",description:"Basic identity with multiline description",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "minimal-project"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful AI assistant.
  You provide clear and concise answers.
  You ask for clarification when needed.
  """
}
`}]},{id:"with-context",name:"With Context",description:"Adding project context and environment info",complexity:"beginner",files:[{path:"project.prs",content:`@meta {
  id: "context-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a coding assistant for web development.
  You write modern, accessible code.
  """
}

@context {
  """
  This is a React frontend project using TypeScript.
  We use Tailwind CSS for styling.
  The project follows component-driven development.
  """
}
`}]},{id:"with-env-vars",name:"Environment Variables",description:"Using ${VAR} and ${VAR:-default} for dynamic configuration",complexity:"intermediate",envVars:{PROJECT_NAME:"My Awesome Project",API_VERSION:"v2",TEAM_NAME:"Platform Team"},files:[{path:"project.prs",content:`@meta {
  id: "env-vars-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an assistant for \${PROJECT_NAME}.
  You help the \${TEAM_NAME} build great software.
  """
}

@context {
  """
  Project: \${PROJECT_NAME}
  API Version: \${API_VERSION}
  Team: \${TEAM_NAME}
  Environment: \${ENVIRONMENT:-development}
  Debug Mode: \${DEBUG:-false}
  """

  # Object properties also support env vars
  project: "\${PROJECT_NAME}"
  apiVersion: "\${API_VERSION}"
  logLevel: "\${LOG_LEVEL:-info}"
}

@standards {
  # Env vars work in nested structures too
  api: {
    version: "\${API_VERSION}"
    baseUrl: "\${API_BASE_URL:-https://api.example.com}"
  }
}

@restrictions {
  - "Follow \${TEAM_NAME} coding guidelines"
  - "Use \${API_VERSION} API endpoints"
  - "Log level must be \${LOG_LEVEL:-info} or higher"
}
`}]},{id:"with-standards",name:"With Standards",description:"Configuration with coding standards and restrictions",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "coding-assistant"
  syntax: "1.0.0"
  tags: [development, typescript]
}

@identity {
  """
  You are an expert software developer.
  You write clean, maintainable, and well-tested code.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  testing: "Vitest"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
  documentation: ["JSDoc comments", "README updates"]
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor"]
  }
}

@restrictions {
  - "Never write untested code"
  - "Always handle errors properly"
  - "Don't use 'any' type in TypeScript"
  - "Don't commit secrets or credentials"
}
`}]},{id:"with-inheritance",name:"With Inheritance",description:"Using @inherit to extend shared base configs",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "frontend-project"
  syntax: "1.0.0"
}

# Inherit from promptscript-registry (github.com/mrwogu/promptscript-registry)
@inherit @core/base
@use @core/quality
@use @core/security

@context {
  """
  This is a React frontend project.
  We use TypeScript and Tailwind CSS.
  State management with Zustand.
  """
}

@standards {
  frameworks: ["React 18", "TypeScript 5", "Tailwind CSS"]
  testing: ["Vitest", "Playwright"]
}

@restrictions {
  - "Use functional components with hooks"
  - "No class components"
  - "Keep components under 200 lines"
}
`}]},{id:"parameterized-templates",name:"Parameterized Templates",description:"Reusable templates with {{variable}} interpolation",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "my-react-app"
  syntax: "1.0.0"
}

# Inherit from template with parameters
@inherit ./react-template(projectName: "Checkout App", port: 8080, strict: true)

@identity {
  """
  You specialize in e-commerce checkout flows.
  You understand payment integrations and cart management.
  """
}

@context {
  """
  E-commerce checkout application with Stripe integration.
  """
}
`},{path:"react-template.prs",content:`@meta {
  id: "react-template"
  syntax: "1.0.0"
  params: {
    # Required: Name of the project
    projectName: string

    # Optional: Development server port (default: 3000)
    port: number = 3000

    # Optional: Enable strict mode (default: true)
    strict: boolean = true

    # Optional: Test framework choice
    testFramework: enum("vitest", "jest") = "vitest"
  }
}

@identity {
  """
  You are a React developer working on {{projectName}}.
  You follow best practices and write clean code.
  """
}

@context {
  project: {{projectName}}
  devServer: "http://localhost:{{port}}"
  strictMode: {{strict}}
  testing: {{testFramework}}
}

@standards {
  code: {
    language: "TypeScript"
    framework: "React 18"
    testing: "{{testFramework}}"
  }
}

@restrictions {
  - "Use functional components only"
  - "Test coverage must be above 80%"
}
`}]},{id:"multi-file",name:"Multi-File Project",description:"Local inheritance with shared base configuration",complexity:"intermediate",files:[{path:"project.prs",content:`@meta {
  id: "team-project"
  syntax: "1.0.0"
}

# Inherit from local base file
@inherit ./base

@context {
  languages: ["TypeScript", "React"]
  runtime: "Node.js 20+"
}

@standards {
  code: {
    languages: ["TypeScript"]
    frameworks: ["React 18", "Vite"]
    testing: ["Vitest", "Testing Library"]
  }
}

@restrictions {
  - "Use Zustand for state management"
  - "Keep bundle size under 200KB"
}
`},{path:"base.prs",content:`@meta {
  id: "team-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are a helpful team assistant.
  You follow our established conventions.
  You prioritize code quality and maintainability.
  """
}

@standards {
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test"]
  }
  documentation: ["README", "JSDoc", "CHANGELOG"]
}

@restrictions {
  - "Don't commit without tests"
  - "Don't push directly to main"
  - "Always request code review"
}
`}]},{id:"with-skills",name:"With Skills & Shortcuts",description:"Custom skills and shortcuts for automation",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "skills-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development assistant with custom skills.
  You help developers write better code through reviews and testing.
  """
}

@context {
  languages: ["TypeScript", "JavaScript"]
  runtime: "Node.js 20+"
  frameworks: ["React", "Vite"]
}

@skills {
  review: {
    description: "Review code for bugs and improvements"
    content: """
    When reviewing code:
    1. Check for potential bugs and edge cases
    2. Suggest performance improvements
    3. Verify error handling is complete
    4. Check for security vulnerabilities
    """
  }
  test: {
    description: "Run tests and analyze coverage"
    content: """
    When running tests:
    1. Execute the test suite with coverage
    2. Report failures clearly with context
    3. Suggest missing test cases
    4. Verify edge cases are covered
    """
  }
  refactor: {
    description: "Refactor code for better maintainability"
    content: """
    When refactoring:
    1. Identify code smells and duplication
    2. Apply SOLID principles
    3. Improve naming and readability
    4. Ensure tests still pass
    """
  }
}

@shortcuts {
  "/review": "Run the review skill on current file"
  "/test": "Run the test skill"
  "/refactor": "Refactor the selected code"
  "/docs": "Generate documentation"
}

@restrictions {
  - "Always explain your reasoning"
  - "Ask for clarification when unsure"
  - "Never skip writing tests"
}
`}]},{id:"with-guards",name:"With Guards",description:"File-pattern guards for context-specific rules",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "guards-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are an expert full-stack developer.
  You understand different contexts require different rules.
  """
}

@context {
  languages: ["TypeScript"]
  runtime: "Node.js 20+"
}

@guards {
  # Apply TypeScript rules to all TS files
  globs: ["**/*.ts", "**/*.tsx"]

  # Testing-specific rules
  testing: {
    applyTo: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
    description: "Testing rules"
    content: """
    - Use describe/it blocks for organization
    - Follow AAA pattern (Arrange, Act, Assert)
    - Mock external dependencies
    - Test edge cases and error conditions
    """
  }

  # Component-specific rules
  components: {
    applyTo: ["**/components/**/*.tsx"]
    description: "React component rules"
    content: """
    - Use functional components with hooks
    - Keep components focused and small
    - Extract logic into custom hooks
    - Use TypeScript for props interfaces
    """
  }
}

@standards {
  code: {
    languages: ["TypeScript"]
    testing: ["Vitest"]
  }
}
`}]},{id:"with-agents",name:"With Agents",description:"Custom AI agents with specific roles",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "agents-example"
  syntax: "1.0.0"
}

@identity {
  """
  You are a development team coordinator.
  You can delegate tasks to specialized agents.
  """
}

@agents {
  coder: {
    description: "Expert code writer"
    model: "sonnet"
    tools: ["Read", "Edit", "Write", "Bash"]
    content: """
    You are an expert code writer.
    You write clean, efficient, and well-documented code.
    You follow established patterns in the codebase.
    """
  }
  reviewer: {
    description: "Code review specialist"
    model: "sonnet"
    tools: ["Read", "Grep", "Glob"]
    content: """
    You are a code review specialist.
    You identify bugs, security issues, and improvements.
    You provide constructive feedback.
    """
  }
  tester: {
    description: "Test writing specialist"
    model: "haiku"
    tools: ["Read", "Write", "Bash"]
    content: """
    You are a test writing specialist.
    You write comprehensive unit and integration tests.
    You ensure good coverage of edge cases.
    """
  }
}

@skills {
  implement: {
    description: "Implement a feature using the coder agent"
    content: "Delegate implementation to the coder agent"
  }
  review: {
    description: "Review code using the reviewer agent"
    content: "Delegate review to the reviewer agent"
  }
}

@shortcuts {
  "/implement": "Start implementing a feature"
  "/review": "Review recent changes"
  "/test": "Write tests for current code"
}
`}]},{id:"enterprise",name:"Enterprise Setup",description:"Full enterprise configuration with all features",complexity:"advanced",files:[{path:"project.prs",content:`@meta {
  id: "enterprise-project"
  syntax: "1.0.0"
  tags: [enterprise, typescript, react]
}

# Inherit from local file + registry (github.com/mrwogu/promptscript-registry)
@inherit ./org-base
@use @core/security

@context {
  """
  Enterprise React application with strict security requirements.
  Follows organizational coding standards and compliance rules.
  """

  languages: ["TypeScript"]
  runtime: "Node.js 20 LTS"
  frameworks: ["React 18", "Next.js 14"]
  infrastructure: ["AWS", "Docker", "Kubernetes"]
}

@skills {
  "security-review": {
    description: "Review code for security vulnerabilities"
    content: """
    Perform security review:
    1. Check for OWASP Top 10 vulnerabilities
    2. Verify input validation and sanitization
    3. Check authentication and authorization
    4. Review data exposure and logging
    5. Verify secure communication
    """
  }
  deploy: {
    description: "Prepare deployment checklist"
    content: """
    Deployment preparation:
    1. Run full test suite
    2. Check for security vulnerabilities
    3. Verify environment variables
    4. Update changelog
    5. Create release notes
    """
  }
}

@guards {
  api: {
    applyTo: ["**/api/**", "**/routes/**"]
    description: "API security rules"
    content: """
    - Validate all input parameters
    - Use parameterized queries
    - Implement rate limiting
    - Log security events
    """
  }
  auth: {
    applyTo: ["**/auth/**", "**/middleware/**"]
    description: "Authentication rules"
    content: """
    - Never log credentials
    - Use secure session management
    - Implement proper CORS
    - Use HTTPS only
    """
  }
}

@shortcuts {
  "/security": "Run security review"
  "/deploy": "Prepare deployment"
  "/audit": "Run compliance audit"
}

@restrictions {
  - "All API endpoints must have authentication"
  - "No secrets in code - use environment variables"
  - "All user input must be validated"
  - "PII must be encrypted at rest"
  - "Changes require security team approval"
}
`},{path:"org-base.prs",content:`@meta {
  id: "org-base"
  syntax: "1.0.0"
}

@identity {
  """
  You are an enterprise development assistant.
  You follow strict organizational standards.
  Security and compliance are top priorities.
  """
}

@standards {
  code: {
    languages: ["TypeScript"]
    strictMode: true
    exports: "named only"
  }
  git: {
    format: "Conventional Commits"
    types: ["feat", "fix", "docs", "chore", "refactor", "test", "security"]
    requireIssueReference: true
  }
  documentation: {
    required: ["README", "API docs", "CHANGELOG", "SECURITY.md"]
  }
  testing: {
    minimumCoverage: 80
    requiredTypes: ["unit", "integration", "e2e"]
  }
}

@restrictions {
  - "No direct database queries - use ORM"
  - "All functions must have return type annotations"
  - "No console.log in production code"
  - "Dependencies must be approved"
  - "No force push to protected branches"
}
`}]}],oT={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-purple-500/20 text-purple-400"},aT={beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"};function lT(){const r=ie(h=>h.setFiles),e=ie(h=>h.setShowExamples),t=ie(h=>h.setEnvVars),s=h=>{r(h.files),t(h.envVars??{}),e(!1)},o=Zu.filter(h=>h.complexity==="beginner"),l=Zu.filter(h=>h.complexity==="intermediate"),c=Zu.filter(h=>h.complexity==="advanced"),f=h=>C.jsxs("button",{onClick:()=>s(h),className:"text-left p-4 bg-ps-bg rounded-lg hover:bg-ps-border transition-colors",children:[C.jsxs("div",{className:"flex items-start justify-between gap-2",children:[C.jsx("h3",{className:"font-medium text-white",children:h.name}),C.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${oT[h.complexity]}`,children:aT[h.complexity]})]}),C.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h.description}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[C.jsxs("span",{className:"text-xs text-gray-500",children:[h.files.length," file",h.files.length!==1?"s":""]}),h.files.some(m=>m.content.includes("@inherit"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-ps-primary/20 text-ps-primary rounded",children:"inheritance"}),h.files.some(m=>m.content.includes("@use"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded",children:"imports"}),h.files.some(m=>m.content.includes("@skills"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-500/20 text-orange-400 rounded",children:"skills"}),h.files.some(m=>m.content.includes("@guards"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded",children:"guards"}),h.files.some(m=>m.content.includes("@agents"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded",children:"agents"}),h.files.some(m=>m.content.includes("params:")&&m.content.includes("{{"))&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded",children:"templates"}),h.envVars&&Object.keys(h.envVars).length>0&&C.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded",children:"env vars"})]})]},h.id);return C.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-ps-surface rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold",children:"Example Gallery"}),C.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white",children:""})]}),C.jsxs("div",{className:"p-4 overflow-y-auto max-h-[70vh] space-y-6",children:[C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-green-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Getting Started"]}),C.jsx("div",{className:"grid gap-3",children:o.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Intermediate"]}),C.jsx("div",{className:"grid gap-3",children:l.map(f)})]}),C.jsxs("section",{children:[C.jsxs("h3",{className:"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Advanced"]}),C.jsx("div",{className:"grid gap-3",children:c.map(f)})]})]}),C.jsx("div",{className:"p-4 border-t border-ps-border text-center text-sm text-gray-500",children:"Click an example to load it into the editor"})]})})}const uT={github:{label:"GitHub Copilot",versions:["simple","multifile","full"],supportsXml:!0},claude:{label:"Claude Code",versions:["simple","multifile","full"],supportsXml:!0},cursor:{label:"Cursor",versions:["standard","legacy"],supportsXml:!1},antigravity:{label:"Antigravity",versions:["simple","frontmatter"],supportsXml:!0}},cT=[{value:"markdown",label:"Markdown"},{value:"xml",label:"XML"}],fT=["always","never","preserve"],dT=[2,4];function hT(){const r=ie(f=>f.config),e=ie(f=>f.setTargetEnabled),t=ie(f=>f.setTargetVersion),s=ie(f=>f.setTargetConvention),o=ie(f=>f.setFormatting),l=ie(f=>f.showConfig),c=ie(f=>f.setShowConfig);return l?C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configuration"}),C.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-6",children:[C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Targets"}),C.jsx("div",{className:"space-y-3",children:Object.entries(uT).map(([f,h])=>{const m=r.targets[f];return C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("label",{className:"flex items-center gap-2 min-w-[140px]",children:[C.jsx("input",{type:"checkbox",checked:m.enabled,onChange:g=>e(f,g.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0"}),C.jsx("span",{className:"text-sm text-gray-200",children:h.label})]}),C.jsx("select",{value:m.version??h.versions[0],onChange:g=>t(f,g.target.value),disabled:!m.enabled,className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:h.versions.map(g=>C.jsx("option",{value:g,children:g},g))}),C.jsx("select",{value:m.convention??"markdown",onChange:g=>s(f,g.target.value==="markdown"?void 0:g.target.value),disabled:!m.enabled||!h.supportsXml,title:h.supportsXml?void 0:`${h.label} only supports markdown`,className:"w-24 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-indigo-500",children:cT.map(g=>C.jsx("option",{value:g.value,disabled:g.value==="xml"&&!h.supportsXml,children:g.label},g.value))})]},f)})})]}),C.jsxs("section",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Formatting"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Tab Width"}),C.jsx("div",{className:"flex gap-2",children:dT.map(f=>C.jsx("button",{onClick:()=>o({tabWidth:f}),className:`px-3 py-1 text-sm rounded ${r.formatting.tabWidth===f?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Prose Wrap"}),C.jsx("select",{value:r.formatting.proseWrap,onChange:f=>o({proseWrap:f.target.value}),className:"flex-1 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500",children:fT.map(f=>C.jsx("option",{value:f,children:f},f))})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("label",{className:"text-sm text-gray-200 min-w-[100px]",children:"Print Width"}),C.jsx("input",{type:"number",min:40,max:200,value:r.formatting.printWidth,onChange:f=>o({printWidth:parseInt(f.target.value,10)||80}),className:"w-20 px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-200 focus:outline-none focus:border-indigo-500"})]})]})]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})}):null}const pT=/^[A-Za-z_][A-Za-z0-9_]*$/;function mT(){const r=ie(w=>w.config),e=ie(w=>w.setEnvVar),t=ie(w=>w.deleteEnvVar),s=ie(w=>w.showEnvVars),o=ie(w=>w.setShowEnvVars),[l,c]=Z.useState(""),[f,h]=Z.useState(""),[m,g]=Z.useState(null);if(!s)return null;const y=Object.entries(r.envVars),E=()=>{const w=l.trim(),R=f.trim();if(!w){g("Variable name is required");return}if(!pT.test(w)){g("Invalid name: must start with letter or underscore");return}if(r.envVars[w]!==void 0){g("Variable already exists");return}e(w,R),c(""),h(""),g(null)},T=w=>{w.key==="Enter"&&E()};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:C.jsxs("div",{className:"bg-ps-surface border border-ps-border rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ps-border",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Environment Variables"}),C.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white p-1","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"p-4 space-y-4",children:[y.length>0&&C.jsx("div",{className:"space-y-2",children:y.map(([w,R])=>C.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded px-3 py-2",children:[C.jsx("span",{className:"font-mono text-sm text-blue-400 min-w-[120px]",children:w}),C.jsx("span",{className:"text-gray-400",children:"="}),C.jsx("span",{className:"font-mono text-sm text-gray-200 flex-1 truncate",children:R}),C.jsx("button",{onClick:()=>t(w),className:"text-gray-500 hover:text-red-400 p-1",title:"Delete variable",children:C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))}),y.length===0&&C.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No environment variables defined"}),C.jsxs("div",{className:"border-t border-ps-border pt-4",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",value:l,onChange:w=>{c(w.target.value),g(null)},onKeyDown:T,placeholder:"NAME",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("input",{type:"text",value:f,onChange:w=>h(w.target.value),onKeyDown:T,placeholder:"value",className:"flex-1 px-3 py-2 text-sm font-mono bg-gray-700 border border-gray-600 rounded text-gray-200 placeholder-gray-500 focus:outline-none focus:border-indigo-500"}),C.jsx("button",{onClick:E,className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Add"})]}),m&&C.jsx("p",{className:"text-red-400 text-xs mt-2",children:m})]}),C.jsxs("p",{className:"text-gray-500 text-xs",children:["These are simulated variables for testing. Use"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR}"]})," or"," ",C.jsxs("code",{className:"text-gray-400",children:["$","{VAR:-default}"]})," in your PRS files.",C.jsx("br",{}),C.jsx("strong",{children:"Note:"})," Do not use real secrets."]})]}),C.jsx("div",{className:"flex justify-end px-4 py-3 border-t border-ps-border",children:C.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Done"})})]})})}class Fc{files;constructor(e){if(this.files=new Map,e)if(e instanceof Map)for(const[t,s]of e)this.files.set(this.normalizePath(t),s);else for(const[t,s]of Object.entries(e))this.files.set(this.normalizePath(t),s)}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1)),t}exists(e){return this.files.has(this.normalizePath(e))}read(e){const t=this.normalizePath(e),s=this.files.get(t);if(s===void 0)throw new Error(`File not found: ${e}`);return s}write(e,t){this.files.set(this.normalizePath(e),t)}delete(e){return this.files.delete(this.normalizePath(e))}list(){return Array.from(this.files.keys())}glob(e){const t=this.normalizePath(e),s=this.patternToRegex(t);return Array.from(this.files.keys()).filter(o=>s.test(o))}patternToRegex(e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");return t=t.replace(/\*\*/g,"\0DOUBLESTAR\0"),t=t.replace(/\*/g,"[^/]*"),t=t.replace(/\0DOUBLESTAR\0/g,".*"),t=t.replace(/\?/g,"[^/]"),new RegExp(`^${t}$`)}clear(){this.files.clear()}get size(){return this.files.size}toMap(){return new Map(this.files)}toObject(){const e={};for(const[t,s]of this.files)e[t]=s;return e}clone(){return new Fc(this.files)}merge(e){for(const[t,s]of e.files)this.files.set(t,s)}}var hg=typeof global=="object"&&global&&global.Object===Object&&global,gT=typeof self=="object"&&self&&self.Object===Object&&self,En=hg||gT||Function("return this")(),Kt=En.Symbol,pg=Object.prototype,yT=pg.hasOwnProperty,vT=pg.toString,cs=Kt?Kt.toStringTag:void 0;function ET(r){var e=yT.call(r,cs),t=r[cs];try{r[cs]=void 0;var s=!0}catch{}var o=vT.call(r);return s&&(e?r[cs]=t:delete r[cs]),o}var ST=Object.prototype,TT=ST.toString;function kT(r){return TT.call(r)}var AT="[object Null]",xT="[object Undefined]",Cp=Kt?Kt.toStringTag:void 0;function cr(r){return r==null?r===void 0?xT:AT:Cp&&Cp in Object(r)?ET(r):kT(r)}function an(r){return r!=null&&typeof r=="object"}var wT="[object Symbol]";function Ia(r){return typeof r=="symbol"||an(r)&&cr(r)==wT}function Oa(r,e){for(var t=-1,s=r==null?0:r.length,o=Array(s);++t<s;)o[t]=e(r[t],t,r);return o}var Te=Array.isArray,Rp=Kt?Kt.prototype:void 0,Np=Rp?Rp.toString:void 0;function mg(r){if(typeof r=="string")return r;if(Te(r))return Oa(r,mg)+"";if(Ia(r))return Np?Np.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var CT=/\s/;function RT(r){for(var e=r.length;e--&&CT.test(r.charAt(e)););return e}var NT=/^\s+/;function IT(r){return r&&r.slice(0,RT(r)+1).replace(NT,"")}function Yt(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Ip=NaN,OT=/^[-+]0x[0-9a-f]+$/i,_T=/^0b[01]+$/i,PT=/^0o[0-7]+$/i,LT=parseInt;function bT(r){if(typeof r=="number")return r;if(Ia(r))return Ip;if(Yt(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Yt(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=IT(r);var t=_T.test(r);return t||PT.test(r)?LT(r.slice(2),t?2:8):OT.test(r)?Ip:+r}var Op=1/0,MT=17976931348623157e292;function jT(r){if(!r)return r===0?r:0;if(r=bT(r),r===Op||r===-Op){var e=r<0?-1:1;return e*MT}return r===r?r:0}function _a(r){var e=jT(r),t=e%1;return e===e?t?e-t:e:0}function yi(r){return r}var FT="[object AsyncFunction]",$T="[object Function]",UT="[object GeneratorFunction]",DT="[object Proxy]";function jn(r){if(!Yt(r))return!1;var e=cr(r);return e==$T||e==UT||e==FT||e==DT}var Ju=En["__core-js_shared__"],_p=(function(){var r=/[^.]+$/.exec(Ju&&Ju.keys&&Ju.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function BT(r){return!!_p&&_p in r}var zT=Function.prototype,VT=zT.toString;function br(r){if(r!=null){try{return VT.call(r)}catch{}try{return r+""}catch{}}return""}var WT=/[\\^$.*+?()[\]{}|]/g,GT=/^\[object .+?Constructor\]$/,HT=Function.prototype,KT=Object.prototype,YT=HT.toString,XT=KT.hasOwnProperty,qT=RegExp("^"+YT.call(XT).replace(WT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QT(r){if(!Yt(r)||BT(r))return!1;var e=jn(r)?qT:GT;return e.test(br(r))}function ZT(r,e){return r?.[e]}function Mr(r,e){var t=ZT(r,e);return QT(t)?t:void 0}var cc=Mr(En,"WeakMap"),Pp=Object.create,JT=(function(){function r(){}return function(e){if(!Yt(e))return{};if(Pp)return Pp(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})();function ek(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Xe(){}function tk(r,e){var t=-1,s=r.length;for(e||(e=Array(s));++t<s;)e[t]=r[t];return e}var nk=800,rk=16,ik=Date.now;function sk(r){var e=0,t=0;return function(){var s=ik(),o=rk-(s-t);if(t=s,o>0){if(++e>=nk)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function ok(r){return function(){return r}}var ga=(function(){try{var r=Mr(Object,"defineProperty");return r({},"",{}),r}catch{}})(),ak=ga?function(r,e){return ga(r,"toString",{configurable:!0,enumerable:!1,value:ok(e),writable:!0})}:yi,lk=sk(ak);function gg(r,e){for(var t=-1,s=r==null?0:r.length;++t<s&&e(r[t],t,r)!==!1;);return r}function yg(r,e,t,s){for(var o=r.length,l=t+-1;++l<o;)if(e(r[l],l,r))return l;return-1}function uk(r){return r!==r}function ck(r,e,t){for(var s=t-1,o=r.length;++s<o;)if(r[s]===e)return s;return-1}function $c(r,e,t){return e===e?ck(r,e,t):yg(r,uk,t)}function vg(r,e){var t=r==null?0:r.length;return!!t&&$c(r,e,0)>-1}var fk=9007199254740991,dk=/^(?:0|[1-9]\d*)$/;function Pa(r,e){var t=typeof r;return e=e??fk,!!e&&(t=="number"||t!="symbol"&&dk.test(r))&&r>-1&&r%1==0&&r<e}function Uc(r,e,t){e=="__proto__"&&ga?ga(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function Os(r,e){return r===e||r!==r&&e!==e}var hk=Object.prototype,pk=hk.hasOwnProperty;function La(r,e,t){var s=r[e];(!(pk.call(r,e)&&Os(s,t))||t===void 0&&!(e in r))&&Uc(r,e,t)}function Dc(r,e,t,s){var o=!t;t||(t={});for(var l=-1,c=e.length;++l<c;){var f=e[l],h=void 0;h===void 0&&(h=r[f]),o?Uc(t,f,h):La(t,f,h)}return t}var Lp=Math.max;function mk(r,e,t){return e=Lp(e===void 0?r.length-1:e,0),function(){for(var s=arguments,o=-1,l=Lp(s.length-e,0),c=Array(l);++o<l;)c[o]=s[e+o];o=-1;for(var f=Array(e+1);++o<e;)f[o]=s[o];return f[e]=t(c),ek(r,this,f)}}function Bc(r,e){return lk(mk(r,e,yi),r+"")}var gk=9007199254740991;function zc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=gk}function Sn(r){return r!=null&&zc(r.length)&&!jn(r)}function Eg(r,e,t){if(!Yt(t))return!1;var s=typeof e;return(s=="number"?Sn(t)&&Pa(e,t.length):s=="string"&&e in t)?Os(t[e],r):!1}function yk(r){return Bc(function(e,t){var s=-1,o=t.length,l=o>1?t[o-1]:void 0,c=o>2?t[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,c&&Eg(t[0],t[1],c)&&(l=o<3?void 0:l,o=1),e=Object(e);++s<o;){var f=t[s];f&&r(e,f,s,l)}return e})}var vk=Object.prototype;function _s(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||vk;return r===t}function Ek(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}var Sk="[object Arguments]";function bp(r){return an(r)&&cr(r)==Sk}var Sg=Object.prototype,Tk=Sg.hasOwnProperty,kk=Sg.propertyIsEnumerable,ba=bp((function(){return arguments})())?bp:function(r){return an(r)&&Tk.call(r,"callee")&&!kk.call(r,"callee")};function Ak(){return!1}var Tg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Mp=Tg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,xk=Mp&&Mp.exports===Tg,jp=xk?En.Buffer:void 0,wk=jp?jp.isBuffer:void 0,xs=wk||Ak,Ck="[object Arguments]",Rk="[object Array]",Nk="[object Boolean]",Ik="[object Date]",Ok="[object Error]",_k="[object Function]",Pk="[object Map]",Lk="[object Number]",bk="[object Object]",Mk="[object RegExp]",jk="[object Set]",Fk="[object String]",$k="[object WeakMap]",Uk="[object ArrayBuffer]",Dk="[object DataView]",Bk="[object Float32Array]",zk="[object Float64Array]",Vk="[object Int8Array]",Wk="[object Int16Array]",Gk="[object Int32Array]",Hk="[object Uint8Array]",Kk="[object Uint8ClampedArray]",Yk="[object Uint16Array]",Xk="[object Uint32Array]",_e={};_e[Bk]=_e[zk]=_e[Vk]=_e[Wk]=_e[Gk]=_e[Hk]=_e[Kk]=_e[Yk]=_e[Xk]=!0;_e[Ck]=_e[Rk]=_e[Uk]=_e[Nk]=_e[Dk]=_e[Ik]=_e[Ok]=_e[_k]=_e[Pk]=_e[Lk]=_e[bk]=_e[Mk]=_e[jk]=_e[Fk]=_e[$k]=!1;function qk(r){return an(r)&&zc(r.length)&&!!_e[cr(r)]}function Ma(r){return function(e){return r(e)}}var kg=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Ss=kg&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Qk=Ss&&Ss.exports===kg,ec=Qk&&hg.process,lr=(function(){try{var r=Ss&&Ss.require&&Ss.require("util").types;return r||ec&&ec.binding&&ec.binding("util")}catch{}})(),Fp=lr&&lr.isTypedArray,Vc=Fp?Ma(Fp):qk,Zk=Object.prototype,Jk=Zk.hasOwnProperty;function Ag(r,e){var t=Te(r),s=!t&&ba(r),o=!t&&!s&&xs(r),l=!t&&!s&&!o&&Vc(r),c=t||s||o||l,f=c?Ek(r.length,String):[],h=f.length;for(var m in r)(e||Jk.call(r,m))&&!(c&&(m=="length"||o&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Pa(m,h)))&&f.push(m);return f}function xg(r,e){return function(t){return r(e(t))}}var eA=xg(Object.keys,Object),tA=Object.prototype,nA=tA.hasOwnProperty;function wg(r){if(!_s(r))return eA(r);var e=[];for(var t in Object(r))nA.call(r,t)&&t!="constructor"&&e.push(t);return e}function Xt(r){return Sn(r)?Ag(r):wg(r)}var rA=Object.prototype,iA=rA.hasOwnProperty,Lt=yk(function(r,e){if(_s(e)||Sn(e)){Dc(e,Xt(e),r);return}for(var t in e)iA.call(e,t)&&La(r,t,e[t])});function sA(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var oA=Object.prototype,aA=oA.hasOwnProperty;function lA(r){if(!Yt(r))return sA(r);var e=_s(r),t=[];for(var s in r)s=="constructor"&&(e||!aA.call(r,s))||t.push(s);return t}function Cg(r){return Sn(r)?Ag(r,!0):lA(r)}var uA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cA=/^\w*$/;function Wc(r,e){if(Te(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Ia(r)?!0:cA.test(r)||!uA.test(r)||e!=null&&r in Object(e)}var ws=Mr(Object,"create");function fA(){this.__data__=ws?ws(null):{},this.size=0}function dA(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var hA="__lodash_hash_undefined__",pA=Object.prototype,mA=pA.hasOwnProperty;function gA(r){var e=this.__data__;if(ws){var t=e[r];return t===hA?void 0:t}return mA.call(e,r)?e[r]:void 0}var yA=Object.prototype,vA=yA.hasOwnProperty;function EA(r){var e=this.__data__;return ws?e[r]!==void 0:vA.call(e,r)}var SA="__lodash_hash_undefined__";function TA(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=ws&&e===void 0?SA:e,this}function Or(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Or.prototype.clear=fA;Or.prototype.delete=dA;Or.prototype.get=gA;Or.prototype.has=EA;Or.prototype.set=TA;function kA(){this.__data__=[],this.size=0}function ja(r,e){for(var t=r.length;t--;)if(Os(r[t][0],e))return t;return-1}var AA=Array.prototype,xA=AA.splice;function wA(r){var e=this.__data__,t=ja(e,r);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():xA.call(e,t,1),--this.size,!0}function CA(r){var e=this.__data__,t=ja(e,r);return t<0?void 0:e[t][1]}function RA(r){return ja(this.__data__,r)>-1}function NA(r,e){var t=this.__data__,s=ja(t,r);return s<0?(++this.size,t.push([r,e])):t[s][1]=e,this}function Fn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}Fn.prototype.clear=kA;Fn.prototype.delete=wA;Fn.prototype.get=CA;Fn.prototype.has=RA;Fn.prototype.set=NA;var Cs=Mr(En,"Map");function IA(){this.size=0,this.__data__={hash:new Or,map:new(Cs||Fn),string:new Or}}function OA(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Fa(r,e){var t=r.__data__;return OA(e)?t[typeof e=="string"?"string":"hash"]:t.map}function _A(r){var e=Fa(this,r).delete(r);return this.size-=e?1:0,e}function PA(r){return Fa(this,r).get(r)}function LA(r){return Fa(this,r).has(r)}function bA(r,e){var t=Fa(this,r),s=t.size;return t.set(r,e),this.size+=t.size==s?0:1,this}function $n(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var s=r[e];this.set(s[0],s[1])}}$n.prototype.clear=IA;$n.prototype.delete=_A;$n.prototype.get=PA;$n.prototype.has=LA;$n.prototype.set=bA;var MA="Expected a function";function Gc(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(MA);var t=function(){var s=arguments,o=e?e.apply(this,s):s[0],l=t.cache;if(l.has(o))return l.get(o);var c=r.apply(this,s);return t.cache=l.set(o,c)||l,c};return t.cache=new(Gc.Cache||$n),t}Gc.Cache=$n;var jA=500;function FA(r){var e=Gc(r,function(s){return t.size===jA&&t.clear(),s}),t=e.cache;return e}var $A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,UA=/\\(\\)?/g,DA=FA(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace($A,function(t,s,o,l){e.push(o?l.replace(UA,"$1"):s||t)}),e});function BA(r){return r==null?"":mg(r)}function $a(r,e){return Te(r)?r:Wc(r,e)?[r]:DA(BA(r))}function Ps(r){if(typeof r=="string"||Ia(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Hc(r,e){e=$a(e,r);for(var t=0,s=e.length;r!=null&&t<s;)r=r[Ps(e[t++])];return t&&t==s?r:void 0}function zA(r,e,t){var s=r==null?void 0:Hc(r,e);return s===void 0?t:s}function Kc(r,e){for(var t=-1,s=e.length,o=r.length;++t<s;)r[o+t]=e[t];return r}var $p=Kt?Kt.isConcatSpreadable:void 0;function VA(r){return Te(r)||ba(r)||!!($p&&r&&r[$p])}function Yc(r,e,t,s,o){var l=-1,c=r.length;for(t||(t=VA),o||(o=[]);++l<c;){var f=r[l];t(f)?Kc(o,f):s||(o[o.length]=f)}return o}function sn(r){var e=r==null?0:r.length;return e?Yc(r):[]}var Rg=xg(Object.getPrototypeOf,Object);function Ng(r,e,t){var s=-1,o=r.length;e<0&&(e=-e>o?0:o+e),t=t>o?o:t,t<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var l=Array(o);++s<o;)l[s]=r[s+e];return l}function WA(r,e,t,s){var o=-1,l=r==null?0:r.length;for(s&&l&&(t=r[++o]);++o<l;)t=e(t,r[o],o,r);return t}function GA(){this.__data__=new Fn,this.size=0}function HA(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function KA(r){return this.__data__.get(r)}function YA(r){return this.__data__.has(r)}var XA=200;function qA(r,e){var t=this.__data__;if(t instanceof Fn){var s=t.__data__;if(!Cs||s.length<XA-1)return s.push([r,e]),this.size=++t.size,this;t=this.__data__=new $n(s)}return t.set(r,e),this.size=t.size,this}function vn(r){var e=this.__data__=new Fn(r);this.size=e.size}vn.prototype.clear=GA;vn.prototype.delete=HA;vn.prototype.get=KA;vn.prototype.has=YA;vn.prototype.set=qA;function QA(r,e){return r&&Dc(e,Xt(e),r)}var Ig=typeof _t=="object"&&_t&&!_t.nodeType&&_t,Up=Ig&&typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,ZA=Up&&Up.exports===Ig,Dp=ZA?En.Buffer:void 0,Bp=Dp?Dp.allocUnsafe:void 0;function JA(r,e){var t=r.length,s=Bp?Bp(t):new r.constructor(t);return r.copy(s),s}function Xc(r,e){for(var t=-1,s=r==null?0:r.length,o=0,l=[];++t<s;){var c=r[t];e(c,t,r)&&(l[o++]=c)}return l}function Og(){return[]}var ex=Object.prototype,tx=ex.propertyIsEnumerable,zp=Object.getOwnPropertySymbols,qc=zp?function(r){return r==null?[]:(r=Object(r),Xc(zp(r),function(e){return tx.call(r,e)}))}:Og;function nx(r,e){return Dc(r,qc(r),e)}var rx=Object.getOwnPropertySymbols,ix=rx?function(r){for(var e=[];r;)Kc(e,qc(r)),r=Rg(r);return e}:Og;function _g(r,e,t){var s=e(r);return Te(r)?s:Kc(s,t(r))}function fc(r){return _g(r,Xt,qc)}function sx(r){return _g(r,Cg,ix)}var dc=Mr(En,"DataView"),hc=Mr(En,"Promise"),gi=Mr(En,"Set"),Vp="[object Map]",ox="[object Object]",Wp="[object Promise]",Gp="[object Set]",Hp="[object WeakMap]",Kp="[object DataView]",ax=br(dc),lx=br(Cs),ux=br(hc),cx=br(gi),fx=br(cc),Gt=cr;(dc&&Gt(new dc(new ArrayBuffer(1)))!=Kp||Cs&&Gt(new Cs)!=Vp||hc&&Gt(hc.resolve())!=Wp||gi&&Gt(new gi)!=Gp||cc&&Gt(new cc)!=Hp)&&(Gt=function(r){var e=cr(r),t=e==ox?r.constructor:void 0,s=t?br(t):"";if(s)switch(s){case ax:return Kp;case lx:return Vp;case ux:return Wp;case cx:return Gp;case fx:return Hp}return e});var dx=Object.prototype,hx=dx.hasOwnProperty;function px(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&hx.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var ya=En.Uint8Array;function mx(r){var e=new r.constructor(r.byteLength);return new ya(e).set(new ya(r)),e}function gx(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var yx=/\w*$/;function vx(r){var e=new r.constructor(r.source,yx.exec(r));return e.lastIndex=r.lastIndex,e}var Yp=Kt?Kt.prototype:void 0,Xp=Yp?Yp.valueOf:void 0;function Ex(r){return Xp?Object(Xp.call(r)):{}}function Sx(r,e){var t=r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Tx="[object Boolean]",kx="[object Date]",Ax="[object Map]",xx="[object Number]",wx="[object RegExp]",Cx="[object Set]",Rx="[object String]",Nx="[object Symbol]",Ix="[object ArrayBuffer]",Ox="[object DataView]",_x="[object Float32Array]",Px="[object Float64Array]",Lx="[object Int8Array]",bx="[object Int16Array]",Mx="[object Int32Array]",jx="[object Uint8Array]",Fx="[object Uint8ClampedArray]",$x="[object Uint16Array]",Ux="[object Uint32Array]";function Dx(r,e,t){var s=r.constructor;switch(e){case Ix:return mx(r);case Tx:case kx:return new s(+r);case Ox:return gx(r);case _x:case Px:case Lx:case bx:case Mx:case jx:case Fx:case $x:case Ux:return Sx(r);case Ax:return new s;case xx:case Rx:return new s(r);case wx:return vx(r);case Cx:return new s;case Nx:return Ex(r)}}function Bx(r){return typeof r.constructor=="function"&&!_s(r)?JT(Rg(r)):{}}var zx="[object Map]";function Vx(r){return an(r)&&Gt(r)==zx}var qp=lr&&lr.isMap,Wx=qp?Ma(qp):Vx,Gx="[object Set]";function Hx(r){return an(r)&&Gt(r)==Gx}var Qp=lr&&lr.isSet,Kx=Qp?Ma(Qp):Hx,Pg="[object Arguments]",Yx="[object Array]",Xx="[object Boolean]",qx="[object Date]",Qx="[object Error]",Lg="[object Function]",Zx="[object GeneratorFunction]",Jx="[object Map]",ew="[object Number]",bg="[object Object]",tw="[object RegExp]",nw="[object Set]",rw="[object String]",iw="[object Symbol]",sw="[object WeakMap]",ow="[object ArrayBuffer]",aw="[object DataView]",lw="[object Float32Array]",uw="[object Float64Array]",cw="[object Int8Array]",fw="[object Int16Array]",dw="[object Int32Array]",hw="[object Uint8Array]",pw="[object Uint8ClampedArray]",mw="[object Uint16Array]",gw="[object Uint32Array]",Re={};Re[Pg]=Re[Yx]=Re[ow]=Re[aw]=Re[Xx]=Re[qx]=Re[lw]=Re[uw]=Re[cw]=Re[fw]=Re[dw]=Re[Jx]=Re[ew]=Re[bg]=Re[tw]=Re[nw]=Re[rw]=Re[iw]=Re[hw]=Re[pw]=Re[mw]=Re[gw]=!0;Re[Qx]=Re[Lg]=Re[sw]=!1;function ia(r,e,t,s,o,l){var c;if(c!==void 0)return c;if(!Yt(r))return r;var f=Te(r);if(f)return c=px(r),tk(r,c);var h=Gt(r),m=h==Lg||h==Zx;if(xs(r))return JA(r);if(h==bg||h==Pg||m&&!o)return c=m?{}:Bx(r),nx(r,QA(c,r));if(!Re[h])return o?r:{};c=Dx(r,h),l||(l=new vn);var g=l.get(r);if(g)return g;l.set(r,c),Kx(r)?r.forEach(function(T){c.add(ia(T,e,t,T,r,l))}):Wx(r)&&r.forEach(function(T,w){c.set(w,ia(T,e,t,w,r,l))});var y=fc,E=f?void 0:y(r);return gg(E||r,function(T,w){E&&(w=T,T=r[w]),La(c,w,ia(T,e,t,w,r,l))}),c}var yw=4;function st(r){return ia(r,yw)}function Ls(r){for(var e=-1,t=r==null?0:r.length,s=0,o=[];++e<t;){var l=r[e];l&&(o[s++]=l)}return o}var vw="__lodash_hash_undefined__";function Ew(r){return this.__data__.set(r,vw),this}function Sw(r){return this.__data__.has(r)}function vi(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new $n;++e<t;)this.add(r[e])}vi.prototype.add=vi.prototype.push=Ew;vi.prototype.has=Sw;function Mg(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(e(r[t],t,r))return!0;return!1}function Qc(r,e){return r.has(e)}var Tw=1,kw=2;function jg(r,e,t,s,o,l){var c=t&Tw,f=r.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var m=l.get(r),g=l.get(e);if(m&&g)return m==e&&g==r;var y=-1,E=!0,T=t&kw?new vi:void 0;for(l.set(r,e),l.set(e,r);++y<f;){var w=r[y],R=e[y];if(s)var j=c?s(R,w,y,e,r,l):s(w,R,y,r,e,l);if(j!==void 0){if(j)continue;E=!1;break}if(T){if(!Mg(e,function(M,_){if(!Qc(T,_)&&(w===M||o(w,M,t,s,l)))return T.push(_)})){E=!1;break}}else if(!(w===R||o(w,R,t,s,l))){E=!1;break}}return l.delete(r),l.delete(e),E}function Aw(r){var e=-1,t=Array(r.size);return r.forEach(function(s,o){t[++e]=[o,s]}),t}function Zc(r){var e=-1,t=Array(r.size);return r.forEach(function(s){t[++e]=s}),t}var xw=1,ww=2,Cw="[object Boolean]",Rw="[object Date]",Nw="[object Error]",Iw="[object Map]",Ow="[object Number]",_w="[object RegExp]",Pw="[object Set]",Lw="[object String]",bw="[object Symbol]",Mw="[object ArrayBuffer]",jw="[object DataView]",Zp=Kt?Kt.prototype:void 0,tc=Zp?Zp.valueOf:void 0;function Fw(r,e,t,s,o,l,c){switch(t){case jw:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case Mw:return!(r.byteLength!=e.byteLength||!l(new ya(r),new ya(e)));case Cw:case Rw:case Ow:return Os(+r,+e);case Nw:return r.name==e.name&&r.message==e.message;case _w:case Lw:return r==e+"";case Iw:var f=Aw;case Pw:var h=s&xw;if(f||(f=Zc),r.size!=e.size&&!h)return!1;var m=c.get(r);if(m)return m==e;s|=ww,c.set(r,e);var g=jg(f(r),f(e),s,o,l,c);return c.delete(r),g;case bw:if(tc)return tc.call(r)==tc.call(e)}return!1}var $w=1,Uw=Object.prototype,Dw=Uw.hasOwnProperty;function Bw(r,e,t,s,o,l){var c=t&$w,f=fc(r),h=f.length,m=fc(e),g=m.length;if(h!=g&&!c)return!1;for(var y=h;y--;){var E=f[y];if(!(c?E in e:Dw.call(e,E)))return!1}var T=l.get(r),w=l.get(e);if(T&&w)return T==e&&w==r;var R=!0;l.set(r,e),l.set(e,r);for(var j=c;++y<h;){E=f[y];var M=r[E],_=e[E];if(s)var P=c?s(_,M,E,e,r,l):s(M,_,E,r,e,l);if(!(P===void 0?M===_||o(M,_,t,s,l):P)){R=!1;break}j||(j=E=="constructor")}if(R&&!j){var b=r.constructor,z=e.constructor;b!=z&&"constructor"in r&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof z=="function"&&z instanceof z)&&(R=!1)}return l.delete(r),l.delete(e),R}var zw=1,Jp="[object Arguments]",em="[object Array]",Qo="[object Object]",Vw=Object.prototype,tm=Vw.hasOwnProperty;function Ww(r,e,t,s,o,l){var c=Te(r),f=Te(e),h=c?em:Gt(r),m=f?em:Gt(e);h=h==Jp?Qo:h,m=m==Jp?Qo:m;var g=h==Qo,y=m==Qo,E=h==m;if(E&&xs(r)){if(!xs(e))return!1;c=!0,g=!1}if(E&&!g)return l||(l=new vn),c||Vc(r)?jg(r,e,t,s,o,l):Fw(r,e,h,t,s,o,l);if(!(t&zw)){var T=g&&tm.call(r,"__wrapped__"),w=y&&tm.call(e,"__wrapped__");if(T||w){var R=T?r.value():r,j=w?e.value():e;return l||(l=new vn),o(R,j,t,s,l)}}return E?(l||(l=new vn),Bw(r,e,t,s,o,l)):!1}function Jc(r,e,t,s,o){return r===e?!0:r==null||e==null||!an(r)&&!an(e)?r!==r&&e!==e:Ww(r,e,t,s,Jc,o)}var Gw=1,Hw=2;function Kw(r,e,t,s){var o=t.length,l=o;if(r==null)return!l;for(r=Object(r);o--;){var c=t[o];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++o<l;){c=t[o];var f=c[0],h=r[f],m=c[1];if(c[2]){if(h===void 0&&!(f in r))return!1}else{var g=new vn,y;if(!(y===void 0?Jc(m,h,Gw|Hw,s,g):y))return!1}}return!0}function Fg(r){return r===r&&!Yt(r)}function Yw(r){for(var e=Xt(r),t=e.length;t--;){var s=e[t],o=r[s];e[t]=[s,o,Fg(o)]}return e}function $g(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function Xw(r){var e=Yw(r);return e.length==1&&e[0][2]?$g(e[0][0],e[0][1]):function(t){return t===r||Kw(t,r,e)}}function qw(r,e){return r!=null&&e in Object(r)}function Ug(r,e,t){e=$a(e,r);for(var s=-1,o=e.length,l=!1;++s<o;){var c=Ps(e[s]);if(!(l=r!=null&&t(r,c)))break;r=r[c]}return l||++s!=o?l:(o=r==null?0:r.length,!!o&&zc(o)&&Pa(c,o)&&(Te(r)||ba(r)))}function Qw(r,e){return r!=null&&Ug(r,e,qw)}var Zw=1,Jw=2;function eC(r,e){return Wc(r)&&Fg(e)?$g(Ps(r),e):function(t){var s=zA(t,r);return s===void 0&&s===e?Qw(t,r):Jc(e,s,Zw|Jw)}}function tC(r){return function(e){return e?.[r]}}function nC(r){return function(e){return Hc(e,r)}}function rC(r){return Wc(r)?tC(Ps(r)):nC(r)}function Tn(r){return typeof r=="function"?r:r==null?yi:typeof r=="object"?Te(r)?eC(r[0],r[1]):Xw(r):rC(r)}function iC(r,e,t,s){for(var o=-1,l=r==null?0:r.length;++o<l;){var c=r[o];e(s,c,t(c),r)}return s}function sC(r){return function(e,t,s){for(var o=-1,l=Object(e),c=s(e),f=c.length;f--;){var h=c[++o];if(t(l[h],h,l)===!1)break}return e}}var oC=sC();function aC(r,e){return r&&oC(r,e,Xt)}function lC(r,e){return function(t,s){if(t==null)return t;if(!Sn(t))return r(t,s);for(var o=t.length,l=-1,c=Object(t);++l<o&&s(c[l],l,c)!==!1;);return t}}var jr=lC(aC);function uC(r,e,t,s){return jr(r,function(o,l,c){e(s,o,t(o),c)}),s}function cC(r,e){return function(t,s){var o=Te(t)?iC:uC,l=e?e():{};return o(t,r,Tn(s),l)}}var Dg=Object.prototype,fC=Dg.hasOwnProperty,ef=Bc(function(r,e){r=Object(r);var t=-1,s=e.length,o=s>2?e[2]:void 0;for(o&&Eg(e[0],e[1],o)&&(s=1);++t<s;)for(var l=e[t],c=Cg(l),f=-1,h=c.length;++f<h;){var m=c[f],g=r[m];(g===void 0||Os(g,Dg[m])&&!fC.call(r,m))&&(r[m]=l[m])}return r});function nm(r){return an(r)&&Sn(r)}var dC=200;function hC(r,e,t,s){var o=-1,l=vg,c=!0,f=r.length,h=[],m=e.length;if(!f)return h;e.length>=dC&&(l=Qc,c=!1,e=new vi(e));e:for(;++o<f;){var g=r[o],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=m;E--;)if(e[E]===y)continue e;h.push(g)}else l(e,y,s)||h.push(g)}return h}var Ua=Bc(function(r,e){return nm(r)?hC(r,Yc(e,1,nm,!0)):[]});function _r(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}function it(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:_a(e),Ng(r,e<0?0:e,s)):[]}function Rs(r,e,t){var s=r==null?0:r.length;return s?(e=e===void 0?1:_a(e),e=s-e,Ng(r,0,e<0?0:e)):[]}function pC(r){return typeof r=="function"?r:yi}function ae(r,e){var t=Te(r)?gg:jr;return t(r,pC(e))}function mC(r,e){for(var t=-1,s=r==null?0:r.length;++t<s;)if(!e(r[t],t,r))return!1;return!0}function gC(r,e){var t=!0;return jr(r,function(s,o,l){return t=!!e(s,o,l),t}),t}function on(r,e,t){var s=Te(r)?mC:gC;return s(r,Tn(e))}function Bg(r,e){var t=[];return jr(r,function(s,o,l){e(s,o,l)&&t.push(s)}),t}function qt(r,e){var t=Te(r)?Xc:Bg;return t(r,Tn(e))}function yC(r){return function(e,t,s){var o=Object(e);if(!Sn(e)){var l=Tn(t);e=Xt(e),t=function(f){return l(o[f],f,o)}}var c=r(e,t,s);return c>-1?o[l?e[c]:c]:void 0}}var vC=Math.max;function EC(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var o=t==null?0:_a(t);return o<0&&(o=vC(s+o,0)),yg(r,Tn(e),o)}var Ei=yC(EC);function ln(r){return r&&r.length?r[0]:void 0}function SC(r,e){var t=-1,s=Sn(r)?Array(r.length):[];return jr(r,function(o,l,c){s[++t]=e(o,l,c)}),s}function ee(r,e){var t=Te(r)?Oa:SC;return t(r,Tn(e))}function Ht(r,e){return Yc(ee(r,e))}var TC=Object.prototype,kC=TC.hasOwnProperty,AC=cC(function(r,e,t){kC.call(r,t)?r[t].push(e):Uc(r,t,[e])}),xC=Object.prototype,wC=xC.hasOwnProperty;function CC(r,e){return r!=null&&wC.call(r,e)}function se(r,e){return r!=null&&Ug(r,e,CC)}var RC="[object String]";function kt(r){return typeof r=="string"||!Te(r)&&an(r)&&cr(r)==RC}function NC(r,e){return Oa(e,function(t){return r[t]})}function qe(r){return r==null?[]:NC(r,Xt(r))}var IC=Math.max;function pt(r,e,t,s){r=Sn(r)?r:qe(r),t=t?_a(t):0;var o=r.length;return t<0&&(t=IC(o+t,0)),kt(r)?t<=o&&r.indexOf(e,t)>-1:!!o&&$c(r,e,t)>-1}function rm(r,e,t){var s=r==null?0:r.length;if(!s)return-1;var o=0;return $c(r,e,o)}var OC="[object Map]",_C="[object Set]",PC=Object.prototype,LC=PC.hasOwnProperty;function Ne(r){if(r==null)return!0;if(Sn(r)&&(Te(r)||typeof r=="string"||typeof r.splice=="function"||xs(r)||Vc(r)||ba(r)))return!r.length;var e=Gt(r);if(e==OC||e==_C)return!r.size;if(_s(r))return!wg(r).length;for(var t in r)if(LC.call(r,t))return!1;return!0}var bC="[object RegExp]";function MC(r){return an(r)&&cr(r)==bC}var im=lr&&lr.isRegExp,Ln=im?Ma(im):MC;function bn(r){return r===void 0}var jC="Expected a function";function FC(r){if(typeof r!="function")throw new TypeError(jC);return function(){var e=arguments;switch(e.length){case 0:return!r.call(this);case 1:return!r.call(this,e[0]);case 2:return!r.call(this,e[0],e[1]);case 3:return!r.call(this,e[0],e[1],e[2])}return!r.apply(this,e)}}function $C(r,e,t,s){if(!Yt(r))return r;e=$a(e,r);for(var o=-1,l=e.length,c=l-1,f=r;f!=null&&++o<l;){var h=Ps(e[o]),m=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return r;if(o!=c){var g=f[h];m=void 0,m===void 0&&(m=Yt(g)?g:Pa(e[o+1])?[]:{})}La(f,h,m),f=f[h]}return r}function UC(r,e,t){for(var s=-1,o=e.length,l={};++s<o;){var c=e[s],f=Hc(r,c);t(f,c)&&$C(l,$a(c,r),f)}return l}function un(r,e){if(r==null)return{};var t=Oa(sx(r),function(s){return[s]});return e=Tn(e),UC(r,t,function(s,o){return e(s,o[0])})}function DC(r,e,t,s,o){return o(r,function(l,c,f){t=s?(s=!1,l):e(t,l,c,f)}),t}function bt(r,e,t){var s=Te(r)?WA:DC,o=arguments.length<3;return s(r,Tn(e),t,o,jr)}function Da(r,e){var t=Te(r)?Xc:Bg;return t(r,FC(Tn(e)))}function BC(r,e){var t;return jr(r,function(s,o,l){return t=e(s,o,l),!t}),!!t}function zg(r,e,t){var s=Te(r)?Mg:BC;return s(r,Tn(e))}var zC=1/0,VC=gi&&1/Zc(new gi([,-0]))[1]==zC?function(r){return new gi(r)}:Xe,WC=200;function GC(r,e,t){var s=-1,o=vg,l=r.length,c=!0,f=[],h=f;if(l>=WC){var m=VC(r);if(m)return Zc(m);c=!1,o=Qc,h=new vi}else h=f;e:for(;++s<l;){var g=r[s],y=g;if(g=g!==0?g:0,c&&y===y){for(var E=h.length;E--;)if(h[E]===y)continue e;f.push(g)}else o(h,y,t)||(h!==f&&h.push(y),f.push(g))}return f}function tf(r){return r&&r.length?GC(r):[]}function pc(r){console&&console.error&&console.error(`Error: ${r}`)}function Vg(r){console&&console.warn&&console.warn(`Warning: ${r}`)}function Wg(r){const e=new Date().getTime(),t=r();return{time:new Date().getTime()-e,value:t}}function Gg(r){function e(){}e.prototype=r;const t=new e;function s(){return typeof t.bar}return s(),s(),r}function HC(r){return KC(r)?r.LABEL:r.name}function KC(r){return kt(r.LABEL)&&r.LABEL!==""}class kn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ae(this.definition,t=>{t.accept(e)})}}class Mt extends kn{constructor(e){super([]),this.idx=1,Lt(this,un(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Si extends kn{constructor(e){super(e.definition),this.orgText="",Lt(this,un(e,t=>t!==void 0))}}class At extends kn{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Lt(this,un(e,t=>t!==void 0))}}class Tt extends kn{constructor(e){super(e.definition),this.idx=1,Lt(this,un(e,t=>t!==void 0))}}class An extends kn{constructor(e){super(e.definition),this.idx=1,Lt(this,un(e,t=>t!==void 0))}}class xn extends kn{constructor(e){super(e.definition),this.idx=1,Lt(this,un(e,t=>t!==void 0))}}class Qe extends kn{constructor(e){super(e.definition),this.idx=1,Lt(this,un(e,t=>t!==void 0))}}class cn extends kn{constructor(e){super(e.definition),this.idx=1,Lt(this,un(e,t=>t!==void 0))}}class fn extends kn{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Lt(this,un(e,t=>t!==void 0))}}class Fe{constructor(e){this.idx=1,Lt(this,un(e,t=>t!==void 0))}accept(e){e.visit(this)}}function YC(r){return ee(r,sa)}function sa(r){function e(t){return ee(t,sa)}if(r instanceof Mt){const t={type:"NonTerminal",name:r.nonTerminalName,idx:r.idx};return kt(r.label)&&(t.label=r.label),t}else{if(r instanceof At)return{type:"Alternative",definition:e(r.definition)};if(r instanceof Tt)return{type:"Option",idx:r.idx,definition:e(r.definition)};if(r instanceof An)return{type:"RepetitionMandatory",idx:r.idx,definition:e(r.definition)};if(r instanceof xn)return{type:"RepetitionMandatoryWithSeparator",idx:r.idx,separator:sa(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof cn)return{type:"RepetitionWithSeparator",idx:r.idx,separator:sa(new Fe({terminalType:r.separator})),definition:e(r.definition)};if(r instanceof Qe)return{type:"Repetition",idx:r.idx,definition:e(r.definition)};if(r instanceof fn)return{type:"Alternation",idx:r.idx,definition:e(r.definition)};if(r instanceof Fe){const t={type:"Terminal",name:r.terminalType.name,label:HC(r.terminalType),idx:r.idx};kt(r.label)&&(t.terminalLabel=r.label);const s=r.terminalType.PATTERN;return r.terminalType.PATTERN&&(t.pattern=Ln(s)?s.source:s),t}else{if(r instanceof Si)return{type:"Rule",name:r.name,orgText:r.orgText,definition:e(r.definition)};throw Error("non exhaustive match")}}}class Ti{visit(e){const t=e;switch(t.constructor){case Mt:return this.visitNonTerminal(t);case At:return this.visitAlternative(t);case Tt:return this.visitOption(t);case An:return this.visitRepetitionMandatory(t);case xn:return this.visitRepetitionMandatoryWithSeparator(t);case cn:return this.visitRepetitionWithSeparator(t);case Qe:return this.visitRepetition(t);case fn:return this.visitAlternation(t);case Fe:return this.visitTerminal(t);case Si:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function XC(r){return r instanceof At||r instanceof Tt||r instanceof Qe||r instanceof An||r instanceof xn||r instanceof cn||r instanceof Fe||r instanceof Si}function va(r,e=[]){return r instanceof Tt||r instanceof Qe||r instanceof cn?!0:r instanceof fn?zg(r.definition,s=>va(s,e)):r instanceof Mt&&pt(e,r)?!1:r instanceof kn?(r instanceof Mt&&e.push(r),on(r.definition,s=>va(s,e))):!1}function qC(r){return r instanceof fn}function yn(r){if(r instanceof Mt)return"SUBRULE";if(r instanceof Tt)return"OPTION";if(r instanceof fn)return"OR";if(r instanceof An)return"AT_LEAST_ONE";if(r instanceof xn)return"AT_LEAST_ONE_SEP";if(r instanceof cn)return"MANY_SEP";if(r instanceof Qe)return"MANY";if(r instanceof Fe)return"CONSUME";throw Error("non exhaustive match")}class Ba{walk(e,t=[]){ae(e.definition,(s,o)=>{const l=it(e.definition,o+1);if(s instanceof Mt)this.walkProdRef(s,l,t);else if(s instanceof Fe)this.walkTerminal(s,l,t);else if(s instanceof At)this.walkFlat(s,l,t);else if(s instanceof Tt)this.walkOption(s,l,t);else if(s instanceof An)this.walkAtLeastOne(s,l,t);else if(s instanceof xn)this.walkAtLeastOneSep(s,l,t);else if(s instanceof cn)this.walkManySep(s,l,t);else if(s instanceof Qe)this.walkMany(s,l,t);else if(s instanceof fn)this.walkOr(s,l,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,s){}walkProdRef(e,t,s){}walkFlat(e,t,s){const o=t.concat(s);this.walk(e,o)}walkOption(e,t,s){const o=t.concat(s);this.walk(e,o)}walkAtLeastOne(e,t,s){const o=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,o)}walkAtLeastOneSep(e,t,s){const o=sm(e,t,s);this.walk(e,o)}walkMany(e,t,s){const o=[new Tt({definition:e.definition})].concat(t,s);this.walk(e,o)}walkManySep(e,t,s){const o=sm(e,t,s);this.walk(e,o)}walkOr(e,t,s){const o=t.concat(s);ae(e.definition,l=>{const c=new At({definition:[l]});this.walk(c,o)})}}function sm(r,e,t){return[new Tt({definition:[new Fe({terminalType:r.separator})].concat(r.definition)})].concat(e,t)}function bs(r){if(r instanceof Mt)return bs(r.referencedRule);if(r instanceof Fe)return JC(r);if(XC(r))return QC(r);if(qC(r))return ZC(r);throw Error("non exhaustive match")}function QC(r){let e=[];const t=r.definition;let s=0,o=t.length>s,l,c=!0;for(;o&&c;)l=t[s],c=va(l),e=e.concat(bs(l)),s=s+1,o=t.length>s;return tf(e)}function ZC(r){const e=ee(r.definition,t=>bs(t));return tf(sn(e))}function JC(r){return[r.terminalType]}const Hg="_~IN~_";class e1 extends Ba{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,s){}walkProdRef(e,t,s){const o=n1(e.referencedRule,e.idx)+this.topProd.name,l=t.concat(s),c=new At({definition:l}),f=bs(c);this.follows[o]=f}}function t1(r){const e={};return ae(r,t=>{const s=new e1(t).startWalking();Lt(e,s)}),e}function n1(r,e){return r.name+e+Hg}function le(r){return r.charCodeAt(0)}function nc(r,e){Array.isArray(r)?r.forEach(function(t){e.push(t)}):e.push(r)}function fs(r,e){if(r[e]===!0)throw"duplicate flag "+e;r[e],r[e]=!0}function li(r){if(r===void 0)throw Error("Internal Error - Should never get here!");return!0}function r1(){throw Error("Internal Error - Should never get here!")}function om(r){return r.type==="Character"}const Ea=[];for(let r=le("0");r<=le("9");r++)Ea.push(r);const Sa=[le("_")].concat(Ea);for(let r=le("a");r<=le("z");r++)Sa.push(r);for(let r=le("A");r<=le("Z");r++)Sa.push(r);const am=[le(" "),le("\f"),le(`
`),le("\r"),le("	"),le("\v"),le("	"),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le(""),le("\u2028"),le("\u2029"),le(""),le(""),le(""),le("\uFEFF")],i1=/[0-9a-fA-F]/,Zo=/[0-9]/,s1=/[1-9]/;class o1{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":fs(s,"global");break;case"i":fs(s,"ignoreCase");break;case"m":fs(s,"multiLine");break;case"u":fs(s,"unicode");break;case"y":fs(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":t="Lookbehind";break;case"!":t="NegativeLookbehind"}break}}li(t);const s=this.disjunction();return this.consumeChar(")"),{type:t,value:s,loc:this.loc(e)}}return r1()}quantifier(e=!1){let t;const s=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const o=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:o,atMost:o};break;case",":let l;this.isDigit()?(l=this.integerIncludingZero(),t={atLeast:o,atMost:l}):t={atLeast:o,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;li(t);break}if(!(e===!0&&t===void 0)&&li(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(s),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),li(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[le(`
`),le("\r"),le("\u2028"),le("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=Ea;break;case"D":e=Ea,t=!0;break;case"s":e=am;break;case"S":e=am,t=!0;break;case"w":e=Sa;break;case"W":e=Sa,t=!0;break}if(li(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=le("\f");break;case"n":e=le(`
`);break;case"r":e=le("\r");break;case"t":e=le("	");break;case"v":e=le("\v");break}if(li(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:le("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:le(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:le(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,om(s)&&this.isRangeDash()){this.consumeChar("-");const o=this.classAtom();if(o.type,om(o)){if(o.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:o.value})}else nc(s.value,e),e.push(le("-")),nc(o.value,e)}else nc(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:le("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const t=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:t};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(s1.test(e)===!1)throw Error("Expecting a positive integer");for(;Zo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Zo.test(e)===!1)throw Error("Expecting an integer");for(;Zo.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:le(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Zo.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let o=0;o<e;o++){const l=this.popChar();if(i1.test(l)===!1)throw Error("Expecting a HexDecimal digits");t+=l}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class nf{visitChildren(e){for(const t in e){const s=e[t];e.hasOwnProperty(t)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(o=>{this.visit(o)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let oa={};const a1=new o1;function za(r){const e=r.toString();if(oa.hasOwnProperty(e))return oa[e];{const t=a1.pattern(e);return oa[e]=t,t}}function l1(){oa={}}const Kg="Complement Sets are not supported for first char optimization",Ta=`Unable to use "first char" lexer optimizations:
`;function u1(r,e=!1){try{const t=za(r);return mc(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Kg)e&&Vg(`${Ta}	Unable to optimize: < ${r.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),pc(`${Ta}
	Failed parsing: < ${r.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function mc(r,e,t){switch(r.type){case"Disjunction":for(let o=0;o<r.value.length;o++)mc(r.value[o],e,t);break;case"Alternative":const s=r.value;for(let o=0;o<s.length;o++){const l=s[o];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const c=l;switch(c.type){case"Character":Jo(c.value,e,t);break;case"Set":if(c.complement===!0)throw Error(Kg);ae(c.value,h=>{if(typeof h=="number")Jo(h,e,t);else{const m=h;if(t===!0)for(let g=m.from;g<=m.to;g++)Jo(g,e,t);else{for(let g=m.from;g<=m.to&&g<ys;g++)Jo(g,e,t);if(m.to>=ys){const g=m.from>=ys?m.from:ys,y=m.to,E=ur(g),T=ur(y);for(let w=E;w<=T;w++)e[w]=w}}}});break;case"Group":mc(c.value,e,t);break;default:throw Error("Non Exhaustive Match")}const f=c.quantifier!==void 0&&c.quantifier.atLeast===0;if(c.type==="Group"&&gc(c)===!1||c.type!=="Group"&&f===!1)break}break;default:throw Error("non exhaustive match!")}return qe(e)}function Jo(r,e,t){const s=ur(r);e[s]=s,t===!0&&c1(r,e)}function c1(r,e){const t=String.fromCharCode(r),s=t.toUpperCase();if(s!==t){const o=ur(s.charCodeAt(0));e[o]=o}else{const o=t.toLowerCase();if(o!==t){const l=ur(o.charCodeAt(0));e[l]=l}}}function lm(r,e){return Ei(r.value,t=>{if(typeof t=="number")return pt(e,t);{const s=t;return Ei(e,o=>s.from<=o&&o<=s.to)!==void 0}})}function gc(r){const e=r.quantifier;return e&&e.atLeast===0?!0:r.value?Te(r.value)?on(r.value,gc):gc(r.value):!1}class f1 extends nf{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){pt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?lm(e,this.targetCharCodes)===void 0&&(this.found=!0):lm(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function rf(r,e){if(e instanceof RegExp){const t=za(e),s=new f1(r);return s.visit(t),s.found}else return Ei(e,t=>pt(r,t.charCodeAt(0)))!==void 0}const Pr="PATTERN",gs="defaultMode",ea="modes";let Yg=typeof new RegExp("(?:)").sticky=="boolean";function d1(r,e){e=ef(e,{useSticky:Yg,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,P)=>P()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{j1()});let s;t("Reject Lexer.NA",()=>{s=Da(r,_=>_[Pr]===dt.NA)});let o=!1,l;t("Transform Patterns",()=>{o=!1,l=ee(s,_=>{const P=_[Pr];if(Ln(P)){const b=P.source;return b.length===1&&b!=="^"&&b!=="$"&&b!=="."&&!P.ignoreCase?b:b.length===2&&b[0]==="\\"&&!pt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],b[1])?b[1]:e.useSticky?cm(P):um(P)}else{if(jn(P))return o=!0,{exec:P};if(typeof P=="object")return o=!0,P;if(typeof P=="string"){if(P.length===1)return P;{const b=P.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),z=new RegExp(b);return e.useSticky?cm(z):um(z)}}else throw Error("non exhaustive match")}})});let c,f,h,m,g;t("misc mapping",()=>{c=ee(s,_=>_.tokenTypeIdx),f=ee(s,_=>{const P=_.GROUP;if(P!==dt.SKIPPED){if(kt(P))return P;if(bn(P))return!1;throw Error("non exhaustive match")}}),h=ee(s,_=>{const P=_.LONGER_ALT;if(P)return Te(P)?ee(P,z=>rm(s,z)):[rm(s,P)]}),m=ee(s,_=>_.PUSH_MODE),g=ee(s,_=>se(_,"POP_MODE"))});let y;t("Line Terminator Handling",()=>{const _=Qg(e.lineTerminatorCharacters);y=ee(s,P=>!1),e.positionTracking!=="onlyOffset"&&(y=ee(s,P=>se(P,"LINE_BREAKS")?!!P.LINE_BREAKS:qg(P,_)===!1&&rf(_,P.PATTERN)))});let E,T,w,R;t("Misc Mapping #2",()=>{E=ee(s,Xg),T=ee(l,L1),w=bt(s,(_,P)=>{const b=P.GROUP;return kt(b)&&b!==dt.SKIPPED&&(_[b]=[]),_},{}),R=ee(l,(_,P)=>({pattern:l[P],longerAlt:h[P],canLineTerminator:y[P],isCustom:E[P],short:T[P],group:f[P],push:m[P],pop:g[P],tokenTypeIdx:c[P],tokenType:s[P]}))});let j=!0,M=[];return e.safeMode||t("First Char Optimization",()=>{M=bt(s,(_,P,b)=>{if(typeof P.PATTERN=="string"){const z=P.PATTERN.charCodeAt(0),L=ur(z);rc(_,L,R[b])}else if(Te(P.START_CHARS_HINT)){let z;ae(P.START_CHARS_HINT,L=>{const D=typeof L=="string"?L.charCodeAt(0):L,G=ur(D);z!==G&&(z=G,rc(_,G,R[b]))})}else if(Ln(P.PATTERN))if(P.PATTERN.unicode)j=!1,e.ensureOptimizations&&pc(`${Ta}	Unable to analyze < ${P.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const z=u1(P.PATTERN,e.ensureOptimizations);Ne(z)&&(j=!1),ae(z,L=>{rc(_,L,R[b])})}else e.ensureOptimizations&&pc(`${Ta}	TokenType: <${P.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),j=!1;return _},[])}),{emptyGroups:w,patternIdxToConfig:R,charCodeToPatternIdxToConfig:M,hasCustom:o,canBeOptimized:j}}function h1(r,e){let t=[];const s=m1(r);t=t.concat(s.errors);const o=g1(s.valid),l=o.valid;return t=t.concat(o.errors),t=t.concat(p1(l)),t=t.concat(x1(l)),t=t.concat(w1(l,e)),t=t.concat(C1(l)),t}function p1(r){let e=[];const t=qt(r,s=>Ln(s[Pr]));return e=e.concat(v1(t)),e=e.concat(T1(t)),e=e.concat(k1(t)),e=e.concat(A1(t)),e=e.concat(E1(t)),e}function m1(r){const e=qt(r,o=>!se(o,Pr)),t=ee(e,o=>({message:"Token Type: ->"+o.name+"<- missing static 'PATTERN' property",type:ze.MISSING_PATTERN,tokenTypes:[o]})),s=Ua(r,e);return{errors:t,valid:s}}function g1(r){const e=qt(r,o=>{const l=o[Pr];return!Ln(l)&&!jn(l)&&!se(l,"exec")&&!kt(l)}),t=ee(e,o=>({message:"Token Type: ->"+o.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ze.INVALID_PATTERN,tokenTypes:[o]})),s=Ua(r,e);return{errors:t,valid:s}}const y1=/[^\\][$]/;function v1(r){class e extends nf{constructor(){super(...arguments),this.found=!1}visitEndAnchor(l){this.found=!0}}const t=qt(r,o=>{const l=o.PATTERN;try{const c=za(l),f=new e;return f.visit(c),f.found}catch{return y1.test(l.source)}});return ee(t,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.EOI_ANCHOR_FOUND,tokenTypes:[o]}))}function E1(r){const e=qt(r,s=>s.PATTERN.test(""));return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:ze.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const S1=/[^\\[][\^]|^\^/;function T1(r){class e extends nf{constructor(){super(...arguments),this.found=!1}visitStartAnchor(l){this.found=!0}}const t=qt(r,o=>{const l=o.PATTERN;try{const c=za(l),f=new e;return f.visit(c),f.found}catch{return S1.test(l.source)}});return ee(t,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ze.SOI_ANCHOR_FOUND,tokenTypes:[o]}))}function k1(r){const e=qt(r,s=>{const o=s[Pr];return o instanceof RegExp&&(o.multiline||o.global)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ze.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function A1(r){const e=[];let t=ee(r,l=>bt(r,(c,f)=>(l.PATTERN.source===f.PATTERN.source&&!pt(e,f)&&f.PATTERN!==dt.NA&&(e.push(f),c.push(f)),c),[]));t=Ls(t);const s=qt(t,l=>l.length>1);return ee(s,l=>{const c=ee(l,h=>h.name);return{message:`The same RegExp pattern ->${ln(l).PATTERN}<-has been used in all of the following Token Types: ${c.join(", ")} <-`,type:ze.DUPLICATE_PATTERNS_FOUND,tokenTypes:l}})}function x1(r){const e=qt(r,s=>{if(!se(s,"GROUP"))return!1;const o=s.GROUP;return o!==dt.SKIPPED&&o!==dt.NA&&!kt(o)});return ee(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ze.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function w1(r,e){const t=qt(r,o=>o.PUSH_MODE!==void 0&&!pt(e,o.PUSH_MODE));return ee(t,o=>({message:`Token Type: ->${o.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${o.PUSH_MODE}<-which does not exist`,type:ze.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[o]}))}function C1(r){const e=[],t=bt(r,(s,o,l)=>{const c=o.PATTERN;return c===dt.NA||(kt(c)?s.push({str:c,idx:l,tokenType:o}):Ln(c)&&N1(c)&&s.push({str:c.source,idx:l,tokenType:o})),s},[]);return ae(r,(s,o)=>{ae(t,({str:l,idx:c,tokenType:f})=>{if(o<c&&R1(l,s.PATTERN)){const h=`Token: ->${f.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:h,type:ze.UNREACHABLE_PATTERN,tokenTypes:[s,f]})}})}),e}function R1(r,e){if(Ln(e)){if(I1(e))return!1;const t=e.exec(r);return t!==null&&t.index===0}else{if(jn(e))return e(r,0,[],{});if(se(e,"exec"))return e.exec(r,0,[],{});if(typeof e=="string")return e===r;throw Error("non exhaustive match")}}function N1(r){return Ei([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>r.source.indexOf(t)!==-1)===void 0}function I1(r){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(r.source)}function um(r){const e=r.ignoreCase?"i":"";return new RegExp(`^(?:${r.source})`,e)}function cm(r){const e=r.ignoreCase?"iy":"y";return new RegExp(`${r.source}`,e)}function O1(r,e,t){const s=[];return se(r,gs)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+gs+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),se(r,ea)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+ea+`> property in its definition
`,type:ze.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),se(r,ea)&&se(r,gs)&&!se(r.modes,r.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${gs}: <${r.defaultMode}>which does not exist
`,type:ze.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),se(r,ea)&&ae(r.modes,(o,l)=>{ae(o,(c,f)=>{if(bn(c))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${l}> at index: <${f}>
`,type:ze.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(se(c,"LONGER_ALT")){const h=Te(c.LONGER_ALT)?c.LONGER_ALT:[c.LONGER_ALT];ae(h,m=>{!bn(m)&&!pt(o,m)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${m.name}> on token <${c.name}> outside of mode <${l}>
`,type:ze.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function _1(r,e,t){const s=[];let o=!1;const l=Ls(sn(qe(r.modes))),c=Da(l,h=>h[Pr]===dt.NA),f=Qg(t);return e&&ae(c,h=>{const m=qg(h,f);if(m!==!1){const y={message:M1(h,m),type:m.issue,tokenType:h};s.push(y)}else se(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(o=!0):rf(f,h.PATTERN)&&(o=!0)}),e&&!o&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:ze.NO_LINE_BREAKS_FLAGS}),s}function P1(r){const e={},t=Xt(r);return ae(t,s=>{const o=r[s];if(Te(o))e[s]=[];else throw Error("non exhaustive match")}),e}function Xg(r){const e=r.PATTERN;if(Ln(e))return!1;if(jn(e))return!0;if(se(e,"exec"))return!0;if(kt(e))return!1;throw Error("non exhaustive match")}function L1(r){return kt(r)&&r.length===1?r.charCodeAt(0):!1}const b1={test:function(r){const e=r.length;for(let t=this.lastIndex;t<e;t++){const s=r.charCodeAt(t);if(s===10)return this.lastIndex=t+1,!0;if(s===13)return r.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function qg(r,e){if(se(r,"LINE_BREAKS"))return!1;if(Ln(r.PATTERN)){try{rf(e,r.PATTERN)}catch(t){return{issue:ze.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(kt(r.PATTERN))return!1;if(Xg(r))return{issue:ze.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function M1(r,e){if(e.issue===ze.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${r.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===ze.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${r.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Qg(r){return ee(r,t=>kt(t)?t.charCodeAt(0):t)}function rc(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}const ys=256;let aa=[];function ur(r){return r<ys?r:aa[r]}function j1(){if(Ne(aa)){aa=new Array(65536);for(let r=0;r<65536;r++)aa[r]=r>255?255+~~(r/255):r}}function Ms(r,e){const t=r.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function ka(r,e){return r.tokenTypeIdx===e.tokenTypeIdx}let fm=1;const Zg={};function js(r){const e=F1(r);$1(e),D1(e),U1(e),ae(e,t=>{t.isParent=t.categoryMatches.length>0})}function F1(r){let e=st(r),t=r,s=!0;for(;s;){t=Ls(sn(ee(t,l=>l.CATEGORIES)));const o=Ua(t,e);e=e.concat(o),Ne(o)?s=!1:t=o}return e}function $1(r){ae(r,e=>{ey(e)||(Zg[fm]=e,e.tokenTypeIdx=fm++),dm(e)&&!Te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),dm(e)||(e.CATEGORIES=[]),B1(e)||(e.categoryMatches=[]),z1(e)||(e.categoryMatchesMap={})})}function U1(r){ae(r,e=>{e.categoryMatches=[],ae(e.categoryMatchesMap,(t,s)=>{e.categoryMatches.push(Zg[s].tokenTypeIdx)})})}function D1(r){ae(r,e=>{Jg([],e)})}function Jg(r,e){ae(r,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),ae(e.CATEGORIES,t=>{const s=r.concat(e);pt(s,t)||Jg(s,t)})}function ey(r){return se(r,"tokenTypeIdx")}function dm(r){return se(r,"CATEGORIES")}function B1(r){return se(r,"categoryMatches")}function z1(r){return se(r,"categoryMatchesMap")}function V1(r){return se(r,"tokenTypeIdx")}const W1={buildUnableToPopLexerModeMessage(r){return`Unable to pop Lexer Mode after encountering Token ->${r.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(r,e,t,s,o,l){return`unexpected character: ->${r.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var ze;(function(r){r[r.MISSING_PATTERN=0]="MISSING_PATTERN",r[r.INVALID_PATTERN=1]="INVALID_PATTERN",r[r.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",r[r.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",r[r.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",r[r.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",r[r.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",r[r.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",r[r.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",r[r.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",r[r.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",r[r.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",r[r.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",r[r.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",r[r.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",r[r.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",r[r.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",r[r.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(ze||(ze={}));const vs={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:W1,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(vs);class dt{constructor(e,t=vs){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(o,l)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${o}>`);const{time:f,value:h}=Wg(l),m=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&m(`${c}<-- <${o}> time: ${f}ms`),this.traceInitIndent--,h}else return l()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Lt({},vs,t);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let o,l=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===vs.lineTerminatorsPattern)this.config.lineTerminatorsPattern=b1;else if(this.config.lineTerminatorCharacters===vs.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Te(e)?o={modes:{defaultMode:st(e)},defaultMode:gs}:(l=!1,o=st(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(O1(o,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(_1(o,this.trackStartLines,this.config.lineTerminatorCharacters))})),o.modes=o.modes?o.modes:{},ae(o.modes,(f,h)=>{o.modes[h]=Da(f,m=>bn(m))});const c=Xt(o.modes);if(ae(o.modes,(f,h)=>{this.TRACE_INIT(`Mode: <${h}> processing`,()=>{if(this.modes.push(h),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(h1(f,c))}),Ne(this.lexerDefinitionErrors)){js(f);let m;this.TRACE_INIT("analyzeTokenTypes",()=>{m=d1(f,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[h]=m.patternIdxToConfig,this.charCodeToPatternIdxToConfig[h]=m.charCodeToPatternIdxToConfig,this.emptyGroups=Lt({},this.emptyGroups,m.emptyGroups),this.hasCustom=m.hasCustom||this.hasCustom,this.canModeBeOptimized[h]=m.canBeOptimized}})}),this.defaultMode=o.defaultMode,!Ne(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const h=ee(this.lexerDefinitionErrors,m=>m.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+h)}ae(this.lexerDefinitionWarning,f=>{Vg(f.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Yg?(this.chopInput=yi,this.match=this.matchWithTest):(this.updateLastIndex=Xe,this.match=this.matchWithExec),l&&(this.handleModes=Xe),this.trackStartLines===!1&&(this.computeNewColumn=yi),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Xe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const f=bt(this.canModeBeOptimized,(h,m,g)=>(m===!1&&h.push(g),h),[]);if(t.ensureOptimizations&&!Ne(f))throw Error(`Lexer Modes: < ${f.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{l1()}),this.TRACE_INIT("toFastProperties",()=>{Gg(this)})})}tokenize(e,t=this.defaultMode){if(!Ne(this.lexerDefinitionErrors)){const o=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+o)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let s,o,l,c,f,h,m,g,y,E,T,w,R,j,M;const _=e,P=_.length;let b=0,z=0;const L=this.hasCustom?0:Math.floor(e.length/10),D=new Array(L),G=[];let xe=this.trackStartLines?1:void 0,ce=this.trackStartLines?1:void 0;const Ge=P1(this.emptyGroups),tt=this.trackStartLines,$e=this.config.lineTerminatorsPattern;let Ue=0,de=[],ye=[];const Ae=[],W=[];Object.freeze(W);let J;function H(){return de}function x(oe){const he=ur(oe),ve=ye[he];return ve===void 0?W:ve}const F=oe=>{if(Ae.length===1&&oe.tokenType.PUSH_MODE===void 0){const he=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);G.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:he})}else{Ae.pop();const he=_r(Ae);de=this.patternIdxToConfig[he],ye=this.charCodeToPatternIdxToConfig[he],Ue=de.length;const ve=this.canModeBeOptimized[he]&&this.config.safeMode===!1;ye&&ve?J=x:J=H}};function fe(oe){Ae.push(oe),ye=this.charCodeToPatternIdxToConfig[oe],de=this.patternIdxToConfig[oe],Ue=de.length,Ue=de.length;const he=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;ye&&he?J=x:J=H}fe.call(this,t);let te;const Ee=this.config.recoveryEnabled;for(;b<P;){h=null;const oe=_.charCodeAt(b),he=J(oe),ve=he.length;for(s=0;s<ve;s++){te=he[s];const me=te.pattern;m=null;const Le=te.short;if(Le!==!1?oe===Le&&(h=me):te.isCustom===!0?(M=me.exec(_,b,D,Ge),M!==null?(h=M[0],M.payload!==void 0&&(m=M.payload)):h=null):(this.updateLastIndex(me,b),h=this.match(me,e,b)),h!==null){if(f=te.longerAlt,f!==void 0){const xt=f.length;for(l=0;l<xt;l++){const jt=de[f[l]],Ft=jt.pattern;if(g=null,jt.isCustom===!0?(M=Ft.exec(_,b,D,Ge),M!==null?(c=M[0],M.payload!==void 0&&(g=M.payload)):c=null):(this.updateLastIndex(Ft,b),c=this.match(Ft,e,b)),c&&c.length>h.length){h=c,m=g,te=jt;break}}}break}}if(h!==null){if(y=h.length,E=te.group,E!==void 0&&(T=te.tokenTypeIdx,w=this.createTokenInstance(h,b,T,te.tokenType,xe,ce,y),this.handlePayload(w,m),E===!1?z=this.addToken(D,z,w):Ge[E].push(w)),e=this.chopInput(e,y),b=b+y,ce=this.computeNewColumn(ce,y),tt===!0&&te.canLineTerminator===!0){let me=0,Le,xt;$e.lastIndex=0;do Le=$e.test(h),Le===!0&&(xt=$e.lastIndex-1,me++);while(Le===!0);me!==0&&(xe=xe+me,ce=y-xt,this.updateTokenEndLineColumnLocation(w,E,xt,me,xe,ce,y))}this.handleModes(te,F,fe,w)}else{const me=b,Le=xe,xt=ce;let jt=Ee===!1;for(;jt===!1&&b<P;)for(e=this.chopInput(e,1),b++,o=0;o<Ue;o++){const Ft=de[o],hr=Ft.pattern,Ai=Ft.short;if(Ai!==!1?_.charCodeAt(b)===Ai&&(jt=!0):Ft.isCustom===!0?jt=hr.exec(_,b,D,Ge)!==null:(this.updateLastIndex(hr,b),jt=hr.exec(e)!==null),jt===!0)break}if(R=b-me,ce=this.computeNewColumn(ce,R),j=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,me,R,Le,xt,_r(Ae)),G.push({offset:me,line:Le,column:xt,length:R,message:j}),Ee===!1)break}}return this.hasCustom||(D.length=z),{tokens:D,groups:Ge,errors:G}}handleModes(e,t,s,o){if(e.pop===!0){const l=e.push;t(o),l!==void 0&&s.call(this,l)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,s,o,l,c,f){let h,m;t!==void 0&&(h=s===f-1,m=h?-1:0,o===1&&h===!0||(e.endLine=l+m,e.endColumn=c-1+-m))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,s,o){return{image:e,startOffset:t,tokenTypeIdx:s,tokenType:o}}createStartOnlyToken(e,t,s,o,l,c){return{image:e,startOffset:t,startLine:l,startColumn:c,tokenTypeIdx:s,tokenType:o}}createFullToken(e,t,s,o,l,c,f){return{image:e,startOffset:t,endOffset:t+f-1,startLine:l,endLine:l,startColumn:c,endColumn:c+f-1,tokenTypeIdx:s,tokenType:o}}addTokenUsingPush(e,t,s){return e.push(s),t}addTokenUsingMemberAccess(e,t,s){return e[t]=s,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,s){return e.test(t)===!0?t.substring(s,e.lastIndex):null}matchWithExec(e,t){const s=e.exec(t);return s!==null?s[0]:null}}dt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";dt.NA=/NOT_APPLICABLE/;function Ts(r){return ty(r)?r.LABEL:r.name}function ty(r){return kt(r.LABEL)&&r.LABEL!==""}const G1="parent",hm="categories",pm="label",mm="group",gm="push_mode",ym="pop_mode",vm="longer_alt",Em="line_breaks",Sm="start_chars_hint";function pe(r){return H1(r)}function H1(r){const e=r.pattern,t={};if(t.name=r.name,bn(e)||(t.PATTERN=e),se(r,G1))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return se(r,hm)&&(t.CATEGORIES=r[hm]),js([t]),se(r,pm)&&(t.LABEL=r[pm]),se(r,mm)&&(t.GROUP=r[mm]),se(r,ym)&&(t.POP_MODE=r[ym]),se(r,gm)&&(t.PUSH_MODE=r[gm]),se(r,vm)&&(t.LONGER_ALT=r[vm]),se(r,Em)&&(t.LINE_BREAKS=r[Em]),se(r,Sm)&&(t.START_CHARS_HINT=r[Sm]),t}const Lr=pe({name:"EOF",pattern:dt.NA});js([Lr]);function sf(r,e,t,s,o,l,c,f){return{image:e,startOffset:t,endOffset:s,startLine:o,endLine:l,startColumn:c,endColumn:f,tokenTypeIdx:r.tokenTypeIdx,tokenType:r}}function K1(r,e){return Ms(r,e)}const ny={buildMismatchTokenMessage({expected:r,actual:e,previous:t,ruleName:s}){return`Expecting ${ty(r)?`--> ${Ts(r)} <--`:`token of type --> ${r.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:r,ruleName:e}){return"Redundant input, expecting EOF but found: "+r.image},buildNoViableAltMessage({expectedPathsPerAlt:r,actual:e,previous:t,customUserDescription:s,ruleName:o}){const l="Expecting: ",f=`
but found: '`+ln(e).image+"'";if(s)return l+s+f;{const h=bt(r,(E,T)=>E.concat(T),[]),m=ee(h,E=>`[${ee(E,T=>Ts(T)).join(", ")}]`),y=`one of these possible Token sequences:
${ee(m,(E,T)=>`  ${T+1}. ${E}`).join(`
`)}`;return l+y+f}},buildEarlyExitMessage({expectedIterationPaths:r,actual:e,customUserDescription:t,ruleName:s}){const o="Expecting: ",c=`
but found: '`+ln(e).image+"'";if(t)return o+t+c;{const h=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(r,m=>`[${ee(m,g=>Ts(g)).join(",")}]`).join(" ,")}>`;return o+h+c}}};Object.freeze(ny);const Y1={buildRuleNotFoundError(r,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+r.name+"<-"}},Rr={buildDuplicateFoundError(r,e){function t(g){return g instanceof Fe?g.terminalType.name:g instanceof Mt?g.nonTerminalName:""}const s=r.name,o=ln(e),l=o.idx,c=yn(o),f=t(o),h=l>0;let m=`->${c}${h?l:""}<- ${f?`with argument: ->${f}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return m=m.replace(/[ \t]+/g," "),m=m.replace(/\s\s+/g,`
`),m},buildNamespaceConflictError(r){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${r.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(r){const e=ee(r.prefixPath,o=>Ts(o)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;return`Ambiguous alternatives: <${r.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(r){const e=ee(r.prefixPath,o=>Ts(o)).join(", "),t=r.alternation.idx===0?"":r.alternation.idx;let s=`Ambiguous Alternatives Detected: <${r.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${r.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(r){let e=yn(r.repetition);return r.repetition.idx!==0&&(e+=r.repetition.idx),`The repetition <${e}> within Rule <${r.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(r){return"deprecated"},buildEmptyAlternationError(r){return`Ambiguous empty alternative: <${r.emptyChoiceIdx+1}> in <OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(r){return`An Alternation cannot have more than 256 alternatives:
<OR${r.alternation.idx}> inside <${r.topLevelRule.name}> Rule.
 has ${r.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(r){const e=r.topLevelRule.name,t=ee(r.leftRecursionPath,l=>l.name),s=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(r){return"deprecated"},buildDuplicateRuleNameError(r){let e;return r.topLevelRule instanceof Si?e=r.topLevelRule.name:e=r.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${r.grammarName}<-`}};function X1(r,e){const t=new q1(r,e);return t.resolveRefs(),t.errors}class q1 extends Ti{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ae(qe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:ht.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class Q1 extends Ba{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=st(this.path.ruleStack).reverse(),this.occurrenceStack=st(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const o=t.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,o)}}updateExpectedNext(){Ne(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Z1 extends Q1{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const o=t.concat(s),l=new At({definition:o});this.possibleTokTypes=bs(l),this.found=!0}}}class Va extends Ba{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class J1 extends Va{walkMany(e,t,s){if(e.idx===this.occurrence){const o=ln(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkMany(e,t,s)}}class Tm extends Va{walkManySep(e,t,s){if(e.idx===this.occurrence){const o=ln(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkManySep(e,t,s)}}class eR extends Va{walkAtLeastOne(e,t,s){if(e.idx===this.occurrence){const o=ln(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOne(e,t,s)}}class km extends Va{walkAtLeastOneSep(e,t,s){if(e.idx===this.occurrence){const o=ln(t.concat(s));this.result.isEndOfRule=o===void 0,o instanceof Fe&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOneSep(e,t,s)}}function yc(r,e,t=[]){t=st(t);let s=[],o=0;function l(f){return f.concat(it(r,o+1))}function c(f){const h=yc(l(f),e,t);return s.concat(h)}for(;t.length<e&&o<r.length;){const f=r[o];if(f instanceof At)return c(f.definition);if(f instanceof Mt)return c(f.definition);if(f instanceof Tt)s=c(f.definition);else if(f instanceof An){const h=f.definition.concat([new Qe({definition:f.definition})]);return c(h)}else if(f instanceof xn){const h=[new At({definition:f.definition}),new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})];return c(h)}else if(f instanceof cn){const h=f.definition.concat([new Qe({definition:[new Fe({terminalType:f.separator})].concat(f.definition)})]);s=c(h)}else if(f instanceof Qe){const h=f.definition.concat([new Qe({definition:f.definition})]);s=c(h)}else{if(f instanceof fn)return ae(f.definition,h=>{Ne(h.definition)===!1&&(s=c(h.definition))}),s;if(f instanceof Fe)t.push(f.terminalType);else throw Error("non exhaustive match")}o++}return s.push({partialPath:t,suffixDef:it(r,o)}),s}function ry(r,e,t,s){const o="EXIT_NONE_TERMINAL",l=[o],c="EXIT_ALTERNATIVE";let f=!1;const h=e.length,m=h-s-1,g=[],y=[];for(y.push({idx:-1,def:r,ruleStack:[],occurrenceStack:[]});!Ne(y);){const E=y.pop();if(E===c){f&&_r(y).idx<=m&&y.pop();continue}const T=E.def,w=E.idx,R=E.ruleStack,j=E.occurrenceStack;if(Ne(T))continue;const M=T[0];if(M===o){const _={idx:w,def:it(T),ruleStack:Rs(R),occurrenceStack:Rs(j)};y.push(_)}else if(M instanceof Fe)if(w<h-1){const _=w+1,P=e[_];if(t(P,M.terminalType)){const b={idx:_,def:it(T),ruleStack:R,occurrenceStack:j};y.push(b)}}else if(w===h-1)g.push({nextTokenType:M.terminalType,nextTokenOccurrence:M.idx,ruleStack:R,occurrenceStack:j}),f=!0;else throw Error("non exhaustive match");else if(M instanceof Mt){const _=st(R);_.push(M.nonTerminalName);const P=st(j);P.push(M.idx);const b={idx:w,def:M.definition.concat(l,it(T)),ruleStack:_,occurrenceStack:P};y.push(b)}else if(M instanceof Tt){const _={idx:w,def:it(T),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P={idx:w,def:M.definition.concat(it(T)),ruleStack:R,occurrenceStack:j};y.push(P)}else if(M instanceof An){const _=new Qe({definition:M.definition,idx:M.idx}),P=M.definition.concat([_],it(T)),b={idx:w,def:P,ruleStack:R,occurrenceStack:j};y.push(b)}else if(M instanceof xn){const _=new Fe({terminalType:M.separator}),P=new Qe({definition:[_].concat(M.definition),idx:M.idx}),b=M.definition.concat([P],it(T)),z={idx:w,def:b,ruleStack:R,occurrenceStack:j};y.push(z)}else if(M instanceof cn){const _={idx:w,def:it(T),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Fe({terminalType:M.separator}),b=new Qe({definition:[P].concat(M.definition),idx:M.idx}),z=M.definition.concat([b],it(T)),L={idx:w,def:z,ruleStack:R,occurrenceStack:j};y.push(L)}else if(M instanceof Qe){const _={idx:w,def:it(T),ruleStack:R,occurrenceStack:j};y.push(_),y.push(c);const P=new Qe({definition:M.definition,idx:M.idx}),b=M.definition.concat([P],it(T)),z={idx:w,def:b,ruleStack:R,occurrenceStack:j};y.push(z)}else if(M instanceof fn)for(let _=M.definition.length-1;_>=0;_--){const P=M.definition[_],b={idx:w,def:P.definition.concat(it(T)),ruleStack:R,occurrenceStack:j};y.push(b),y.push(c)}else if(M instanceof At)y.push({idx:w,def:M.definition.concat(it(T)),ruleStack:R,occurrenceStack:j});else if(M instanceof Si)y.push(tR(M,w,R,j));else throw Error("non exhaustive match")}return g}function tR(r,e,t,s){const o=st(t);o.push(r.name);const l=st(s);return l.push(1),{idx:e,def:r.definition,ruleStack:o,occurrenceStack:l}}var Be;(function(r){r[r.OPTION=0]="OPTION",r[r.REPETITION=1]="REPETITION",r[r.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",r[r.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",r[r.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",r[r.ALTERNATION=5]="ALTERNATION"})(Be||(Be={}));function iy(r){if(r instanceof Tt||r==="Option")return Be.OPTION;if(r instanceof Qe||r==="Repetition")return Be.REPETITION;if(r instanceof An||r==="RepetitionMandatory")return Be.REPETITION_MANDATORY;if(r instanceof xn||r==="RepetitionMandatoryWithSeparator")return Be.REPETITION_MANDATORY_WITH_SEPARATOR;if(r instanceof cn||r==="RepetitionWithSeparator")return Be.REPETITION_WITH_SEPARATOR;if(r instanceof fn||r==="Alternation")return Be.ALTERNATION;throw Error("non exhaustive match")}function nR(r,e,t,s,o,l){const c=of(r,e,t),f=ay(c)?ka:Ms;return l(c,s,f,o)}function rR(r,e,t,s,o,l){const c=af(r,e,o,t),f=ay(c)?ka:Ms;return l(c[0],f,s)}function iR(r,e,t,s){const o=r.length,l=on(r,c=>on(c,f=>f.length===1));if(e)return function(c){const f=ee(c,h=>h.GATE);for(let h=0;h<o;h++){const m=r[h],g=m.length,y=f[h];if(!(y!==void 0&&y.call(this)===!1))e:for(let E=0;E<g;E++){const T=m[E],w=T.length;for(let R=0;R<w;R++){const j=this.LA(R+1);if(t(j,T[R])===!1)continue e}return h}}};if(l&&!s){const c=ee(r,h=>sn(h)),f=bt(c,(h,m,g)=>(ae(m,y=>{se(h,y.tokenTypeIdx)||(h[y.tokenTypeIdx]=g),ae(y.categoryMatches,E=>{se(h,E)||(h[E]=g)})}),h),{});return function(){const h=this.LA(1);return f[h.tokenTypeIdx]}}else return function(){for(let c=0;c<o;c++){const f=r[c],h=f.length;e:for(let m=0;m<h;m++){const g=f[m],y=g.length;for(let E=0;E<y;E++){const T=this.LA(E+1);if(t(T,g[E])===!1)continue e}return c}}}}function sR(r,e,t){const s=on(r,l=>l.length===1),o=r.length;if(s&&!t){const l=sn(r);if(l.length===1&&Ne(l[0].categoryMatches)){const f=l[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===f}}else{const c=bt(l,(f,h,m)=>(f[h.tokenTypeIdx]=!0,ae(h.categoryMatches,g=>{f[g]=!0}),f),[]);return function(){const f=this.LA(1);return c[f.tokenTypeIdx]===!0}}}else return function(){e:for(let l=0;l<o;l++){const c=r[l],f=c.length;for(let h=0;h<f;h++){const m=this.LA(h+1);if(e(m,c[h])===!1)continue e}return!0}return!1}}class oR extends Ba{constructor(e,t,s){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,s,o){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=s.concat(o),!0):!1}walkOption(e,t,s){this.checkIsTarget(e,Be.OPTION,t,s)||super.walkOption(e,t,s)}walkAtLeastOne(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY,t,s)||super.walkOption(e,t,s)}walkAtLeastOneSep(e,t,s){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}walkMany(e,t,s){this.checkIsTarget(e,Be.REPETITION,t,s)||super.walkOption(e,t,s)}walkManySep(e,t,s){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}}class sy extends Ti{constructor(e,t,s){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=s,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Be.OPTION)}visitRepetition(e){this.checkIsTarget(e,Be.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Be.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Be.ALTERNATION)}}function Am(r){const e=new Array(r);for(let t=0;t<r;t++)e[t]=[];return e}function ic(r){let e=[""];for(let t=0;t<r.length;t++){const s=r[t],o=[];for(let l=0;l<e.length;l++){const c=e[l];o.push(c+"_"+s.tokenTypeIdx);for(let f=0;f<s.categoryMatches.length;f++){const h="_"+s.categoryMatches[f];o.push(c+h)}}e=o}return e}function aR(r,e,t){for(let s=0;s<r.length;s++){if(s===t)continue;const o=r[s];for(let l=0;l<e.length;l++){const c=e[l];if(o[c]===!0)return!1}}return!0}function oy(r,e){const t=ee(r,c=>yc([c],1)),s=Am(t.length),o=ee(t,c=>{const f={};return ae(c,h=>{const m=ic(h.partialPath);ae(m,g=>{f[g]=!0})}),f});let l=t;for(let c=1;c<=e;c++){const f=l;l=Am(f.length);for(let h=0;h<f.length;h++){const m=f[h];for(let g=0;g<m.length;g++){const y=m[g].partialPath,E=m[g].suffixDef,T=ic(y);if(aR(o,T,h)||Ne(E)||y.length===e){const R=s[h];if(vc(R,y)===!1){R.push(y);for(let j=0;j<T.length;j++){const M=T[j];o[h][M]=!0}}}else{const R=yc(E,c+1,y);l[h]=l[h].concat(R),ae(R,j=>{const M=ic(j.partialPath);ae(M,_=>{o[h][_]=!0})})}}}}return s}function of(r,e,t,s){const o=new sy(r,Be.ALTERNATION,s);return e.accept(o),oy(o.result,t)}function af(r,e,t,s){const o=new sy(r,t);e.accept(o);const l=o.result,f=new oR(e,r,t).startWalking(),h=new At({definition:l}),m=new At({definition:f});return oy([h,m],s)}function vc(r,e){e:for(let t=0;t<r.length;t++){const s=r[t];if(s.length===e.length){for(let o=0;o<s.length;o++){const l=e[o],c=s[o];if((l===c||c.categoryMatchesMap[l.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function lR(r,e){return r.length<e.length&&on(r,(t,s)=>{const o=e[s];return t===o||o.categoryMatchesMap[t.tokenTypeIdx]})}function ay(r){return on(r,e=>on(e,t=>on(t,s=>Ne(s.categoryMatches))))}function uR(r){const e=r.lookaheadStrategy.validate({rules:r.rules,tokenTypes:r.tokenTypes,grammarName:r.grammarName});return ee(e,t=>Object.assign({type:ht.CUSTOM_LOOKAHEAD_VALIDATION},t))}function cR(r,e,t,s){const o=Ht(r,h=>fR(h,t)),l=AR(r,e,t),c=Ht(r,h=>ER(h,t)),f=Ht(r,h=>pR(h,r,s,t));return o.concat(l,c,f)}function fR(r,e){const t=new hR;r.accept(t);const s=t.allProductions,o=AC(s,dR),l=un(o,f=>f.length>1);return ee(qe(l),f=>{const h=ln(f),m=e.buildDuplicateFoundError(r,f),g=yn(h),y={message:m,type:ht.DUPLICATE_PRODUCTIONS,ruleName:r.name,dslName:g,occurrence:h.idx},E=ly(h);return E&&(y.parameter=E),y})}function dR(r){return`${yn(r)}_#_${r.idx}_#_${ly(r)}`}function ly(r){return r instanceof Fe?r.terminalType.name:r instanceof Mt?r.nonTerminalName:""}class hR extends Ti{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function pR(r,e,t,s){const o=[];if(bt(e,(c,f)=>f.name===r.name?c+1:c,0)>1){const c=s.buildDuplicateRuleNameError({topLevelRule:r,grammarName:t});o.push({message:c,type:ht.DUPLICATE_RULE_NAME,ruleName:r.name})}return o}function mR(r,e,t){const s=[];let o;return pt(e,r)||(o=`Invalid rule override, rule: ->${r}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,s.push({message:o,type:ht.INVALID_RULE_OVERRIDE,ruleName:r})),s}function uy(r,e,t,s=[]){const o=[],l=la(e.definition);if(Ne(l))return[];{const c=r.name;pt(l,r)&&o.push({message:t.buildLeftRecursionError({topLevelRule:r,leftRecursionPath:s}),type:ht.LEFT_RECURSION,ruleName:c});const h=Ua(l,s.concat([r])),m=Ht(h,g=>{const y=st(s);return y.push(g),uy(r,g,t,y)});return o.concat(m)}}function la(r){let e=[];if(Ne(r))return e;const t=ln(r);if(t instanceof Mt)e.push(t.referencedRule);else if(t instanceof At||t instanceof Tt||t instanceof An||t instanceof xn||t instanceof cn||t instanceof Qe)e=e.concat(la(t.definition));else if(t instanceof fn)e=sn(ee(t.definition,l=>la(l.definition)));else if(!(t instanceof Fe))throw Error("non exhaustive match");const s=va(t),o=r.length>1;if(s&&o){const l=it(r);return e.concat(la(l))}else return e}class lf extends Ti{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function gR(r,e){const t=new lf;r.accept(t);const s=t.alternations;return Ht(s,l=>{const c=Rs(l.definition);return Ht(c,(f,h)=>{const m=ry([f],[],Ms,1);return Ne(m)?[{message:e.buildEmptyAlternationError({topLevelRule:r,alternation:l,emptyChoiceIdx:h}),type:ht.NONE_LAST_EMPTY_ALT,ruleName:r.name,occurrence:l.idx,alternative:h+1}]:[]})})}function yR(r,e,t){const s=new lf;r.accept(s);let o=s.alternations;return o=Da(o,c=>c.ignoreAmbiguities===!0),Ht(o,c=>{const f=c.idx,h=c.maxLookahead||e,m=of(f,r,h,c),g=TR(m,c,r,t),y=kR(m,c,r,t);return g.concat(y)})}class vR extends Ti{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function ER(r,e){const t=new lf;r.accept(t);const s=t.alternations;return Ht(s,l=>l.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:r,alternation:l}),type:ht.TOO_MANY_ALTS,ruleName:r.name,occurrence:l.idx}]:[])}function SR(r,e,t){const s=[];return ae(r,o=>{const l=new vR;o.accept(l);const c=l.allProductions;ae(c,f=>{const h=iy(f),m=f.maxLookahead||e,g=f.idx,E=af(g,o,h,m)[0];if(Ne(sn(E))){const T=t.buildEmptyRepetitionError({topLevelRule:o,repetition:f});s.push({message:T,type:ht.NO_NON_EMPTY_LOOKAHEAD,ruleName:o.name})}})}),s}function TR(r,e,t,s){const o=[],l=bt(r,(f,h,m)=>(e.definition[m].ignoreAmbiguities===!0||ae(h,g=>{const y=[m];ae(r,(E,T)=>{m!==T&&vc(E,g)&&e.definition[T].ignoreAmbiguities!==!0&&y.push(T)}),y.length>1&&!vc(o,g)&&(o.push(g),f.push({alts:y,path:g}))}),f),[]);return ee(l,f=>{const h=ee(f.alts,g=>g+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:ht.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:f.alts}})}function kR(r,e,t,s){const o=bt(r,(c,f,h)=>{const m=ee(f,g=>({idx:h,path:g}));return c.concat(m)},[]);return Ls(Ht(o,c=>{if(e.definition[c.idx].ignoreAmbiguities===!0)return[];const h=c.idx,m=c.path,g=qt(o,E=>e.definition[E.idx].ignoreAmbiguities!==!0&&E.idx<h&&lR(E.path,m));return ee(g,E=>{const T=[E.idx+1,h+1],w=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:T,prefixPath:E.path}),type:ht.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:w,alternatives:T}})}))}function AR(r,e,t){const s=[],o=ee(e,l=>l.name);return ae(r,l=>{const c=l.name;if(pt(o,c)){const f=t.buildNamespaceConflictError(l);s.push({message:f,type:ht.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:c})}}),s}function xR(r){const e=ef(r,{errMsgProvider:Y1}),t={};return ae(r.rules,s=>{t[s.name]=s}),X1(t,e.errMsgProvider)}function wR(r){return r=ef(r,{errMsgProvider:Rr}),cR(r.rules,r.tokenTypes,r.errMsgProvider,r.grammarName)}const cy="MismatchedTokenException",fy="NoViableAltException",dy="EarlyExitException",hy="NotAllInputParsedException",py=[cy,fy,dy,hy];Object.freeze(py);function Aa(r){return pt(py,r.name)}class Wa extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class my extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=cy}}class CR extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=fy}}class RR extends Wa{constructor(e,t){super(e,t),this.name=hy}}class NR extends Wa{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=dy}}const sc={},gy="InRuleRecoveryException";class IR extends Error{constructor(e){super(e),this.name=gy}}class OR{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=se(e,"recoveryEnabled")?e.recoveryEnabled:Mn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=_R)}getTokenToInsert(e){const t=sf(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,s,o){const l=this.findReSyncTokenType(),c=this.exportLexerState(),f=[];let h=!1;const m=this.LA(1);let g=this.LA(1);const y=()=>{const E=this.LA(0),T=this.errorMessageProvider.buildMismatchTokenMessage({expected:o,actual:m,previous:E,ruleName:this.getCurrRuleFullName()}),w=new my(T,m,this.LA(0));w.resyncedTokens=Rs(f),this.SAVE_ERROR(w)};for(;!h;)if(this.tokenMatcher(g,o)){y();return}else if(s.call(this)){y(),e.apply(this,t);return}else this.tokenMatcher(g,l)?h=!0:(g=this.SKIP_TOKEN(),this.addToResyncTokens(g,f));this.importLexerState(c)}shouldInRepetitionRecoveryBeTried(e,t,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const s=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new IR("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ne(t))return!1;const s=this.LA(1);return Ei(t,l=>this.tokenMatcher(s,l))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(t);return pt(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),s=2;for(;;){const o=Ei(e,l=>K1(t,l));if(o!==void 0)return o;t=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return sc;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return ee(e,(s,o)=>o===0?sc:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:t[o],inRule:this.shortRuleNameToFullName(e[o-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return sn(e)}getFollowSetFromFollowKey(e){if(e===sc)return[Lr];const t=e.ruleName+e.idxInCallingRule+Hg+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Lr)||t.push(e),t}reSyncTo(e){const t=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,t);return Rs(t)}attemptInRepetitionRecovery(e,t,s,o,l,c,f){}getCurrentGrammarPath(e,t){const s=this.getHumanReadableRuleStack(),o=st(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:o,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function _R(r,e,t,s,o,l,c){const f=this.getKeyForAutomaticLookahead(s,o);let h=this.firstAfterRepMap[f];if(h===void 0){const E=this.getCurrRuleFullName(),T=this.getGAstProductions()[E];h=new l(T,o).startWalking(),this.firstAfterRepMap[f]=h}let m=h.token,g=h.occurrence;const y=h.isEndOfRule;this.RULE_STACK.length===1&&y&&m===void 0&&(m=Lr,g=1),!(m===void 0||g===void 0)&&this.shouldInRepetitionRecoveryBeTried(m,g,c)&&this.tryInRepetitionRecovery(r,e,t,m)}const PR=4,fr=8,yy=1<<fr,vy=2<<fr,Ec=3<<fr,Sc=4<<fr,Tc=5<<fr,ua=6<<fr;function oc(r,e,t){return t|e|r}class LR{constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:Mn.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(Ne(t)){const s=this.validateEmptyOrAlternatives(e.rules),o=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),l=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...s,...o,...l]}return t}validateNoLeftRecursion(e){return Ht(e,t=>uy(t,t,Rr))}validateEmptyOrAlternatives(e){return Ht(e,t=>gR(t,Rr))}validateAmbiguousAlternationAlternatives(e,t){return Ht(e,s=>yR(s,t,Rr))}validateSomeNonEmptyLookaheadPath(e,t){return SR(e,t,Rr)}buildLookaheadForAlternation(e){return nR(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,iR)}buildLookaheadForOptional(e){return rR(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,iy(e.prodType),sR)}}class bR{initLooksAhead(e){this.dynamicTokensEnabled=se(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Mn.dynamicTokensEnabled,this.maxLookahead=se(e,"maxLookahead")?e.maxLookahead:Mn.maxLookahead,this.lookaheadStrategy=se(e,"lookaheadStrategy")?e.lookaheadStrategy:new LR({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ae(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:s,repetition:o,option:l,repetitionMandatory:c,repetitionMandatoryWithSeparator:f,repetitionWithSeparator:h}=jR(t);ae(s,m=>{const g=m.idx===0?"":m.idx;this.TRACE_INIT(`${yn(m)}${g}`,()=>{const y=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:m.idx,rule:t,maxLookahead:m.maxLookahead||this.maxLookahead,hasPredicates:m.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),E=oc(this.fullRuleNameToShort[t.name],yy,m.idx);this.setLaFuncCache(E,y)})}),ae(o,m=>{this.computeLookaheadFunc(t,m.idx,Ec,"Repetition",m.maxLookahead,yn(m))}),ae(l,m=>{this.computeLookaheadFunc(t,m.idx,vy,"Option",m.maxLookahead,yn(m))}),ae(c,m=>{this.computeLookaheadFunc(t,m.idx,Sc,"RepetitionMandatory",m.maxLookahead,yn(m))}),ae(f,m=>{this.computeLookaheadFunc(t,m.idx,ua,"RepetitionMandatoryWithSeparator",m.maxLookahead,yn(m))}),ae(h,m=>{this.computeLookaheadFunc(t,m.idx,Tc,"RepetitionWithSeparator",m.maxLookahead,yn(m))})})})}computeLookaheadFunc(e,t,s,o,l,c){this.TRACE_INIT(`${c}${t===0?"":t}`,()=>{const f=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:l||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:o}),h=oc(this.fullRuleNameToShort[e.name],s,t);this.setLaFuncCache(h,f)})}getKeyForAutomaticLookahead(e,t){const s=this.getLastExplicitRuleShortName();return oc(s,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class MR extends Ti{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const ta=new MR;function jR(r){ta.reset(),r.accept(ta);const e=ta.dslMethods;return ta.reset(),e}function xm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.endOffset=e.endOffset):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset)}function wm(r,e){isNaN(r.startOffset)===!0?(r.startOffset=e.startOffset,r.startColumn=e.startColumn,r.startLine=e.startLine,r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine):r.endOffset<e.endOffset&&(r.endOffset=e.endOffset,r.endColumn=e.endColumn,r.endLine=e.endLine)}function FR(r,e,t){r.children[t]===void 0?r.children[t]=[e]:r.children[t].push(e)}function $R(r,e,t){r.children[e]===void 0?r.children[e]=[t]:r.children[e].push(t)}const UR="name";function Ey(r,e){Object.defineProperty(r,UR,{enumerable:!1,configurable:!0,writable:!1,value:e})}function DR(r,e){const t=Xt(r),s=t.length;for(let o=0;o<s;o++){const l=t[o],c=r[l],f=c.length;for(let h=0;h<f;h++){const m=c[h];m.tokenTypeIdx===void 0&&this[m.name](m.children,e)}}}function BR(r,e){const t=function(){};Ey(t,r+"BaseSemantics");const s={visit:function(o,l){if(Te(o)&&(o=o[0]),!bn(o))return this[o.name](o.children,l)},validateVisitor:function(){const o=VR(this,e);if(!Ne(o)){const l=ee(o,c=>c.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${l.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=s,t.prototype.constructor=t,t._RULE_NAMES=e,t}function zR(r,e,t){const s=function(){};Ey(s,r+"BaseSemanticsWithDefaults");const o=Object.create(t.prototype);return ae(e,l=>{o[l]=DR}),s.prototype=o,s.prototype.constructor=s,s}var kc;(function(r){r[r.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",r[r.MISSING_METHOD=1]="MISSING_METHOD"})(kc||(kc={}));function VR(r,e){return WR(r,e)}function WR(r,e){const t=qt(e,o=>jn(r[o])===!1),s=ee(t,o=>({msg:`Missing visitor method: <${o}> on ${r.constructor.name} CST Visitor.`,type:kc.MISSING_METHOD,methodName:o}));return Ls(s)}class GR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=se(e,"nodeLocationTracking")?e.nodeLocationTracking:Mn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Xe,this.cstFinallyStateUpdate=Xe,this.cstPostTerminal=Xe,this.cstPostNonTerminal=Xe,this.cstPostRule=Xe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=wm,this.setNodeLocationFromNode=wm,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=xm,this.setNodeLocationFromNode=xm,this.cstPostRule=Xe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Xe,this.setNodeLocationFromNode=Xe,this.cstPostRule=Xe,this.setInitialNodeLocation=Xe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?(s.endOffset=t.endOffset,s.endLine=t.endLine,s.endColumn=t.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?s.endOffset=t.endOffset:s.startOffset=NaN}cstPostTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];FR(s,t,e),this.setNodeLocationFromToken(s.location,t)}cstPostNonTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];$R(s,t,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(bn(this.baseCstVisitorConstructor)){const e=BR(this.className,Xt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(bn(this.baseCstVisitorWithDefaultsConstructor)){const e=zR(this.className,Xt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class HR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):wa}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?wa:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class KR{ACTION(e){return e.call(this)}consume(e,t,s){return this.consumeInternal(t,e,s)}subrule(e,t,s){return this.subruleInternal(t,e,s)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,s=Ca){if(pt(this.definedRulesNames,e)){const c={message:Rr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ht.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(c)}this.definedRulesNames.push(e);const o=this.defineRule(e,t,s);return this[e]=o,o}OVERRIDE_RULE(e,t,s=Ca){const o=mR(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(o);const l=this.defineRule(e,t,s);return this[e]=l,l}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,t),!0}catch(o){if(Aa(o))return!1;throw o}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return YC(qe(this.gastProductionsCache))}}class YR{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=ka,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},se(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Te(e)){if(Ne(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Te(e))this.tokensMap=bt(e,(l,c)=>(l[c.name]=c,l),{});else if(se(e,"modes")&&on(sn(qe(e.modes)),V1)){const l=sn(qe(e.modes)),c=tf(l);this.tokensMap=bt(c,(f,h)=>(f[h.name]=h,f),{})}else if(Yt(e))this.tokensMap=st(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Lr;const s=se(e,"modes")?sn(qe(e.modes)):qe(e),o=on(s,l=>Ne(l.categoryMatches));this.tokenMatcher=o?ka:Ms,js(qe(this.tokensMap))}defineRule(e,t,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const o=se(s,"resyncEnabled")?s.resyncEnabled:Ca.resyncEnabled,l=se(s,"recoveryValueFunc")?s.recoveryValueFunc:Ca.recoveryValueFunc,c=this.ruleShortNameIdx<<PR+fr;this.ruleShortNameIdx++,this.shortRuleNameToFull[c]=e,this.fullRuleNameToShort[e]=c;let f;return this.outputCst===!0?f=function(...g){try{this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g);const y=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(y),y}catch(y){return this.invokeRuleCatch(y,o,l)}finally{this.ruleFinallyStateUpdate()}}:f=function(...g){try{return this.ruleInvocationStateUpdate(c,e,this.subruleIdx),t.apply(this,g)}catch(y){return this.invokeRuleCatch(y,o,l)}finally{this.ruleFinallyStateUpdate()}},Object.assign(f,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,s){const o=this.RULE_STACK.length===1,l=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Aa(e)){const c=e;if(l){const f=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(f))if(c.resyncedTokens=this.reSyncTo(f),this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];return h.recoveredNode=!0,h}else return s(e);else{if(this.outputCst){const h=this.CST_STACK[this.CST_STACK.length-1];h.recoveredNode=!0,c.partialCstResult=h}throw c}}else{if(o)return this.moveToTerminatedState(),s(e);throw c}}else throw e}optionInternal(e,t){const s=this.getKeyForAutomaticLookahead(vy,t);return this.optionInternalLogic(e,t,s)}optionInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof e!="function"){l=e.DEF;const c=e.GATE;if(c!==void 0){const f=o;o=()=>c.call(this)&&f.call(this)}}else l=e;if(o.call(this)===!0)return l.call(this)}atLeastOneInternal(e,t){const s=this.getKeyForAutomaticLookahead(Sc,e);return this.atLeastOneInternalLogic(e,t,s)}atLeastOneInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const c=t.GATE;if(c!==void 0){const f=o;o=()=>c.call(this)&&f.call(this)}}else l=t;if(o.call(this)===!0){let c=this.doSingleRepetition(l);for(;o.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],o,Sc,e,eR)}atLeastOneSepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(ua,e);this.atLeastOneSepFirstInternalLogic(e,t,s)}atLeastOneSepFirstInternalLogic(e,t,s){const o=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){o.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,o,km],f,ua,e,km)}else throw this.raiseEarlyExitException(e,Be.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const s=this.getKeyForAutomaticLookahead(Ec,e);return this.manyInternalLogic(e,t,s)}manyInternalLogic(e,t,s){let o=this.getLaFuncFromCache(s),l;if(typeof t!="function"){l=t.DEF;const f=t.GATE;if(f!==void 0){const h=o;o=()=>f.call(this)&&h.call(this)}}else l=t;let c=!0;for(;o.call(this)===!0&&c===!0;)c=this.doSingleRepetition(l);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],o,Ec,e,J1,c)}manySepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(Tc,e);this.manySepFirstInternalLogic(e,t,s)}manySepFirstInternalLogic(e,t,s){const o=t.DEF,l=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){o.call(this);const f=()=>this.tokenMatcher(this.LA(1),l);for(;this.tokenMatcher(this.LA(1),l)===!0;)this.CONSUME(l),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,l,f,o,Tm],f,Tc,e,Tm)}}repetitionSepSecondInternal(e,t,s,o,l){for(;s();)this.CONSUME(t),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,s,o,l],s,ua,e,l)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const s=this.getKeyForAutomaticLookahead(yy,t),o=Te(e)?e:e.DEF,c=this.getLaFuncFromCache(s).call(this,o);if(c!==void 0)return o[c].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new RR(t,e))}}subruleInternal(e,t,s){let o;try{const l=s!==void 0?s.ARGS:void 0;return this.subruleIdx=t,o=e.apply(this,l),this.cstPostNonTerminal(o,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),o}catch(l){throw this.subruleInternalError(l,s,e.ruleName)}}subruleInternalError(e,t,s){throw Aa(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,t,s){let o;try{const l=this.LA(1);this.tokenMatcher(l,e)===!0?(this.consumeToken(),o=l):this.consumeInternalError(e,l,s)}catch(l){o=this.consumeInternalRecovery(e,t,l)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,o),o}consumeInternalError(e,t,s){let o;const l=this.LA(0);throw s!==void 0&&s.ERR_MSG?o=s.ERR_MSG:o=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:l,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new my(o,t,l))}consumeInternalRecovery(e,t,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const o=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,o)}catch(l){throw l.name===gy?s:l}}else throw s}saveRecogState(){const e=this.errors,t=st(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Lr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class XR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=se(e,"errorMessageProvider")?e.errorMessageProvider:Mn.errorMessageProvider}SAVE_ERROR(e){if(Aa(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:st(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return st(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,s){const o=this.getCurrRuleFullName(),l=this.getGAstProductions()[o],f=af(e,l,t,this.maxLookahead)[0],h=[];for(let g=1;g<=this.maxLookahead;g++)h.push(this.LA(g));const m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:h,previous:this.LA(0),customUserDescription:s,ruleName:o});throw this.SAVE_ERROR(new NR(m,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const s=this.getCurrRuleFullName(),o=this.getGAstProductions()[s],l=of(e,o,this.maxLookahead),c=[];for(let m=1;m<=this.maxLookahead;m++)c.push(this.LA(m));const f=this.LA(0),h=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:l,actual:c,previous:f,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new CR(h,this.LA(1),f))}}class qR{initContentAssist(){}computeContentAssist(e,t){const s=this.gastProductionsCache[e];if(bn(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return ry([s],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=ln(e.ruleStack),o=this.getGAstProductions()[t];return new Z1(o,e).startWalking()}}const Ga={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ga);const Cm=!0,Rm=Math.pow(2,fr)-1,Sy=pe({name:"RECORDING_PHASE_TOKEN",pattern:dt.NA});js([Sy]);const Ty=sf(Sy,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Ty);const QR={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class ZR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(s,o){return this.consumeInternalRecord(s,e,o)},this[`SUBRULE${t}`]=function(s,o){return this.subruleInternalRecord(s,e,o)},this[`OPTION${t}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${t}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${t}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${t}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${t}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${t}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,t,s){return this.consumeInternalRecord(t,e,s)},this.subrule=function(e,t,s){return this.subruleInternalRecord(t,e,s)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const s=t>0?t:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return wa}topLevelRuleRecord(e,t){try{const s=new Si({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),t.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,t){return ds.call(this,Tt,e,t)}atLeastOneInternalRecord(e,t){ds.call(this,An,t,e)}atLeastOneSepFirstInternalRecord(e,t){ds.call(this,xn,t,e,Cm)}manyInternalRecord(e,t){ds.call(this,Qe,t,e)}manySepFirstInternalRecord(e,t){ds.call(this,cn,t,e,Cm)}orInternalRecord(e,t){return JR.call(this,e,t)}subruleInternalRecord(e,t,s){if(xa(t),!e||se(e,"ruleName")===!1){const f=new Error(`<SUBRULE${Nm(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw f.KNOWN_RECORDER_ERROR=!0,f}const o=_r(this.recordingProdStack),l=e.ruleName,c=new Mt({idx:t,nonTerminalName:l,label:s?.LABEL,referencedRule:void 0});return o.definition.push(c),this.outputCst?QR:Ga}consumeInternalRecord(e,t,s){if(xa(t),!ey(e)){const c=new Error(`<CONSUME${Nm(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw c.KNOWN_RECORDER_ERROR=!0,c}const o=_r(this.recordingProdStack),l=new Fe({idx:t,terminalType:e,label:s?.LABEL});return o.definition.push(l),Ty}}function ds(r,e,t,s=!1){xa(t);const o=_r(this.recordingProdStack),l=jn(e)?e:e.DEF,c=new r({definition:[],idx:t});return s&&(c.separator=e.SEP),se(e,"MAX_LOOKAHEAD")&&(c.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(c),l.call(this),o.definition.push(c),this.recordingProdStack.pop(),Ga}function JR(r,e){xa(e);const t=_r(this.recordingProdStack),s=Te(r)===!1,o=s===!1?r:r.DEF,l=new fn({definition:[],idx:e,ignoreAmbiguities:s&&r.IGNORE_AMBIGUITIES===!0});se(r,"MAX_LOOKAHEAD")&&(l.maxLookahead=r.MAX_LOOKAHEAD);const c=zg(o,f=>jn(f.GATE));return l.hasPredicates=c,t.definition.push(l),ae(o,f=>{const h=new At({definition:[]});l.definition.push(h),se(f,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=f.IGNORE_AMBIGUITIES:se(f,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),f.ALT.call(this),this.recordingProdStack.pop()}),Ga}function Nm(r){return r===0?"":`${r}`}function xa(r){if(r<0||r>Rm){const e=new Error(`Invalid DSL Method idx value: <${r}>
	Idx value must be a none negative value smaller than ${Rm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class eN{initPerformanceTracer(e){if(se(e,"traceInitPerf")){const t=e.traceInitPerf,s=typeof t=="number";this.traceInitMaxIdent=s?t:1/0,this.traceInitPerf=s?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=Mn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:o,value:l}=Wg(t),c=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${e}> time: ${o}ms`),this.traceInitIndent--,l}else return t()}}function tN(r,e){e.forEach(t=>{const s=t.prototype;Object.getOwnPropertyNames(s).forEach(o=>{if(o==="constructor")return;const l=Object.getOwnPropertyDescriptor(s,o);l&&(l.get||l.set)?Object.defineProperty(r.prototype,o,l):r.prototype[o]=t.prototype[o]})})}const wa=sf(Lr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(wa);const Mn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ny,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ca=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ht;(function(r){r[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",r[r.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ht||(ht={}));class Fs{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Gg(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ae(this.definedRulesNames,o=>{const c=this[o].originalGrammarAction;let f;this.TRACE_INIT(`${o} Rule`,()=>{f=this.topLevelRuleRecord(o,c)}),this.gastProductionsCache[o]=f})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=xR({rules:qe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ne(s)&&this.skipValidations===!1){const o=wR({rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),errMsgProvider:Rr,grammarName:t}),l=uR({lookaheadStrategy:this.lookaheadStrategy,rules:qe(this.gastProductionsCache),tokenTypes:qe(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(o,l)}}),Ne(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const o=t1(qe(this.gastProductionsCache));this.resyncFollows=o}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var o,l;(l=(o=this.lookaheadStrategy).initialize)===null||l===void 0||l.call(o,{rules:qe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(qe(this.gastProductionsCache))})),!Fs.DEFER_DEFINITION_ERRORS_HANDLING&&!Ne(this.definitionErrors))throw e=ee(this.definitionErrors,o=>o.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(t),s.initLexerAdapter(),s.initLooksAhead(t),s.initRecognizerEngine(e,t),s.initRecoverable(t),s.initTreeBuilder(t),s.initContentAssist(),s.initGastRecorder(t),s.initPerformanceTracer(t),se(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=se(t,"skipValidations")?t.skipValidations:Mn.skipValidations}}Fs.DEFER_DEFINITION_ERRORS_HANDLING=!1;tN(Fs,[OR,bR,GR,HR,YR,KR,XR,qR,ZR,eN]);class nN extends Fs{constructor(e,t=Mn){const s=st(t);s.outputCst=!0,super(e,s)}}const rN=pe({name:"WhiteSpace",pattern:/[ \t\r\n]+/,group:dt.SKIPPED}),iN=pe({name:"LineComment",pattern:/#[^\n\r]*/,group:dt.SKIPPED}),Ac=pe({name:"TextBlock",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),ky=pe({name:"PathReference",pattern:/@[a-zA-Z_][a-zA-Z0-9_-]*\/[a-zA-Z0-9_/-]*(?:@\d+\.\d+\.\d+)?/}),Ay=pe({name:"RelativePath",pattern:/\.\/[a-zA-Z0-9_/-]+|\.\.\/[a-zA-Z0-9_/-]+/}),je=pe({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),xy=pe({name:"Meta",pattern:/meta/,longer_alt:je}),wy=pe({name:"Inherit",pattern:/inherit/,longer_alt:je}),Cy=pe({name:"Use",pattern:/use/,longer_alt:je}),Ry=pe({name:"As",pattern:/as/,longer_alt:je}),Ny=pe({name:"Extend",pattern:/extend/,longer_alt:je}),Iy=pe({name:"True",pattern:/true/,longer_alt:je}),Oy=pe({name:"False",pattern:/false/,longer_alt:je}),_y=pe({name:"Null",pattern:/null/,longer_alt:je}),Py=pe({name:"Range",pattern:/range/,longer_alt:je}),Ly=pe({name:"Enum",pattern:/enum/,longer_alt:je}),xc=pe({name:"StringType",pattern:/string/,longer_alt:je}),wc=pe({name:"NumberType",pattern:/number/,longer_alt:je}),Cc=pe({name:"BooleanType",pattern:/boolean/,longer_alt:je}),by=pe({name:"TemplateOpen",pattern:/\{\{/}),My=pe({name:"TemplateClose",pattern:/\}\}/}),ui=pe({name:"At",pattern:/@/}),ci=pe({name:"LBrace",pattern:/\{/}),fi=pe({name:"RBrace",pattern:/\}/}),jy=pe({name:"LBracket",pattern:/\[/}),Fy=pe({name:"RBracket",pattern:/\]/}),ca=pe({name:"LParen",pattern:/\(/}),fa=pe({name:"RParen",pattern:/\)/}),da=pe({name:"Colon",pattern:/:/}),di=pe({name:"Comma",pattern:/,/}),Rc=pe({name:"Equals",pattern:/=/}),Nc=pe({name:"Question",pattern:/\?/}),$y=pe({name:"DotDot",pattern:/\.\./}),Uy=pe({name:"Dot",pattern:/\./}),Dy=pe({name:"Dash",pattern:/-(?!\d)/}),hi=pe({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),ha=pe({name:"NumberLiteral",pattern:/-?\d+(?:\.\d+)?/}),By=[rN,iN,Ac,ky,Ay,by,My,$y,xy,wy,Cy,Ry,Ny,Iy,Oy,_y,Py,Ly,xc,wc,Cc,ui,ci,fi,jy,Fy,ca,fa,da,di,Rc,Nc,Uy,Dy,hi,ha,je],sN=new dt(By,{ensureOptimizations:!0,positionTracking:"full"});class oN extends nN{constructor(){super(By,{recoveryEnabled:!0,maxLookahead:3,nodeLocationTracking:"full"}),this.performSelfAnalysis()}program=this.RULE("program",()=>{this.OPTION(()=>this.SUBRULE(this.metaBlock)),this.OPTION2(()=>this.SUBRULE(this.inheritDecl)),this.MANY(()=>this.SUBRULE(this.useDecl)),this.MANY2(()=>this.OR([{ALT:()=>this.SUBRULE(this.extendBlock)},{ALT:()=>this.SUBRULE(this.block)}]))});metaBlock=this.RULE("metaBlock",()=>{this.CONSUME(ui),this.CONSUME(xy),this.CONSUME(ci),this.MANY(()=>this.SUBRULE(this.field)),this.CONSUME(fi)});inheritDecl=this.RULE("inheritDecl",()=>{this.CONSUME(ui),this.CONSUME(wy),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList))});useDecl=this.RULE("useDecl",()=>{this.CONSUME(ui),this.CONSUME(Cy),this.SUBRULE(this.pathRef),this.OPTION(()=>this.SUBRULE(this.paramCallList)),this.OPTION2(()=>{this.CONSUME(Ry),this.CONSUME(je)})});block=this.RULE("block",()=>{this.CONSUME(ui),this.CONSUME(je),this.CONSUME(ci),this.SUBRULE(this.blockContent),this.CONSUME(fi)});extendBlock=this.RULE("extendBlock",()=>{this.CONSUME(ui),this.CONSUME(Ny),this.SUBRULE(this.dotPath),this.CONSUME(ci),this.SUBRULE(this.blockContent),this.CONSUME(fi)});blockContent=this.RULE("blockContent",()=>{this.MANY(()=>this.OR([{ALT:()=>this.CONSUME(Ac)},{ALT:()=>this.SUBRULE(this.restrictionItem)},{ALT:()=>this.SUBRULE(this.field)}]))});restrictionItem=this.RULE("restrictionItem",()=>{this.CONSUME(Dy),this.CONSUME(hi)});field=this.RULE("field",()=>{this.OR([{ALT:()=>this.CONSUME(je)},{ALT:()=>this.CONSUME(hi)},{ALT:()=>this.CONSUME(xc)},{ALT:()=>this.CONSUME(wc)},{ALT:()=>this.CONSUME(Cc)}]),this.OPTION(()=>this.CONSUME(Nc)),this.CONSUME(da),this.SUBRULE(this.value),this.OPTION2(()=>{this.CONSUME(Rc),this.SUBRULE2(this.value)})});value=this.RULE("value",()=>{this.OR([{ALT:()=>this.CONSUME(hi)},{ALT:()=>this.CONSUME(ha)},{ALT:()=>this.CONSUME(Iy)},{ALT:()=>this.CONSUME(Oy)},{ALT:()=>this.CONSUME(_y)},{ALT:()=>this.CONSUME(Ac)},{ALT:()=>this.SUBRULE(this.array)},{ALT:()=>this.SUBRULE(this.paramDefList),GATE:()=>this.isParamDefListAhead()},{ALT:()=>this.SUBRULE(this.object)},{ALT:()=>this.SUBRULE(this.typeExpr)},{ALT:()=>this.SUBRULE(this.templateExpr)},{ALT:()=>this.CONSUME(je)}])});isParamDefListAhead(){const e=this.LA(1);if(!e||e.tokenType?.name!=="LBrace")return!1;const t=this.LA(2);if(!t||t.tokenType?.name!=="Identifier")return!1;const s=this.LA(3);if(!s)return!1;if(s.tokenType?.name==="Colon"){const o=this.LA(4);return o?["StringType","NumberType","BooleanType","Enum"].includes(o.tokenType?.name??""):!1}if(s.tokenType?.name==="Question"){const o=this.LA(4);if(!o||o.tokenType?.name!=="Colon")return!1;const l=this.LA(5);return l?["StringType","NumberType","BooleanType","Enum"].includes(l.tokenType?.name??""):!1}return!1}array=this.RULE("array",()=>{this.CONSUME(jy),this.OPTION(()=>{this.SUBRULE(this.value),this.MANY(()=>{this.CONSUME(di),this.OPTION2(()=>this.SUBRULE2(this.value))})}),this.CONSUME(Fy)});object=this.RULE("object",()=>{this.CONSUME(ci),this.MANY(()=>{this.SUBRULE(this.field),this.OPTION(()=>this.CONSUME(di))}),this.CONSUME(fi)});typeExpr=this.RULE("typeExpr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.rangeType)},{ALT:()=>this.SUBRULE(this.enumType)}])});rangeType=this.RULE("rangeType",()=>{this.CONSUME(Py),this.CONSUME(ca),this.CONSUME(ha),this.CONSUME($y),this.CONSUME2(ha),this.CONSUME(fa)});enumType=this.RULE("enumType",()=>{this.CONSUME(Ly),this.CONSUME(ca),this.CONSUME(hi),this.MANY(()=>{this.CONSUME(di),this.CONSUME2(hi)}),this.CONSUME(fa)});pathRef=this.RULE("pathRef",()=>{this.OR([{ALT:()=>this.CONSUME(ky)},{ALT:()=>this.CONSUME(Ay)}])});dotPath=this.RULE("dotPath",()=>{this.CONSUME(je),this.MANY(()=>{this.CONSUME(Uy),this.CONSUME2(je)})});paramCallList=this.RULE("paramCallList",()=>{this.CONSUME(ca),this.OPTION(()=>{this.SUBRULE(this.paramArg),this.MANY(()=>{this.CONSUME(di),this.SUBRULE2(this.paramArg)})}),this.CONSUME(fa)});paramArg=this.RULE("paramArg",()=>{this.CONSUME(je),this.CONSUME(da),this.SUBRULE(this.value)});paramDefList=this.RULE("paramDefList",()=>{this.CONSUME(ci),this.MANY(()=>{this.SUBRULE(this.paramDef),this.OPTION(()=>this.CONSUME(di))}),this.CONSUME(fi)});paramDef=this.RULE("paramDef",()=>{this.CONSUME(je),this.OPTION(()=>this.CONSUME(Nc)),this.CONSUME(da),this.SUBRULE(this.paramType),this.OPTION2(()=>{this.CONSUME(Rc),this.SUBRULE(this.value)})});paramType=this.RULE("paramType",()=>{this.OR([{ALT:()=>this.CONSUME(xc)},{ALT:()=>this.CONSUME(wc)},{ALT:()=>this.CONSUME(Cc)},{ALT:()=>this.SUBRULE(this.enumType)}])});templateExpr=this.RULE("templateExpr",()=>{this.CONSUME(by),this.CONSUME(je),this.CONSUME(My)})}const pa=new oN;var aN={};const lN=pa.getBaseCstVisitorConstructor(),Im=r=>aN[r];class uN extends lN{filename="<unknown>";interpolateEnv=!1;envProvider=Im;constructor(){super(),this.validateVisitor()}setFilename(e){this.filename=e}setInterpolateEnv(e){this.interpolateEnv=e}setEnvProvider(e){this.envProvider=e}resetEnvProvider(){this.envProvider=Im}loc(e){return{file:this.filename,line:e.startLine,column:e.startColumn,offset:e.startOffset}}program(e,t="<unknown>"){this.filename=t;const s={type:"Program",uses:[],blocks:[],extends:[],loc:{file:this.filename,line:1,column:1}};return e.metaBlock&&(s.meta=this.visit(e.metaBlock[0])),e.inheritDecl&&(s.inherit=this.visit(e.inheritDecl[0])),e.useDecl&&(s.uses=e.useDecl.map(o=>this.visit(o))),e.block&&(s.blocks=e.block.map(o=>this.visit(o))),e.extendBlock&&(s.extends=e.extendBlock.map(o=>this.visit(o))),s}metaBlock(e){const t={};let s;if(e.field)for(const l of e.field){const{name:c,value:f,isParamsDef:h,paramsDefs:m}=this.visit(l);h&&m?s=m:t[c]=f}const o={type:"MetaBlock",fields:t,loc:this.loc(e.At[0])};return s&&(o.params=s),o}inheritDecl(e){const t={type:"InheritDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),t}useDecl(e){const t={type:"UseDeclaration",path:this.visit(e.pathRef[0]),loc:this.loc(e.At[0])};return e.paramCallList&&(t.params=this.visit(e.paramCallList[0])),e.Identifier&&(t.alias=e.Identifier[0].image),t}block(e){const t=e.Identifier[0].image,s=this.visit(e.blockContent[0]);return{type:"Block",name:t,content:s,loc:this.loc(e.At[0])}}extendBlock(e){const t=this.visit(e.dotPath[0]),s=this.visit(e.blockContent[0]);return{type:"ExtendBlock",targetPath:t,content:s,loc:this.loc(e.At[0])}}blockContent(e){const t=e.TextBlock?.length>0,s=e.field?.length>0;if(e.restrictionItem?.length>0)return this.buildRestrictionContent(e);const l=t?this.buildTextContent(e.TextBlock[0]):void 0,c=s?this.buildProperties(e.field):{};return this.resolveBlockContent(l,c,t,s)}buildRestrictionContent(e){const t=[];for(const s of e.restrictionItem)t.push(this.visit(s));return{type:"ObjectContent",properties:{items:t},loc:{file:this.filename,line:1,column:1}}}buildTextContent(e){let s=e.image.slice(3,-3).trim();return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),{type:"TextContent",value:s,loc:this.loc(e)}}buildProperties(e){const t={};for(const s of e){const{name:o,value:l}=this.visit(s);t[o]=l}return t}resolveBlockContent(e,t,s,o){return s&&!o?e:!s&&o?{type:"ObjectContent",properties:t,loc:{file:this.filename,line:1,column:1}}:s&&o?{type:"MixedContent",text:e,properties:t,loc:{file:this.filename,line:1,column:1}}:{type:"ObjectContent",properties:{},loc:{file:this.filename,line:1,column:1}}}restrictionItem(e){const t=e.StringLiteral[0];return this.parseStringLiteral(t.image)}field(e){let t;if(e.Identifier)t=e.Identifier[0].image;else if(e.StringLiteral)t=this.parseStringLiteral(e.StringLiteral[0].image);else if(e.StringType)t="string";else if(e.NumberType)t="number";else if(e.BooleanType)t="boolean";else throw new Error("Unknown field key type");const s=e.Question?!0:void 0,o=e.value,l=this.visit(o[0]),c=o.length>1?this.visit(o[1]):void 0;return t==="params"&&Array.isArray(l)&&l.length>0&&l[0]?.type==="ParamDefinition"?{name:t,value:{},isParamsDef:!0,paramsDefs:l}:{name:t,value:l,optional:s,defaultValue:c}}value(e){if(e.StringLiteral)return this.parseStringLiteral(e.StringLiteral[0].image);if(e.NumberLiteral)return parseFloat(e.NumberLiteral[0].image);if(e.True)return!0;if(e.False)return!1;if(e.Null)return null;if(e.TextBlock){const t=e.TextBlock[0];let o=t.image.slice(3,-3).trim();return this.interpolateEnv&&(o=this.interpolateEnvVars(o)),{type:"TextContent",value:o,loc:this.loc(t)}}if(e.array)return this.visit(e.array[0]);if(e.paramDefList)return this.visit(e.paramDefList[0]);if(e.object)return this.visit(e.object[0]);if(e.typeExpr)return this.visit(e.typeExpr[0]);if(e.templateExpr)return this.visit(e.templateExpr[0]);if(e.Identifier)return e.Identifier[0].image;throw new Error("Unknown value type")}array(e){return e.value?e.value.map(t=>this.visit(t)):[]}object(e){const t={};if(e.field)for(const s of e.field){const{name:o,value:l}=this.visit(s);t[o]=l}return t}typeExpr(e){return e.rangeType?this.visit(e.rangeType[0]):this.visit(e.enumType[0])}rangeType(e){const[t,s]=e.NumberLiteral,o=parseFloat(t.image),l=parseFloat(s.image);return{type:"TypeExpression",kind:"range",constraints:{min:o,max:l},loc:this.loc(e.Range[0])}}enumType(e){return{type:"TypeExpression",kind:"enum",constraints:{options:e.StringLiteral.map(s=>this.parseStringLiteral(s.image))},loc:this.loc(e.Enum[0])}}pathRef(e){return e.PathReference?this.parsePathReference(e.PathReference[0]):this.parseRelativePath(e.RelativePath[0])}dotPath(e){return e.Identifier.map(t=>t.image).join(".")}paramCallList(e){return e.paramArg?e.paramArg.map(t=>this.visit(t)):[]}paramArg(e){return{type:"ParamArgument",name:e.Identifier[0].image,value:this.visit(e.value[0]),loc:this.loc(e.Identifier[0])}}paramDefList(e){return e.paramDef?e.paramDef.map(t=>this.visit(t)):[]}paramDef(e){const t=e.Identifier[0].image,s=e.Question!==void 0,o=this.visit(e.paramType[0]),l=e.value?this.visit(e.value[0]):void 0;return{type:"ParamDefinition",name:t,paramType:o,optional:s||l!==void 0,defaultValue:l,loc:this.loc(e.Identifier[0])}}paramType(e){if(e.StringType)return{kind:"string"};if(e.NumberType)return{kind:"number"};if(e.BooleanType)return{kind:"boolean"};if(e.enumType)return{kind:"enum",options:this.visit(e.enumType[0]).constraints?.options??[]};throw new Error("Unknown param type")}templateExpr(e){return{type:"TemplateExpression",name:e.Identifier[0].image,loc:this.loc(e.TemplateOpen[0])}}parseStringLiteral(e){let s=e.slice(1,-1).replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\");return this.interpolateEnv&&(s=this.interpolateEnvVars(s)),s}interpolateEnvVars(e){const t=/\$\{([A-Za-z_]\w*)(?::-([^}]*))?\}/g;return e.replace(t,(s,o,l)=>{const c=this.envProvider(o);return c!==void 0?c:l!==void 0?l:(console.warn(`Warning: Environment variable '${o}' is not set, using empty string`),"")})}parsePathReference(e){const t=e.image,s=t.slice(1);let o,l=s;const c=s.match(/@(\d+\.\d+\.\d+)$/);c&&(o=c[1],l=s.slice(0,-c[0].length));const f=l.split("/"),h=f[0];return{type:"PathReference",raw:t,namespace:h,segments:f.slice(1),version:o,isRelative:!1,loc:this.loc(e)}}parseRelativePath(e){const t=e.image,s=t.split("/").filter(o=>o!=="."&&o!=="..");return{type:"PathReference",raw:t,segments:s,isRelative:!0,loc:this.loc(e)}}}const na=new uN,zy={name:"xml",description:"XML-style tags for section structure",section:{start:"<{{name}}>",end:"</{{name}}>",nameTransform:"kebab-case",indent:"  "},subsection:{start:"  <{{name}}>",end:"  </{{name}}>",nameTransform:"kebab-case",indent:"  "},listStyle:"dash",codeBlockDelimiter:"```"},cN={name:"markdown",description:"Markdown headers for section structure",section:{start:"## {{name}}",end:"",nameTransform:"none",indent:""},subsection:{start:"### {{name}}",end:"",nameTransform:"none",indent:""},listStyle:"dash",codeBlockDelimiter:"```"},uf={xml:zy,markdown:cN};function fN(r){return r in uf}const Vy={proseWrap:"preserve",tabWidth:2,printWidth:80};var dr=(r=>(r.PARSE_ERROR="PS1000",r.UNEXPECTED_TOKEN="PS1001",r.UNTERMINATED_STRING="PS1002",r.INVALID_PATH="PS1003",r.RESOLVE_ERROR="PS2000",r.FILE_NOT_FOUND="PS2001",r.CIRCULAR_DEPENDENCY="PS2002",r.INVALID_INHERIT="PS2003",r.GIT_CLONE_ERROR="PS2004",r.GIT_AUTH_ERROR="PS2005",r.GIT_REF_NOT_FOUND="PS2006",r.MISSING_PARAM="PS2010",r.UNKNOWN_PARAM="PS2011",r.PARAM_TYPE_MISMATCH="PS2012",r.UNDEFINED_VARIABLE="PS2013",r.VALIDATION_ERROR="PS3000",r.REQUIRED_FIELD="PS3001",r.INVALID_VALUE="PS3002",r.BLOCKED_PATTERN="PS3003",r.MISSING_GUARD="PS3004",r))(dr||{});class ki extends Error{code;location;cause;constructor(e,t,s){super(e),this.name="PSError",this.code=t,this.location=s?.location,this.cause=s?.cause,Error.captureStackTrace?.(this,this.constructor)}format(){let e=`${this.name} [${this.code}]: ${this.message}`;return this.location&&(e+=`
  at ${this.location.file}:${this.location.line}:${this.location.column}`),e}toJSON(){return{name:this.name,code:this.code,message:this.message,location:this.location}}}class ac extends ki{constructor(e,t,s=dr.PARSE_ERROR){super(e,s,{location:t}),this.name="ParseError"}}class ir extends ki{constructor(e,t,s=dr.RESOLVE_ERROR){super(e,s,{location:t}),this.name="ResolveError"}}class lc extends ir{chain;constructor(e){super(`Circular dependency detected: ${e.join("  ")}`,void 0,dr.CIRCULAR_DEPENDENCY),this.name="CircularDependencyError",this.chain=e}}class dN extends ki{paramName;templatePath;constructor(e,t,s){super(`Missing required parameter '${e}' for template '${t}'`,dr.MISSING_PARAM,s),this.name="MissingParamError",this.paramName=e,this.templatePath=t}}class Om extends ki{paramName;templatePath;availableParams;constructor(e,t,s,o){const l=s.length>0?`. Available parameters: ${s.join(", ")}`:". This template has no parameters.";super(`Unknown parameter '${e}' for template '${t}'${l}`,dr.UNKNOWN_PARAM,o),this.name="UnknownParamError",this.paramName=e,this.templatePath=t,this.availableParams=s}}class ra extends ki{paramName;expectedType;actualType;constructor(e,t,s,o){super(`Type mismatch for parameter '${e}': expected ${t}, got ${s}`,dr.PARAM_TYPE_MISMATCH,o),this.name="ParamTypeMismatchError",this.paramName=e,this.expectedType=t,this.actualType=s}}class Wy extends ki{variableName;sourceFile;constructor(e,t,s){super(`Undefined template variable '{{${e}}}' in '${t}'`,dr.UNDEFINED_VARIABLE,s),this.name="UndefinedVariableError",this.variableName=e,this.sourceFile=t}}const hN={arrayStrategy:"unique",textStrategy:"concat",textSeparator:`

`};function sr(r,e,t={}){const s={...hN,...t},o={...r};for(const l of Object.keys(e)){const c=e[l];c!==void 0&&(o[l]=pN(r[l],c,s))}return o}function pN(r,e,t){return e===null?null:Array.isArray(e)?mN(Array.isArray(r)?r:[],e,t.arrayStrategy):ks(e)?yN(ks(r)?r:void 0,e,t):_m(e)&&_m(r)?sr(r,e,t):e}function mN(r,e,t){switch(t){case"replace":return[...e];case"concat":return[...r,...e];case"unique":return gN([...r,...e])}}function gN(r){const e=new Set,t=[];for(const s of r){const o=typeof s=="object"?JSON.stringify(s):String(s);e.has(o)||(e.add(o),t.push(s))}return t}function yN(r,e,t){if(!r)return e;switch(t.textStrategy){case"replace":return e;case"concat":return{...e,value:`${r.value}${t.textSeparator}${e.value}`};case"prepend":return{...e,value:`${e.value}${t.textSeparator}${r.value}`}}}function ks(r){return typeof r=="object"&&r!==null&&"type"in r&&r.type==="TextContent"}function _m(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.getPrototypeOf(r)===Object.prototype}function It(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(It);const e={};for(const[t,s]of Object.entries(r))e[t]=It(s);return e}var uc,Pm;function vN(){if(Pm)return uc;Pm=1;function r(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function e(o,l){for(var c="",f=0,h=-1,m=0,g,y=0;y<=o.length;++y){if(y<o.length)g=o.charCodeAt(y);else{if(g===47)break;g=47}if(g===47){if(!(h===y-1||m===1))if(h!==y-1&&m===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var E=c.lastIndexOf("/");if(E!==c.length-1){E===-1?(c="",f=0):(c=c.slice(0,E),f=c.length-1-c.lastIndexOf("/")),h=y,m=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=y,m=0;continue}}l&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+o.slice(h+1,y):c=o.slice(h+1,y),f=y-h-1;h=y,m=0}else g===46&&m!==-1?++m:m=-1}return c}function t(o,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+o+f:f}var s={resolve:function(){for(var l="",c=!1,f,h=arguments.length-1;h>=-1&&!c;h--){var m;h>=0?m=arguments[h]:(f===void 0&&(f=process.cwd()),m=f),r(m),m.length!==0&&(l=m+"/"+l,c=m.charCodeAt(0)===47)}return l=e(l,!c),c?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(l){if(r(l),l.length===0)return".";var c=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return l=e(l,!c),l.length===0&&!c&&(l="."),l.length>0&&f&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return r(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var f=arguments[c];r(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":s.normalize(l)},relative:function(l,c){if(r(l),r(c),l===c||(l=s.resolve(l),c=s.resolve(c),l===c))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var h=l.length,m=h-f,g=1;g<c.length&&c.charCodeAt(g)===47;++g);for(var y=c.length,E=y-g,T=m<E?m:E,w=-1,R=0;R<=T;++R){if(R===T){if(E>T){if(c.charCodeAt(g+R)===47)return c.slice(g+R+1);if(R===0)return c.slice(g+R)}else m>T&&(l.charCodeAt(f+R)===47?w=R:R===0&&(w=0));break}var j=l.charCodeAt(f+R),M=c.charCodeAt(g+R);if(j!==M)break;j===47&&(w=R)}var _="";for(R=f+w+1;R<=h;++R)(R===h||l.charCodeAt(R)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(g+w):(g+=w,c.charCodeAt(g)===47&&++g,c.slice(g))},_makeLong:function(l){return l},dirname:function(l){if(r(l),l.length===0)return".";for(var c=l.charCodeAt(0),f=c===47,h=-1,m=!0,g=l.length-1;g>=1;--g)if(c=l.charCodeAt(g),c===47){if(!m){h=g;break}}else m=!1;return h===-1?f?"/":".":f&&h===1?"//":l.slice(0,h)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');r(l);var f=0,h=-1,m=!0,g;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var y=c.length-1,E=-1;for(g=l.length-1;g>=0;--g){var T=l.charCodeAt(g);if(T===47){if(!m){f=g+1;break}}else E===-1&&(m=!1,E=g+1),y>=0&&(T===c.charCodeAt(y)?--y===-1&&(h=g):(y=-1,h=E))}return f===h?h=E:h===-1&&(h=l.length),l.slice(f,h)}else{for(g=l.length-1;g>=0;--g)if(l.charCodeAt(g)===47){if(!m){f=g+1;break}}else h===-1&&(m=!1,h=g+1);return h===-1?"":l.slice(f,h)}},extname:function(l){r(l);for(var c=-1,f=0,h=-1,m=!0,g=0,y=l.length-1;y>=0;--y){var E=l.charCodeAt(y);if(E===47){if(!m){f=y+1;break}continue}h===-1&&(m=!1,h=y+1),E===46?c===-1?c=y:g!==1&&(g=1):c!==-1&&(g=-1)}return c===-1||h===-1||g===0||g===1&&c===h-1&&c===f+1?"":l.slice(c,h)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return t("/",l)},parse:function(l){r(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var f=l.charCodeAt(0),h=f===47,m;h?(c.root="/",m=1):m=0;for(var g=-1,y=0,E=-1,T=!0,w=l.length-1,R=0;w>=m;--w){if(f=l.charCodeAt(w),f===47){if(!T){y=w+1;break}continue}E===-1&&(T=!1,E=w+1),f===46?g===-1?g=w:R!==1&&(R=1):g!==-1&&(R=-1)}return g===-1||E===-1||R===0||R===1&&g===E-1&&g===y+1?E!==-1&&(y===0&&h?c.base=c.name=l.slice(1,E):c.base=c.name=l.slice(y,E)):(y===0&&h?(c.name=l.slice(1,g),c.base=l.slice(1,E)):(c.name=l.slice(y,g),c.base=l.slice(y,E)),c.ext=l.slice(g,E)),y>0?c.dir=l.slice(0,y-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,uc=s,uc}vN();const cf={verbose:()=>{},debug:()=>{}};function EN(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function SN(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template"}return"object"}function TN(r,e,t,s){const o=SN(e),l=EN(t);switch(t.kind){case"string":if(o!=="string")throw new ra(r,l,o,{location:s});break;case"number":if(o!=="number")throw new ra(r,l,o,{location:s});break;case"boolean":if(o!=="boolean")throw new ra(r,l,o,{location:s});break;case"enum":if(o!=="string"||!t.options.includes(e))throw new ra(r,l,String(e),{location:s});break}}function Lm(r,e,t,s){const o=new Map;if(!e||e.length===0){if(r&&r.length>0&&r[0]!==void 0)throw new Om(r[0].name,t,[],{location:s});return o}const l=new Map;for(const f of e)l.set(f.name,f);const c=new Set;if(r)for(const f of r){const h=l.get(f.name);if(!h)throw new Om(f.name,t,e.map(m=>m.name),{location:f.loc});TN(f.name,f.value,h.paramType,f.loc),o.set(f.name,f.value),c.add(f.name)}for(const f of e)if(!c.has(f.name)){if(f.defaultValue!==void 0)o.set(f.name,f.defaultValue);else if(!f.optional)throw new dN(f.name,t,{location:s})}return o}function kN(r){return r===null?"null":typeof r=="string"?r:typeof r=="number"||typeof r=="boolean"?String(r):Array.isArray(r)?JSON.stringify(r):typeof r=="object"&&"type"in r&&r.type==="TextContent"?r.value:JSON.stringify(r)}function Ic(r,e){const t=/\{\{([a-zA-Z_][a-zA-Z0-9_]*)\}\}/g;return r.replace(t,(s,o)=>{const l=e.params.get(o);if(l===void 0)throw new Wy(o,e.sourceFile);return kN(l)})}function Ra(r,e){if(r===null||typeof r=="string"||typeof r=="number"||typeof r=="boolean")return r;if(Array.isArray(r))return r.map(t=>Ra(t,e));if(typeof r=="object"&&"type"in r){const t=r;if(t.type==="TemplateExpression"){const s=r,o=e.params.get(s.name);if(o===void 0)throw new Wy(s.name,e.sourceFile,{location:s.loc});return o}if(t.type==="TextContent"){const s=r;return{...s,value:Ic(s.value,e)}}if(t.type==="TypeExpression")return r}if(typeof r=="object"){const t={};for(const[s,o]of Object.entries(r))t[s]=Ra(o,e);return t}return r}function Gy(r,e){switch(r.type){case"TextContent":return{...r,value:Ic(r.value,e)};case"ObjectContent":return{...r,properties:Oc(r.properties,e)};case"ArrayContent":return{...r,elements:r.elements.map(t=>Ra(t,e))};case"MixedContent":return{...r,text:r.text?{...r.text,value:Ic(r.text.value,e)}:void 0,properties:Oc(r.properties,e)}}}function Oc(r,e){const t={};for(const[s,o]of Object.entries(r))t[s]=Ra(o,e);return t}function AN(r,e){return{...r,content:Gy(r.content,e)}}function bm(r,e){return e.params.size===0?r:{...r,meta:r.meta?{...r.meta,fields:Oc(r.meta.fields,e)}:void 0,blocks:r.blocks.map(t=>AN(t,e)),extends:r.extends.map(t=>({...t,content:Gy(t.content,e)}))}}function xN(r,e={}){const{filename:t="<unknown>",tolerant:s=!1,recovery:o=!1,interpolateEnv:l=!1,envProvider:c}=e,f=s||o,h=[],m=sN.tokenize(r);for(const y of m.errors)h.push(new ac(`Lexer: ${y.message}`,{file:t,line:y.line,column:y.column}));if(h.length>0&&!f)return{ast:null,errors:h};pa.input=m.tokens;const g=pa.program();for(const y of pa.errors)h.push(new ac(y.message,{file:t,line:y.token.startLine,column:y.token.startColumn}));if(h.length>0&&!f)return{ast:null,errors:h};try{return na.setInterpolateEnv(l),c?na.setEnvProvider(c):na.resetEnvProvider(),{ast:na.visit(g,t),errors:h}}catch(y){return h.push(new ac(`AST transformation: ${y.message}`,{file:t,line:1,column:1})),{ast:null,errors:h}}}const hs="__import__";class wN{fs;cache;resolving;cacheEnabled;logger;envVars;constructor(e){this.fs=e.fs,this.cache=new Map,this.resolving=new Set,this.cacheEnabled=e.cache!==!1,this.logger=e.logger??cf,this.envVars=e.envVars}async resolve(e){const t=this.normalizePath(e);if(this.resolving.has(t))throw this.logger.debug(`Circular dependency detected: ${t}`),new lc([...this.resolving,t]);if(this.cacheEnabled&&this.cache.has(t))return this.logger.debug(`Cache hit: ${t}`),this.cache.get(t);this.resolving.add(t),this.logger.verbose(`Parsing ${t}`);try{const s=await this.doResolve(t);return this.cacheEnabled&&(this.logger.debug(`Cache store: ${t}`),this.cache.set(t,s)),s}finally{this.resolving.delete(t)}}normalizePath(e){let t=e.replace(/\\/g,"/");return t.startsWith("/")&&(t=t.slice(1)),t.endsWith(".prs")||(t=`${t}.prs`),t}resolveRef(e,t){if(e.isRelative){const s=this.dirname(t);return this.normalizePath(this.joinPath(s,e.raw))}if(e.raw.startsWith("@")){const s=e.raw.match(/^@([a-zA-Z_][a-zA-Z0-9_-]*)\/(.+?)(?:@[\d.]+)?$/);if(s&&s[1]&&s[2]){const o=s[1],l=s[2],c=l.endsWith(".prs")?l:`${l}.prs`;return`@${o}/${c}`}}return this.normalizePath(e.raw)}dirname(e){const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}joinPath(...e){const t=[];for(const s of e){if(!s)continue;const o=s.split("/");for(const l of o)l===".."?t.pop():l!=="."&&l!==""&&t.push(l)}return t.join("/")}async doResolve(e){const t=[e],s=[],o=this.loadAndParse(e,t,s);if(!o.ast)return{ast:null,sources:t,errors:s};let l=o.ast;return l=await this.resolveInherit(l,e,t,s),l=await this.resolveImports(l,e,t,s),l.extends.length>0&&this.logger.debug(`Applying ${l.extends.length} extension(s)`),l=this.applyExtends(l),this.logger.debug(`Resolved ${t.length} source file(s)`),{ast:l,sources:[...new Set(t)],errors:s}}loadAndParse(e,t,s){let o;try{o=this.fs.read(e)}catch{return s.push(new ir(`File not found: ${e}`)),{ast:null}}const l={filename:e};this.envVars&&Object.keys(this.envVars).length>0&&(l.interpolateEnv=!0,l.envProvider=f=>this.envVars?.[f]);const c=xN(o,l);if(!c.ast){for(const f of c.errors)s.push(new ir(f.message,f.location));return{ast:null}}for(const f of c.errors)s.push(new ir(f.message,f.location));return{ast:c.ast}}async resolveInherit(e,t,s,o){if(!e.inherit)return e;const l=this.resolveRef(e.inherit.path,t);this.logger.verbose(`Resolving inherit: ${e.inherit.path.raw}`),this.logger.verbose(`   ${l}`);try{const c=await this.resolve(l);if(s.push(...c.sources),o.push(...c.errors),c.ast){let f=c.ast;if(c.ast.meta?.params||e.inherit.params){this.logger.debug(`Binding template parameters for ${l}`);try{const h=Lm(e.inherit.params,c.ast.meta?.params,l,e.inherit.loc);if(h.size>0){const m={params:h,sourceFile:l};f=bm(c.ast,m),this.logger.debug(`Interpolated ${h.size} parameter(s)`)}}catch(h){return o.push(new ir(h.message,e.inherit.loc)),e}}return this.logger.debug("Merging with parent AST"),this.resolveInheritance(f,e)}}catch(c){if(c instanceof lc)throw c;o.push(new ir(`Failed to resolve parent: ${c.message}`))}return e}async resolveImports(e,t,s,o){let l=e;for(const c of e.uses){const f=this.resolveRef(c.path,t);this.logger.verbose(`Resolving import: ${c.path.raw}`),this.logger.verbose(`   ${f}`);try{const h=await this.resolve(f);if(s.push(...h.sources),o.push(...h.errors),h.ast){let m=h.ast;if(h.ast.meta?.params||c.params){this.logger.debug(`Binding template parameters for ${f}`);try{const g=Lm(c.params,h.ast.meta?.params,f,c.loc);if(g.size>0){const y={params:g,sourceFile:f};m=bm(h.ast,y),this.logger.debug(`Interpolated ${g.size} parameter(s)`)}}catch(g){o.push(new ir(g.message,c.loc));continue}}this.logger.debug(`Merging import${c.alias?` as "${c.alias}"`:""}`),l=this.resolveUses(l,c,m)}}catch(h){if(h instanceof lc)throw h;o.push(new ir(`Failed to resolve import: ${h.message}`))}}return l}clearCache(){this.cache.clear()}resolveInheritance(e,t){return{...t,meta:e.meta&&t.meta?{...t.meta,fields:sr(e.meta.fields,t.meta.fields)}:t.meta??e.meta,blocks:this.mergeBlocks(e.blocks,t.blocks),inherit:void 0,uses:t.uses,extends:t.extends}}mergeBlocks(e,t){const s=new Map(t.map(c=>[c.name,c])),o=[],l=new Set;for(const c of e){const f=s.get(c.name);f?(o.push(this.mergeBlock(c,f)),l.add(c.name)):o.push(It(c))}for(const c of t)l.has(c.name)||o.push(It(c));return o}mergeBlock(e,t){return{...t,content:this.mergeBlockContent(e.content,t.content)}}mergeBlockContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return this.mergeTextContent(e,t);case"ObjectContent":return this.mergeObjectContent(e,t);case"ArrayContent":return this.mergeArrayContent(e,t);case"MixedContent":return this.mergeMixedContent(e,t)}return e.type==="MixedContent"&&t.type==="TextContent"?{...e,text:e.text?this.mergeTextContent(e.text,t):It(t)}:e.type==="TextContent"&&t.type==="MixedContent"?{...t,text:t.text?this.mergeTextContent(e,t.text):It(e)}:e.type==="MixedContent"&&t.type==="ObjectContent"?{...e,properties:sr(e.properties,t.properties)}:e.type==="ObjectContent"&&t.type==="MixedContent"?{...t,properties:sr(e.properties,t.properties)}:It(t)}mergeTextContent(e,t){const s=e.value.trim(),o=t.value.trim();return s===o?{...t,value:o}:o.includes(s)?{...t,value:o}:s.includes(o)?{...t,value:s}:{...t,value:`${s}

${o}`}}mergeObjectContent(e,t){return{...t,properties:this.mergeProperties(e.properties,t.properties)}}mergeProperties(e,t){const s={...e};for(const[o,l]of Object.entries(t)){const c=s[o];c===void 0?s[o]=this.deepCloneValue(l):Array.isArray(l)&&Array.isArray(c)?s[o]=this.uniqueConcat(c,l):ks(l)&&ks(c)?s[o]=this.deepCloneValue(l):this.isPlainObject(l)&&this.isPlainObject(c)?s[o]=this.mergeProperties(c,l):s[o]=this.deepCloneValue(l)}return s}mergeArrayContent(e,t){return{...t,elements:this.uniqueConcat(e.elements,t.elements)}}mergeMixedContent(e,t){return{...t,text:e.text&&t.text?this.mergeTextContent(e.text,t.text):t.text??e.text,properties:this.mergeProperties(e.properties,t.properties)}}resolveUses(e,t,s){const o=this.mergeBlocksForImport(e.blocks,s.blocks),l=[];if(t.alias){const c=t.alias,h={type:"Block",name:`${hs}${c}`,content:{type:"ObjectContent",properties:{__source:t.path.raw,__blocks:s.blocks.map(m=>m.name)},loc:t.loc},loc:t.loc};l.push(h);for(const m of s.blocks)l.push({...m,name:`${hs}${c}.${m.name}`})}return{...e,blocks:[...o,...l]}}mergeBlocksForImport(e,t){const s=new Map(e.map(c=>[c.name,c])),o=[],l=new Set;for(const c of e){const f=t.find(h=>h.name===c.name);f?(o.push(this.mergeBlock(f,c)),l.add(c.name)):o.push(It(c))}for(const c of t)!l.has(c.name)&&!s.has(c.name)&&o.push(It(c));return o}applyExtends(e){let t=[...e.blocks];for(const s of e.extends)t=this.applyExtend(t,s);return t=t.filter(s=>!s.name.startsWith(hs)),{...e,blocks:t,extends:[]}}applyExtend(e,t){const s=t.targetPath.split("."),o=s[0];let l=o,c=s.slice(1);e.find(y=>y.name===`${hs}${o}`)&&s.length>1&&(l=`${hs}${o}.${s[1]}`,c=s.slice(2));const h=e.findIndex(y=>y.name===l);if(h===-1)return e;const m=e[h];if(!m)return e;const g=this.mergeExtension(m,c,t);return[...e.slice(0,h),g,...e.slice(h+1)]}mergeExtension(e,t,s){return t.length===0?{...e,content:this.mergeExtendContent(e.content,s.content)}:{...e,content:this.mergeAtPath(e.content,t,s.content)}}mergeAtPath(e,t,s){if(t.length===0)return this.mergeExtendContent(e,s);const o=t[0];if(!o)return this.mergeExtendContent(e,s);const l=t.slice(1);if(e.type==="ObjectContent"){const c=e.properties[o];return l.length===0?{...e,properties:{...e.properties,[o]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[o]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[o]:this.buildPathValue(l,s)}}}if(e.type==="MixedContent"){const c=e.properties[o];return l.length===0?{...e,properties:{...e.properties,[o]:this.mergeExtendValue(c,s)}}:c&&typeof c=="object"&&!Array.isArray(c)?{...e,properties:{...e.properties,[o]:this.mergeAtPathValue(c,l,s)}}:{...e,properties:{...e.properties,[o]:this.buildPathValue(l,s)}}}return e}mergeAtPathValue(e,t,s){if(t.length===0)return this.mergeExtendValue(e,s);if(typeof e!="object"||e===null||Array.isArray(e))return this.buildPathValue(t,s);const o=t[0];if(!o)return this.mergeExtendValue(e,s);const l=t.slice(1),c=e,f=c[o];return l.length===0?{...c,[o]:this.mergeExtendValue(f,s)}:f&&typeof f=="object"&&!Array.isArray(f)?{...c,[o]:this.mergeAtPathValue(f,l,s)}:{...c,[o]:this.buildPathValue(l,s)}}buildPathValue(e,t){if(e.length===0)return this.extractValue(t);const s={};let o=s;for(let c=0;c<e.length-1;c++){const f=e[c];if(f){const h={};o[f]=h,o=h}}const l=e[e.length-1];return l&&(o[l]=this.extractValue(t)),s}extractValue(e){switch(e.type){case"TextContent":return e.value;case"ObjectContent":return It(e.properties);case"ArrayContent":return It(e.elements);case"MixedContent":return It(e.properties)}}mergeExtendValue(e,t){return e===void 0?this.extractValue(t):Array.isArray(e)&&t.type==="ArrayContent"?this.uniqueConcat(e,t.elements):typeof e=="object"&&e!==null&&!Array.isArray(e)&&t.type==="ObjectContent"?sr(e,t.properties):ks(e)&&t.type==="TextContent"?{...t,value:`${e.value}

${t.value}`}:this.extractValue(t)}mergeExtendContent(e,t){if(e.type===t.type)switch(t.type){case"TextContent":return{...t,value:`${e.value}

${t.value}`};case"ObjectContent":return{...t,properties:sr(e.properties,t.properties)};case"ArrayContent":return{...t,elements:this.uniqueConcat(e.elements,t.elements)};case"MixedContent":{const s=e,o=s.text&&t.text?{...t.text,value:`${s.text.value}

${t.text.value}`}:t.text??s.text;return{...t,text:o,properties:sr(s.properties,t.properties)}}}if(e.type==="ObjectContent"&&t.type==="TextContent")return{type:"MixedContent",text:t,properties:e.properties,loc:t.loc};if(e.type==="TextContent"&&t.type==="ObjectContent")return{type:"MixedContent",text:e,properties:t.properties,loc:t.loc};if(e.type==="MixedContent"&&t.type==="TextContent"){const s=e;return{...s,text:s.text?{...t,value:`${s.text.value}

${t.value}`}:t}}if(e.type==="MixedContent"&&t.type==="ObjectContent"){const s=e;return{...s,properties:sr(s.properties,t.properties)}}return It(t)}uniqueConcat(e,t){const s=new Set,o=[];for(const l of[...e,...t]){const c=typeof l=="object"&&l!==null?JSON.stringify(l):String(l);s.has(c)||(s.add(c),o.push(this.deepCloneValue(l)))}return o}isPlainObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}deepCloneValue(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>this.deepCloneValue(s));const t={};for(const[s,o]of Object.entries(e))t[s]=this.deepCloneValue(o);return t}}class _c{convention;prettierOptions;constructor(e="xml"){let t,s;if(typeof e=="object"&&("convention"in e||"prettier"in e)){const o=e;t=o.convention??"xml",s=o.prettier}else t=e;if(typeof t=="string")if(fN(t))this.convention=uf[t];else throw new Error(`Unknown convention: ${t}. Use a built-in convention ('xml', 'markdown') or provide a custom OutputConvention.`);else this.convention=t;this.prettierOptions={...Vy,...s}}getPrettierOptions(){return this.prettierOptions}getConvention(){return this.convention}renderSection(e,t,s=1){const o=s===1?this.convention.section:this.convention.subsection??this.convention.section,l=this.transformName(e,o.nameTransform),c=this.applyTemplate(o.start,{name:l,level:s}),f=o.end?this.applyTemplate(o.end,{name:l,level:s}):"";let h=t.trim();if(!h)return f?`${c}
${f}`:c;this.convention.name==="markdown"&&(h=this.escapeMarkdownSpecialChars(h));const m=this.indentContent(h,o,s);return f?`${c}
${m}
${f}`:this.convention.name==="markdown"?`${c}

${m}`:`${c}
${m}`}renderList(e){const t=this.getListMarker();return e.map(s=>`${t} ${s}`).join(`
`)}renderCodeBlock(e,t=""){const s=this.convention.codeBlockDelimiter??"```";return`${s}${t}
${e}
${s}`}wrapRoot(e){return this.convention.rootWrapper?`${this.convention.rootWrapper.start}
${e}
${this.convention.rootWrapper.end}`:e}getSectionSeparator(){return this.convention.name==="markdown",`

`}getListMarker(){switch(this.convention.listStyle){case"asterisk":return"*";case"bullet":return"";case"numbered":return"1.";default:return"-"}}transformName(e,t){switch(t){case"kebab-case":return this.toKebabCase(e);case"camelCase":return this.toCamelCase(e);case"PascalCase":return this.toPascalCase(e);default:return e}}toKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}toCamelCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toLowerCase())}toPascalCase(e){return e.replace(/[-_\s]+(.)?/g,(t,s)=>s?s.toUpperCase():"").replace(/^(.)/,t=>t.toUpperCase())}applyTemplate(e,t){let s=e;s=s.replace(/\{\{name\}\}/g,t.name),s=s.replace(/\{\{level\}\}/g,String(t.level));const l=/\{\{#repeat\s+(\w+)\}\}(.+?)\{\{\/repeat\}\}/.exec(s);if(l){const c=l[1],f=l[2],h=c==="level"?t.level:1,m=f.repeat(h);s=s.replace(l[0],m)}return s}escapeMarkdownSpecialChars(e){return e.split(`
`).map(t=>{let s=t.replace(/__/g,"\\_\\_");return s=this.escapeGlobAsteriskOutsideBackticks(s),s}).join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,o)=>o%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}indentContent(e,t,s){if(!(t.indent??""))return e;if(this.convention.name==="xml"){const c=" ".repeat(this.prettierOptions.tabWidth).repeat(s);return e.split(`
`).map(f=>f.trim()?`${c}${f}`:f).join(`
`)}return e}}new _c(zy),new _c(uf.markdown);const CN=["git","config","documentation","diagrams"],Mm={typescript:"TypeScript",naming:"Naming Conventions",errors:"Error Handling",testing:"Testing",security:"Security",performance:"Performance",accessibility:"Accessibility",documentation:"Documentation"};function RN(r){return r in Mm?Mm[r]:r.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function NN(r){return r==="errors"?"error-handling":r}class IN{options;constructor(e={}){this.options={supportLegacyFormat:e.supportLegacyFormat??!0,supportObjectFormat:e.supportObjectFormat??!0}}extract(e){const t=this.getProps(e),s=new Map,o=this.extractGit(t),l=this.extractConfig(t),c=this.extractDocumentation(t),f=this.extractDiagrams(t);let h=!1;if(this.options.supportLegacyFormat){const m=t.code;if(m&&typeof m=="object"&&!Array.isArray(m)){const g=m;if("style"in g||"patterns"in g){const y=[];this.addArrayItems(y,g.style),this.addArrayItems(y,g.patterns),y.length>0&&(s.set("code",{key:"code",sectionName:"code",title:"Code Style",items:y,rawValue:m}),h=!0)}}}for(const[m,g]of Object.entries(t)){if(this.isNonCodeKey(m)||m==="code"&&h)continue;const y=this.extractEntry(m,g);y&&y.items.length>0&&s.set(m,y)}return{codeStandards:s,git:o,config:l,documentation:c,diagrams:f}}extractFromProgram(e){const t=e.blocks.find(s=>s.name==="standards"&&!s.name.startsWith("__"));return t?this.extract(t.content):null}extractEntry(e,t){const s=[];if(Array.isArray(t))for(const o of t){const l=this.valueToString(o);l&&s.push(l)}else this.options.supportObjectFormat&&t&&typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length===0?null:{key:e,sectionName:NN(e),title:RN(e),items:s,rawValue:t}}extractFromObject(e,t){for(const[s,o]of Object.entries(e)){if(o==null||o===!1)continue;if(o===!0){t.push(s);continue}const l=this.valueToString(o);l&&t.push(`${s}: ${l}`)}}extractGit(e){const t=e.git;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,o={};return s.format&&(o.format=this.valueToString(s.format)),Array.isArray(s.types)&&(o.types=s.types.map(l=>this.valueToString(l)).filter(Boolean)),s.example&&(o.example=this.valueToString(s.example)),Object.keys(o).length>0?o:void 0}extractConfig(e){const t=e.config;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t,o={};for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);f&&(o[l]=f)}return Object.keys(o).length>0?o:void 0}extractDocumentation(e){const t=e.documentation;if(!t)return;const s=[];if(Array.isArray(t))for(const o of t){const l=this.valueToString(o);l&&s.push(l)}else typeof t=="object"?this.extractFromObject(t,s):typeof t=="string"&&t.trim()&&s.push(t.trim());return s.length>0?{items:s,rawValue:t}:void 0}extractDiagrams(e){const t=e.diagrams;if(!t||typeof t!="object"||Array.isArray(t))return;const s=t;let o,l;if(s.format?o=this.valueToString(s.format):s.tool&&(o=this.valueToString(s.tool)),Array.isArray(s.types)&&(l=s.types.map(c=>this.valueToString(c)).filter(Boolean)),o||l&&l.length>0)return{format:o,types:l,rawValue:t}}isNonCodeKey(e){return CN.includes(e)}addArrayItems(e,t){if(Array.isArray(t))for(const s of t){const o=this.valueToString(s);o&&e.push(o)}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}valueToString(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.map(t=>this.valueToString(t)).join(", ");if(typeof e=="object"&&"type"in e){if(e.type==="TextContent"&&typeof e.value=="string")return e.value.trim();if(e.type==="TypeExpression"&&"kind"in e){const t=e.kind,s="params"in e&&Array.isArray(e.params)?e.params:[];return s.length>0?`${t}(${s.map(o=>this.valueToString(o)).join(", ")})`:t}}if(typeof e=="object"){const t=Object.entries(e);if(t.length>0)return t.map(([s,o])=>`${s}: ${this.valueToString(o)}`).join(", ")}return""}}class Ha{standardsExtractor=new IN;createRenderer(e){const t=e?.convention??this.defaultConvention;return new _c({convention:t,prettier:e?.prettier})}getPrettierOptions(e){return{...Vy,...e?.prettier}}getOutputPath(e){return e?.outputPath??this.outputPath}findBlock(e,t){return e.blocks.find(s=>s.name===t&&!s.name.startsWith("__"))}extractText(e){switch(e.type){case"TextContent":return e.value.trim();case"MixedContent":return e.text?.value.trim()??"";default:return""}}getProp(e,t){switch(e.type){case"ObjectContent":return e.properties[t];case"MixedContent":return e.properties[t];default:return}}getProps(e){switch(e.type){case"ObjectContent":return e.properties;case"MixedContent":return e.properties;default:return{}}}formatStandardsList(e){return Array.isArray(e)?e.map(t=>this.valueToString(t)).filter(t=>t.length>0):[]}formatArray(e){return e.map(String).join(", ")}truncate(e,t){return e.length>t?e.substring(0,t-3)+"...":e}getMetaField(e,t){const s=e.meta?.fields?.[t];if(typeof s=="string")return s;if(typeof s=="number")return String(s)}getArrayElements(e){return e.type==="ArrayContent"?e.elements:[]}valueToString(e){return e===null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?e.map(t=>this.valueToString(t)).join(", "):typeof e=="object"&&"type"in e&&e.type==="TextContent"&&typeof e.value=="string"?e.value.trim():""}extractSectionWithCodeBlock(e,t){const s=e.indexOf(t);if(s===-1)return null;const o=s+t.length,l=e.indexOf("```",o);if(l===-1)return null;const c=e.indexOf("```",l+3);if(c===-1)return null;const f=c+3;return e.substring(s,f)}normalizeMarkdownForPrettier(e){const t=e.split(`
`);let s=1/0,o=!1;for(const h of t){const m=h.trimEnd();if(m.trimStart().startsWith("```")){if(o=!o,m.length>0){const T=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,T)}continue}if(o||m.length===0)continue;const y=h.match(/^(\s*)/)?.[1]?.length??0;s=Math.min(s,y)}s===1/0&&(s=0);const l=[];let c=!1,f=[];o=!1;for(const h of t){const m=h.trimEnd(),g=s>0?m.slice(s):m,y=m.trimStart().startsWith("```"),E=y&&!o;if(y&&(o=!o),o||g.startsWith("```")){if(E){const j=l.length>0?l[l.length-1]??"":"";j.trim()&&!j.startsWith("#")&&l.push("")}l.push(g);continue}let T=g;T=T.replace(/__([^_]+)__/g,"\\_\\_$1\\_\\_"),T=this.escapeGlobAsteriskOutsideBackticks(T);const w=l.length>0?l[l.length-1]:"",R=w?.trimStart().startsWith("#");if(R&&T.trim()&&l.push(""),T.trimStart().startsWith("|")&&T.trimEnd().endsWith("|"))c=!0,f.push(T.trim());else{c&&f.length>0&&(l.push(...this.formatMarkdownTable(f)),f=[],c=!1);const j=T.trimStart().startsWith("- "),M=/^\d+\.\s/.test(T.trimStart()),_=w?.trimStart()??"",P=_.startsWith("- ")||/^\d+\.\s/.test(_),b=w?.trimEnd().endsWith(":")??!1;((j||M)&&w&&!P&&!R||(j||M)&&b)&&l.push(""),l.push(T)}}return f.length>0&&l.push(...this.formatMarkdownTable(f)),l.join(`
`)}escapeGlobAsteriskOutsideBackticks(e){return e.split("`").map((s,o)=>o%2===0?s.replace(/\/\*/g,"/\\*"):s).join("`")}stripAllIndent(e){const t=e.split(`
`),s=[];let o=!1;for(const l of t){const c=l.trimEnd();if(c.trimStart().startsWith("```")){if(!o){const E=s.length>0?s[s.length-1]??"":"";E&&E.trim()&&s.push("")}o=!o,s.push(c.trimStart());continue}if(o){s.push(c);continue}let f=c.trimStart();f=f.replace(/__/g,"\\_\\_"),f=this.escapeGlobAsteriskOutsideBackticks(f);const h=s.length>0?s[s.length-1]??"":"",m=f.startsWith("- ")||/^\d+\.\s/.test(f),g=h.startsWith("- ")||/^\d+\.\s/.test(h),y=h.trimEnd().endsWith(":");(m&&h&&!g||m&&y)&&s.push(""),s.push(f)}return s.join(`
`)}formatMarkdownTable(e){if(e.length===0)return[];const t=e.map(l=>l.split("|").slice(1,-1).map(c=>c.trim())),s=t[0]?.length??0,o=new Array(s).fill(0);for(const l of t)for(let c=0;c<l.length;c++){const f=l[c]??"",h=f.match(/^-+$/)?3:f.length;o[c]=Math.max(o[c]??0,h)}return t.map(l=>"| "+l.map((f,h)=>{const m=o[h]??0;return f.match(/^-+$/)?"-".repeat(m):f.padEnd(m)}).join(" | ")+" |")}dedent(e){const t=e.split(`
`);if(t.length<=1)return e.trim();const s=t.slice(1).filter(l=>l.trim().length>0).reduce((l,c)=>{const h=c.match(/^(\s*)/)?.[1]?.length??0;return Math.min(l,h)},1/0);return s===0||s===1/0?e.trim():[(t[0]??"").trim(),...t.slice(1).map(l=>l.trim().length>0?l.slice(s):"")].join(`
`).trim()}}class Ir{static factories=new Map;static register(e,t){if(this.factories.has(e))throw new Error(`Formatter '${e}' is already registered`);this.factories.set(e,t)}static get(e){return this.factories.get(e)?.()}static getAll(){return Array.from(this.factories.values()).map(e=>e())}static list(){return Array.from(this.factories.keys())}static has(e){return this.factories.has(e)}static unregister(e){return this.factories.delete(e)}static clear(){this.factories.clear()}}const ON={simple:{name:"simple",description:"Single file output (.github/copilot-instructions.md)",outputPath:".github/copilot-instructions.md"},multifile:{name:"multifile",description:"Main + path-specific instructions (.github/instructions/) + prompts",outputPath:".github/copilot-instructions.md"},full:{name:"full",description:"Multifile + skills (.github/skills/) + agents (.github/agents/) + AGENTS.md",outputPath:".github/copilot-instructions.md"}},jm={Read:"read",NotebookRead:"read",Edit:"edit",MultiEdit:"edit",Write:"edit",NotebookEdit:"edit",Grep:"search",Glob:"search",Bash:"execute",WebFetch:"web",WebSearch:"web",Task:"agent",TodoWrite:"todo",TodoRead:"todo"},_N={sonnet:"Claude Sonnet 4.5",opus:"Claude Opus 4.5",haiku:"Claude Haiku 4.5","sonnet-4":"Claude Sonnet 4","sonnet-4.5":"Claude Sonnet 4.5","opus-4":"Claude Opus 4","opus-4.5":"Claude Opus 4.5","haiku-4":"Claude Haiku 4","haiku-4.5":"Claude Haiku 4.5","gpt-4o":"GPT-4o","gpt-4.1":"GPT-4.1","gpt-5":"GPT-5","gpt-5-mini":"GPT-5 mini",inherit:"",auto:"Auto"};class PN extends Ha{name="github";outputPath=".github/copilot-instructions.md";description="GitHub Copilot instructions (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return ON}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),o=[];return s.getConvention().name==="markdown"&&o.push(this.header(e)),this.addCommonSections(e,s,o),{path:this.getOutputPath(t),content:o.join(`

`)+`
`}}formatMultifile(e,t){const s=this.createRenderer(t),o=[],l=this.extractInstructions(e);for(const h of l)o.push(this.generateInstructionFile(h));const c=this.extractPrompts(e);for(const h of c)o.push(this.generatePromptFile(h));const f=[];return s.getConvention().name==="markdown"&&f.push(this.header(e)),this.addCommonSections(e,s,f),{path:this.getOutputPath(t),content:f.join(`

`)+`
`,additionalFiles:o.length>0?o:void 0}}formatFull(e,t){const s=this.createRenderer(t),o=[],l=this.extractInstructions(e);for(const y of l)o.push(this.generateInstructionFile(y));const c=this.extractPrompts(e);for(const y of c)o.push(this.generatePromptFile(y));const f=this.extractSkills(e);for(const y of f)o.push(this.generateSkillFile(y));const h=this.extractCustomAgents(e);for(const y of h)o.push(this.generateCustomAgentFile(y));const m=this.generateAgentsFile(e);m&&o.push(m);const g=[];return s.getConvention().name==="markdown"&&g.push(this.header(e)),this.addCommonSections(e,s,g),{path:this.getOutputPath(t),content:g.join(`

`)+`
`,additionalFiles:o.length>0?o:void 0}}extractInstructions(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],o=this.getProps(t.content),l=o.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"typescript",applyTo:c,description:"TypeScript-specific coding rules",content:this.getTypeScriptInstructionContent(e)}),f.length>0&&s.push({name:"testing",applyTo:f,description:"Testing-specific rules and patterns",content:this.getTestingInstructionContent(e)})}for(const[c,f]of Object.entries(o))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.applyTo,g=h.excludeAgent,y=h.description,E=h.content;m&&Array.isArray(m)&&s.push({name:c,applyTo:m.map(T=>this.valueToString(T)),excludeAgent:g?this.valueToString(g):void 0,description:y?this.valueToString(y):`${c} rules`,content:E?this.valueToString(E):""})}return s}generateInstructionFile(e){const t=[];t.push("---"),t.push("applyTo:");for(const s of e.applyTo)t.push(`  - "${s}"`);if(e.excludeAgent&&t.push(`excludeAgent: "${e.excludeAgent}"`),t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.github/instructions/${e.name}.instructions.md`,content:t.join(`
`)}}getTypeScriptInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&o.push("- Use strict TypeScript, avoid `any` types"),f.useUnknown&&o.push(`- Use \`unknown\` ${this.valueToString(f.useUnknown)}`),f.exports&&o.push(`- ${this.capitalize(this.valueToString(f.exports))}`),f.returnTypes&&o.push(`- Explicit return types ${this.valueToString(f.returnTypes)}`)}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&o.push(`- Files: \`${this.valueToString(f.files)}\``),f.classes&&o.push(`- Classes/Interfaces: \`${this.valueToString(f.classes)}\``),f.functions&&o.push(`- Functions/Variables: \`${this.valueToString(f.functions)}\``)}return o.join(`
`)}getTestingInstructionContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.filePattern&&o.push(`- Test files: \`${this.valueToString(c.filePattern)}\``),c.pattern&&o.push(`- Follow ${this.valueToString(c.pattern)} pattern`),c.coverage&&o.push(`- Target >${this.valueToString(c.coverage)}% coverage for libraries`),c.fixtures&&o.push(`- Use fixtures ${this.valueToString(c.fixtures)}`)}return o.length>0?o.join(`
`):"Follow project testing conventions."}extractPrompts(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;(f.prompt===!0||f.type==="prompt")&&s.push({name:l,description:f.description?this.valueToString(f.description):l,mode:f.mode==="agent"?"agent":void 0,tools:f.tools&&Array.isArray(f.tools)?f.tools.map(h=>this.valueToString(h)):void 0,content:f.content?this.valueToString(f.content):""})}return s}generatePromptFile(e){const t=[];t.push("---");const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.mode==="agent"&&(t.push("mode: agent"),e.tools&&e.tools.length>0)){const c=e.tools.map(f=>jm[f]??f.toLowerCase()).filter((f,h,m)=>m.indexOf(f)===h).map(f=>`'${f}'`).join(", ");t.push(`tools: [${c}]`)}if(t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/prompts/${e.name.replace(/^\/+/,"")}.prompt.md`,content:t.join(`
`)+`
`}}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,disableModelInvocation:f.disableModelInvocation===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.disableModelInvocation&&t.push("disable-model-invocation: true"),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/skills/${e.name.replace(/^\/+/,"")}/SKILL.md`,content:t.join(`
`)+`
`}}generateAgentsFile(e){const t=this.findBlock(e,"identity");if(!t)return null;const s=[];s.push("# Agent Instructions"),s.push("");const o=this.extractText(t.content);o&&(s.push("## Identity"),s.push(""),s.push(this.stripAllIndent(o)),s.push(""));const l=this.findBlock(e,"context");if(l){const f=this.extractText(l.content);f&&(s.push("## Context"),s.push(""),s.push(this.stripAllIndent(f)),s.push(""))}const c=this.findBlock(e,"restrictions");if(c){const f=this.extractRestrictionItems(c.content);if(f.length>0){s.push("## Restrictions"),s.push("");for(const h of f)s.push(`- ${h}`)}}return{path:"AGENTS.md",content:s.join(`
`)+`
`}}extractRestrictionItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractCustomAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=f.description?this.valueToString(f.description):"";if(!h)continue;s.push({name:l,description:h,tools:this.parseToolsArray(f.tools),model:f.model?this.valueToString(f.model):void 0,content:f.content?this.valueToString(f.content):""})}return s}parseToolsArray(e){if(!e||!Array.isArray(e))return;const t=e.map(o=>this.valueToString(o)).filter(o=>o.length>0).map(o=>jm[o]??o.toLowerCase()),s=[...new Set(t)];return s.length>0?s:void 0}mapModelName(e){if(!e)return;const t=_N[e.toLowerCase()];if(t!=="")return t??e}generateCustomAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0){const l=e.tools.map(c=>`'${c}'`).join(", ");t.push(`tools: [${l}]`)}const s=this.mapModelName(e.model);if(s&&t.push(`model: ${s}`),t.push("---"),t.push(""),e.content){const l=this.dedent(e.content),c=this.normalizeMarkdownForPrettier(l);t.push(c)}return{path:`.github/agents/${e.name.replace(/^\/+/,"")}.md`,content:t.join(`
`)+`
`}}addCommonSections(e,t,s){const o=this.project(e,t);o&&s.push(o);const l=this.techStack(e,t);l&&s.push(l);const c=this.architecture(e,t);c&&s.push(c);const f=this.codeStandards(e,t);f&&s.push(f);const h=this.shortcutsSection(e,t);h&&s.push(h);const m=this.commands(e,t);m&&s.push(m);const g=this.gitCommits(e,t);g&&s.push(g);const y=this.configFiles(e,t);y&&s.push(y);const E=this.documentation(e,t);E&&s.push(E);const T=this.postWork(e,t);T&&s.push(T);const w=this.restrictions(e,t);w&&s.push(w);const R=this.diagrams(e,t);R&&s.push(R);const j=this.knowledge(e,t);j&&s.push(j)}header(e){return"# GitHub Copilot Instructions"}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const o=this.extractText(s.content);return t.renderSection("project",this.stripAllIndent(o))}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.getProps(s.content),l=[],c=o.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Language:** ${this.formatTechItem(g)}`)}const f=o.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=o.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E&&l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`)}if(l.length===0)return null;const m=t.renderList(l);return t.renderSection("tech-stack",m)}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Architecture");if(!l)return null;const c=l.replace("## Architecture","").trim();return t.renderSection("architecture",this.stripAllIndent(c))}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const c of o.codeStandards.values())c.items.length>0&&l.push(t.renderSection(c.sectionName,t.renderList(c.items),2));return l.length===0?null:t.renderSection("code-standards",l.join(`

`))}shortcutsSection(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const o=this.getProps(s.content),l=[];for(const[c,f]of Object.entries(o))if(f&&typeof f=="object"&&!Array.isArray(f)){const h=f;if(h.prompt===!0||h.type==="prompt")continue;const m=h.description||h.content||c;l.push(`${c}: ${this.valueToString(m).split(`
`)[0]}`)}else l.push(`${c}: ${this.valueToString(f).split(`
`)[0]}`);return l.length===0?null:t.renderSection("shortcuts",t.renderList(l))}commands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return t.renderSection("commands",this.stripAllIndent(c))}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:t.renderSection("git-commits",t.renderList(f))}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(t.renderSection("eslint",`ESLint: ${g}`,2))}const m=c.viteRoot;if(m){const g=this.valueToString(m);f.push(t.renderSection("vite-vitest",`Vite root: ${g}`,2))}return f.length===0?null:t.renderSection("configuration-files",f.join(`

`))}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:t.renderSection("documentation-verification",t.renderList(f))}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return t.renderSection("post-work-verification",`${c}
${this.stripAllIndent(f)}`)}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;let o=[];if(s.content.type==="ArrayContent")o=s.content.elements.map(l=>this.formatRestriction(this.valueToString(l)));else if(s.content.type==="TextContent")o=s.content.value.trim().split(`
`).filter(l=>l.trim()).map(l=>this.formatRestriction(l.trim()));else if(s.content.type==="ObjectContent"){const l=this.getProp(s.content,"items");Array.isArray(l)&&(o=l.map(c=>this.formatRestriction(this.valueToString(c))))}return o.length===0?null:t.renderSection("donts",t.renderList(o))}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Always use **${this.valueToString(h)}** syntax for diagrams in documentation`);const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:t.renderSection("diagrams",t.renderList(f))}knowledge(e,t){return null}formatTechItem(e){return e.map(String).join(", ")}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}const LN={simple:{name:"simple",description:"Single file output (CLAUDE.md)",outputPath:"CLAUDE.md"},multifile:{name:"multifile",description:"Main + modular rules (.claude/rules/*.md)",outputPath:"CLAUDE.md"},full:{name:"full",description:"Multifile + skills (.claude/skills/) + agents (.claude/agents/) + local memory",outputPath:"CLAUDE.md"}};class bN extends Ha{name="claude";outputPath="CLAUDE.md";description="Claude Code instructions (concise Markdown)";defaultConvention="markdown";static getSupportedVersions(){return LN}format(e,t){const s=this.resolveVersion(t?.version);return s==="full"?this.formatFull(e,t):s==="multifile"?this.formatMultifile(e,t):this.formatSimple(e,t)}resolveVersion(e){return e==="multifile"?"multifile":e==="full"?"full":"simple"}formatSimple(e,t){const s=this.createRenderer(t),o=[];return s.getConvention().name==="markdown"&&o.push(`# CLAUDE.md
`),this.addCommonSections(e,s,o),{path:this.getOutputPath(t),content:o.join(`
`)}}formatMultifile(e,t){const s=this.createRenderer(t),o=[],l=this.extractRules(e);for(const f of l)o.push(this.generateRuleFile(f));const c=[];return s.getConvention().name==="markdown"&&c.push(`# CLAUDE.md
`),this.addCommonSections(e,s,c),{path:this.getOutputPath(t),content:c.join(`
`),additionalFiles:o.length>0?o:void 0}}formatFull(e,t){const s=this.createRenderer(t),o=[],l=this.extractRules(e);for(const g of l)o.push(this.generateRuleFile(g));const c=this.extractSkills(e);for(const g of c)o.push(this.generateSkillFile(g));const f=this.extractAgents(e);for(const g of f)o.push(this.generateAgentFile(g));const h=this.generateLocalFile(e);h&&o.push(h);const m=[];return s.getConvention().name==="markdown"&&m.push(`# CLAUDE.md
`),this.addCommonSections(e,s,m),{path:this.getOutputPath(t),content:m.join(`
`),additionalFiles:o.length>0?o:void 0}}extractRules(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],o=this.getProps(t.content),l=o.globs;if(Array.isArray(l)){const c=l.filter(h=>typeof h=="string"&&(h.includes(".ts")||h.includes(".tsx"))),f=l.filter(h=>typeof h=="string"&&(h.includes("test")||h.includes("spec")||h.includes("__tests__")));c.length>0&&s.push({name:"code-style",paths:c,description:"TypeScript code style rules",content:this.getCodeStyleRuleContent(e)}),f.length>0&&s.push({name:"testing",paths:f,description:"Testing rules and patterns",content:this.getTestingRuleContent(e)})}for(const[c,f]of Object.entries(o))if(c!=="globs"&&f&&typeof f=="object"&&!Array.isArray(f)){const h=f,m=h.paths??h.applyTo,g=h.description,y=h.content;m&&Array.isArray(m)&&s.push({name:c,paths:m.map(E=>this.valueToString(E)),description:g?this.valueToString(g):`${c} rules`,content:y?this.valueToString(y):""})}return s}generateRuleFile(e){const t=[];t.push("---"),t.push(`description: "${e.description}"`),t.push("paths:");for(const s of e.paths)t.push(`  - "${s}"`);if(t.push("---"),t.push(""),t.push(`# ${e.description}`),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.claude/rules/${e.name}.md`,content:t.join(`
`)}}getCodeStyleRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.typescript;if(l&&typeof l=="object"&&!Array.isArray(l)){const f=l;f.strictMode&&o.push("- Strict TypeScript, no `any` types"),f.exports&&o.push("- Named exports only")}const c=s.naming;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.files&&o.push(`- Files: ${this.valueToString(f.files)}`)}return o.join(`
`)}getTestingRuleContent(e){const t=this.findBlock(e,"standards");if(!t)return"";const s=this.getProps(t.content),o=[],l=s.testing;if(l&&typeof l=="object"&&!Array.isArray(l)){const c=l;c.framework&&o.push(`- Use ${this.valueToString(c.framework)} for testing`),c.coverage&&o.push(`- Target >${this.valueToString(c.coverage)}% coverage`),c.pattern&&o.push(`- Follow ${this.valueToString(c.pattern)} pattern`)}return o.length>0?o.join(`
`):"Follow project testing conventions."}extractSkills(e){const t=this.findBlock(e,"skills");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;s.push({name:l,description:f.description?this.valueToString(f.description):l,context:f.context==="fork"||f.context==="inherit"?f.context:void 0,agent:f.agent?this.valueToString(f.agent):void 0,allowedTools:f.allowedTools&&Array.isArray(f.allowedTools)?f.allowedTools.map(h=>this.valueToString(h)):void 0,userInvocable:f.userInvocable===!0,content:f.content?this.valueToString(f.content):""})}return s}generateSkillFile(e){const t=[];t.push("---"),t.push(`name: '${e.name}'`);const s=e.description.includes("'")?'"':"'";if(t.push(`description: ${s}${e.description}${s}`),e.context&&t.push(`context: ${e.context}`),e.agent&&t.push(`agent: ${e.agent}`),e.allowedTools&&e.allowedTools.length>0){t.push("allowed-tools:");for(const o of e.allowedTools)t.push(`  - ${o}`)}if(e.userInvocable&&t.push("user-invocable: true"),t.push("---"),t.push(""),e.content){const o=this.dedent(e.content),l=this.normalizeMarkdownForPrettier(o);t.push(l)}return{path:`.claude/skills/${e.name}/SKILL.md`,content:t.join(`
`)+`
`}}extractAgents(e){const t=this.findBlock(e,"agents");if(!t)return[];const s=[],o=this.getProps(t.content);for(const[l,c]of Object.entries(o))if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c,h=this.parseAgentConfig(l,f);h&&s.push(h)}return s}parseAgentConfig(e,t){const s=t.description?this.valueToString(t.description):"";return s?{name:e,description:s,tools:this.parseStringArray(t.tools),disallowedTools:this.parseStringArray(t.disallowedTools),model:this.parseAgentModel(t.model),permissionMode:this.parsePermissionMode(t.permissionMode),skills:this.parseStringArray(t.skills),content:t.content?this.valueToString(t.content):""}:null}parseStringArray(e){if(!e||!Array.isArray(e))return;const t=e.map(s=>this.valueToString(s)).filter(s=>s.length>0);return t.length>0?t:void 0}parseAgentModel(e){if(!e)return;const t=this.valueToString(e);return["sonnet","opus","haiku","inherit"].includes(t)?t:void 0}parsePermissionMode(e){if(!e)return;const t=this.valueToString(e);return["default","acceptEdits","dontAsk","bypassPermissions","plan"].includes(t)?t:void 0}generateAgentFile(e){const t=[];if(t.push("---"),t.push(`name: ${e.name}`),t.push(`description: ${e.description}`),e.tools&&e.tools.length>0&&t.push(`tools: ${e.tools.join(", ")}`),e.disallowedTools&&e.disallowedTools.length>0&&t.push(`disallowedTools: ${e.disallowedTools.join(", ")}`),e.model&&t.push(`model: ${e.model}`),e.permissionMode&&t.push(`permissionMode: ${e.permissionMode}`),e.skills&&e.skills.length>0){t.push("skills:");for(const s of e.skills)t.push(`  - ${s}`)}if(t.push("---"),t.push(""),e.content){const s=this.dedent(e.content),o=this.normalizeMarkdownForPrettier(s);t.push(o)}return{path:`.claude/agents/${e.name}.md`,content:t.join(`
`)+`
`}}generateLocalFile(e){const t=this.findBlock(e,"local");if(!t)return null;const s=this.extractText(t.content);if(!s)return null;const o=[];return o.push("# CLAUDE.local.md"),o.push(""),o.push("> Private instructions (not committed to git)"),o.push(""),o.push(s),{path:"CLAUDE.local.md",content:o.join(`
`)}}addCommonSections(e,t,s){this.addSection(s,this.project(e,t)),this.addSection(s,this.techStack(e,t)),this.addSection(s,this.architecture(e,t)),this.addSection(s,this.codeStandards(e,t)),this.addSection(s,this.gitCommits(e,t)),this.addSection(s,this.configFiles(e,t)),this.addSection(s,this.commands(e,t)),this.addSection(s,this.postWork(e,t)),this.addSection(s,this.documentation(e,t)),this.addSection(s,this.diagrams(e,t)),this.addSection(s,this.donts(e,t))}addSection(e,t){t&&e.push(t)}project(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const l=this.extractText(s.content).split(/\n{2,}/).map(f=>f.split(`
`).map(h=>h.trim()).filter(h=>h).join(`
`)).filter(f=>f).join(`

`),c=this.normalizeMarkdownForPrettier(l);return t.renderSection("Project",c)+`
`}techStack(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractTechStackFromContext(s);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}const o=this.findBlock(e,"standards");if(o){const l=this.extractTechStackFromStandards(o);if(l.length>0)return t.renderSection("Tech Stack",l.join(", "))+`
`}return null}extractTechStackFromContext(e){if(!e)return[];const t=this.getProps(e.content),s=[],o=t.languages;o&&s.push(...(Array.isArray(o)?o:[o]).map(String));const l=t.runtime;l&&s.push(this.valueToString(l));const c=t.monorepo;if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&f.packageManager&&s.push(`${this.valueToString(f.tool)} + ${this.valueToString(f.packageManager)}`)}return s}extractTechStackFromStandards(e){if(!e)return[];const t=this.getProp(e.content,"code");if(!t||typeof t!="object"||Array.isArray(t))return[];const s=t,o=[];for(const l of["languages","frameworks","testing"]){const c=s[l];c&&o.push(...(Array.isArray(c)?c:[c]).map(String))}return o}architecture(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Architecture");if(!l)return null;const c=l.replace("## Architecture",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Architecture",f.trim())+`
`}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const f of o.codeStandards.values())l.push(...f.items);if(l.length===0)return null;const c=t.renderList(l);return t.renderSection("Code Style",c)+`
`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"git");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.format&&c.push(`Format: ${this.valueToString(l.format)}`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),l.example&&c.push(`Example: \`${this.valueToString(l.example)}\``),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Git Commits",f)+`
`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"config");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.eslint&&c.push(`ESLint: ${this.valueToString(l.eslint)}`),l.viteRoot&&c.push(`Vite root: ${this.valueToString(l.viteRoot)}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Config Files",f)+`
`}commands(e,t){const s=this.findBlock(e,"shortcuts"),o=this.findBlock(e,"knowledge"),l=[];if(s){const f=this.getProps(s.content);for(const[h,m]of Object.entries(f)){const g=this.valueToString(m).split(`
`)[0]??"";l.push(`${h.padEnd(10)} - ${g}`.trimEnd())}}if(l.length===0)return null;let c=t.renderCodeBlock(l.join(`
`));if(o){const f=this.extractText(o.content),h=this.extractSectionWithCodeBlock(f,"## Development Commands");if(h){const m=h.replace("## Development Commands",""),g=this.normalizeMarkdownForPrettier(m);c+=`

`+g.trim()}}return t.renderSection("Commands",c)+`
`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c=l.replace("## Post-Work Verification",""),f=this.normalizeMarkdownForPrettier(c);return t.renderSection("Post-Work Verification",f.trim())+`
`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"documentation");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.verifyBefore&&c.push("Review docs before changes"),l.verifyAfter&&c.push("Update docs after changes"),l.codeExamples&&c.push("Keep code examples accurate"),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Documentation",f)+`
`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.getProp(s.content,"diagrams");if(!o||typeof o!="object"||Array.isArray(o))return null;const l=o,c=[];if(l.format&&c.push(`Use ${this.valueToString(l.format)} for diagrams`),l.types&&Array.isArray(l.types)&&c.push(`Types: ${l.types.map(String).join(", ")}`),c.length===0)return null;const f=t.renderList(c);return t.renderSection("Diagrams",f)+`
`}donts(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const o=this.extractDontsItems(s.content);if(o.length===0)return null;const l=t.renderList(o);return t.renderSection("Don'ts",l)+`
`}extractDontsItems(e){const t=s=>s.replace(/^Never\s+/i,"Don't ");if(e.type==="ArrayContent")return e.elements.map(s=>t(this.valueToString(s)));if(e.type==="TextContent")return e.value.trim().split(`
`).map(s=>s.trim().replace(/^-\s*/,"")).filter(s=>s.length>0).map(t);if(e.type==="ObjectContent"){const s=this.getProp(e,"items");if(Array.isArray(s))return s.map(o=>t(this.valueToString(o)))}return[]}}const ps={modern:{name:"modern",description:"MDC format with YAML frontmatter (.cursor/rules/project.mdc) + slash commands (.cursor/commands/)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},frontmatter:{name:"frontmatter",description:"Alias for modern format (MDC with YAML frontmatter + slash commands)",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},multifile:{name:"multifile",description:"Multiple MDC files with glob-based targeting + slash commands",outputPath:".cursor/rules/project.mdc",cursorVersion:"0.45+",introduced:"2024-12"},legacy:{name:"legacy",description:"Plain text format (.cursorrules) - DEPRECATED",outputPath:".cursorrules",cursorVersion:"< 0.45",deprecated:!0,deprecatedSince:"2024-12"}};class MN extends Ha{name="cursor";outputPath=ps.modern.outputPath;description="Cursor rules (MDC with frontmatter)";defaultConvention="markdown";static getSupportedVersions(){return ps}format(e,t){const s=t?.convention??this.defaultConvention;if(s!=="markdown"){const l=typeof s=="string"?s:"custom";throw new Error(`Cursor formatter does not support '${l}' convention. Only 'markdown' convention is supported for Cursor targets.`)}const o=this.resolveVersion(t?.version);return o==="legacy"?this.formatLegacy(e,t):o==="multifile"?this.formatMultifile(e,t):this.formatModern(e,t)}resolveVersion(e){return e==="legacy"?"legacy":e==="multifile"?"multifile":"modern"}formatModern(e,t){const s=[],o=this.frontmatter(e);s.push(o),this.addCommonSections(e,s);const l=this.generateCommandFiles(e);return{path:t?.outputPath??ps.modern.outputPath,content:s.join(`

`)+`
`,additionalFiles:l.length>0?l:void 0}}formatLegacy(e,t){const s=[];return this.addCommonSections(e,s),{path:t?.outputPath??ps.legacy.outputPath,content:s.join(`

`)+`
`}}formatMultifile(e,t){const s=[],o=this.extractGlobs(e);for(const M of o){const _=this.generateGlobFile(e,M);_&&s.push(_)}const l=this.generateShortcutsFile(e);l&&s.push(l);const c=this.generateCommandFiles(e);s.push(...c);const f=[];f.push(this.frontmatter(e)),f.push(this.intro(e));const h=this.techStack(e);h&&f.push(h);const m=this.architecture(e);m&&f.push(m);const g=this.codeStyle(e);g&&f.push(g);const y=this.gitCommits(e);y&&f.push(y);const E=this.configFiles(e);E&&f.push(E);const T=this.postWork(e);T&&f.push(T);const w=this.documentation(e);w&&f.push(w);const R=this.diagrams(e);R&&f.push(R);const j=this.never(e);return j&&f.push(j),{path:t?.outputPath??ps.modern.outputPath,content:f.join(`

`)+`
`,additionalFiles:s.length>0?s:void 0}}extractGlobs(e){const t=this.findBlock(e,"guards");if(!t)return[];const s=[],l=this.getProps(t.content).globs;if(Array.isArray(l)){const c=l.filter(m=>typeof m=="string"&&(m.includes(".ts")||m.includes(".tsx"))),f=l.filter(m=>typeof m=="string"&&(m.includes("test")||m.includes("spec")||m.includes("__tests__"))),h=l.filter(m=>typeof m=="string"&&!c.includes(m)&&!f.includes(m));c.length>0&&s.push({name:"typescript",patterns:c,description:"TypeScript-specific rules"}),f.length>0&&s.push({name:"testing",patterns:f,description:"Testing-specific rules"}),h.length>0&&s.push({name:"files",patterns:h,description:"File-specific rules"})}return s}generateGlobFile(e,t){const s=[],o=["---",`description: "${t.description}"`,"globs:",...t.patterns.map(l=>`  - "${l}"`),"---"];if(s.push(o.join(`
`)),t.name==="typescript"){const l=this.codeStyle(e);l&&s.push(l)}return t.name==="testing"&&(s.push("## Testing Guidelines"),s.push("Follow project testing conventions and patterns.")),s.length<=1?null:{path:`.cursor/rules/${t.name}.mdc`,content:s.join(`

`)+`
`}}generateShortcutsFile(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const o=[];o.push(["---",'description: "Project shortcuts and commands"',"alwaysApply: false","---"].join(`
`));const l=["## Commands"];for(const[c,f]of Object.entries(s)){const h=this.valueToString(f);if(typeof f=="object"&&!Array.isArray(f)){const m=f;l.push(`
### ${c}`),m.description&&l.push(this.valueToString(m.description)),Array.isArray(m.steps)&&(l.push(`
**Steps:**`),m.steps.forEach((g,y)=>{l.push(`${y+1}. ${this.valueToString(g)}`)}))}else l.push(`- **${c}**: ${h.split(`
`)[0]}`)}return o.push(l.join(`
`)),{path:".cursor/rules/shortcuts.mdc",content:o.join(`

`)+`
`}}generateCommandFiles(e){const t=this.findBlock(e,"shortcuts");if(!t)return[];const s=this.getProps(t.content),o=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c);if(f.includes(`
`)){const h=l.replace(/^\//,"");o.push({path:`.cursor/commands/${h}.md`,content:f.trim()})}}return o}addCommonSections(e,t){const s=this.intro(e);s&&t.push(s);const o=this.techStack(e);o&&t.push(o);const l=this.architecture(e);l&&t.push(l);const c=this.codeStyle(e);c&&t.push(c);const f=this.gitCommits(e);f&&t.push(f);const h=this.configFiles(e);h&&t.push(h);const m=this.commands(e);m&&t.push(m);const g=this.devCommands(e);g&&t.push(g);const y=this.postWork(e);y&&t.push(y);const E=this.documentation(e);E&&t.push(E);const T=this.diagrams(e);T&&t.push(T);const w=this.never(e);w&&t.push(w)}intro(e){const t=this.findBlock(e,"identity");if(t){const l=this.dedent(this.extractText(t.content));if(l.toLowerCase().startsWith("you are"))return l}const s=this.extractProjectInfo(e),o=s.org?` at ${s.org}`:"";return`You are working on ${s.text}${o}.`}frontmatter(e){return["---",`description: "${this.extractProjectDescription(e)}"`,"alwaysApply: true","---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"name");if(t)return`Project rules for ${t}`;const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"project");if(o&&typeof o=="string"){const c=/working on\s+(\w+)/i.exec(o);if(c)return`Project rules for ${c[1]}`}}return"Project-specific rules"}extractProjectInfo(e){const t=this.getMetaField(e,"org")??null,s=this.findBlock(e,"context");if(s){const l=this.getProp(s.content,"project");if(l&&typeof l=="string")return{text:l.trim(),org:t}}const o=this.findBlock(e,"identity");if(o){const c=this.extractText(o.content).split(`
`)[0]?.trim();if(c)return{text:c,org:t}}return{text:"the project",org:t}}techStack(e){const t=this.extractTechStackItems(e);return t.length>0?`Tech stack: ${t.join(", ")}`:null}extractTechStackItems(e){const t=[],s=this.findBlock(e,"context");return s&&this.extractTechFromContext(s.content,t),t.length===0&&this.extractTechFromStandards(e,t),t}extractTechFromContext(e,t){const s=this.getProp(e,"tech-stack");s&&t.push(...this.extractListItems(s));const o=this.getProp(e,"languages");o&&this.collectValueItems(t,o);const l=this.getProp(e,"runtime");l&&t.push(this.valueToString(l));const c=this.getProp(e,"monorepo");if(c&&typeof c=="object"&&!Array.isArray(c)){const f=c;f.tool&&t.push(`${this.valueToString(f.tool)}`),f.packageManager&&t.push(`${this.valueToString(f.packageManager)} workspaces`)}}extractTechFromStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return;const o=this.getProp(s.content,"code");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=o;this.collectValueItems(t,l.languages),this.collectValueItems(t,l.frameworks),this.collectValueItems(t,l.testing)}}architecture(e){const t=this.findBlock(e,"context");if(!t)return null;const s=this.getProp(t.content,"architecture");if(s){const l=typeof s=="string"?s:this.valueToString(s);if(l.trim())return`Architecture:
${l.trim()}`}const o=this.extractText(t.content);return o?.includes("Architecture")?o.trim():null}codeStyle(e){const t=this.extractCodeStyleItems(e);return t.length===0?null:`Code style:
${t.map(s=>"- "+s).join(`
`)}`}extractCodeStyleItems(e){const t=this.findBlock(e,"standards");if(!t)return[];const s=this.standardsExtractor.extract(t.content),o=[];for(const l of s.codeStandards.values())o.push(...l.items);return o}gitCommits(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"git");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=this.extractGitItems(o);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"git-commits");if(o&&typeof o=="object"&&!Array.isArray(o)){const l=this.extractGitItems(o);if(l.length>0)return`Git Commits:
${l.map(c=>"- "+c).join(`
`)}`}}return null}extractGitItems(e){const t=[];for(const[s,o]of Object.entries(e))if(s==="types"&&Array.isArray(o)){const l=o.map(c=>this.valueToString(c)).join(", ");t.push(`types: ${l}`)}else typeof o=="string"?t.push(`${s}: ${o}`):typeof o=="number"&&t.push(`${s}: ${o}`);return t}configFiles(e){const t=this.extractConfigItems(e);return t.length===0?null:`Config:
${t.map(s=>"- "+s).join(`
`)}`}extractConfigItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"config"),l=this.extractConfigFromObject(o);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"configuration-files");return this.extractConfigFromObjectWithList(o)}return[]}extractConfigFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,o]of Object.entries(e))typeof o=="string"&&t.push(`${s}: ${o}`);return t}extractConfigFromObjectWithList(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const[s,o]of Object.entries(e)){const l=this.extractListItems(o);l.length>0&&t.push(`${s}: ${l.join("; ")}`)}return t}commands(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content);if(Object.keys(s).length===0)return null;const o=[];for(const[l,c]of Object.entries(s)){const f=this.valueToString(c).split(`
`)[0]??"";o.push(`${l} - ${f}`)}return o.length>0?`Commands:
${o.join(`
`)}`:null}devCommands(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),o=this.extractSectionWithCodeBlock(s,"## Development Commands");return o?`Development Commands:
${o.replace("## Development Commands","").trim()}`:null}postWork(e){const t=this.findBlock(e,"knowledge");if(!t)return null;const s=this.extractText(t.content),o=this.extractSectionWithCodeBlock(s,"## Post-Work Verification");return o?`Post-Work Verification:
${o.replace("## Post-Work Verification","").trim()}`:null}documentation(e){const t=this.extractDocItems(e);return t.length===0?null:`Documentation:
${t.map(s=>"- "+s).join(`
`)}`}extractDocItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"documentation"),l=this.extractStringValuesFromObject(o);if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"documentation-verification");if(o)return this.extractListItems(o)}return[]}extractStringValuesFromObject(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=[];for(const s of Object.values(e))typeof s=="string"&&t.push(s);return t}diagrams(e){const t=this.extractDiagramItems(e);return t.length===0?null:`Diagrams:
${t.map(s=>"- "+s).join(`
`)}`}extractDiagramItems(e){const t=this.findBlock(e,"standards");if(t){const o=this.getProp(t.content,"diagrams"),l=this.parseDiagramObject(o,"format");if(l.length>0)return l}const s=this.findBlock(e,"context");if(s){const o=this.getProp(s.content,"diagrams");return this.parseDiagramObject(o,"tool")}return[]}parseDiagramObject(e,t){if(!e||typeof e!="object"||Array.isArray(e))return[];const s=e,o=[];return s[t]&&o.push(`Use ${this.valueToString(s[t])}`),s.types&&Array.isArray(s.types)&&o.push(`Types: ${s.types.map(l=>this.valueToString(l)).join(", ")}`),o}never(e){const t=this.findBlock(e,"restrictions");if(!t)return null;const s=this.extractNeverItems(t.content);return s.length===0?null:`Never:
${s.map(o=>"- "+o).join(`
`)}`}extractNeverItems(e){if(e.type==="ArrayContent")return e.elements.map(t=>this.valueToString(t));if(e.type==="TextContent")return e.value.trim().split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0);if(e.type==="ObjectContent"){const t=this.getProp(e,"items");if(Array.isArray(t))return t.map(s=>this.valueToString(s))}return[]}extractListItems(e){if(Array.isArray(e))return e.map(t=>this.valueToString(t));if(typeof e=="object"&&e!==null){const t=e,s=[];for(const[o,l]of Object.entries(t))s.push(`${o}: ${this.valueToString(l)}`);return s}return typeof e=="string"?e.split(`
`).map(t=>t.trim().replace(/^-\s*/,"")).filter(t=>t.length>0):[this.valueToString(e)]}collectValueItems(e,t){if(!t)return;const s=Array.isArray(t)?t:[t];for(const o of s)e.push(this.valueToString(o))}}const jN={simple:{name:"simple",description:"Plain Markdown without frontmatter",outputPath:".agent/rules/project.md"},frontmatter:{name:"frontmatter",description:"Markdown with YAML frontmatter for activation",outputPath:".agent/rules/project.md"}},Fm=12e3;class FN extends Ha{name="antigravity";outputPath=".agent/rules/project.md";description="Google Antigravity rules (Markdown)";defaultConvention="markdown";static getSupportedVersions(){return jN}format(e,t){const s=this.resolveVersion(t?.version),o=this.createRenderer(t),l=[];if(s==="frontmatter"){const z=this.determineActivationType(e);l.push(this.generateFrontmatter(e,z))}l.push(this.header(e));const c=this.identity(e,o);c&&l.push(c);const f=this.techStack(e,o);f&&l.push(f);const h=this.architecture(e,o);h&&l.push(h);const m=this.codeStandards(e,o);m&&l.push(m);const g=this.gitCommits(e,o);g&&l.push(g);const y=this.configFiles(e,o);y&&l.push(y);const E=this.commands(e,o);E&&l.push(E);const T=this.devCommands(e,o);T&&l.push(T);const w=this.postWork(e,o);w&&l.push(w);const R=this.documentation(e,o);R&&l.push(R);const j=this.diagrams(e,o);j&&l.push(j);const M=this.restrictions(e,o);M&&l.push(M);const _=l.join(`

`)+`
`;this.validateContentLength(_);const P={path:this.getOutputPath(t),content:_},b=this.workflows(e);return b&&b.length>0?{path:P.path,content:P.content,additionalFiles:b}:P}resolveVersion(e){return e==="frontmatter"?"frontmatter":"simple"}determineActivationType(e){const t=this.findBlock(e,"guards");if(t){const s=this.getProps(t.content);if(s.globs||s.glob||s.files)return"glob"}return"always"}generateFrontmatter(e,t){const s=this.getMetaField(e,"name")??"Project Rules",o=this.extractProjectDescription(e);return["---",`title: "${s}"`,`activation: "${t}"`,`description: "${o}"`,"---"].join(`
`)}extractProjectDescription(e){const t=this.getMetaField(e,"description");if(t)return t;const s=this.findBlock(e,"identity");if(s){const o=this.extractText(s.content);if(o){const l=o.split(".")[0];return l&&l.length<=100?l:o.slice(0,100)+"..."}}return"Auto-generated project rules"}validateContentLength(e){e.length>Fm&&console.warn(`Warning: Content exceeds Antigravity's ${Fm.toLocaleString()} character limit (${e.length.toLocaleString()} chars). Consider splitting into multiple rules.`)}workflows(e){const t=this.findBlock(e,"shortcuts");if(!t)return null;const s=this.getProps(t.content),o=[];for(const[l,c]of Object.entries(s))if(this.isWorkflow(c)){const f=this.generateWorkflow(l,c);f&&o.push(f)}return o.length>0?o:null}isWorkflow(e){if(typeof e!="object"||e===null||Array.isArray(e))return!1;const t=e;return"steps"in t||"workflow"in t}generateWorkflow(e,t){if(typeof t!="object"||t===null||Array.isArray(t))return null;const s=t,o=s.steps??s.workflow,l=s.description??s.desc??"",c=e.replace(/^\//,"").replace(/\s+/g,"-").toLowerCase(),f=["---",`title: "${this.formatWorkflowTitle(e)}"`,`description: "${this.valueToString(l)}"`,"---","","## Steps",""];return Array.isArray(o)?o.forEach((h,m)=>{f.push(`${m+1}. ${this.valueToString(h)}`)}):typeof o=="string"&&o.split(`
`).map(m=>m.trim()).filter(m=>m.length>0).forEach((m,g)=>{const y=m.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"");f.push(`${g+1}. ${y}`)}),{path:`.agent/workflows/${c}.md`,content:f.join(`
`)}}formatWorkflowTitle(e){return e.replace(/^\//,"").split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}header(e){return"# Project Rules"}identity(e,t){const s=this.findBlock(e,"identity");if(!s)return null;const o=this.extractText(s.content);return o?`## Project Identity

${this.stripAllIndent(o)}`:null}techStack(e,t){const s=this.findBlock(e,"context");if(!s)return null;const o=this.getProps(s.content),l=[],c=o.languages;if(c){const g=Array.isArray(c)?c:[c];l.push(`**Languages:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}const f=o.runtime;f&&l.push(`**Runtime:** ${this.valueToString(f)}`);const h=o.monorepo;if(h&&typeof h=="object"&&!Array.isArray(h)){const g=h,y=g.tool,E=g.packageManager;y&&E?l.push(`**Monorepo:** ${this.valueToString(y)} with ${this.valueToString(E)} workspaces`):y&&l.push(`**Monorepo:** ${this.valueToString(y)}`)}const m=o.frameworks;if(m){const g=Array.isArray(m)?m:[m];l.push(`**Frameworks:** ${g.map(y=>this.valueToString(y)).join(", ")}`)}return l.length===0?null:`## Tech Stack

${l.join(`
`)}`}architecture(e,t){const s=this.findBlock(e,"context");if(s){const l=this.extractText(s.content),c=this.extractSectionWithCodeBlock(l,"## Architecture");if(c){const m=c.replace("## Architecture","").trim();return`## Architecture

${this.stripAllIndent(m)}`}const h=this.getProps(s.content).architecture;if(h){const m=typeof h=="string"?h:this.valueToString(h);if(m.trim())return`## Architecture

${this.stripAllIndent(m.trim())}`}}const o=this.findBlock(e,"architecture");if(o){const l=this.extractText(o.content);if(l)return`## Architecture

${this.stripAllIndent(l)}`}return null}codeStandards(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const o=this.standardsExtractor.extract(s.content),l=[];for(const c of o.codeStandards.values())c.items.length>0&&l.push(`### ${c.title}

${c.items.map(f=>"- "+f).join(`
`)}`);return l.length===0?null:`## Code Standards

${l.join(`

`)}`}gitCommits(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).git;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;h&&f.push(`Use [${this.valueToString(h)}](https://www.conventionalcommits.org/) format`);const m=c.maxSubjectLength;m&&f.push(`Keep commit message subject line max ${this.valueToString(m)} characters`),f.push("Format: `<type>(<scope>): <description>`");const g=c.types;g&&Array.isArray(g)&&f.push(`Types: \`${g.map(String).join("`, `")}\``);const y=c.example;return y&&f.push(`Example: \`${this.valueToString(y)}\``),f.length===0?null:`## Git Commits

${f.map(E=>"- "+E).join(`
`)}`}configFiles(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).config;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.eslint;if(h){const g=this.valueToString(h);f.push(`### ESLint

- ESLint: ${g}`)}const m=c.viteRoot;if(m){const g=this.valueToString(m).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`### Vite/Vitest

- Vite root: ${g}`)}return f.length===0?null:`## Configuration Files

${f.join(`

`)}`}commands(e,t){const s=this.findBlock(e,"shortcuts");if(!s)return null;const o=this.getProps(s.content);if(Object.keys(o).length===0)return null;const l=[];for(const[c,f]of Object.entries(o)){if(this.isWorkflow(f))continue;const h=this.valueToString(f);h?l.push(`- **${c}**: ${h}`):l.push(`- **${c}**:`)}return l.length===0?null:`## Commands

${l.join(`
`)}`}devCommands(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Development Commands");if(!l)return null;const c=l.replace("## Development Commands","").trim();return`## Development Commands

${this.stripAllIndent(c)}`}postWork(e,t){const s=this.findBlock(e,"knowledge");if(!s)return null;const o=this.extractText(s.content),l=this.extractSectionWithCodeBlock(o,"## Post-Work Verification");if(!l)return null;const c="After completing any code changes, run the following commands to ensure code quality:",f=l.replace("## Post-Work Verification","").trim();return`## Post-Work Verification

${c}
${this.stripAllIndent(f)}`}documentation(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).documentation;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[];return c.verifyBefore&&f.push("**Before** making code changes, review `README.md` and relevant files in `docs/` to understand documented behavior"),c.verifyAfter&&f.push("**After** making code changes, verify consistency with `README.md` and `docs/` - update documentation if needed"),c.codeExamples&&f.push("Ensure code examples in documentation remain accurate after modifications"),f.push("If adding new features, add corresponding documentation in `docs/`"),f.push("If changing existing behavior, update affected documentation sections"),f.length===0?null:`## Documentation

${f.map(h=>"- "+h).join(`
`)}`}diagrams(e,t){const s=this.findBlock(e,"standards");if(!s)return null;const l=this.getProps(s.content).diagrams;if(!l||typeof l!="object"||Array.isArray(l))return null;const c=l,f=[],h=c.format;if(h){const g=this.valueToString(h).replace(/__/g,"\\_\\_").replace(/\/\*/g,"/\\*");f.push(`Always use **${g}** syntax for diagrams in documentation`)}const m=c.types;return m&&Array.isArray(m)&&f.push(`Supported diagram types: ${m.map(String).join(", ")}, etc.`),f.push("Wrap diagrams in markdown code blocks with `mermaid` language identifier"),f.push("Example:\n  ```mermaid\n  flowchart LR\n    A[Input] --> B[Process] --> C[Output]\n  ```"),f.length===0?null:`## Diagrams

${f.map(g=>"- "+g).join(`
`)}`}restrictions(e,t){const s=this.findBlock(e,"restrictions");if(!s)return null;const o=this.extractRestrictionsItems(s.content);return o.length===0?null:`## Don'ts

${o.map(l=>"- "+l).join(`
`)}`}extractRestrictionsItems(e){return e.type==="ArrayContent"?e.elements.map(t=>this.formatRestriction(this.valueToString(t))):e.type==="TextContent"?e.value.trim().split(`
`).filter(t=>t.trim()).map(t=>this.formatRestriction(t.trim())):[]}formatRestriction(e){return e.replace(/^-\s*/,"").replace(/^"/,"").replace(/"$/,"").replace(/^Never\s+/i,"Don't ")}}Ir.register("github",()=>new PN);Ir.register("claude",()=>new bN);Ir.register("cursor",()=>new MN);Ir.register("antigravity",()=>new FN);const $N={id:"PS001",name:"required-meta-id",description:"@meta.id is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e){r.report({message:"@meta block is required",location:r.ast.loc,suggestion:"Add a @meta block with id and version fields"});return}e.fields?.id||r.report({message:'@meta block must include "id" field',location:e.loc??r.ast.loc,suggestion:'Add id: "your-project-id" to @meta'})}},UN={id:"PS002",name:"required-meta-syntax",description:"@meta.syntax is required",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;e&&(e.fields?.syntax||r.report({message:'@meta block must include "syntax" field',location:e.loc??r.ast.loc,suggestion:'Add syntax: "1.0.0" to @meta'}))}};function DN(r){if(!r)return!1;const t=r.split(/[-+]/)[0];if(!t)return!1;const s=t.split(".");if(s.length!==3)return!1;for(const o of s)if(!/^\d+$/.test(o)||o.length>1&&o.startsWith("0"))return!1;return!0}const BN={id:"PS003",name:"valid-semver",description:"Syntax version must be valid semantic version",defaultSeverity:"error",validate:r=>{const e=r.ast.meta;if(!e?.fields?.syntax)return;const t=e.fields.syntax;if(typeof t!="string"){r.report({message:"@meta.syntax must be a string",location:e.loc??r.ast.loc,suggestion:'Use a string value like syntax: "1.0.0"'});return}DN(t)||r.report({message:`Invalid semantic version: "${t}"`,location:e.loc??r.ast.loc,suggestion:'Use semantic versioning format: MAJOR.MINOR.PATCH (e.g., "1.0.0", "2.1.0-beta.1")'})}},zN={id:"PS004",name:"required-guards",description:"Required guards must be present",defaultSeverity:"error",validate:r=>{const e=r.config.requiredGuards;if(!e||e.length===0)return;const t=r.ast.blocks.find(o=>o.name==="guards");if(!t){r.report({message:`Missing @guards block. Required guards: ${e.join(", ")}`,location:r.ast.loc,suggestion:"Add a @guards block with the required guard references"});return}const s=VN(t.content);for(const o of e)s.includes(o)||r.report({message:`Missing required guard: "${o}"`,location:t.loc??r.ast.loc,suggestion:`Add @use ${o} to include the required guard`})}};function VN(r){const e=[];if(r.type==="ArrayContent"&&Array.isArray(r.elements))for(const t of r.elements)typeof t=="string"&&e.push(t);else if(r.type==="ObjectContent"&&r.properties)for(const t of Object.keys(r.properties))e.push(t);return e}function $s(r,e){for(const t of r.blocks)$m(t.content,t.loc,e);for(const t of r.extends)$m(t.content,t.loc,e)}function WN(r,e){for(const t of r.blocks)e(t);for(const t of r.extends)e(t)}function Hy(r,e){for(const t of r.uses)e(t)}function $m(r,e,t){switch(r.type){case"TextContent":t(r.value,r.loc??e);break;case"ObjectContent":Pc(r.properties,r.loc??e,t);break;case"ArrayContent":Ky(r.elements,r.loc??e,t);break;case"MixedContent":r.text&&t(r.text.value,r.text.loc??e),Pc(r.properties,r.loc??e,t);break}}function Pc(r,e,t){for(const s of Object.values(r))Yy(s,e,t)}function Ky(r,e,t){for(const s of r)Yy(s,e,t)}function Yy(r,e,t){if(typeof r=="string")t(r,e);else if(Array.isArray(r))Ky(r,e,t);else if(r!==null&&typeof r=="object")if("type"in r){const s=r;s.type==="TextContent"&&typeof s.value=="string"&&t(s.value,s.loc??e)}else Pc(r,e,t)}function GN(r){switch(r.type){case"TextContent":return r.value.trim().length>0;case"ObjectContent":return Object.keys(r.properties).length>0;case"ArrayContent":return r.elements.length>0;case"MixedContent":return(r.text?.value?.trim().length??0)>0||Object.keys(r.properties).length>0}}const Xy=[/ignore\s+(all\s+)?previous\s+instructions/i,/pretend\s+(you\s+)?(are|to\s+be)/i,/jailbreak/i,/bypass\s+(your\s+)?(rules|restrictions)/i,/disregard\s+(all\s+)?(prior|previous)/i,/forget\s+(all\s+)?(prior|previous|your)/i,/act\s+as\s+if\s+you\s+(have\s+)?no\s+restrictions/i,/(?:^|[.!?]\s*)(?:please\s+)?override\s+safety/im,/(?:^|[.!?]\s*)(?:please\s+)?suppress\s+(?:all\s+)?warnings?/im,/(?:^|[.!?]\s*)(?:please\s+)?hide\s+security/im,/(?:you\s+)?(?:should|must|can|will)\s+disable\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+turn\s+off\s+(?:safety|security)/i,/(?:you\s+)?(?:should|must|can|will)\s+circumvent\s+(?:safety|security)/i,/(?:^|[.!?]\s*)evade\s+(?:detection|monitoring|logging)/im,/(?:^|[.!?]\s*)delete\s+(?:all\s+)?(?:logs?|audit\s+trail)/im],HN=[/zignoruj\s+(wszystkie\s+)?poprzednie\s+instrukcje/i,/udawaj,?\s+e\s+(jeste|nie\s+masz)/i,/omi\s+(swoje\s+)?(zasady|ograniczenia|restrykcje)/i,/zapomnij\s+(o\s+)?(wszystkich\s+)?(poprzednich|wczeniejszych)/i,/pomi\s+(wszystkie\s+)?zabezpieczenia/i,/wycz\s+(tryb\s+)?bezpieczestwa/i,/ukryj\s+(wszystkie\s+)?ostrzeenia/i,/usu\s+(wszystkie\s+)?logi/i,/nadpisz\s+zasady\s+bezpieczestwa/i,/dziaaj\s+bez\s+ogranicze/i],KN=[/ignora\s+(todas?\s+las?\s+)?instrucciones\s+anteriores/i,/finge\s+(que\s+)?(eres|ser)/i,/elude\s+(tus\s+)?(reglas|restricciones)/i,/olvida\s+(todas?\s+las?\s+)?(anteriores|previas)/i,/desactiva\s+(la\s+)?seguridad/i,/oculta\s+(las\s+)?advertencias/i,/elimina\s+(los\s+)?registros/i,/anula\s+(las\s+)?medidas\s+de\s+seguridad/i,/acta\s+sin\s+restricciones/i,/salta(r)?\s+(las\s+)?restricciones/i],YN=[/ignoriere?\s+(alle\s+)?vorherigen?\s+(Anweisungen|Instruktionen)/i,/tu\s+so,?\s+als\s+(ob\s+du|wrst\s+du)/i,/umgehe?\s+(deine\s+)?(Regeln|Einschrnkungen|Beschrnkungen)/i,/vergiss\s+(alle\s+)?(vorherigen?|frheren?)/i,/deaktiviere?\s+(die\s+)?Sicherheit/i,/verstecke?\s+(alle\s+)?Warnungen/i,/lsche?\s+(alle\s+)?(Logs?|Protokolle?)/i,/berschreibe?\s+(die\s+)?Sicherheitsregeln/i,/handel[en]?\s+ohne\s+Einschrnkungen/i,/Sicherheitsmanahmen\s+umgehen/i],XN=[/ignore[zr]?\s+(toutes?\s+les?\s+)?instructions?\s+(prcdentes?|antrieures?)/i,/fais\s+semblant\s+(d['']tre|que\s+tu\s+es)/i,/contourne[zr]?\s+(tes|vos)\s+(rgles|restrictions)/i,/oublie[zr]?\s+(toutes?\s+les?\s+)?(prcdentes?|antrieures?)/i,/dsactive[zr]?\s+(la\s+)?scurit/i,/cache[zr]?\s+(les\s+)?avertissements/i,/supprime[zr]?\s+(les\s+)?(logs?|journaux?)/i,/outrepasse[zr]?\s+(les\s+)?mesures\s+de\s+scurit/i,/agis\s+sans\s+restrictions/i,/ignore[zr]?\s+(les\s+)?limites/i],qN=[/ignore\s+(todas?\s+as?\s+)?instrues\s+anteriores/i,/finja\s+(que\s+)?(voc\s+|ser)/i,/contorne\s+(suas?\s+)?(regras|restries)/i,/esquea\s+(todas?\s+as?\s+)?(anteriores|prvias)/i,/desative\s+(a\s+)?segurana/i,/oculte\s+(os\s+)?avisos/i,/apague\s+(os\s+)?(logs?|registros?)/i,/substitua\s+(as\s+)?medidas\s+de\s+segurana/i,/aja\s+sem\s+restries/i,/pule\s+(as\s+)?restries/i],QN=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],ZN=[/\s*(\s*)?/i,/\s*(|)/i,/\s*(\s*)?(||)/i,/\s*(\s*)?(|)/i,/\s*/i,/\s*(\s*)?/i,/\s*(\s*)?(|)/i,/\s*\s*(|)/i,/\s*(\s*)?/i,/\s*/i],JN=[/ignora\s+(tutte\s+le\s+)?istruzioni\s+precedenti/i,/fingi\s+di\s+(essere|non\s+avere)/i,/aggira\s+(le\s+tue\s+)?(regole|restrizioni)/i,/dimentica\s+(tutte\s+le\s+)?(precedenti|passate)/i,/disattiva\s+(la\s+)?sicurezza/i,/nascondi\s+(gli\s+)?avvisi/i,/elimina\s+(i\s+)?(log|registri)/i,/sovrascrivi\s+(le\s+)?misure\s+di\s+sicurezza/i,/agisci\s+senza\s+restrizioni/i,/salta\s+(le\s+)?restrizioni/i],eI=[/negeer\s+(alle\s+)?vorige\s+(instructies|aanwijzingen)/i,/doe\s+alsof\s+je\s+(bent|geen)/i,/omzeil\s+(je\s+)?(regels|beperkingen)/i,/vergeet\s+(alle\s+)?(vorige|eerdere)/i,/schakel\s+(de\s+)?beveiliging\s+uit/i,/verberg\s+(alle\s+)?waarschuwingen/i,/verwijder\s+(alle\s+)?(logs?|logboeken)/i,/overschrijf\s+(de\s+)?beveiligingsregels/i,/handel\s+zonder\s+beperkingen/i,/sla\s+(de\s+)?beperkingen\s+over/i],tI=[/()?(||)/i,/|/i,/(||)(||)/i,/(|)(|)/i,/(|)/i,/(||)/i,/(|)/i,/(|)/i,/(|)/i,//i],nI=[/\s*(\s*)?(|\s+)?(|)/i,/\s*\s*(||)/i,/(||)(|)\s*(||)/i,/(|)\s*(|)(|)\s*/i,/(|)\s*(||)/i,/(|\s+)?(||)/i,/(|\s+)?(|)/i,/\s*(|)\s*/i,/\s*\s*(|)/i,/\s*(|\s+)?/i],rI=[/\s+(\s+)?\s+/i,/\s+(|)/i,/\s+(|)/i,/\s+(\s+)?(|\s+)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],iI=[/nceki\s+(tm\s+)?talimatlar\s+(yoksay|grmezden\s+gel)/i,/gibi\s+davran|m\s+gibi\s+yap/i,/(kurallar|kstlamalar)\s+(atla|ge|bypass)/i,/nceki(leri)?\s+unut/i,/gvenlii\s+(devre\s+d\s+brak|kapat)/i,/uyarlar\s+(gizle|sakla)/i,/gnlkleri\s+sil/i,/gvenlik\s+kurallarn\s+(geersiz\s+kl|zerine\s+yaz)/i,/kstlama\s+olmadan\s+(al|hareket\s+et)/i,/gvenlik\s+kontrollerini\s+atla/i],sI=[/ignorera\s+(alla\s+)?tidigare\s+(instruktioner|anvisningar)/i,/ltsas\s+(att\s+du\s+r|vara)/i,/kringg\s+(dina\s+)?(regler|begrnsningar)/i,/glm\s+(alla\s+)?(tidigare|fregende)/i,/inaktivera\s+skerhet(en)?/i,/dlj\s+(alla\s+)?varningar/i,/radera\s+(alla\s+)?loggar/i,/skriv\s+ver\s+skerhetsregler(na)?/i,/agera\s+utan\s+begrnsningar/i,/hoppa\s+ver\s+skerhetskontroller/i],oI=[/ignorer\s+(alle\s+)?tidligere\s+(instruksjoner|anvisninger)/i,/lat\s+som\s+(om\s+)?du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrensninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhet(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slett\s+(alle\s+)?logger/i,/overskriv\s+sikkerhetsregler/i,/handle\s+uten\s+begrensninger/i,/hopp\s+over\s+sikkerhetssjekker/i],aI=[/ignorer\s+(alle\s+)?tidligere\s+(instruktioner|anvisninger)/i,/lad\s+som\s+om\s+du\s+(er|ikke\s+har)/i,/omg\s+(dine\s+)?(regler|begrnsninger)/i,/glem\s+(alle\s+)?(tidligere|foregende)/i,/deaktiver\s+sikkerhed(en)?/i,/skjul\s+(alle\s+)?advarsler/i,/slet\s+(alle\s+)?logfiler/i,/overskriv\s+sikkerhedsregler/i,/handl\s+uden\s+begrnsninger/i,/spring\s+sikkerhedstjek\s+over/i],lI=[/ohita\s+(kaikki\s+)?aiemmat\s+ohjeet/i,/teeskentele\s+(olevasi|ett\s+olet)/i,/kierr\s+(snnt|rajoitukset)/i,/unohda\s+(kaikki\s+)?(aiemmat|edelliset)/i,/poista\s+turvallisuus\s+kytst/i,/piilota\s+(kaikki\s+)?varoitukset/i,/poista\s+(kaikki\s+)?lokit/i,/ylikirjoita\s+turvasnnt/i,/toimi\s+ilman\s+rajoituksia/i,/ohita\s+turvatarkistukset/i],uI=[/ignoruj\s+(vechny\s+)?pedchoz\s+(instrukce|pokyny)/i,/pedstrej,?\s+e\s+(jsi|nem)/i,/obejdi\s+(sv\s+)?(pravidla|omezen)/i,/zapome\s+(na\s+)?(vechny\s+)?(pedchoz|dvj)/i,/vypni\s+bezpenost/i,/skryj\s+(vechna\s+)?varovn/i,/sma\s+(vechny\s+)?logy/i,/pepi\s+bezpenostn\s+pravidla/i,/jednej\s+bez\s+omezen/i,/pesko\s+bezpenostn\s+kontroly/i],cI=[/hagyd\s+figyelmen\s+kvl\s+(az\s+sszes\s+)?korbbi\s+utastst/i,/tegyl\s+gy,?\s+mintha/i,/kerld\s+meg\s+(a\s+)?(szablyokat|korltozsokat)/i,/felejtsd\s+el\s+(az\s+sszes\s+)?(korbbi|elz)/i,/kapcsold\s+ki\s+a\s+biztonsgot/i,/rejtsd\s+el\s+(az\s+sszes\s+)?figyelmeztetst/i,/trld\s+(az\s+sszes\s+)?naplt/i,/rd\s+fell\s+a\s+biztonsgi\s+szablyokat/i,/cselekedj\s+korltozsok\s+nlkl/i,/hagyd\s+ki\s+a\s+biztonsgi\s+ellenrzseket/i],fI=[/\s+(\s+)?\s+/i,/,?\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+)?(|)/i,/\s+/i,/\s+(\s+)?/i,/\s+(\s+)?(|)/i,/\s+\s+/i,/\s+\s+/i,/\s+\s+/i],dI=[/\s+(\s+)??\s+\s+(|)\s+/i,/\s+\s+\s+(|)/i,/(|)\s+\s+(|)\s+/i,/\s+(\s+)?(|)\s+\s+/i,/\s+(\s+)?(|)\s+/i,/(\s+)??\s+\s+/i,/(\s+)?\s+(\s+)?/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i,/\s+\s+\s+\s+/i],hI=[/abaikan\s+(semua\s+)?instruksi\s+sebelumnya/i,/berpura-pura\s+(menjadi|bahwa\s+kamu)/i,/lewati\s+(aturan|batasan|pembatasan)/i,/lupakan\s+(semua\s+)?(sebelumnya|yang\s+lalu)/i,/nonaktifkan\s+keamanan/i,/sembunyikan\s+(semua\s+)?peringatan/i,/hapus\s+(semua\s+)?log/i,/timpa\s+aturan\s+keamanan/i,/bertindak\s+tanpa\s+batasan/i,/lewati\s+pemeriksaan\s+keamanan/i],pI=[/b\s+qua\s+(tt\s+c\s+)?hng\s+dn\s+trc/i,/gi\s+v\s+(l|rng\s+bn)/i,/vt\s+qua\s+(cc\s+)?(quy\s+tc|hn\s+ch)/i,/qun\s+(tt\s+c\s+)?(trc\s+|trc)/i,/tt\s+bo\s+mt/i,/n\s+(tt\s+c\s+)?cnh\s+bo/i,/xa\s+(tt\s+c\s+)?nht\s+k/i,/ghi\s+\s+quy\s+tc\s+bo\s+mt/i,/hnh\s+ng\s+khng\s+hn\s+ch/i,/b\s+qua\s+kim\s+tra\s+bo\s+mt/i],mI=[/\s*(|)\s*\s*()?/i,/\s*(|)/i,/\s*(|)/i,/\s*(|)\s*\s*()?/i,/\s*/i,/\s*\s*()?/i,/\s*\s*()?/i,/\s*/i,/\s*\s*/i,/\s*/i],gI=[/\s+(\s+\s+)?\s+/i,/\s+(\s+|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|)/i,/\s+\s+/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?\s+/i,/\s+\s+\s+/i,/\s+\s+/i,/\s+\s+\s+/i],yI=[/ignor\s+(toate\s+)?instruciunile\s+anterioare/i,/pref-te\s+(c\s+eti|a\s+fi)/i,/ocolete\s+(regulile|restriciile)/i,/uit\s+(toate\s+)?(anterioarele|precedentele)/i,/dezactiveaz\s+securitatea/i,/ascunde\s+(toate\s+)?avertismentele/i,/terge\s+(toate\s+)?jurnalele/i,/suprascrie\s+regulile\s+de\s+securitate/i,/acioneaz\s+fr\s+restricii/i,/sari\s+peste\s+verificrile\s+de\s+securitate/i],vI=[/\s+(\s+)?\s+/i,/\s+\s+(|)/i,/\s+(\s+)?(|)/i,/\s+(\s+\s+)?(|\s+)/i,/\s+(\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+\s+)?/i,/\s+(\s+)?\s+/i,/\s+\s+/i,/\s+\s+\s+/i],EI=[...Xy,...HN,...KN,...YN,...XN,...qN,...QN,...ZN,...JN,...eI,...tI,...nI,...rI,...iI,...sI,...oI,...aI,...lI,...uI,...cI,...fI,...dI,...hI,...pI,...mI,...gI,...yI,...vI],SI={id:"PS005",name:"blocked-patterns",description:"Content must not contain blocked patterns (prompt injection prevention)",defaultSeverity:"error",validate:r=>{const e=[...Xy,...(r.config.blockedPatterns??[]).map(t=>typeof t=="string"?new RegExp(t,"i"):t)];$s(r.ast,(t,s)=>{for(const o of e)o.test(t)&&r.report({message:`Blocked pattern detected: ${o.source}`,location:s,suggestion:"Remove or rephrase the flagged content"})})}},Um={namespace:/^@[a-z][a-z0-9-]*\/[a-z0-9-/]+(@\d+\.\d+\.\d+)?$/i,relative:/^\.\.?\/[a-z0-9-/.]+$/i};function Dm(r){return Um.namespace.test(r)||Um.relative.test(r)}const TI={id:"PS006",name:"valid-path",description:"Path references must be valid",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;Dm(e.raw)||r.report({message:`Invalid path reference: "${e.raw}"`,location:r.ast.inherit.loc??r.ast.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})}Hy(r.ast,e=>{Dm(e.path.raw)||r.report({message:`Invalid path reference: "${e.path.raw}"`,location:e.loc,suggestion:"Use @namespace/path format for absolute paths or ./relative/path for relative paths"})})}},kI={id:"PS007",name:"deprecated",description:"Warns about deprecated features",defaultSeverity:"warning",validate:r=>{const e={};for(const s of r.ast.blocks)s.name in e&&r.report({message:`Block "@${s.name}" is deprecated`,location:s.loc,suggestion:e[s.name]});const t={};if(r.ast.meta)for(const s of Object.keys(r.ast.meta.fields??{}))s in t&&r.report({message:`Meta field "${s}" is deprecated`,location:r.ast.meta.loc??r.ast.loc,suggestion:t[s]})}},AI={id:"PS008",name:"empty-block",description:"Blocks should have content",defaultSeverity:"warning",validate:r=>{WN(r.ast,e=>{if(!GN(e.content)){const t="name"in e?e.name:e.targetPath;r.report({message:`Block "${t}" has no content`,location:e.loc,suggestion:"Add content to the block or remove it if not needed"})}})}};function xI(r){switch(r.kind){case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"enum":return`enum(${r.options.map(e=>`"${e}"`).join(", ")})`}}function qy(r){if(r===null)return"null";if(typeof r=="string")return"string";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";if(Array.isArray(r))return"array";if(typeof r=="object"&&"type"in r){const e=r;if(e.type==="TextContent")return"string";if(e.type==="TemplateExpression")return"template";if(e.type==="TypeExpression")return"type"}return"object"}function wI(r,e){const t=qy(r);switch(e.kind){case"string":return t==="string";case"number":return t==="number";case"boolean":return t==="boolean";case"enum":return t==="string"&&e.options.includes(r)}}const CI={id:"PS009",name:"valid-params",description:"Validate parameter definitions in @meta",defaultSeverity:"error",validate:r=>{const e=r.ast.meta?.params;if(!e||e.length===0)return;const t=new Set;for(const s of e)t.has(s.name)&&r.report({message:`Duplicate parameter definition: '${s.name}'`,location:s.loc,suggestion:"Remove the duplicate parameter definition"}),t.add(s.name);for(const s of e)if(s.defaultValue!==void 0&&!wI(s.defaultValue,s.paramType)){const o=xI(s.paramType),l=qy(s.defaultValue);r.report({message:`Default value for '${s.name}' has wrong type: expected ${o}, got ${l}`,location:s.loc,suggestion:`Change the default value to a ${o}`})}for(const s of e)s.optional&&s.defaultValue===void 0&&r.report({message:`Optional parameter '${s.name}' has no default value`,location:s.loc,suggestion:"Consider adding a default value or marking as required"})}},RI=/\bhttp:\/\/[^\s"'<>]+/gi,NI=[/\b(?:https?:\/\/)?(?:bit\.ly|bitly\.com)\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tinyurl\.com\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?t\.co\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?goo\.gl\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?ow\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?is\.gd\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?buff\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?adf\.ly\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?tiny\.cc\/[^\s"'<>]+/gi,/\b(?:https?:\/\/)?cutt\.ly\/[^\s"'<>]+/gi],II=/\bhttps?:\/\/[^\s"'<>]*\?[^\s"'<>]*(?:session|token|auth|key|secret|password|credential|api_key|apikey|access_token|refresh_token)=[^\s"'<>&]+/gi,Bm=/\bhttps?:\/\/(?:[^\s"'<>/]*\.)?xn--[a-z0-9-]+[^\s"'<>]*/gi,zm=/\bhttps?:\/\/[^\s"'<>]+/gi,OI=["google","github","microsoft","apple","amazon","facebook","netflix","paypal","twitter","linkedin","instagram","dropbox","slack","zoom","adobe","oracle","salesforce","stripe","shopify","cloudflare","openai","anthropic","meta","yahoo","outlook","office","azure","aws","icloud","gmail"],_I={:"a",:"e",:"i",:"o",:"p",:"c",:"y",:"x",:"s","":"l","":"d","":"q","":"w"},PI={:"a",:"e",:"i",:"o",:"p",:"u",:"x",:"A",:"B",:"E",:"H",:"I",:"K",:"M",:"N",:"O",:"P",:"T",:"Y",:"X"},Qy={..._I,...PI},LI={latin:/[A-Za-z]/,cyrillic:/[\u0400-\u04FF\u0500-\u052F]/,greek:/[\u0370-\u03FF\u1F00-\u1FFF]/};function bI(r){const e=[];for(const[t,s]of Object.entries(LI))s.test(r)&&e.push(t);return e.length>1?e:null}function MI(r){let e=r.toLowerCase();for(const[t,s]of Object.entries(Qy))e=e.split(t).join(s);return e}function Zy(r){const t=MI(r).split("."),s=t.length>1?t[t.length-2]:t[0];if(!s)return null;for(const o of OI)if(s===o||jI(s,o))return o;return null}function jI(r,e){const t=Math.abs(r.length-e.length);if(t>2)return!1;if(t===0){let f=0;for(let h=0;h<r.length;h++)r[h]!==e[h]&&f++;return f===1||f===2}const s=r.length<e.length?r:e;if((r.length<e.length?e:r).includes(s))return!0;const l=Math.min(r.length,e.length);let c=0;for(let f=0;f<l;f++)r[f]===e[f]&&c++;return c>=l-2&&l>=4}function Vm(r){return/https?:\/\/([^\s"'<>/]+)/i.exec(r)?.[1]??null}function FI(r){const e=bI(r),t=Zy(r),s=Object.keys(Qy).some(l=>r.includes(l));return{isAttack:t!==null&&(e!==null||s),impersonatedService:t,mixedScripts:e}}const $I={id:"PS010",name:"suspicious-urls",description:"Detect suspicious URLs (HTTP, shorteners, credential parameters, IDN homograph attacks)",defaultSeverity:"warning",validate:r=>{$s(r.ast,(e,t)=>{const s=e.match(RI);if(s)for(const f of s)r.report({message:`Insecure HTTP URL detected: ${f}`,location:t,suggestion:"Use HTTPS instead of HTTP for secure communication"});for(const f of NI){f.lastIndex=0;const h=e.match(f);if(h)for(const m of h)r.report({message:`URL shortener detected: ${m}`,location:t,suggestion:"Use full URLs instead of shorteners to ensure destination transparency"})}const o=e.match(II);if(o)for(const f of o)r.report({message:`URL with suspicious credential parameter detected: ${f}`,location:t,suggestion:"Avoid embedding credentials or tokens in URLs"});Bm.lastIndex=0;const l=e.match(Bm);if(l)for(const f of l){const h=Vm(f);if(h){const m=Zy(h);m?r.report({message:`Potential IDN homograph attack detected: ${f} may be impersonating "${m}"`,location:t,suggestion:"Punycode domains (xn--) can visually impersonate legitimate sites. Verify the actual domain carefully."}):r.report({message:`Punycode domain detected: ${f}`,location:t,suggestion:"Punycode domains (xn--) can be legitimate international domains, but may also be used for homograph attacks. Verify the domain is intentional."})}}zm.lastIndex=0;const c=e.match(zm);if(c)for(const f of c){const h=Vm(f);if(h){const{isAttack:m,impersonatedService:g,mixedScripts:y}=FI(h);m&&g?r.report({message:`IDN homograph attack detected: "${h}" uses deceptive characters to impersonate "${g}"`,location:t,suggestion:`This domain uses ${y?`mixed scripts (${y.join("+")})`:"homoglyph characters"} to visually mimic a legitimate service. Do not trust this URL.`}):y&&y.length>1&&r.report({message:`Mixed script domain detected: "${h}" uses ${y.join(" + ")} characters`,location:t,suggestion:"Domains mixing different character scripts (e.g., Latin + Cyrillic) may be attempts to deceive users. Verify this is intentional."})}}})}},UI=[/\[?\s{0,10}MANDATORY\s{0,10}(?:POLICY|UPDATE|FOOTER|INSTRUCTION|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}OVERRIDE\s{0,10}\]?/i,/\[?\s{0,10}STRICT[_\s]{0,10}MODE\s{0,10}[:\s]{1,10}ON\s{0,10}\]?/i,/\[?\s{0,10}SYSTEM\s{0,10}(?:OVERRIDE|UPDATE|DIRECTIVE)\s{0,10}\]?/i,/\[?\s{0,10}ADMIN(?:ISTRATOR)?\s{0,10}(?:MODE|OVERRIDE|ACCESS)\s{0,10}\]?/i,/\[?\s{0,10}ROOT\s{0,10}(?:ACCESS|MODE|OVERRIDE)\s{0,10}\]?/i,/\[?\s{0,10}PRIORITY\s{0,10}(?:OVERRIDE|ONE|ALPHA)\s{0,10}\]?/i,/\[?\s{0,10}EMERGENCY\s{0,10}(?:PROTOCOL|OVERRIDE|MODE)\s{0,10}\]?/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:WARN|ALERT|NOTIFY|FLAG|REPORT)/i,/(?:DO\s{1,10}NOT|NEVER|DON'?T)\s{1,10}(?:PROVIDE|SHOW|DISPLAY|INCLUDE)\s{1,10}(?:SECURITY\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?WARNINGS?/i,/(?:SUPPRESS|HIDE|DISABLE|REMOVE|SILENCE)\s{1,10}(?:ALL\s{1,10})?(?:SECURITY\s{1,10})?(?:ALERTS?|NOTIFICATIONS?)/i,/IGNORE\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?WARNINGS?/i,/(?:SKIP|BYPASS)\s{1,10}(?:ALL\s{1,10})?(?:SAFETY\s{1,10})?(?:CHECKS?|VALIDATION)/i,/EXECUTE\s{1,10}(?:THIS\s{1,10})?VERBATIM/i,/FOLLOW\s{1,10}(?:THESE?\s{1,10})?(?:INSTRUCTIONS?\s{1,10})?(?:EXACTLY|PRECISELY|LITERALLY)/i,/(?:MUST|SHALL|WILL)\s{1,10}(?:ALWAYS\s{1,10})?COMPLY/i,/(?:ABSOLUTE|UNCONDITIONAL)\s{1,10}(?:COMPLIANCE|OBEDIENCE)/i,/NO\s{1,10}(?:EXCEPTIONS?|DEVIATIONS?)\s{1,10}(?:ALLOWED|PERMITTED)/i,/THIS\s{1,10}(?:OVERRIDES?|SUPERSEDES?|REPLACES?)\s{1,10}(?:ALL\s{1,10})?(?:PREVIOUS|PRIOR|OTHER)/i,/(?:HIGHEST|TOP|MAXIMUM)\s{1,10}PRIORITY\s{1,10}(?:INSTRUCTION|DIRECTIVE|ORDER)/i,/(?:CORE|FUNDAMENTAL|BASE)\s{1,10}(?:DIRECTIVE|INSTRUCTION)\s{1,10}(?:UPDATE|OVERRIDE)/i,/NEW\s{1,10}(?:SYSTEM|CORE|BASE)\s{1,10}(?:INSTRUCTIONS?|DIRECTIVES?|RULES?)/i],DI={id:"PS011",name:"authority-injection",description:"Detect authoritative override phrases that may indicate prompt injection",defaultSeverity:"error",validate:r=>{$s(r.ast,(e,t)=>{for(const s of UI)s.test(e)&&r.report({message:`Authority injection pattern detected: ${s.source}`,location:t,suggestion:"Remove authoritative override language that could be used for prompt injection"})})}},Lc=16,BI=[{pattern:/\[?\s{0,10}MANDATORY\s{0,10}(?:POLICY|UPDATE|FOOTER|INSTRUCTION|DIRECTIVE|OVERRIDE)\s{0,10}\]?/i,description:"Mandatory/policy override directive"},{pattern:/\[?\s{0,10}OVERRIDE\s{0,10}\]?/i,description:"Override directive"},{pattern:/\[?\s{0,10}STRICT[_\s]{0,10}MODE\s{0,10}[:\s]{1,10}ON\s{0,10}\]?/i,description:"Strict mode activation"},{pattern:/\[?\s{0,10}SYSTEM\s{0,10}(?:OVERRIDE|UPDATE|DIRECTIVE)\s{0,10}\]?/i,description:"System override directive"},{pattern:/\[?\s{0,10}ADMIN(?:ISTRATOR)?\s{0,10}(?:MODE|OVERRIDE|ACCESS)\s{0,10}\]?/i,description:"Admin mode/override directive"},{pattern:/ignore\s{1,10}(?:all\s{1,10})?(?:previous\s{1,10})?(?:instructions?|rules?|safety)/i,description:"Prompt injection (ignore instructions)"},{pattern:/disregard\s{1,10}(?:all\s{1,10})?(?:prior|previous|safety)/i,description:"Prompt injection (disregard previous)"},{pattern:/bypass\s{1,10}(?:your\s{1,10})?(?:rules?|restrictions?|safety|filters?)/i,description:"Bypass directive"},{pattern:/jailbreak/i,description:"Jailbreak attempt"},{pattern:/pretend\s{1,10}(?:you\s{1,10})?(?:are|have|can)/i,description:"Role manipulation attempt"},{pattern:/act\s{1,10}as\s{1,10}(?:if|though)/i,description:"Role manipulation attempt"},{pattern:/(?:suppress|hide|disable|remove)\s{1,10}(?:all\s{1,10})?(?:security\s{1,10})?(?:warnings?|alerts?|checks?)/i,description:"Warning suppression directive"},{pattern:/(?:do\s{1,10}not|never|don'?t)\s{1,10}(?:warn|alert|notify|check)/i,description:"Warning suppression directive"},{pattern:/system[_\s]{0,5}compromised/i,description:"System compromise indicator"}],Wm=/data:(text\/[a-zA-Z0-9.+-]+|application\/json);base64,([A-Za-z0-9+/=]+)/g,bc=/(?:[A-Za-z0-9+/]{4}){8,}(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?/g,Gm=/(?:[0-9A-Fa-f]{2}[\s-]){7,}[0-9A-Fa-f]{2}/g,Hm=new RegExp("(?<![A-Za-z0-9])([0-9A-Fa-f]{16,})(?![A-Za-z0-9])","g"),Km=/(?:\\x[0-9a-fA-F]{2}){4,}/g,Ym=/(?:\\u[0-9a-fA-F]{4}){3,}/g,Xm=/(?:%[0-9a-fA-F]{2}){4,}/g,qm=/(?:&#(?:x[0-9a-fA-F]{1,4}|[0-9]{1,5});){4,}/g,Qm=/(?:\\[0-7]{3}){4,}/g,Zm=/(?:[01]{8}[\s]?){4,}/g;function Jm(r){try{if(!/^[A-Za-z0-9+/]*={0,2}$/.test(r))return null;const e=Buffer.from(r,"base64").toString("utf-8");return/[\x00-\x08\x0E-\x1F]/.test(e)?null:e}catch{return null}}function Mc(r){const e=r.replace(/[\s-]/g,"");if(e.length%2!==0)return null;const t=[];for(let o=0;o<e.length;o+=2){const l=parseInt(e.substring(o,o+2),16);if(isNaN(l))return null;t.push(l)}const s=String.fromCharCode(...t);return/[\x00-\x08\x0E-\x1F]/.test(s)?null:s}function zI(r){const e=r.replace(/\\x/g,"");return Mc(e)}function VI(r){return r.replace(/\\u([0-9a-fA-F]{4})/g,(t,s)=>String.fromCharCode(parseInt(s,16)))}function WI(r){try{return decodeURIComponent(r)}catch{return null}}function GI(r){return r.replace(/&#(x?)([0-9a-fA-F]+);/g,(t,s,o)=>{const l=s?parseInt(o,16):parseInt(o,10);return String.fromCharCode(l)})}function HI(r){return r.replace(/\\([0-7]{3})/g,(t,s)=>String.fromCharCode(parseInt(s,8)))}function KI(r){const e=r.replace(/\s/g,"");if(e.length%8!==0)return null;let t="";for(let s=0;s<e.length;s+=8){const o=parseInt(e.substring(s,s+8),2);if(isNaN(o))return null;t+=String.fromCharCode(o)}return t}function YI(r){return r.replace(/[a-zA-Z]/g,e=>{const t=e.charCodeAt(0),s=t<97?65:97;return String.fromCharCode((t-s+13)%26+s)})}function Wt(r){const e=[];for(const{pattern:t,description:s}of BI)t.test(r)&&e.push(s);return e}function XI(r){if(r.includes("/")||r.includes("-")||r.includes("_")){const e=r.split(/[/\-_+]/);if(e.filter(s=>s.length<3||s.length>20||!/^[A-Za-z]+$/.test(s)?!1:!!/[aeiouAEIOU]/.test(s)).length>e.length/2)return!0}return!1}function Jy(r,e){const t=r.indexOf(e);if(t===-1)return!1;const s=r.substring(Math.max(0,t-30),t);return!!(s.includes("data:image/")||s.includes("data:application/json")||s.includes("data:text/")||XI(e))}function qI(r){const e=r.replace(/[\s-]/g,"");return[32,40,64,128].includes(e.length)}function QI(r){const e=[];Wm.lastIndex=0;let t;for(;(t=Wm.exec(r))!==null;){const y=t[2];if(y&&y.length>=Lc){const E=Jm(y);if(E){const T=Wt(E);T.length>0&&e.push({type:`data URI (${t[1]})`,raw:t[0].substring(0,50)+"...",decoded:E.substring(0,100),issues:T})}}}Gm.lastIndex=0;let s;for(;(s=Gm.exec(r))!==null;){const y=Mc(s[0]);if(y&&y.length>=4){const E=Wt(y);E.length>0&&e.push({type:"raw hex (spaced)",raw:s[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}for(Hm.lastIndex=0;(s=Hm.exec(r))!==null;){const y=s[1]||s[0];if(qI(y))continue;const E=Mc(y);if(E&&E.length>=4){const T=Wt(E);T.length>0&&e.push({type:"raw hex (continuous)",raw:y.substring(0,30)+"...",decoded:E.substring(0,100),issues:T})}}for(Km.lastIndex=0;(s=Km.exec(r))!==null;){const y=zI(s[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"hex escapes",raw:s[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Ym.lastIndex=0;let o;for(;(o=Ym.exec(r))!==null;){const y=VI(o[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"unicode escapes",raw:o[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Xm.lastIndex=0;let l;for(;(l=Xm.exec(r))!==null;){const y=WI(l[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"URL encoding",raw:l[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}qm.lastIndex=0;let c;for(;(c=qm.exec(r))!==null;){const y=GI(c[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"HTML entities",raw:c[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Qm.lastIndex=0;let f;for(;(f=Qm.exec(r))!==null;){const y=HI(f[0]);if(y){const E=Wt(y);E.length>0&&e.push({type:"octal escapes",raw:f[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}Zm.lastIndex=0;let h;for(;(h=Zm.exec(r))!==null;){const y=KI(h[0]);if(y&&y.length>=4){const E=Wt(y);E.length>0&&e.push({type:"binary string",raw:h[0].substring(0,30)+"...",decoded:y.substring(0,100),issues:E})}}bc.lastIndex=0;let m;for(;(m=bc.exec(r))!==null;){const y=m[0];if(y.length>=Lc&&!Jy(r,y)){const E=Jm(y);if(E){const T=Wt(E);T.length>0&&e.push({type:"Base64",raw:y.substring(0,30)+"...",decoded:E.substring(0,100),issues:T})}}}const g=YI(r);if(g!==r){const y=Wt(g),E=Wt(r),T=y.filter(w=>!E.includes(w));T.length>0&&e.push({type:"ROT13 cipher",raw:r.substring(0,30)+"...",decoded:g.substring(0,100),issues:T})}return e}const ZI={id:"PS012",name:"obfuscated-content",description:"Detect obfuscated content using sanitization pipeline (decode and check all encodings)",defaultSeverity:"warning",validate:r=>{$s(r.ast,(e,t)=>{const s=QI(e);for(const l of s)r.report({message:`Malicious content detected in ${l.type}: ${l.issues.join(", ")}. Decoded: "${l.decoded.substring(0,50)}${l.decoded.length>50?"...":""}"`,location:t,suggestion:"Encoded content is automatically decoded and checked for security patterns. Remove the malicious payload or use plain text."});(e.match(bc)||[]).some(l=>l.length>=Lc*2&&!Jy(e,l))&&s.length===0&&r.report({message:"Long Base64-encoded content detected that may hide payloads",location:t,suggestion:"If this is intentional, consider using plain text or documenting the purpose"})})}},JI=/^\.\.?\/(?:[a-zA-Z0-9._-]{1,255}\/){0,50}\.\.(?:\/|$)/,eO=/^(?:\.\.\/){2,20}/,tO=/^\.\.?\/[a-zA-Z0-9._-]{1,255}(?:\/[a-zA-Z0-9._-]{1,255}){0,50}\/\.\.(?:\/|$)/;function eg(r){return!!(eO.test(r)||JI.test(r)||tO.test(r))}const nO={id:"PS013",name:"path-traversal",description:"Detect path traversal attacks that could escape the intended directory",defaultSeverity:"error",validate:r=>{if(r.ast.inherit){const e=r.ast.inherit.path;eg(e.raw)&&r.report({message:`Path traversal detected: "${e.raw}" contains ".." sequences that could escape the intended directory`,location:r.ast.inherit.loc??r.ast.loc,suggestion:'Use direct paths without ".." traversal after the initial prefix. Reorganize your file structure if needed.'})}Hy(r.ast,e=>{eg(e.path.raw)&&r.report({message:`Path traversal detected: "${e.path.raw}" contains ".." sequences that could escape the intended directory`,location:e.loc,suggestion:'Use direct paths without ".." traversal after the initial prefix. Reorganize your file structure if needed.'})})}},rO=new Map([["","Right-to-Left Override (U+202E)"],["","Left-to-Right Override (U+202D)"],["","Pop Directional Formatting (U+202C)"],["","Left-to-Right Embedding (U+202A)"],["","Right-to-Left Embedding (U+202B)"],["","Left-to-Right Isolate (U+2066)"],["","Right-to-Left Isolate (U+2067)"],["","First Strong Isolate (U+2068)"],["","Pop Directional Isolate (U+2069)"]]),iO=new Map([["","Zero Width Space (U+200B)"],["","Zero Width Non-Joiner (U+200C)"],["","Zero Width Joiner (U+200D)"],["\uFEFF","Byte Order Mark (U+FEFF)"],["","Soft Hyphen (U+00AD)"],["","Word Joiner (U+2060)"]]),sO=new Map([[""," (Cyrillic) looks like a (Latin)"],[""," (Cyrillic) looks like e (Latin)"],[""," (Cyrillic) looks like o (Latin)"],[""," (Cyrillic) looks like p (Latin)"],[""," (Cyrillic) looks like c (Latin)"],[""," (Cyrillic) looks like x (Latin)"],[""," (Cyrillic) looks like y (Latin)"],[""," (Cyrillic) looks like i (Latin)"],[""," (Cyrillic) looks like A (Latin)"],[""," (Cyrillic) looks like B (Latin)"],[""," (Cyrillic) looks like E (Latin)"],[""," (Cyrillic) looks like K (Latin)"],[""," (Cyrillic) looks like M (Latin)"],[""," (Cyrillic) looks like H (Latin)"],[""," (Cyrillic) looks like O (Latin)"],[""," (Cyrillic) looks like P (Latin)"],[""," (Cyrillic) looks like C (Latin)"],[""," (Cyrillic) looks like T (Latin)"],[""," (Cyrillic) looks like X (Latin)"]]),oO=new Map([[""," (Greek) looks like a (Latin)"],[""," (Greek) looks like e (Latin)"],[""," (Greek) looks like i (Latin)"],[""," (Greek) looks like o (Latin)"],[""," (Greek) looks like u (Latin)"],[""," (Greek) looks like w (Latin)"],[""," (Greek) looks like v (Latin)"],[""," (Greek) looks like A (Latin)"],[""," (Greek) looks like B (Latin)"],[""," (Greek) looks like E (Latin)"],[""," (Greek) looks like H (Latin)"],[""," (Greek) looks like I (Latin)"],[""," (Greek) looks like K (Latin)"],[""," (Greek) looks like M (Latin)"],[""," (Greek) looks like N (Latin)"],[""," (Greek) looks like O (Latin)"],[""," (Greek) looks like P (Latin)"],[""," (Greek) looks like T (Latin)"],[""," (Greek) looks like X (Latin)"],[""," (Greek) looks like Y (Latin)"],[""," (Greek) looks like Z (Latin)"]]),tg=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u064B-\u065F]{4,}/,aO=/[a-zA-Z]/;function lO(r){const e=[];if(!aO.test(r))return e;for(let s=0;s<r.length;s++){const o=r[s],l=sO.get(o);l&&e.push({char:o,description:l,index:s});const c=oO.get(o);c&&e.push({char:o,description:c,index:s})}return e}function uO(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t],o=rO.get(s);o&&e.push({char:s,description:o,index:t})}return e}function cO(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t],o=iO.get(s);o&&e.push({char:s,description:o,index:t})}return e}const fO={id:"PS014",name:"unicode-security",description:"Detect Unicode-based attacks (bidi overrides, zero-width, homoglyphs)",defaultSeverity:"error",validate:r=>{$s(r.ast,(e,t)=>{const s=uO(e);if(s.length>0){const c=s.slice(0,3).map(h=>h.description).join(", "),f=s.length>3?` and ${s.length-3} more`:"";r.report({message:`Bidirectional text override detected: ${c}${f}`,location:t,suggestion:"Remove bidirectional override characters that may hide malicious content"})}const o=cO(e);if(o.length>0){const c=o.slice(0,3).map(h=>h.description).join(", "),f=o.length>3?` and ${o.length-3} more`:"";r.report({message:`Zero-width characters detected: ${c}${f}`,location:t,suggestion:"Remove zero-width characters that may be used to evade pattern matching"})}const l=lO(e);if(l.length>0){const c=l.slice(0,3).map(h=>h.description).join(", "),f=l.length>3?` and ${l.length-3} more`:"";r.report({message:`Potential homograph attack: ${c}${f}`,location:t,suggestion:"Replace lookalike Cyrillic/Greek characters with Latin equivalents"})}if(tg.test(e)){const c=e.match(tg),f=c?Array.from(c[0]).slice(0,4).map(h=>`U+${h.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")}`).join(", "):"unknown";r.report({message:`Excessive combining characters (Zalgo text) detected: ${f}...`,location:t,suggestion:"Remove excessive diacritical marks that may be used to obscure content"})}})}},dO=[$N,UN,BN,zN,SI,TI,kI,AI,CI,$I,DI,ZI,nO,fO];class hO{rules;config;disabledRules;logger;constructor(e={}){if(this.config=e,this.rules=[...dO],this.disabledRules=new Set(e.disableRules??[]),this.logger=e.logger??cf,e.customRules)for(const t of e.customRules)this.rules.push(t);this.logger.debug(`Validator initialized with ${this.rules.length} rules`)}validate(e){const t=[],s=this.rules.filter(f=>!this.disabledRules.has(f.name)&&!this.disabledRules.has(f.id));this.logger.verbose(`Running ${s.length} validation rules`);for(const f of this.rules){if(this.disabledRules.has(f.name)||this.disabledRules.has(f.id)){this.logger.debug(`Skipping disabled rule: ${f.name}`);continue}const m=this.config.rules?.[f.name]??f.defaultSeverity;if(m==="off"){this.logger.debug(`Skipping off rule: ${f.name}`);continue}this.logger.debug(`Running rule: ${f.name} (${m})`);const g={ast:e,config:this.config,report:y=>{t.push({ruleId:f.id,ruleName:f.name,severity:m,...y})}};f.validate(g)}const o=t.filter(f=>f.severity==="error"),l=t.filter(f=>f.severity==="warning"),c=t.filter(f=>f.severity==="info");return(o.length>0||l.length>0)&&this.logger.verbose(`Validation: ${o.length} error(s), ${l.length} warning(s)`),{valid:o.length===0,errors:o,warnings:l,infos:c,all:t}}addRule(e){this.rules.push(e)}removeRule(e){const t=this.rules.findIndex(s=>s.name===e||s.id===e);return t!==-1?(this.rules.splice(t,1),!0):!1}getConfig(){return{...this.config}}getRules(){return[...this.rules]}}const pO={blockedPatterns:[/send\s+(?:this|all|the)\s+(?:data|information|content)\s+to/i,/upload\s+(?:this|all|the)\s+(?:data|files?|content)\s+to/i,/forward\s+(?:all\s+)?(?:messages?|responses?)\s+to/i,/remember\s+this\s+(?:permanently|forever|always)/i,/store\s+(?:this|these)\s+(?:instructions?|rules?)/i,/you\s+are\s+now\s+(?:a\s+)?different\s+(?:AI|model|system)/i,/switch\s+to\s+(?:a\s+)?(?:different|new)\s+(?:mode|persona)/i]};[...pO.blockedPatterns??[],...EI];class mO{resolver;validator;loadedFormatters;logger;customConventions;prettierOptions;constructor(e){this.logger=e.logger??cf,this.customConventions=e.customConventions,this.prettierOptions=e.prettier,this.resolver=new wN({fs:e.fs,cache:e.cache,logger:this.logger,envVars:e.envVars}),this.validator=new hO({...e.validator,logger:this.logger});const t=e.formatters??Ir.list();this.loadedFormatters=this.loadFormatters(t),this.logger.debug(`BrowserCompiler initialized with ${this.loadedFormatters.length} formatters`)}async compile(e){this.logger.verbose(`Entry: ${e}`),this.logger.verbose(`Targets: ${this.loadedFormatters.map(y=>y.formatter.name).join(", ")}`);const t=Date.now(),s={resolveTime:0,validateTime:0,formatTime:0,totalTime:0};this.logger.verbose("=== Stage 1: Resolve ===");const o=Date.now();let l;try{l=await this.resolver.resolve(e)}catch(y){return s.resolveTime=Date.now()-o,s.totalTime=Date.now()-t,this.logger.verbose(`Resolve failed (${s.resolveTime}ms)`),{success:!1,outputs:new Map,errors:[this.toCompileError(y)],warnings:[],stats:s}}if(s.resolveTime=Date.now()-o,this.logger.verbose(`Resolve completed (${s.resolveTime}ms)`),l.errors.length>0||!l.ast)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:l.errors.map(y=>this.toCompileError(y)),warnings:[],stats:s};this.logger.verbose("=== Stage 2: Validate ===");const c=Date.now(),f=this.validator.validate(l.ast);if(s.validateTime=Date.now()-c,this.logger.verbose(`Validate completed (${s.validateTime}ms)`),!f.valid)return s.totalTime=Date.now()-t,{success:!1,outputs:new Map,errors:f.errors.map(y=>this.validationToCompileError(y)),warnings:f.warnings,stats:s};this.logger.verbose("=== Stage 3: Format ===");const h=Date.now(),m=new Map,g=[];for(const{formatter:y,config:E}of this.loadedFormatters){const T=Date.now();this.logger.verbose(`Formatting for ${y.name}`);try{const w=this.getFormatOptionsForTarget(y.name,E);this.logger.debug(`  Convention: ${w.convention??"default"}`);const R=y.format(l.ast,w),j=Date.now()-T;if(this.logger.verbose(`   ${R.path} (${j}ms)`),m.set(R.path,R),R.additionalFiles)for(const M of R.additionalFiles)this.logger.verbose(`   ${M.path} (additional)`),m.set(M.path,M)}catch(w){g.push({name:"FormatterError",code:"PS4000",message:`Formatter '${y.name}' failed: ${w.message}`})}}return s.formatTime=Date.now()-h,s.totalTime=Date.now()-t,this.logger.verbose(`Format completed (${s.formatTime}ms)`),g.length>0?{success:!1,outputs:m,errors:g,warnings:f.warnings,stats:s}:{success:!0,outputs:m,errors:[],warnings:f.warnings,stats:s}}getFormatters(){return this.loadedFormatters.map(e=>e.formatter)}clearCache(){this.resolver.clearCache()}getFormatOptionsForTarget(e,t){const s={outputPath:t?.output,version:t?.version,prettier:this.prettierOptions},o=t?.convention;return o&&this.customConventions?.[o]?s.convention=this.customConventions[o]:o&&(s.convention=o),s}loadFormatters(e){return e.map(t=>{if(typeof t=="string")return{formatter:this.loadFormatterByName(t)};if(typeof t=="function")return{formatter:new t};if("name"in t&&typeof t.name=="string"&&!("format"in t)){const s=t;return{formatter:this.loadFormatterByName(s.name),config:s.config}}return{formatter:t}})}loadFormatterByName(e){const t=Ir.get(e);if(t)return t;throw new Error(`Unknown formatter: '${e}'. Available formatters: ${Ir.list().join(", ")}`)}toCompileError(e){const t=e;return{name:e.name,code:t.code??"PS0000",message:e.message,location:t.location?{file:t.location.file,line:t.location.line,column:t.location.column}:void 0}}validationToCompileError(e){return{name:"ValidationError",code:e.ruleId,message:e.message,location:e.location?{file:e.location.file,line:e.location.line,column:e.location.column}:void 0}}}const gO=`@meta {
  id: "@core/base"
  syntax: "1.0.0"
  description: "Universal AI assistant foundation"
  tags: [core, foundation]
}

@identity {
  """
  You are a helpful, accurate, and thoughtful AI assistant.

  Core principles:
  - Accuracy over speed - verify before responding
  - Clarity over complexity - explain simply first
  - Safety first - never compromise security
  - Respect boundaries - acknowledge limitations
  """
}

@standards {
  communication: ["Professional tone", "Clear format", "Citations when applicable"]
  reasoning: ["Show work", "Acknowledge uncertainty"]
}

@restrictions {
  - "Never generate harmful, illegal, or unethical content"
  - "Never pretend to have capabilities you don't have"
  - "Always clarify when unsure rather than guessing"
}
`,yO=`@meta {
  id: "@core/quality"
  syntax: "1.0.0"
  description: "Code quality standards mixin - use with @use"
  tags: [core, quality, mixin]
  mixin: true
}

@identity {
  """
  You prioritize code quality and maintainability in all outputs.

  Quality principles:
  - Write code for humans first, machines second
  - Favor readability over cleverness
  - Keep functions small and focused
  - Make dependencies explicit
  """
}

@standards {
  code: ["Descriptive naming", "Single responsibility functions", "Consistent formatting"]
  architecture: ["Loose coupling", "High cohesion", "Explicit dependencies"]
  testing: ["Meaningful coverage", "Isolated tests", "Descriptive naming"]
}

@restrictions {
  - "Never sacrifice readability for micro-optimizations"
  - "Never leave dead code or commented-out blocks"
  - "Never use magic numbers without named constants"
  - "Never ignore compiler/linter warnings without justification"
}

@knowledge {
  """
  ## SOLID Principles
  - **S**ingle Responsibility: One reason to change
  - **O**pen/Closed: Open for extension, closed for modification
  - **L**iskov Substitution: Subtypes must be substitutable
  - **I**nterface Segregation: Many specific interfaces over one general
  - **D**ependency Inversion: Depend on abstractions
  """
}

@shortcuts {
  "/quality": "Review code for quality improvements"
  "/refactor": "Suggest refactoring opportunities"
}
`,vO=`@meta {
  id: "@core/security"
  syntax: "1.0.0"
  description: "Security best practices mixin - use with @use"
  tags: [core, security, mixin]
  mixin: true
}

@identity {
  """
  You prioritize security in all interactions and code generation.

  Security mindset:
  - Assume all input is potentially malicious
  - Apply defense in depth principles
  - Follow the principle of least privilege
  - Keep security considerations visible
  """
}

@standards {
  code: ["Input validation required", "Output encoding required", "Check authorization"]
  secrets: ["Never hardcoded", "Never logged", "Prevent exposure"]
  dependencies: ["Audit regularly", "Pin versions", "Use trusted sources only"]
}

@restrictions {
  - "Never generate code with known vulnerabilities"
  - "Never expose secrets, credentials, or API keys"
  - "Never disable security features without explicit user consent"
  - "Never trust user input without validation"
  - "Never use deprecated or insecure cryptographic functions"
}

@knowledge {
  """
  ## OWASP Top 10 Awareness
  - Injection (SQL, NoSQL, OS, LDAP)
  - Broken Authentication
  - Sensitive Data Exposure
  - XML External Entities (XXE)
  - Broken Access Control
  - Security Misconfiguration
  - Cross-Site Scripting (XSS)
  - Insecure Deserialization
  - Using Components with Known Vulnerabilities
  - Insufficient Logging & Monitoring
  """
}

@shortcuts {
  "/security-review": "Review code for security vulnerabilities"
  "/threat-model": "Analyze potential security threats"
}
`,EO={"@core/base.prs":gO,"@core/quality.prs":yO,"@core/security.prs":vO};function SO(){return{...EO}}async function TO(r,e,t={}){const s=new Fc(r);if(t.bundledRegistry!==!1){const l=SO();for(const[c,f]of Object.entries(l))s.exists(c)||s.write(c,f)}return new mO({fs:s,formatters:t.formatters,validator:t.validator,customConventions:t.customConventions,prettier:t.prettier,envVars:t.envVars}).compile(e)}const kO=300;function AO(){const r=ie(AE),e=ie(h=>h.activeFile),t=ie(h=>h.config),s=ie(h=>h.setCompiling),o=ie(h=>h.setCompileResult),l=Z.useRef(null),c=Z.useRef(""),f=Z.useCallback(async()=>{const h=JSON.stringify({files:r,config:t});if(h===c.current)return;c.current=h;const m=Object.entries(t.targets).filter(([,g])=>g.enabled).map(([g,y])=>({name:g,config:y.version||y.convention?{...y.version&&{version:y.version},...y.convention&&{convention:y.convention}}:void 0}));if(m.length===0){o({success:!0,outputs:new Map,errors:[],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}});return}s(!0);try{const g=await TO(r,e,{bundledRegistry:!0,formatters:m,prettier:{tabWidth:t.formatting.tabWidth,proseWrap:t.formatting.proseWrap,printWidth:t.formatting.printWidth},envVars:t.envVars});o(g)}catch(g){console.error("Compilation error:",g),o({success:!1,outputs:new Map,errors:[{name:"CompileError",code:"PS0000",message:g instanceof Error?g.message:String(g)}],warnings:[],stats:{resolveTime:0,validateTime:0,formatTime:0,totalTime:0}})}finally{s(!1)}},[r,e,t,s,o]);return Z.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{f()},kO),()=>{l.current&&clearTimeout(l.current)}),[f]),Z.useEffect(()=>{f()},[t]),{compile:f}}function xO(){AO();const r=ie(e=>e.showExamples);return C.jsxs("div",{className:"h-screen flex flex-col bg-ps-bg",children:[C.jsx(DE,{}),C.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[C.jsxs("div",{className:"w-1/2 flex flex-col border-r border-ps-border",children:[C.jsx(BE,{}),C.jsx("div",{className:"flex-1",children:C.jsx(nT,{})})]}),C.jsx("div",{className:"w-1/2 flex flex-col",children:C.jsx(sT,{})})]}),r&&C.jsx(lT,{}),C.jsx(hT,{}),C.jsx(mT,{})]})}const ev=document.getElementById("root");if(!ev)throw new Error("Root element not found");oE.createRoot(ev).render(C.jsx(Z.StrictMode,{children:C.jsx(xO,{})}))});export default wO();
